(self.webpackChunkgrafana=self.webpackChunkgrafana||[]).push([[6749],{94929:(Z,O,e)=>{"use strict";e.d(O,{n:()=>l});var t=e(68404),n=e(29002);function l(s){const{children:i,instanceSettings:f}=s,c=(0,t.useMemo)(()=>({instanceSettings:f,meta:f.meta}),[f]);return t.createElement(n._.Provider,{value:c},i)}},29002:(Z,O,e)=>{"use strict";e.d(O,{_:()=>n});var t=e(68404);const n=(0,t.createContext)(void 0)},20231:(Z,O,e)=>{"use strict";e.d(O,{b:()=>l});var t=e(68404),n=e(29002);function l(s){const{children:i,...f}=s;return t.createElement(n._.Provider,{value:f},i)}},61345:(Z,O,e)=>{"use strict";e.d(O,{v:()=>t});function t(n){return"instanceSettings"in n&&"meta"in n}},59417:(Z,O,e)=>{"use strict";e.d(O,{g:()=>l});var t=e(68404),n=e(29002);function l(){const s=(0,t.useContext)(n._);if(!s)throw new Error("usePluginContext must be used within a PluginContextProvider");return s}},71398:(Z,O,e)=>{"use strict";e.d(O,{i:()=>f});var t=e(20411),n=e(49319),l=e(16911);const s=c=>c;class i{constructor(o,m){this.source=o,this.prop=m,this.converter=s}get length(){return this.source.length}get(o){return this.converter(this.source[o][this.prop])}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}class f extends t.G{constructor(o,m){super(),this.source=o,this.fields=[],this.length=0,this.length=o.length;const r=o.length?o[0]:{};m?this.fields=m.map(u=>({name:u,type:(0,l._m)(u,r[u]),config:{},values:new i(o,u)})):this.setFieldsFromObject(r)}setFieldsFromObject(o){this.fields=Object.keys(o).map(m=>({name:m,type:(0,l._m)(m,o[m]),config:{},values:new i(this.source,m)}))}setFieldType(o,m,r){let u=this.fields.find(d=>d.name===o);return u?u.type=m:(u={name:o,type:m,config:{},values:new i(this.source,o)},this.fields.push(u)),u.values.converter=r??s,u}get(o){return this.source[o]}toJSON(){return(0,l.og)(this)}}},25091:(Z,O,e)=>{"use strict";e.d(O,{a:()=>l});var t=e(98212),n=e(38685);class l extends n.v{constructor(i){super(void 0,f=>new t.d({...i,buffer:f}))}}},70006:(Z,O,e)=>{"use strict";e.d(O,{Ib:()=>f,Jy:()=>i,Y:()=>m,vP:()=>o});var t=e(14582),n=e(19695),l=e(16911);const s={Inf:1/0,NegInf:-1/0,Undef:void 0,NaN:NaN};function i(r,u){for(const d in r){const g=s[d];for(const p of r[d])p<u.length&&(u[p]=g)}}function f(r,u){for(let d=0;d<u.length;d++)u[d]=r[u[d]]}function c(r,u){for(const d of u)if(d!=null)return(0,l._m)(r,d);return t.fS.other}function o(r){const{schema:u,data:d}=r;if(!u||!u.fields)throw new Error("JSON needs a fields definition");const g=d?d.values.reduce((E,h)=>Math.max(E,h.length),0):0,p=u.fields.map((E,h)=>{let a=d?d.values[h]:[],v=a.length,x=E.type;v!==g&&(a.length=g,a.fill(void 0,v));let y=d?.entities?.[h];y&&i(y,a);let C=d?.enums?.[h];return C&&(f(C,a),x=t.fS.string),{...E,type:x??c(E.name,a),config:E.config??{},values:new n.G(a),entities:y??{}}});return{...u,fields:p,length:g}}function m(r){const u={values:[]};return{schema:{refId:r.refId,meta:r.meta,name:r.name,fields:r.fields.map(g=>{const{values:p,state:E,display:h,...a}=g;return delete a.entities,u.values.push(p.toArray()),a})},data:u}}},50235:(Z,O,e)=>{"use strict";e.d(O,{U:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.data=s,this.index=0;const i={},f={};for(let c=0;c<s.fields.length;c++){const o=s.fields[c];if(!o.name)continue;f[o.name]=o;const m=()=>o.values.get(this.index);i.hasOwnProperty(o.name)||Object.defineProperty(i,o.name,{enumerable:!0,get:m}),i.hasOwnProperty(c.toString())||Object.defineProperty(i,c,{enumerable:!1,get:m})}this.obj=i,this.fields=f}get dataFrame(){return this.data}get length(){return this.data.length}getFieldDisplayProcessor(s){if(!this.dataFrame||!this.dataFrame.fields)return;const i=this.dataFrame.fields[s];if(!(!i||!i.display))return i.display}get(s){return this.index=s,this.obj}toArray(){return new Array(this.data.length).fill(0).map((s,i)=>({...this.get(i)}))}}},71895:(Z,O,e)=>{"use strict";e.d(O,{N:()=>l});var t=e(14582),n=e(16911);class l{constructor(i){this.fields=[],this.fieldByName={},this.fieldByType={},this.fields=i.fields.map((f,c)=>({...f,index:c}));for(let f=0;f<i.fields.length;f++){const c=i.fields[f];if(c.type===t.fS.other){const o=(0,n.fu)(c);o&&(c.type=o)}this.fieldByType[c.type]||(this.fieldByType[c.type]=[]),this.fieldByType[c.type].push({...c,index:f}),this.fieldByName[c.name]?console.warn("Duplicate field names in DataFrame: ",c.name):this.fieldByName[c.name]={...c,index:f}}}getFields(i){if(!i)return[...this.fields];const f=this.fieldByType[i];return f?[...f]:[]}hasFieldOfType(i){const f=this.fieldByType[i];return f&&f.length>0}getFirstFieldOfType(i,f=!1){return this.fieldByType[i].find(m=>f||!m.config.custom?.hidden)}hasFieldNamed(i){return!!this.fieldByName[i]}hasFieldWithNameAndType(i,f){return!!this.fieldByName[i]&&this.fieldByType[f].filter(c=>c.name===i).length>0}getFieldByName(i){return this.fieldByName[i]}getFieldsByLabel(i,f){return Object.values(this.fieldByName).filter(c=>c.labels&&c.labels[i]===f)}}},38685:(Z,O,e)=>{"use strict";e.d(O,{Y:()=>c,v:()=>o});var t=e(82897),n=e(14582),l=e(16911);function s(m,r){return r.type||(r.name==="time"||r.name==="Time"?r.type=n.fS.time:r.type=(0,l.LI)(m)),r.type===n.fS.number?u=>parseFloat(u):r.type===n.fS.boolean?u=>!(u[0]==="F"||u[0]==="f"||u[0]==="0"):u=>u}var i=e(19695),f=e(20411);const c=void 0;class o extends f.G{constructor(r,u){if(super(),this.fields=[],this.first=new i.G,this.parsers=void 0,this.creator=u||(d=>new i.G(d)),r){const{name:d,refId:g,meta:p,fields:E}=r;if(d&&(this.name=d),g&&(this.refId=g),p&&(this.meta=p),E)for(const h of E)this.addField(h)}Object.defineProperty(this,"length",{enumerable:!0,get:()=>this.first.length})}get length(){return this.first.length}addFieldFor(r,u){return this.addField({name:u||"",type:(0,l.LI)(r)})}addField(r,u){let d;r.values&&(Array.isArray(r.values)?d=r.values:d=r.values.toArray());let g=r.type;!g&&(r.name==="time"||r.name==="Time")?g=n.fS.time:(!g&&d&&d.length&&(g=(0,l.LI)(d[0])),g||(g=n.fS.other));let p=r.name;p||(p=`Field ${this.fields.length+1}`);const E={...r,name:p,type:g,config:r.config||{},values:this.creator(d)};if(g===n.fS.other&&(g=(0,l.fu)(E),g&&(E.type=g)),this.fields.push(E),this.first=this.fields[0].values,u)for(;E.values.length<u;)E.values.add(c);else this.validate();return E}validate(){const r=this.fields.reduce((u,d)=>Math.max(u,d.values.length),0);for(const u of this.fields)for(;u.values.length!==r;)u.values.add(c)}reverse(){for(const r of this.fields)r.values.reverse()}setParser(r,u){return this.parsers||(this.parsers=new Map),this.parsers.set(r,u),u}parseValue(r,u){let d=this.parsers?.get(r);return d||(d=this.setParser(r,s(u,r))),d(u)}appendRow(r){for(let u=this.fields.length;u<r.length;u++)this.addField({name:`Field ${u+1}`,type:(0,l.LI)(r[u])});if(this.length<1)for(let u=0;u<this.fields.length;u++){const d=this.fields[u];(!d.type||d.type===n.fS.other)&&(d.type=(0,l.LI)(r[u]))}for(let u=0;u<this.fields.length;u++){const d=this.fields[u];let g=r[u];d.type!==n.fS.string&&(0,t.isString)(g)&&(g=this.parseValue(d,g)),d.values.add(g)}}add(r){const u=r;for(const d of this.fields){let g=u[d.name];d.type!==n.fS.string&&(0,t.isString)(g)&&(g=this.parseValue(d,g)),g===void 0&&(g=c),d.values.add(g)}}set(r,u){if(r>this.length)throw new Error("Unable to set value beyond current length");const d=u||{};for(const g of this.fields)g.values.set(r,d[g.name])}get(r){const u={};for(const d of this.fields)u[d.name]=d.values.get(r);return u}toJSON(){return(0,l.og)(this)}}},68219:(Z,O,e)=>{"use strict";e.d(O,{$q:()=>l,GV:()=>n,YP:()=>f,jC:()=>s,q2:()=>t,r7:()=>i});const t=(c,o)=>({name:c,columns:o}),n=c=>c.columns,l=(c,o)=>c.columns[o],s=(c,o,m)=>c.columns[o].values.get(m),i=(c,o,m)=>c.columns.map(r=>r.values.get(m)),f=(c,o)=>c[o]},38067:(Z,O,e)=>{"use strict";e.d(O,{Ch:()=>l,Vv:()=>f,nl:()=>s});var t=e(82897),n=e.n(t);function l(c,o,m){if(c===o)return!0;if(c?.fields?.length!==o?.fields?.length||c.name!==o.name)return!1;for(let r=0;r<c.fields.length;r++){const u=c.fields[r],d=o.fields[r];if(u.type!==d.type||u.name!==d.name)return!1;if(m)continue;if(u.labels&&d.labels&&!f(u.labels,d.labels))return!1;const g=u.config,p=d.config;let E=Object.keys(g),h=Object.keys(p);if(E.length!==h.length)return!1;for(const a of E){if(!(a in p))return!1;if(a!=="interval"&&!(0,t.isEqual)(g[a],p[a]))return!1}}return!0}function s(c,o,m){if(c===o)return!0;if(c?.length!==o?.length)return!1;for(let r=0;r<c.length;r++)if(!m(c[r],o[r]))return!1;return!0}const i=(c,o)=>c===o;function f(c,o,m=i){if(c===o)return!0;const r=Object.keys(c),u=Object.keys(o);if(r.length!==u.length)return!1;for(let d of r)if(!m(c[d],o[d]))return!1;return!0}},31815:(Z,O,e)=>{"use strict";e.d(O,{$q:()=>f.$q,Aw:()=>i.Aw,Ch:()=>m.Ch,DP:()=>i.DP,F9:()=>i.F9,GV:()=>f.GV,Ib:()=>o.Ib,Ji:()=>i.Ji,Jy:()=>o.Jy,LI:()=>i.LI,N:()=>n.N,SX:()=>i.SX,US:()=>t.U,Vv:()=>m.Vv,Y:()=>o.Y,Y6:()=>i.Y6,YP:()=>f.YP,Yi:()=>s.Y,Zr:()=>i.Zr,_m:()=>i._m,a2:()=>l.a,aK:()=>i.aK,aY:()=>i.aY,fh:()=>i.fh,fu:()=>i.fu,g0:()=>i.g0,iB:()=>c.i,jC:()=>f.jC,m$:()=>r.m$,nl:()=>m.nl,og:()=>i.og,pP:()=>r.pP,q2:()=>f.q2,r7:()=>f.r7,sV:()=>i.sV,vA:()=>s.v,vP:()=>o.vP,xI:()=>r.xI,zR:()=>i.zR});var t=e(50235),n=e(71895),l=e(25091),s=e(38685),i=e(16911),f=e(68219),c=e(71398),o=e(70006),m=e(38067),r=e(34472)},16911:(Z,O,e)=>{"use strict";e.d(O,{Aw:()=>K,DP:()=>y,F9:()=>N,Ji:()=>M,LI:()=>C,SX:()=>D,Y6:()=>A,Zr:()=>B,_m:()=>x,aK:()=>w,aY:()=>b,fh:()=>I,fu:()=>P,g0:()=>R,og:()=>F,sV:()=>W,zR:()=>S});var t=e(82897),n=e.n(t),l=e(46519),s=e(62724),i=e(89890),f=e(14582),c=e(49922),o=e(19695),m=e(12022),r=e(49319),u=e(71398),d=e(70006),g=e(38685);function p(Y){const Q=Y.columns.map(z=>{const{text:G,type:k,...j}=z;return{name:G?.length?G:z,config:j||{},values:new o.G,type:k&&Object.values(f.fS).includes(k)?k:f.fS.other}});if(!(0,t.isArray)(Y.rows))throw new Error(`Expected table rows to be array, got ${typeof Y.rows}.`);for(const z of Y.rows)for(let G=0;G<Q.length;G++)Q[G].values.buffer.push(z[G]);for(const z of Q)if(z.type===f.fS.other){const G=P(z);G&&(z.type=G)}return{fields:Q,refId:Y.refId,meta:Y.meta,name:Y.name,length:Y.rows.length}}function E(Y){const Q=[],z=[],G=Y.datapoints||Y.points;for(const j of G)z.push(j[0]),Q.push(j[1]);const k=[{name:f.Ls,type:f.fS.time,config:{},values:new o.G(Q)},{name:f.M5,type:f.fS.number,config:{unit:Y.unit},values:new o.G(z),labels:Y.tags}];return Y.title&&(k[1].config.displayNameFromDS=Y.title),{name:Y.target||Y.name,refId:Y.refId,meta:Y.meta,fields:k,length:z.length}}function h(Y){const Q=new o.G,z=new o.G;for(let G=0;G<Y.data.length;G++){const k=Y.data[G];Q.buffer.push(k[1]),z.buffer.push(k[0])}return{name:Y.label,fields:[{name:Y.label||f.M5,type:f.fS.number,config:{},values:Q},{name:f.Ls,type:f.fS.time,config:{unit:"dateTimeAsIso"},values:z}],length:Q.buffer.length}}function a(Y){const Q=[{name:Y.target,type:f.fS.other,labels:Y.tags,config:{unit:Y.unit,filterable:Y.filterable},values:new o.G}];for(const z of Y.datapoints)Q[0].values.buffer.push(z);return{name:Y.target,refId:Y.target,meta:{json:!0},fields:Q,length:Y.datapoints.length}}const v=/^\s*(-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?|NAN)\s*$/i;function x(Y,Q){return Y&&(Y=Y.toLowerCase(),Y==="date"||Y==="time")?f.fS.time:C(Q)}function y(Y){return Y instanceof Date||(0,l.v9)(Y)?f.fS.time:(0,t.isNumber)(Y)?f.fS.number:(0,t.isString)(Y)?f.fS.string:(0,t.isBoolean)(Y)?f.fS.boolean:f.fS.other}function C(Y){return Y instanceof Date||(0,l.v9)(Y)?f.fS.time:(0,t.isNumber)(Y)?f.fS.number:(0,t.isString)(Y)?v.test(Y)?f.fS.number:Y==="true"||Y==="TRUE"||Y==="True"||Y==="false"||Y==="FALSE"||Y==="False"?f.fS.boolean:f.fS.string:(0,t.isBoolean)(Y)?f.fS.boolean:f.fS.other}function P(Y){if(Y.name){const Q=Y.name.toLowerCase();if(Q==="date"||Q==="time")return f.fS.time}for(let Q=0;Q<Y.values.length;Q++){const z=Y.values.get(Q);if(z!=null)return C(z)}}const D=(Y,Q=!1)=>{for(const z of Y.fields)if(!z.type||z.type===f.fS.other||Q)return{...Y,fields:Y.fields.map(G=>G.type&&G.type!==f.fS.other&&!Q?G:{...G,type:P(G)||f.fS.other})};return Y},M=Y=>Boolean(Y&&Y.hasOwnProperty("columns")),b=Y=>Boolean(Y&&Y.hasOwnProperty("fields"));function R(Y){if("fields"in Y)return"length"in Y&&Y.fields[0]?.values?.get?Y:new g.v(Y);if(Y.hasOwnProperty("type")&&Y.type==="docs")return a(Y);if(Y.hasOwnProperty("datapoints")||Y.hasOwnProperty("points"))return E(Y);if(Y.hasOwnProperty("data"))return Y.hasOwnProperty("schema")?(0,d.vP)(Y):h(Y);if(Y.hasOwnProperty("columns"))return p(Y);if(Array.isArray(Y))return new u.i(Y);throw console.warn("Can not convert",Y),new Error("Unsupported data format")}const B=Y=>{const{fields:Q}=Y,z=Y.length,G=[];if(Q.length===2){const{timeField:k,timeIndex:j}=W(Y);if(k){const ge=Q[j===0?1:0],re=Q[j];for(let ce=0;ce<z;ce++)G.push([ge.values.get(ce),re.values.get(ce)]);return{alias:Y.name,target:(0,i.C)(ge,Y),datapoints:G,unit:Q[0].config?Q[0].config.unit:void 0,refId:Y.refId,meta:Y.meta}}}for(let k=0;k<z;k++){const j=[];for(let de=0;de<Q.length;de++)j.push(Q[de].values.get(k));G.push(j)}return Y.meta&&Y.meta.json?{alias:Q[0].name||Y.name,target:Q[0].name||Y.name,datapoints:Q[0].values.toArray(),filterable:Q[0].config?Q[0].config.filterable:void 0,type:"docs"}:{columns:Q.map(k=>{const{name:j,config:de}=k;if(de){const{...ge}=de;return ge.text=j,ge}return{text:j}}),type:"table",refId:Y.refId,meta:Y.meta,rows:G}};function w(Y,Q,z=!1){const G=Y.fields[Q];if(!G)return Y;const k=[];for(let de=0;de<Y.length;de++)k.push(de);const j=(0,s.Mo)(G,z);return k.sort(j),{...Y,fields:Y.fields.map(de=>({...de,values:new m.o(de.values,k)}))}}function A(Y){return{...Y,fields:Y.fields.map(Q=>{const z=[...Q.values.toArray()];return z.reverse(),{...Q,values:new o.G(z)}})}}function I(Y,Q){const z=[];for(const G of Y.fields)z.push(G.values.get(Q));return z}function F(Y){return K(Y)}function K(Y,Q){return{fields:(Q?Y.fields.filter(Q):Y.fields).map(k=>{let j=k.values.toArray();return j instanceof Float64Array&&(j=(0,r.n)(k.values)),{name:k.name,type:k.type,config:k.config,values:j,labels:k.labels}}),refId:Y.refId,meta:Y.meta,name:Y.name}}const W=Y=>{for(let Q=0;Q<Y.fields.length;Q++)if(Y.fields[Q].type===f.fS.time)return{timeField:Y.fields[Q],timeIndex:Q};return{}};function U(Y){const Q=D(R(Y));if(Q.fields&&Q.fields.length)for(const z of Q.fields)z.state=null;return Q}function N(Y){return!Y||!(0,t.isArray)(Y)?[]:Y.map(Q=>U(Q))}function S(Y,Q){const{series:z,annotations:G}=Y;if(Y.state===c.Gu.Loading&&z.length===0)return Q||(Q=Y),{...Q,state:c.Gu.Loading,request:Y.request};const k=performance.now(),j=z.map(re=>U(re)),de=N(G),ge=performance.now();return{...Y,series:j,annotations:de,timings:{dataProcessingTime:ge-k}}}},34472:(Z,O,e)=>{"use strict";e.d(O,{m$:()=>i,pP:()=>l,xI:()=>s});var t=e(14582),n=e(16911);function l(f){return f.fields.length>2?!1:Boolean(f.fields.find(c=>c.type===t.fS.time))}function s(f){return!f.find(c=>!l(c))}function i(f){for(let c=0;c<f.length;c++){const o=(0,n.sV)(f[c]);if(o.timeField!==void 0&&o.timeIndex!==void 0)return!0}return!1}},99919:(Z,O,e)=>{"use strict";e.d(O,{K:()=>l,Z:()=>s});var t=e(69311);let n=()=>t.Ys;const l=i=>{n=i??n},s=i=>i?.timeZone??n()??t.Ys},21053:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{isMathString:()=>i,isValid:()=>c,parse:()=>f,parseDateMath:()=>o,roundToFiscal:()=>m});var t=e(82897),n=e.n(t),l=e(46519);const s=["y","M","w","d","h","m","s","Q"];function i(r){return r?!!(typeof r=="string"&&(r.substring(0,3)==="now"||r.includes("||"))):!1}function f(r,u,d,g){if(r){if(typeof r!="string")return(0,l.v9)(r)?r:(0,t.isDate)(r)?(0,l.CQ)(r):void 0;{let p,E="",h,a;return r.substring(0,3)==="now"?(p=(0,l.GY)(d),E=r.substring(3)):(h=r.indexOf("||"),h===-1?(a=r,E=""):(a=r.substring(0,h),E=r.substring(h+2)),p=(0,l.CQ)(a,l.VJ)),E.length?o(E,p,u,g):p}}}function c(r){const u=f(r);return u&&(0,l.v9)(u)?u.isValid():!1}function o(r,u,d,g=0){const p=r.replace(/\s/g,""),E=u;let h=0;const a=p.length;for(;h<a;){const v=p.charAt(h++);let x,y,C,P=!1;if(v==="/")x=0;else if(v==="+")x=1;else if(v==="-")x=2;else return;if(isNaN(parseInt(p.charAt(h),10)))y=1;else if(p.length===2)y=parseInt(p.charAt(h),10);else{const D=h;for(;!isNaN(parseInt(p.charAt(h),10));)if(h++,h>10)return;y=parseInt(p.substring(D,h),10)}if(x===0&&y!==1)return;if(C=p.charAt(h++),C==="f"&&(C=p.charAt(h++),P=!0),(0,t.includes)(s,C))x===0?d?P?m(g,E,C,d):E.endOf(C):P?m(g,E,C,d):E.startOf(C):x===1?E.add(y,C):x===2&&E.subtract(y,C);else return}return E}function m(r,u,d,g){switch(d){case"y":return g?m(r,u,d,!1).add(11,"M").endOf("M"):u.subtract((u.month()-r+12)%12,"M").startOf("M"),u;case"Q":return g?m(r,u,d,!1).add(2,"M").endOf("M"):u.subtract((u.month()-r+3)%3,"M").startOf("M"),u;default:return}}},37556:(Z,O,e)=>{"use strict";e.d(O,{IA:()=>u,Ks:()=>c,RA:()=>f,iX:()=>o,jO:()=>r,qb:()=>m,vT:()=>i});var t=e(87882),n=e(81396),l=e(17454);const s={years:["y","Y","years"],months:["M","months"],weeks:["w","W","weeks"],days:["d","D","days"],hours:["h","H","hours"],minutes:["m","minutes"],seconds:["s","S","seconds"]};function i(d,g=!0){if((0,t.Z)(d.start,d.end))return"";const p=(0,l.Z)(d);return Object.entries(p).reduce((E,[h,a])=>a&&a!==0&&!(h==="seconds"&&!g&&E)?E+`${E!==""?" ":""}${a}${s[h][0]}`:E,"")}function f(d){return d.split(" ").reduce((g,p)=>{const E=p.match(/(\d+)(.+)/),h=E?.[1],a=E?.[2];if(!(h&&a))return g;const v=Object.entries(s).find(([y,C])=>C?.includes(E[2])),x=parseInt(h,10);return v?{...g,[v[0]]:x}:g},{})}function c(d,g){return(0,n.Z)(d,g)}function o(d){const g=new Date;return c(g,d).getTime()-g.getTime()}function m(d){return!isNaN(Date.parse(d))}function r(d){for(const g of d.trim().split(" ")){const p=g.match(/(\d+)(.+)/);if(p===null||p.length!==3||!Object.entries(s).find(([h,a])=>a?.includes(p[2]))?.[0])return!1}return!0}function u(d){const g=["h","m","s","ms","us","\xB5s","ns"];for(const p of d.trim().split(" ")){const E=p.match(/([0-9]*[.]?[0-9]+)(.+)/);if(E===null||E.length!==3||!g.includes(E[2]))return!1}return!0}},47513:(Z,O,e)=>{"use strict";e.d(O,{Ji:()=>s,U6:()=>i,zf:()=>l});const t="YYYY-MM-DD HH:mm:ss",n="YYYY-MM-DD HH:mm:ss.SSS";class l{constructor(){this.fullDate=t,this.fullDateMS=n,this.interval={millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"MM/DD HH:mm",day:"MM/DD",month:"YYYY-MM",year:"YYYY"}}update(o){this.fullDate=o.fullDate,this.interval=o.interval,o.useBrowserLocale&&this.useBrowserLocale()}useBrowserLocale(){this.fullDate=s({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),this.fullDateMS=this.fullDate.replace("ss","ss.SSS"),this.interval.millisecond=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second).replace("ss","ss.SSS"),this.interval.second=s({hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},null,this.interval.second),this.interval.minute=s({hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.minute),this.interval.hour=s({month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1},null,this.interval.hour),this.interval.day=s({month:"2-digit",day:"2-digit",hour12:!1},null,this.interval.day),this.interval.month=s({year:"numeric",month:"2-digit",hour12:!1},null,this.interval.month)}getTimeFieldUnit(o){return`time:${o?this.fullDateMS:this.fullDate}`}}function s(c,o,m){if(f())return m??t;!o&&navigator&&(o=[...navigator.languages]);const r=new Intl.DateTimeFormat(o||void 0,c),u=r.formatToParts(new Date),g={year:"YYYY",month:"MM",day:"DD",hour:r.resolvedOptions().hour12?"hh":"HH",minute:"mm",second:"ss",weekday:"ddd",era:"N",dayPeriod:"A",timeZoneName:"Z"};return u.map(p=>g[p.type]||p.value).join("")}const i=new l,f=()=>!("DateTimeFormat"in Intl)||!("formatToParts"in Intl.DateTimeFormat.prototype)},38849:(Z,O,e)=>{"use strict";e.d(O,{E8:()=>c,Fm:()=>o,Hk:()=>m,dq:()=>i,lf:()=>f});var t=e(6835),n=e.n(t),l=e(99919),s=e(47513);const i=(d,g)=>u(d,(0,l.Z)(g)).format(r(g)),f=(d,g)=>u(d,(0,l.Z)(g)).format(),c=(d,g)=>u(d,(0,l.Z)(g)).fromNow(),o=(d,g)=>u(d,(0,l.Z)(g)).format(`${s.U6.fullDate} z`),m=(d,g)=>u(d,(0,l.Z)(g)).format("z"),r=d=>d?.defaultWithMS?d?.format??s.U6.fullDateMS:d?.format??s.U6.fullDate,u=(d,g)=>{const p=d,E=n().tz.zone(g);if(E&&E.name)return n().utc(p).tz(E.name);switch(g){case"utc":return n().utc(p);default:return n().utc(p).local()}}},46034:(Z,O,e)=>{"use strict";e.d(O,{$8:()=>s.$8,CQ:()=>l.CQ,C_:()=>l.C_,D2:()=>l.D2,E8:()=>f.E8,Fm:()=>f.Fm,GY:()=>l.GY,Hk:()=>f.Hk,IA:()=>o.IA,J:()=>c.J,Ji:()=>i.Ji,K7:()=>m.K,Kd:()=>l.Kd,Ks:()=>o.Ks,Ls:()=>l.Ls,Pr:()=>s.Pr,RA:()=>o.RA,RQ:()=>s.RQ,Rn:()=>t,U6:()=>i.U6,VJ:()=>l.VJ,Vs:()=>s.Vs,ZV:()=>s.ZV,Ze:()=>m.Z,cT:()=>n,dq:()=>f.dq,iX:()=>o.iX,i_:()=>l.i_,ig:()=>l.ig,jN:()=>l.jN,jO:()=>o.jO,k4:()=>l.k4,lf:()=>f.lf,np:()=>l.Ks,qb:()=>o.qb,v9:()=>l.v9,vT:()=>o.vT,zf:()=>i.zf,zh:()=>l.zh});var t=e(21053),n=e(33180),l=e(46519),s=e(38306),i=e(47513),f=e(38849),c=e(85052),o=e(37556),m=e(99919)},46519:(Z,O,e)=>{"use strict";e.d(O,{CQ:()=>u,C_:()=>d,D2:()=>c,GY:()=>g,Kd:()=>i,Ks:()=>r,Ls:()=>h,VJ:()=>l,i_:()=>s,ig:()=>p,jN:()=>E,k4:()=>f,v9:()=>o,zh:()=>m});var t=e(36365),n=e.n(t);const l=n().ISO_8601,s=a=>{n().locale(a)},i=()=>n().locale(),f=()=>n().localeData(),c=a=>a===null||typeof a=="string"||typeof a=="number"||a instanceof Date||Array.isArray(a)&&a.every(v=>typeof v=="string"||typeof v=="number")||o(a),o=a=>n().isMoment(a),m=(a,v)=>n().utc(a,v),r=(a,v)=>n().duration(a,v),u=(a,v)=>n()(a,v),d=a=>u(a),g=(a,v,x)=>a==="utc"?m(v,x):u(v,x),p=a=>n().weekdays().findIndex(v=>v.toLowerCase()===a.toLowerCase()),E=a=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].findIndex(v=>v.toLowerCase()===a.toLowerCase()),h=a=>{const v="-weekStart",x=i().replace(v,""),y=a?E(a):-1;y!==-1?n().locale(x+v,{parentLocale:x,week:{dow:y}}):s(x)}},85052:(Z,O,e)=>{"use strict";e.d(O,{J:()=>m});var t=e(82897),n=e.n(t),l=e(6835),s=e.n(l),i=e(99919),f=e(21053),c=e(47513),o=e(46519);const m=(d,g)=>(0,o.v9)(d)?d:typeof d=="string"?r(d,g):u(d,g),r=(d,g)=>{if(d.indexOf("now")!==-1)return(0,f.isValid)(d)&&(0,f.parse)(d,g?.roundUp,g?.timeZone,g?.fiscalYearStartMonth)||s()();const p=(0,i.Z)(g),E=s().tz.zone(p),h=g?.format??c.U6.fullDate;if(E&&E.name)return s().tz(d,h,E.name);switch((0,t.lowerCase)(p)){case"utc":return s().utc(d,h);default:return s()(d,h)}},u=(d,g)=>{const p=d,E=(0,i.Z)(g),h=s().tz.zone(E);if(h&&h.name)return s().tz(p,h.name);switch((0,t.lowerCase)(E)){case"utc":return s().utc(p);default:return s()(p)}}},33180:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{calculateInterval:()=>C,convertRawToRange:()=>E,describeInterval:()=>M,describeTextRange:()=>u,describeTimeRange:()=>d,describeTimeRangeAbbreviation:()=>p,intervalToMs:()=>R,intervalToSeconds:()=>b,isFiscal:()=>a,isRelativeTimeRange:()=>v,isValidTimeSpan:()=>g,msRangeToTimeString:()=>y,relativeToTimeRange:()=>A,roundInterval:()=>B,secondsToHms:()=>x,timeRangeToRelative:()=>w});var t=e(82897),n=e.n(t),l=e(21053),s=e(38849),i=e(46519),f=e(85052);const c={s:{display:"second"},m:{display:"minute"},h:{display:"hour"},d:{display:"day"},w:{display:"week"},M:{display:"month"},y:{display:"year"}},o=[{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],m=[{from:"now",to:"now+1m",display:"Next minute"},{from:"now",to:"now+5m",display:"Next 5 minutes"},{from:"now",to:"now+15m",display:"Next 15 minutes"},{from:"now",to:"now+30m",display:"Next 30 minutes"},{from:"now",to:"now+1h",display:"Next hour"},{from:"now",to:"now+3h",display:"Next 3 hours"},{from:"now",to:"now+6h",display:"Next 6 hours"},{from:"now",to:"now+12h",display:"Next 12 hours"},{from:"now",to:"now+24h",display:"Next 24 hours"},{from:"now",to:"now+2d",display:"Next 2 days"},{from:"now",to:"now+7d",display:"Next 7 days"},{from:"now",to:"now+30d",display:"Next 30 days"},{from:"now",to:"now+90d",display:"Next 90 days"},{from:"now",to:"now+6M",display:"Next 6 months"},{from:"now",to:"now+1y",display:"Next year"},{from:"now",to:"now+2y",display:"Next 2 years"},{from:"now",to:"now+5y",display:"Next 5 years"}],r={};(0,t.each)(o,I=>{r[I.from+" to "+I.to]=I}),(0,t.each)(m,I=>{r[I.from+" to "+I.to]=I});function u(I){const F=I.indexOf("+")!==0;I.indexOf("now")===-1&&(I=(F?"now-":"now")+I);let K=r[I+" to now"];if(K)return K;F?K={from:I,to:"now"}:K={from:"now",to:I};const W=/^now([-+])(\d+)(\w)/.exec(I);if(W){const U=W[3],N=parseInt(W[2],10),S=c[U];S&&(K.display=F?"Last ":"Next ",K.display+=N+" "+S.display,K.section=S.section,N>1&&(K.display+="s"))}else K.display=K.from+" to "+K.to,K.invalid=!0;return K}function d(I,F){const K=r[I.from.toString()+" to "+I.to.toString()];if(K)return K.display;const W={timeZone:F};if((0,i.v9)(I.from)&&(0,i.v9)(I.to))return(0,s.dq)(I.from,W)+" to "+(0,s.dq)(I.to,W);if((0,i.v9)(I.from)){const U=l.parse(I.to,!0,"utc");return U?(0,s.dq)(I.from,W)+" to "+(0,s.E8)(U,W):""}if((0,i.v9)(I.to)){const U=l.parse(I.from,!1,"utc");return U?(0,s.E8)(U,W)+" to "+(0,s.dq)(I.to,W):""}return I.to.toString()==="now"?u(I.from).display:I.from.toString()+" to "+I.to.toString()}const g=I=>I.indexOf("$")===0||I.indexOf("+$")===0?!0:u(I).invalid!==!0,p=(I,F)=>{if((0,i.v9)(I.from))return(0,s.Hk)(I.from,{timeZone:F});const K=l.parse(I.from,!0);return K?(0,s.Hk)(K,{timeZone:F}):""},E=(I,F,K)=>{const W=(0,f.J)(I.from,{roundUp:!1,timeZone:F,fiscalYearStartMonth:K}),U=(0,f.J)(I.to,{roundUp:!0,timeZone:F,fiscalYearStartMonth:K});return l.isMathString(I.from)||l.isMathString(I.to)?{from:W,to:U,raw:I}:{from:W,to:U,raw:{from:W,to:U}}};function h(I){return typeof I=="string"?I.indexOf("now")>=0:!1}function a(I){return typeof I.raw.from=="string"&&I.raw.from.indexOf("f")>0?!0:typeof I.raw.to=="string"&&I.raw.to.indexOf("f")>0}function v(I){return h(I.from)||h(I.to)}function x(I){const F=Math.floor(I/31536e3);if(F)return F+"y";const K=Math.floor(I%31536e3/86400);if(K)return K+"d";const W=Math.floor(I%31536e3%86400/3600);if(W)return W+"h";const U=Math.floor(I%31536e3%86400%3600/60);if(U)return U+"m";const N=Math.floor(I%31536e3%86400%3600%60);if(N)return N+"s";const S=Math.floor(I*1e3);return S?S+"ms":"less than a millisecond"}function y(I){const F=Number((I/1e3).toFixed()),K=Math.floor(F/60/60),W=Math.floor(F/60)-K*60,U=Number((F%60).toFixed());let N=K?K+"h":"",S=W?W+"min":"",Y=U?U+"sec":"";return N&&S?N=N+" ":N=N,(S||N)&&Y?S=S+" ":S=S,N+S+Y||"less than 1sec"}function C(I,F,K){let W=1;K&&(W=R(K));let U=B((I.to.valueOf()-I.from.valueOf())/F);return W>U&&(U=W),{intervalMs:U,interval:x(U/1e3)}}const P=/(-?\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,D={y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001};function M(I){if(Number(I))return{sec:D.s,type:"s",count:parseInt(I,10)};const F=I.match(P);if(!F||!(0,t.has)(D,F[2]))throw new Error(`Invalid interval string, has to be either unit-less or end with one of the following units: "${Object.keys(D).join(", ")}"`);return{sec:D[F[2]],type:F[2],count:parseInt(F[1],10)}}function b(I){const F=M(I);return F.sec*F.count}function R(I){const F=M(I);return F.sec*1e3*F.count}function B(I){switch(!0){case I<10:return 1;case I<15:return 10;case I<35:return 20;case I<75:return 50;case I<150:return 100;case I<350:return 200;case I<750:return 500;case I<1500:return 1e3;case I<3500:return 2e3;case I<7500:return 5e3;case I<12500:return 1e4;case I<17500:return 15e3;case I<25e3:return 2e4;case I<45e3:return 3e4;case I<9e4:return 6e4;case I<21e4:return 12e4;case I<45e4:return 3e5;case I<75e4:return 6e5;case I<105e4:return 9e5;case I<15e5:return 12e5;case I<27e5:return 18e5;case I<54e5:return 36e5;case I<9e6:return 72e5;case I<162e5:return 108e5;case I<324e5:return 216e5;case I<864e5:return 432e5;case I<6048e5:return 864e5;case I<18144e5:return 6048e5;case I<36288e5:return 2592e6;default:return 31536e6}}function w(I,F=(0,i.CQ)()){const K=F.unix()-I.from.unix(),W=F.unix()-I.to.unix();return{from:K,to:W}}function A(I,F=(0,i.CQ)()){const K=(0,i.CQ)(F).subtract(I.from,"s"),W=I.to===0?(0,i.CQ)(F):(0,i.CQ)(F).subtract(I.to,"s");return{from:K,to:W,raw:{from:K,to:W}}}},38306:(Z,O,e)=>{"use strict";e.d(O,{$8:()=>r,Pr:()=>o,RQ:()=>f,Vs:()=>c,ZV:()=>m});var t=e(82897),n=e.n(t),l=e(6835),s=e.n(l),i=e(99919),f=(h=>(h.default="",h.localBrowserTime="browser",h.utc="utc",h))(f||{});const c=h=>{switch((0,i.Z)({timeZone:h})){case"browser":return"Local browser time";case"utc":return"UTC";default:return h}},o=(h,a)=>{const v=u(h,a);return v||g(h,a)},m=(0,t.memoize)((h=!1)=>{const a=[];return h===!0?a.push("","browser","utc"):h&&a.push(...h),s().tz.names().reduce((v,x)=>{const y=E[x];return!Array.isArray(y)||y.length===0||v.push(x),v},a)}),r=(0,t.memoize)((h=!1)=>{const v=m(h).reduce((x,y)=>{const C=y.indexOf("/");if(C===-1){const D="";return x[D]=x[D]??[],x[D].push(y),x}const P=y.slice(0,C);return x[P]=x[P]??[],x[P].push(y),x},{});return Object.keys(v).map(x=>({name:x,zones:v[x]}))}),u=(h,a)=>{switch(h){case"utc":return{name:"Coordinated Universal Time",ianaName:"UTC",zone:h,countries:[],abbreviation:"UTC, GMT",offsetInMins:0};case"":{const v=(0,i.Z)(),y=(v==="browser"||v==="utc"?u(v,a):g(v,a))??{};return{countries:E[v]??[],abbreviation:"",offsetInMins:0,...y,ianaName:y.ianaName,name:"Default",zone:h}}case"browser":{const v=s().tz.guess(!0),x=g(v,a)??{};return{countries:E[v]??[],abbreviation:"Your local time",offsetInMins:new Date().getTimezoneOffset(),...x,name:"Browser Time",ianaName:x.ianaName,zone:h}}default:return}},d=h=>/^(\+|\-).+/.test(h)?"":h,g=(h,a)=>{const v=s().tz.zone(h);if(v)return{name:h,ianaName:v.name,zone:h,countries:E[h]??[],abbreviation:d(v.abbr(a)),offsetInMins:v.utcOffset(a)}},p={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran (Islamic Republic Of)",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia (Federated States Of)",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine, State of",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},E=(()=>s().tz.countries().reduce((h,a)=>s().tz.zonesForCountry(a).reduce((x,y)=>{x[y]||(x[y]=[]);const C=p[a];return C&&x[y].push({code:a,name:C}),x},h),{}))()},85081:(Z,O,e)=>{"use strict";e.d(O,{F:()=>s});var t=e(53943),n=e(84946),l=e(90801);class s{constructor(){this.subscribers=new Map,this.emitter=new t.Z}publish(c){this.emitter.emit(c.type,c)}subscribe(c,o){return this.getStream(c).subscribe({next:o})}getStream(c){return new n.y(o=>{const m=r=>{o.next(r)};return this.emitter.on(c.type,m),this.subscribers.set(m,o),()=>{this.emitter.off(c.type,m),this.subscribers.delete(m)}})}newScopedBus(c,o){return new i([c],this,o)}emit(c,o){typeof c=="string"?this.emitter.emit(c,{type:c,payload:o}):this.emitter.emit(c.name,{type:c.name,payload:o})}on(c,o,m){if(o.wrapper=r=>{o(r.payload)},typeof c=="string"?this.emitter.on(c,o.wrapper):this.emitter.on(c.name,o.wrapper),m){const r=m.$on("$destroy",()=>{this.off(c,o),r()})}}off(c,o){if(typeof c=="string"){this.emitter.off(c,o.wrapper);return}this.emitter.off(c.name,o.wrapper)}removeAllListeners(){this.emitter.removeAllListeners();for(const[c,o]of this.subscribers)o.complete(),this.subscribers.delete(c)}}class i{constructor(c,o,m){this.path=c,this.eventBus=o,this.filter=r=>this.filterConfig.onlyLocal?r.origin===this:!0,this.filterConfig=m??{onlyLocal:!1}}publish(c){c.origin||(c.origin=this),this.eventBus.publish(c)}getStream(c){return this.eventBus.getStream(c).pipe((0,l.h)(this.filter))}subscribe(c,o){return this.getStream(c).subscribe({next:o})}removeAllListeners(){this.eventBus.removeAllListeners()}newScopedBus(c,o){return new i([...this.path,c],this,o)}}},55294:(Z,O,e)=>{"use strict";e.d(O,{Pl:()=>f,es:()=>n,n1:()=>i,v9:()=>s,xH:()=>l});var t=e(62316);class n extends t.R{}n.type="data-hover";class l extends t.m{}l.type="data-hover-clear";class s extends t.R{}s.type="data-select";class i extends t.R{}i.type="annotation-event";class f extends t.R{}f.type="dashboard-loaded"},39253:(Z,O,e)=>{"use strict";e.d(O,{X:()=>n});const t=new Set;function n(l){if(t.has(l))throw new Error(`There is already an event defined with type '${l}'`);return t.add(l),{name:l}}},60626:(Z,O,e)=>{"use strict";e.d(O,{Fb:()=>l.F,Pl:()=>s.Pl,R_:()=>n.R,Xw:()=>t.X,es:()=>s.es,mA:()=>n.m,n1:()=>s.n1,v9:()=>s.v9,xH:()=>s.xH});var t=e(39253),n=e(62316),l=e(85081),s=e(55294)},62316:(Z,O,e)=>{"use strict";e.d(O,{R:()=>n,m:()=>t});class t{constructor(){this.type=this.__proto__.constructor.type}}class n extends t{constructor(s){super(),this.payload=s}}},18359:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(64140);class n extends t.B{}},36512:(Z,O,e)=>{"use strict";e.d(O,{U_:()=>d,gE:()=>E,je:()=>p});var t=e(82897),n=e.n(t),l=e(16911),s=e(85052),i=e(46519),f=e(14582),c=e(63279),o=e(67008),m=e(20112),r=e(59309);const u={dateTimeAsIso:!0,dateTimeAsIsoNoDateIfToday:!0,dateTimeAsUS:!0,dateTimeAsUSNoDateIfToday:!0,dateTimeAsLocal:!0,dateTimeAsLocalNoDateIfToday:!0,dateTimeFromNow:!0};function d(a){if(!a||(0,t.isEmpty)(a)||!a.field)return g;const v=a.field,x=v.config??{};let y=x.unit,C=y&&(u[y]||y.startsWith("time:")),P=!1;if(v.type===f.fS.time&&!C){if(y="dateTimeAsSystem",C=!0,v.values&&v.values.length>1){let I=v.values.get(0),F=v.values.get(v.values.length-1);typeof I=="string"?(I=(0,s.J)(I).unix(),F=(0,s.J)(F).unix()):(I/=1e3,F/=1e3),P=Math.abs(F-I)<60}}else if(v.type===f.fS.boolean)(0,m.br)(y)||(y="bool");else if(!y&&v.type===f.fS.string)y="string";else if(v.type===f.fS.enum)return p(a.theme,x.type?.enum);const D=y?.startsWith("currency"),M=(0,m.br)(y),b=v.type===f.fS.number,B=!C&&!D&&!M&&!(y==="locale")&&b&&x.decimals==null,w=(0,m.Cf)(y||"none"),A=(0,r.NI)(v,a.theme);return(I,F)=>{const{mappings:K}=x,W=y==="string";C&&typeof I=="string"&&(I=(0,i.zh)(I).valueOf());let U=W?NaN:(0,c.I)(I),N,S,Y,Q,z,G;if(K&&K.length>0){const j=(0,o.vh)(K,I);j&&(j.text!=null&&(N=j.text),j.color!=null&&(Q=a.theme.visualization.getColorByName(j.color)),j.icon!=null&&(z=j.icon))}if(!Number.isNaN(U)){if(N==null&&!(0,t.isBoolean)(I)){let j;B&&F!=null?(j=w(U,F,null,a.timeZone,P),j.text=+j.text+""):j=w(U,x.decimals,null,a.timeZone,P),N=j.text,Y=j.suffix,S=j.prefix}if(Q==null){const j=A(U);Q=j.color,G=j.percent}}if(N==null&&(0,t.isArray)(I)&&(N=(0,t.join)(I,", ")),N==null&&(N=(0,t.toString)(I),N||(x.noValue?N=x.noValue:N="")),!Q){const j=A(-1/0);Q=j.color,G=j.percent}const k={text:N,numeric:U,prefix:S,suffix:Y,color:Q};return z!=null&&(k.icon=z),G!=null&&(k.percent=G),k}}function g(a){return{text:(0,t.toString)(a),numeric:(0,c.I)(a)}}function p(a,v){const x={text:v?.text??[],color:v?.color??[]};return x.color=x.color.map(y=>a.visualization.getColorByName(y)),y=>{if(y==null)return{text:"",numeric:NaN};const C=+y;let P=x.text[C];P==null&&(P=`${y}`);let D=x.color[C];if(D==null){const{palette:M}=a.visualization;D=M[C%M.length],x.color[C]=D}return{text:P,numeric:C,color:D}}}function E(){return a=>({text:(0,l.DP)(a)==="other"?`${JSON.stringify(a,h())}`:`${a}`,numeric:null})}const h=()=>{const a=new WeakSet;return(v,x)=>{if(typeof x=="object"&&x!==null){if(a.has(x))return;a.add(x)}return x}}},425:(Z,O,e)=>{"use strict";e.d(O,{QY:()=>r,WO:()=>c,YO:()=>u,fD:()=>m});var t=e(32701),n=e(21760),l=e(66926),s=e(64140),i=e(59309),f=e(58230);const c=new s.B(()=>[{id:l.S.Fixed,name:"Single color",description:"Set a specific color",getCalculator:d},{id:l.S.Thresholds,name:"From thresholds",isByValue:!0,description:"Derive colors from thresholds",getCalculator:(g,p)=>(E,h,a)=>{const v=a??f.yM;return p.visualization.getColorByName(v.color)}},new o({id:l.S.PaletteClassic,name:"Classic palette",isContinuous:!1,isByValue:!1,getColors:g=>g.visualization.palette}),new o({id:l.S.ContinuousGrYlRd,name:"Green-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["green","yellow","red"]}),new o({id:l.S.ContinuousRdYlGr,name:"Red-Yellow-Green",isContinuous:!0,isByValue:!0,getColors:g=>["red","yellow","green"]}),new o({id:l.S.ContinuousBlYlRd,name:"Blue-Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["dark-blue","super-light-yellow","dark-red"]}),new o({id:l.S.ContinuousYlRd,name:"Yellow-Red",isContinuous:!0,isByValue:!0,getColors:g=>["super-light-yellow","dark-red"]}),new o({id:l.S.ContinuousBlPu,name:"Blue-Purple",isContinuous:!0,isByValue:!0,getColors:g=>["blue","purple"]}),new o({id:l.S.ContinuousYlBl,name:"Yellow-Blue",isContinuous:!0,isByValue:!0,getColors:g=>["super-light-yellow","dark-blue"]}),new o({id:l.S.ContinuousBlues,name:"Blues",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-blue"]}),new o({id:l.S.ContinuousReds,name:"Reds",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-red"]}),new o({id:l.S.ContinuousGreens,name:"Greens",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-green"]}),new o({id:l.S.ContinuousPurples,name:"Purples",isContinuous:!0,isByValue:!0,getColors:g=>["panel-bg","dark-purple"]})]);class o{constructor(p){this.id=p.id,this.name=p.name,this.description=p.description,this.getNamedColors=p.getColors,this.isContinuous=p.isContinuous,this.isByValue=p.isByValue}getColors(p){return this.getNamedColors?this.colorCache&&this.colorCacheTheme===p?this.colorCache:(this.colorCache=this.getNamedColors(p).map(p.visualization.getColorByName),this.colorCacheTheme=p,this.colorCache):[]}getInterpolator(){return this.interpolator||(this.interpolator=(0,t.hD)(this.colorCache)),this.interpolator}getCalculator(p,E){const h=this.getColors(E);return this.isByValue?this.isContinuous?(a,v,x)=>this.getInterpolator()(v):(a,v,x)=>h[v*(h.length-1)]:(a,v,x)=>{const y=p.state?.seriesIndex??0;return h[y%h.length]}}}function m(g){return c.get(g.config.color?.mode??l.S.Thresholds)}function r(g){return c.get(g??l.S.Thresholds)}function u(g,p){const E=m(g);if(!E.isByValue)return{color:E.getCalculator(g,p)(0,0),threshold:f.yM,percent:1};const h=(0,i.NI)(g,p),a=g.config.color?.seriesBy??"last",x=(0,n.Kx)({field:g,reducers:[a]})[a]??0;return h(x)}function d(g,p){return()=>p.visualization.getColorByName(g.config.color?.fixedColor??l.R)}},17128:(Z,O,e)=>{"use strict";e.d(O,{E1:()=>g,HU:()=>u,cB:()=>h,dE:()=>E,gG:()=>C,nG:()=>a,n_:()=>d,pZ:()=>p,sg:()=>P});var t=e(82897),n=e.n(t),l=e(50235),s=e(16911),i=e(3249),f=e(21760),c=e(85854),o=e(14582),m=e(36512),r=e(89890);const u="__series.name",d="__field.displayName",g="__field.labels",p="__calc",E="__cell_",h=25,a=b=>{const{replaceVariables:R,reduceOptions:B,timeZone:w,theme:A}=b,I=B.calcs.length?B.calcs:[f.gz.last],F=[],K=(0,i.sq)(B.fields?{id:c.mi.byRegexp,options:B.fields}:{id:c.mi.numeric}),W=b.data??[],U=B.limit?B.limit:h,N={};let S=!1;for(let Y=0;Y<W.length&&!S;Y++){const Q=W[Y],{timeField:z}=(0,s.sV)(Q),G=new l.U(Q);for(let k=0;k<Q.fields.length&&!S;k++){const j=Q.fields[k],de=j.getLinks;if(!K(j,Q,W))continue;let ge=j.config;j.state?.range&&(ge={...ge,...j.state?.range});const re=j.config.displayName??"",ce=j.display??(0,m.U_)({field:j,theme:b.theme,timeZone:w});if(B.values){const ie=re.indexOf(E)>=0;for(let fe=0;fe<j.values.length;fe++){if(ie)for(let X=0;X<Q.fields.length;X++){const ae=Q.fields[X].values.get(fe);N[E+X]={value:ae,text:(0,t.toString)(ae)}}j.state=x(j,F.length);const Ce=ce(j.values.get(fe)),ee=v(Q,j,fe,R,N),ne=y(ee,b.fieldConfig,A);if(F.push({name:"",field:ge,display:{...Ce,title:ee,color:ne??Ce.color},view:G,colIndex:k,rowIndex:fe,getLinks:de?()=>de({valueRowIndex:fe}):()=>[],hasLinks:C(j)}),F.length>=U){S=!0;break}}}else{const ie=(0,f.Kx)({field:j,reducers:I});for(const fe of I){N[p]={value:fe,text:fe};const Ce=ce(ie[fe]);re!==""?Ce.title=R(re,{...j.state?.scopedVars,...N}):Ce.title=(0,r.C)(j,Q,W);let ee;b.sparkline&&(ee={y:Q.fields[k],x:z},fe===f.gz.last?ee.highlightIndex=ee.y.values.length-1:fe===f.gz.first&&(ee.highlightIndex=0)),F.push({name:fe,field:ge,display:Ce,sparkline:ee,view:G,colIndex:k,getLinks:de?()=>de({calculatedValue:Ce}):()=>[],hasLinks:C(j)})}}}}return F.length===0&&F.push(D(b)),F};function v(b,R,B,w,A){let I=[],F=0;if(R.config.displayName)return w(R.config.displayName,{...R.state?.scopedVars,...A});for(const K of b.fields)if(K!==R)if(K.type===o.fS.string){const W=K.values.get(B)??"",U=K.display?K.display(W).text:W;U.length>0&&I.push(U)}else K.type===o.fS.number&&F++;return(F||I.length===0)&&I.push((0,r.C)(R,b)),I.join(" ")}function x(b,R){return{...b.state,seriesIndex:R}}function y(b,R,B){for(const w of R.overrides)if(w.matcher.id==="byName"&&w.matcher.options===b){for(const A of w.properties)if(A.id==="color"&&A.value)return B.visualization.getColorByName(A.value.fixedColor)}return null}function C(b){return b.config?.links?.length?b.config.links.length>0:!1}function P(b){let R="",B="",w="",A="";for(let I=0;I<b.length;I++){const F=b[I].display;F.text&&F.text.length>B.length&&(B=F.text),F.title&&F.title.length>R.length&&(R=F.title),F.prefix&&F.prefix.length>w.length&&(w=F.prefix),F.suffix&&F.suffix.length>A.length&&(A=F.suffix)}return{text:B,title:R,suffix:A,prefix:w}}function D(b){const R="No data",{fieldConfig:B,timeZone:w}=b,{defaults:A}=B,F=(0,m.U_)({field:{type:o.fS.other,config:A},theme:b.theme,timeZone:w})(null),K=M(F,R);return{name:R,field:{...A,max:A.max??0,min:A.min??0},display:{text:K,numeric:0,color:F.color},hasLinks:!1}}function M(b,R){return!b||(0,t.isEmpty)(b.text)?R:b.text}},36998:(Z,O,e)=>{"use strict";e.d(O,{SM:()=>C,Of:()=>w,Xu:()=>y,oB:()=>B,Cc:()=>A,gb:()=>R});var t=e(82897),n=e(68404),l=e(64076),s=e(40538),i=e(16911),f=e(38067),c=e(64724),o=e(21760),m=e(3249),r=e(14582),u=e(66926),d=e(83383),g=e(89029),p=e(36512),E=e(89890),h=e(94847),a=e(35363),v=e(15355);function x(I,F,K){return new Proxy({},{get:(W,U)=>{if(U==="name")return I.name;if(U==="displayName")return(0,E.C)(I,F,K);if(U==="labels"||U==="formattedLabels")return I.labels?{...I.labels,__values:Object.values(I.labels).sort().join(", "),toString:()=>(0,v.aA)(I.labels,"",!0)}:""}})}function y(I){let F=null,K=null;const W=[o.gz.min,o.gz.max];for(const U of I)for(const N of U.fields)if(N.type===r.fS.number){const S=(0,o.Kx)({field:N,reducers:W}),Y=S[o.gz.min],Q=S[o.gz.max];(F===null||Y<F)&&(F=Y),(K===null||Q>K)&&(K=Q)}return{min:F,max:K,delta:(K??0)-(F??0)}}function C(I){if(!I.data)return[];const F=I.fieldConfig;if(!F)return I.data;const K=I.fieldConfigRegistry??a.N;let W=0,U;const N=[];if(F.overrides)for(const S of F.overrides){const Y=m.Ls.get(S.matcher.id);Y&&N.push({match:Y.get(S.matcher.options),properties:S.properties})}return I.data.map((S,Y)=>{const Q={...S};Q.fields=Q.fields.map(G=>({...G,config:(0,t.cloneDeep)(G.config),state:{...G.state}}));const z={__series:{text:"Series",value:{name:(0,E.n)(Q,Y)}}};for(const G of Q.fields){const k=G.config;G.state.scopedVars={...z,__field:{text:"Field",value:x(G,Q,I.data)}};const j={field:G,data:I.data,dataFrameIndex:Y,replaceVariables:I.replaceVariables,fieldConfigRegistry:K};M(k,F.defaults,j);for(const re of N)if(re.match(G,Q,I.data))for(const ce of re.properties)D(k,ce,j);let de=G.type;if(!de||de===r.fS.other){const re=(0,i.fu)(G);re&&(de=re)}let ge;if(G.type===r.fS.number){!U&&(!(0,t.isNumber)(k.min)||!(0,t.isNumber)(k.max))&&(U=y(I.data));const re=k.min??U.min,ce=k.max??U.max;ge={min:re,max:ce,delta:ce-re}}G.state.seriesIndex=W,G.state.range=ge,G.type=de,G.type!==r.fS.time&&W++,G.display=(0,p.U_)({field:G,theme:I.theme,timeZone:I.timeZone}),G.config.unit!=="dateTimeFromNow"&&(G.display=P(G.display,2500)),G.getLinks=B(Q,G,G.state.scopedVars,j.replaceVariables,I.timeZone)}return Q})}function P(I,F=2500){const K=new Map;for(let W=-1;W<=15;W++)K.set(W,new Map);return(W,U)=>{let N=K.get(U??-1),S=N.get(W);return S||(N.size===F&&N.clear(),S=I(W,U),S.color&&(S.color=(0,c.asHexString)(S.color)),N.set(W,S)),S}}function D(I,F,K){const U=K.fieldConfigRegistry.getIfExists(F.id);if(!U)return;const N=U.process(F.value,K,U.settings);N==null?U.isCustom&&I.custom?(0,t.unset)(I.custom,U.path):(0,t.unset)(I,U.path):U.isCustom?(I.custom||(I.custom={}),(0,t.set)(I.custom,U.path,N)):(0,t.set)(I,U.path,N)}function M(I,F,K){I.links&&F.links&&(I.links=[...I.links,...F.links]);for(const W of K.fieldConfigRegistry.list())W.isCustom&&!I.custom&&(I.custom={}),b(W.isCustom?I.custom:I,W.isCustom?F.custom:F,W,K);R(I)}function b(I,F,K,W){const U=(0,t.get)(I,K.path);if(U==null){const N=W.fieldConfigRegistry.getIfExists(K.id);if(!N)return;if(N&&N.shouldApply(W.field)){const S=N.process((0,t.get)(F,N.path),W,N.settings);S!=null&&(0,t.set)(I,N.path,S)}}}function R(I){const{thresholds:F}=I;if(I.color?I.color.mode||delete I.color:F&&(I.color={mode:u.S.Thresholds}),I.hasOwnProperty("min")&&I.hasOwnProperty("max")&&I.min>I.max){const K=I.max;I.max=I.min,I.min=K}}const B=(I,F,K,W,U)=>N=>!F.config.links||F.config.links.length===0?[]:F.config.links.map(S=>{let Y={},Q={value:{frame:I,field:F}};if(N.valueRowIndex!==void 0&&!isNaN(N.valueRowIndex)){Q.value.rowIndex=N.valueRowIndex;const j=(0,h.z)({frame:I,rowIndex:N.valueRowIndex,timeZone:U});Y={__data:{value:{name:I.name,refId:I.refId,fields:j},text:"Data"}}}else Q.value.calculatedValue=N.calculatedValue;const z={...K,...Y,__dataContext:Q};if(S.onClick)return{href:S.url,title:W(S.title||"",z),target:S.targetBlank?"_blank":void 0,onClick:(j,de)=>{S.onClick({origin:de??F,e:j,replaceVariables:ge=>W(ge,z)})},origin:F};if(S.internal)return(0,g._)({link:S,internalLink:S.internal,scopedVars:z,field:F,range:S.internal.range??{},replaceVariables:W});let G=S.onBuildUrl?S.onBuildUrl({origin:F,replaceVariables:W}):S.url;return G&&(G=d.u.assureBaseUrl(G.replace(/\n/g,"")),G=W(G,z,s.b8.UriEncode),G=d.u.processUrl(G)),{href:G,title:W(S.title||"",z),target:S.targetBlank?"_blank":void 0,origin:F}});function w(I){if(!I||I.length===0)return[];const F=[...I],K=(0,p.gE)();for(let W=0;W<F.length;W++){const U={...F[W]},N=[...U.fields];for(let S=0;S<N.length;S++)N[S]={...N[S],display:K};F[W]={...U,fields:N}}return F}function A(I,F,K,W,U,N){const S=I?.fieldConfigRegistry,Y=(0,n.useRef)(0),Q=(0,l.Z)(K?.series);return(0,n.useMemo)(()=>{if(!S||!F||!K)return;const z=K?.series;return K.structureRev==null&&z&&Q&&!(0,f.nl)(z,Q,f.Ch)&&Y.current++,{structureRev:Y.current,...K,series:C({data:z,fieldConfig:F,fieldConfigRegistry:S,replaceVariables:N,theme:U,timeZone:W})}},[S,F,K,Q,W,U,N])}},89890:(Z,O,e)=>{"use strict";e.d(O,{C:()=>s,n:()=>l});var t=e(14582),n=e(15355);function l(o,m){if(o.name)return o.name;const r=[];for(const u of o.fields)u.labels&&Object.keys(u.labels).length>0&&r.push(u);return r.length===1?(0,n.aA)(r[0].labels):m===void 0?o.fields.filter(u=>u.type!==t.fS.time).map(u=>s(u,o)).join(", "):o.refId?`Series (${o.refId})`:`Series (${m})`}function s(o,m,r){const u=o.state?.displayName,d=Boolean(r&&r.length>1);if(u&&d===o.state?.multipleFrames)return u;const g=i(o,m,r);return o.state=o.state||{},o.state.displayName=g,o.state.multipleFrames=d,g}function i(o,m,r){const u=o.config?.displayName&&o.config?.displayName.length;let d=u?o.config.displayName:o.name;if(u)return d;if(m&&o.config?.displayNameFromDS)return o.config.displayNameFromDS;if(o.type===t.fS.time&&!o.labels)return d??t.Ls;let g=[],p=!1;if(r&&r.length>1){for(let a=1;a<r.length;a++)if(r[a].name!==r[a-1].name){p=!0;break}}let E=!1,h=!1;if(p&&m?.name&&(g.push(m.name),E=!0),o.name&&o.name!==t.M5&&g.push(o.name),o.labels&&m){let a=c(r??[m]);if(a)o.labels[a]&&(g.push(o.labels[a]),h=!0);else{let v=(0,n.aA)(o.labels);v&&(g.push(v),h=!0)}}return m&&!E&&!h&&o.name===t.M5&&m.name&&m.name.length>0&&(g.push(m.name),E=!0),g.length?d=g.join(" "):o.name?d=o.name:d=t.M5,d===o.name&&(d=f(o,m)),d}function f(o,m){let r=0,u=!1;if(m)for(let d=0;d<m.fields.length;d++){const g=m.fields[d];if(o===g){if(u=!0,r>0){r++;break}}else if(o.name===g.name&&(r++,u))break}return r?`${o.name} ${r}`:o.name}function c(o){let m=null;for(let r=0;r<o.length;r++){const u=o[r];for(const d of u.fields)if(d.labels){for(const g in d.labels)if(m===null)m=g;else if(g!==m)return null}}return m}},94847:(Z,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(82897),n=e.n(t),l=e(20112),s=e(36512);function i(f){return new Proxy({},{get:(c,o)=>{let m=f.frame.fields.find(g=>o===g.name);if(!m){const g=(0,t.toNumber)(o);m=f.frame.fields[g]}if(m||(m=f.frame.fields.find(g=>o===g.config.displayName)),m||(m=f.frame.fields.find(g=>g.labels?o===g.labels.name:!1)),!m)return;const r=m.display??(0,s.U_)(),u=m.values.get(f.rowIndex),d=r(u);return d.toString=()=>(0,l.zc)(d),d}})}},37741:(Z,O,e)=>{"use strict";e.d(O,{AE:()=>s.AE,CZ:()=>r.C,Cc:()=>o.Cc,E1:()=>t.E1,HU:()=>t.HU,N6:()=>l.N,NI:()=>u.NI,NN:()=>s.NN,Of:()=>o.Of,Oh:()=>s.Oh,QY:()=>i.QY,SM:()=>o.SM,SO:()=>l.S,U_:()=>n.U_,VB:()=>s.VB,W0:()=>s.W0,W4:()=>s.W4,WO:()=>i.WO,YO:()=>i.YO,ZD:()=>f.Z,ZN:()=>s.ZN,bP:()=>c.bP,cB:()=>t.cB,dE:()=>t.dE,dz:()=>u.dz,fD:()=>i.fD,gE:()=>n.gE,gG:()=>t.gG,gb:()=>o.gb,je:()=>n.je,kG:()=>s.kG,m1:()=>c.m1,nG:()=>t.nG,n_:()=>t.n_,nf:()=>r.n,op:()=>s.op,pZ:()=>t.pZ,sg:()=>t.sg,uj:()=>s.uj,xD:()=>u.xD,zv:()=>m.z});var t=e(17128),n=e(36512),l=e(35363),s=e(78798),i=e(425),f=e(18359),c=e(58230),o=e(36998),m=e(94847),r=e(89890),u=e(59309)},78798:(Z,O,e)=>{"use strict";e.d(O,{AE:()=>f,NN:()=>s,Oh:()=>n,VB:()=>m,W0:()=>l,W4:()=>r,ZN:()=>o,kG:()=>t,op:()=>c,uj:()=>i});const t=(u,d,g)=>u,n=(u,d,g)=>{if(u!=null)return parseFloat(u)},l=(u,d,g)=>(delete d.field?.state?.displayName,c(u,d,g)),s=(u,d,g)=>u,i=(u,d,g)=>u,f=(u,d,g)=>u,c=(u,d,g)=>u==null?u:g&&g.expandTemplateVars&&d.replaceVariables?d.replaceVariables(u,d.field.state.scopedVars):`${u}`,o=(u,d,g)=>u,m=(u,d,g)=>u,r=(u,d,g)=>u},59309:(Z,O,e)=>{"use strict";e.d(O,{NI:()=>c,dz:()=>m,xD:()=>r});var t=e(82897),n=e.n(t),l=e(21760),s=e(14582),i=e(425),f=e(58230);function c(u,d){if(u.type===s.fS.boolean)return o(u,d);const p=(0,i.fD)(u).getCalculator(u,d),E=u.state?.range??m(u);return h=>{let a=0;h!==-1/0&&(a=(h-E.min)/E.delta,Number.isNaN(a)&&(a=0));const v=(0,f.pD)(u,h,a);return{percent:a,threshold:v,color:p(h,a,v)}}}function o(u,d){const g={color:d.visualization.getColorByName("green"),percent:1,threshold:void 0},p={color:d.visualization.getColorByName("red"),percent:0,threshold:void 0},E=(0,i.fD)(u);if(E.isContinuous&&E.getColors){const h=E.getColors(d);g.color=h[h.length-1],p.color=h[0]}return h=>Boolean(h)?g:p}function m(u){if(u.type!==s.fS.number)return{min:0,max:100,delta:100};let d=u.config.min,g=u.config.max;if(!(0,t.isNumber)(d)||!(0,t.isNumber)(g))if(u.values&&u.values.length){const p=(0,l.Kx)({field:u,reducers:[l.gz.min,l.gz.max]});(0,t.isNumber)(d)||(d=p[l.gz.min]),(0,t.isNumber)(g)||(g=p[l.gz.max])}else d=0,g=100;return{min:d,max:g,delta:g-d}}function r(u,d){const{config:g}=u;let{min:p,max:E}=g;return(0,t.isNumber)(p)&&(0,t.isNumber)(E)?g:d||!u.state?.range?{...g,...m(u)}:{...g,...u.state.range}}},35363:(Z,O,e)=>{"use strict";e.d(O,{N:()=>l,S:()=>s});var t=e(64140),n=e(18359);const l=new n.Z,s=new t.B},58230:(Z,O,e)=>{"use strict";e.d(O,{bP:()=>f,m1:()=>s,pD:()=>i,yM:()=>l});var t=e(66926),n=e(24177);const l={value:0,color:t.R};function s(c,o){if(!o||o.length===0)return l;let m=o[0];for(const r of o)if(c>=r.value)m=r;else break;return m}function i(c,o,m){const{thresholds:r}=c.config;return r?.mode===n.H.Percentage?s(m*100,r?.steps):s(o,r?.steps)}function f(c){return c.sort((o,m)=>o.value-m.value)}},87456:(Z,O,e)=>{"use strict";e.d(O,{q:()=>t.q1});var t=e(40538)},24034:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{AnnotationChangeEvent:()=>u.n1,AppendedVectors:()=>s.l$,ArrayDataFrame:()=>i.iB,ArrayVector:()=>s.Gt,AsNumberVector:()=>s.sq,BinaryOperationID:()=>t.LH,BinaryOperationVector:()=>s.rM,BusEventBase:()=>u.mA,BusEventWithPayload:()=>u.R_,ByNamesMatcherMode:()=>f.Ys,CSVHeaderStyle:()=>t.x5,CSVReader:()=>t.QM,CircularDataFrame:()=>i.a2,CircularVector:()=>s.dV,ConstantVector:()=>s.uI,DEFAULT_FIELD_DISPLAY_VALUES_LIMIT:()=>r.cB,DashboardLoadedEvent:()=>u.Pl,DataFrameView:()=>i.US,DataHoverClearEvent:()=>u.xH,DataHoverEvent:()=>u.es,DataLinkBuiltInVars:()=>t.WC,DataSelectEvent:()=>u.v9,DataSourcePluginContextProvider:()=>y.n,DataTransformerID:()=>f.Wk,DocsId:()=>t.xV,EventBusSrv:()=>u.Fb,FieldCache:()=>i.N,FieldConfigEditorBuilder:()=>t.vo,FieldConfigOptionsRegistry:()=>r.ZD,FieldMatcherID:()=>f.mi,FormattedVector:()=>s.$Y,FrameGeometrySourceMode:()=>p.q,FrameMatcherID:()=>f.E4,ISO_8601:()=>c.VJ,IndexVector:()=>s.rm,InternalTimeZones:()=>c.RQ,LayoutModes:()=>E.l,LegacyMappingType:()=>t.HU,LogsParsers:()=>t.bA,MISSING_VALUE:()=>i.Yi,MatcherID:()=>f.Ff,MutableDataFrame:()=>i.vA,NodeGraphDataFrameFieldNames:()=>t.zG,PanelOptionsEditorBuilder:()=>t.rt,PanelPlugin:()=>h.c,PluginContextProvider:()=>x.b,ReducerID:()=>f.gz,Registry:()=>t.Bz,SortedVector:()=>s.oH,SystemDateFormatsState:()=>c.zf,VAR_CALC:()=>r.pZ,VAR_CELL_PREFIX:()=>r.dE,VAR_FIELD_LABELS:()=>r.E1,VAR_FIELD_NAME:()=>r.n_,VAR_SERIES_NAME:()=>r.HU,ValueMatcherID:()=>f.mE,addDurationToDate:()=>c.Ks,addLogLevelToSeries:()=>t.Ar,anySeriesWithTimeField:()=>i.m$,anyToNumber:()=>t.IX,applyFieldOverrides:()=>r.SM,applyRawFieldOverrides:()=>r.Of,arrayUtils:()=>t.sq,binaryOperators:()=>t.nk,booleanOverrideProcessor:()=>r.W4,booleanValueFormatter:()=>m.IR,buildHistogram:()=>f.gY,calculateFieldStats:()=>t.zd,calculateLogsLabelStats:()=>t.lL,calculateStats:()=>t.i6,checkLogsError:()=>t.Mi,classicColors:()=>t.ZC,colorManipulator:()=>d.r,compareArrayValues:()=>i.nl,compareDataFrameStructures:()=>i.Ch,convertOldAngularValueMappings:()=>t.Jb,createDimension:()=>i.q2,createFieldConfigRegistry:()=>v.j,createTheme:()=>d.j,dataFrameFromJSON:()=>i.vP,dataFrameToJSON:()=>i.Y,dataLinksOverrideProcessor:()=>r.NN,dateMath:()=>c.Rn,dateTime:()=>c.CQ,dateTimeAsMoment:()=>c.C_,dateTimeForTimeZone:()=>c.GY,dateTimeFormat:()=>c.dq,dateTimeFormatISO:()=>c.lf,dateTimeFormatTimeAgo:()=>c.E8,dateTimeFormatWithAbbrevation:()=>c.Fm,dateTimeParse:()=>c.J,decodeFieldValueEntities:()=>i.Jy,decodeFieldValueEnums:()=>i.Ib,deprecationWarning:()=>t.d9,displayNameOverrideProcessor:()=>r.W0,doStandardCalcs:()=>f.uP,durationToMilliseconds:()=>c.iX,ensureTimeField:()=>f.J_,escapeRegex:()=>o.yI,escapeStringForRegex:()=>o.GE,escapeUnescapedString:()=>t.l3,eventFactory:()=>u.Xw,fieldColorModeRegistry:()=>r.WO,fieldMatchers:()=>f.Ls,fieldReducers:()=>f.TB,filterFieldConfigOverrides:()=>a.aS,findCommonLabels:()=>t.FT,findHighlightChunksInText:()=>o.Xt,findMatchesInText:()=>o.lu,findUniqueLabels:()=>t.IU,formatLabels:()=>t.aA,formattedValueToString:()=>m.zc,frameMatchers:()=>f.Ac,getActiveThreshold:()=>r.m1,getAllValuesFromDimension:()=>i.r7,getColumnFromDimension:()=>i.$q,getColumnsFromDimension:()=>i.GV,getDataFrameRow:()=>i.fh,getDataSourceRef:()=>t.iU,getDataSourceUID:()=>t.BT,getDimensionByName:()=>i.YP,getDisplayProcessor:()=>r.U_,getDisplayValueAlignmentFactors:()=>r.sg,getEnumDisplayProcessor:()=>r.je,getFieldColorMode:()=>r.QY,getFieldColorModeForField:()=>r.fD,getFieldConfigWithMinMax:()=>r.xD,getFieldDisplayName:()=>r.CZ,getFieldDisplayValues:()=>r.nG,getFieldDisplayValuesProxy:()=>r.zv,getFieldMatcher:()=>f.sq,getFieldSeriesColor:()=>r.YO,getFieldTypeFromValue:()=>i.DP,getFlotPairs:()=>t.k8,getFlotPairsConstant:()=>t.HE,getFrameDisplayName:()=>r.nf,getFrameMatchers:()=>f.b9,getHistogramFields:()=>f.qr,getLinksSupplier:()=>D.oB,getLocale:()=>c.Kd,getLocaleData:()=>c.k4,getLogLevel:()=>t.ZO,getLogLevelFromKey:()=>t.jx,getMinMaxAndDelta:()=>r.dz,getPanelOptionsWithDefaults:()=>a.d4,getParser:()=>t.MT,getProcessedDataFrames:()=>i.F9,getRawDisplayProcessor:()=>r.gE,getScaleCalculator:()=>r.NI,getSeriesTimeStep:()=>t.e4,getTimeField:()=>i.sV,getTimeZone:()=>c.Ze,getTimeZoneGroups:()=>c.$8,getTimeZoneInfo:()=>c.Pr,getTimeZones:()=>c.ZV,getValueFormat:()=>m.Cf,getValueFormats:()=>m.QW,getValueFormatterIndex:()=>m.Td,getValueFromDimension:()=>i.jC,getValueMatcher:()=>f.IG,getWeekdayIndex:()=>c.ig,getWeekdayIndexByEnglishName:()=>c.jN,guessDecimals:()=>t.dP,guessFieldTypeForField:()=>i.fu,guessFieldTypeFromNameAndValue:()=>i._m,guessFieldTypeFromValue:()=>i.LI,guessFieldTypes:()=>i.SX,hasLinks:()=>r.gG,hasMsResolution:()=>t.fp,histogramBucketSizes:()=>f.Zi,histogramFieldInfo:()=>f.py,histogramFieldsToFrame:()=>f.zM,histogramFrameBucketMaxFieldName:()=>f.cO,histogramFrameBucketMinFieldName:()=>f.wL,histogramTransformer:()=>f.Op,identityOverrideProcessor:()=>r.kG,incrRound:()=>f.Jz,incrRoundDn:()=>f.mB,incrRoundUp:()=>f.UO,intervalToAbbreviatedDurationString:()=>c.vT,isBooleanUnit:()=>m.br,isCustomFieldProp:()=>a.Lc,isDataFrame:()=>i.aY,isDataSourcePluginContext:()=>P.v,isDataSourceRef:()=>t.cv,isDateTime:()=>c.v9,isDateTimeInput:()=>c.D2,isHistogramFrameBucketMaxFieldName:()=>f.kl,isHistogramFrameBucketMinFieldName:()=>f.Ok,isStandardFieldProp:()=>a._k,isTableData:()=>i.Ji,isTimeSeriesFrame:()=>i.pP,isTimeSeriesFrames:()=>i.xI,isValidDate:()=>c.qb,isValidDuration:()=>c.jO,isValidGoDuration:()=>c.IA,localTimeFormat:()=>c.Ji,locale:()=>m.SP,locationUtil:()=>t.uT,makeClassES5Compatible:()=>t.s2,mapInternalLinkToExplore:()=>t._N,matchAllLabels:()=>t.VS,monacoLanguageRegistry:()=>g.F,numberOverrideProcessor:()=>r.Oh,objRemoveUndefined:()=>t.Hh,onUpdateDatasourceJsonDataOption:()=>t._R,onUpdateDatasourceJsonDataOptionChecked:()=>t.hz,onUpdateDatasourceJsonDataOptionSelect:()=>t.nx,onUpdateDatasourceOption:()=>t.z_,onUpdateDatasourceResetOption:()=>t.HD,onUpdateDatasourceSecureJsonDataOption:()=>t.fi,onUpdateDatasourceSecureJsonDataOptionSelect:()=>t.TX,outerJoinDataFrames:()=>f.JP,parseDuration:()=>c.RA,parseFlags:()=>o.TL,parseLabels:()=>t.J8,preProcessPanelData:()=>i.zR,rangeUtil:()=>c.cT,readCSV:()=>t.uP,reduceField:()=>f.Kx,renderMarkdown:()=>o.ap,renderTextPanelMarkdown:()=>o.xH,restoreCustomOverrideRules:()=>a.__,reverseDataFrame:()=>i.Y6,roundDecimals:()=>t.O9,scaledUnits:()=>m.Qj,selectOverrideProcessor:()=>r.AE,serializeStateToUrlParam:()=>t.S,setLocale:()=>c.i_,setTimeZoneResolver:()=>c.K7,setWeekStart:()=>c.Ls,shallowCompare:()=>i.Vv,simpleCountUnit:()=>m.SR,sortDataFrame:()=>i.aK,sortInAscendingOrder:()=>t.DA,sortInDescendingOrder:()=>t.$8,sortLogRows:()=>t.$u,sortLogsResult:()=>t.j0,sortThresholds:()=>r.bP,standardEditorsRegistry:()=>r.SO,standardFieldConfigEditorRegistry:()=>r.N6,standardTransformers:()=>f.YR,standardTransformersRegistry:()=>f.Ze,stringFormater:()=>m.vb,stringOverrideProcessor:()=>r.op,stringStartsAsRegEx:()=>o.oH,stringToJsRegex:()=>o.jO,stringToMs:()=>o.e0,systemDateFormats:()=>c.U6,textUtil:()=>o.QX,thresholdsOverrideProcessor:()=>r.ZN,timeZoneAbbrevation:()=>c.Hk,timeZoneFormatUserFriendly:()=>c.Vs,toCSV:()=>t.MJ,toDataFrame:()=>i.g0,toDataFrameDTO:()=>i.og,toDuration:()=>c.np,toFilteredDataFrameDTO:()=>i.Aw,toFixed:()=>m.FH,toFixedScaled:()=>m.bn,toFixedUnit:()=>m.q2,toFloatOrUndefined:()=>o.dz,toIntegerOrUndefined:()=>o.By,toLegacyResponseData:()=>i.Zr,toNumberString:()=>o.PF,toOption:()=>t.Er,toPascalCase:()=>o.Mh,toUtc:()=>c.zh,transformDataFrame:()=>f.Hz,unEscapeStringFromRegex:()=>o.x6,unitOverrideProcessor:()=>r.VB,updateDatasourcePluginJsonDataOption:()=>t.tp,updateDatasourcePluginOption:()=>t.fd,updateDatasourcePluginResetOption:()=>t.Mf,updateDatasourcePluginSecureJsonDataOption:()=>t.uw,urlUtil:()=>t.Cj,useFieldOverrides:()=>r.Cc,usePluginContext:()=>C.g,validateFieldConfig:()=>r.gb,valueMappingsOverrideProcessor:()=>r.uj,valueMatchers:()=>f.U8,vectorator:()=>s.sD,withLoadingIndicator:()=>t.xc});var t=e(81102),n=e(19108),l={};for(const M in n)["default","LayoutModes","PanelPlugin","getPanelOptionsWithDefaults","filterFieldConfigOverrides","restoreCustomOverrideRules","isCustomFieldProp","isStandardFieldProp","createFieldConfigRegistry","PluginContextProvider","DataSourcePluginContextProvider","usePluginContext","isDataSourcePluginContext","getLinksSupplier","BinaryOperationID","CSVHeaderStyle","CSVReader","DataLinkBuiltInVars","DocsId","FieldConfigEditorBuilder","LegacyMappingType","LogsParsers","NodeGraphDataFrameFieldNames","PanelOptionsEditorBuilder","Registry","addLogLevelToSeries","anyToNumber","arrayUtils","binaryOperators","calculateFieldStats","calculateLogsLabelStats","calculateStats","checkLogsError","classicColors","convertOldAngularValueMappings","deprecationWarning","escapeUnescapedString","findCommonLabels","findUniqueLabels","formatLabels","getDataSourceRef","getDataSourceUID","getFlotPairs","getFlotPairsConstant","getLogLevel","getLogLevelFromKey","getParser","getSeriesTimeStep","guessDecimals","hasMsResolution","isDataSourceRef","locationUtil","makeClassES5Compatible","mapInternalLinkToExplore","matchAllLabels","objRemoveUndefined","onUpdateDatasourceJsonDataOption","onUpdateDatasourceJsonDataOptionChecked","onUpdateDatasourceJsonDataOptionSelect","onUpdateDatasourceOption","onUpdateDatasourceResetOption","onUpdateDatasourceSecureJsonDataOption","onUpdateDatasourceSecureJsonDataOptionSelect","parseLabels","readCSV","roundDecimals","serializeStateToUrlParam","sortInAscendingOrder","sortInDescendingOrder","sortLogRows","sortLogsResult","toCSV","toOption","updateDatasourcePluginJsonDataOption","updateDatasourcePluginOption","updateDatasourcePluginResetOption","updateDatasourcePluginSecureJsonDataOption","urlUtil","withLoadingIndicator"].indexOf(M)<0&&(l[M]=()=>n[M]);e.d(O,l);var s=e(78330),i=e(31815),f=e(42960),c=e(46034),o=e(8928),m=e(41024),r=e(37741),u=e(60626),d=e(4765),g=e(82513),p=e(87456),E=e(1762),h=e(48513),a=e(2118),v=e(39778),x=e(20231),y=e(94929),C=e(59417),P=e(61345),D=e(36998)},82513:(Z,O,e)=>{"use strict";e.d(O,{F:()=>t.F});var t=e(87442)},87442:(Z,O,e)=>{"use strict";e.d(O,{F:()=>n});var t=e(64140);const n=new t.B},48513:(Z,O,e)=>{"use strict";e.d(O,{c:()=>o});var t=e(82897),n=e.n(t),l=e(18359),s=e(24699),i=e(99227),f=e(91171),c=e(39778);class o extends s.Sg{constructor(r){super(),this._fieldConfigDefaults={defaults:{},overrides:[]},this._initConfigRegistry=()=>new l.Z,this.dataSupport={annotations:!1,alertStates:!1},this.panel=r}get defaults(){let r=this._defaults||{};if(!this._defaults&&this.optionsSupplier){const u=new f.rt;this.optionsSupplier(u,{data:[]});for(const d of u.getItems())d.defaultValue!=null&&(0,t.set)(r,d.path,d.defaultValue)}return r}get fieldConfigDefaults(){const r=this._fieldConfigDefaults.defaults;r.custom={};for(const u of this.fieldConfigRegistry.list())u.defaultValue!==void 0&&(0,t.set)(r,u.id,u.defaultValue);return{defaults:{...r},overrides:this._fieldConfigDefaults.overrides}}setDefaults(r){return(0,i.d)("PanelPlugin","setDefaults","setPanelOptions"),this._defaults=r,this}get fieldConfigRegistry(){return this._fieldConfigRegistry||(this._fieldConfigRegistry=this._initConfigRegistry()),this._fieldConfigRegistry}setEditor(r){return(0,i.d)("PanelPlugin","setEditor","setPanelOptions"),this.editor=r,this}setNoPadding(){return this.noPadding=!0,this}setMigrationHandler(r){return this.onPanelMigration=r,this}setPanelChangeHandler(r){return this.onPanelTypeChanged=r,this}setPanelOptions(r){return this.optionsSupplier=r,this}getPanelOptionsSupplier(){return this.optionsSupplier??(()=>{})}setDataSupport(r){return this.dataSupport={...this.dataSupport,...r},this}useFieldConfig(r={}){return this._initConfigRegistry=()=>(0,c.j)(r,this.meta.name),this}setSuggestionsSupplier(r){return this.suggestionsSupplier=r,this}getSuggestionsSupplier(){return this.suggestionsSupplier}hasPluginId(r){return this.meta.id===r}}},2118:(Z,O,e)=>{"use strict";e.d(O,{Lc:()=>p,__:()=>g,_k:()=>E,aS:()=>m,d4:()=>c});var t=e(82897),n=e.n(t),l=e(425),s=e(66926),i=e(68061),f=e(24177);function c({plugin:h,currentOptions:a,currentFieldConfig:v,isAfterPluginChange:x}){const y=(0,t.mergeWith)({},h.defaults,a||{},(D,M)=>{if((0,t.isArray)(M))return M}),C=o(v,h),P=u(h,C,x);return{options:y,fieldConfig:P}}function o(h,a){const v=a.fieldConfigDefaults,x={defaults:(0,t.mergeWith)({},v.defaults,h?h.defaults:{},(y,C)=>{if((0,t.isArray)(C))return C}),overrides:h?.overrides??[]};r(x.defaults,"",a.fieldConfigRegistry),x.defaults.thresholds&&d(x.defaults.thresholds),x.overrides=m(x.overrides,y=>a.fieldConfigRegistry.getIfExists(y.id)!==void 0);for(const y of x.overrides)for(const C of y.properties)C.id==="thresholds"&&d(C.value);return x}function m(h,a){return h.map(v=>{const x=v.properties.filter(a);return{...v,properties:x}}).filter(v=>v.properties.length>0)}function r(h,a,v){let x=!1;for(const y of Object.keys(h)){const C=h[y],P=`${a}${y}`,D=!!v.getIfExists(P);if(D){x=!0;continue}(0,t.isArray)(C)||!(0,t.isObject)(C)?D||(0,t.unset)(h,y):r(C,`${P}.`,v)||(0,t.unset)(h,y)}return x}function u(h,a,v){if(!v)return a;const x=h.fieldConfigRegistry.getIfExists(i.qb.Color);if(x&&x.settings){const y=x.settings,C=l.WO.getIfExists(a.defaults.color?.mode);if(!y.byValueSupport&&(!C||C.isByValue))return a.defaults.color={mode:s.S.PaletteClassic},a;if(y.byValueSupport&&y.preferThresholdsMode&&C?.id!==s.S.Fixed&&(!C||!C.isByValue))return a.defaults.color={mode:s.S.Thresholds},a;if(y.bySeriesSupport&&C?.isByValue)return a.defaults.color={mode:s.S.PaletteClassic},a}return a}function d(h){h.mode||(h.mode=f.H.Absolute),h.steps?h.steps.length&&(h.steps[0].value=-1/0):h.steps=[]}function g(h,a){const v={defaults:{...h.defaults,custom:a.defaults.custom},overrides:[...h.overrides]};for(const x of a.overrides)for(const y of x.properties)if(p(y)){const C=v.overrides.find(P=>(0,t.isEqual)(P.matcher,x.matcher));C?C!==x&&C.properties.push(y):v.overrides.push(x)}return v}function p(h){return h.id.startsWith("custom.")}function E(h){return!p(h)}},39778:(Z,O,e)=>{"use strict";e.d(O,{j:()=>s});var t=e(18359),n=e(35363),l=e(91171);function s(f={},c){const o=new t.Z,m=n.N.list(),r={};if(f.useCustomConfig){const u=new l.vo;f.useCustomConfig(u);for(const d of u.getRegistry().list())if(d.isCustom=!0,d.id="custom."+d.id,i(d,m)){const g=r[d.category[0]]??[];g.push(d),r[d.category[0]]=g}else o.register(d)}for(let u of m)if(!(f.disableStandardOptions&&f.disableStandardOptions.indexOf(u.id)>-1)){if(f.standardOptions){const d=f.standardOptions[u.id]?.defaultValue,g=f.standardOptions[u.id]?.settings;d&&(u={...u,defaultValue:d}),g&&(u={...u,settings:u.settings?{...u.settings,...g}:g})}if(o.register(u),u.category&&r[u.category[0]])for(let d of r[u.category[0]])o.register(d)}for(const u of o.list())if(u.path.indexOf("[")>0)throw new Error(`[${c}] Field config paths do not support arrays: ${u.id}`);return o}function i(f,c){return Boolean(c.find(o=>f.category&&o.category&&f.category[0]===o.category[0]))}},8928:(Z,O,e)=>{"use strict";e.d(O,{By:()=>t.By,GE:()=>t.GE,Mh:()=>t.Mh,PF:()=>t.PF,QX:()=>i,TL:()=>l.TL,Xt:()=>l.Xt,ap:()=>n.a,dz:()=>t.dz,e0:()=>t.e0,jO:()=>t.jO,lu:()=>l.lu,oH:()=>t.oH,x6:()=>t.x6,xH:()=>n.x,yI:()=>t.yI});var t=e(29076),n=e(41959),l=e(33399),s=e(68004);const i={escapeHtml:s.Xv,hasAnsiCodes:s.oT,sanitize:s.Nw,sanitizeTextPanelContent:s.he,sanitizeUrl:s.Nm,sanitizeSVGContent:s.Is}},41959:(Z,O,e)=>{"use strict";e.d(O,{a:()=>i,x:()=>f});var t=e(27986),n=e(68004);let l=!1;const s={pedantic:!1,gfm:!0,smartLists:!0,smartypants:!1,xhtml:!1,breaks:!1};function i(c,o){l||(t.TU.setOptions({...s}),l=!0);let m;o?.breaks&&(m={...s,breaks:!0});const r=(0,t.TU)(c||"",m);return o?.noSanitize?r:(0,n.he)(r)}function f(c,o){l||(t.TU.setOptions({...s}),l=!0);const m=(0,t.TU)(c||"");return o?.noSanitize?m:(0,n.he)(m)}},68004:(Z,O,e)=>{"use strict";e.d(O,{Is:()=>r,Nm:()=>u,Nw:()=>o,Xv:()=>g,he:()=>m,oT:()=>d});var t=e(2397),n=e(97692),l=e.n(n),s=e(99731),i=e.n(s);const f=Object.keys(s.whiteList).reduce((p,E)=>(p[E]=s.whiteList[E]?.concat(["class","style"]),p),{}),c=new s.FilterXSS({whiteList:f,css:{whiteList:{...s.getDefaultCSSWhiteList(),"flex-direction":!0,"flex-wrap":!0,"flex-basis":!0,"flex-grow":!0,"flex-shrink":!0,"flex-flow":!0,gap:!0,order:!0,"justify-content":!0,"justify-items":!0,"justify-self":!0,"align-items":!0,"align-content":!0,"align-self":!0}}});function o(p){try{return l().sanitize(p,{USE_PROFILES:{html:!0},FORBID_TAGS:["form","input","pre"]})}catch{return console.error("String could not be sanitized",p),g(p)}}function m(p){try{return c.process(p)}catch{return console.error("String could not be sanitized",p),"Text string could not be sanitized"}}function r(p){return l().sanitize(p,{USE_PROFILES:{svg:!0,svgFilters:!0}})}function u(p){return(0,t.N)(p)}function d(p){return/\u001b\[\d{1,2}m/.test(p)}function g(p){return String(p).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}},29076:(Z,O,e)=>{"use strict";e.d(O,{By:()=>g,GE:()=>c,Mh:()=>E,PF:()=>d,dz:()=>p,e0:()=>u,jO:()=>r,oH:()=>m,x6:()=>o,yI:()=>h});var t=e(82897),n=e.n(t);const s="([\\"+["(","[","{","}","]",")","\\","|","*","+","-",".","?","<",">","#","&","^","$"].join("\\")+"])",i=new RegExp(s,"g"),f=new RegExp("(\\\\)"+s,"g");function c(a){return a&&a.replace(i,"\\$1")}function o(a){return a&&a.replace(f,"$2")}function m(a){return a?a[0]==="/":!1}function r(a){if(!m(a))return new RegExp(`^${a}$`);const v=a.match(new RegExp("^/(.*?)/(g?i?m?y?s?)$"));if(!v)throw new Error(`'${a}' is not a valid regular expression.`);return new RegExp(v[1],v[2])}function u(a){if(!a)return 0;const v=parseInt(a,10),x=a.slice(String(v).length),y=1e3,C=y*60,P=C*60,D=P*24;switch(x){case"s":return v*y;case"m":return v*C;case"h":return v*P;case"d":return v*D;default:if(!x)return isNaN(v)?0:v;throw new Error("Not supported unit: "+x)}}function d(a){return a!=null&&Number.isFinite(a)?a.toString():""}function g(a){if(!a)return;const v=parseInt(a,10);return isNaN(v)?void 0:v}function p(a){if(!a)return;const v=parseFloat(a);return isNaN(v)?void 0:v}function E(a){const v=(0,t.camelCase)(a);return v.charAt(0).toUpperCase()+v.substring(1)}function h(a){return a.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}},33399:(Z,O,e)=>{"use strict";e.d(O,{TL:()=>f,Xt:()=>t,lu:()=>l});function t({searchWords:c,textToHighlight:o}){const m=[];for(const r of c)m.push(...l(o,r));return m}const n=c=>c.replace(/[[{(][\w,.\/:;<=>?:*+]+$/,"");function l(c,o){if(!c||!o)return[];const m=[],{cleaned:r,flags:u}=f(n(o));let d;try{d=new RegExp(`(?:${r})`,u)}catch{return m}return c.replace(d,(g,...p)=>{if(g){const E=p[p.length-2];m.push({text:g,start:E,length:g.length,end:E+g.length})}return""}),m}const s="-",i=/\(\?([ims-]+)\)/g;function f(c){const o=new Set(["g"]);return{cleaned:c.replace(i,(r,u)=>{const d=u.startsWith(s);for(let g=0;g<u.length;++g){const p=u.charAt(g);d||u.charAt(g-1)===s?o.delete(p):p!==s&&o.add(p)}return""}),flags:Array.from(o).join("")}}},64724:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{alpha:()=>p,asHexString:()=>f,asRgbString:()=>c,darken:()=>E,decomposeColor:()=>m,emphasize:()=>g,getContrastRatio:()=>u,getLuminance:()=>d,hexToRgb:()=>l,hslToRgb:()=>o,lighten:()=>h,recomposeColor:()=>r,rgbToHex:()=>i});var t=e(28550);function n(a,v=0,x=1){return Math.min(Math.max(v,a),x)}function l(a){a=a.slice(1);const v=new RegExp(`.{1,${a.length>=6?2:1}}`,"g");let x=a.match(v);return x&&x[0].length===1&&(x=x.map(y=>y+y)),x?`rgb${x.length===4?"a":""}(${x.map((y,C)=>C<3?parseInt(y,16):Math.round(parseInt(y,16)/255*1e3)/1e3).join(", ")})`:""}function s(a){const v=a.toString(16);return v.length===1?`0${v}`:v}function i(a){if(a.indexOf("#")===0)return a;const{values:v}=m(a);return`#${v.map(x=>s(x)).join("")}`}function f(a){if(a[0]==="#")return a;const v=(0,t.Z)(a);return v.getAlpha()===1?v.toHexString():v.toHex8String()}function c(a){return a.startsWith("rgb")?a:(0,t.Z)(a).toRgbString()}function o(a){const v=m(a),{values:x}=v,y=x[0],C=x[1]/100,P=x[2]/100,D=C*Math.min(P,1-P),M=(B,w=(B+y/30)%12)=>P-D*Math.max(Math.min(w-3,9-w,1),-1);let b="rgb";const R=[Math.round(M(0)*255),Math.round(M(8)*255),Math.round(M(4)*255)];return v.type==="hsla"&&(b+="a",R.push(x[3])),r({type:b,values:R})}function m(a){if(typeof a!="string")return a;if(a.charAt(0)==="#")return m(l(a));const v=a.indexOf("("),x=a.substring(0,v);if(["rgb","rgba","hsl","hsla","color"].indexOf(x)===-1)throw new Error(`Unsupported '${a}' color. The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color()`);let y=a.substring(v+1,a.length-1),C;if(x==="color"){if(y=y.split(" "),C=y.shift(),y.length===4&&y[3].charAt(0)==="/"&&(y[3]=y[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(C)===-1)throw new Error(`Unsupported ${C} color space. The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else y=y.split(",");return y=y.map(P=>parseFloat(P)),{type:x,values:y,colorSpace:C}}function r(a){const{type:v,colorSpace:x}=a;let y=a.values;return v.indexOf("rgb")!==-1?y=y.map((C,P)=>P<3?parseInt(C,10):C):v.indexOf("hsl")!==-1&&(y[1]=`${y[1]}%`,y[2]=`${y[2]}%`),v.indexOf("color")!==-1?y=`${x} ${y.join(" ")}`:y=`${y.join(", ")}`,`${v}(${y})`}function u(a,v,x){const y=d(a),C=d(v,x);return(Math.max(y,C)+.05)/(Math.min(y,C)+.05)}function d(a,v){const x=m(a);let y=x.type==="hsl"?m(o(a)).values:x.values;if(v&&x.type==="rgba"){const P=m(v),D=y[3];y[0]=y[0]*D+P.values[0]*(1-D),y[1]=y[1]*D+P.values[1]*(1-D),y[2]=y[2]*D+P.values[2]*(1-D)}const C=y.map(P=>(x.type!=="color"&&(P/=255),P<=.03928?P/12.92:((P+.055)/1.055)**2.4));return Number((.2126*C[0]+.7152*C[1]+.0722*C[2]).toFixed(3))}function g(a,v=.15){return d(a)>.5?E(a,v):h(a,v)}function p(a,v){if(a==="")return"#000000";if(v=n(v),a[0]==="#"){if(a.length===9)a=a.substring(0,7);else if(a.length<=5){let y="#";for(let C=1;C<4;C++)y+=a[C]+a[C];a=y}return a+Math.round(v*255).toString(16).padStart(2,"0")}else{if(a[3]==="(")return a.replace(")",`, ${v})`);if(a[4]==="(")return a.substring(0,a.lastIndexOf(","))+`, ${v})`}const x=m(a);return x.type==="color"?x.values[3]=`/${v}`:x.values[3]=v,r(x)}function E(a,v){const x=m(a);if(v=n(v),x.type.indexOf("hsl")!==-1)x.values[2]*=1-v;else if(x.type.indexOf("rgb")!==-1||x.type.indexOf("color")!==-1)for(let y=0;y<3;y+=1)x.values[y]*=1-v;return r(x)}function h(a,v){const x=m(a);if(v=n(v),x.type.indexOf("hsl")!==-1)x.values[2]+=(100-x.values[2])*v;else if(x.type.indexOf("rgb")!==-1)for(let y=0;y<3;y+=1)x.values[y]+=(255-x.values[y])*v;else if(x.type.indexOf("color")!==-1)for(let y=0;y<3;y+=1)x.values[y]+=(1-x.values[y])*v;return r(x)}},36328:(Z,O,e)=>{"use strict";e.d(O,{j:()=>K});function t(){const U=["xs","sm","md","lg","xl","xxl"],N="px",S={xs:0,sm:544,md:769,lg:992,xl:1200,xxl:1440};function Y(z){return`@media (min-width:${typeof z=="number"?z:S[z]}${N})`}function Q(z){return`@media (max-width:${(typeof z=="number"?z:S[z])-5/100}${N})`}return{values:S,up:Y,down:Q,keys:U,unit:N}}var n=e(82897),l=e(64724);const s={white:"#FFFFFF",black:"#000000",gray25:"#2c3235",gray15:"#22252b",gray10:"#181b1f",gray05:"#111217",darkLayer0:"#18181A",darkLayer1:"#212124",darkLayer2:"#2a2a2f",darkBorder1:"#34343B",darkBorder2:"#64646B",gray90:"#F4F5F5",gray100:"#F4F5F5",gray80:"#D0D1D3",lightBorder1:"#E4E7E7",blueDarkMain:"#3D71D9",blueDarkText:"#6E9FFF",redDarkMain:"#D10E5C",redDarkText:"#FF5286",greenDarkMain:"#1A7F4B",greenDarkText:"#6CCF8E",orangeDarkMain:"#F5B73D",orangeDarkText:"#F8D06B",blueLightMain:"#3871DC",blueLightText:"#1F62E0",redLightMain:"#E0226E",redLightText:"#CF0E5B",greenLightMain:"#1B855E",greenLightText:"#0A764E",orangeLightMain:"#FAD34A",orangeLightText:"#8A6C00"};class i{constructor(){this.mode="dark",this.whiteBase="204, 204, 220",this.border={weak:`rgba(${this.whiteBase}, 0.07)`,medium:`rgba(${this.whiteBase}, 0.15)`,strong:`rgba(${this.whiteBase}, 0.25)`},this.text={primary:`rgb(${this.whiteBase})`,secondary:`rgba(${this.whiteBase}, 0.65)`,disabled:`rgba(${this.whiteBase}, 0.6)`,link:s.blueDarkText,maxContrast:s.white},this.primary={main:s.blueDarkMain,text:s.blueDarkText,border:s.blueDarkText},this.secondary={main:`rgba(${this.whiteBase}, 0.16)`,shade:`rgba(${this.whiteBase}, 0.20)`,text:this.text.primary,contrastText:`rgb(${this.whiteBase})`,border:this.border.strong},this.info=this.primary,this.error={main:s.redDarkMain,text:s.redDarkText},this.success={main:s.greenDarkMain,text:s.greenDarkText},this.warning={main:s.orangeDarkMain,text:s.orangeDarkText},this.background={canvas:s.gray05,primary:s.gray10,secondary:s.gray15},this.action={hover:`rgba(${this.whiteBase}, 0.16)`,selected:`rgba(${this.whiteBase}, 0.12)`,focus:`rgba(${this.whiteBase}, 0.16)`,hoverOpacity:.08,disabledText:this.text.disabled,disabledBackground:`rgba(${this.whiteBase}, 0.04)`,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(270deg, #F55F3E 0%, #FF8833 100%)",brandVertical:"linear-gradient(0.01deg, #F55F3E 0.01%, #FF8833 99.99%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.15}}class f{constructor(){this.mode="light",this.blackBase="36, 41, 46",this.primary={main:s.blueLightMain,border:s.blueLightText,text:s.blueLightText},this.text={primary:`rgba(${this.blackBase}, 1)`,secondary:`rgba(${this.blackBase}, 0.75)`,disabled:`rgba(${this.blackBase}, 0.50)`,link:this.primary.text,maxContrast:s.black},this.border={weak:`rgba(${this.blackBase}, 0.12)`,medium:`rgba(${this.blackBase}, 0.30)`,strong:`rgba(${this.blackBase}, 0.40)`},this.secondary={main:`rgba(${this.blackBase}, 0.16)`,shade:`rgba(${this.blackBase}, 0.20)`,contrastText:`rgba(${this.blackBase},  1)`,text:this.text.primary,border:this.border.strong},this.info={main:s.blueLightMain,text:s.blueLightText},this.error={main:s.redLightMain,text:s.redLightText,border:s.redLightText},this.success={main:s.greenLightMain,text:s.greenLightText},this.warning={main:s.orangeLightMain,text:s.orangeLightText},this.background={canvas:s.gray90,primary:s.white,secondary:s.gray100},this.action={hover:`rgba(${this.blackBase}, 0.12)`,selected:`rgba(${this.blackBase}, 0.08)`,hoverOpacity:.08,focus:`rgba(${this.blackBase}, 0.12)`,disabledBackground:`rgba(${this.blackBase}, 0.04)`,disabledText:this.text.disabled,disabledOpacity:.38},this.gradients={brandHorizontal:"linear-gradient(90deg, #FF8833 0%, #F53E4C 100%)",brandVertical:"linear-gradient(0.01deg, #F53E4C -31.2%, #FF8833 113.07%)"},this.contrastThreshold=3,this.hoverFactor=.03,this.tonalOffset=.2}}function c(W){const U=new i,N=new f,S=(W.mode??"dark")==="dark"?U:N,{primary:Y=S.primary,secondary:Q=S.secondary,info:z=S.info,warning:G=S.warning,success:k=S.success,error:j=S.error,tonalOffset:de=S.tonalOffset,hoverFactor:ge=S.hoverFactor,contrastThreshold:re=S.contrastThreshold,...ce}=W;function ie(Ce,ee=re){return(0,l.getContrastRatio)(U.text.maxContrast,Ce,S.background.primary)>=ee?U.text.maxContrast:N.text.maxContrast}const fe=({color:Ce,name:ee})=>{if(Ce={...Ce,name:ee},!Ce.main)throw new Error(`Missing main color for ${ee}`);return Ce.text||(Ce.text=Ce.main),Ce.border||(Ce.border=Ce.text),Ce.shade||(Ce.shade=S.mode==="light"?(0,l.darken)(Ce.main,de):(0,l.lighten)(Ce.main,de)),Ce.transparent||(Ce.transparent=S.mode==="light"?(0,l.alpha)(Ce.main,.08):(0,l.alpha)(Ce.main,.15)),Ce.contrastText||(Ce.contrastText=ie(Ce.main)),Ce};return(0,n.merge)({...S,primary:fe({color:Y,name:"primary"}),secondary:fe({color:Q,name:"secondary"}),info:fe({color:z,name:"info"}),error:fe({color:j,name:"error"}),success:fe({color:k,name:"success"}),warning:fe({color:G,name:"warning"}),getContrastText:ie,emphasize:(Ce,ee)=>(0,l.emphasize)(Ce,ee??ge)},ce)}function o(W,U){const N={padding:1,headerHeight:4,background:W.background.primary,borderColor:W.border.weak,boxShadow:"none"},S={borderColor:W.border.medium,borderHover:W.border.strong,text:W.text.primary,background:W.mode==="dark"?W.background.canvas:W.background.primary};return{height:{sm:3,md:4,lg:6},input:S,panel:N,dropdown:{background:S.background},tooltip:{background:W.background.secondary,text:W.text.primary},dashboard:{background:W.background.canvas,padding:1},overlay:{background:W.mode==="dark"?"rgba(63, 62, 62, 0.45)":"rgba(208, 209, 211, 0.24)"},sidemenu:{width:57},menuTabs:{height:41},textHighlight:{text:W.warning.contrastText,background:W.warning.main},horizontalDrawer:{defaultHeight:400}}}function m(W){return W.mode==="dark"?{z1:"0px 1px 2px rgba(24, 26, 27, 0.75)",z2:"0px 4px 8px rgba(24, 26, 27, 0.75)",z3:"0px 8px 24px rgb(1,4,9)"}:{z1:"0px 1px 2px rgba(24, 26, 27, 0.2)",z2:"0px 4px 8px rgba(24, 26, 27, 0.2)",z3:"0px 13px 20px 1px rgba(24, 26, 27, 0.18)"}}function r(W){const U=W.borderRadius??2;return{radius:{default:"2px",pill:"9999px",circle:"100%"},borderRadius:Y=>`${(Y??1)*U}px`}}function u(W={}){const{gridSize:U=8}=W,N=Y=>typeof Y=="string"?Y:Y*U,S=(...Y)=>(Y.length===0&&(Y[0]=1),Y.map(Q=>{const z=N(Q);return typeof z=="number"?`${z}px`:z}).join(" "));return S.gridSize=U,S}const d={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},g={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function p(W=["all"],U={}){const{duration:N=g.standard,easing:S=d.easeInOut,delay:Y=0}=U;return(Array.isArray(W)?W:[W]).map(Q=>`${Q} ${typeof N=="string"?N:h(N)} ${S} ${typeof Y=="string"?Y:h(Y)}`).join(",")}function E(W){if(!W)return 0;const U=W/36;return Math.round((4+15*U**.25+U/5)*10)}function h(W){return`${Math.round(W)}ms`}function a(){return{create:p,duration:g,easing:d,getAutoHeightDuration:E}}const v='"Inter", "Helvetica", "Arial", sans-serif',x="'Roboto Mono', monospace";function y(W,U={}){const{fontFamily:N=v,fontFamilyMonospace:S=x,fontSize:Y=14,fontWeightLight:Q=300,fontWeightRegular:z=400,fontWeightMedium:G=500,fontWeightBold:k=500,htmlFontSize:j=14}=U,de=Y/14,ge=fe=>`${fe/j*de}rem`,re=(fe,Ce,ee,ne,X)=>{if(ee%2!==0||Ce%2!==0)throw new Error("Font size and line height should be integer multiples of 2 to prevent issues with alignment");return{fontFamily:N,fontWeight:fe,fontSize:ge(Ce),lineHeight:ee/Ce,...N===v?{letterSpacing:`${C(ne/Ce)}em`}:{},...X}},ce={h1:re(z,28,32,-.25),h2:re(z,24,28,0),h3:re(z,22,24,0),h4:re(z,18,22,.25),h5:re(z,16,22,0),h6:re(G,14,22,.15),body:re(z,Y,22,.15),bodySmall:re(z,12,18,.15)};return{htmlFontSize:j,pxToRem:ge,fontFamily:N,fontFamilyMonospace:S,fontSize:Y,fontWeightLight:Q,fontWeightRegular:z,fontWeightMedium:G,fontWeightBold:k,size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},...ce}}function C(W){return Math.round(W*1e5)/1e5}var P=e(55422);function D(W){const U={name:"Grafana Default",typography:{fontFamily:{sansSerif:W.typography.fontFamily,monospace:W.typography.fontFamilyMonospace},size:{base:`${W.typography.fontSize}px`,xs:W.typography.size.xs,sm:W.typography.size.sm,md:W.typography.size.md,lg:W.typography.size.lg},heading:{h1:W.typography.h1.fontSize,h2:W.typography.h2.fontSize,h3:W.typography.h3.fontSize,h4:W.typography.h4.fontSize,h5:W.typography.h5.fontSize,h6:W.typography.h6.fontSize},weight:{light:W.typography.fontWeightLight,regular:W.typography.fontWeightRegular,semibold:W.typography.fontWeightMedium,bold:W.typography.fontWeightBold},lineHeight:{xs:W.typography.bodySmall.lineHeight,sm:W.typography.bodySmall.lineHeight,md:W.typography.body.lineHeight,lg:W.typography.h2.lineHeight},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:`${W.breakpoints.values.xs}px`,sm:`${W.breakpoints.values.sm}px`,md:`${W.breakpoints.values.md}px`,lg:`${W.breakpoints.values.lg}px`,xl:`${W.breakpoints.values.xl}px`,xxl:`${W.breakpoints.values.xxl}px`},spacing:{base:W.spacing.gridSize,insetSquishMd:W.spacing(.5,1),d:W.spacing(2),xxs:W.spacing(.25),xs:W.spacing(.5),sm:W.spacing(1),md:W.spacing(2),lg:W.spacing(3),xl:W.spacing(4),gutter:W.spacing(4),formSpacingBase:W.spacing.gridSize,formMargin:`${W.spacing.gridSize*4}px`,formFieldsetMargin:`${W.spacing.gridSize*2}px`,formInputHeight:W.spacing.gridSize*4,formButtonHeight:W.spacing.gridSize*4,formInputPaddingHorizontal:`${W.spacing.gridSize}px`,formInputAffixPaddingHorizontal:`${W.spacing.gridSize/2}px`,formInputMargin:`${W.spacing.gridSize*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${W.spacing.gridSize/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:W.shape.borderRadius(1),md:W.shape.borderRadius(2),lg:W.shape.borderRadius(3)},width:{sm:"1px"}},height:{sm:W.spacing.gridSize*W.components.height.sm,md:W.spacing.gridSize*W.components.height.md,lg:W.spacing.gridSize*W.components.height.lg},panelPadding:W.components.panel.padding*W.spacing.gridSize,panelHeaderHeight:W.spacing.gridSize*W.components.panel.headerHeight,zIndex:W.zIndex},N={...M,black:"#000000",white:"#ffffff",dark1:"#141414",dark2:"#161719",dark3:"#1f1f20",dark4:"#212124",dark5:"#222426",dark6:"#262628",dark7:"#292a2d",dark8:"#2f2f32",dark9:"#343436",dark10:"#424345",gray1:"#555555",gray2:"#8e8e8e",gray3:"#b3b3b3",gray4:"#d8d9da",gray5:"#ececec",gray6:"#f4f5f8",gray7:"#fbfbfb",redBase:"#e02f44",redShade:"#c4162a",greenBase:"#299c46",greenShade:"#23843b",red:"#d44a3a",yellow:"#ecbb13",purple:"#9933cc",variable:"#32d1df",orange:"#eb7b18",orangeDark:"#ff780a"},S={bg1:W.colors.background.primary,bg2:W.colors.background.secondary,bg3:W.colors.action.hover,dashboardBg:W.colors.background.canvas,bgBlue1:W.colors.primary.main,bgBlue2:W.colors.primary.shade},Y={border1:W.colors.border.weak,border2:W.colors.border.medium,border3:W.colors.border.strong},Q={textStrong:W.colors.text.maxContrast,textHeading:W.colors.text.primary,text:W.colors.text.primary,textSemiWeak:W.colors.text.secondary,textWeak:W.colors.text.secondary,textFaint:W.colors.text.disabled,textBlue:W.colors.primary.text},z={formLabel:W.colors.text.primary,formDescription:W.colors.text.secondary,formInputBg:W.components.input.background,formInputBgDisabled:W.colors.action.disabledBackground,formInputBorder:W.components.input.borderColor,formInputBorderHover:W.components.input.borderHover,formInputBorderActive:W.colors.primary.border,formInputBorderInvalid:W.colors.error.border,formInputPlaceholderText:W.colors.text.disabled,formInputText:W.components.input.text,formInputDisabledText:W.colors.action.disabledText,formFocusOutline:W.colors.primary.main,formValidationMessageText:W.colors.error.contrastText,formValidationMessageBg:W.colors.error.main};return{...U,type:W.colors.mode==="dark"?P.Q.Dark:P.Q.Light,isDark:W.isDark,isLight:W.isLight,name:W.name,palette:{...N,brandPrimary:N.orange,brandSuccess:W.colors.success.main,brandWarning:W.colors.warning.main,brandDanger:W.colors.error.main,queryRed:W.colors.error.text,queryGreen:W.colors.success.text,queryPurple:"#fe85fc",queryOrange:N.orange,online:W.colors.success.main,warn:W.colors.success.main,critical:W.colors.success.main},colors:{...S,...Y,...z,...Q,bodyBg:W.colors.background.canvas,panelBg:W.components.panel.background,panelBorder:W.components.panel.borderColor,pageHeaderBg:W.colors.background.canvas,pageHeaderBorder:W.colors.background.canvas,dropdownBg:z.formInputBg,dropdownShadow:N.black,dropdownOptionHoverBg:S.bg2,link:W.colors.text.primary,linkDisabled:W.colors.text.disabled,linkHover:W.colors.text.maxContrast,linkExternal:W.colors.text.link},shadows:{listItem:"none"},visualization:W.visualization}}const M={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"};var b=e(66926);function R(W){const U=W.mode==="light"?w():B(),N={};for(const Q of U)for(const z of Q.shades)if(N[z.name]=z.color,z.aliases)for(const G of z.aliases)N[G]=z.color;N.transparent="rgba(0,0,0,0)",N["panel-bg"]=W.background.primary,N.text=W.text.primary;const S=Q=>{if(!Q)return b.R;const z=N[Q];if(z)return z;if(Q[0]==="#"||Q.indexOf("rgb")>-1)return Q;const G=I[Q.toLowerCase()];return G?(N[Q]=G,G):Q},Y=A();return{hues:U,palette:Y,getColorByName:S}}function B(){return[{name:"red",shades:[{color:"#FFA6B0",name:"super-light-red"},{color:"#FF7383",name:"light-red"},{color:"#F2495C",name:"red",primary:!0},{color:"#E02F44",name:"semi-dark-red"},{color:"#C4162A",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFCB7D",name:"super-light-orange",aliases:[]},{color:"#FFB357",name:"light-orange",aliases:[]},{color:"#FF9830",name:"orange",aliases:[],primary:!0},{color:"#FF780A",name:"semi-dark-orange",aliases:[]},{color:"#FA6400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFF899",name:"super-light-yellow",aliases:[]},{color:"#FFEE52",name:"light-yellow",aliases:[]},{color:"#FADE2A",name:"yellow",aliases:[],primary:!0},{color:"#F2CC0C",name:"semi-dark-yellow",aliases:[]},{color:"#E0B400",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#C8F2C2",name:"super-light-green",aliases:[]},{color:"#96D98D",name:"light-green",aliases:[]},{color:"#73BF69",name:"green",aliases:[],primary:!0},{color:"#56A64B",name:"semi-dark-green",aliases:[]},{color:"#37872D",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#C0D8FF",name:"super-light-blue",aliases:[]},{color:"#8AB8FF",name:"light-blue",aliases:[]},{color:"#5794F2",name:"blue",aliases:[],primary:!0},{color:"#3274D9",name:"semi-dark-blue",aliases:[]},{color:"#1F60C4",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#DEB6F2",name:"super-light-purple",aliases:[]},{color:"#CA95E5",name:"light-purple",aliases:[]},{color:"#B877D9",name:"purple",aliases:[],primary:!0},{color:"#A352CC",name:"semi-dark-purple",aliases:[]},{color:"#8F3BB8",name:"dark-purple",aliases:[]}]}]}function w(){return[{name:"red",shades:[{color:"#FF7383",name:"super-light-red"},{color:"#F2495C",name:"light-red"},{color:"#E02F44",name:"red",primary:!0},{color:"#C4162A",name:"semi-dark-red"},{color:"#AD0317",name:"dark-red"}]},{name:"orange",shades:[{color:"#FFB357",name:"super-light-orange",aliases:[]},{color:"#FF9830",name:"light-orange",aliases:[]},{color:"#FF780A",name:"orange",aliases:[],primary:!0},{color:"#FA6400",name:"semi-dark-orange",aliases:[]},{color:"#E55400",name:"dark-orange",aliases:[]}]},{name:"yellow",shades:[{color:"#FFEE52",name:"super-light-yellow",aliases:[]},{color:"#FADE2A",name:"light-yellow",aliases:[]},{color:"#F2CC0C",name:"yellow",aliases:[],primary:!0},{color:"#E0B400",name:"semi-dark-yellow",aliases:[]},{color:"#CC9D00",name:"dark-yellow",aliases:[]}]},{name:"green",shades:[{color:"#96D98D",name:"super-light-green",aliases:[]},{color:"#73BF69",name:"light-green",aliases:[]},{color:"#56A64B",name:"green",aliases:[],primary:!0},{color:"#37872D",name:"semi-dark-green",aliases:[]},{color:"#19730E",name:"dark-green",aliases:[]}]},{name:"blue",shades:[{color:"#8AB8FF",name:"super-light-blue",aliases:[]},{color:"#5794F2",name:"light-blue",aliases:[]},{color:"#3274D9",name:"blue",aliases:[],primary:!0},{color:"#1F60C4",name:"semi-dark-blue",aliases:[]},{color:"#1250B0",name:"dark-blue",aliases:[]}]},{name:"purple",shades:[{color:"#CA95E5",name:"super-light-purple",aliases:[]},{color:"#B877D9",name:"light-purple",aliases:[]},{color:"#A352CC",name:"purple",aliases:[],primary:!0},{color:"#8F3BB8",name:"semi-dark-purple",aliases:[]},{color:"#7C2EA3",name:"dark-purple",aliases:[]}]}]}function A(){return["green","semi-dark-yellow","light-blue","semi-dark-orange","red","blue","purple","#705DA0","dark-green","yellow","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"]}const I={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},F={navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061};function K(W={}){const{colors:U={},spacing:N={},shape:S={},typography:Y={}}=W,Q=c(U),z=t(),G=u(N),k=r(S),j=y(Q,Y),de=m(Q),ge=a(),re=o(Q,de),ce=R(Q),ie={name:Q.mode==="dark"?"Dark":"Light",isDark:Q.mode==="dark",isLight:Q.mode==="light",colors:Q,breakpoints:z,spacing:G,shape:k,components:re,typography:j,shadows:de,transitions:ge,visualization:ce,zIndex:{...F},flags:{}};return{...ie,v1:D(ie)}}},4765:(Z,O,e)=>{"use strict";e.d(O,{j:()=>t.j,r:()=>n});var t=e(36328),n=e(64724)},21760:(Z,O,e)=>{"use strict";e.d(O,{Kx:()=>c,TB:()=>o,gz:()=>f,uP:()=>m});var t=e(82897),n=e.n(t),l=e(49922),s=e(14582),i=e(64140),f=(a=>(a.sum="sum",a.max="max",a.min="min",a.logmin="logmin",a.mean="mean",a.variance="variance",a.stdDev="stdDev",a.last="last",a.first="first",a.count="count",a.range="range",a.diff="diff",a.diffperc="diffperc",a.delta="delta",a.step="step",a.firstNotNull="firstNotNull",a.lastNotNull="lastNotNull",a.changeCount="changeCount",a.distinctCount="distinctCount",a.allIsZero="allIsZero",a.allIsNull="allIsNull",a.allValues="allValues",a.uniqueValues="uniqueValues",a))(f||{});function c(a){const{field:v,reducers:x}=a;if(!v||!x||x.length<1)return{};if(v.state?.calcs){const R=[];for(const B of x)v.state.calcs.hasOwnProperty(B)||R.push(B);if(R.length<1)return{...v.state.calcs}}v.state||(v.state={});const y=o.list(x);if(v.values.length<1){const R={...v.state.calcs};for(const B of y)R[B.id]=B.emptyInputResult!==null?B.emptyInputResult:null;return v.state.calcs=R}const{nullValueMode:P}=v.config,D=P===l.Gl.Ignore,M=P===l.Gl.AsZero;if(y.length===1&&y[0].reduce){const R=y[0].reduce(v,D,M);return v.state.calcs={...v.state.calcs,...R},R}let b=m(v,D,M);for(const R of y)!b.hasOwnProperty(R.id)&&R.reduce&&(b={...b,...R.reduce(v,D,M)});return v.state.calcs={...v.state.calcs,...b},b}const o=new i.B(()=>[{id:"lastNotNull",name:"Last *",description:"Last non-null value",standard:!0,aliasIds:["current"],reduce:g},{id:"last",name:"Last",description:"Last value",standard:!0,reduce:d},{id:"firstNotNull",name:"First *",description:"First non-null value",standard:!0,reduce:u},{id:"first",name:"First",description:"First Value",standard:!0,reduce:r},{id:"min",name:"Min",description:"Minimum Value",standard:!0},{id:"max",name:"Max",description:"Maximum Value",standard:!0},{id:"mean",name:"Mean",description:"Average Value",standard:!0,aliasIds:["avg"]},{id:"variance",name:"Variance",description:"Variance of all values in a field",standard:!1,reduce:p},{id:"stdDev",name:"StdDev",description:"Standard deviation of all values in a field",standard:!1,reduce:p},{id:"sum",name:"Total",description:"The sum of all values",emptyInputResult:0,standard:!0,aliasIds:["total"]},{id:"count",name:"Count",description:"Number of values in response",emptyInputResult:0,standard:!0},{id:"range",name:"Range",description:"Difference between minimum and maximum values",standard:!0},{id:"delta",name:"Delta",description:"Cumulative change in value",standard:!0},{id:"step",name:"Step",description:"Minimum interval between values",standard:!0},{id:"diff",name:"Difference",description:"Difference between first and last values",standard:!0},{id:"logmin",name:"Min (above zero)",description:"Used for log min scale",standard:!0},{id:"allIsZero",name:"All Zeros",description:"All values are zero",emptyInputResult:!1,standard:!0},{id:"allIsNull",name:"All Nulls",description:"All values are null",emptyInputResult:!0,standard:!0},{id:"changeCount",name:"Change Count",description:"Number of times the value changes",standard:!1,reduce:E},{id:"distinctCount",name:"Distinct Count",description:"Number of distinct values",standard:!1,reduce:h},{id:"diffperc",name:"Difference percent",description:"Percentage difference between first and last values",standard:!0},{id:"allValues",name:"All values",description:"Returns an array with all values",standard:!1,reduce:a=>({allValues:a.values.toArray()})},{id:"uniqueValues",name:"All unique values",description:"Returns an array with all unique values",standard:!1,reduce:a=>({uniqueValues:[...new Set(a.values.toArray())]})}]);function m(a,v,x){const y={sum:0,max:-Number.MAX_VALUE,min:Number.MAX_VALUE,logmin:Number.MAX_VALUE,mean:null,last:null,first:null,lastNotNull:null,firstNotNull:null,count:0,nonNullCount:0,allIsNull:!0,allIsZero:!0,range:null,diff:null,delta:0,step:Number.MAX_VALUE,diffperc:0,previousDeltaUp:!0},C=a.values;y.count=v?C.length:C.toArray().filter(D=>D!=null).length;const P=a.type===s.fS.number||s.fS.time;for(let D=0;D<C.length;D++){let M=C.get(D);if(D===0&&(y.first=M),y.last=M,M===null){if(v)continue;x&&(M=0)}if(M!=null){const b=y.firstNotNull===null;if(b&&(y.firstNotNull=M),P){if(y.sum+=M,y.allIsNull=!1,y.nonNullCount++,!b){const R=M-y.lastNotNull;y.step>R&&(y.step=R),y.lastNotNull>M?(y.previousDeltaUp=!1,D===C.length-1&&(y.delta+=M)):(y.previousDeltaUp?y.delta+=R:y.delta+=M,y.previousDeltaUp=!0)}M>y.max&&(y.max=M),M<y.min&&(y.min=M),M<y.logmin&&M>0&&(y.logmin=M)}M!==0&&(y.allIsZero=!1),y.lastNotNull=M}}return y.max===-Number.MAX_VALUE&&(y.max=null),y.min===Number.MAX_VALUE&&(y.min=null),y.step===Number.MAX_VALUE&&(y.step=null),y.nonNullCount>0&&(y.mean=y.sum/y.nonNullCount),y.allIsNull&&(y.allIsZero=!1),y.max!==null&&y.min!==null&&(y.range=y.max-y.min),(0,t.isNumber)(y.firstNotNull)&&(0,t.isNumber)(y.lastNotNull)&&(y.diff=y.lastNotNull-y.firstNotNull),(0,t.isNumber)(y.firstNotNull)&&(0,t.isNumber)(y.diff)&&(y.diffperc=y.diff/y.firstNotNull),y}function r(a,v,x){return{first:a.values.get(0)}}function u(a,v,x){const y=a.values;for(let C=0;C<y.length;C++){const P=y.get(C);if(P!=null&&P!==void 0)return{firstNotNull:P}}return{firstNotNull:null}}function d(a,v,x){const y=a.values;return{last:y.get(y.length-1)}}function g(a,v,x){const y=a.values;let C=y.length-1;for(;C>=0;){const P=y.get(C--);if(P!=null&&P!==void 0)return{lastNotNull:P}}return{lastNotNull:null}}function p(a,v,x){if(!(a.type===s.fS.number||a.type===s.fS.time))return{variance:0,stdDev:0};let y=0,C=0,P=0;const D=a.values;for(let M=0;M<D.length;M++){const b=D.get(M);if(b!=null){P++;let R=C;C+=(b-R)/P,y+=(b-R)*(b-C)}}if(P>0){const M=y/P;return{variance:M,stdDev:Math.sqrt(M)}}return{variance:0,stdDev:0}}function E(a,v,x){const y=a.values;let C=0,P=!0,D=null;for(let M=0;M<y.length;M++){let b=y.get(M);if(b===null){if(v)continue;x&&(b=0)}!P&&D!==b&&C++,P=!1,D=b}return{changeCount:C}}function h(a,v,x){const y=a.values,C=new Set;for(let P=0;P<y.length;P++){let D=y.get(P);if(D===null){if(v)continue;x&&(D=0)}C.add(D)}return{distinctCount:C.size}}},42960:(Z,O,e)=>{"use strict";e.d(O,{Ac:()=>l.Ac,E4:()=>t.E4,Ff:()=>t.Ff,Hz:()=>f.H,IG:()=>l.IG,JP:()=>m._9,J_:()=>u.J_,Jz:()=>r.Jz,Kx:()=>i.Kx,Ls:()=>l.Ls,Ok:()=>r.Ok,Op:()=>r.Op,TB:()=>i.TB,U8:()=>l.U8,UO:()=>r.UO,Wk:()=>n.W,YR:()=>s.Y,Ys:()=>o.Ys,Ze:()=>c.Z,Zi:()=>r.Zi,b9:()=>l.b9,cO:()=>r.cO,gY:()=>r.gY,gz:()=>i.gz,kl:()=>r.kl,mB:()=>r.mB,mE:()=>t.mE,mi:()=>t.mi,py:()=>r.py,qr:()=>r.qr,sq:()=>l.sq,uP:()=>i.uP,wL:()=>r.wL,zM:()=>r.zM});var t=e(85854),n=e(17130),l=e(3249),s=e(74940),i=e(21760),f=e(79720),c=e(20256),o=e(74188),m=e(98234),r=e(15128),u=e(2932)},3249:(Z,O,e)=>{"use strict";e.d(O,{Ac:()=>p,IG:()=>v,Ls:()=>g,U8:()=>E,b9:()=>a,sq:()=>h});var t=e(64140),n=e(82346),l=e(23406),s=e(74188),i=e(89771),f=e(95108),c=e(98876),o=e(29106),m=e(1521),r=e(95827),u=e(4728),d=e(85402);const g=new t.B(()=>[...(0,i.Ty)(),...(0,n.N)(),...(0,s.Lk)(),...(0,c.z)(),l.b]),p=new t.B(()=>[...(0,i.fX)(),...(0,s.cC)(),...(0,f.n)()]),E=new t.B(()=>[...(0,m.a)(),...(0,r.H)(),...(0,o.T)(),...(0,u.G)(),...(0,d.G)()]);function h(x){const y=g.get(x.id);if(!y)throw new Error("Unknown field matcher: "+x.id);return y.get(x.options)}function a(x){const y=p.get(x.id);if(!y)throw new Error("Unknown frame matcher: "+x.id);return y.get(x.options)}function v(x){const y=E.get(x.id);if(!y)throw new Error("Unknown value matcher: "+x.id);return y.get(x.options)}},74188:(Z,O,e)=>{"use strict";e.d(O,{Lk:()=>d,Ys:()=>s,cC:()=>g});var t=e(89890),n=e(29076),l=e(85854),s=(p=>(p.exclude="exclude",p.include="include",p))(s||{});const i={id:l.mi.byName,name:"Field Name",description:"match the field name",defaultOptions:"",get:p=>(E,h,a)=>p===E.name||(0,t.C)(E,h,a)===p,getOptionsDisplayText:p=>`Field name: ${p}`},f={id:l.mi.byNames,name:"Field Names",description:"match any of the given the field names",defaultOptions:{mode:"include",names:[]},get:p=>{const{names:E,mode:h="include"}=p,a=new Set(E??[]),v=(x,y,C)=>a.has(x.name)||a.has((0,t.C)(x,y,C));return h==="exclude"?(x,y,C)=>!v(x,y,C):v},getOptionsDisplayText:p=>{const{names:E,mode:h}=p,a=(E??[]).join(", ");return h==="exclude"?`All except: ${a}`:`All of: ${a}`}},c={id:l.mi.byRegexp,name:"Field Name by Regexp",description:"match the field name by a given regexp pattern",defaultOptions:"/.*/",get:p=>{const E=r(p);return(h,a,v)=>{const x=(0,t.C)(h,a,v);return!!E&&E.test(x)}},getOptionsDisplayText:p=>`Field name by pattern: ${p}`},o={id:l.mi.byFrameRefID,name:"Fields by frame refId",description:"match all fields returned in data frame with refId.",defaultOptions:"",get:p=>(E,h,a)=>h.refId===p,getOptionsDisplayText:p=>`Math all fields returned by query with reference ID: ${p}`},m={id:l.mi.byRegexpOrNames,name:"Field Name by Regexp or Names",description:"match the field name by a given regexp pattern or given names",defaultOptions:{pattern:"/.*/",names:[]},get:p=>{const E=c.get(p?.pattern||""),h=f.get({mode:"include",names:p?.names??[]});return(a,v,x)=>h(a,v,x)||E(a,v,x)},getOptionsDisplayText:p=>{const E=p?.pattern??"",h=p?.names?.join(",")??"";return`Field name by pattern: ${E} or names: ${h}`}},r=p=>{if(p)try{return(0,n.jO)(p)}catch(E){console.error(E);return}},u={id:l.E4.byName,name:"Frame Name",description:"match the frame name",defaultOptions:"/.*/",get:p=>{const E=(0,n.jO)(p);return h=>E.test(h.name||"")},getOptionsDisplayText:p=>`Frame name: ${p}`};function d(){return[i,c,f,m,o]}function g(){return[u]}},89771:(Z,O,e)=>{"use strict";e.d(O,{Qw:()=>g,Ty:()=>x,fX:()=>y,m3:()=>r});var t=e(14582),n=e(3249),l=e(85854);const s={id:l.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const P=C.map(D=>(0,n.sq)(D));return(D,M,b)=>{for(const R of P)if(R(D,M,b))return!0;return!1}},getOptionsDisplayText:C=>{let P="";for(const D of C){P.length>0&&(P+=" OR ");const M=n.Ls.get(D.id);P+=M.getOptionsDisplayText?M.getOptionsDisplayText(D):M.name}return P}},i={id:l.Ff.anyMatch,name:"Any",description:"Any child matches (OR)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const P=C.map(D=>(0,n.b9)(D));return D=>{for(const M of P)if(M(D))return!0;return!1}},getOptionsDisplayText:C=>{let P="";for(const D of C){P.length>0&&(P+=" OR ");const M=n.Ac.get(D.id);P+=M.getOptionsDisplayText?M.getOptionsDisplayText(D):M.name}return P}},f={id:l.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const P=C.map(D=>(0,n.sq)(D));return(D,M,b)=>{for(const R of P)if(!R(D,M,b))return!1;return!0}},getOptionsDisplayText:C=>{let P="";for(const D of C){P.length>0&&(P+=" AND ");const M=n.Ls.get(D.id);P+=M.getOptionsDisplayText?M.getOptionsDisplayText(D):M.name}return P}},c={id:l.Ff.allMatch,name:"All",description:"Everything matches (AND)",excludeFromPicker:!0,defaultOptions:[],get:C=>{const P=C.map(D=>(0,n.b9)(D));return D=>{for(const M of P)if(!M(D))return!1;return!0}},getOptionsDisplayText:C=>{let P="";for(const D of C){P.length>0&&(P+=" AND ");const M=n.Ac.get(D.id);P+=M.getOptionsDisplayText?M.getOptionsDisplayText(D):M.name}return P}},o={id:l.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const P=(0,n.sq)(C);return(D,M,b)=>!P(D,M,b)},getOptionsDisplayText:C=>{const P=n.Ls.get(C.id);return"NOT "+(P.getOptionsDisplayText?P.getOptionsDisplayText(C.options):P.name)}},m={id:l.Ff.invertMatch,name:"NOT",description:"Inverts other matchers",excludeFromPicker:!0,get:C=>{const P=(0,n.b9)(C);return D=>!P(D)},getOptionsDisplayText:C=>{const P=n.Ac.get(C.id);return"NOT "+(P.getOptionsDisplayText?P.getOptionsDisplayText(C.options):P.name)}},r=C=>!0,u=C=>!0,d=C=>!1,g=C=>C.type!==t.fS.time,p=C=>!1,E={id:l.Ff.alwaysMatch,name:"All Fields",description:"Always Match",get:C=>r,getOptionsDisplayText:C=>"Always"},h={id:l.Ff.alwaysMatch,name:"All Frames",description:"Always Match",get:C=>u,getOptionsDisplayText:C=>"Always"},a={id:l.Ff.neverMatch,name:"No Fields",description:"Never Match",excludeFromPicker:!0,get:C=>d,getOptionsDisplayText:C=>"Never"},v={id:l.Ff.neverMatch,name:"No Frames",description:"Never Match",get:C=>p,getOptionsDisplayText:C=>"Never"};function x(){return[s,f,o,E,a]}function y(){return[i,c,m,h,v]}},20256:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(64140);const n=new t.B},79720:(Z,O,e)=>{"use strict";e.d(O,{H:()=>m});var t=e(59980),n=e(39859),l=e(9471),s=e(3249),i=e(20256);const f=(u,d)=>g=>{const p=i.Z.get(u.id);if(!p)return g;const h={...p.transformation.defaultOptions??{},...u.options},a=u.filter?.options?(0,s.b9)(u.filter):void 0;return g.pipe((0,n.z)(v=>(0,t.of)(c(v,a)).pipe(p.transformation.operator(h,d),o(v,p,a))))};function c(u,d){return d?u.filter(g=>d(g)):u}const o=(u,d,g)=>p=>p.pipe((0,l.U)(E=>{if(E===u)return E;for(const h of E)h.meta||(h.meta={}),h.meta.transformations?h.meta.transformations=[...h.meta.transformations,d.id]:h.meta.transformations=[d.id];if(g){let h=0;const a=u.filter((v,x)=>{const y=!g(v);return y&&!h&&(h=x),y});a.length&&E.splice(h,0,...a)}return E}));function m(u,d,g){const p=(0,t.of)(d);if(!u.length)return p;const E=[],h=g??{interpolate:a=>a};for(let a=0;a<u.length;a++){const v=u[a];if(r(v))E.push(v(h));else{if(v.disabled)continue;E.push(f(v,h))}}return p.pipe.apply(p,E)}function r(u){return typeof u=="function"}},74940:(Z,O,e)=>{"use strict";e.d(O,{Y:()=>ee});var t=e(89984),n=e(42074),l=e(2932),s=e(78313),i=e(33723),f=e(84931),c=e(85854),o=e(17130);const m={id:o.W.filterByRefId,name:"Filter data by query refId",description:"select a subset of results",defaultOptions:{},operator:(ne,X)=>te=>{const ae={};return ne.include&&(ae.include={id:c.E4.byRefId,options:ne.include}),ne.exclude&&(ae.exclude={id:c.E4.byRefId,options:ne.exclude}),te.pipe(i.u.operator(ae,X))}};var r=e(86789),u=e(88861),d=e(9471),g=e(38685),p=e(89890),E=e(16217),h=e(14582);const a="Time",v="Time",x="Value",y=E.U.Empty,C={id:o.W.groupingToMatrix,name:"Grouping to Matrix",description:"Groups series by field and return a matrix visualisation",defaultOptions:{columnField:a,rowField:v,valueField:x},operator:ne=>X=>X.pipe((0,d.U)(te=>{const ae=ne.columnField||a,_=ne.rowField||v,ve=ne.valueField||x,Ve=ne.emptyValue||y;if(te.length!==1)return te;const it=te[0],rt=D(it,ae),pe=D(it,_),Ie=D(it,ve),We=`${_}\\${ae}`;if(!rt||!pe||!Ie)return te;const Je=P(rt.values),He=P(pe.values),Ae={};for(let _e=0;_e<Ie.values.length;_e++){const Se=rt.values.get(_e),Fe=pe.values.get(_e),Xe=Ie.values.get(_e);Ae[Se]||(Ae[Se]={}),Ae[Se][Fe]=Xe}const et=new g.v;et.addField({name:We,values:He,type:h.fS.string});for(const _e of Je){let Se=[];for(const Fe of He){const Xe=Ae[_e][Fe]??M(Ve);Se.push(Xe)}et.addField({name:_e.toString(),values:Se,config:Ie.config,type:Ie.type})}return[et]}))};function P(ne){const X=new Set;for(let te=0;te<ne.length;te++)X.add(ne.get(te));return Array.from(X)}function D(ne,X){for(let te=0;te<ne.fields.length;te++){const ae=ne.fields[te];if(X===(0,p.C)(ae))return ae}return null}function M(ne){switch(ne){case E.U.False:return!1;case E.U.True:return!0;case E.U.Null:return null;case E.U.Empty:default:return""}}var b=e(15128),R=e(75176),B=e(1052),w=e(19695);const A=10,I={id:o.W.limit,name:"Limit",description:"Limit the number of items to the top N",defaultOptions:{limitField:A},operator:ne=>X=>X.pipe((0,d.U)(te=>{const ae=ne.limitField||A;return te.map(_=>_.length>ae?{..._,fields:_.fields.map(ve=>{const Ve=ve.values.toArray();return{...ve,values:new w.G(Ve.slice(0,ae))}}),length:ae}:_)}))};var F=e(10158),K=e(21398),W=e(7582);const U={id:o.W.rename,name:"Rename fields by name",description:"Rename fields based on configuration given by user",defaultOptions:{renameByName:{}},operator:ne=>X=>X.pipe((0,d.U)(te=>{const ae=N(ne.renameByName);return!Array.isArray(te)||te.length===0?te:te.map(_=>({..._,fields:ae(_)}))}))},N=ne=>X=>!ne||Object.keys(ne).length===0?X.fields:X.fields.map(te=>{const ae=(0,p.C)(te,X),_=ne[ae];return typeof _!="string"||_.length===0?te:{...te,config:{...te.config,displayName:_},state:{...te.state,displayName:_}}}),S={id:o.W.organize,name:"Organize fields by name",description:"Order, filter and rename fields based on configuration given by user",defaultOptions:{excludeByName:{},indexByName:{},renameByName:{}},operator:(ne,X)=>te=>te.pipe(f.w.operator({exclude:{names:Y(ne.excludeByName)}},X),W.t.operator(ne,X),U.operator(ne,X))},Y=ne=>ne?Object.keys(ne).filter(X=>ne[X]):[];var Q=e(4157),z=e(29076);const G={id:o.W.renameByRegex,name:"Rename fields by regex",description:"Rename fields based on regular expression by users.",defaultOptions:{regex:"(.*)",renamePattern:"$1"},operator:ne=>X=>X.pipe((0,d.U)(te=>!Array.isArray(te)||te.length===0?te:te.map(k(ne))))},k=ne=>X=>{const te=(0,z.jO)(ne.regex),ae=X.fields.map(_=>{const ve=(0,p.C)(_,X);if(!te.test(ve))return _;const Ve=ve.replace(te,ne.renamePattern);return{..._,config:{..._.config,displayName:Ve},state:{..._.state,displayName:Ve}}});return{...X,fields:ae}};var j=e(82897),de=e(16911),ge=e(34472);const re={id:o.W.seriesToRows,name:"Series to rows",description:"Combines multiple series into a single serie and appends a column with metric name per value.",defaultOptions:{},operator:ne=>X=>X.pipe((0,d.U)(te=>{if(!Array.isArray(te)||te.length<=1||!(0,ge.xI)(te))return te;const ae={},_=new Set,ve=new g.v,Ve={name:h.rN,values:new w.G,config:{},type:h.fS.string};for(let it=0;it<te.length;it++){const rt=te[it];for(let pe=0;pe<rt.fields.length;pe++){const Ie=rt.fields[pe];if(Ie.type===h.fS.time){ae[it]=pe,_.has(h.Ls)||(ve.addField(ce(Ie,h.Ls)),ve.addField(Ve),_.add(h.Ls));continue}_.has(h.M5)||(ve.addField(ce(Ie,h.M5)),_.add(h.M5))}}for(let it=0;it<te.length;it++){const rt=te[it];for(let pe=0;pe<rt.length;pe++){const Ie=ae[it],We=Ie===0?1:0;ve.add({[h.Ls]:rt.fields[Ie].values.get(pe),[h.rN]:(0,p.n)(rt),[h.M5]:rt.fields[We].values.get(pe)})}}return[(0,de.aK)(ve,0,!0)]}))},ce=(ne,X)=>({...(0,j.omit)(ne,["values","state","labels","config","name"]),name:X,values:new w.G,config:{...(0,j.omit)(ne.config,["displayName","displayNameFromDS"])}}),ie={id:o.W.sortBy,name:"Sort by",description:"Sort fields in a frame",defaultOptions:{fields:{}},operator:ne=>X=>X.pipe((0,d.U)(te=>!Array.isArray(te)||te.length===0||!ne?.sort?.length?te:fe(te,ne.sort)))};function fe(ne,X){return ne.map(te=>{const ae=Ce(te,X);return ae.length&&ae[0].index!=null?(0,de.aK)(te,ae[0].index,ae[0].desc):te})}function Ce(ne,X){return X.map(te=>te.index!=null?te:{...te,index:ne.fields.findIndex(ae=>te.field===(0,p.C)(ae,ne))})}const ee={noopTransformer:K.d,filterFieldsTransformer:i.P,filterFieldsByNameTransformer:f.w,filterFramesTransformer:i.u,filterFramesByRefIdTransformer:m,filterByValueTransformer:r.JA,orderFieldsTransformer:W.t,organizeFieldsTransformer:S,reduceTransformer:Q.mf,concatenateTransformer:n.aE,calculateFieldTransformer:t.U,joinByFieldTransformer:R.M,seriesToColumnsTransformer:R.M,seriesToRowsTransformer:re,renameFieldsTransformer:U,labelsToFieldsTransformer:B.r,ensureColumnsTransformer:s.W,groupByTransformer:u.i,sortByTransformer:ie,mergeTransformer:F.R,renameByRegexTransformer:G,histogramTransformer:b.Op,convertFieldTypeTransformer:l.mg,groupingToMatrixTransformer:C,limitTransformer:I}},89984:(Z,O,e)=>{"use strict";e.d(O,{ie:()=>C,U:()=>M,h:()=>w});var t=e(82897),n=e(9471),l=e(16911),s=e(89890),i=e(14582),f=e(49922),c=e(98082),o=e(44405),m=e(19695),r=e(1473),u=e(30664),d=e(52674),g=e(49319);class p{constructor(I){this.columns=I,this.rowIndex=0}get length(){return this.columns.length}get(I){return this.columns[I].get(this.rowIndex)}toArray(){return(0,g.n)(this)}toJSON(){return(0,g.n)(this)}}var E=e(21760),h=e(3249),a=e(85854),v=e(78313),x=e(17130),y=e(21398),C=(A=>(A.ReduceRow="reduceRow",A.BinaryOperation="binary",A.Index="index",A))(C||{});const P={reducer:E.gz.sum},D={left:"",operator:c.L.Add,right:""},M={id:x.W.calculateField,name:"Add field from calculation",description:"Use the row values to calculate a new field",defaultOptions:{mode:"reduceRow",reduce:{reducer:E.gz.sum}},operator:(A,I)=>F=>{const K=A&&A.timeSeries!==!1?v.W.operator(null,I):y.d.operator({},I);return A.alias!=null&&(A.alias=I.interpolate(A.alias)),F.pipe(K,(0,n.U)(W=>{const U=A.mode??"reduceRow";let N;if(U==="reduceRow")N=b((0,t.defaults)(A.reduce,P),W);else if(U==="binary"){const S={...A.binary,left:I.interpolate(A.binary?.left),right:I.interpolate(A.binary?.right)};N=B((0,t.defaults)(S,D),W)}else if(U==="index")return W.map(S=>{const Y={name:A.alias??"Row",type:i.fS.number,values:new o.r(S.length),config:{min:0,max:S.length-1}};return{...S,fields:A.replaceFields?[Y]:[...S.fields,Y]}});return N?W.map(S=>{const Y=N(S);if(!Y)return S;const Q={name:w(A),type:i.fS.number,config:{},values:Y};let z=[];if(A.replaceFields){const{timeField:G}=(0,l.sV)(S);G&&A.timeSeries!==!1?z=[G,Q]:z=[Q]}else z=[...S.fields,Q];return{...S,fields:z}}):W}))}};function b(A,I){let F=(0,h.sq)({id:a.mi.numeric});A.include&&A.include.length&&(F=(0,h.sq)({id:a.mi.byNames,options:{names:A.include}}));const K=E.TB.get(A.reducer);if(!K)throw new Error(`Unknown reducer: ${A.reducer}`);const W=K.reduce??E.uP,U=A.nullValueMode===f.Gl.Ignore,N=A.nullValueMode===f.Gl.AsZero;return S=>{const Y=[];for(const k of S.fields)F(k,S,I)&&Y.push(k.values);const Q=new p(Y),z={name:"temp",values:Q,type:i.fS.number,config:{}},G=[];for(let k=0;k<S.length;k++){Q.rowIndex=k;const j=W(z,U,N)[A.reducer];G.push(j)}return new m.G(G)}}function R(A,I,F){if(!I)return;for(const W of A.fields)if(I===(0,s.C)(W,A,F))return W.type===i.fS.boolean?new d.s(W.values):W.values;const K=parseFloat(I);if(!isNaN(K))return new r.u(K,A.length)}function B(A,I){const F=c.n.getIfExists(A.operator);return K=>{const W=R(K,A.left,I),U=R(K,A.right,I);if(!(!W||!U||!F))return new u.r(W,U,F.operation)}}function w(A){if(A.alias?.length)return A.alias;switch(A.mode){case"binary":{const{binary:I}=A;return`${I?.left??""} ${I?.operator??""} ${I?.right??""}`}case"reduceRow":{const I=E.TB.getIfExists(A.reduce?.reducer);if(I)return I.name}break;case"index":return"Row"}return"math"}},42074:(Z,O,e)=>{"use strict";e.d(O,{HO:()=>i,aE:()=>f});var t=e(9471),n=e(14582),l=e(19695),s=e(17130),i=(o=>(o.Drop="drop",o.FieldName="field",o.Label="label",o))(i||{});const f={id:s.W.concatenate,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length.",defaultOptions:{frameNameMode:"field",frameNameLabel:"frame"},operator:o=>m=>m.pipe((0,t.U)(r=>!Array.isArray(r)||r.length<2?r:[c(r,o)]))};function c(o,m){let r=!0,u=o[0].length;const d=m.frameNameLabel??"frame";let g=[];for(const p of o){u!==p.length&&(r=!1,u=Math.max(u,p.length));for(const E of p.fields){const h={...E};h.state=void 0,p.name&&(m.frameNameMode==="drop"||(m.frameNameMode==="label"?(h.labels={...E.labels},h.labels[d]=p.name):!h.name||h.name===n.M5?h.name=p.name:h.name=`${p.name} \xB7 ${E.name}`)),g.push(h)}}return r||(g=g.map(p=>{if(p.values.length===u)return p;const E=p.values.toArray();return E.length=u,{...p,values:new l.G(E)}})),{fields:g,length:u}}},2932:(Z,O,e)=>{"use strict";e.d(O,{J_:()=>a,mg:()=>o,p8:()=>r});var t=e(9471),n=e(85052),l=e(14582),s=e(19695),i=e(3249),f=e(85854),c=e(17130);const o={id:c.W.convertFieldType,name:"Convert field type",description:"Convert a field to a specified field type",defaultOptions:{fields:{},conversions:[{targetField:void 0,destinationType:void 0,dateFormat:void 0}]},operator:(x,y)=>C=>C.pipe((0,t.U)(P=>o.transformer(x,y)(P))),transformer:x=>y=>!Array.isArray(y)||y.length===0?y:m(x,y)??[]};function m(x,y){if(!x.conversions.length)return y;const C=y.map(P=>({...P}));for(const P of x.conversions){if(!P.targetField)continue;const D=i.Ls.get(f.mi.byName).get(P.targetField);for(const M of C)M.fields=M.fields.map(b=>D(b,M,C)?r(b,P):b)}return C}function r(x,y){switch(y.destinationType){case l.fS.time:return a(x,y.dateFormat);case l.fS.number:return g(x);case l.fS.string:return E(x,y.dateFormat);case l.fS.boolean:return p(x);case l.fS.enum:return v(x,y.enumConfig);case l.fS.other:return h(x);default:return x}}const u=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d{3,})?(?:Z|[-+]\d{2}:?\d{2})$/;function d(x,y){let C=y?{format:y}:void 0;const P=x.values.toArray().slice();let D=P.find(b=>b!=null),M=typeof D=="string"&&u.test(D);for(let b=0;b<P.length;b++)if(P[b]){let R=M?Date.parse(P[b]):(0,n.J)(P[b],C).valueOf();P[b]=Number.isFinite(R)?R:null}else P[b]=null;return{...x,type:l.fS.time,values:new s.G(P)}}function g(x){const y=x.values.toArray().slice(),C=y.some(P=>typeof P=="string");for(let P=0;P<y.length;P++){let D=y[P];C&&(D=D.replace(/,/g,""));const M=+D;y[P]=Number.isFinite(M)?M:null}return{...x,type:l.fS.number,values:new s.G(y)}}function p(x){const y=x.values.toArray().slice();for(let C=0;C<y.length;C++)y[C]=Boolean(!!y[C]);return{...x,type:l.fS.boolean,values:new s.G(y)}}function E(x,y){let C=x.values.toArray();switch(x.type){case l.fS.time:C=C.map(P=>(0,n.J)(P).format(y));break;case l.fS.other:C=C.map(P=>JSON.stringify(P));break;default:C=C.map(P=>`${P}`)}return{...x,type:l.fS.string,values:new s.G(C)}}function h(x){const y=x.values.toArray().slice();for(let C=0;C<y.length;C++)try{y[C]=JSON.parse(y[C])}catch{y[C]=null}return{...x,type:l.fS.other,values:new s.G(y)}}function a(x,y){const C=typeof x.values.get(0)=="number";return x.type===l.fS.time&&C?x:C?{...x,type:l.fS.time}:d(x,y)}function v(x,y){const C={...y},P=x.values.toArray().slice(),D=new Map;if(C.text)for(let M=0;M<C.text.length;M++)D.set(C.text[M],M);else C.text=[];for(let M=0;M<P.length;M++){const b=P[M];D.has(b)||(C.text[D.size]=b,D.set(b,D.size)),P[M]=D.get(b)}return{...x,config:{...x.config,type:{enum:C}},type:l.fS.enum,values:new s.G(P)}}},78313:(Z,O,e)=>{"use strict";e.d(O,{W:()=>i});var t=e(9471),n=e(16911),l=e(17130),s=e(75176);const i={id:l.W.ensureColumns,name:"Ensure Columns Transformer",description:"Will check if current data frames is series or columns. If in series it will convert to columns.",operator:(c,o)=>m=>m.pipe((0,t.U)(r=>i.transformer(c,o)(r))),transformer:(c,o)=>m=>{const r=f(m);return m.length>1&&r?s.M.transformer({byField:r},o)(m):m}};function f(c){let o;for(const m of c){const{timeField:r}=(0,n.sV)(m);if(!r)return;if(!o)o=r.name;else if(o!==r.name)return}return o}},33723:(Z,O,e)=>{"use strict";e.d(O,{P:()=>i,u:()=>f});var t=e(9471),n=e(3249),l=e(17130),s=e(21398);const i={id:l.W.filterFields,name:"Filter Fields",description:"select a subset of fields",defaultOptions:{},operator:(c,o)=>m=>!c.include&&!c.exclude?m.pipe(s.d.operator({},o)):(typeof c.include?.options=="string"?c.include.options=o.interpolate(c.include?.options):typeof c.include?.options?.pattern=="string"&&(c.include.options.pattern=o.interpolate(c.include?.options.pattern)),typeof c.exclude?.options=="string"?c.exclude.options=o.interpolate(c.exclude?.options):typeof c.exclude?.options?.pattern=="string"&&(c.exclude.options.pattern=o.interpolate(c.exclude?.options.pattern)),m.pipe((0,t.U)(r=>{const u=c.include?(0,n.sq)(c.include):null,d=c.exclude?(0,n.sq)(c.exclude):null,g=[];for(const p of r){const E=[];for(let a=0;a<p.fields.length;a++){const v=p.fields[a];if(d){if(d(v,p,r))continue;u||E.push(v)}u&&u(v,p,r)&&E.push(v)}if(!E.length)continue;const h={...p,fields:E};g.push(h)}return g})))},f={id:l.W.filterFrames,name:"Filter Frames",description:"select a subset of frames",defaultOptions:{},operator:(c,o)=>m=>!c.include&&!c.exclude?m.pipe(s.d.operator({},o)):m.pipe((0,t.U)(r=>{const u=c.include?(0,n.b9)(c.include):null,d=c.exclude?(0,n.b9)(c.exclude):null,g=[];for(const p of r){if(d){if(d(p))continue;u||g.push(p)}u&&u(p)&&g.push(p)}return g}))}},84931:(Z,O,e)=>{"use strict";e.d(O,{f:()=>i,w:()=>s});var t=e(85854),n=e(33723),l=e(17130);const s={id:l.W.filterFieldsByName,name:"Filter fields by name",description:"select a subset of fields",defaultOptions:{},operator:(f,c)=>o=>o.pipe(n.P.operator({include:i(f.include),exclude:i(f.exclude)},c))},i=f=>{if(!f)return;const{names:c,pattern:o}=f;if(!((!Array.isArray(c)||c.length===0)&&!o))return o?!Array.isArray(c)||c.length===0?{id:t.mi.byRegexp,options:o}:{id:t.mi.byRegexpOrNames,options:f}:{id:t.mi.byNames,options:{names:c}}}},86789:(Z,O,e)=>{"use strict";e.d(O,{ER:()=>o,JA:()=>m,PQ:()=>c});var t=e(9471),n=e(89890),l=e(19695),s=e(3249),i=e(17130),f=e(21398),c=(d=>(d.exclude="exclude",d.include="include",d))(c||{}),o=(d=>(d.all="all",d.any="any",d))(o||{});const m={id:i.W.filterByValue,name:"Filter data by values",description:"select a subset of results based on values",defaultOptions:{filters:[],type:"include",match:"any"},operator:(d,g)=>p=>{const E=d.filters,h=d.match==="all",a=d.type==="include";return!Array.isArray(E)||E.length===0?p.pipe(f.d.operator({},g)):p.pipe((0,t.U)(v=>{if(!Array.isArray(v)||v.length===0)return v;const x=new Set;for(const P of v){const D=u(P,v),M=r(E,D);for(let b=0;b<P.length;b++){if(x.has(b))continue;let R=!0;for(const B of M){const w=B(b,P,v);if(!h&&w){R=!0;break}if(h&&!w){R=!1;break}R=w}R&&x.add(b)}}const y=[],C=a?x.size:v[0].length-x.size;for(const P of v){const D=[];for(const M of P.fields){const b=[];for(let R=0;R<P.length;R++){if(a&&x.has(R)){b.push(M.values.get(R));continue}if(!a&&!x.has(R)){b.push(M.values.get(R));continue}}D.push({...M,values:new l.G(b),state:{}})}y.push({...P,fields:D,length:C})}return y}))}},r=(d,g)=>{const p=()=>!1;return d.map(E=>{const h=g[E.fieldName]??-1;if(h<0)return console.warn(`[FilterByValue] Could not find index for field name: ${E.fieldName}`),p;const a=(0,s.IG)(E.config);return(v,x,y)=>a(v,x.fields[h],x,y)})},u=(d,g)=>d.fields.reduce((p,E,h)=>{const a=(0,n.C)(E,d,g);return p[a]=h,p},{})},88861:(Z,O,e)=>{"use strict";e.d(O,{i:()=>m,x:()=>o});var t=e(9471),n=e(16911),l=e(89890),s=e(14582),i=e(19695),f=e(21760),c=e(17130),o=(g=>(g.aggregate="aggregate",g.groupBy="groupby",g))(o||{});const m={id:c.W.groupBy,name:"Group by",description:"Group the data by a field values then process calculations for each group",defaultOptions:{fields:{}},operator:g=>p=>p.pipe((0,t.U)(E=>{if(!Object.keys(g.fields).find(v=>g.fields[v].operation==="groupby"))return E;const a=[];for(const v of E){const x=[];for(const P of v.fields)r(P,g)&&x.push(P);if(x.length===0)continue;const y=new Map;for(let P=0;P<v.length;P++){const D=String(x.map(b=>b.values.get(P))),M=y.get(D)??{};y.has(D)||y.set(D,M);for(let b of v.fields){const R=(0,l.C)(b);M[R]||(M[R]={name:R,type:b.type,config:{...b.config},values:new i.G}),M[R].values.add(b.values.get(P))}}const C=[];for(const P of x){const D=new i.G,M=(0,l.C)(P);y.forEach(b=>{D.add(b[M].values.get(0))}),C.push({name:P.name,type:P.type,config:{...P.config},values:D})}for(const P of v.fields){if(!u(P,g))continue;const D=(0,l.C)(P),M=g.fields[D].aggregations,b={};y.forEach(R=>{const B=R[D],w=(0,f.Kx)({field:B,reducers:M});for(const A of M)Array.isArray(b[A])||(b[A]=[]),b[A].push(w[A])});for(const R of M){const B={name:`${D} (${R})`,values:new i.G(b[R]),type:s.fS.other,config:{}};B.type=d(R,P,B),C.push(B)}}a.push({fields:C,length:y.size})}return a}))},r=(g,p)=>{const E=(0,l.C)(g);return p?.fields[E]?.operation==="groupby"},u=(g,p)=>{const E=(0,l.C)(g);return p?.fields[E]?.operation==="aggregate"&&Array.isArray(p?.fields[E].aggregations)&&p?.fields[E].aggregations.length>0},d=(g,p,E)=>{switch(g){case f.gz.allIsNull:return s.fS.boolean;case f.gz.last:case f.gz.lastNotNull:case f.gz.first:case f.gz.firstNotNull:return p.type;default:return(0,n.fu)(E)??s.fS.string}}},15128:(Z,O,e)=>{"use strict";e.d(O,{Jz:()=>P,Ok:()=>h,Op:()=>p,UO:()=>D,Zi:()=>r,cO:()=>a,gY:()=>C,kl:()=>v,mB:()=>M,py:()=>g,qr:()=>x,wL:()=>E,zM:()=>R});var t=e(9471),n=e(36512),l=e(36328),s=e(88432),i=e(14582),f=e(43211),c=e(19695),o=e(17130),m=e(98234);const r=[1e-9,2e-9,25e-10,4e-9,5e-9,1e-8,2e-8,25e-9,4e-8,5e-8,1e-7,2e-7,25e-8,4e-7,5e-7,1e-6,2e-6,25e-7,4e-6,5e-6,1e-5,2e-5,25e-6,4e-5,5e-5,1e-4,2e-4,25e-5,4e-4,5e-4,.001,.002,.0025,.004,.005,.01,.02,.025,.04,.05,.1,.2,.25,.4,.5,1,2,4,5,10,20,25,40,50,100,200,250,400,500,1e3,2e3,2500,4e3,5e3,1e4,2e4,25e3,4e4,5e4,1e5,2e5,25e4,4e5,5e5,1e6,2e6,25e5,4e6,5e6,1e7,2e7,25e6,4e7,5e7,1e8,2e8,25e7,4e8,5e8,1e9,2e9,25e8,4e9,5e9],u=[null],d=(B,w)=>B-w,g={bucketSize:{name:"Bucket size",description:void 0},bucketOffset:{name:"Bucket offset",description:"for non-zero-based buckets"},combine:{name:"Combine series",description:"combine all series into a single histogram"}},p={id:o.W.histogram,name:"Histogram",description:"Calculate a histogram from input data",defaultOptions:{fields:{}},operator:(B,w)=>A=>A.pipe((0,t.U)(I=>p.transformer(B,w)(I))),transformer:B=>w=>{if(!Array.isArray(w)||w.length===0)return w;const A=C(w,B);return A==null?[]:[R(A)]}},E="xMin";function h(B){return B===E||B==="BucketMin"}const a="xMax";function v(B){return B===a||B==="BucketMax"}function x(B){let w,A;const I=[];for(const F of B.fields)h(F.name)?w=F:v(F.name)?A=F:F.type===i.fS.number&&I.push(F);if(!A&&w&&w.values.length>1){let F=w.values.toArray(),K=(0,f.O)(F[1]-F[0],6);A={...w,name:a,values:new c.G(F.map(W=>W+K))}}if(!w&&A&&A?.values.length>1){let F=A.values.toArray(),K=(0,f.O)(F[1]-F[0],6);w={...A,name:E,values:new c.G(F.map(W=>W-K))}}if(w&&A&&I.length)return{xMin:w,xMax:A,counts:I}}const y=20;function C(B,w){let A=w?.bucketSize,I=w?.bucketOffset??0;if(!A||A<0){let z=[];for(const re of B)for(const ce of re.fields)ce.type===i.fS.number&&(z=z.concat(ce.values.toArray()));z=z.filter(re=>re!=null),z.sort((re,ce)=>re-ce);let G=1/0;if(z.length===1)G=1;else for(let re=1;re<z.length;re++){let ce=z[re]-z[re-1];ce!==0&&(G=Math.min(G,ce))}let k=z[0];const ge=(z[z.length-1]-k)/y;for(let re=0;re<r.length;re++){let ce=r[re];if(ge<ce&&ce>=G){A=ce;break}}}const F=z=>M(z-I,A)+I;let K=((""+A).match(/\.\d+$/)??["."])[0].length-1,W=[],U=[],N;for(const z of B)for(const G of z.fields)if(G.type===i.fS.number){let k=b(G.values.toArray(),F,u,d);W.push(k),U.push({...G,config:{...G.config,unit:G.config.unit==="short"?"short":void 0}}),!N&&G.config.unit&&(N=G.config)}if(!U.length)return null;let S=(0,m.v_)(W);for(let z=1;z<S.length;z++){let G=S[z];for(let k=0;k<G.length;k++)G[k]==null&&(G[k]=0)}const Y={name:E,values:new c.G(S[0]),type:i.fS.number,state:void 0,config:K===0?N??{}:{...N,decimals:K}},Q={...Y,name:a,values:new c.G(S[0].map(z=>z+A))};if(w?.combine){const z=new Array(S[0].length).fill(0);for(let G=1;G<S.length;G++)for(let k=0;k<z.length;k++)z[k]+=S[G][k];U=[{...U[0],name:"count",values:new c.G(z),type:i.fS.number,state:void 0}]}else U.forEach((z,G)=>{z.values=new c.G(S[G+1])});return{xMin:Y,xMax:Q,counts:U}}function P(B,w){return Math.round(B/w)*w}function D(B,w){return Math.ceil(B/w)*w}function M(B,w){return Math.floor(B/w)*w}function b(B,w,A,I){let F=new Map;for(let N=0;N<B.length;N++){let S=B[N];S!=null&&(S=w(S));let Y=F.get(S);Y?Y.count++:F.set(S,{value:S,count:1})}A&&A.forEach(N=>F.delete(N));let K=[...F.values()];I&&K.sort((N,S)=>I(N.value,S.value));let W=Array(K.length),U=Array(K.length);for(let N=0;N<K.length;N++)W[N]=K[N].value,U[N]=K[N].count;return[W,U]}function R(B,w){if(!B.xMin.display){const A=(0,n.U_)({field:B.xMin,theme:w??(0,l.j)()});B.xMin.display=A,B.xMax.display=A}return B.counts[0].display=(0,n.U_)({field:B.counts[0],theme:w??(0,l.j)()}),{length:B.xMin.values.length,meta:{type:s.P.Histogram},fields:[B.xMin,B.xMax,...B.counts]}}},75176:(Z,O,e)=>{"use strict";e.d(O,{M:()=>c,c:()=>f});var t=e(9471),n=e(3249),l=e(85854),s=e(17130),i=e(98234),f=(o=>(o.outer="outer",o.inner="inner",o))(f||{});const c={id:s.W.joinByField,aliasIds:[s.W.seriesToColumns],name:"Join by field",description:"Combine rows from two or more tables, based on a related field between them.  This can be used to outer join multiple time series on the _time_ field to show many time series in one table.",defaultOptions:{byField:void 0,mode:"outer"},operator:(o,m)=>r=>r.pipe((0,t.U)(u=>c.transformer(o,m)(u))),transformer:o=>{let m;return r=>{if(r.length>1){o.byField&&!m&&(m=n.Ls.get(l.mi.byName).get(o.byField));const u=(0,i._9)({frames:r,joinBy:m,mode:o.mode});if(u)return[u]}return r}}}},98234:(Z,O,e)=>{"use strict";e.d(O,{Y3:()=>r,_9:()=>u,v_:()=>h});var t=e(39963),n=e(16911),l=e(14582),s=e(19695),i=e(3249),f=e(85854),c=e(75176);function o(v){const{timeField:x}=(0,n.sV)(v[0]);if(x)return i.Ls.get(f.mi.firstTimeField).get({});let y=[];for(const C of v[0].fields)C.type===l.fS.number&&y.push(C.name);for(let C=1;C<v.length;C++){const P=[];for(const D of v[0].fields)D.type===l.fS.number&&P.push(D.name);y=y.filter(D=>!P.includes(D))}return i.Ls.get(f.mi.byName).get(y[0])}function m(v){return v.joinBy??o(v.frames)}function r(v,x){if(x>=0){let y=v.fields[x];y.type!==l.fS.string&&!a(y.values)&&(v=(0,n.aK)(v,x))}return v}function u(v){if(!v.frames?.length)return;if(v.frames.length===1){let M=v.frames[0],b=M;const R=m(v);let B=b.fields.findIndex(w=>R(w,b,v.frames));if(v.keepOriginIndices&&(b={...M,fields:M.fields.map((w,A)=>{const I={...w},F={frameIndex:0,fieldIndex:A};return I.state?I.state.origin=F:I.state={origin:F},I})},B>0)){const w=b.fields[B],A=b.fields.filter((I,F)=>F!==B);A.unshift(w),b.fields=A,B=0}if(B>=0&&(b=r(b,B)),v.keep){let w=b.fields.filter((A,I)=>I===B||v.keep(A,b,v.frames));M!==b?b.fields=w:b={...M,fields:w}}return b}const x=[],y=[],C=[],P=m(v);for(let M=0;M<v.frames.length;M++){const b=v.frames[M];if(!b||!b.fields?.length)continue;const R=[d];let B,w=[];for(let I=0;I<b.fields.length;I++){const F=b.fields[I];if(F.state=F.state||{},!B&&P(F,b,v.frames))B=F;else{if(v.keep&&!v.keep(F,b,v.frames))continue;let K=F.config.custom?.spanNulls;R.push(K===!0?d:K===-1?g:p);let W=F.labels??{};b.name&&(W={...W,name:b.name}),w.push({...F,labels:W})}v.keepOriginIndices&&(F.state.origin={frameIndex:M,fieldIndex:I})}if(!B)continue;C.length===0&&C.push(B),x.push(R);const A=[B.values.toArray()];for(const I of w)A.push(I.values.toArray()),C.push(I),delete I.state?.displayName;y.push(A)}const D=h(y,x,v.mode);return{length:D[0].length,fields:C.map((M,b)=>({...M,values:new s.G(D[b])}))}}const d=0,g=1,p=2;function E(v,x,y){for(let C=0,P,D=-1;C<x.length;C++){let M=x[C];if(M>D){for(P=M-1;P>=0&&v[P]==null;)v[P--]=null;for(P=M+1;P<y&&v[P]==null;)v[D=P++]=null}}}function h(v,x,y=c.c.outer){let C;if(y===c.c.inner)C=new Set((0,t.Z)(v.map(b=>b[0])));else{C=new Set;for(let b=0;b<v.length;b++){let B=v[b][0],w=B.length;for(let A=0;A<w;A++)C.add(B[A])}}let P=[Array.from(C).sort((b,R)=>b-R)],D=P[0].length,M=new Map;for(let b=0;b<D;b++)M.set(P[0][b],b);for(let b=0;b<v.length;b++){let R=v[b],B=R[0];for(let w=1;w<R.length;w++){let A=R[w],I=Array(D).fill(void 0),F=x?x[b][w]:g,K=[];for(let W=0;W<A.length;W++){let U=A[W],N=M.get(B[W]);U===null?F!==d&&(I[N]=U,F===p&&K.push(N)):I[N]=U}E(I,K,D),P.push(I)}}return P}function a(v,x=50){const y=v.length;if(y<=1)return!0;let C=0,P=y-1;for(;C<=P&&v.get(C)==null;)C++;for(;P>=C&&v.get(P)==null;)P--;if(P<=C)return!0;const D=Math.max(1,Math.floor((P-C+1)/x));for(let M=v.get(C),b=C+D;b<=P;b+=D){const R=v.get(b);if(R!=null){if(R<=M)return!1;M=R}}return!0}},1052:(Z,O,e)=>{"use strict";e.d(O,{k:()=>f,r:()=>c});var t=e(9471),n=e(89890),l=e(14582),s=e(19695),i=e(17130),f=(m=>(m.Columns="columns",m.Rows="rows",m))(f||{});const c={id:i.W.labelsToFields,name:"Labels to fields",description:"Extract time series labels to fields (columns or rows)",defaultOptions:{},operator:(m,r)=>u=>u.pipe((0,t.U)(d=>c.transformer(m,r)(d))),transformer:m=>r=>{if(m.mode==="rows")return o(r,m.keepLabels);const u=[],d=m.keepLabels?.length?new Set(m.keepLabels):void 0;for(const g of r){const p=[],E={};for(const h of g.fields){if(!h.labels){p.push(h);continue}const a={...h,config:{...h.config,displayName:void 0,displayNameFromDS:void 0},labels:void 0};p.push(a);for(const v of Object.keys(h.labels)){if(d&&!d.has(v))continue;if(m.valueLabel===v){a.name=h.labels[v];continue}(E[v]??(E[v]=new Set)).add(h.labels[v])}}for(const h in E)for(const a of E[h]){const v=new Array(g.length).fill(a);p.push({name:h,type:l.fS.string,values:new s.G(v),config:{}})}u.push({...g,fields:p,length:g.length})}return u}};function o(m,r){const u=[];for(const d of m)for(const g of d.fields)if(g.labels){const p=[],E=[];if(r)for(const h of r)p.push(h),E.push(g.labels[h]);else for(const[h,a]of Object.entries(g.labels))p.push(h),E.push(a);E.length&&u.push({...d,name:(0,n.C)(g,d,m),fields:[{name:"label",type:l.fS.string,config:{},values:new s.G(p)},{name:"value",type:l.fS.string,config:{},values:new s.G(E)}],length:E.length})}return u}},10158:(Z,O,e)=>{"use strict";e.d(O,{R:()=>c});var t=e(82897),n=e.n(t),l=e(9471),s=e(38685),i=e(19695),f=e(17130);const c={id:f.W.merge,name:"Merge series/tables",description:"Merges multiple series/tables into a single serie/table",defaultOptions:{},operator:p=>E=>E.pipe((0,l.U)(h=>{if(!Array.isArray(h)||h.length<=1)return h;const a=h.filter(R=>R.fields.length>0);if(a.length===0)return[h[0]];const v=new Set,x={},y=[],C=new s.v;for(let R=0;R<a.length;R++){const B=a[R];for(let w=0;w<B.fields.length;w++){const A=B.fields[w];v.has(A.name)||(C.addField(o(A)),v.add(A.name)),x[A.name]=x[A.name]||{},x[A.name][R]=w,a.length-1===R&&d(x,A,a)&&y.push(A.name)}}if(y.length===0)return h;const P={},D=[],M=m(a,x,y),b=r(a,v,x);for(let R=0;R<a.length;R++){const B=a[R];for(let w=0;w<B.length;w++){const A=M(R,w),I=b(R,w);if(!Array.isArray(P[A])){P[A]=[I],D.push(g(A,P));continue}let F=!1;P[A]=P[A].map(K=>u(K,I)?(F=!0,{...K,...I}):K),F||(P[A].push(I),D.push(g(A,P)))}}for(const R of D){const B=P[R.key][R.index];B&&C.add(B)}return[C]}))},o=p=>({...(0,t.omit)(p,["values","state","labels","config"]),values:new i.G,config:{...(0,t.omit)(p.config,"displayName")}}),m=(p,E,h)=>{const a=h.reduce((v,x)=>Object.keys(E[x]).reduce((y,C)=>(y[C]=y[C]||[],y[C].push(E[x][C]),y),v),{});return(v,x)=>a[v].reduce((y,C)=>y+p[v].fields[C].values.get(x),"")},r=(p,E,h)=>(a,v)=>{const x={},y=Array.from(E);for(const C of y){const P=h[C];if(!P)continue;const D=P[a];if(typeof D!="number")continue;const M=p[a];if(!M||!M.fields)continue;const b=M.fields[D];!b||!b.values||(x[C]=b.values.get(v))}return x},u=(p,E)=>{let h=!0;for(const a in E)if(!(typeof p[a]>"u")&&p[a]!==null&&p[a]!==E[a]){h=!1;break}return h},d=(p,E,h)=>Object.keys(p[E.name]).length===h.length,g=(p,E)=>({key:p,index:E[p].length-1})},21398:(Z,O,e)=>{"use strict";e.d(O,{d:()=>n});var t=e(17130);const n={id:t.W.noop,name:"noop",description:"No-operation transformer",defaultOptions:{},operator:l=>s=>s,transformer:l=>s=>s}},7582:(Z,O,e)=>{"use strict";e.d(O,{$:()=>c,t:()=>f});var t=e(82897),n=e.n(t),l=e(9471),s=e(89890),i=e(17130);const f={id:i.W.order,name:"Order fields by name",description:"Order fields based on configuration given by user",defaultOptions:{indexByName:{}},operator:r=>u=>u.pipe((0,l.U)(d=>{const g=o(r.indexByName);return!Array.isArray(d)||d.length===0?d:d.map(p=>({...p,fields:g(p.fields,d,p)}))}))},c=r=>(u,d)=>m(u,r)-m(d,r),o=r=>(u,d,g)=>{if(!Array.isArray(u)||u.length===0||!r||Object.keys(r).length===0)return u;const p=c(r);return(0,t.clone)(u).sort((E,h)=>p((0,s.C)(E,g,d),(0,s.C)(h,g,d)))},m=(r,u)=>Number.isInteger(u[r])?u[r]:Number.MAX_SAFE_INTEGER},4157:(Z,O,e)=>{"use strict";e.d(O,{AL:()=>r,mf:()=>u});var t=e(9471),n=e(16911),l=e(89890),s=e(14582),i=e(19695),f=e(21760),c=e(3249),o=e(89771),m=e(17130),r=(h=>(h.SeriesToRows="seriesToRows",h.ReduceFields="reduceFields",h))(r||{});const u={id:m.W.reduce,name:"Reduce",description:"Reduce all rows or data points to a single value using a function like max, min, mean or last",defaultOptions:{reducers:[f.gz.max]},operator:h=>a=>a.pipe((0,t.U)(v=>{if(!h?.reducers?.length)return v;const x=h.fields?(0,c.sq)(h.fields):h.includeTimeField&&h.mode==="reduceFields"?o.m3:o.Qw;if(h.mode==="reduceFields")return E(v,x,h.reducers);const y=d(v,x,h.reducers,h.labelsToFields);return y?[y]:[]}))};function d(h,a,v,x){const y=f.TB.list(v),C=y.map(M=>M.id),P=[],D=x?g(h):[];for(const M of h){const b=M.fields.filter(F=>a(F,M,h)),R=b.length,B=[],w=new i.G(new Array(R));B.push({name:"Field",type:s.fS.string,values:w,config:{}});const A={};if(x)for(const F of D)A[F]=new i.G(new Array(R)),B.push({name:F,type:s.fS.string,values:A[F],config:{}});const I={};for(const F of y)I[F.id]=new i.G(new Array(R)),B.push({name:F.name,type:s.fS.other,values:I[F.id],config:{}});for(let F=0;F<b.length;F++){const K=b[F],W=(0,f.Kx)({field:K,reducers:C});if(x){if(w.buffer[F]=K.name,K.labels)for(const U of Object.keys(K.labels))A[U].set(F,K.labels[U])}else w.buffer[F]=(0,l.C)(K,M,h);for(const U of y){const N=W[U.id];I[U.id].buffer[F]=N}}for(const F of B)if(F.type===s.fS.other){const K=(0,n.fu)(F);K&&(F.type=K)}P.push({...M,fields:B,length:R})}return p(P)}function g(h){const a=new Set;for(const v of h)for(const x of v.fields)if(x.labels)for(const y of Object.keys(x.labels))a.add(y);return[...a]}function p(h){if(!h?.length)return;const a=h[0];for(let v=1;v<h.length;v++){const x=h[v];for(let y=0;y<a.fields.length;y++){const C=a.fields[y];for(let P=0;P<x.fields.length;P++){const D=x.fields[P],M=y===0&&P===0,b=C.type===D.type&&C.name===D.name;if(M||b){const R=C.values.toArray(),B=D.values.toArray();C.values.buffer=R.concat(B)}}}}return a.name=void 0,a.length=a.fields[0].values.length,a}function E(h,a,v){const y=f.TB.list(v).map(P=>P.id),C=[];for(const P of h){const D=[];for(const M of P.fields)if(a(M,P,h)){const b=(0,f.Kx)({field:M,reducers:y});for(const R of y){const B=b[R],w={...M,values:new i.G([B])};w.state=void 0,y.length>1&&(w.labels||(w.labels={}),w.labels.reducer=f.TB.get(R).name),D.push(w)}}D.length&&C.push({...P,fields:D,length:1})}return C}},17179:()=>{"use strict"},14633:()=>{"use strict"},23309:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>t});var t=(n=>(n.NoData="no_data",n.Paused="paused",n.Alerting="alerting",n.OK="ok",n.Pending="pending",n.Unknown="unknown",n))(t||{})},20442:(Z,O,e)=>{"use strict";e.d(O,{L:()=>t});var t=(n=>(n.Field="field",n.Text="text",n.Skip="skip",n))(t||{})},40400:(Z,O,e)=>{"use strict";e.d(O,{CQ:()=>i,k8:()=>s,zj:()=>l});var t=e(24699),n=e(21830),l=(f=>(f.CloudAlerting="cloud-alerting",f.UnifiedAlerting="unified-alerting",f.Dashboard="dashboard",f.Explore="explore",f.Correlations="correlations",f.Unknown="unknown",f.PanelEditor="panel-editor",f.PanelViewer="panel-viewer",f))(l||{});class s extends t.Sg{constructor(){super(...arguments),this._extensionConfigs=[]}init(c){}setRootPage(c){return this.root=c,this}setComponentsFromLegacyExports(c){if(c.ConfigCtrl&&(this.angularConfigCtrl=c.ConfigCtrl),this.meta&&this.meta.includes){for(const o of this.meta.includes)if(o.type===t.$_.page&&o.component&&!c[o.component]){console.warn("App Page uses unknown component: ",o.component,this.meta);continue}}}get extensionConfigs(){return this._extensionConfigs}configureExtensionLink(c){return this._extensionConfigs.push({...c,type:n.D.link}),this}}var i=(f=>(f.alpha="alpha",f.beta="beta",f))(i||{})},66847:(Z,O,e)=>{"use strict";e.d(O,{Hx:()=>t,Z3:()=>n,bm:()=>l});const t=0,n=100,l="SAML"},29431:(Z,O,e)=>{"use strict";e.d(O,{m:()=>t});var t=(n=>(n[n.Off=0]="Off",n[n.Crosshair=1]="Crosshair",n[n.Tooltip=2]="Tooltip",n))(t||{})},49922:(Z,O,e)=>{"use strict";e.d(O,{Gl:()=>l,Gu:()=>t,dC:()=>n,fQ:()=>s});var t=(i=>(i.NotStarted="NotStarted",i.Loading="Loading",i.Streaming="Streaming",i.Done="Done",i.Error="Error",i))(t||{});const n=["graph","table","logs","trace","nodeGraph","flamegraph","rawPrometheus"];var l=(i=>(i.Null="null",i.Ignore="connected",i.AsZero="null as zero",i))(l||{});const s=i=>Boolean(i)},14582:(Z,O,e)=>{"use strict";e.d(O,{Ls:()=>l,M5:()=>n,fS:()=>t,rN:()=>s});var t=(i=>(i.time="time",i.number="number",i.string="string",i.boolean="boolean",i.trace="trace",i.geo="geo",i.enum="enum",i.other="other",i.frame="frame",i))(t||{});const n="Value",l="Time",s="Metric"},88432:(Z,O,e)=>{"use strict";e.d(O,{P:()=>t});var t=(n=>(n.TimeSeriesWide="timeseries-wide",n.TimeSeriesLong="timeseries-long",n.TimeSeriesMany="timeseries-many",n.TimeSeriesMulti="timeseries-multi",n.DirectoryListing="directory-listing",n.HeatmapRows="heatmap-rows",n.HeatmapCells="heatmap-cells",n.Histogram="histogram",n))(t||{})},28151:(Z,O,e)=>{"use strict";e.d(O,{Eu:()=>n,L8:()=>l,n1:()=>t,o3:()=>s});var t=(i=>(i.Datasource="Datasource",i.Correlations="Correlations",i))(t||{}),n=(i=>(i.Regex="regex",i.Logfmt="logfmt",i))(n||{}),l=(i=>(i.Series="series",i.Field="field",i.Fields="fields",i.Value="value",i.BuiltIn="built-in",i.Template="template",i))(l||{}),s=(i=>(i.Values="values",i))(s||{})},7238:(Z,O,e)=>{"use strict";e.d(O,{MF:()=>s,Ru:()=>i,eA:()=>f,hf:()=>l,iL:()=>c});var t=e(77345),n=e(24699);class l extends n.Sg{constructor(m){super(),this.DataSourceClass=m,this.components={}}setConfigEditor(m){return this.components.ConfigEditor=m,this}setConfigCtrl(m){return this.angularConfigCtrl=m,this}setQueryCtrl(m){return this.components.QueryCtrl=m,this}setAnnotationQueryCtrl(m){return this.components.AnnotationsQueryCtrl=m,this}setQueryEditor(m){return this.components.QueryEditor=m,this}setExploreQueryField(m){return this.components.ExploreQueryField=m,this}setExploreMetricsQueryField(m){return this.components.ExploreMetricsQueryField=m,this}setExploreLogsQueryField(m){return this.components.ExploreLogsQueryField=m,this}setQueryEditorHelp(m){return this.components.QueryEditorHelp=m,this}setExploreStartPage(m){return this.setQueryEditorHelp(m)}setVariableQueryEditor(m){return this.components.VariableQueryEditor=m,this}setMetadataInspector(m){return this.components.MetadataInspector=m,this}setComponentsFromLegacyExports(m){this.angularConfigCtrl=m.ConfigCtrl,this.components.QueryCtrl=m.QueryCtrl,this.components.AnnotationsQueryCtrl=m.AnnotationsQueryCtrl,this.components.ExploreQueryField=m.ExploreQueryField,this.components.QueryEditor=m.QueryEditor,this.components.QueryEditorHelp=m.QueryEditorHelp,this.components.VariableQueryEditor=m.VariableQueryEditor}}class s{constructor(m){this.name=m.name,this.id=m.id,this.type=m.type,this.meta=m.meta,this.cachingConfig=m.cachingConfig,this.uid=m.uid}getRef(){return{type:this.type,uid:this.uid}}}var i=(o=>(o.Logs="Logs",o.Metrics="Metrics",o.Tracing="Tracing",o))(i||{}),f=(o=>(o.Cancelled="cancelled",o.Timeout="timeout",o.Unknown="unknown",o))(f||{});class c{}c=(0,t.s)(c),s=(0,t.s)(s)},93893:()=>{"use strict"},21921:()=>{"use strict"},66926:(Z,O,e)=>{"use strict";e.d(O,{R:()=>n,S:()=>t});var t=(l=>(l.Thresholds="thresholds",l.PaletteClassic="palette-classic",l.PaletteSaturated="palette-saturated",l.ContinuousGrYlRd="continuous-GrYlRd",l.ContinuousRdYlGr="continuous-RdYlGr",l.ContinuousBlYlRd="continuous-BlYlRd",l.ContinuousYlRd="continuous-YlRd",l.ContinuousBlPu="continuous-BlPu",l.ContinuousYlBl="continuous-YlBl",l.ContinuousBlues="continuous-blues",l.ContinuousReds="continuous-reds",l.ContinuousGreens="continuous-greens",l.ContinuousPurples="continuous-purples",l.Fixed="fixed",l))(t||{});const n="gray"},68061:(Z,O,e)=>{"use strict";e.d(O,{Y4:()=>t,qb:()=>l,v3:()=>n});function t(s){return i=>i.__systemRef===s}const n=s=>typeof s?.__systemRef=="string";var l=(s=>(s.Unit="unit",s.Min="min",s.Max="max",s.Decimals="decimals",s.DisplayName="displayName",s.NoValue="noValue",s.Thresholds="thresholds",s.Mappings="mappings",s.Links="links",s.Color="color",s.Filterable="filterable",s))(l||{})},88723:()=>{"use strict"},45072:()=>{"use strict"},9785:()=>{"use strict"},43565:(Z,O,e)=>{"use strict";e.d(O,{Mo:()=>n,_S:()=>t,iJ:()=>l});const t={google:!0,microsoft:!0,github:!0,gitlab:!0,okta:!0,discord:!0,hipchat:!0,"google-hangouts-alt":!0,pagerduty:!0,line:!0,anchor:!0,"adjust-circle":!0,"angle-double-down":!0,"angle-double-right":!0,"angle-double-up":!0,"angle-down":!0,"angle-left":!0,"angle-right":!0,"angle-up":!0,apps:!0,arrow:!0,"arrow-down":!0,"arrow-from-right":!0,"arrow-left":!0,"arrow-random":!0,"arrow-right":!0,"arrow-to-right":!0,"arrow-up":!0,"arrows-h":!0,"arrows-v":!0,"expand-arrows":!0,at:!0,backward:!0,bars:!0,bell:!0,"bell-slash":!0,bolt:!0,book:!0,bookmark:!0,"book-open":!0,"brackets-curly":!0,bug:!0,building:!0,"calculator-alt":!0,"calendar-alt":!0,"calendar-slash":!0,camera:!0,capture:!0,"channel-add":!0,"chart-line":!0,check:!0,"check-circle":!0,"check-square":!0,circle:!0,"circle-mono":!0,"clipboard-alt":!0,"clock-nine":!0,cloud:!0,"cloud-download":!0,"cloud-upload":!0,"code-branch":!0,cog:!0,columns:!0,"comment-alt":!0,"comment-alt-message":!0,"comment-alt-share":!0,"comments-alt":!0,compass:!0,copy:!0,"corner-down-right-alt":!0,"create-dashboard":!0,"credit-card":!0,crosshair:!0,cube:!0,dashboard:!0,database:!0,"dice-three":!0,"document-info":!0,"download-alt":!0,draggabledots:!0,edit:!0,"ellipsis-v":!0,envelope:!0,"exchange-alt":!0,"exclamation-triangle":!0,"exclamation-circle":!0,"external-link-alt":!0,eye:!0,"eye-slash":!0,"ellipsis-h":!0,"fa fa-spinner":!0,favorite:!0,"file-alt":!0,"file-blank":!0,"file-copy-alt":!0,"file-download":!0,filter:!0,flip:!0,folder:!0,font:!0,fire:!0,"folder-open":!0,"folder-plus":!0,"folder-upload":!0,forward:!0,"gf-bar-alignment-after":!0,"gf-bar-alignment-before":!0,"gf-bar-alignment-center":!0,"gf-glue":!0,"gf-grid":!0,"gf-interpolation-linear":!0,"gf-interpolation-smooth":!0,"gf-interpolation-step-after":!0,"gf-interpolation-step-before":!0,"gf-landscape":!0,"gf-layout-simple":!0,"gf-logs":!0,"gf-movepane-left":!0,"gf-movepane-right":!0,"gf-portrait":!0,"gf-service-account":!0,"gf-show-context":!0,grafana:!0,"graph-bar":!0,"grafana-ml":!0,heart:!0,"heart-rate":!0,"heart-break":!0,history:!0,"history-alt":!0,home:!0,"home-alt":!0,"horizontal-align-center":!0,"horizontal-align-left":!0,"horizontal-align-right":!0,hourglass:!0,import:!0,info:!0,"info-circle":!0,k6:!0,"key-skeleton-alt":!0,keyboard:!0,"layer-group":!0,"layers-alt":!0,"library-panel":!0,"line-alt":!0,link:!0,"list-ui-alt":!0,"list-ul":!0,"list-ol":!0,lock:!0,"map-marker":!0,message:!0,minus:!0,"minus-circle":!0,"mobile-android":!0,monitor:!0,palette:!0,"panel-add":!0,"pathfinder-unite":!0,pause:!0,pen:!0,percentage:!0,play:!0,plug:!0,plus:!0,"plus-circle":!0,"plus-square":!0,power:!0,"presentation-play":!0,process:!0,"question-circle":!0,"record-audio":!0,repeat:!0,rocket:!0,"ruler-combined":!0,save:!0,search:!0,"search-minus":!0,"search-plus":!0,"share-alt":!0,shield:!0,"shield-exclamation":!0,signal:!0,signin:!0,signout:!0,sitemap:!0,slack:!0,"sliders-v-alt":!0,"sort-amount-down":!0,"sort-amount-up":!0,"square-shape":!0,star:!0,"step-backward":!0,"stopwatch-slash":!0,sync:!0,"sync-slash":!0,table:!0,"tag-alt":!0,"telegram-alt":!0,"text-fields":!0,"thumbs-up":!0,times:!0,"times-circle":!0,"toggle-on":!0,"toggle-off":!0,"trash-alt":!0,unlock:!0,upload:!0,user:!0,"users-alt":!0,"user-arrows":!0,"vertical-align-bottom":!0,"vertical-align-center":!0,"vertical-align-top":!0,"wrap-text":!0,rss:!0,x:!0};function n(s){return!s||typeof s!="string"?!1:s in t}function l(s){if(n(s))return s}},19108:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{AbstractLabelOperator:()=>c.K2,AlertState:()=>ie.Z,AnnotationEventFieldSource:()=>o.L,AppEvents:()=>k.SI,AppPlugin:()=>B.k8,CoreApp:()=>B.zj,CustomVariableSupport:()=>de.Mg,DEFAULT_SAML_NAME:()=>t.bm,DashboardCursorSync:()=>f.m,DataFrameType:()=>s.P,DataLinkConfigOrigin:()=>i.n1,DataQueryErrorType:()=>w.eA,DataSourceApi:()=>w.MF,DataSourcePlugin:()=>w.hf,DataSourceVariableSupport:()=>de.gv,DataTopic:()=>c.w5,DefaultTimeZone:()=>p.Ys,ExploreMode:()=>w.Ru,FALLBACK_COLOR:()=>K.R,FeatureState:()=>B.CQ,FieldColorModeId:()=>K.S,FieldConfigProperty:()=>M.qb,FieldType:()=>l.fS,GAUGE_DEFAULT_MAXIMUM:()=>t.Z3,GAUGE_DEFAULT_MINIMUM:()=>t.Hx,GrafanaPlugin:()=>I.Sg,GrafanaThemeType:()=>W.Q,LanguageProvider:()=>w.iL,LegacyGraphHoverClearEvent:()=>k.oi,LegacyGraphHoverEvent:()=>k.IA,LiveChannelConnectionState:()=>j.yS,LiveChannelEventType:()=>j.FU,LiveChannelScope:()=>j.z,LiveChannelType:()=>j.SK,LoadingState:()=>n.Gu,LogLevel:()=>m.in,LogsDedupDescription:()=>m.Uv,LogsDedupStrategy:()=>m.Y4,LogsMetaKind:()=>m.Ku,LogsSortOrder:()=>m.UV,LogsVolumeType:()=>m.o8,MappingType:()=>h.H,NavMenuItemType:()=>u.VO,NavSection:()=>u.yV,NullValueMode:()=>n.Gl,OrgRole:()=>U.B,PageLayoutType:()=>u.Qz,PanelEvents:()=>k.Kh,PluginErrorCode:()=>I.w2,PluginExtensionPoints:()=>ae.y,PluginExtensionTypes:()=>ae.D,PluginIncludeType:()=>I.$_,PluginSignatureStatus:()=>I.Xy,PluginSignatureType:()=>I._Z,PluginState:()=>I.BV,PluginType:()=>I.zV,SpecialValue:()=>D.U,SpecialValueMatch:()=>h.e,StandardVariableSupport:()=>de.v6,SupplementaryQueryType:()=>m.v8,SupportedTransformationTypes:()=>i.Eu,TIME_FORMAT:()=>p.T_,TIME_SERIES_METRIC_FIELD_NAME:()=>l.rN,TIME_SERIES_TIME_FIELD_NAME:()=>l.Ls,TIME_SERIES_VALUE_FIELD_NAME:()=>l.M5,ThresholdsMode:()=>E.H,VariableHide:()=>F.bU,VariableOrigin:()=>i.L8,VariableRefresh:()=>F.Bd,VariableSort:()=>F.$U,VariableSuggestionsScope:()=>i.o3,VariableSupportBase:()=>de.Tq,VariableSupportType:()=>de.j2,VisualizationSuggestionScore:()=>A._,VisualizationSuggestionsBuilder:()=>A.mi,VisualizationSuggestionsListAppender:()=>A.sf,VizOrientation:()=>A.wm,availableIconsIndex:()=>te._S,getDefaultRelativeTimeRange:()=>p.Rr,getDefaultTimeRange:()=>p.JK,getLogsVolumeAbsoluteRange:()=>m.a6,getLogsVolumeDataSourceInfo:()=>m.Js,hasLogsContextSupport:()=>m.Q4,hasLogsContextUiSupport:()=>m.xW,hasLogsVolumeSupport:()=>r.O,hasQueryExportSupport:()=>c.p,hasQueryImportSupport:()=>c.CZ,hasSupplementaryQuerySupport:()=>m.mN,isIconName:()=>te.Mo,isLiveChannelJoinEvent:()=>j.mx,isLiveChannelLeaveEvent:()=>j.gH,isLiveChannelMessageEvent:()=>j.RL,isLiveChannelStatusEvent:()=>j.se,isLogsVolumeLimited:()=>m.FP,isSystemOverride:()=>M.v3,isSystemOverrideWithRef:()=>M.Y4,isTruthy:()=>n.fQ,isUnsignedPluginSignature:()=>ce.x,isValidLiveChannelAddress:()=>j.nU,parseLiveChannelAddress:()=>j.H7,preferredVisualizationTypes:()=>n.dC,toIconName:()=>te.iJ,toLiveChannelId:()=>j.Aj});var t=e(66847),n=e(49922),l=e(14582),s=e(88432),i=e(28151),f=e(29431),c=e(62163),o=e(20442),m=e(90595),r=e(16642),u=e(24844),d=e(45671),g=e.n(d),X={};for(const _ in d)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType"].indexOf(_)<0&&(X[_]=()=>d[_]);e.d(O,X);var p=e(69311),E=e(24177),h=e(26031),a=e(93893),v=e.n(a),X={};for(const _ in a)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(_)<0&&(X[_]=()=>a[_]);e.d(O,X);var x=e(9785),y=e.n(x),X={};for(const _ in x)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(_)<0&&(X[_]=()=>x[_]);e.d(O,X);var C=e(17179),P=e.n(C),X={};for(const _ in C)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch"].indexOf(_)<0&&(X[_]=()=>C[_]);e.d(O,X);var D=e(16217),M=e(68061),b=e(72901),R=e.n(b),X={};for(const _ in b)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef"].indexOf(_)<0&&(X[_]=()=>b[_]);e.d(O,X);var B=e(40400),w=e(7238),A=e(20251),I=e(24699),F=e(22107),K=e(66926),W=e(55422),U=e(74020),N=e(88723),S=e.n(N),X={};for(const _ in N)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(_)<0&&(X[_]=()=>N[_]);e.d(O,X);var Y=e(68368),Q=e.n(Y),X={};for(const _ in Y)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(_)<0&&(X[_]=()=>Y[_]);e.d(O,X);var z=e(21921),G=e.n(z),X={};for(const _ in z)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole"].indexOf(_)<0&&(X[_]=()=>z[_]);e.d(O,X);var k=e(25318),j=e(62626),de=e(59670),ge=e(45072),re=e.n(ge),X={};for(const _ in ge)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType"].indexOf(_)<0&&(X[_]=()=>ge[_]);e.d(O,X);var ce=e(81850),ie=e(23309),fe=e(33559),Ce=e.n(fe),X={};for(const _ in fe)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(_)<0&&(X[_]=()=>fe[_]);e.d(O,X);var ee=e(14633),ne=e.n(ee),X={};for(const _ in ee)["default","isUnsignedPluginSignature","PluginExtensionTypes","PluginExtensionPoints","DEFAULT_SAML_NAME","GAUGE_DEFAULT_MAXIMUM","GAUGE_DEFAULT_MINIMUM","LoadingState","NullValueMode","isTruthy","preferredVisualizationTypes","FieldType","TIME_SERIES_METRIC_FIELD_NAME","TIME_SERIES_TIME_FIELD_NAME","TIME_SERIES_VALUE_FIELD_NAME","DataFrameType","DataLinkConfigOrigin","SupportedTransformationTypes","VariableOrigin","VariableSuggestionsScope","DashboardCursorSync","AbstractLabelOperator","DataTopic","hasQueryExportSupport","hasQueryImportSupport","AnnotationEventFieldSource","LogLevel","LogsDedupDescription","LogsDedupStrategy","LogsMetaKind","LogsSortOrder","LogsVolumeType","SupplementaryQueryType","getLogsVolumeAbsoluteRange","getLogsVolumeDataSourceInfo","hasLogsContextSupport","hasLogsContextUiSupport","hasSupplementaryQuerySupport","isLogsVolumeLimited","hasLogsVolumeSupport","NavMenuItemType","NavSection","PageLayoutType","DefaultTimeZone","TIME_FORMAT","getDefaultRelativeTimeRange","getDefaultTimeRange","ThresholdsMode","MappingType","SpecialValueMatch","SpecialValue","FieldConfigProperty","isSystemOverride","isSystemOverrideWithRef","AppPlugin","CoreApp","FeatureState","DataQueryErrorType","DataSourceApi","DataSourcePlugin","ExploreMode","LanguageProvider","VisualizationSuggestionScore","VisualizationSuggestionsBuilder","VisualizationSuggestionsListAppender","VizOrientation","GrafanaPlugin","PluginErrorCode","PluginIncludeType","PluginSignatureStatus","PluginSignatureType","PluginState","PluginType","VariableHide","VariableRefresh","VariableSort","FALLBACK_COLOR","FieldColorModeId","GrafanaThemeType","OrgRole","AppEvents","LegacyGraphHoverClearEvent","LegacyGraphHoverEvent","PanelEvents","LiveChannelConnectionState","LiveChannelEventType","LiveChannelScope","LiveChannelType","isLiveChannelJoinEvent","isLiveChannelLeaveEvent","isLiveChannelMessageEvent","isLiveChannelStatusEvent","isValidLiveChannelAddress","parseLiveChannelAddress","toLiveChannelId","CustomVariableSupport","DataSourceVariableSupport","StandardVariableSupport","VariableSupportBase","VariableSupportType","AlertState"].indexOf(_)<0&&(X[_]=()=>ee[_]);e.d(O,X);var te=e(43565),ae=e(21830)},1762:(Z,O,e)=>{"use strict";e.d(O,{l:()=>t});var t=(n=>(n.Grid="grid",n.List="list",n))(t||{})},25318:(Z,O,e)=>{"use strict";e.d(O,{IA:()=>i,Kh:()=>s,SI:()=>l,oi:()=>f});var t=e(39253),n=e(62316);const l={alertSuccess:(0,t.X)("alert-success"),alertWarning:(0,t.X)("alert-warning"),alertError:(0,t.X)("alert-error")},s={refresh:(0,t.X)("refresh"),componentDidMount:(0,t.X)("component-did-mount"),dataReceived:(0,t.X)("data-received"),dataError:(0,t.X)("data-error"),dataFramesReceived:(0,t.X)("data-frames-received"),dataSnapshotLoad:(0,t.X)("data-snapshot-load"),editModeInitialized:(0,t.X)("init-edit-mode"),initPanelActions:(0,t.X)("init-panel-actions"),initialized:(0,t.X)("panel-initialized"),panelTeardown:(0,t.X)("panel-teardown"),render:(0,t.X)("render")};class i extends n.R{}i.type="graph-hover";class f extends n.m{constructor(){super(...arguments),this.payload={point:{}}}}f.type="graph-hover-clear"},62626:(Z,O,e)=>{"use strict";e.d(O,{Aj:()=>u,FU:()=>s,H7:()=>m,RL:()=>o,SK:()=>n,gH:()=>c,mx:()=>f,nU:()=>r,se:()=>i,yS:()=>l,z:()=>t});var t=(d=>(d.DataSource="ds",d.Plugin="plugin",d.Grafana="grafana",d.Stream="stream",d))(t||{}),n=(d=>(d.DataStream="stream",d.DataFrame="frame",d.JSON="json",d))(n||{}),l=(d=>(d.Pending="pending",d.Connected="connected",d.Connecting="connecting",d.Disconnected="disconnected",d.Shutdown="shutdown",d.Invalid="invalid",d))(l||{}),s=(d=>(d.Status="status",d.Join="join",d.Leave="leave",d.Message="message",d))(s||{});function i(d){return d.type==="status"}function f(d){return d.type==="join"}function c(d){return d.type==="leave"}function o(d){return d.type==="message"}function m(d){if(d?.length){let g=d.trim().split("/");if(g.length>=3)return{scope:g[0],namespace:g[1],path:g.slice(2).join("/")}}}function r(d){return!!(d?.path&&d.namespace&&d.scope)}function u(d){if(!d.scope)return"";let g=d.scope;return!d.namespace||(g+="/"+d.namespace,!d.path)?g:g+"/"+d.path}},90595:(Z,O,e)=>{"use strict";e.d(O,{FP:()=>r,Js:()=>m,Ku:()=>l,Q4:()=>i,UV:()=>t.UV,Uv:()=>s,Y4:()=>t.Y4,a6:()=>o,in:()=>n,mN:()=>u,o8:()=>c,v8:()=>f,xW:()=>d});var t=e(40538),n=(g=>(g.emerg="critical",g.fatal="critical",g.alert="critical",g.crit="critical",g.critical="critical",g.warn="warning",g.warning="warning",g.err="error",g.eror="error",g.error="error",g.info="info",g.information="info",g.informational="info",g.notice="info",g.dbug="debug",g.debug="debug",g.trace="trace",g.unknown="unknown",g))(n||{}),l=(g=>(g[g.Number=0]="Number",g[g.String=1]="String",g[g.LabelsMap=2]="LabelsMap",g[g.Error=3]="Error",g))(l||{}),s=(g=>(g.none="No de-duplication",g.exact="De-duplication of successive lines that are identical, ignoring ISO datetimes.",g.numbers="De-duplication of successive lines that are identical when ignoring numbers, e.g., IP addresses, latencies.",g.signature="De-duplication of successive lines that have identical punctuation and whitespace.",g))(s||{});const i=g=>{if(!g)return!1;const p=g;return p.getLogRowContext!==void 0&&p.showContextToggle!==void 0};var f=(g=>(g.LogsVolume="LogsVolume",g.LogsSample="LogsSample",g))(f||{}),c=(g=>(g.FullRange="FullRange",g.Limited="Limited",g))(c||{});const o=(g,p)=>g[0].meta?.custom?.absoluteRange||p,m=g=>{const p=g[0]?.meta?.custom;return p&&p.datasourceName?{name:p.datasourceName}:null},r=g=>g[0]?.meta?.custom?.logsVolumeType==="Limited",u=(g,p)=>{if(!g)return!1;const E=g;return E.getDataProvider!==void 0&&E.getSupplementaryQuery!==void 0&&E.getSupportedSupplementaryQueryTypes().includes(p)},d=g=>g?g.getLogRowContextUi!==void 0:!1},16642:(Z,O,e)=>{"use strict";e.d(O,{O:()=>t});const t=n=>n.getLogsVolumeDataProvider!==void 0},24844:(Z,O,e)=>{"use strict";e.d(O,{Qz:()=>l,VO:()=>n,yV:()=>t});var t=(s=>(s.Core="core",s.Plugin="plugin",s.Config="config",s))(t||{}),n=(s=>(s.Section="section",s.Item="item",s))(n||{}),l=(s=>(s[s.Standard=0]="Standard",s[s.Canvas=1]="Canvas",s[s.Custom=2]="Custom",s))(l||{})},74020:(Z,O,e)=>{"use strict";e.d(O,{B:()=>t});var t=(n=>(n.Admin="Admin",n.Editor="Editor",n.Viewer="Viewer",n))(t||{})},20251:(Z,O,e)=>{"use strict";e.d(O,{_:()=>i,mi:()=>f,sf:()=>c,wm:()=>s});var t=e(82897),n=e.n(t),l=e(14582),s=(o=>(o.Auto="auto",o.Vertical="vertical",o.Horizontal="horizontal",o))(s||{}),i=(o=>(o[o.Best=100]="Best",o[o.Good=70]="Good",o[o.OK=50]="OK",o))(i||{});class f{constructor(m,r){this.list=[],this.data=m,this.panel=r,this.dataSummary=this.computeDataSummary()}getListAppender(m){return new c(this.list,m)}computeDataSummary(){const m=this.data?.series||[];let r=0,u=0,d=0,g=0,p=0,E=0,h;for(const a of m){g+=a.length,a.meta?.preferredVisualisationType&&(h=a.meta.preferredVisualisationType);for(const v of a.fields)switch(E++,v.type){case l.fS.number:r+=1;break;case l.fS.time:u+=1;break;case l.fS.string:d+=1;break}a.length>p&&(p=a.length)}return{numberFieldCount:r,timeFieldCount:u,stringFieldCount:d,rowCountTotal:g,rowCountMax:p,fieldCount:E,preferredVisualisationType:h,frameCount:m.length,hasData:g>0,hasTimeField:u>0,hasNumberField:r>0,hasStringField:d>0}}getList(){return this.list}}class c{constructor(m,r){this.list=m,this.defaults=r}append(m){this.list.push((0,t.defaultsDeep)(m,this.defaults))}}},24699:(Z,O,e)=>{"use strict";e.d(O,{$_:()=>f,BV:()=>t,Sg:()=>c,Xy:()=>l,_Z:()=>s,w2:()=>i,zV:()=>n});var t=(o=>(o.alpha="alpha",o.beta="beta",o.stable="stable",o.deprecated="deprecated",o))(t||{}),n=(o=>(o.panel="panel",o.datasource="datasource",o.app="app",o.renderer="renderer",o.secretsmanager="secretsmanager",o))(n||{}),l=(o=>(o.internal="internal",o.valid="valid",o.invalid="invalid",o.modified="modified",o.missing="missing",o))(l||{}),s=(o=>(o.grafana="grafana",o.commercial="commercial",o.community="community",o.private="private",o.core="core",o))(s||{}),i=(o=>(o.missingSignature="signatureMissing",o.invalidSignature="signatureInvalid",o.modifiedSignature="signatureModified",o))(i||{}),f=(o=>(o.dashboard="dashboard",o.page="page",o.panel="panel",o.datasource="datasource",o))(f||{});class c{addConfigPage(m){return this.configPages||(this.configPages=[]),this.configPages.push(m),this}setChannelSupport(m){return console.warn("[deprecation] plugin is using ignored option: setChannelSupport",this.meta),this}constructor(){this.meta={}}}},21830:(Z,O,e)=>{"use strict";e.d(O,{D:()=>t,y:()=>n});var t=(l=>(l.link="link",l))(t||{}),n=(l=>(l.DashboardPanelMenu="grafana/dashboard/panel/menu",l))(n||{})},81850:(Z,O,e)=>{"use strict";e.d(O,{x:()=>n});var t=e(24699);function n(l){return l&&l!==t.Xy.valid&&l!==t.Xy.internal}},62163:(Z,O,e)=>{"use strict";e.d(O,{CZ:()=>l,K2:()=>n,p:()=>s,w5:()=>t});var t=(i=>(i.Annotations="annotations",i))(t||{}),n=(i=>(i.Equal="Equal",i.NotEqual="NotEqual",i.EqualRegEx="EqualRegEx",i.NotEqualRegEx="NotEqualRegEx",i))(n||{});const l=i=>i.importFromAbstractQueries!==void 0,s=i=>i.exportToAbstractQueries!==void 0},45671:()=>{"use strict"},33559:()=>{"use strict"},22107:(Z,O,e)=>{"use strict";e.d(O,{$U:()=>n,Bd:()=>t,bU:()=>l});var t=(s=>(s[s.never=0]="never",s[s.onDashboardLoad=1]="onDashboardLoad",s[s.onTimeRangeChanged=2]="onTimeRangeChanged",s))(t||{}),n=(s=>(s[s.disabled=0]="disabled",s[s.alphabeticalAsc=1]="alphabeticalAsc",s[s.alphabeticalDesc=2]="alphabeticalDesc",s[s.numericalAsc=3]="numericalAsc",s[s.numericalDesc=4]="numericalDesc",s[s.alphabeticalCaseInsensitiveAsc=5]="alphabeticalCaseInsensitiveAsc",s[s.alphabeticalCaseInsensitiveDesc=6]="alphabeticalCaseInsensitiveDesc",s))(n||{}),l=(s=>(s[s.dontHide=0]="dontHide",s[s.hideLabel=1]="hideLabel",s[s.hideVariable=2]="hideVariable",s))(l||{})},55422:(Z,O,e)=>{"use strict";e.d(O,{Q:()=>t});var t=(n=>(n.Light="light",n.Dark="dark",n))(t||{})},24177:(Z,O,e)=>{"use strict";e.d(O,{H:()=>t});var t=(n=>(n.Absolute="absolute",n.Percentage="percentage",n))(t||{})},69311:(Z,O,e)=>{"use strict";e.d(O,{JK:()=>i,Rr:()=>f,T_:()=>s,Ys:()=>l});var t=e(40538),n=e(46519);const l=t.iT,s="YYYY-MM-DD HH:mm:ss";function i(){const c=(0,n.CQ)();return{from:(0,n.CQ)(c).subtract(6,"hour"),to:c,raw:{from:"now-6h",to:"now"}}}function f(){return{from:600,to:0}}},68368:()=>{"use strict"},16217:(Z,O,e)=>{"use strict";e.d(O,{U:()=>t});var t=(n=>(n.True="true",n.False="false",n.Null="null",n.Empty="empty",n))(t||{})},26031:(Z,O,e)=>{"use strict";e.d(O,{H:()=>t,e:()=>n});var t=(l=>(l.ValueToText="value",l.RangeToText="range",l.RegexToText="regex",l.SpecialValue="special",l))(t||{}),n=(l=>(l.True="true",l.False="false",l.Null="null",l.NaN="nan",l.NullAndNaN="null+nan",l.Empty="empty",l))(n||{})},59670:(Z,O,e)=>{"use strict";e.d(O,{Mg:()=>s,Tq:()=>n,gv:()=>i,j2:()=>t,v6:()=>l});var t=(f=>(f.Legacy="legacy",f.Standard="standard",f.Custom="custom",f.Datasource="datasource",f))(t||{});class n{}class l extends n{getType(){return"standard"}}class s extends n{getType(){return"custom"}}class i extends n{getType(){return"datasource"}}},72901:()=>{"use strict"},91171:(Z,O,e)=>{"use strict";e.d(O,{vo:()=>i,rt:()=>o,j:()=>c});var t=e(35363),n=e(78798),l=e(64140);class s{constructor(){this.properties=[]}addCustomEditor(r){return this.properties.push(r),this}getRegistry(){return new l.B(()=>this.properties)}getItems(){return this.properties}}class i extends s{addNumberInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("number").editor,editor:t.S.get("number").editor,process:n.Oh,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("slider").editor,editor:t.S.get("slider").editor,process:n.Oh,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("text").editor,editor:t.S.get("text").editor,process:n.op,shouldApply:r.shouldApply??(()=>!0),settings:r.settings||{}})}addSelect(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("select").editor,editor:t.S.get("select").editor,process:n.AE,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addRadio(r){return this.addCustomEditor({...r,id:r.path,override:t.S.get("radio").editor,editor:t.S.get("radio").editor,process:n.AE,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{options:[]}})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("boolean").editor,override:t.S.get("boolean").editor,process:n.W4,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("color").editor,override:t.S.get("color").editor,process:n.kG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("unit").editor,override:t.S.get("unit").editor,process:n.VB,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("field-name").editor,override:t.S.get("field-name").editor,process:n.kG,shouldApply:r.shouldApply?r.shouldApply:()=>!0,settings:r.settings||{}})}}class f{constructor(r){this.cfg=r,this.path="",this.id="nested-panel-options",this.name="nested",this.editor=()=>null,this.getBuilder=()=>this.cfg.build,this.getNestedValueAccess=u=>{const d=this.cfg.values;return d?d(u):{getValue:g=>u.getValue(`${this.path}.${g}`),onChange:(g,p)=>u.onChange(`${this.path}.${g}`,p)}},this.path=r.path,this.category=r.category,this.defaultValue=r.defaultValue}}function c(m){return m.id==="nested-panel-options"}class o extends s{addNestedOptions(r){const u=new f(r);return this.addCustomEditor(u)}addNumberInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("number").editor})}addSliderInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("slider").editor})}addTextInput(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("text").editor})}addStringArray(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("strings").editor})}addSelect(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("select").editor})}addMultiSelect(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("multi-select").editor})}addRadio(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("radio").editor})}addBooleanSwitch(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("boolean").editor})}addColorPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("color").editor,settings:r.settings||{}})}addTimeZonePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("timezone").editor,settings:r.settings||{}})}addUnitPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("unit").editor})}addFieldNamePicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("field-name").editor})}addDashboardPicker(r){return this.addCustomEditor({...r,id:r.path,editor:t.S.get("dashboard-uid").editor})}}},63279:(Z,O,e)=>{"use strict";e.d(O,{I:()=>l});var t=e(82897),n=e.n(t);function l(s){return typeof s=="number"?s:s===""||s===null||s===void 0||Array.isArray(s)?NaN:typeof s=="boolean"?s?1:0:(0,t.toNumber)(s)}},76553:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{moveItemImmutably:()=>n,sortValues:()=>i});var t=e(40538);function n(f,c,o){const m=[...f];return Array.prototype.splice.call(m,o,0,Array.prototype.splice.call(m,c,1)[0]),m}const l=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"}),s=(f,c)=>f-c;function i(f){return(c,o)=>{if(c===o)return 0;if(o==null||typeof o=="string"&&o.trim()==="")return-1;if(c==null||typeof c=="string"&&c?.trim()==="")return 1;let m=l.compare;return typeof c=="number"&&typeof o=="number"&&(m=s),f===t.As.Descending?m(o,c):m(c,o)}}},98082:(Z,O,e)=>{"use strict";e.d(O,{L:()=>n,n:()=>l});var t=e(64140),n=(s=>(s.Add="+",s.Subtract="-",s.Divide="/",s.Multiply="*",s))(n||{});const l=new t.B(()=>[{id:"+",name:"Add",operation:(s,i)=>s+i},{id:"-",name:"Subtract",operation:(s,i)=>s-i},{id:"*",name:"Multiply",operation:(s,i)=>s*i},{id:"/",name:"Divide",operation:(s,i)=>s/i}])},89230:(Z,O,e)=>{"use strict";e.d(O,{MJ:()=>v,QM:()=>g,uP:()=>u,x5:()=>r});var t=e(82897),n=e.n(t),l=e(26389),s=e.n(l),i=e(38685),f=e(16911),c=e(89890),o=e(14582),m=e(20112),r=(x=>(x[x.full=0]="full",x[x.name=1]="name",x[x.none=2]="none",x))(r||{});function u(x,y){return new g(y).readCSV(x)}var d=(x=>(x[x.Starting=0]="Starting",x[x.InHeader=1]="InHeader",x[x.ReadingRows=2]="ReadingRows",x))(d||{});class g{constructor(y){this.chunk=(C,P)=>{for(let D=0;D<C.data.length;D++){const M=C.data[D];if(M.length<1)continue;const b=M[0];if(b){if(b.startsWith("#")){const R=b.indexOf("#",2);if(R>0){const B=b.slice(1,R),w=B==="name";if(w||{unit:"#"}.hasOwnProperty(B)){this.state===2&&(this.current=new i.v({fields:[]}),this.data.push(this.current));const I=b.slice(R+1);if(w){this.current.addFieldFor(void 0,I);for(let F=1;F<M.length;F++)this.current.addFieldFor(void 0,M[F])}else{const{fields:F}=this.current;for(let K=0;K<F.length;K++){F[K].config||(F[K].config={});const W=F[K].config;W[B]=K===0?I:M[K]}}this.state=1;continue}}else if(this.state===0){this.state=1;continue}continue}if(this.state===0){if((0,f.LI)(b)===o.fS.string){for(const B of M)this.current.addFieldFor(void 0,B);this.state=1;continue}this.state=1}}if(this.state,this.state=2,M.length>this.current.fields.length){const{fields:R}=this.current;for(let B=R.length;B<M.length;B++)this.current.addFieldFor(M[B]);this.callback&&this.callback.onHeader(this.current.fields)}this.current.appendRow(M),this.callback&&this.callback.onRow(M)}},y||(y={}),this.config=y.config||{},this.callback=y.callback,this.current=new i.v({fields:[]}),this.state=0,this.data=[]}readCSV(y){this.current=new i.v({fields:[]}),this.data=[this.current];const C={...this.config,dynamicTyping:!1,skipEmptyLines:!0,comments:!1,chunk:this.chunk};return s().parse(y,C),this.data}}function p(x,y){if(x==null)return"";const C=x.toString();return C.includes('"')?y.quoteChar+C.replace(/"/gi,'""')+y.quoteChar:C.includes(`
`)||y.delimiter&&C.includes(y.delimiter)?y.quoteChar+C+y.quoteChar:C}function E(x,y){return x.display?C=>{const P=x.display(C);return p((0,m.zc)(P),y)}:C=>p(C,y)}function h(x,y,C){const P=x==="name",D=x==="type";for(const M of y){const b=M.config;if(P||D||b&&b.hasOwnProperty(x)){let R="#"+x+"#";for(let B=0;B<y.length;B++){B>0&&(R=R+C.delimiter);let w=y[B].name;D?w=y[B].type:P||(w=y[B].config[x]),w&&(R=R+p(w,C))}return R+C.newline}}return""}function a(){const x=["x","y"];return x.toLocaleString?x.toLocaleString().charAt(1):","}function v(x,y){if(!x)return"";y=(0,t.defaults)(y,{delimiter:a(),newline:`\r
`,quoteChar:'"',encoding:"",headerStyle:1,useExcelHeader:!1});let C=y.useExcelHeader?`sep=${y.delimiter}${y.newline}`:"";for(const P of x){const{fields:D}=P;if(D.length===0)continue;if(y.headerStyle===0)C=C+h("name",D,y)+h("type",D,y)+h("unit",D,y)+h("dateFormat",D,y);else if(y.headerStyle===1){for(let b=0;b<D.length;b++)b>0&&(C+=y.delimiter),C+=`"${(0,c.C)(D[b],P).replace(/"/g,'""')}"`;C+=y.newline}const M=D[0].values.length;if(M>0){const b=D.map(R=>E(R,y));for(let R=0;R<M;R++){for(let B=0;B<D.length;B++){B>0&&(C=C+y.delimiter);const w=D[B].values.get(R);w!==null&&(C=C+b[B](w))}C=C+y.newline}}C=C+y.newline}return C}},89029:(Z,O,e)=>{"use strict";e.d(O,{W:()=>l,_:()=>s});var t=e(83383),n=e(27677);const l={keepTime:"__url_time_range",timeRangeFrom:"__from",timeRangeTo:"__to",includeVars:"__all_variables",seriesName:"__series.name",fieldName:"__field.name",valueTime:"__value.time",valueNumeric:"__value.numeric",valueText:"__value.text",valueRaw:"__value.raw",valueCalc:"__value.calc"};function s(o){const{onClickFn:m,replaceVariables:r,link:u,scopedVars:d,range:g,field:p,internalLink:E}=o,h=f(u.internal?.query,d,r),a=f(u.internal?.panelsState,d,r),v=u.title?u.title:E.datasourceName;return{title:r(v,d),href:i(E.datasourceUid,h,g,a),onClick:m?()=>{m({datasourceUid:E.datasourceUid,query:h,panelsState:a,range:g})}:void 0,target:u?.targetBlank?"_blank":"_self",origin:p}}function i(o,m,r,u){return t.u.assureBaseUrl(`/explore?left=${encodeURIComponent((0,n.S)({range:r.raw,datasource:o,queries:[m],panelsState:u}))}`)}function f(o,m,r){if(!o)return o;if(typeof o=="string")return r(o,m);const u=JSON.parse(JSON.stringify(o));return c(u,m,r)}function c(o,m,r){for(const u of Object.keys(o))typeof o[u]=="string"?o[u]=r(o[u],m):typeof o[u]=="object"&&o[u]!==null&&(o[u]=c(o[u],m,r));return o}},5916:(Z,O,e)=>{"use strict";e.d(O,{BT:()=>i,HD:()=>d,Mf:()=>h,TX:()=>u,_R:()=>c,cv:()=>s,fd:()=>g,fi:()=>o,hz:()=>r,iU:()=>l,nx:()=>m,tp:()=>p,uw:()=>E,z_:()=>f});var t=e(82897),n=e.n(t);function l(a){return{uid:a.uid,type:a.type}}function s(a){return typeof a=="object"&&typeof a?.uid=="string"}function i(a){if(s(a))return a.uid;if((0,t.isString)(a))return a}const f=(a,v)=>x=>{g(a,v,x.currentTarget.value)},c=(a,v)=>x=>{p(a,v,x.currentTarget.value)},o=(a,v)=>x=>{E(a,v,x.currentTarget.value)},m=(a,v)=>x=>{p(a,v,x.value)},r=(a,v)=>x=>{p(a,v,x.currentTarget.checked)},u=(a,v)=>x=>{E(a,v,x.value)},d=(a,v)=>x=>{h(a,v)};function g(a,v,x){const y=a.options;a.onOptionsChange({...y,[v]:x})}const p=(a,v,x)=>{const y=a.options;a.onOptionsChange({...y,jsonData:{...y.jsonData,[v]:x}})},E=(a,v,x)=>{const y=a.options;a.onOptionsChange({...y,secureJsonData:{...y.secureJsonData?y.secureJsonData:{},[v]:x}})},h=(a,v)=>{const x=a.options;a.onOptionsChange({...x,secureJsonData:{...x.secureJsonData?x.secureJsonData:{},[v]:""},secureJsonFields:{...x.secureJsonFields,[v]:!1}})}},99227:(Z,O,e)=>{"use strict";e.d(O,{d:()=>n});const t={},n=(l,s,i)=>{let f=`[Deprecation warning] ${l}: ${s} is deprecated`;i&&(f+=`. Use ${i} instead`);const c=Date.now(),o=t[f];(!o||c-o>1e4)&&(console.warn(f),t[f]=c)}},80548:(Z,O,e)=>{"use strict";e.d(O,{x:()=>t});var t=(n=>(n[n.Transformations=0]="Transformations",n[n.FieldConfig=1]="FieldConfig",n[n.FieldConfigOverrides=2]="FieldConfigOverrides",n))(t||{})},72788:(Z,O,e)=>{"use strict";e.d(O,{H:()=>l,k:()=>n});var t=e(49922);function n({xField:s,yField:i,nullValueMode:f}){const c=s.values,o=i.values,m=c.length;if(o.length!==m)throw new Error("Unexpected field length");const r=f===t.Gl.Ignore,u=f===t.Gl.AsZero,d=[];for(let g=0;g<m;g++){const p=c.get(g);let E=o.get(g);if(E===null){if(r)continue;u&&(E=0)}p!==null&&d.push([p,E])}return d}function l(s,i){if(!i.from||!i.to||!s||s.length===0)return[];const f=i.from.valueOf(),c=i.to.valueOf(),o=s[0][1];return[[f,o],[c,o]]}},81102:(Z,O,e)=>{"use strict";e.d(O,{LH:()=>g.L,x5:()=>i.x5,QM:()=>i.QM,WC:()=>y.W,xV:()=>C.x,vo:()=>h.vo,HU:()=>b.HU,bA:()=>f.bA,zG:()=>p.z,rt:()=>h.rt,Bz:()=>n.B,Ar:()=>f.Ar,IX:()=>D.I,sq:()=>t,nk:()=>g.n,zd:()=>f.zd,lL:()=>f.lL,i6:()=>f.i6,Mi:()=>f.Mi,ZC:()=>r,Jb:()=>b.Jb,d9:()=>s.d,l3:()=>f.l3,FT:()=>c.FT,IU:()=>c.IU,aA:()=>c.aA,iU:()=>l.iU,BT:()=>l.BT,k8:()=>a.k,HE:()=>a.H,ZO:()=>f.ZO,jx:()=>f.jx,MT:()=>f.MT,e4:()=>u,dP:()=>o.d,fp:()=>d,cv:()=>l.cv,uT:()=>v.u,s2:()=>P.s,_N:()=>y._,VS:()=>c.VS,Hh:()=>m,_R:()=>l._R,hz:()=>l.hz,nx:()=>l.nx,z_:()=>l.z_,HD:()=>l.HD,fi:()=>l.fi,TX:()=>l.TX,J8:()=>c.J8,uP:()=>i.uP,O9:()=>o.O,S:()=>x.S,DA:()=>f.DA,$8:()=>f.$8,$u:()=>f.$u,j0:()=>f.j0,MJ:()=>i.MJ,Er:()=>E.E,tp:()=>l.tp,fd:()=>l.fd,Mf:()=>l.Mf,uw:()=>l.uw,Cj:()=>x.Cj,xc:()=>M.x});var t=e(76553),n=e(64140),l=e(5916),s=e(99227),i=e(89230),f=e(35864),c=e(15355),o=e(43211);const m=R=>Object.keys(R).reduce((B,w)=>(R[w]!==void 0&&(B[w]=R[w]),B),{}),r=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"],u=R=>{let B,w,A=Number.MAX_VALUE;for(let I=0;I<R.values.length;I++){const F=R.values.get(I);if(B!==void 0){const K=F-B;w===void 0&&(A=K),K<A&&(A=K)}B=F}return A},d=R=>{for(let B=0;B<R.values.length;B++){const w=R.values.get(B);if(w!=null){const A=w.toString();if(A.length===13&&A%1e3!==0)return!0}}return!1};var g=e(98082),p=e(5367),E=e(63134),h=e(91171),a=e(72788),v=e(83383),x=e(27677),y=e(89029),C=e(80548),P=e(77345),D=e(63279),M=e(83849),b=e(67008)},15355:(Z,O,e)=>{"use strict";e.d(O,{FT:()=>l,IU:()=>s,J8:()=>n,VS:()=>i,aA:()=>f});const t=/\b(\w+)(!?=~?)"([^"\n]*?)"/g;function n(c){const o={};return c.replace(t,(m,r,u,d)=>(o[r]=d,"")),o}function l(c){return c.reduce((o,m)=>{if(!m)throw new Error("Need parsed labels to find common labels.");return Object.keys(m).forEach(r=>{(o[r]===void 0||o[r]!==m[r])&&delete o[r]}),Object.keys(o).forEach(r=>{m[r]===void 0&&delete o[r]}),o},{...c[0]})}function s(c,o){const m={...c};return Object.keys(o).forEach(r=>{delete m[r]}),m}function i(c,o){if(!c)return!0;for(const[m,r]of Object.entries(c))if(!o||o[m]!==r)return!1;return!0}function f(c,o="",m){if(!c||Object.keys(c).length===0)return o;const u=Object.keys(c).sort().map(d=>`${d}="${c[d]}"`).join(", ");return m?u:["{",u,"}"].join("")}},83383:(Z,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(8928),n=e(27677);let l={appSubUrl:""},s,i;const f=d=>{try{return new URL(d)}catch{return}},c=d=>{const g=f(d);if(g&&g.origin!==window.location.origin)return d;const p=l.appSubUrl??"",E=p.endsWith("/")?1:0,h=d.startsWith("http");let a=p;return(!d.startsWith("/")||h)&&(a=`${window.location.origin}${p}`),d.length>0&&d.indexOf(a)===0?d.slice(a.length-E):d},o=d=>d.startsWith("/")?`${l.appSubUrl}${c(d)}`:d,u={initialize:d=>{l=d.config,s=d.getTimeRangeForUrl,i=d.getVariablesUrlParams},stripBaseFromUrl:c,assureBaseUrl:o,updateSearchParams:(d,g)=>{const p=new URLSearchParams(g);try{const E=new URL(d);return p.forEach((h,a)=>E.searchParams.set(a,h)),E.href}catch{const E=new URLSearchParams(d);return p.forEach((h,a)=>{E.set(a,h)}),"?"+E.toString()}},getTimeRangeUrlParams:()=>s?n.Cj.toUrlParams(s()):null,getVariablesUrlParams:d=>{if(!i)return null;const g=i(d);return n.Cj.toUrlParams(g)},getUrlForPartial:(d,g)=>{const p=n.Cj.parseKeyValue(d.search.startsWith("?")?d.search.substring(1):d.search);for(const E of Object.keys(g))g[E]===null||g[E]===void 0?delete p[E]:p[E]=g[E];return o(n.Cj.renderUrl(d.pathname,p))},processUrl:d=>l.disableSanitizeHtml?d:t.QX.sanitizeUrl(d)}},35864:(Z,O,e)=>{"use strict";e.d(O,{$8:()=>v,$u:()=>y,Ar:()=>r,DA:()=>a,MT:()=>h,Mi:()=>C,ZO:()=>o,bA:()=>u,i6:()=>p,j0:()=>x,jx:()=>m,l3:()=>P,lL:()=>g,zd:()=>d});var t=e(82897),n=e.n(t),l=e(14582),s=e(90595),i=e(40538),f=e(19695);const c=/(?:^|\s)([\w\(\)\[\]\{\}]+)=(""|(?:".*?[^\\]"|[^"\s]\S*))/;function o(D){if(!D)return s.in.unknown;let M=s.in.unknown,b;for(const R of Object.keys(s.in)){const w=new RegExp(`\\b${R}\\b`,"i").exec(D);w&&(b===void 0||w.index<b)&&(M=s.in[R],b=w.index)}return M}function m(D){const M=s.in[D.toString().toLowerCase()];return M||s.in.unknown}function r(D,M){const b=new f.G,R=D.fields[M];for(let B=0;B<R.values.length;B++){const w=R.values.get(M);b.buffer.push(o(w))}return{...D,fields:[...D.fields,{name:"LogLevel",type:l.fS.string,values:b,config:{}}]}}const u={JSON:{buildMatcher:D=>new RegExp(`(?:{|,)\\s*"${D}"\\s*:\\s*"?([\\d\\.]+|[^"]*)"?`),getFields:D=>{try{const M=JSON.parse(D);return Object.keys(M).map(b=>`"${b}":${JSON.stringify(M[b])}`)}catch{}return[]},getLabelFromField:D=>(D.match(/^"([^"]+)"\s*:/)||[])[1],getValueFromField:D=>(D.match(/:\s*(.*)$/)||[])[1],test:D=>{let M;try{M=JSON.parse(D)}catch{}return typeof M=="object"}},logfmt:{buildMatcher:D=>new RegExp(`(?:^|\\s)${(0,t.escapeRegExp)(D)}=("[^"]*"|\\S+)`),getFields:D=>{const M=[];return D.replace(new RegExp(c,"g"),b=>(M.push(b.trim()),"")),M},getLabelFromField:D=>(D.match(c)||[])[1],getValueFromField:D=>(D.match(c)||[])[2],test:D=>c.test(D)}};function d(D,M){const b=D.filter(w=>M.test(w.entry)),R=b.length,B=(0,t.countBy)(b,w=>{const I=w.entry.match(M);return I?I[1]:null});return E(B,R)}function g(D,M){const b=D.filter(w=>w.labels[M]!==void 0),R=b.length,B=(0,t.countBy)(b,w=>w.labels[M]);return E(B,R)}function p(D){const M=D.filter(R=>R!=null),b=(0,t.countBy)(M);return E(b,M.length)}const E=(D,M)=>(0,t.chain)(D).map((b,R)=>({count:b,value:R,proportion:b/M})).sortBy("count").reverse().value();function h(D){let M;try{u.JSON.test(D)&&(M=u.JSON)}catch{}return!M&&u.logfmt.test(D)&&(M=u.logfmt),M}const a=(D,M)=>D.timeEpochMs<M.timeEpochMs?-1:D.timeEpochMs>M.timeEpochMs?1:D.timeEpochNs<M.timeEpochNs?-1:D.timeEpochNs>M.timeEpochNs?1:0,v=(D,M)=>D.timeEpochMs>M.timeEpochMs?-1:D.timeEpochMs<M.timeEpochMs?1:D.timeEpochNs>M.timeEpochNs?-1:D.timeEpochNs<M.timeEpochNs?1:0,x=(D,M)=>{const b=D?y(D.rows,M):[];return D?{...D,rows:b}:{hasUniqueLabels:!1,rows:b}},y=(D,M)=>M===i.UV.Ascending?D.sort(a):D.sort(v),C=D=>D.labels.__error__?{hasError:!0,errorMessage:D.labels.__error__}:{hasError:!1},P=D=>D.replace(/\\r\\n|\\n|\\t|\\r/g,M=>M.slice(1)==="t"?"	":`
`)},77345:(Z,O,e)=>{"use strict";e.d(O,{s:()=>t});function t(n){return new Proxy(n,{apply(l,s,i){return(typeof Reflect>"u"||!Reflect.construct)&&alert("Browser is too old"),Reflect.construct(l,i,s.constructor)}})}},5367:(Z,O,e)=>{"use strict";e.d(O,{z:()=>t});var t=(n=>(n.id="id",n.title="title",n.subTitle="subtitle",n.mainStat="mainstat",n.secondaryStat="secondarystat",n.arc="arc__",n.icon="icon",n.color="color",n.source="source",n.target="target",n.detail="detail__",n))(t||{})},43211:(Z,O,e)=>{"use strict";e.d(O,{O:()=>t,d:()=>n});function t(l,s=0){if(Number.isInteger(l))return l;let i=10**s,f=l*i*(1+Number.EPSILON);return Math.round(f)/i}function n(l){return((""+l).split(".")[1]||"").length}},63134:(Z,O,e)=>{"use strict";e.d(O,{E:()=>t});const t=n=>({label:n,value:n})},27677:(Z,O,e)=>{"use strict";e.d(O,{Cj:()=>o,S:()=>m});/**
 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
 */function t(r,u){return u&&Object.keys(u).length>0&&(r+="?"+l(u)),r}function n(r,u){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,u?"%20":"+").replace(/[!'()*]/g,function(d){return"%"+d.charCodeAt(0).toString(16).toUpperCase()})}function l(r){const u=[],d=/\[\]$/,g=h=>Object.prototype.toString.call(h)==="[object Array]",p=(h,a)=>{if(a=typeof a=="function"?a():a===null||a===void 0?"":a,typeof a!="boolean")u[u.length]=n(h,!0)+"="+n(a,!0);else{const v=a?"":"="+n("false",!0);u[u.length]=n(h,!0)+v}},E=(h,a)=>{let v,x,y;if(h)if(g(a))for(v=0,x=a.length;v<x;v++)d.test(h)?p(h,a[v]):E(h,a[v]);else if(a&&String(a)==="[object Object]")for(y in a)E(h+"["+y+"]",a[y]);else p(h,a);else if(g(a))for(v=0,x=a.length;v<x;v++)p(a[v].name,a[v].value);else for(y in a)E(y,a[y]);return u};return E("",r).join("&")}function s(r,u){if(u!=null&&u!==""){const d=r.indexOf("?");d!==-1?r.length-d>1&&(r+="&"):r+="?",r+=u}return r}function i(){const u=window.location.search.substring(1).split("&"),d={};for(const g of u){const p=g.split("=");if(p.length>1){const E=decodeURIComponent(p[0]),h=decodeURIComponent(p[1]);E in d?d[E]=[...d[E],h]:d[E]=[h]}else if(p.length===1){const E=decodeURIComponent(p[0]);d[E]=!0}}return d}function f(r){const u={},d=(r||"").split("&");for(let g of d){let p,E,h;if(g&&(E=g=g.replace(/\+/g,"%20"),p=g.indexOf("="),p!==-1&&(E=g.substring(0,p),h=g.substring(p+1)),E=c(E),E!==void 0)){h=h!==void 0?c(h):!0;let a;typeof h=="string"&&h!==""?a=h==="true"||h==="false"?h==="true":h:a=h,u.hasOwnProperty(E)?Array.isArray(u[E])?u[E].push(h):u[E]=[u[E],isNaN(a)?h:a]:u[E]=isNaN(a)?h:a}}return u}function c(r){try{return decodeURIComponent(r)}catch{return}}const o={renderUrl:t,toUrlParams:l,appendQueryToUrl:s,getUrlSearchParams:i,parseKeyValue:f};function m(r,u){return u!==void 0&&console.warn("`compact` parameter is deprecated and will be removed in a future release"),JSON.stringify(r)}},67008:(Z,O,e)=>{"use strict";e.d(O,{HU:()=>f,Jb:()=>c,vh:()=>s});var t=e(58230),n=e(29076),l=e(26031);function s(m,r){for(const u of m)switch(u.type){case l.H.ValueToText:if(r==null)continue;const d=u.options[r];if(d)return d;break;case l.H.RangeToText:if(r==null)continue;const g=parseFloat(r);if(isNaN(g)||!isNaN(u.options.from)&&g<u.options.from||!isNaN(u.options.to)&&g>u.options.to)continue;return u.options.result;case l.H.RegexToText:if(r==null||typeof r!="string")continue;const h=(0,n.jO)(u.options.pattern);if(r.match(h)){const a={...u.options.result};return a.text!=null&&(a.text=r.replace(h,u.options.result.text||"")),a}case l.H.SpecialValue:switch(u.options.match){case l.e.Null:{if(r==null)return u.options.result;break}case l.e[NaN]:{if(isNaN(r))return u.options.result;break}case l.e.NullAndNaN:{if(isNaN(r)||r==null)return u.options.result;break}case l.e.True:{if(r===!0||r==="true")return u.options.result;break}case l.e.False:{if(r===!1||r==="false")return u.options.result;break}case l.e.Empty:{if(r==="")return u.options.result;break}}}return null}function i(m){return(typeof m=="number"||typeof m=="string"&&m.trim()!=="")&&!isNaN(m)}var f=(m=>(m[m.ValueToText=1]="ValueToText",m[m.RangeToText=2]="RangeToText",m))(f||{});function c(m,r){const u=[];let d=m.mappingType;if(m.mappingType||(m.valueMaps&&m.valueMaps.length?d=1:m.rangeMaps&&m.rangeMaps.length&&(d=2)),d===1)for(let g=0;g<m.valueMaps.length;g++){const p=m.valueMaps[g];u.push(o({...p,id:g,type:l.H.ValueToText},m.fieldConfig?.defaults?.thresholds||r))}else if(d===2)for(let g=0;g<m.rangeMaps.length;g++){const p=m.rangeMaps[g];u.push(o({...p,id:g,type:l.H.RangeToText},m.fieldConfig?.defaults?.thresholds||r))}return u}function o(m,r){const u={type:l.H.ValueToText,options:{}},d=[];let g;const p=parseFloat(m.text);if(r&&!isNaN(p)){const E=(0,t.m1)(p,r.steps);E&&E.color&&(g=E.color)}switch(m.type){case 1:case l.H.ValueToText:m.value!=null&&(m.value==="null"?d.push({type:l.H.SpecialValue,options:{match:l.e.Null,result:{text:m.text,color:g}}}):u.options[String(m.value)]={text:m.text,color:g});break;case 2:case l.H.RangeToText:m.from==="null"||m.to==="null"?d.push({type:l.H.SpecialValue,options:{match:l.e.Null,result:{text:m.text,color:g}}}):d.push({type:l.H.RangeToText,options:{from:+m.from,to:+m.to,result:{text:m.text,color:g}}});break}return Object.keys(u.options).length>0&&d.unshift(u),d[0]}},83849:(Z,O,e)=>{"use strict";e.d(O,{x:()=>i});var t=e(12877),n=e(25740),l=e(46978),s=e(82615);function i({whileLoading:f,source:c}){return(0,t.T)((0,n.H)(200).pipe((0,l.h)(f),(0,s.R)(c)),c)}},41024:(Z,O,e)=>{"use strict";e.d(O,{Cf:()=>t.Cf,FH:()=>t.FH,IR:()=>t.IR,QW:()=>t.QW,Qj:()=>t.Qj,SP:()=>t.SP,SR:()=>t.SR,Td:()=>t.Td,bn:()=>t.bn,br:()=>t.br,q2:()=>t.q2,vb:()=>t.vb,zc:()=>t.zc});var t=e(20112)},8428:(Z,O,e)=>{"use strict";e.d(O,{Aq:()=>n,Yh:()=>c,dT:()=>i,i7:()=>o});var t=e(20112);function n(m,r){const u=["","K","M","B","T"],d=(0,t.Qj)(1e3,u);return(g,p,E)=>{if(g==null)return{text:""};const h=g<0;h&&(g=Math.abs(g));const a=d(g,p,E);return r?a.suffix=a.suffix!==void 0?`${a.suffix}${m}`:void 0:a.prefix=m,h&&(a.prefix=`-${a.prefix?.length?a.prefix:""}`),a}}const l=["f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"],s=l.indexOf("");function i(m){const r=l.findIndex(u=>u.normalize("NFKD")===m.normalize("NFKD"));return r<0?0:r-s}const f=["","Ki","Mi","Gi","Ti","Pi","Ei","Zi","Yi"];function c(m,r=0){const u=f.map(d=>" "+d+m);return(0,t.Qj)(1024,u,r)}function o(m,r=0){const u=l.map(d=>" "+d+m);return(0,t.Qj)(1e3,u,s+r)}},20112:(Z,O,e)=>{"use strict";e.d(O,{IR:()=>ee,zc:()=>k,Cf:()=>Ve,QW:()=>rt,Td:()=>it,br:()=>Ce,SP:()=>te,Qj:()=>X,SR:()=>ae,vb:()=>_,FH:()=>re,bn:()=>ie,q2:()=>fe});var t=e(82897);function n(pe,Ie){return pe===null?{text:""}:{text:re(pe,Ie),suffix:"%"}}function l(pe,Ie){return pe===null?{text:""}:{text:re(100*pe,Ie),suffix:"%"}}function s(pe,Ie){if(pe==null)return{text:""};const We=i(pe,Ie);return We.text.substring(0,1)==="-"?We.text="-0x"+We.text.substring(1):We.text="0x"+We.text,We}function i(pe,Ie){return pe==null?{text:""}:{text:parseFloat(re(pe,Ie)).toString(16).toUpperCase()}}function f(pe,Ie){return pe==null?{text:""}:{text:pe.toExponential(Ie??void 0)}}var c=e(38849),o=e(47513),m=e(46519),r=(pe=>(pe.Year="year",pe.Month="month",pe.Week="week",pe.Day="day",pe.Hour="hour",pe.Minute="minute",pe.Second="second",pe.Millisecond="millisecond",pe))(r||{});const u=["year","month","week","day","hour","minute","second","millisecond"],d={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001};function g(pe,Ie){return pe===null?{text:""}:Math.abs(pe)<1e3?{text:re(pe,Ie),suffix:" ns"}:Math.abs(pe)<1e6?ie(pe/1e3,Ie," \xB5s"):Math.abs(pe)<1e9?ie(pe/1e6,Ie," ms"):Math.abs(pe)<6e10?ie(pe/1e9,Ie," s"):Math.abs(pe)<36e11?ie(pe/6e10,Ie," min"):Math.abs(pe)<864e11?ie(pe/36e11,Ie," hour"):ie(pe/864e11,Ie," day")}function p(pe,Ie){return pe===null?{text:""}:Math.abs(pe)<1e3?{text:re(pe,Ie),suffix:" \xB5s"}:Math.abs(pe)<1e6?ie(pe/1e3,Ie," ms"):ie(pe/1e6,Ie," s")}function E(pe,Ie,We){return pe===null?{text:""}:Math.abs(pe)<1e3?{text:re(pe,Ie),suffix:" ms"}:Math.abs(pe)<6e4?ie(pe/1e3,Ie," s"):Math.abs(pe)<36e5?ie(pe/6e4,Ie," min"):Math.abs(pe)<864e5?ie(pe/36e5,Ie," hour"):Math.abs(pe)<31536e6?ie(pe/864e5,Ie," day"):ie(pe/31536e6,Ie," year")}function h(pe,Ie){if(pe!=null&&Ie!==null&&Ie!==void 0)return pe-Ie}function a(pe,Ie){return pe===null?{text:""}:pe===0?{text:"0",suffix:" s"}:Math.abs(pe)<1e-6?ie(pe*1e9,Ie," ns"):Math.abs(pe)<.001?ie(pe*1e6,Ie," \xB5s"):Math.abs(pe)<1?ie(pe*1e3,Ie," ms"):Math.abs(pe)<60?{text:re(pe,Ie),suffix:" s"}:Math.abs(pe)<3600?ie(pe/60,Ie," min"):Math.abs(pe)<86400?ie(pe/3600,Ie," hour"):Math.abs(pe)<604800?ie(pe/86400,Ie," day"):Math.abs(pe)<31536e3?ie(pe/604800,Ie," week"):ie(pe/31556900,Ie," year")}function v(pe,Ie){return pe===null?{text:""}:Math.abs(pe)<60?{text:re(pe,Ie),suffix:" min"}:Math.abs(pe)<1440?ie(pe/60,Ie," hour"):Math.abs(pe)<10080?ie(pe/1440,Ie," day"):Math.abs(pe)<604800?ie(pe/10080,Ie," week"):ie(pe/525948,Ie," year")}function x(pe,Ie){return pe===null?{text:""}:Math.abs(pe)<24?{text:re(pe,Ie),suffix:" hour"}:Math.abs(pe)<168?ie(pe/24,Ie," day"):Math.abs(pe)<8760?ie(pe/168,Ie," week"):ie(pe/8760,Ie," year")}function y(pe,Ie){return pe===null?{text:""}:Math.abs(pe)<7?{text:re(pe,Ie),suffix:" day"}:Math.abs(pe)<365?ie(pe/7,Ie," week"):ie(pe/365,Ie," year")}function C(pe,Ie,We){if(pe===null)return{text:""};if(pe===0)return{text:"0",suffix:" "+We+"s"};if(pe<0){const et=C(-pe,Ie,We);return et.suffix||(et.suffix=""),et.suffix+=" ago",et}pe*=d[We]*1e3;const Je=[];let He=!1,Ae=0;Ie!=null&&(Ae=Ie);for(let et=0;et<u.length&&Ae>=0;et++){const _e=d[u[et]]*1e3,Se=pe/_e;if(Se>=1||He){He=!0;const Fe=Math.floor(Se),Xe=u[et]+(Fe!==1?"s":"");Je.push(Fe+" "+Xe),pe=pe%_e,Ae--}}return{text:Je.join(", ")}}function P(pe,Ie){if(pe===null)return{text:""};if(pe<1e3)return{text:(0,m.zh)(pe).format("SSS\\m\\s")};if(pe<6e4){let Ae="ss\\s:SSS\\m\\s";return Ie===0&&(Ae="ss\\s"),{text:(0,m.zh)(pe).format(Ae)}}if(pe<36e5){let Ae="mm\\m:ss\\s:SSS\\m\\s";return Ie===0?Ae="mm\\m":Ie===1&&(Ae="mm\\m:ss\\s"),{text:(0,m.zh)(pe).format(Ae)}}let We="mm\\m:ss\\s:SSS\\m\\s";const Je=`${("0"+Math.floor((0,m.Ks)(pe,"milliseconds").asHours())).slice(-2)}h`;return Ie===0?We="":Ie===1?We="mm\\m":Ie===2&&(We="mm\\m:ss\\s"),{text:We?`${Je}:${(0,m.zh)(pe).format(We)}`:Je}}function D(pe,Ie){return C(pe,Ie,"millisecond")}function M(pe,Ie){return C(pe,Ie,"second")}function b(pe){if(pe<0){const Ae=b(-pe);return Ae.suffix||(Ae.suffix=""),Ae.suffix+=" ago",Ae}const Ie=[],We=Math.floor(pe/3600),Je=Math.floor(pe%3600/60),He=Math.floor(pe%3600%60);return We>9?Ie.push(""+We):Ie.push("0"+We),Je>9?Ie.push(""+Je):Ie.push("0"+Je),He>9?Ie.push(""+He):Ie.push("0"+He),{text:Ie.join(":")}}function R(pe){if(pe<0){const He=R(-pe);return He.suffix||(He.suffix=""),He.suffix+=" ago",He}let Ie="";const We=Math.floor(pe/(24*3600));We>0&&(Ie=We+" d ");const Je=b(pe-We*24*3600);return{text:Ie+Je.text}}function B(pe,Ie){return a(pe/100,Ie)}function w(pe,Ie){return P(pe,Ie)}function A(pe,Ie){return P(pe*1e3,Ie)}function I(pe,Ie){return(We,Je,He,Ae)=>Ie&&(0,m.CQ)().isSame(We,"day")?{text:(0,c.dq)(We,{format:Ie,timeZone:Ae})}:{text:(0,c.dq)(We,{format:pe,timeZone:Ae})}}const F=I("YYYY-MM-DD HH:mm:ss"),K=I("YYYY-MM-DD HH:mm:ss","HH:mm:ss"),W=I("MM/DD/YYYY h:mm:ss a"),U=I("MM/DD/YYYY h:mm:ss a","h:mm:ss a");function N(){return I((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function S(){return I((0,o.Ji)({year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),(0,o.Ji)({hour:"2-digit",minute:"2-digit",second:"2-digit"}))}function Y(pe,Ie,We,Je,He){return{text:(0,c.dq)(pe,{format:He?o.U6.fullDateMS:o.U6.fullDate,timeZone:Je})}}function Q(pe,Ie,We,Je){return{text:(0,c.E8)(pe,{timeZone:Je})}}var z=e(8428);const G=()=>[{name:"Misc",formats:[{name:"Number",id:"none",fn:fe("")},{name:"String",id:"string",fn:_},{name:"short",id:"short",fn:X(1e3,[""," K"," Mil"," Bil"," Tri"," Quadr"," Quint"," Sext"," Sept"])},{name:"Percent (0-100)",id:"percent",fn:n},{name:"Percent (0.0-1.0)",id:"percentunit",fn:l},{name:"Humidity (%H)",id:"humidity",fn:fe("%H")},{name:"Decibel",id:"dB",fn:fe("dB")},{name:"Hexadecimal (0x)",id:"hex0x",fn:s},{name:"Hexadecimal",id:"hex",fn:i},{name:"Scientific notation",id:"sci",fn:f},{name:"Locale format",id:"locale",fn:te},{name:"Pixels",id:"pixel",fn:fe("px")}]},{name:"Acceleration",formats:[{name:"Meters/sec\xB2",id:"accMS2",fn:fe("m/sec\xB2")},{name:"Feet/sec\xB2",id:"accFS2",fn:fe("f/sec\xB2")},{name:"G unit",id:"accG",fn:fe("g")}]},{name:"Angle",formats:[{name:"Degrees (\xB0)",id:"degree",fn:fe("\xB0")},{name:"Radians",id:"radian",fn:fe("rad")},{name:"Gradian",id:"grad",fn:fe("grad")},{name:"Arc Minutes",id:"arcmin",fn:fe("arcmin")},{name:"Arc Seconds",id:"arcsec",fn:fe("arcsec")}]},{name:"Area",formats:[{name:"Square Meters (m\xB2)",id:"areaM2",fn:fe("m\xB2")},{name:"Square Feet (ft\xB2)",id:"areaF2",fn:fe("ft\xB2")},{name:"Square Miles (mi\xB2)",id:"areaMI2",fn:fe("mi\xB2")}]},{name:"Computation",formats:[{name:"FLOP/s",id:"flops",fn:(0,z.i7)("FLOPS")},{name:"MFLOP/s",id:"mflops",fn:(0,z.i7)("FLOPS",2)},{name:"GFLOP/s",id:"gflops",fn:(0,z.i7)("FLOPS",3)},{name:"TFLOP/s",id:"tflops",fn:(0,z.i7)("FLOPS",4)},{name:"PFLOP/s",id:"pflops",fn:(0,z.i7)("FLOPS",5)},{name:"EFLOP/s",id:"eflops",fn:(0,z.i7)("FLOPS",6)},{name:"ZFLOP/s",id:"zflops",fn:(0,z.i7)("FLOPS",7)},{name:"YFLOP/s",id:"yflops",fn:(0,z.i7)("FLOPS",8)}]},{name:"Concentration",formats:[{name:"parts-per-million (ppm)",id:"ppm",fn:fe("ppm")},{name:"parts-per-billion (ppb)",id:"conppb",fn:fe("ppb")},{name:"nanogram per cubic meter (ng/m\xB3)",id:"conngm3",fn:fe("ng/m\xB3")},{name:"nanogram per normal cubic meter (ng/Nm\xB3)",id:"conngNm3",fn:fe("ng/Nm\xB3")},{name:"microgram per cubic meter (\u03BCg/m\xB3)",id:"con\u03BCgm3",fn:fe("\u03BCg/m\xB3")},{name:"microgram per normal cubic meter (\u03BCg/Nm\xB3)",id:"con\u03BCgNm3",fn:fe("\u03BCg/Nm\xB3")},{name:"milligram per cubic meter (mg/m\xB3)",id:"conmgm3",fn:fe("mg/m\xB3")},{name:"milligram per normal cubic meter (mg/Nm\xB3)",id:"conmgNm3",fn:fe("mg/Nm\xB3")},{name:"gram per cubic meter (g/m\xB3)",id:"congm3",fn:fe("g/m\xB3")},{name:"gram per normal cubic meter (g/Nm\xB3)",id:"congNm3",fn:fe("g/Nm\xB3")},{name:"milligrams per decilitre (mg/dL)",id:"conmgdL",fn:fe("mg/dL")},{name:"millimoles per litre (mmol/L)",id:"conmmolL",fn:fe("mmol/L")}]},{name:"Currency",formats:[{name:"Dollars ($)",id:"currencyUSD",fn:(0,z.Aq)("$")},{name:"Pounds (\xA3)",id:"currencyGBP",fn:(0,z.Aq)("\xA3")},{name:"Euro (\u20AC)",id:"currencyEUR",fn:(0,z.Aq)("\u20AC")},{name:"Yen (\xA5)",id:"currencyJPY",fn:(0,z.Aq)("\xA5")},{name:"Rubles (\u20BD)",id:"currencyRUB",fn:(0,z.Aq)("\u20BD")},{name:"Hryvnias (\u20B4)",id:"currencyUAH",fn:(0,z.Aq)("\u20B4")},{name:"Real (R$)",id:"currencyBRL",fn:(0,z.Aq)("R$")},{name:"Danish Krone (kr)",id:"currencyDKK",fn:(0,z.Aq)("kr",!0)},{name:"Icelandic Kr\xF3na (kr)",id:"currencyISK",fn:(0,z.Aq)("kr",!0)},{name:"Norwegian Krone (kr)",id:"currencyNOK",fn:(0,z.Aq)("kr",!0)},{name:"Swedish Krona (kr)",id:"currencySEK",fn:(0,z.Aq)("kr",!0)},{name:"Czech koruna (czk)",id:"currencyCZK",fn:(0,z.Aq)("czk")},{name:"Swiss franc (CHF)",id:"currencyCHF",fn:(0,z.Aq)("CHF")},{name:"Polish Z\u0142oty (PLN)",id:"currencyPLN",fn:(0,z.Aq)("PLN")},{name:"Bitcoin (\u0E3F)",id:"currencyBTC",fn:(0,z.Aq)("\u0E3F")},{name:"Milli Bitcoin (\u0E3F)",id:"currencymBTC",fn:(0,z.Aq)("mBTC")},{name:"Micro Bitcoin (\u0E3F)",id:"currency\u03BCBTC",fn:(0,z.Aq)("\u03BCBTC")},{name:"South African Rand (R)",id:"currencyZAR",fn:(0,z.Aq)("R")},{name:"Indian Rupee (\u20B9)",id:"currencyINR",fn:(0,z.Aq)("\u20B9")},{name:"South Korean Won (\u20A9)",id:"currencyKRW",fn:(0,z.Aq)("\u20A9")},{name:"Indonesian Rupiah (Rp)",id:"currencyIDR",fn:(0,z.Aq)("Rp")},{name:"Philippine Peso (PHP)",id:"currencyPHP",fn:(0,z.Aq)("PHP")},{name:"Vietnamese Dong (VND)",id:"currencyVND",fn:(0,z.Aq)("\u0111",!0)}]},{name:"Data",formats:[{name:"bytes(IEC)",id:"bytes",fn:(0,z.Yh)("B")},{name:"bytes(SI)",id:"decbytes",fn:(0,z.i7)("B")},{name:"bits(IEC)",id:"bits",fn:(0,z.Yh)("b")},{name:"bits(SI)",id:"decbits",fn:(0,z.i7)("b")},{name:"kibibytes",id:"kbytes",fn:(0,z.Yh)("B",1)},{name:"kilobytes",id:"deckbytes",fn:(0,z.i7)("B",1)},{name:"mebibytes",id:"mbytes",fn:(0,z.Yh)("B",2)},{name:"megabytes",id:"decmbytes",fn:(0,z.i7)("B",2)},{name:"gibibytes",id:"gbytes",fn:(0,z.Yh)("B",3)},{name:"gigabytes",id:"decgbytes",fn:(0,z.i7)("B",3)},{name:"tebibytes",id:"tbytes",fn:(0,z.Yh)("B",4)},{name:"terabytes",id:"dectbytes",fn:(0,z.i7)("B",4)},{name:"pebibytes",id:"pbytes",fn:(0,z.Yh)("B",5)},{name:"petabytes",id:"decpbytes",fn:(0,z.i7)("B",5)}]},{name:"Data rate",formats:[{name:"packets/sec",id:"pps",fn:(0,z.i7)("p/s")},{name:"bytes/sec(IEC)",id:"binBps",fn:(0,z.Yh)("B/s")},{name:"bytes/sec(SI)",id:"Bps",fn:(0,z.i7)("B/s")},{name:"bits/sec(IEC)",id:"binbps",fn:(0,z.Yh)("b/s")},{name:"bits/sec(SI)",id:"bps",fn:(0,z.i7)("b/s")},{name:"kibibytes/sec",id:"KiBs",fn:(0,z.Yh)("B/s",1)},{name:"kibibits/sec",id:"Kibits",fn:(0,z.Yh)("b/s",1)},{name:"kilobytes/sec",id:"KBs",fn:(0,z.i7)("B/s",1)},{name:"kilobits/sec",id:"Kbits",fn:(0,z.i7)("b/s",1)},{name:"mebibytes/sec",id:"MiBs",fn:(0,z.Yh)("B/s",2)},{name:"mebibits/sec",id:"Mibits",fn:(0,z.Yh)("b/s",2)},{name:"megabytes/sec",id:"MBs",fn:(0,z.i7)("B/s",2)},{name:"megabits/sec",id:"Mbits",fn:(0,z.i7)("b/s",2)},{name:"gibibytes/sec",id:"GiBs",fn:(0,z.Yh)("B/s",3)},{name:"gibibits/sec",id:"Gibits",fn:(0,z.Yh)("b/s",3)},{name:"gigabytes/sec",id:"GBs",fn:(0,z.i7)("B/s",3)},{name:"gigabits/sec",id:"Gbits",fn:(0,z.i7)("b/s",3)},{name:"tebibytes/sec",id:"TiBs",fn:(0,z.Yh)("B/s",4)},{name:"tebibits/sec",id:"Tibits",fn:(0,z.Yh)("b/s",4)},{name:"terabytes/sec",id:"TBs",fn:(0,z.i7)("B/s",4)},{name:"terabits/sec",id:"Tbits",fn:(0,z.i7)("b/s",4)},{name:"pebibytes/sec",id:"PiBs",fn:(0,z.Yh)("B/s",5)},{name:"pebibits/sec",id:"Pibits",fn:(0,z.Yh)("b/s",5)},{name:"petabytes/sec",id:"PBs",fn:(0,z.i7)("B/s",5)},{name:"petabits/sec",id:"Pbits",fn:(0,z.i7)("b/s",5)}]},{name:"Date & time",formats:[{name:"Datetime ISO",id:"dateTimeAsIso",fn:F},{name:"Datetime ISO (No date if today)",id:"dateTimeAsIsoNoDateIfToday",fn:K},{name:"Datetime US",id:"dateTimeAsUS",fn:W},{name:"Datetime US (No date if today)",id:"dateTimeAsUSNoDateIfToday",fn:U},{name:"Datetime local",id:"dateTimeAsLocal",fn:N()},{name:"Datetime local (No date if today)",id:"dateTimeAsLocalNoDateIfToday",fn:S()},{name:"Datetime default",id:"dateTimeAsSystem",fn:Y},{name:"From Now",id:"dateTimeFromNow",fn:Q}]},{name:"Energy",formats:[{name:"Watt (W)",id:"watt",fn:(0,z.i7)("W")},{name:"Kilowatt (kW)",id:"kwatt",fn:(0,z.i7)("W",1)},{name:"Megawatt (MW)",id:"megwatt",fn:(0,z.i7)("W",2)},{name:"Gigawatt (GW)",id:"gwatt",fn:(0,z.i7)("W",3)},{name:"Milliwatt (mW)",id:"mwatt",fn:(0,z.i7)("W",-1)},{name:"Watt per square meter (W/m\xB2)",id:"Wm2",fn:fe("W/m\xB2")},{name:"Volt-Ampere (VA)",id:"voltamp",fn:(0,z.i7)("VA")},{name:"Kilovolt-Ampere (kVA)",id:"kvoltamp",fn:(0,z.i7)("VA",1)},{name:"Volt-Ampere reactive (VAr)",id:"voltampreact",fn:(0,z.i7)("VAr")},{name:"Kilovolt-Ampere reactive (kVAr)",id:"kvoltampreact",fn:(0,z.i7)("VAr",1)},{name:"Watt-hour (Wh)",id:"watth",fn:(0,z.i7)("Wh")},{name:"Watt-hour per Kilogram (Wh/kg)",id:"watthperkg",fn:(0,z.i7)("Wh/kg")},{name:"Kilowatt-hour (kWh)",id:"kwatth",fn:(0,z.i7)("Wh",1)},{name:"Kilowatt-min (kWm)",id:"kwattm",fn:(0,z.i7)("W-Min",1)},{name:"Ampere-hour (Ah)",id:"amph",fn:(0,z.i7)("Ah")},{name:"Kiloampere-hour (kAh)",id:"kamph",fn:(0,z.i7)("Ah",1)},{name:"Milliampere-hour (mAh)",id:"mamph",fn:(0,z.i7)("Ah",-1)},{name:"Joule (J)",id:"joule",fn:(0,z.i7)("J")},{name:"Electron volt (eV)",id:"ev",fn:(0,z.i7)("eV")},{name:"Ampere (A)",id:"amp",fn:(0,z.i7)("A")},{name:"Kiloampere (kA)",id:"kamp",fn:(0,z.i7)("A",1)},{name:"Milliampere (mA)",id:"mamp",fn:(0,z.i7)("A",-1)},{name:"Volt (V)",id:"volt",fn:(0,z.i7)("V")},{name:"Kilovolt (kV)",id:"kvolt",fn:(0,z.i7)("V",1)},{name:"Millivolt (mV)",id:"mvolt",fn:(0,z.i7)("V",-1)},{name:"Decibel-milliwatt (dBm)",id:"dBm",fn:(0,z.i7)("dBm")},{name:"Ohm (\u03A9)",id:"ohm",fn:(0,z.i7)("\u03A9")},{name:"Kiloohm (k\u03A9)",id:"kohm",fn:(0,z.i7)("\u03A9",1)},{name:"Megaohm (M\u03A9)",id:"Mohm",fn:(0,z.i7)("\u03A9",2)},{name:"Farad (F)",id:"farad",fn:(0,z.i7)("F")},{name:"Microfarad (\xB5F)",id:"\xB5farad",fn:(0,z.i7)("F",-2)},{name:"Nanofarad (nF)",id:"nfarad",fn:(0,z.i7)("F",-3)},{name:"Picofarad (pF)",id:"pfarad",fn:(0,z.i7)("F",-4)},{name:"Femtofarad (fF)",id:"ffarad",fn:(0,z.i7)("F",-5)},{name:"Henry (H)",id:"henry",fn:(0,z.i7)("H")},{name:"Millihenry (mH)",id:"mhenry",fn:(0,z.i7)("H",-1)},{name:"Microhenry (\xB5H)",id:"\xB5henry",fn:(0,z.i7)("H",-2)},{name:"Lumens (Lm)",id:"lumens",fn:(0,z.i7)("Lm")}]},{name:"Flow",formats:[{name:"Gallons/min (gpm)",id:"flowgpm",fn:fe("gpm")},{name:"Cubic meters/sec (cms)",id:"flowcms",fn:fe("cms")},{name:"Cubic feet/sec (cfs)",id:"flowcfs",fn:fe("cfs")},{name:"Cubic feet/min (cfm)",id:"flowcfm",fn:fe("cfm")},{name:"Litre/hour",id:"litreh",fn:fe("L/h")},{name:"Litre/min (L/min)",id:"flowlpm",fn:fe("L/min")},{name:"milliLitre/min (mL/min)",id:"flowmlpm",fn:fe("mL/min")},{name:"Lux (lx)",id:"lux",fn:fe("lux")}]},{name:"Force",formats:[{name:"Newton-meters (Nm)",id:"forceNm",fn:(0,z.i7)("Nm")},{name:"Kilonewton-meters (kNm)",id:"forcekNm",fn:(0,z.i7)("Nm",1)},{name:"Newtons (N)",id:"forceN",fn:(0,z.i7)("N")},{name:"Kilonewtons (kN)",id:"forcekN",fn:(0,z.i7)("N",1)}]},{name:"Hash rate",formats:[{name:"hashes/sec",id:"Hs",fn:(0,z.i7)("H/s")},{name:"kilohashes/sec",id:"KHs",fn:(0,z.i7)("H/s",1)},{name:"megahashes/sec",id:"MHs",fn:(0,z.i7)("H/s",2)},{name:"gigahashes/sec",id:"GHs",fn:(0,z.i7)("H/s",3)},{name:"terahashes/sec",id:"THs",fn:(0,z.i7)("H/s",4)},{name:"petahashes/sec",id:"PHs",fn:(0,z.i7)("H/s",5)},{name:"exahashes/sec",id:"EHs",fn:(0,z.i7)("H/s",6)}]},{name:"Mass",formats:[{name:"milligram (mg)",id:"massmg",fn:(0,z.i7)("g",-1)},{name:"gram (g)",id:"massg",fn:(0,z.i7)("g")},{name:"pound (lb)",id:"masslb",fn:fe("lb")},{name:"kilogram (kg)",id:"masskg",fn:(0,z.i7)("g",1)},{name:"metric ton (t)",id:"masst",fn:fe("t")}]},{name:"Length",formats:[{name:"millimeter (mm)",id:"lengthmm",fn:(0,z.i7)("m",-1)},{name:"inch (in)",id:"lengthin",fn:fe("in")},{name:"feet (ft)",id:"lengthft",fn:fe("ft")},{name:"meter (m)",id:"lengthm",fn:(0,z.i7)("m")},{name:"kilometer (km)",id:"lengthkm",fn:(0,z.i7)("m",1)},{name:"mile (mi)",id:"lengthmi",fn:fe("mi")}]},{name:"Pressure",formats:[{name:"Millibars",id:"pressurembar",fn:(0,z.i7)("bar",-1)},{name:"Bars",id:"pressurebar",fn:(0,z.i7)("bar")},{name:"Kilobars",id:"pressurekbar",fn:(0,z.i7)("bar",1)},{name:"Pascals",id:"pressurepa",fn:(0,z.i7)("Pa")},{name:"Hectopascals",id:"pressurehpa",fn:fe("hPa")},{name:"Kilopascals",id:"pressurekpa",fn:fe("kPa")},{name:"Inches of mercury",id:"pressurehg",fn:fe('"Hg')},{name:"PSI",id:"pressurepsi",fn:X(1e3,["psi","ksi","Mpsi"])}]},{name:"Radiation",formats:[{name:"Becquerel (Bq)",id:"radbq",fn:(0,z.i7)("Bq")},{name:"curie (Ci)",id:"radci",fn:(0,z.i7)("Ci")},{name:"Gray (Gy)",id:"radgy",fn:(0,z.i7)("Gy")},{name:"rad",id:"radrad",fn:(0,z.i7)("rad")},{name:"Sievert (Sv)",id:"radsv",fn:(0,z.i7)("Sv")},{name:"milliSievert (mSv)",id:"radmsv",fn:(0,z.i7)("Sv",-1)},{name:"microSievert (\xB5Sv)",id:"radusv",fn:(0,z.i7)("Sv",-2)},{name:"rem",id:"radrem",fn:(0,z.i7)("rem")},{name:"Exposure (C/kg)",id:"radexpckg",fn:(0,z.i7)("C/kg")},{name:"roentgen (R)",id:"radr",fn:(0,z.i7)("R")},{name:"Sievert/hour (Sv/h)",id:"radsvh",fn:(0,z.i7)("Sv/h")},{name:"milliSievert/hour (mSv/h)",id:"radmsvh",fn:(0,z.i7)("Sv/h",-1)},{name:"microSievert/hour (\xB5Sv/h)",id:"radusvh",fn:(0,z.i7)("Sv/h",-2)}]},{name:"Rotational Speed",formats:[{name:"Revolutions per minute (rpm)",id:"rotrpm",fn:fe("rpm")},{name:"Hertz (Hz)",id:"rothz",fn:(0,z.i7)("Hz")},{name:"Radians per second (rad/s)",id:"rotrads",fn:fe("rad/s")},{name:"Degrees per second (\xB0/s)",id:"rotdegs",fn:fe("\xB0/s")}]},{name:"Temperature",formats:[{name:"Celsius (\xB0C)",id:"celsius",fn:fe("\xB0C")},{name:"Fahrenheit (\xB0F)",id:"fahrenheit",fn:fe("\xB0F")},{name:"Kelvin (K)",id:"kelvin",fn:fe("K")}]},{name:"Time",formats:[{name:"Hertz (1/s)",id:"hertz",fn:(0,z.i7)("Hz")},{name:"nanoseconds (ns)",id:"ns",fn:g},{name:"microseconds (\xB5s)",id:"\xB5s",fn:p},{name:"milliseconds (ms)",id:"ms",fn:E},{name:"seconds (s)",id:"s",fn:a},{name:"minutes (m)",id:"m",fn:v},{name:"hours (h)",id:"h",fn:x},{name:"days (d)",id:"d",fn:y},{name:"duration (ms)",id:"dtdurationms",fn:D},{name:"duration (s)",id:"dtdurations",fn:M},{name:"duration (hh:mm:ss)",id:"dthms",fn:b},{name:"duration (d hh:mm:ss)",id:"dtdhms",fn:R},{name:"Timeticks (s/100)",id:"timeticks",fn:B},{name:"clock (ms)",id:"clockms",fn:w},{name:"clock (s)",id:"clocks",fn:A}]},{name:"Throughput",formats:[{name:"counts/sec (cps)",id:"cps",fn:ae("c/s")},{name:"ops/sec (ops)",id:"ops",fn:ae("ops/s")},{name:"requests/sec (rps)",id:"reqps",fn:ae("req/s")},{name:"reads/sec (rps)",id:"rps",fn:ae("rd/s")},{name:"writes/sec (wps)",id:"wps",fn:ae("wr/s")},{name:"I/O ops/sec (iops)",id:"iops",fn:ae("io/s")},{name:"counts/min (cpm)",id:"cpm",fn:ae("c/m")},{name:"ops/min (opm)",id:"opm",fn:ae("ops/m")},{name:"requests/min (rpm)",id:"reqpm",fn:ae("req/m")},{name:"reads/min (rpm)",id:"rpm",fn:ae("rd/m")},{name:"writes/min (wpm)",id:"wpm",fn:ae("wr/m")}]},{name:"Velocity",formats:[{name:"meters/second (m/s)",id:"velocityms",fn:fe("m/s")},{name:"kilometers/hour (km/h)",id:"velocitykmh",fn:fe("km/h")},{name:"miles/hour (mph)",id:"velocitymph",fn:fe("mph")},{name:"knot (kn)",id:"velocityknot",fn:fe("kn")}]},{name:"Volume",formats:[{name:"millilitre (mL)",id:"mlitre",fn:(0,z.i7)("L",-1)},{name:"litre (L)",id:"litre",fn:(0,z.i7)("L")},{name:"cubic meter",id:"m3",fn:fe("m\xB3")},{name:"Normal cubic meter",id:"Nm3",fn:fe("Nm\xB3")},{name:"cubic decimeter",id:"dm3",fn:fe("dm\xB3")},{name:"gallons",id:"gallons",fn:fe("gal")}]},{name:"Boolean",formats:[{name:"True / False",id:"bool",fn:ee("True","False")},{name:"Yes / No",id:"bool_yes_no",fn:ee("Yes","No")},{name:"On / Off",id:"bool_on_off",fn:ee("On","Off")}]}];function k(pe){return`${pe.prefix??""}${pe.text}${pe.suffix??""}`}let j=[];const de={};let ge=!1;function re(pe,Ie){if(pe===null)return"";if(pe===Number.NEGATIVE_INFINITY||pe===Number.POSITIVE_INFINITY)return pe.toLocaleString();if(Ie==null&&(Ie=ce(pe)),pe===0)return pe.toFixed(Ie);const We=Ie?Math.pow(10,Math.max(0,Ie)):1,Je=String(Math.round(pe*We)/We);if(Je.indexOf("e")!==-1||pe===0)return Je;const He=Je.indexOf("."),Ae=He===-1?0:Je.length-He-1;return Ae<Ie?(Ae?Je:Je+".")+String(We).slice(1,Ie-Ae+1):Je}function ce(pe){const Ie=Math.abs(pe);let Je=-Math.floor(Math.log(Ie)/Math.LN10)+1;const He=Math.pow(10,-Je);return Ie/He>2.25&&++Je,pe%1===0&&(Je=0),Math.max(0,Je)}function ie(pe,Ie,We){return{text:re(pe,Ie),suffix:We}}function fe(pe,Ie){return(We,Je)=>{if(We===null)return{text:""};const He=re(We,Je);return pe?Ie?{text:He,prefix:pe}:{text:He,suffix:" "+pe}:{text:He}}}function Ce(pe){return pe&&pe.startsWith("bool")}function ee(pe,Ie){return We=>({text:We?pe:Ie})}const ne=(pe,Ie)=>Math.log10(Ie)/Math.log10(pe);function X(pe,Ie,We=0){return(Je,He)=>{if(Je==null)return{text:""};if(Je===Number.NEGATIVE_INFINITY||Je===Number.POSITIVE_INFINITY||isNaN(Je))return{text:Je.toLocaleString()};const Ae=Je===0?0:Math.floor(ne(pe,Math.abs(Je))),et=Ie[(0,t.clamp)(We+Ae,0,Ie.length-1)];return{text:re(Je/pe**(0,t.clamp)(Ae,-We,Ie.length-We-1),He),suffix:et}}}function te(pe,Ie){return pe==null?{text:""}:{text:pe.toLocaleString(void 0,{maximumFractionDigits:Ie??void 0})}}function ae(pe){const We=X(1e3,["","K","M","B","T"]);return(Je,He,Ae)=>{if(Je===null)return{text:""};const et=We(Je,He,Ae);return et.suffix+=" "+pe,et}}function _(pe){return{text:`${pe}`}}function ve(){j=G();for(const pe of j)for(const Ie of pe.formats)de[Ie.id]=Ie.fn;[{from:"farenheit",to:"fahrenheit"}].forEach(pe=>{const Ie=de[pe.to];Ie&&(de[pe.from]=Ie)}),ge=!0}function Ve(pe){if(!pe)return fe("");ge||ve();const Ie=de[pe];if(!Ie&&pe){let We=pe.indexOf(":");if(We>0){const Je=pe.substring(0,We),He=pe.substring(We+1);if(Je==="prefix")return fe(He,!0);if(Je==="suffix")return fe(He,!1);if(Je==="time")return I(He);if(Je==="si"){const Ae=(0,z.dT)(He.charAt(0)),et=Ae===0?He:He.substring(1);return(0,z.i7)(et,Ae)}if(Je==="count")return ae(He);if(Je==="currency")return(0,z.Aq)(He);if(Je==="bool"){if(We=He.indexOf("/"),We>=0){const Ae=He.substring(0,We),et=He.substring(We+1);return ee(Ae,et)}return ee(He,"-")}}return fe(pe)}return Ie}function it(){return ge||ve(),de}function rt(){return ge||ve(),j.map(pe=>({text:pe.name,submenu:pe.formats.map(Ie=>({text:Ie.name,value:Ie.id}))}))}},52674:(Z,O,e)=>{"use strict";e.d(O,{s:()=>n});var t=e(20411);class n extends t.G{constructor(s){super(),this.field=s}get length(){return this.field.length}get(s){return+this.field.get(s)}}},30664:(Z,O,e)=>{"use strict";e.d(O,{r:()=>n});var t=e(49319);class n{constructor(s,i,f){this.left=s,this.right=i,this.operation=f}get length(){return this.left.length}get(s){return this.operation(this.left.get(s),this.right.get(s))}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}},98212:(Z,O,e)=>{"use strict";e.d(O,{d:()=>l});var t=e(20411),n=e(49319);class l extends t.G{constructor(i){super(),this.buffer=i.buffer||[],this.capacity=this.buffer.length,this.tail=i.append!=="head",this.index=0,this.add=this.getAddFunction(),i.capacity&&this.setCapacity(i.capacity)}getAddFunction(){return this.capacity>this.buffer.length?this.tail?i=>{this.buffer.push(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:i=>{this.buffer.unshift(i),this.buffer.length>=this.capacity&&(this.add=this.getAddFunction())}:this.tail?i=>{this.buffer[this.index]=i,this.index=(this.index+1)%this.buffer.length}:i=>{let f=this.index-1;f<0&&(f=this.buffer.length-1),this.buffer[f]=i,this.index=f}}setCapacity(i){if(this.capacity===i)return;const f=this.toArray();if(i>this.length)this.buffer=f;else if(i<this.capacity){const c=this.length-i;this.tail?this.buffer=f.slice(c,f.length):this.buffer=f.slice(0,f.length-c)}this.capacity=i,this.index=0,this.add=this.getAddFunction()}setAppendMode(i){const f=i!=="head";f!==this.tail&&(this.buffer=this.toArray().reverse(),this.index=0,this.tail=f,this.add=this.getAddFunction())}reverse(){this.buffer.reverse()}get(i){return this.buffer[(i+this.index)%this.buffer.length]}set(i,f){this.buffer[(i+this.index)%this.buffer.length]=f}get length(){return this.buffer.length}toArray(){return(0,n.n)(this)}toJSON(){return(0,n.n)(this)}}},1473:(Z,O,e)=>{"use strict";e.d(O,{u:()=>t});class t{constructor(l,s){this.value=l,this.len=s}get length(){return this.len}get(l){return this.value}toArray(){return new Array(this.length).fill(this.value)}toJSON(){return this.toArray()}}},20411:(Z,O,e)=>{"use strict";e.d(O,{G:()=>n,s:()=>l});var t=e(49319);class n{*iterator(){for(let i=0;i<this.length;i++)yield this.get(i)}[Symbol.iterator](){return this.iterator()}forEach(i){return l(this).forEach(i)}map(i){return l(this).map(i)}filter(i){return l(this).filter(i)}toArray(){return(0,t.n)(this)}toJSON(){return this.toArray()}}function l(s){return{*[Symbol.iterator](){for(let i=0;i<s.length;i++)yield s.get(i)},forEach(i){for(let f=0;f<s.length;f++)i(s.get(f))},map(i){const f=[];for(let c=0;c<s.length;c++)f.push(i(s.get(c),c));return f},filter(i){const f=[];for(const c of this)i(c)&&f.push(c);return f}}}},44405:(Z,O,e)=>{"use strict";e.d(O,{r:()=>l});var t=e(14582),n=e(20411);class l extends n.G{constructor(i){super(),this.len=i}get length(){return this.len}get(i){return i}static newField(i){return{name:"",values:new l(i),type:t.fS.number,config:{min:0,max:i-1}}}}},78330:(Z,O,e)=>{"use strict";e.d(O,{l$:()=>n,Gt:()=>l.G,sq:()=>d.s,rM:()=>f.r,dV:()=>s.d,uI:()=>i.u,$Y:()=>r,rm:()=>u.r,oH:()=>c.o,sD:()=>m.s});var t=e(49319);class n{constructor(p=0){this.length=0,this.source=[],this.length=p}setLength(p){if(p>this.length)this.length=p;else if(p<this.length){const E=[];for(const h of this.source)if(E.push(h),h.end>p){h.end=p;break}this.source=E,this.length=p}}append(p){const E={start:this.length,end:this.length+p.length,values:p};return this.length=E.end,this.source.push(E),E}get(p){for(let E=0;E<this.source.length;E++){const h=this.source[E];if(p>=h.start&&p<h.end)return h.values.get(p-h.start)}}toArray(){return(0,t.n)(this)}toJSON(){return(0,t.n)(this)}}var l=e(19695),s=e(98212),i=e(1473),f=e(30664),c=e(12022),o=e(20112),m=e(20411);class r extends m.G{constructor(p,E){super(),this.source=p,this.formatter=E}get length(){return this.source.length}get(p){const E=this.source.get(p);return(0,o.zc)(this.formatter(E))}}var u=e(44405),d=e(52674)},75552:(Z,O,e)=>{"use strict";e.d(O,{Si:()=>n,ct:()=>t,fV:()=>l,mR:()=>s});var t=(i=>(i.DashboardView="dashboard-view",i.DataRequest="data-request",i))(t||{});const n=i=>Boolean(i.payload.page),l=i=>Boolean(i.payload.interactionName),s=i=>Boolean(i.payload.experimentId)},41818:(Z,O,e)=>{"use strict";e.d(O,{SZ:()=>c,ff:()=>f,r_:()=>s,sm:()=>i});var t=e(35645),n=e(37932),l=e(5494);const s=o=>{(0,l.RP)().addEvent({type:l.ee.MetaAnalytics,payload:o})},i=()=>{const o=n.E1.getLocation(),m=`${t.v.appSubUrl??""}${o.pathname}${o.search}${o.hash}`;(0,l.RP)().addEvent({type:l.ee.Pageview,payload:{page:m}})},f=(o,m)=>{(0,l.RP)().addEvent({type:l.ee.Interaction,payload:{interactionName:o,properties:m}})},c=(o,m,r)=>{(0,l.RP)().addEvent({type:l.ee.ExperimentView,payload:{experimentId:o,experimentGroup:m,experimentVariant:r}})}},53117:(Z,O,e)=>{"use strict";e.d(O,{q:()=>r});var t=e(68404),n=e(5916),l=e(81850),s=e(68183),i=e(53217),f=e(52081),c=e(51613),o=e(86647),m=e(22069);class r extends t.PureComponent{constructor(d){super(d),this.dataSourceSrv=(0,o.F)(),this.state={},this.onChange=(g,p)=>{if(p.action==="clear"&&this.props.onClear){this.props.onClear();return}const E=this.dataSourceSrv.getInstanceSettings(g.value);E&&(this.props.onChange(E),this.setState({error:void 0}))}}componentDidMount(){const{current:d}=this.props;this.dataSourceSrv.getInstanceSettings(d)||this.setState({error:"Could not find data source "+d})}getCurrentValue(){const{current:d,hideTextValue:g,noDefault:p}=this.props;if(!d&&p)return;const E=this.dataSourceSrv.getInstanceSettings(d);if(E)return{label:E.name.slice(0,37),value:E.uid,imgUrl:E.meta.info.logos.small,hideText:g,meta:E.meta};const h=(0,n.BT)(d);return h===m.hr.uid||h===m.hr.name?{label:h,value:h,hideText:g}:{label:(h??"no name")+" - not found",value:h??void 0,imgUrl:"",hideText:g}}getDataSourceOptions(){const{alerting:d,tracing:g,metrics:p,mixed:E,dashboard:h,variables:a,annotations:v,pluginId:x,type:y,filter:C,logs:P}=this.props;return this.dataSourceSrv.getList({alerting:d,tracing:g,metrics:p,logs:P,dashboard:h,mixed:E,variables:a,annotations:v,pluginId:x,filter:C,type:y}).map(M=>({value:M.name,label:`${M.name}${M.isDefault?" (default)":""}`,imgUrl:M.meta.info.logos.small,meta:M.meta}))}render(){const{autoFocus:d,onBlur:g,onClear:p,openMenuOnFocus:E,placeholder:h,width:a,inputId:v,disabled:x=!1,isLoading:y=!1}=this.props,{error:C}=this.state,P=this.getDataSourceOptions(),D=this.getCurrentValue(),M=typeof p=="function";return t.createElement("div",{"aria-label":s.wl.components.DataSourcePicker.container},t.createElement(i.Ph,{isLoading:y,disabled:x,"aria-label":s.wl.components.DataSourcePicker.inputV2,inputId:v||"data-source-picker",className:"ds-picker select-container",isMulti:!1,isClearable:M,backspaceRemovesValue:!1,onChange:this.onChange,options:P,autoFocus:d,onBlur:g,width:a,openMenuOnFocus:E,maxMenuHeight:500,placeholder:h,noOptionsMessage:"No datasources found",value:D??null,invalid:Boolean(C)||Boolean(this.props.invalid),getOptionLabel:b=>b.meta&&(0,l.x)(b.meta.signature)&&b!==D?t.createElement(f.Lh,{align:"center",justify:"space-between",height:"auto"},t.createElement("span",null,b.label)," ",t.createElement(c.o,{status:b.meta.signature})):b.label||""}))}}r.defaultProps={autoFocus:!1,openMenuOnFocus:!1,placeholder:"Select data source"}},87670:(Z,O,e)=>{"use strict";e.d(O,{$:()=>l,Z:()=>n});var t=e(68404);let n=({message:s})=>t.createElement("div",null,"Unable to render data: ",s,".");function l(s){n=s}},98825:(Z,O,e)=>{"use strict";e.d(O,{$:()=>n,L:()=>l});var t=e(68404);let n=()=>t.createElement("div",null,"PanelRenderer can only be used after Grafana instance has been started.");function l(s){n=s}},87221:(Z,O,e)=>{"use strict";e.d(O,{T:()=>n,t:()=>l});var t=e(68404);let n=({children:s})=>t.createElement("div",null,s);function l(s){n=s}},35645:(Z,O,e)=>{"use strict";e.d(O,{O:()=>i,v:()=>u});var t=e(82897),n=e.n(t),l=e(47513),s=e(36328);class i{constructor(g){this.snapshotEnabled=!0,this.datasources={},this.panels={},this.apps={},this.auth={},this.minRefreshInterval="",this.appUrl="",this.appSubUrl="",this.windowTitlePrefix="",this.newPanelTitle="",this.externalUserMngLinkUrl="",this.externalUserMngLinkName="",this.externalUserMngInfo="",this.allowOrgCreate=!1,this.feedbackLinksEnabled=!0,this.disableLoginForm=!1,this.defaultDatasource="",this.alertingEnabled=!1,this.alertingErrorOrTimeout="",this.alertingNoDataOrNullValues="",this.alertingMinInterval=1,this.angularSupportEnabled=!1,this.authProxyEnabled=!1,this.exploreEnabled=!1,this.queryHistoryEnabled=!1,this.helpEnabled=!1,this.profileEnabled=!1,this.ldapEnabled=!1,this.jwtHeaderName="",this.jwtUrlLogin=!1,this.sigV4AuthEnabled=!1,this.azureAuthEnabled=!1,this.samlEnabled=!1,this.samlName="",this.autoAssignOrg=!0,this.verifyEmailEnabled=!1,this.oauth={},this.rbacEnabled=!0,this.disableUserSignUp=!1,this.loginHint="",this.passwordHint="",this.loginError=void 0,this.viewersCanEdit=!1,this.editorsCanAdmin=!1,this.disableSanitizeHtml=!1,this.liveEnabled=!0,this.featureToggles={},this.anonymousEnabled=!1,this.licenseInfo={},this.rendererAvailable=!1,this.dashboardPreviews={systemRequirements:{met:!1,requiredImageRendererPluginVersion:""},thumbnailsExist:!1},this.rendererVersion="",this.secretsManagerPluginEnabled=!1,this.supportBundlesEnabled=!1,this.http2Enabled=!1,this.sentry={enabled:!1,dsn:"",customEndpoint:"",sampleRate:1},this.grafanaJavascriptAgent={enabled:!1,customEndpoint:"",apiKey:"",errorInstrumentalizationEnabled:!0,consoleInstrumentalizationEnabled:!1,webVitalsInstrumentalizationEnabled:!1},this.pluginCatalogURL="https://grafana.com/grafana/plugins/",this.pluginAdminEnabled=!0,this.pluginAdminExternalManageEnabled=!1,this.pluginCatalogHiddenPlugins=[],this.pluginsCDNBaseURL="",this.expressionsEnabled=!1,this.awsAllowedAuthProviders=[],this.awsAssumeRoleEnabled=!1,this.azure={managedIdentityEnabled:!1},this.caching={enabled:!1},this.unifiedAlertingEnabled=!1,this.unifiedAlerting={minInterval:""},this.recordedQueries={enabled:!0},this.featureHighlights={enabled:!1},this.reporting={enabled:!0},this.googleAnalytics4SendManualPageViews=!1,this.sqlConnectionLimits={maxOpenConns:100,maxIdleConns:100,connMaxLifetime:14400},this.bootData=g.bootData,this.bootData.user.lightTheme=f(g)==="light",this.isPublicDashboardView=g.bootData.settings.isPublicDashboardView;const p={datasources:{},windowTitlePrefix:"Grafana - ",panels:{},newPanelTitle:"Panel Title",playlist_timespan:"1m",unsaved_changes_warning:!0,appUrl:"",appSubUrl:"",buildInfo:{version:"1.0",commit:"1",env:"production"},viewersCanEdit:!1,editorsCanAdmin:!1,disableSanitizeHtml:!1};(0,t.merge)(this,p,g),this.buildInfo=g.buildInfo||p.buildInfo,this.dateFormats&&l.U6.update(this.dateFormats),o(this),this.featureToggles.disableAngular&&(this.angularSupportEnabled=!1),this.theme2=(0,s.j)(c(this)),this.theme=this.theme2.v1,this.theme2.flags.topnav=this.featureToggles.topnav}}function f(d){let g="dark";const p=d.bootData.user.theme;return p==="light"||p==="dark"?g=p:p==="system"&&(g=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),g}function c(d){return{colors:{mode:d.bootData.user.lightTheme?"light":"dark"}}}function o(d){if(window.location.href.indexOf("__feature")===-1)return;new URLSearchParams(window.location.search).forEach((p,E)=>{if(E.startsWith("__feature.")){const h=d.featureToggles,a=E.substring(10),v=p==="true";v!==h[E]&&(h[a]=v,console.log(`Setting feature toggle ${a} = ${v}`))}})}const m=window.grafanaBootData||{settings:{},user:{},navTree:[]},r=m.settings;r.bootData=m;const u=new i(r)},35670:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{CopyPanelEvent:()=>r.EK,DataSourcePicker:()=>R.q,DataSourceWithBackend:()=>x.CK,EchoEventType:()=>i.ee,FakeEchoSrv:()=>i.rX,GrafanaBootConfig:()=>g.O,HealthCheckError:()=>x.ZA,HealthStatus:()=>x.QO,HistoryWrapper:()=>m._i,MetaAnalyticsEventName:()=>p.ct,PanelDataErrorView:()=>P.Z,PanelRenderer:()=>C.$,PluginPage:()=>b.T,RefreshEvent:()=>r.U5,StreamingFrameAction:()=>o.T0,SystemJS:()=>E.i3,ThemeChangedEvent:()=>r.hD,TimeRangeUpdatedEvent:()=>r.md,config:()=>g.v,createDataSourcePluginEventProperties:()=>w,createPluginEventProperties:()=>B,createQueryRunner:()=>M.AQ,featureEnabled:()=>a.v,frameToMetricFindValue:()=>y.S9,getAngularLoader:()=>n.w,getAppEvents:()=>r.N$,getBackendSrv:()=>t.i,getDataSourceSrv:()=>l.F,getEchoSrv:()=>i.RP,getGrafanaLiveSrv:()=>o.gj,getLegacyAngularInjector:()=>c.V,getLocationSrv:()=>s.w,getPluginExtensions:()=>u.I,getPluginImportUtils:()=>E.bP,getRunRequest:()=>M.Pl,getTemplateSrv:()=>f.J,isExperimentViewEvent:()=>p.mR,isFetchError:()=>t.kW,isInteractionEvent:()=>p.fV,isPageviewEvent:()=>p.Si,isPluginExtensionLink:()=>d.c,loadPluginCss:()=>E.iS,locationSearchToObject:()=>m.Ox,locationService:()=>m.E1,logDebug:()=>v.o7,logError:()=>v.H,logInfo:()=>v.PN,logWarning:()=>v.KE,navigationLogger:()=>m.GQ,registerEchoBackend:()=>i.e6,reportExperimentView:()=>h.SZ,reportInteraction:()=>h.ff,reportMetaAnalytics:()=>h.r_,reportPageview:()=>h.sm,setAngularLoader:()=>n.W,setAppEvents:()=>r.Xw,setBackendSrv:()=>t.jW,setDataSourceSrv:()=>l.w,setEchoSrv:()=>i.tz,setGrafanaLiveSrv:()=>o.cA,setLegacyAngularInjector:()=>c.t,setLocationService:()=>m.ZG,setLocationSrv:()=>s.x,setPluginExtensionGetter:()=>u.o,setPluginImportUtils:()=>E.Qf,setQueryRunnerFactory:()=>M.pD,setRunRequest:()=>M.Iw,setTemplateSrv:()=>f.l,toDataQueryError:()=>D.P,toDataQueryResponse:()=>y.z1,usePluginInteractionReporter:()=>W});var t=e(54899),n=e(11484),l=e(86647),s=e(47458),i=e(5494),f=e(20308),c=e(70926),o=e(75118),m=e(37932),r=e(82378),u=e(54665),d=e(36032),g=e(35645),p=e(75552),E=e(19920),h=e(41818),a=e(66121),v=e(54408),x=e(22069),y=e(32689),C=e(98825),P=e(87670),D=e(77599),M=e(36535),b=e(87221),R=e(53117);function B(N){return{grafana_version:g.v.buildInfo.version,plugin_type:String(N.type),plugin_version:N.info.version,plugin_id:N.id,plugin_name:N.name}}function w(N){return{...B(N.meta),datasource_uid:N.uid}}var A=e(68404),I=e(59417),F=e(61345);const K="grafana_plugin_";function W(){const N=(0,I.g)();return(0,A.useMemo)(()=>{const S=(0,F.v)(N)?w(N.instanceSettings):B(N.meta);return(Y,Q)=>{if(!U(Y))throw new Error(`Interactions reported in plugins should start with: "${K}".`);return(0,h.ff)(Y,{...Q,...S})}},[N])}function U(N){return N.startsWith(K)&&N.length>K.length}},11484:(Z,O,e)=>{"use strict";e.d(O,{W:()=>n,w:()=>l});let t;function n(s){t=s}function l(){return t}},5494:(Z,O,e)=>{"use strict";e.d(O,{RP:()=>s,e6:()=>i,ee:()=>t,rX:()=>f,tz:()=>l});var t=(c=>(c.Performance="performance",c.MetaAnalytics="meta-analytics",c.Sentry="sentry",c.Pageview="pageview",c.Interaction="interaction",c.ExperimentView="experimentview",c.GrafanaJavascriptAgent="grafana-javascript-agent",c))(t||{});let n;function l(c){n=c}function s(){return n||(n=new f),n}const i=c=>{s().addBackend(c)};class f{constructor(){this.events=[]}flush(){this.events=[]}addBackend(o){}addEvent(o,m){this.events.push(o)}}},37932:(Z,O,e)=>{"use strict";e.d(O,{E1:()=>m,GQ:()=>d,Ox:()=>o,ZG:()=>r,_i:()=>c});var t=e(97594),n=e(27677),l=e(99227),s=e(88383),i=e(73289),f=e(35645);class c{constructor(p){this.history=p||t.lX({basename:f.v.appSubUrl??"/"}),this.partial=this.partial.bind(this),this.push=this.push.bind(this),this.replace=this.replace.bind(this),this.getSearch=this.getSearch.bind(this),this.getHistory=this.getHistory.bind(this),this.getLocation=this.getLocation.bind(this)}getHistory(){return this.history}getSearch(){return new URLSearchParams(this.history.location.search)}partial(p,E){const h=this.history.location,a=this.getSearchObject();for(const x of Object.keys(p))p[x]===null||p[x]===void 0?delete a[x]:a[x]=p[x];const v=n.Cj.renderUrl(h.pathname,a);E?this.history.replace(v,this.history.location.state):this.history.push(v,this.history.location.state)}push(p){this.history.push(p)}replace(p){this.history.replace(p)}reload(){const p=this.history.location.state?.routeReloadCounter;this.history.replace({...this.history.location,state:{routeReloadCounter:p?p+1:1}})}getLocation(){return this.history.location}getSearchObject(){return o(this.history.location.search)}update(p){if((0,l.d)("LocationSrv","update","partial, push or replace"),p.partial&&p.query)this.partial(p.query,p.partial);else{const E={pathname:p.path};p.query&&(E.search=n.Cj.toUrlParams(p.query)),p.replace?this.replace(E):this.push(E)}}}function o(g){let p=typeof g=="number"?String(g):g;return p.length>0?p.startsWith("?")?n.Cj.parseKeyValue(p.substring(1)):n.Cj.parseKeyValue(p):{}}let m=new c;const r=g=>{throw new Error("locationService can be only overriden in test environment")},u=(0,s.h)("Router"),d=u.logger;(0,i.x)("location",m,u)},47458:(Z,O,e)=>{"use strict";e.d(O,{w:()=>l,x:()=>n});let t;function n(s){t=s}function l(){return t}},36535:(Z,O,e)=>{"use strict";e.d(O,{AQ:()=>l,Iw:()=>i,Pl:()=>f,pD:()=>n});let t;const n=c=>{if(t)throw new Error("Runner should only be set when Grafana is starting.");t=c},l=()=>{if(!t)throw new Error("`createQueryRunner` can only be used after Grafana instance has started.");return t()};let s;function i(c){if(s)throw new Error("runRequest function should only be set once, when Grafana is starting.");s=c}function f(){if(!s)throw new Error("getRunRequest can only be used after Grafana instance has started.");return s}},82378:(Z,O,e)=>{"use strict";e.d(O,{EK:()=>i,N$:()=>o,U5:()=>n,Xw:()=>c,hD:()=>l,md:()=>s});var t=e(62316);class n extends t.m{}n.type="refresh";class l extends t.R{}l.type="theme-changed";class s extends t.R{}s.type="time-range-updated";class i extends t.R{}i.type="copy-panel";let f;function c(m){f=m}function o(){return f}},54899:(Z,O,e)=>{"use strict";e.d(O,{i:()=>s,jW:()=>l,kW:()=>t});function t(i){return typeof i=="object"&&i!==null&&"status"in i&&"data"in i}let n;const l=i=>{n=i},s=()=>n},86647:(Z,O,e)=>{"use strict";e.d(O,{F:()=>l,w:()=>n});let t;function n(s){t=s}function l(){return t}},70926:(Z,O,e)=>{"use strict";e.d(O,{V:()=>l,t:()=>n});let t;const n=s=>{t=s},l=()=>t},75118:(Z,O,e)=>{"use strict";e.d(O,{T0:()=>t,cA:()=>l,gj:()=>s});var t=(i=>(i.Append="append",i.Replace="replace",i))(t||{});let n;const l=i=>{n=i},s=()=>n},54665:(Z,O,e)=>{"use strict";e.d(O,{I:()=>s,o:()=>n});let t;function n(i){if(t)throw new Error("setPluginExtensionGetter() function should only be called once, when Grafana is starting.");t=i}function l(){if(!t)throw new Error("getPluginExtensionGetter() can only be used after the Grafana instance has started.");return t}const s=i=>l()(i)},36032:(Z,O,e)=>{"use strict";e.d(O,{c:()=>n});var t=e(21830);function n(l){return l?l.type===t.D.link&&("path"in l||"onClick"in l):!1}},20308:(Z,O,e)=>{"use strict";e.d(O,{J:()=>l,l:()=>n});let t;const n=s=>{t=s},l=()=>t},22069:(Z,O,e)=>{"use strict";e.d(O,{B9:()=>P,CK:()=>C,PI:()=>D,Pr:()=>a,QO:()=>x,ZA:()=>v,hr:()=>h});var t=e(59980),n=e(65583),l=e(12877),s=e(53704),i=e(59724),f=e(7238),c=e(5916),o=e(62626),m=e(70006),r=e(77345),u=e(35645),d=e(86647),g=e(75118),p=e(54899),E=e(32689);const h=Object.freeze({type:"__expr__",uid:"__expr__",name:"Expression"});function a(M){if(!M)return!1;const b=typeof M=="string"?M:M.type;return b===h.type||b===h.name||b==="-100"}class v extends Error{constructor(b,R){super(b),this.details=R,this.name="HealthCheckError"}}var x=(M=>(M.Unknown="UNKNOWN",M.OK="OK",M.Error="ERROR",M))(x||{}),y=(M=>(M.PluginID="X-Plugin-Id",M.DatasourceUID="X-Datasource-Uid",M.DashboardUID="X-Dashboard-Uid",M.PanelID="X-Panel-Id",M.QueryGroupID="X-Query-Group-Id",M.FromExpression="X-Grafana-From-Expr",M))(y||{});class C extends f.MF{constructor(b){super(b),this.streamOptionsProvider=D}query(b){const{intervalMs:R,maxDataPoints:B,queryCachingTTL:w,range:A,requestId:I,hideFromInspector:F=!1}=b;let K=b.targets;this.filterQuery&&(K=K.filter(G=>this.filterQuery(G)));let W=!1;const U=new Set,N=new Set,S=K.map(G=>{let k=this.getRef(),j=this.id,de=!0;if(a(G.datasource))return W=!0,{...G,datasource:h};if(G.datasource){const ge=(0,d.F)().getInstanceSettings(G.datasource,b.scopedVars);if(!ge)throw new Error(`Unknown Datasource: ${JSON.stringify(G.datasource)}`);const re=ge.rawRef??(0,c.iU)(ge),ce=ge.id;(re.uid!==k.uid||j!==ce)&&(k=re,j=ce,de=!1)}return k.type?.length&&U.add(k.type),k.uid?.length&&N.add(k.uid),{...de?this.applyTemplateVariables(G,b.scopedVars):G,datasource:k,datasourceId:j,intervalMs:R,maxDataPoints:B,queryCachingTTL:w}});if(!S.length)return(0,t.of)({data:[]});const Y={queries:S};if(A&&(Y.range=A,Y.from=A.from.valueOf().toString(),Y.to=A.to.valueOf().toString()),u.v.featureToggles.queryOverLive)return(0,g.gj)().getQueryData({request:b,body:Y});const Q={};Q["X-Plugin-Id"]=Array.from(U).join(", "),Q["X-Datasource-Uid"]=Array.from(N).join(", ");let z="/api/ds/query";return W&&(Q["X-Grafana-From-Expr"]="true",z+="?expression=true"),b.dashboardUID&&(Q["X-Dashboard-Uid"]=b.dashboardUID),b.panelId&&(Q["X-Panel-Id"]=`${b.panelId}`),b.queryGroupId&&(Q["X-Query-Group-Id"]=`${b.queryGroupId}`),(0,p.i)().fetch({url:z,method:"POST",data:Y,requestId:I,hideFromInspector:F,headers:Q}).pipe((0,s.w)(G=>{const k=(0,E.z1)(G,S);return k.data?.length&&k.data.find(j=>j.meta?.channel)?P(k,b,this.streamOptionsProvider):(0,t.of)(k)}),(0,i.K)(G=>(0,t.of)((0,E.z1)(G))))}getRequestHeaders(){const b={};return b["X-Plugin-Id"]=this.type,b["X-Datasource-Uid"]=this.uid,b}interpolateVariablesInQueries(b,R){return b.map(B=>this.applyTemplateVariables(B,R))}applyTemplateVariables(b,R){return b}async getResource(b,R,B){const w=this.getRequestHeaders();return(await(0,n.n)((0,p.i)().fetch({...B,method:"GET",headers:B?.headers?{...B.headers,...w}:w,params:R??B?.params,url:`/api/datasources/uid/${this.uid}/resources/${b}`}))).data}async postResource(b,R,B){const w=this.getRequestHeaders();return(await(0,n.n)((0,p.i)().fetch({...B,method:"POST",headers:B?.headers?{...B.headers,...w}:w,data:R??{...R},url:`/api/datasources/uid/${this.uid}/resources/${b}`}))).data}async callHealthCheck(){return(0,n.n)((0,p.i)().fetch({method:"GET",url:`/api/datasources/uid/${this.uid}/health`,showErrorAlert:!1,headers:this.getRequestHeaders()})).then(b=>b.data).catch(b=>b.data)}async testDatasource(){return this.callHealthCheck().then(b=>{if(b.status==="OK")return{status:"success",message:b.message};throw new v(b.message,b.details)})}}function P(M,b,R){const B=(0,g.gj)();if(!B)return(0,t.of)(M);const w=[],A=[];for(const I of M.data){const F=(0,o.H7)(I.meta?.channel);if(F){const K=I;A.push(B.getDataStream({addr:F,buffer:R(b,K),frame:(0,m.Y)(I)}))}else w.push(I)}return w.length&&A.push((0,t.of)({...M,data:w})),A.length===1?A[0]:(0,l.T)(...A)}const D=(M,b)=>{const R={maxLength:M.maxDataPoints??500,action:g.T0.Append};return M.rangeRaw?.to==="now"&&(R.maxDelta=M.range.to.valueOf()-M.range.from.valueOf()),R};C=(0,r.s)(C)},66121:(Z,O,e)=>{"use strict";e.d(O,{v:()=>n});var t=e(35645);const n=l=>{const{enabledFeatures:s}=t.v.licenseInfo;return s&&s[l]}},54408:(Z,O,e)=>{"use strict";e.d(O,{H:()=>m,KE:()=>c,PN:()=>f,o7:()=>o});var t=e(37916),n=e(48606),l=e(53843),s=e(56986),i=e(35645);function f(r,u){i.v.grafanaJavascriptAgent.enabled&&l.s.api.pushLog([r],{level:s.in.INFO,context:u}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Info,contexts:u})}function c(r,u){i.v.grafanaJavascriptAgent.enabled&&l.s.api.pushLog([r],{level:s.in.WARN,context:u}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Warning,contexts:u})}function o(r,u){i.v.grafanaJavascriptAgent.enabled&&l.s.api.pushLog([r],{level:s.in.DEBUG,context:u}),i.v.sentry.enabled&&(0,t.uT)(r,{level:n.z.Debug,contexts:u})}function m(r,u){i.v.grafanaJavascriptAgent.enabled&&l.s.api.pushError(r),i.v.sentry.enabled&&(0,t.Tb)(r,{contexts:u})}},19920:(Z,O,e)=>{"use strict";e.d(O,{Qf:()=>c,bP:()=>o,i3:()=>s,iS:()=>i});var t=e(59587),n=e.n(t),l=e(35645);const s=n();function i(m){const r=l.v.bootData.user.lightTheme?m.light:m.dark;return s.import(`${r}!css`)}let f;function c(m){if(f)throw new Error("pluginImportUtils should only be set once, when Grafana is starting.");f=m}function o(){if(!f)throw new Error("pluginImportUtils can only be used after Grafana instance has started.");return f}},32689:(Z,O,e)=>{"use strict";e.d(O,{S9:()=>u,z1:()=>c});var t=e(49922),n=e(70006),l=e(16911),s=e(14582),i=e(77599);const f={severity:"info",text:"Cached response"};function c(d,g){const p={data:[],state:t.Gu.Done};if(d.data?.results){const E=d.data.results,h=g?.length?g.map(x=>x.refId):Object.keys(E),a=o(d),v=[];for(const x of h){const y=E[x];y&&(y.refId=x,v.push(y))}for(const x of v){if(x.error&&(p.error||(p.error={refId:x.refId,message:x.error,status:x.status}),p.errors?p.errors.push({refId:x.refId,message:x.error,status:x.status}):p.errors=[{refId:x.refId,message:x.error,status:x.status}],p.state=t.Gu.Error),x.frames?.length){for(let y of x.frames){a&&(y=m(y));const C=(0,n.vP)(y);C.refId||(C.refId=x.refId),p.data.push(C)}continue}if(x.series?.length)for(const y of x.series)y.refId||(y.refId=x.refId),p.data.push((0,l.g0)(y));if(x.tables?.length)for(const y of x.tables)y.refId||(y.refId=x.refId),p.data.push((0,l.g0)(y))}}return d.status&&d.status!==200&&(p.state!==t.Gu.Error&&(p.state=t.Gu.Error),p.error||(p.error=(0,i.P)(d))),p}function o(d){const g=d?.headers;return!g||!g.get?!1:g.get("X-Cache")==="HIT"}function m(d){return{...d,schema:{...d.schema,fields:[...d.schema?.fields??[]],meta:{...d.schema?.meta,notices:[...d.schema?.meta?.notices??[],f],isCachedResponse:!0}}}}function r(d){const g=c(d);if(g.error?.data?.message)return{status:"error",message:g.error.data.message,details:g.error?.data?.error?{message:g.error.data.error}:void 0};if(g.error?.refId&&g.error?.message)return{status:"error",message:g.error.message};throw d}function u(d){if(!d||!d.length)return[];const g=[];let p=d.fields.find(E=>E.type===s.fS.string);if(p||(p=d.fields.find(E=>E.type!==s.fS.time)),p)for(let E=0;E<p.values.length;E++)g.push({text:""+p.values.get(E)});return g}},45253:(Z,O,e)=>{"use strict";e.d(O,{b:()=>o});var t=e(9892),n=e(68404),l=e(68183),s=e(72648),i=e(31403),f=e(39904),c=e(8180);const o=n.forwardRef(({title:u,onRemove:d,children:g,buttonContent:p,elevated:E,bottomSpacing:h,topSpacing:a,className:v,severity:x="error",...y},C)=>{const P=(0,s.l4)(),D=Boolean(u),M=r(P,x,D,E,h,a),b={error:"alert",warning:"alert",info:"status",success:"status"},R=y.role||b[x],B=y["aria-label"]||u;return n.createElement("div",{ref:C,className:(0,t.cx)(M.alert,v),"data-testid":l.wl.components.Alert.alertV2(x),role:R,"aria-label":B,...y},n.createElement("div",{className:M.icon},n.createElement(f.J,{size:"xl",name:m(x)})),n.createElement("div",{className:M.body},n.createElement("div",{className:M.title},u),g&&n.createElement("div",{className:M.content},g)),d&&!p&&n.createElement("div",{className:M.close},n.createElement(c.h,{"aria-label":"Close alert",name:"times",onClick:d,size:"lg",type:"button"})),d&&p&&n.createElement("div",{className:M.buttonWrapper},n.createElement(i.zx,{"aria-label":"Close alert",variant:"secondary",onClick:d,type:"button"},p)))});o.displayName="Alert";const m=u=>{switch(u){case"error":case"warning":return"exclamation-triangle";case"info":return"info-circle";case"success":return"check"}},r=(u,d,g,p,E,h)=>{const a=u.colors[d],v=u.shape.borderRadius();return{alert:t.css`
      flex-grow: 1;
      position: relative;
      border-radius: ${v};
      display: flex;
      flex-direction: row;
      align-items: stretch;
      background: ${u.colors.background.secondary};
      box-shadow: ${p?u.shadows.z3:u.shadows.z1};
      margin-bottom: ${u.spacing(E??2)};
      margin-top: ${u.spacing(h??0)};

      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        background: ${u.colors.background.primary};
        z-index: -1;
      }
    `,icon:t.css`
      padding: ${u.spacing(2,3)};
      background: ${a.main};
      border-radius: ${v} 0 0 ${v};
      color: ${a.contrastText};
      display: flex;
      align-items: center;
      justify-content: center;
    `,title:t.css`
      font-weight: ${u.typography.fontWeightMedium};
      color: ${u.colors.text.primary};
    `,body:t.css`
      color: ${u.colors.text.secondary};
      padding: ${u.spacing(2)};
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-wrap: break-word;
      word-break: break-word;
    `,content:t.css`
      color: ${u.colors.text.secondary};
      padding-top: ${g?u.spacing(1):0};
      max-height: 50vh;
      overflow-y: auto;
    `,buttonWrapper:t.css`
      padding: ${u.spacing(1)};
      background: none;
      display: flex;
      align-items: center;
    `,close:t.css`
      padding: ${u.spacing(2,1)};
      background: none;
      display: flex;
    `}}},19985:(Z,O,e)=>{"use strict";e.d(O,{C:()=>o});var t=e(9892),n=e(68404),l=e(28550),s=e(72648),i=e(39904),f=e(52081),c=e(6554);const o=n.memo(({icon:r,color:u,text:d,tooltip:g,className:p,...E})=>{const h=(0,s.wW)((0,n.useCallback)(v=>m(v,u),[u])),a=n.createElement("div",{className:(0,t.cx)(h.wrapper,p),...E},n.createElement(f.Lh,{align:"center",spacing:"xs"},r&&n.createElement(i.J,{name:r,size:"sm"}),n.createElement("span",null,d)));return g?n.createElement(c.u,{content:g,placement:"auto"},a):a});o.displayName="Badge";const m=(r,u)=>{let d=r.visualization.getColorByName(u),g="",p="",E="";return r.isDark?(p=(0,l.Z)(d).setAlpha(.15).toString(),g=(0,l.Z)(d).darken(30).toString(),E=(0,l.Z)(d).lighten(15).toString()):(p=(0,l.Z)(d).setAlpha(.15).toString(),g=(0,l.Z)(d).lighten(20).toString(),E=(0,l.Z)(d).darken(20).toString()),{wrapper:t.css`
      font-size: ${r.typography.size.sm};
      display: inline-flex;
      padding: 1px 4px;
      border-radius: ${r.shape.radius.default};
      background: ${p};
      border: 1px solid ${g};
      color: ${E};
      font-weight: ${r.typography.fontWeightRegular};

      > span {
        position: relative;
        top: 1px;
        margin-left: 2px;
      }
    `}}},19670:(Z,O,e)=>{"use strict";e.d(O,{xf:()=>C});var t=e(9892),n=e(68404),l=e(28550),s=e(66847),i=e(20251),f=e(24177),c=e(20112),o=e(66926),m=e(425),r=e(68183),u=e(40538),d=e(4176),g=e(31403),p=e(72777);const E=18,h=50,a=150,v=1.5,x=1,y=10;class C extends n.PureComponent{render(){const{onClick:W,className:U,theme:N}=this.props,{title:S}=this.props.value,Y=M(this.props);return W?n.createElement("button",{type:"button",style:Y.wrapper,onClick:W,className:(0,t.cx)((0,g.gN)(N),U)},n.createElement("div",{style:Y.title},S),this.renderBarAndValue()):n.createElement("div",{style:Y.wrapper,className:U},S&&n.createElement("div",{style:Y.title},S),this.renderBarAndValue())}renderBarAndValue(){switch(this.props.displayMode){case"lcd":return this.renderRetroBars();case"basic":case"gradient":default:return this.renderBasicAndGradientBars()}}renderBasicAndGradientBars(){const{value:W,showUnfilled:U,valueDisplayMode:N}=this.props,S=w(this.props);return n.createElement("div",{style:S.wrapper},N!==u.M8.Hidden&&n.createElement(p.W,{"data-testid":r.wl.components.Panels.Visualization.BarGauge.valueV2,value:W,style:S.value}),U&&n.createElement("div",{style:S.emptyBar}),n.createElement("div",{style:S.bar}))}renderRetroBars(){const{display:W,field:U,value:N,itemSpacing:S,alignmentFactors:Y,orientation:Q,lcdCellWidth:z,text:G,valueDisplayMode:k,theme:j}=this.props,{valueHeight:de,valueWidth:ge,maxBarHeight:re,maxBarWidth:ce,wrapperWidth:ie,wrapperHeight:fe}=b(this.props),Ce=U.min??s.Hx,ee=U.max??s.Z3,ne=P(Q),X=ee-Ce,te=ne?re:ce,ae=S,_=Math.floor(te/z),ve=Math.floor((te-ae*_)/_),Ve=I(this.props),rt=F(Y||N,Ve,ge,de,Q,G),pe={width:`${ie}px`,height:`${fe}px`,display:"flex"};ne?(pe.flexDirection="column-reverse",pe.alignItems="center"):(pe.flexDirection="row",pe.alignItems="center",rt.justifyContent="flex-end");const Ie=[];for(let We=0;We<_;We++){const Je=Ce+X/_*We,He=R(Je,N,W),Ae={borderRadius:j.shape.radius.default};He.isLit?Ae.backgroundImage=`radial-gradient(${He.background} 10%, ${He.backgroundShade})`:Ae.backgroundColor=He.background,ne?(Ae.height=`${ve}px`,Ae.width=`${ce}px`,Ae.marginTop=`${ae}px`):(Ae.width=`${ve}px`,Ae.height=`${re}px`,Ae.marginRight=`${ae}px`),Ie.push(n.createElement("div",{key:We.toString(),style:Ae}))}return n.createElement("div",{style:pe},Ie,k!==u.M8.Hidden&&n.createElement(p.W,{"data-testid":r.wl.components.Panels.Visualization.BarGauge.valueV2,value:N,style:rt}))}}C.defaultProps={lcdCellWidth:12,value:{text:"100",numeric:100},displayMode:u.QH.Gradient,orientation:i.wm.Horizontal,field:{min:0,max:100,thresholds:{mode:f.H.Absolute,steps:[]}},itemSpacing:8,showUnfilled:!0};function P(K){return K===i.wm.Vertical}function D(K){const{height:W,width:U,alignmentFactors:N,orientation:S,text:Y}=K,Q=N?N.title:K.value.title;if(!Q)return{fontSize:0,width:0,height:0,placement:"above"};if(P(S)){const ge=Y?.titleSize??14;return{fontSize:ge,width:U,height:ge*v,placement:"below"}}if(W>40){if(Y?.titleSize)return{fontSize:Y?.titleSize,width:0,height:Y.titleSize*v,placement:"above"};const re=Math.max(Math.min(W*.45,h),17);return{fontSize:re/v,width:0,height:re,placement:"above"}}const k=Math.max(W*.6,E)/v,j=(0,d.X1)(Q,k),de=Math.min(j.width+15,U*.4);return{fontSize:Y?.titleSize??k,height:0,width:de,placement:"left"}}function M(K){const W={display:"flex",overflow:"hidden",width:"100%"},U=D(K),N={fontSize:`${U.fontSize}px`,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",alignItems:"center",alignSelf:"center"};return P(K.orientation)?(W.flexDirection="column-reverse",N.textAlign="center"):U.placement==="above"?W.flexDirection="column":(W.flexDirection="row",N.width=`${U.width}px`,N.textAlign="right",N.paddingRight="10px"),{wrapper:W,title:N}}function b(K){const{height:W,width:U,orientation:N,text:S,alignmentFactors:Y,valueDisplayMode:Q}=K,z=D(K),G=Y??K.value,k=(0,c.zc)(G);let j=0,de=0,ge=0,re=0,ce=0,ie=0;const fe=S?.valueSize??Math.max(z.fontSize,12),ee=(0,d.X1)(k,fe).width+y*2;return P(N)?(S?.valueSize?ge=S.valueSize*x:ge=Math.min(Math.max(W*.1,E),h),re=U,Q===u.M8.Hidden&&(ge=0,re=0),j=W-(z.height+ge),de=U,ce=U,ie=W-z.height):(Q===u.M8.Hidden?(ge=0,re=0):(ge=W-z.height,re=Math.max(Math.min(U*.2,a),ee)),j=W-z.height,de=U-re-z.width,z.placement==="above"?(ce=U,ie=W-z.height):(ce=U-z.width,ie=W)),{valueWidth:re,valueHeight:ge,maxBarWidth:de,maxBarHeight:j,wrapperHeight:ie,wrapperWidth:ce}}function R(K,W,U){if(K===null)return{background:o.R,border:o.R};const N=U?U(K).color:null;return N?W===null||isNaN(W.numeric)||K!==null&&K>W.numeric?{background:(0,l.Z)(N).setAlpha(.18).toRgbString(),border:"transparent",isLit:!1}:{background:(0,l.Z)(N).setAlpha(.95).toRgbString(),backgroundShade:(0,l.Z)(N).setAlpha(.55).toRgbString(),border:(0,l.Z)(N).setAlpha(.9).toRgbString(),isLit:!0}:{background:o.R,border:o.R}}function B(K,W,U){const N=Math.min((K-W)/(U-W),1);return isNaN(N)?0:N}function w(K){const{displayMode:W,field:U,value:N,alignmentFactors:S,orientation:Y,theme:Q,text:z}=K,{valueWidth:G,valueHeight:k,maxBarHeight:j,maxBarWidth:de}=b(K),ge=U.min??s.Hx,re=U.max??s.Z3,ce=B(N.numeric,ge,re),ie=I(K),fe=N.color??o.R,ee=F(S||N,ie,G,k,Y,z),ne=W==="basic",X={display:"flex",flexGrow:1},te={borderRadius:Q.shape.radius.default,position:"relative",zIndex:1},ae={background:Q.colors.background.secondary,flexGrow:1,display:"flex",borderRadius:Q.shape.radius.default,position:"relative"};if(P(Y)){const _=Math.max(ce*j,1);X.flexDirection="column",X.justifyContent="flex-end",te.transition="height 1s",te.height=`${_}px`,te.width=`${de}px`,ae.bottom="-3px",ae.width=`${G}px`,ne?(te.background=`${(0,l.Z)(fe).setAlpha(.35).toRgbString()}`,te.borderTop=`2px solid ${fe}`):te.background=A(K,j)}else{const _=Math.max(ce*de,1);X.flexDirection="row-reverse",X.justifyContent="flex-end",X.alignItems="stretch",te.transition="width 1s",te.height=`${j}px`,te.width=`${_}px`,ae.left="-3px",ae.height=`${k}px`,ne?(te.background=`${(0,l.Z)(fe).setAlpha(.35).toRgbString()}`,te.borderRight=`2px solid ${fe}`):te.background=A(K,de)}return{wrapper:X,bar:te,value:ee,emptyBar:ae}}function A(K,W){const{field:U,value:N,orientation:S,theme:Y}=K,Q=P(S)?"0deg":"90deg",z=U.min,G=U.max;let k="",j=0,de=(0,m.QY)(U.color?.mode);if(de.id===o.S.Thresholds){const ge=U.thresholds;for(let re=0;re<ge.steps.length;re++){const ce=ge.steps[re],ie=K.theme.visualization.getColorByName(ce.color),fe=ge.mode===f.H.Percentage?ce.value/100:B(ce.value,z,G),Ce=fe*W,ee=Math.round(Ce-(Ce-j)/2),ne=ge.mode===f.H.Percentage?z+(G-z)*fe:ce.value;if(k==="")k=`linear-gradient(${Q}, ${ie}, ${ie}`;else{if(N.numeric<ne)break;j=Ce,k+=` ${ee}px, ${ie}`}}return k+")"}if(de.isContinuous&&de.getColors){const ge=de.getColors(Y);for(let re=0;re<ge.length;re++){const ce=ge[re];if(k==="")k=`linear-gradient(${Q}, ${ce} 0px`;else{const fe=re/(ge.length-1)*W;k+=`, ${ce} ${fe}px`}}return k+")"}return N.color??o.R}function I(K){if(K.valueDisplayMode==="text")return K.theme.colors.text.primary;const{value:W}=K;return W.color?W.color:o.R}function F(K,W,U,N,S,Y){const Q={color:W,height:`${N}px`,width:`${U}px`,display:"flex",alignItems:"center",lineHeight:x};let z=U;const G=(0,c.zc)(K);return P(S)?(Q.fontSize=Y?.valueSize??(0,d.MX)(G,z,N,x),Q.justifyContent="center"):(Q.fontSize=Y?.valueSize??(0,d.MX)(G,z-y*2,N,x),Q.justifyContent="flex-end",Q.paddingLeft=`${y}px`,Q.paddingRight=`${y}px`,z-=y),Q}},57426:(Z,O,e)=>{"use strict";e.d(O,{w6:()=>w,pc:()=>M,IG:()=>b,ap:()=>R,jG:()=>B});var t=e(9892),n=e(68404),l=e(31403),s=e(72777),i=e(28550),f=e(20251),c=e(14582),o=e(20112),m=e(40538),r=e(16514),u=e(4176),d=e(67307);const g=1.2,p=30,E=500;class h{constructor(I){this.props=I;const{width:F,height:K,value:W,text:U}=I;this.valueColor=W.color??"gray",this.panelPadding=K>100?12:8,this.textValues=D(I),this.justifyCenter=P(I.justifyMode,this.textValues.title),this.valueToAlignTo=this.textValues.valueToAlignTo,this.titleToAlignTo=this.textValues.titleToAlignTo,this.titleFontSize=0,this.valueFontSize=0,this.chartHeight=0,this.chartWidth=0,this.maxTextWidth=F-this.panelPadding*2,this.maxTextHeight=K-this.panelPadding*2,U&&(U.titleSize&&(this.titleFontSize=U.titleSize,this.titleToAlignTo=void 0),U.valueSize&&(this.valueFontSize=U.valueSize,this.valueToAlignTo=""))}getTitleStyles(){const I={fontSize:`${this.titleFontSize}px`,lineHeight:g};return this.props.parentOrientation===f.wm.Horizontal&&this.justifyCenter&&(I.paddingRight="0.75ch"),(this.props.colorMode===M.Background||this.props.colorMode===M.BackgroundSolid)&&(I.color=(0,r.bM)(this.valueColor,this.props.theme.isDark)),I}getValueStyles(){const I={fontSize:this.valueFontSize,fontWeight:E,lineHeight:g,position:"relative",zIndex:1};switch(this.justifyCenter&&(I.textAlign="center"),this.props.colorMode){case M.Value:I.color=this.valueColor;break;case M.Background:case M.BackgroundSolid:I.color=(0,r.bM)(this.valueColor,this.props.theme.isDark);break;case M.None:I.color=this.props.theme.colors.text.primary;break}return I}getValueAndTitleContainerStyles(){const I={display:"flex"};return this.justifyCenter&&(I.alignItems="center",I.justifyContent="center",I.flexGrow=1),I}getPanelStyles(){const{width:I,height:F,theme:K,colorMode:W}=this.props,U={width:`${I}px`,height:`${F}px`,padding:`${this.panelPadding}px`,borderRadius:K.shape.borderRadius(),position:"relative",display:"flex"},N=K.isDark?1:-.7;switch(W){case M.Background:const S=(0,i.Z)(this.valueColor).darken(15*N).spin(8).toRgbString(),Y=(0,i.Z)(this.valueColor).darken(5*N).spin(-8).toRgbString();U.background=`linear-gradient(120deg, ${S}, ${Y})`;break;case M.BackgroundSolid:U.background=(0,i.Z)(this.valueColor).toString();break;case M.Value:U.background="transparent";break}return this.justifyCenter&&(U.alignItems="center",U.flexDirection="row"),U}renderChart(){const{sparkline:I,colorMode:F}=this.props;if(!I||I.y?.type!==c.fS.number)return null;let K,W;switch(F){case M.Background:case M.BackgroundSolid:K="rgba(255,255,255,0.4)",W=(0,i.Z)(this.valueColor).brighten(40).toRgbString();break;case M.None:case M.Value:default:W=this.valueColor,K=(0,i.Z)(this.valueColor).setAlpha(.2).toRgbString();break}const U={custom:{drawStyle:m.l8.Line,lineWidth:1,fillColor:K,lineColor:W}};return n.createElement("div",{style:this.getChartStyles()},n.createElement(d.b,{height:this.chartHeight,width:this.chartWidth,sparkline:I,config:U,theme:this.props.theme}))}getChartStyles(){return{position:"absolute",right:0,bottom:0}}}class a extends h{constructor(I){super(I);const F=this.titleToAlignTo?.length?.3:1;this.valueToAlignTo.length&&(this.valueFontSize=(0,u.MX)(this.valueToAlignTo,this.maxTextWidth*F,this.maxTextHeight,g,void 0,E)),this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.MX)(this.titleToAlignTo,this.maxTextWidth*.6,this.maxTextHeight,g,p),this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="row",I.alignItems="center",I.flexGrow=1,this.justifyCenter||(I.justifyContent="space-between"),I}renderChart(){return null}getPanelStyles(){const I=super.getPanelStyles();return I.alignItems="center",I}}class v extends h{constructor(I){super(I);const{width:F,height:K}=I,W=.5,U=.6,N=1-U,S=.4;this.chartWidth=F,this.chartHeight=K*W,this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.MX)(this.titleToAlignTo,this.maxTextWidth*U,this.maxTextHeight*S,g,p)),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.MX)(this.valueToAlignTo,this.maxTextWidth*N,this.maxTextHeight*W,g,void 0,E))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="row",I.flexGrow=1,this.justifyCenter||(I.justifyContent="space-between"),I}getPanelStyles(){const I=super.getPanelStyles();return I.flexDirection="row",I.justifyContent="space-between",I}}class x extends h{constructor(I){super(I);const{width:F,height:K}=I,W=.15,U=.25;let N=0;this.chartHeight=K*U,this.chartWidth=F,this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.MX)(this.titleToAlignTo,this.maxTextWidth,K*W,g,p),N=this.titleFontSize*g),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-this.chartHeight-N,g,void 0,E)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize)),this.chartHeight=K-this.titleFontSize*g-this.valueFontSize*g}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="column",I.justifyContent="center",I}getPanelStyles(){const I=super.getPanelStyles();return I.flexDirection="column",I}}class y extends h{constructor(I){super(I);const{height:F}=I,K=.15;let W=0;this.titleToAlignTo?.length&&(this.titleFontSize=(0,u.MX)(this.titleToAlignTo,this.maxTextWidth,F*K,g,p),W=this.titleFontSize*g),this.valueToAlignTo.length&&(this.valueFontSize=(0,u.MX)(this.valueToAlignTo,this.maxTextWidth,this.maxTextHeight-W,g,void 0,E)),this.titleToAlignTo?.length&&(this.titleFontSize=Math.min(this.valueFontSize*.7,this.titleFontSize))}getValueAndTitleContainerStyles(){const I=super.getValueAndTitleContainerStyles();return I.flexDirection="column",I.flexGrow=1,I}renderChart(){return null}getPanelStyles(){const I=super.getPanelStyles();return I.alignItems="center",I}}function C(A){const{width:I,height:F,sparkline:K}=A;return I/F>2.5?F>50&&K&&K.y.values.length>1?new v(A):new a(A):F>100&&K&&K.y.values.length>1?new x(A):new y(A)}function P(A,I){return A===R.Center?!0:(I??"").length===0}function D(A){const{value:I,alignmentFactors:F,count:K}=A;let{textMode:W}=A;const U=F?F.title:I.title,N=(0,o.zc)(F||I);switch(W===B.Auto&&(K??1)===1&&(W=B.Value),W){case B.Name:return{...I,title:void 0,prefix:void 0,suffix:void 0,text:I.title||"",titleToAlignTo:void 0,valueToAlignTo:U??"",tooltip:(0,o.zc)(I)};case B.Value:return{...I,title:void 0,titleToAlignTo:void 0,valueToAlignTo:N,tooltip:I.title};case B.None:return{numeric:I.numeric,color:I.color,title:void 0,text:"",titleToAlignTo:void 0,valueToAlignTo:"1",tooltip:`Name: ${I.title}
Value: ${(0,o.zc)(I)}`};case B.ValueAndName:default:return{...I,titleToAlignTo:U,valueToAlignTo:N}}}var M=(A=>(A.Background="background",A.BackgroundSolid="background_solid",A.None="none",A.Value="value",A))(M||{}),b=(A=>(A.None="none",A.Line="line",A.Area="area",A))(b||{}),R=(A=>(A.Auto="auto",A.Center="center",A))(R||{}),B=(A=>(A.Auto="auto",A.Value="value",A.ValueAndName="value_and_name",A.Name="name",A.None="none",A))(B||{});class w extends n.PureComponent{render(){const{onClick:I,className:F,hasLinks:K,theme:W}=this.props,U=C(this.props),N=U.getPanelStyles(),S=U.getValueAndTitleContainerStyles(),Y=U.getValueStyles(),Q=U.getTitleStyles(),z=U.textValues,G=K?void 0:z.tooltip;return I?n.createElement("button",{type:"button",className:(0,t.cx)((0,l.gN)(W),F),style:N,onClick:I,title:G},n.createElement("div",{style:S},z.title&&n.createElement("div",{style:Q},z.title),n.createElement(s.W,{value:z,style:Y})),U.renderChart()):n.createElement("div",{className:F,style:N,title:G},n.createElement("div",{style:S},z.title&&n.createElement("div",{style:Q},z.title),n.createElement(s.W,{value:z,style:Y})),U.renderChart())}}w.defaultProps={justifyMode:"auto"}},85951:(Z,O,e)=>{"use strict";e.d(O,{_:()=>c});var t=e(9892),n=e(68404),l=e(14677),s=e.n(l),i=e(72648),f=e(69636);const c=(0,n.forwardRef)(({name:m,value:r,hidden:u,facets:d,onClick:g,className:p,loading:E,searchTerm:h,active:a,style:v,title:x,highlightParts:y,...C},P)=>{const D=(0,i.l4)(),M=o(D),b=h?[h]:[],R=(0,n.useCallback)(w=>{g&&!u&&g(m,r,w)},[g,m,u,r]);let B=r||m;return d&&(B=`${B} (${d})`),n.createElement("button",{key:B,ref:P,onClick:R,style:v,title:x||B,type:"button",role:"option","aria-selected":!!a,className:(0,t.cx)(M.base,a&&M.active,E&&M.loading,u&&M.hidden,p,g&&!u&&M.hover),...C},y!==void 0?n.createElement(f.H,{text:B,highlightClassName:M.matchHighLight,highlightParts:y}):n.createElement(s(),{textToHighlight:B,searchWords:b,autoEscape:!0,highlightClassName:M.matchHighLight}))});c.displayName="Label";const o=m=>({base:t.css`
    display: inline-block;
    cursor: pointer;
    font-size: ${m.typography.size.sm};
    line-height: ${m.typography.bodySmall.lineHeight};
    background-color: ${m.colors.background.secondary};
    color: ${m.colors.text.primary};
    white-space: nowrap;
    text-shadow: none;
    padding: ${m.spacing(.5)};
    border-radius: ${m.shape.borderRadius()};
    border: none;
    margin-right: ${m.spacing(1)};
    margin-bottom: ${m.spacing(.5)};
  `,loading:t.css`
    font-weight: ${m.typography.fontWeightMedium};
    background-color: ${m.colors.primary.shade};
    color: ${m.colors.text.primary};
    animation: pulse 3s ease-out 0s infinite normal forwards;
    @keyframes pulse {
      0% {
        color: ${m.colors.text.primary};
      }
      50% {
        color: ${m.colors.text.secondary};
      }
      100% {
        color: ${m.colors.text.disabled};
      }
    }
  `,active:t.css`
    font-weight: ${m.typography.fontWeightMedium};
    background-color: ${m.colors.primary.main};
    color: ${m.colors.primary.contrastText};
  `,matchHighLight:t.css`
    background: inherit;
    color: ${m.components.textHighlight.text};
    background-color: ${m.components.textHighlight.background};
  `,hidden:t.css`
    opacity: 0.6;
    cursor: default;
    border: 1px solid transparent;
  `,hover:t.css`
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `})},31403:(Z,O,e)=>{"use strict";e.d(O,{Qj:()=>d,_7:()=>v,c9:()=>h,fW:()=>g,gN:()=>a,zx:()=>u});var t=e(9892),n=e(68404),l=e(64724),s=e(72648),i=e(85419),f=e(73267),c=e(39904),o=e(6554);const m=null,r=null,u=n.forwardRef(({variant:x="primary",size:y="md",fill:C="solid",icon:P,fullWidth:D,children:M,className:b,type:R="button",tooltip:B,tooltipPlacement:w,...A},I)=>{const F=(0,s.l4)(),K=g({theme:F,size:y,variant:x,fill:C,fullWidth:D,iconOnly:!M}),W=n.createElement("button",{className:(0,t.cx)(K.button,b),type:R,...A,ref:I},P&&n.createElement(c.J,{name:P,size:y,className:K.icon}),M&&n.createElement("span",{className:K.content},M));return B?n.createElement(o.u,{content:B,placement:w},W):W});u.displayName="Button";const d=n.forwardRef(({variant:x="primary",size:y="md",fill:C="solid",icon:P,fullWidth:D,children:M,className:b,onBlur:R,onFocus:B,disabled:w,tooltip:A,tooltipPlacement:I,...F},K)=>{const W=(0,s.l4)(),U=g({theme:W,fullWidth:D,size:y,variant:x,fill:C,iconOnly:!M}),N=(0,t.cx)(U.button,{[(0,t.css)(U.disabled,{pointerEvents:"none"})]:w},b),S=n.createElement("a",{className:N,...F,tabIndex:w?-1:0,ref:K},P&&n.createElement(c.J,{name:P,size:y,className:U.icon}),M&&n.createElement("span",{className:U.content},M));return A?n.createElement(o.u,{content:A,placement:I},S):S});d.displayName="LinkButton";const g=x=>{const{theme:y,variant:C,fill:P="solid",size:D,iconOnly:M,fullWidth:b}=x,{height:R,padding:B,fontSize:w}=(0,f.iL)(D,y),A=h(y,C,P),I=E(y,C,P),F=(0,i.getFocusStyles)(y),K=y.spacing.gridSize*B-1;return{button:(0,t.css)({label:"button",display:"inline-flex",alignItems:"center",fontSize:w,fontWeight:y.typography.fontWeightMedium,fontFamily:y.typography.fontFamily,padding:`0 ${K}px`,height:y.spacing(R),lineHeight:`${y.spacing.gridSize*R-2}px`,verticalAlign:"middle",cursor:"pointer",borderRadius:y.shape.borderRadius(1),"&:focus":F,"&:focus-visible":F,"&:focus:not(:focus-visible)":(0,i.getMouseFocusStyles)(y),...b&&{flexGrow:1,justifyContent:"center"},...A,":disabled":I,"&[disabled]":I}),disabled:(0,t.css)(I),img:t.css`
      width: 16px;
      height: 16px;
      margin: ${y.spacing(0,1,0,.5)};
    `,icon:M?(0,t.css)({marginRight:y.spacing(-B/2),marginLeft:y.spacing(-B/2)}):(0,t.css)({marginRight:y.spacing(B/2)}),content:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      white-space: nowrap;
      height: 100%;
    `}};function p(x,y,C){return C==="outline"?{background:"transparent",color:y.text,border:`1px solid ${y.border}`,transition:x.transitions.create(["background-color","border-color","color"],{duration:x.transitions.duration.short}),"&:hover":{background:l.alpha(y.main,x.colors.action.hoverOpacity),borderColor:x.colors.emphasize(y.border,.25),color:y.text}}:C==="text"?{background:"transparent",color:y.text,border:"1px solid transparent",transition:x.transitions.create(["background-color","color"],{duration:x.transitions.duration.short}),"&:focus":{outline:"none",textDecoration:"none"},"&:hover":{background:l.alpha(y.shade,x.colors.action.hoverOpacity),textDecoration:"none"}}:{background:y.main,color:y.contrastText,border:"1px solid transparent",transition:x.transitions.create(["background-color","box-shadow","border-color","color"],{duration:x.transitions.duration.short}),"&:hover":{background:y.shade,color:y.contrastText,boxShadow:x.shadows.z1}}}function E(x,y,C){const P={cursor:"not-allowed",boxShadow:"none",color:x.colors.text.disabled,transition:"none"};return C==="text"?{...P,background:"transparent",border:"1px solid transparent"}:C==="outline"?{...P,background:"transparent",border:`1px solid ${x.colors.action.disabledText}`}:{...P,background:x.colors.action.disabledBackground,border:"1px solid transparent"}}function h(x,y,C){switch(y){case"secondary":return p(x,x.colors.secondary,C);case"destructive":return p(x,x.colors.error,C);case"success":return p(x,x.colors.success,C);case"primary":default:return p(x,x.colors.primary,C)}}const a=x=>t.css`
    background: transparent;
    color: ${x.colors.text.primary};
    border: none;
    padding: 0;
  `,v=x=>t.css`
    background: transparent;
    border: none;
    padding: 0;
    font-family: inherit;
    color: inherit;
    height: 100%;
    &:hover {
      background: transparent;
      color: inherit;
    }
  `},26202:(Z,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=(0,n.forwardRef)(({className:f,children:c,...o},m)=>{const r=(0,l.wW)(i);return n.createElement("div",{ref:m,className:(0,t.cx)("button-group",r.wrapper,f),...o},c)});s.displayName="ButtonGroup";const i=f=>({wrapper:t.css`
    display: flex;

    > .button-group:not(:first-child) > button,
    > button:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    > .button-group:not(:last-child) > button,
    > button:not(:last-child) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
      border-right-width: 0;
    }
  `})},97389:(Z,O,e)=>{"use strict";e.d(O,{f:()=>s});var t=e(9892),n=e(68404),l=e(7804);const s=({className:f,children:c})=>{const o=i();return n.createElement("div",{className:(0,t.cx)(o,f)},c)},i=(0,l.B)(()=>t.css`
    display: flex;

    button {
      flex-grow: 1;
      justify-content: center;
    }

    > * {
      flex-grow: 1;
    }

    label {
      flex-grow: 1;
      text-align: center;
    }
  `)},19974:(Z,O,e)=>{"use strict";e.d(O,{O:()=>r});var t=e(9892),n=e(46862),l=e(68404),s=e(7804),i=e(72648),f=e(31403),c=e(94229),o=e(39904);const m=(0,s.B)(u=>({popup:t.css`
      label: popup;
      z-index: ${u.zIndex.dropdown};
    `,icons:{right:t.css`
        margin: 1px 0 0 4px;
      `,left:t.css`
        margin: -1px 4px 0 0;
      `}})),r=u=>{const{onChange:d,className:g,loadData:p,icon:E,buttonProps:h,hideDownIcon:a,variant:v,disabled:x,...y}=u,C=(0,i.l4)(),P=m(C);let D=u.children;return a||(D=[u.children,l.createElement(o.J,{key:"down-icon",name:"angle-down",className:P.icons.right})]),l.createElement(n.Z,{onChange:(0,c.K)(d),loadData:(0,c.p)(p),dropdownClassName:P.popup,...y,expandIcon:null},l.createElement(f.zx,{icon:E,disabled:x,variant:v,...h??{}},D))};r.displayName="ButtonCascader"},97097:(Z,O,e)=>{"use strict";e.d(O,{_:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({message:f,callToActionElement:c,footer:o,className:m})=>{const r=(0,l.wW)(i);return n.createElement("div",{className:(0,t.cx)([r.wrapper,m])},f&&n.createElement("div",{className:r.message},f),c,o&&n.createElement("div",{className:r.footer},o))},i=f=>({wrapper:t.css`
    label: call-to-action-card;
    padding: ${f.spacing(3)};
    background: ${f.colors.background.secondary};
    border-radius: ${f.shape.radius.default};
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    flex-grow: 1;
  `,message:t.css`
    margin-bottom: ${f.spacing(3)};
    font-style: italic;
  `,footer:t.css`
    margin-top: ${f.spacing(3)}};
  `})},72948:(Z,O,e)=>{"use strict";e.d(O,{L:()=>P,Z:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(85419),i=e(35633);const f=n.createContext(null),c=({disabled:D,href:M,onClick:b,children:R,isSelected:B,className:w,...A})=>{const I=(0,n.useMemo)(()=>n.Children.toArray(R).some(N=>n.isValidElement(N)&&N.type.displayName===o.displayName),[R]),F=D||!b&&!M,K=b&&!D?b:void 0,W=(0,l.l4)(),U=(0,i.$)(W,D,F,B);return n.createElement(i._,{disableEvents:D,disableHover:F,isSelected:B,className:(0,t.cx)(U.container,w),...A},n.createElement(f.Provider,{value:{href:M,onClick:K,disabled:D,isSelected:B}},!I&&n.createElement(o,null),R))},o=({children:D,className:M,"aria-label":b})=>{const R=(0,n.useContext)(f),B=(0,l.wW)(m),{href:w,onClick:A,isSelected:I}=R??{href:void 0,onClick:void 0,isSelected:void 0};return n.createElement("h2",{className:(0,t.cx)(B.heading,M)},w?n.createElement("a",{href:w,className:B.linkHack,"aria-label":b,onClick:A},D):A?n.createElement("button",{onClick:A,className:B.linkHack,"aria-label":b,type:"button"},D):n.createElement(n.Fragment,null,D),I!==void 0&&n.createElement("input",{"aria-label":"option",type:"radio",readOnly:!0,checked:I}))};o.displayName="Heading";const m=D=>({heading:(0,t.css)({gridArea:"Heading",justifySelf:"start",display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",marginBottom:0,fontSize:D.typography.size.md,letterSpacing:"inherit",lineHeight:D.typography.body.lineHeight,color:D.colors.text.primary,fontWeight:D.typography.fontWeightMedium}),linkHack:(0,t.css)({all:"unset","&::after":{position:"absolute",content:'""',top:0,bottom:0,left:0,right:0,borderRadius:D.shape.borderRadius(1)},"&:focus-visible":{outline:"none",outlineOffset:0,boxShadow:"none","&::after":{...(0,s.getFocusStyles)(D),zIndex:1}}})}),r=({children:D,className:M})=>{const b=(0,l.wW)(u);return n.createElement("div",{className:(0,t.cx)(b.tagList,M)},D)};r.displayName="Tags";const u=D=>({tagList:(0,t.css)({position:"relative",gridArea:"Tags",alignSelf:"center"})}),d=({children:D,className:M})=>{const b=(0,l.wW)(g);return n.createElement("p",{className:(0,t.cx)(b.description,M)},D)};d.displayName="Description";const g=D=>({description:(0,t.css)({width:"100%",gridArea:"Description",margin:D.spacing(1,0,0),color:D.colors.text.secondary,lineHeight:D.typography.body.lineHeight})}),p=({children:D,align:M="start",className:b})=>{const R=(0,l.wW)(E);return n.createElement("div",{className:(0,t.cx)(R.media,b,t.css`
          align-self: ${M};
        `)},D)};p.displayName="Figure";const E=D=>({media:(0,t.css)({position:"relative",gridArea:"Figure",marginRight:D.spacing(2),width:"40px","> img":{width:"100%"},"&:empty":{display:"none"}})}),h=(0,n.memo)(({children:D,className:M,separator:b="|"})=>{const R=(0,l.wW)(a);let B=D;const w=n.Children.toArray(D).filter(Boolean);return w.length?(B=w.map((A,I)=>n.createElement("div",{key:`element_${I}`,className:R.metadataItem},A)),w.length>1&&b&&(B=w.reduce((A,I,F)=>[A,n.createElement("span",{key:`separator_${F}`,className:R.separator},b),I])),n.createElement("div",{className:(0,t.cx)(R.metadata,M)},B)):null});h.displayName="Meta";const a=D=>({metadata:(0,t.css)({gridArea:"Meta",display:"flex",alignItems:"center",width:"100%",fontSize:D.typography.size.sm,color:D.colors.text.secondary,margin:D.spacing(.5,0,0),lineHeight:D.typography.bodySmall.lineHeight,overflowWrap:"anywhere"}),metadataItem:(0,t.css)({zIndex:0}),separator:(0,t.css)({margin:`0 ${D.spacing(1)}`})}),v=({children:D,disabled:M,variant:b,className:R})=>{const B=(0,l.wW)(x),A=(0,n.useContext)(f)?.disabled||M,I=b==="primary"?B.actions:B.secondaryActions;return n.createElement("div",{className:(0,t.cx)(I,R)},n.Children.map(D,F=>n.isValidElement(F)?(0,n.cloneElement)(F,{disabled:A,...F.props}):null))},x=D=>({actions:(0,t.css)({gridArea:"Actions",marginTop:D.spacing(2),"& > *":{marginRight:D.spacing(1)}}),secondaryActions:(0,t.css)({display:"flex",gridArea:"Secondary",alignSelf:"center",color:D.colors.text.secondary,marginTtop:D.spacing(2),"& > *":{marginRight:`${D.spacing(1)} !important`}})}),y=({children:D,disabled:M,className:b})=>n.createElement(v,{variant:"primary",disabled:M,className:b},D);y.displayName="Actions";const C=({children:D,disabled:M,className:b})=>n.createElement(v,{variant:"secondary",disabled:M,className:b},D);C.displayName="SecondaryActions";const P=D=>({inner:t.css`
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      flex-wrap: wrap;
    `,...m(D),...a(D),...g(D),...E(D),...x(D),...u(D)});c.Heading=o,c.Tags=r,c.Figure=p,c.Meta=h,c.Actions=y,c.SecondaryActions=C,c.Description=d},35633:(Z,O,e)=>{"use strict";e.d(O,{$:()=>m,_:()=>o});var t=e(9892),n=e(68404),l=e(72648),s=e(7804),i=e(85419);const f=({children:r,href:u})=>{const{inner:d}=(0,l.wW)(c);return u?n.createElement("a",{className:d,href:u},r):n.createElement(n.Fragment,null,r)},c=r=>({inner:(0,t.css)({display:"flex",width:"100%",padding:r.spacing(2)})}),o=({children:r,disableEvents:u,disableHover:d,isSelected:g,className:p,href:E,...h})=>{const a=(0,l.l4)(),{oldContainer:v}=m(a,u,d,g);return n.createElement("div",{...h,className:(0,t.cx)(v,p)},n.createElement(f,{href:E},r))},m=(0,s.B)((r,u=!1,d=!1,g)=>{const p=g!==void 0;return{container:(0,t.css)({display:"grid",position:"relative",gridTemplateColumns:"auto 1fr auto",gridTemplateRows:"1fr auto auto auto",gridAutoColumns:"1fr",gridAutoFlow:"row",gridTemplateAreas:`
        "Figure Heading Tags"
        "Figure Meta Tags"
        "Figure Description Tags"
        "Figure Actions Secondary"`,width:"100%",padding:r.spacing(2),background:r.colors.background.secondary,borderRadius:r.shape.borderRadius(),marginBottom:"8px",pointerEvents:u?"none":"auto",transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),...!d&&{"&:hover":{background:r.colors.emphasize(r.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(r)},...p&&{cursor:"pointer"},...g&&{outline:`solid 2px ${r.colors.primary.border}`}}),oldContainer:(0,t.css)({display:"flex",width:"100%",background:r.colors.background.secondary,borderRadius:r.shape.borderRadius(),position:"relative",pointerEvents:u?"none":"auto",marginBottom:r.spacing(1),transition:r.transitions.create(["background-color","box-shadow","border-color","color"],{duration:r.transitions.duration.short}),...!d&&{"&:hover":{background:r.colors.emphasize(r.colors.background.secondary,.03),cursor:"pointer",zIndex:1},"&:focus":i.getFocusStyles(r)}})}})},95093:(Z,O,e)=>{"use strict";e.d(O,{v:()=>u});var t=e(9892),n=e(58635),l=e(46862),s=e(68404),i=e(39904),f=e(46967),c=e(53217),o=e(94229);const m=(0,t.css)(`
&:focus{
  outline: none;
}
`),r="/";class u extends s.PureComponent{constructor(g){super(g),this.flattenOptions=(a,v=[])=>{let x=[];for(const y of a){const C=[...v];C.push(y),y.items?x=[...x,...this.flattenOptions(y.items,C)]:x.push({singleLabel:C[C.length-1].label,label:C.map(P=>P.label).join(this.props.separator||` ${r} `),value:C.map(P=>P.value)})}return x},this.getSearchableOptions=(0,n.Z)(a=>this.flattenOptions(a)),this.onChange=(a,v)=>{const x=this.props.hideActiveLevelLabel?"":this.props.displayAllSelectedLevels?v.map(y=>y.label).join(this.props.separator||r):v[v.length-1].label;this.setState({rcValue:a,focusCascade:!0,activeLabel:x}),this.props.onSelect(v[v.length-1].value)},this.onSelect=a=>{const v=a.value||[];this.setState({activeLabel:this.props.displayAllSelectedLevels?a.label:a.singleLabel||"",rcValue:v,isSearching:!1}),this.props.onSelect(v[v.length-1])},this.onCreateOption=a=>{this.setState({activeLabel:a,rcValue:[],isSearching:!1}),this.props.onSelect(a)},this.onBlur=()=>{this.setState({isSearching:!1,focusCascade:!1}),this.state.activeLabel===""&&this.setState({rcValue:[]}),this.props.onBlur?.()},this.onBlurCascade=()=>{this.setState({focusCascade:!1}),this.props.onBlur?.()},this.onInputKeyDown=a=>{["ArrowDown","ArrowUp","Enter","ArrowLeft","ArrowRight","Backspace"].includes(a.key)||this.setState({focusCascade:!1,isSearching:!0})},this.onSelectInputChange=a=>{a===""&&this.setState({isSearching:!1})};const p=this.getSearchableOptions(g.options),{rcValue:E,activeLabel:h}=this.setInitialValue(p,g.initialValue);this.state={isSearching:!1,focusCascade:!1,rcValue:E,activeLabel:h}}setInitialValue(g,p){if(!p)return{rcValue:[],activeLabel:""};for(const E of g){const h=E.value||[];if(h.indexOf(p)===h.length-1)return{rcValue:h,activeLabel:this.props.displayAllSelectedLevels?E.label:E.singleLabel||""}}return this.props.allowCustomValue?{rcValue:[],activeLabel:p}:{rcValue:[],activeLabel:""}}render(){const{allowCustomValue:g,formatCreateLabel:p,placeholder:E,width:h,changeOnSelect:a,options:v}=this.props,{focusCascade:x,isSearching:y,rcValue:C,activeLabel:P}=this.state,D=this.getSearchableOptions(v);return s.createElement("div",null,y?s.createElement(c.Ph,{allowCustomValue:g,placeholder:E,autoFocus:!x,onChange:this.onSelect,onBlur:this.onBlur,options:D,onCreateOption:this.onCreateOption,formatCreateLabel:p,width:h,onInputChange:this.onSelectInputChange}):s.createElement(l.Z,{onChange:(0,o.K)(this.onChange),options:v,changeOnSelect:a,value:C.value,fieldNames:{label:"label",value:"value",children:"items"},expandIcon:null,open:this.props.alwaysOpen},s.createElement("div",{className:m},s.createElement(f.I,{autoFocus:this.props.autoFocus,width:h,placeholder:E,onBlur:this.onBlurCascade,value:P,onKeyDown:this.onInputKeyDown,onChange:()=>{},suffix:x?s.createElement(i.J,{name:"angle-up"}):s.createElement(i.J,{name:"angle-down",style:{marginBottom:0,marginLeft:"4px"}})}))))}}u.defaultProps={changeOnSelect:!0}},94229:(Z,O,e)=>{"use strict";e.d(O,{K:()=>t,p:()=>n});const t=i=>(f,c)=>{i&&i(f.map(o=>String(o)),l(c))},n=i=>f=>{i&&i(l(f))},l=i=>i.map(s),s=i=>({value:i.value??"",label:i.label})},94437:(Z,O,e)=>{"use strict";e.d(O,{L:()=>n});var t=e(68404);class n extends t.PureComponent{constructor(){super(...arguments),this.myRef=(0,t.createRef)(),this.state={hasEventListener:!1},this.onOutsideClick=s=>{const i=this.myRef.current;(!i||!i.contains(s.target))&&this.props.onClick()}}componentDidMount(){this.props.parent.addEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.addEventListener("keyup",this.onOutsideClick,this.props.useCapture)}componentWillUnmount(){this.props.parent.removeEventListener("click",this.onOutsideClick,this.props.useCapture),this.props.includeButtonPress&&this.props.parent.removeEventListener("keyup",this.onOutsideClick,this.props.useCapture)}render(){return t.createElement("div",{ref:this.myRef},this.props.children)}}n.defaultProps={includeButtonPress:!0,parent:typeof window<"u"?window:null,useCapture:!1}},94599:(Z,O,e)=>{"use strict";e.d(O,{m:()=>m});var t=e(9892),n=e(68404),l=e(37951),s=e(72648),i=e(31403),f=e(39904),c=e(4784);const o=2*1e3;function m({onClipboardCopy:d,onClipboardError:g,children:p,getText:E,icon:h,variant:a,...v}){const x=(0,s.wW)(u),[y,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let M;return y&&(M=setTimeout(()=>{C(!1)},o)),()=>{window.clearTimeout(M)}},[y]);const P=(0,n.useRef)(null),D=(0,n.useCallback)(async()=>{const M=E();try{await r(M,P),C(!0),d?.(M)}catch(b){g?.(M,b)}},[E,d,g]);return n.createElement(n.Fragment,null,y&&n.createElement(c.K,{placement:"top",referenceElement:P.current},n.createElement(l.c,{i18nKey:"clipboard-button.inline-toast.success"},"Copied")),n.createElement(i.zx,{onClick:D,icon:h,variant:y?"success":a,"aria-label":y?"Copied":void 0,...v,className:(0,t.cx)(x.button,y&&x.successButton),ref:P},p,y&&n.createElement("div",{className:x.successOverlay},n.createElement(f.J,{name:"check"}))))}const r=async(d,g)=>{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(d);{const p=document.createElement("textarea");g.current?.appendChild(p),p.value=d,p.focus(),p.select(),document.execCommand("copy"),p.remove()}},u=d=>({button:(0,t.css)({position:"relative"}),successButton:(0,t.css)({"> *":(0,t.css)({visibility:"hidden"})}),successOverlay:(0,t.css)({position:"absolute",top:0,bottom:0,right:0,left:0,visibility:"visible"})})},20941:(Z,O,e)=>{"use strict";e.d(O,{s:()=>m});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(67487),f=e(39904),c=e(72648),o=e(85419);const m=({label:u,isOpen:d,onToggle:g,className:p,contentClassName:E,children:h,labelId:a,loading:v=!1,headerDataTestId:x,contentDataTestId:y})=>{const[C,P]=(0,s.useState)(d),D=(0,c.wW)(r),M=B=>{B.target instanceof HTMLElement&&B.target.tagName==="A"||(B.preventDefault(),B.stopPropagation(),g?.(!C),P(!C))},{current:b}=(0,s.useRef)((0,n.uniqueId)()),R=a??`collapse-label-${b}`;return s.createElement(s.Fragment,null,s.createElement("div",{onClick:M,className:(0,t.cx)(D.header,p)},s.createElement("button",{type:"button",id:`collapse-button-${b}`,className:D.button,onClick:M,"aria-expanded":C&&!v,"aria-controls":`collapse-content-${b}`,"aria-labelledby":R},v?s.createElement(i.$,{className:D.spinner}):s.createElement(f.J,{name:C?"angle-up":"angle-down",className:D.icon})),s.createElement("div",{className:D.label,id:`collapse-label-${b}`,"data-testid":x},u)),C&&s.createElement("div",{id:`collapse-content-${b}`,className:(0,t.cx)(D.content,E),"data-testid":y},h))},r=u=>({header:(0,t.css)({display:"flex",cursor:"pointer",boxSizing:"border-box",flexDirection:"row-reverse",position:"relative",justifyContent:"space-between",fontSize:u.typography.size.lg,padding:`${u.spacing(.5)} 0`,"&:focus-within":(0,o.getFocusStyles)(u)}),button:(0,t.css)({all:"unset","&:focus-visible":{outline:"none",outlineOffset:"unset",transition:"none",boxShadow:"none"}}),icon:(0,t.css)({color:u.colors.text.secondary}),content:(0,t.css)({padding:`${u.spacing(2)} 0`}),spinner:(0,t.css)({display:"flex",alignItems:"center",width:u.spacing(2)}),label:(0,t.css)({display:"flex"})})},2352:(Z,O,e)=>{"use strict";e.d(O,{U:()=>o,y:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(31403),i=e(39904);const f=m=>({collapse:t.css`
    label: collapse;
    margin-bottom: ${m.spacing(1)};
    background-color: ${m.colors.background.primary};
    border: 1px solid ${m.colors.border.medium};
    position: relative;
    border-radius: ${m.shape.radius.default};
    width: 100%;
    display: flex;
    flex-direction: column;
    flex: 1 1 0;
  `,collapseBody:t.css`
    label: collapse__body;
    padding: ${m.spacing(m.components.panel.padding)};
    padding-top: 0;
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
  `,bodyContentWrapper:t.css`
    label: bodyContentWrapper;
    flex: 1;
    overflow: hidden;
  `,loader:t.css`
    label: collapse__loader;
    height: 2px;
    position: relative;
    overflow: hidden;
    background: none;
    margin: ${m.spacing(.5)};
  `,loaderActive:t.css`
    label: collapse__loader_active;
    &:after {
      content: ' ';
      display: block;
      width: 25%;
      top: 0;
      top: -50%;
      height: 250%;
      position: absolute;
      animation: loader 2s cubic-bezier(0.17, 0.67, 0.83, 0.67) 500ms;
      animation-iteration-count: 100;
      left: -25%;
      background: ${m.colors.primary.main};
    }
    @keyframes loader {
      from {
        left: -25%;
        opacity: 0.1;
      }
      to {
        left: 100%;
        opacity: 1;
      }
    }
  `,header:t.css`
    label: collapse__header;
    padding: ${m.spacing(1,2,1,2)};
    display: flex;
    transition: all 0.1s linear;
  `,headerCollapsed:t.css`
    label: collapse__header--collapsed;
    padding: ${m.spacing(1,2,1,2)};
  `,headerLabel:t.css`
    label: collapse__header-label;
    font-weight: ${m.typography.fontWeightMedium};
    margin-right: ${m.spacing(1)};
    font-size: ${m.typography.size.md};
  `,icon:t.css`
    label: collapse__icon;
    margin: ${m.spacing(.25,1,0,-1)};
  `}),c=({isOpen:m,onToggle:r,...u})=>{const[d,g]=(0,n.useState)(m);return n.createElement(o,{isOpen:d,collapsible:!0,...u,onToggle:()=>{g(!d),r&&r(!d)}})},o=({isOpen:m,label:r,loading:u,collapsible:d,onToggle:g,className:p,children:E})=>{const h=(0,l.wW)(s.gN),a=(0,l.wW)(f),v=()=>{g&&g(!m)},x=(0,t.cx)([a.collapse,p]),y=u?(0,t.cx)([a.loader,a.loaderActive]):(0,t.cx)([a.loader]),C=d?(0,t.cx)([a.header]):(0,t.cx)([a.headerCollapsed]);return n.createElement("div",{className:x},n.createElement("button",{type:"button",className:(0,t.cx)(h,C),onClick:v},d&&n.createElement(i.J,{className:a.icon,name:m?"angle-down":"angle-right"}),n.createElement("div",{className:(0,t.cx)([a.headerLabel])},r)),m&&n.createElement("div",{className:(0,t.cx)([a.collapseBody])},n.createElement("div",{className:y}),n.createElement("div",{className:a.bodyContentWrapper},E)))};o.displayName="Collapse"},76161:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>m});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(28550),f=e(72648),c=e(46967);const o=(0,s.forwardRef)(({color:d,onChange:g,isClearable:p=!1,onClick:E,onBlur:h,disabled:a,buttonAriaLabel:v,...x},y)=>{const[C,P]=(0,s.useState)(d),[D,M]=(0,s.useState)(d),b=(0,s.useMemo)(()=>(0,n.debounce)(g,100),[]);(0,s.useEffect)(()=>{const w=(0,i.Z)(d);w.isValid()&&d!==D&&(P(w.toString()),M(d))},[d,D]);const R=w=>{const{value:A}=w.currentTarget;if(P(A),A===""&&p){b(A);return}const I=(0,i.Z)(A);I.isValid()&&b(I.toString())},B=w=>{(0,i.Z)(C).isValid()||P(d),h?.(w)};return s.createElement(c.I,{...x,value:C,onChange:R,disabled:a,onClick:E,onBlur:B,addonBefore:s.createElement(r,{onClick:E,ariaLabel:v,disabled:a,color:d}),ref:y})});o.displayName="ColorInput";const m=o,r=({color:d,onClick:g,disabled:p,ariaLabel:E})=>{const h=(0,f.wW)(u);return s.createElement("button",{type:"button",onClick:g,"aria-label":E,disabled:p||!g,className:(0,t.cx)(h,t.css`
          background-color: ${d};
        `)})},u=d=>t.css`
  height: 100%;
  width: ${d.spacing.gridSize*4}px;
  border-radius: ${d.shape.borderRadius()} 0 0 ${d.shape.borderRadius()};
  border: 1px solid ${d.colors.border.medium};
`},90208:(Z,O,e)=>{"use strict";e.d(O,{sp:()=>g,zH:()=>d});var t=e(9892),n=e(68404),l=e(72648),s=e(7804),i=e(66120),f=e(56921),c=e(39604),o=e(560),m=e(98671),r=e(43598);const u=(E,h="ColorPicker")=>{var a;return a=class extends n.Component{constructor(){super(...arguments),this.pickerTriggerRef=(0,n.createRef)()}render(){const{theme:v,children:x,onChange:y}=this.props,C=p(v),P=n.createElement(E,{...this.props,children:null,onChange:y});return n.createElement(c.D,{content:P,hideAfter:300},(D,M,b)=>n.createElement(n.Fragment,null,this.pickerTriggerRef.current&&n.createElement(f.J,{...b,referenceElement:this.pickerTriggerRef.current,wrapperClassName:C.colorPicker,onMouseLeave:M,onMouseEnter:D,onKeyDown:R=>(0,i.i)(R,M)}),x?x({ref:this.pickerTriggerRef,showColorPicker:D,hideColorPicker:M}):n.createElement(m.b,{ref:this.pickerTriggerRef,onClick:D,onMouseLeave:M,color:v.visualization.getColorByName(this.props.color||"#000000")})))}},a.displayName=h,a},d=(0,l.HE)(u(o.h,"ColorPicker")),g=(0,l.HE)(u(r.j,"SeriesColorPicker")),p=(0,s.B)(E=>({colorPicker:t.css`
      position: absolute;
      z-index: ${E.zIndex.tooltip};
      color: ${E.colors.text.primary};
      max-width: 400px;
      font-size: ${E.typography.size.sm};
      // !important because these styles are also provided to popper via .popper classes from Tooltip component
      // hope to get rid of those soon
      padding: 15px !important;
      & [data-placement^='top'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='bottom'] {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      & [data-placement^='left'] {
        padding-top: 0 !important;
      }
      & [data-placement^='right'] {
        padding-top: 0 !important;
      }
    `}))},83957:(Z,O,e)=>{"use strict";e.d(O,{T:()=>r});var t=e(9892),n=e(68404),l=e(35206),s=e(20053),i=e(64724),f=e(72648),c=e(94437),o=e(76161),m=e(96639);const r=(0,n.forwardRef)(({value:d="",onChange:g,returnColorAs:p="rgb",...E},h)=>{const[a,v]=(0,n.useState)(d),[x,y]=(0,n.useState)(!1),C=(0,f.l4)(),P=(0,f.wW)(u),D=(0,f.wW)(m.W);return(0,s.Z)(M=>{if(M===d)return;if(!M){g("");return}const b=C.visualization.getColorByName(M);g(p==="rgb"?i.asRgbString(b):i.asHexString(b))},500,[a]),n.createElement(c.L,{onClick:()=>y(!1)},n.createElement("div",{className:P.wrapper},x&&!E.disabled&&n.createElement(l.ef,{"data-testid":"color-popover",color:a,onChange:v,className:(0,t.cx)(D.root,P.picker)}),n.createElement(o.Z,{...E,theme:C,color:a,onChange:v,buttonAriaLabel:"Open color picker",onClick:()=>y(!0),onBlur:()=>y(!1),ref:h,isClearable:!0})))});r.displayName="ColorPickerInput";const u=d=>({wrapper:t.css`
      position: relative;
    `,picker:t.css`
      &.react-colorful {
        position: absolute;
        width: 100%;
        z-index: 11;
        bottom: 36px;
      }
    `,inner:t.css`
      position: absolute;
    `})},560:(Z,O,e)=>{"use strict";e.d(O,{h:()=>a});var t=e(9892),n=e(81699),l=e(68404),s=e(64724),i=e(72648),f=e(7804),c=e(98671),o=e(82897);function m(x,y){const C=new Array(x.length);for(let P=0;P<x.length;P++){const D=x.length-1-P;C[P]=y(x[D],D,x)}return C}const u=({hue:x,selectedColor:y,onColorSelect:C,...P})=>{const D=(0,o.upperFirst)(x.name),M=(0,i.wW)(d);return l.createElement("div",{className:M.colorRow},l.createElement("div",{className:M.colorLabel},D),l.createElement("div",{...P,className:M.swatchRow},m(x.shades,b=>l.createElement(c.b,{key:b.name,"aria-label":b.name,variant:b.primary?c.$.Large:c.$.Small,isSelected:b.name===y,color:b.color,onClick:()=>C(b.name)}))))},d=x=>({colorRow:t.css`
      display: grid;
      grid-template-columns: 25% 1fr;
      grid-column-gap: ${x.spacing(2)};
      padding: ${x.spacing(.5,0)};

      &:hover {
        background: ${x.colors.background.secondary};
      }
    `,colorLabel:t.css`
      padding-left: ${x.spacing(2)};
      display: flex;
      align-items: center;
    `,swatchRow:t.css`
      display: flex;
      gap: ${x.spacing(1)};
      align-items: center;
      justify-content: space-around;
      flex-direction: row;
    `}),g=({color:x,onChange:y})=>{const C=(0,i.l4)(),P=(0,i.wW)(p),D=[];for(const M of C.visualization.hues)D.push(l.createElement(u,{key:M.name,selectedColor:x,hue:M,onColorSelect:y}));return l.createElement(l.Fragment,null,l.createElement("div",{className:P.swatches},D),l.createElement("div",{className:P.extraColors},l.createElement(c.b,{isSelected:x==="transparent",color:"rgba(0,0,0,0)",label:"Transparent",onClick:()=>y("transparent")}),l.createElement(c.b,{isSelected:x==="text",color:C.colors.text.primary,label:"Text color",onClick:()=>y("text")})))},p=x=>({container:t.css`
      display: flex;
      flex-direction: column;
    `,extraColors:t.css`
      display: flex;
      align-items: center;
      justify-content: space-around;
      gap: ${x.spacing(1)};
      padding: ${x.spacing(1,0)};
    `,swatches:t.css`
      display: grid;
      flex-grow: 1;
    `});var E=e(96639);class h extends l.Component{constructor(y){super(y),this.getTabClassName=C=>{const{activePicker:P}=this.state;return`ColorPickerPopover__tab ${P===C&&"ColorPickerPopover__tab--active"}`},this.handleChange=C=>{const{onChange:P,enableNamedColors:D,theme:M}=this.props;if(D)return P(C);P(s.asHexString(M.visualization.getColorByName(C)))},this.onTabChange=C=>()=>this.setState({activePicker:C}),this.renderPicker=()=>{const{activePicker:C}=this.state,{color:P}=this.props;switch(C){case"spectrum":return l.createElement(E.Z,{color:P,onChange:this.handleChange});case"palette":return l.createElement(g,{color:P,onChange:this.handleChange});default:return this.renderCustomPicker(C)}},this.renderCustomPicker=C=>{const{customPickers:P,color:D,theme:M}=this.props;return P?l.createElement(P[C].tabComponent,{color:D,theme:M,onChange:this.handleChange}):null},this.renderCustomPickerTabs=()=>{const{customPickers:C}=this.props;return C?l.createElement(l.Fragment,null,Object.keys(C).map(P=>l.createElement("button",{className:this.getTabClassName(P),onClick:this.onTabChange(P),key:P},C[P].name))):null},this.state={activePicker:"palette"}}render(){const{theme:y}=this.props,C=v(y);return l.createElement(n.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},l.createElement("div",{tabIndex:-1,className:C.colorPickerPopover},l.createElement("div",{className:C.colorPickerPopoverTabs},l.createElement("button",{className:this.getTabClassName("palette"),onClick:this.onTabChange("palette")},"Colors"),l.createElement("button",{className:this.getTabClassName("spectrum"),onClick:this.onTabChange("spectrum")},"Custom"),this.renderCustomPickerTabs()),l.createElement("div",{className:C.colorPickerPopoverContent},this.renderPicker())))}}const a=(0,i.HE)(h);a.displayName="ColorPickerPopover";const v=(0,f.B)(x=>({colorPickerPopover:t.css`
      border-radius: ${x.shape.borderRadius()};
      box-shadow: ${x.shadows.z3};
      background: ${x.colors.background.primary};
      border: 1px solid ${x.colors.border.medium};

      .ColorPickerPopover__tab {
        width: 50%;
        text-align: center;
        padding: ${x.spacing(1,0)};
        background: ${x.colors.background.secondary};
        color: ${x.colors.text.secondary};
        font-size: ${x.typography.bodySmall.fontSize};
        cursor: pointer;
        border: none;

        &:focus:not(:focus-visible) {
          outline: none;
          box-shadow: none;
        }

        :focus-visible {
          position: relative;
        }
      }

      .ColorPickerPopover__tab--active {
        color: ${x.colors.text.primary};
        font-weight: ${x.typography.fontWeightMedium};
        background: ${x.colors.background.primary};
      }
    `,colorPickerPopoverContent:t.css`
      width: 246px;
      font-size: ${x.typography.bodySmall.fontSize};
      min-height: 184px;
      padding: ${x.spacing(1)};
      display: flex;
      flex-direction: column;
    `,colorPickerPopoverTabs:t.css`
      display: flex;
      width: 100%;
      border-radius: ${x.shape.borderRadius()} ${x.shape.borderRadius()} 0 0;
    `}))},98671:(Z,O,e)=>{"use strict";e.d(O,{$:()=>c,b:()=>o});var t=e(9892),n=e(81699),l=e(68404),s=e(28550),i=e(68183),f=e(72648),c=(r=>(r.Small="small",r.Large="large",r))(c||{});const o=l.forwardRef(({color:r,label:u,variant:d="small",isSelected:g,"aria-label":p,...E},h)=>{const a=(0,f.l4)(),{isFocusVisible:v,focusProps:x}=(0,n.Fx)(),y=m(a,d,r,v,g),C=!!u,P=`${p||u} color`;return l.createElement("div",{ref:h,className:y.wrapper,"data-testid":i.wl.components.ColorSwatch.name,...E},C&&l.createElement("span",{className:y.label},u),l.createElement("button",{className:y.swatch,...x,"aria-label":P}))}),m=(r,u,d,g,p)=>{const E=(0,s.Z)(d),a=u==="small"?"16px":"32px";let v="none";return E.getAlpha()<.1&&(v=`2px solid ${r.colors.border.medium}`),{wrapper:(0,t.css)({display:"flex",alignItems:"center",cursor:"pointer"}),label:(0,t.css)({marginRight:r.spacing(1)}),swatch:(0,t.css)({width:a,height:a,background:`${d}`,border:v,borderRadius:"50%",outlineOffset:"1px",outline:g?`2px solid  ${r.colors.primary.main}`:"none",boxShadow:p?`inset 0 0 0 2px ${d}, inset 0 0 0 4px ${r.colors.getContrastText(d)}`:"none",transition:r.transitions.create(["transform"],{duration:r.transitions.duration.short}),"&:hover":{transform:"scale(1.1)"}})}};o.displayName="ColorSwatch"},43598:(Z,O,e)=>{"use strict";e.d(O,{j:()=>f,q:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(18979),i=e(560);const f=m=>{const r=(0,l.wW)(o),{yaxis:u,onToggleAxis:d,color:g,...p}=m,E=d?{yaxis:{name:"Y-Axis",tabComponent(){return n.createElement(s.r,{key:"yaxisSwitch",label:"Use right y-axis",className:r.colorPickerAxisSwitch,labelClass:r.colorPickerAxisSwitchLabel,checked:u===2,onChange:()=>{d&&d()}})}}}:void 0;return n.createElement(i.h,{...p,color:g||"#000000",customPickers:E})},c=(0,l.HE)(f),o=()=>({colorPickerAxisSwitch:t.css`
      width: 100%;
    `,colorPickerAxisSwitchLabel:t.css`
      display: flex;
      flex-grow: 1;
    `})},96639:(Z,O,e)=>{"use strict";e.d(O,{W:()=>r,Z:()=>u});var t=e(9892),n=e(68404),l=e(35206),s=e(20053),i=e(28550),f=e(64724),c=e(72648),o=e(76161);const m=({color:d,onChange:g})=>{const[p,E]=(0,n.useState)(d);(0,s.Z)(x=>{g(f.asHexString(h.visualization.getColorByName(x)))},500,[p]);const h=(0,c.l4)(),a=(0,c.wW)(r),v=(0,n.useMemo)(()=>p.startsWith("rgba")?p:(0,i.Z)(h.visualization.getColorByName(d)).toRgbString(),[p,h,d]);return n.createElement("div",{className:a.wrapper},n.createElement(l.ef,{className:a.root,color:v,onChange:E}),n.createElement(o.Z,{theme:h,color:v,onChange:E,className:a.colorInput}))},r=d=>({wrapper:t.css`
    flex-grow: 1;
  `,root:t.css`
    &.react-colorful {
      width: auto;
    }

    .react-colorful {
      &__saturation {
        border-radius: ${d.shape.borderRadius(1)} ${d.shape.borderRadius(1)} 0 0;
      }
      &__alpha {
        border-radius: 0 0 ${d.shape.borderRadius(1)} ${d.shape.borderRadius(1)};
      }
      &__alpha,
      &__hue {
        height: ${d.spacing(2)};
        position: relative;
      }
      &__pointer {
        height: ${d.spacing(2)};
        width: ${d.spacing(2)};
      }
    }
  `,colorInput:t.css`
    margin-top: ${d.spacing(2)};
  `}),u=m},71657:(Z,O,e)=>{"use strict";e.d(O,{p:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(7804),i=e(31403);class f extends n.PureComponent{constructor(){super(...arguments),this.mainButtonRef=n.createRef(),this.confirmButtonRef=n.createRef(),this.state={showConfirm:!1},this.onClickButton=r=>{r&&r.preventDefault(),this.setState({showConfirm:!0},()=>{this.props.autoFocus&&this.confirmButtonRef.current&&this.confirmButtonRef.current.focus()}),this.props.onClick&&this.props.onClick()},this.onClickCancel=r=>{r&&r.preventDefault(),this.setState({showConfirm:!1},()=>{this.mainButtonRef.current?.focus()}),this.props.onCancel&&this.props.onCancel()},this.onConfirm=r=>{r&&r.preventDefault(),this.props.onConfirm(),this.props.closeOnConfirm&&this.setState({showConfirm:!1})}}render(){const{theme:r,className:u,size:d,disabled:g,confirmText:p,confirmVariant:E,children:h}=this.props,a=o(r),v=(0,t.cx)(u,this.state.showConfirm?a.buttonHide:a.buttonShow,g&&a.buttonDisabled),x=(0,t.cx)(a.confirmButton,this.state.showConfirm?a.confirmButtonShow:a.confirmButtonHide),y=g?()=>{}:this.onClickButton;return n.createElement("span",{className:a.buttonContainer},n.createElement("div",{className:(0,t.cx)(g&&a.disabled)},typeof h=="string"?n.createElement("span",{className:v},n.createElement(i.zx,{size:d,fill:"text",onClick:y,ref:this.mainButtonRef},h)):n.createElement("span",{className:v,onClick:y},h)),n.createElement("span",{className:x},n.createElement(i.zx,{size:d,variant:E,onClick:this.onConfirm,ref:this.confirmButtonRef},p),n.createElement(i.zx,{size:d,fill:"text",onClick:this.onClickCancel},"Cancel")))}}const c=(0,l.HE)(f),o=(0,s.B)(m=>({buttonContainer:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-end;
    `,buttonDisabled:t.css`
      text-decoration: none;
      color: ${m.colors.text.primary};
      opacity: 0.65;
      pointer-events: none;
    `,buttonShow:t.css`
      opacity: 1;
      transition: opacity 0.1s ease;
      z-index: 2;
    `,buttonHide:t.css`
      opacity: 0;
      transition: opacity 0.1s ease, visibility 0 0.1s;
      visibility: hidden;
      z-index: 0;
    `,confirmButton:t.css`
      align-items: flex-start;
      background: ${m.colors.background.primary};
      display: flex;
      position: absolute;
      pointer-events: none;
    `,confirmButtonShow:t.css`
      z-index: 1;
      opacity: 1;
      transition: opacity 0.08s ease-out, transform 0.1s ease-out;
      transform: translateX(0);
      pointer-events: all;
    `,confirmButtonHide:t.css`
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.12s ease-in, transform 0.14s ease-in, visibility 0s 0.12s;
      transform: translateX(100px);
    `,disabled:t.css`
      cursor: not-allowed;
    `}));c.defaultProps={size:"md",confirmText:"Save",disabled:!1,confirmVariant:"primary"},c.displayName="ConfirmButton"},13626:(Z,O,e)=>{"use strict";e.d(O,{m:()=>s});var t=e(68404),n=e(31403),l=e(71657);const s=({size:i,disabled:f,onConfirm:c,"aria-label":o,closeOnConfirm:m})=>t.createElement(l.p,{confirmText:"Delete",confirmVariant:"destructive",size:i||"md",disabled:f,onConfirm:c,closeOnConfirm:m},t.createElement(n.zx,{"aria-label":o,variant:"destructive",icon:"times",size:i||"sm"}))},98102:(Z,O,e)=>{"use strict";e.d(O,{s:()=>m});var t=e(9892),n=e(68404),l=e(68183),s=e(52081),i=e(46967),f=e(72648),c=e(31403),o=e(35029);const m=({isOpen:u,title:d,body:g,description:p,confirmText:E,confirmVariant:h="destructive",confirmationText:a,dismissText:v="Cancel",dismissVariant:x="secondary",alternativeText:y,modalClass:C,icon:P="exclamation-triangle",onConfirm:D,onDismiss:M,onAlternative:b,confirmButtonVariant:R="destructive"})=>{const[B,w]=(0,n.useState)(Boolean(a)),A=(0,f.wW)(r),I=(0,n.useRef)(null),F=K=>{w(a?.localeCompare(K.currentTarget.value)!==0)};return(0,n.useEffect)(()=>{u&&I.current?.focus()},[u]),(0,n.useEffect)(()=>{u&&w(Boolean(a))},[u,a]),n.createElement(o.u,{className:(0,t.cx)(A.modal,C),title:d,icon:P,isOpen:u,onDismiss:M},n.createElement("div",{className:A.modalText},g,p?n.createElement("div",{className:A.modalDescription},p):null,a?n.createElement("div",{className:A.modalConfirmationInput},n.createElement(s.Lh,null,n.createElement(i.I,{placeholder:`Type ${a} to confirm`,onChange:F}))):null),n.createElement(o.u.ButtonRow,null,n.createElement(c.zx,{variant:x,onClick:M,fill:"outline"},v),n.createElement(c.zx,{variant:R,onClick:D,disabled:B,ref:I,"aria-label":l.wl.pages.ConfirmModal.delete},E),b?n.createElement(c.zx,{variant:"primary",onClick:b},y):null))},r=u=>({modal:t.css`
    width: 500px;
  `,modalText:(0,t.css)({fontSize:u.typography.h5.fontSize,color:u.colors.text.primary}),modalDescription:(0,t.css)({fontSize:u.typography.body.fontSize}),modalConfirmationInput:(0,t.css)({paddingTop:u.spacing(1)})})},30909:(Z,O,e)=>{"use strict";e.d(O,{x:()=>f});var t=e(68404),n=e(86889),l=e(68183),s=e(38484),i=e(85511);const f=t.memo(({x:c,y:o,onClose:m,focusOnOpen:r=!0,renderMenuItems:u,renderHeader:d})=>{const g=(0,t.useRef)(null),[p,E]=(0,t.useState)({});(0,t.useLayoutEffect)(()=>{const y=g.current;if(y){const C=y.getBoundingClientRect(),P=5,D={right:window.innerWidth<c+C.width,bottom:window.innerHeight<o+C.height+P};E({position:"fixed",left:D.right?c-C.width-P:c-P,top:D.bottom?o-C.height-P:o+P})}},[c,o]),(0,n.Z)(g,()=>{m?.()});const h=d?.(),a=u?.(),v=y=>{r&&y(0)},x=y=>{y.key==="Escape"&&(y.preventDefault(),y.stopPropagation(),m?.())};return t.createElement(i.h_,null,t.createElement(s.v,{header:h,ref:g,style:p,ariaLabel:l.wl.components.Menu.MenuComponent("Context"),onOpen:v,onClick:m,onKeyDown:x},a))});f.displayName="ContextMenu"},74285:(Z,O,e)=>{"use strict";e.d(O,{z:()=>l});var t=e(68404),n=e(30909);const l=({children:s,renderMenuItems:i,focusOnOpen:f=!0})=>{const[c,o]=(0,t.useState)(!1),[m,r]=(0,t.useState)({x:0,y:0});return t.createElement(t.Fragment,null,s({openMenu:u=>{o(!0),r({x:u.pageX,y:u.pageY})}}),c&&t.createElement(n.x,{onClose:()=>o(!1),x:m.x,y:m.y,renderMenuItems:i,focusOnOpen:f}))}},68226:(Z,O,e)=>{"use strict";e.d(O,{$:()=>r,Z:()=>u});var t=e(9892),n=e(68404),l=e(20201),s=e(72648),i=e(9085),f=e.n(i),c=e(39904);const o=({children:g})=>{const[p,E]=(0,n.useState)(!1),[h,a]=(0,n.useState)(!1),v=(0,n.useRef)(null),x=(0,n.useRef)(null),y=(0,s.wW)(m);return(0,n.useEffect)(()=>{const C=new IntersectionObserver(P=>{P.forEach(D=>{D.target===v.current?E(!D.isIntersecting):D.target===x.current&&a(!D.isIntersecting)})});return[v,x].forEach(P=>{P.current&&C.observe(P.current)}),()=>C.disconnect()},[]),n.createElement(n.Fragment,null,n.createElement("div",{className:(0,t.cx)(y.scrollIndicator,y.scrollTopIndicator,{[y.scrollIndicatorVisible]:p})},n.createElement(c.J,{className:f()(y.scrollIcon,y.scrollTopIcon),name:"angle-up"})),n.createElement("div",{className:y.scrollContent},n.createElement("div",{ref:v}),g,n.createElement("div",{ref:x})),n.createElement("div",{className:(0,t.cx)(y.scrollIndicator,y.scrollBottomIndicator,{[y.scrollIndicatorVisible]:h})},n.createElement(c.J,{className:f()(y.scrollIcon,y.scrollBottomIcon),name:"angle-down"})))},m=g=>({scrollContent:(0,t.css)({flex:1,position:"relative"}),scrollIndicator:(0,t.css)({height:g.spacing(6),left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,transition:g.transitions.create("opacity"),zIndex:1}),scrollTopIndicator:(0,t.css)({background:`linear-gradient(0deg, transparent, ${g.colors.background.canvas})`,top:0}),scrollBottomIndicator:(0,t.css)({background:`linear-gradient(180deg, transparent, ${g.colors.background.canvas})`,bottom:0}),scrollIndicatorVisible:(0,t.css)({opacity:1}),scrollIcon:(0,t.css)({left:"50%",position:"absolute",transform:"translateX(-50%)"}),scrollTopIcon:(0,t.css)({top:0}),scrollBottomIcon:(0,t.css)({bottom:0})}),r=({autoHide:g=!1,autoHideTimeout:p=200,setScrollTop:E,className:h,testId:a,autoHeightMin:v="0",autoHeightMax:x="100%",hideTracksWhenNotNeeded:y=!1,hideHorizontalTrack:C,hideVerticalTrack:P,scrollRefCallback:D,showScrollIndicators:M=!1,updateAfterMountMs:b,scrollTop:R,onScroll:B,children:w})=>{const A=(0,n.useRef)(null),I=(0,s.wW)(d);(0,n.useEffect)(()=>{A.current&&D&&D(A.current.view)},[A,D]),(0,n.useEffect)(()=>{A.current&&R!=null&&A.current.scrollTop(R)},[R]),(0,n.useEffect)(()=>{b&&setTimeout(()=>{const Q=A.current;Q?.update&&Q.update()},b)},[b]);function F(Q,z,G){return G.style&&z&&(G.style.display="none"),n.createElement("div",{...G,className:Q})}const K=(0,n.useCallback)(Q=>F("track-horizontal",C,Q),[C]),W=(0,n.useCallback)(Q=>F("track-vertical",P,Q),[P]),U=(0,n.useCallback)(Q=>n.createElement("div",{...Q,className:"thumb-horizontal"}),[]),N=(0,n.useCallback)(Q=>n.createElement("div",{...Q,className:"thumb-vertical"}),[]),S=(0,n.useCallback)(Q=>(Q.style&&Q.style.WebkitOverflowScrolling==="touch"&&(Q.style.WebkitOverflowScrolling="auto"),n.createElement("div",{...Q,className:"scrollbar-view"})),[]),Y=(0,n.useCallback)(()=>{A.current&&E&&E(A.current.getValues())},[E]);return n.createElement(l.ZP,{"data-testid":a,ref:A,className:(0,t.cx)(I.customScrollbar,h,{[I.scrollbarWithScrollIndicators]:M}),onScrollStop:Y,autoHeight:!0,autoHide:g,autoHideTimeout:p,hideTracksWhenNotNeeded:y,autoHeightMax:x,autoHeightMin:v,renderTrackHorizontal:K,renderTrackVertical:W,renderThumbHorizontal:U,renderThumbVertical:N,renderView:S,onScroll:B},M?n.createElement(o,null,w):w)},u=r,d=g=>({customScrollbar:t.css`
      // Fix for Firefox. For some reason sometimes .view container gets a height of its content, but in order to
      // make scroll working it should fit outer container size (scroll appears only when inner container size is
      // greater than outer one).
      display: flex;
      flex-grow: 1;
      .scrollbar-view {
        display: flex;
        flex-grow: 1;
        flex-direction: column;
      }
      .track-vertical {
        border-radius: ${g.shape.borderRadius(2)};
        width: ${g.spacing(1)} !important;
        right: 0px;
        bottom: ${g.spacing(.25)};
        top: ${g.spacing(.25)};
      }
      .track-horizontal {
        border-radius: ${g.shape.borderRadius(2)};
        height: ${g.spacing(1)} !important;
        right: ${g.spacing(.25)};
        bottom: ${g.spacing(.25)};
        left: ${g.spacing(.25)};
      }
      .thumb-vertical {
        background: ${g.colors.action.focus};
        border-radius: ${g.shape.borderRadius(2)};
        opacity: 0;
      }
      .thumb-horizontal {
        background: ${g.colors.action.focus};
        border-radius: ${g.shape.borderRadius(2)};
        opacity: 0;
      }
      &:hover {
        .thumb-vertical,
        .thumb-horizontal {
          opacity: 1;
          transition: opacity 0.3s ease-in-out;
        }
      }
    `,scrollbarWithScrollIndicators:t.css`
      .scrollbar-view {
        position: static !important;
      }
    `})},89719:(Z,O,e)=>{"use strict";e.d(O,{k:()=>l});var t=e(68404),n=e(31403);function l({link:s,buttonProps:i}){return t.createElement("a",{href:s.href,target:s.target,rel:"noreferrer",onClick:s.onClick?f=>{!(f.ctrlKey||f.metaKey||f.shiftKey)&&s.onClick&&(f.preventDefault(),s.onClick(f))}:void 0},t.createElement(n.zx,{icon:"external-link-alt",variant:"primary",size:"sm",...i},s.title))}},35919:(Z,O,e)=>{"use strict";e.d(O,{v:()=>w});var t=e(9892),n=e(57706),l=e.n(n),s=e(68404),i=e(73934),f=e(64076),c=e(40246),o=e(56747),m=e(28151),r=e(89029),u=e(12724),d=e(67660),g=e(72648),p=e(68226),E=e(46967),h=e(85511),a=e(82897),v=e(92787),x=e(56766);const y=I=>({list:t.css`
      border-bottom: 1px solid ${I.colors.border.weak};
      &:last-child {
        border: none;
      }
    `,wrapper:t.css`
      background: ${I.colors.background.primary};
      width: 250px;
    `,item:t.css`
      background: none;
      padding: 2px 8px;
      color: ${I.colors.text.primary};
      cursor: pointer;
      &:hover {
        background: ${I.colors.action.hover};
      }
    `,label:t.css`
      color: ${I.colors.text.secondary};
    `,activeItem:t.css`
      background: ${I.colors.background.secondary};
      &:hover {
        background: ${I.colors.background.secondary};
      }
    `,itemValue:t.css`
      font-family: ${I.typography.fontFamilyMonospace};
      font-size: ${I.typography.size.sm};
    `}),C=({suggestions:I,...F})=>{const K=(0,s.useRef)(null);(0,v.Z)(K,()=>{F.onClose&&F.onClose()});const W=(0,s.useMemo)(()=>(0,a.groupBy)(I,N=>N.origin),[I]),U=(0,g.wW)(y);return s.createElement("div",{role:"menu",ref:K,className:U.wrapper},Object.keys(W).map((N,S)=>{const Y=S===0?0:Object.keys(W).reduce((Q,z,G)=>G>=S?Q:Q+W[z].length,0);return s.createElement(P,{...F,suggestions:W[N],label:`${(0,a.capitalize)(N)}`,activeIndex:F.activeIndex,activeIndexOffset:Y,key:N})}))};C.displayName="DataLinkSuggestions";const P=s.memo(({activeIndex:I,activeIndexOffset:F,label:K,onClose:W,onSuggestionSelect:U,suggestions:N,activeRef:S})=>{const Y=(0,g.wW)(y);return s.createElement(s.Fragment,null,s.createElement(x.a,{className:Y.list,items:N,renderItem:(Q,z)=>{const G=z+F===I;return s.createElement("div",{role:"menuitem",tabIndex:0,className:(0,t.cx)(Y.item,G&&Y.activeItem),ref:G?S:void 0,onClick:()=>{U(Q)},title:Q.documentation},s.createElement("span",{className:Y.itemValue},s.createElement("span",{className:Y.label},K)," ",Q.label))}}))});P.displayName="DataLinkSuggestionsList";class D{getBoundingClientRect(){const F=window.getSelection(),K=F&&F.anchorNode;return K&&K.parentElement?K.parentElement.getBoundingClientRect():{top:0,left:0,bottom:0,right:0,width:0,height:0,x:0,y:0,toJSON:()=>{}}}get clientWidth(){return this.getBoundingClientRect().width}get clientHeight(){return this.getBoundingClientRect().height}}const M=(I,F)=>I-F*Math.floor(I/F),b={builtInVariable:{pattern:/(\${\S+?})/}},R=[(0,d.Z)({onlyIn:I=>I.type==="code_block",getSyntax:()=>"links"},{...l().languages,links:b})],B=I=>({input:(0,E.H)({theme:I,invalid:!1}).input,editor:t.css`
    .token.builtInVariable {
      color: ${I.colors.success.text};
    }
    .token.variable {
      color: ${I.colors.primary.text};
    }
  `,suggestionsWrapper:t.css`
    box-shadow: ${I.shadows.z2};
  `,wrapperOverrides:t.css`
    width: 100%;
    > .slate-query-field__wrapper {
      padding: 0;
      background-color: transparent;
      border: none;
    }
  `}),w=(0,s.memo)(({value:I,onChange:F,suggestions:K,placeholder:W="http://your-grafana.com/d/000000010/annotations"})=>{const U=(0,s.useRef)(null),N=(0,g.wW)(B),[S,Y]=(0,s.useState)(!1),[Q,z]=(0,s.useState)(0),[G,k]=(0,s.useState)((0,u.l1)(I)),j=(0,f.Z)(G),[de,ge]=(0,s.useState)(0),re=(0,s.useRef)({showingSuggestions:S,suggestions:K,suggestionsIndex:Q,linkUrl:G,onChange:F});re.current={showingSuggestions:S,suggestions:K,suggestionsIndex:Q,linkUrl:G,onChange:F};const ce=(0,s.useRef)(null);(0,s.useEffect)(()=>{ge(A(ce.current,Q))},[Q]);const ie=(0,s.useMemo)(()=>new D,[]),fe=s.useCallback((X,te)=>{if(!re.current.showingSuggestions)return X.key==="="||X.key==="$"||X.keyCode===32&&X.ctrlKey?Y(!0):te();switch(X.key){case"Backspace":case"Escape":return Y(!1),z(0);case"Enter":return X.preventDefault(),ee(re.current.suggestions[re.current.suggestionsIndex]);case"ArrowDown":case"ArrowUp":X.preventDefault();const ae=X.key==="ArrowDown"?1:-1;return z(_=>M(_+ae,re.current.suggestions.length));default:return te()}},[]);(0,s.useEffect)(()=>{j&&j.selection.isFocused&&!G.selection.isFocused&&re.current.onChange(c.Z.serialize(G))},[G,j]);const Ce=s.useCallback(({value:X})=>{k(X)},[]),ee=(X,te=U.current)=>{const _=ne()==="$";X.origin!==m.L8.Template||X.value===r.W.includeVars?te.insertText(`${_?"":"$"}{${X.value}}`):te.insertText(`${_?"":"$"}{${X.value}:queryparam}`),k(te.value),Y(!1),z(0),re.current.onChange(c.Z.serialize(te.value))},ne=()=>{const X=document.getElementById("data-link-input");let te="",ae,_;return window.getSelection&&(ae=window.getSelection(),ae&&ae.rangeCount>0&&(_=ae.getRangeAt(0).cloneRange(),_.collapse(!0),_.setStart(X,0),te=_.toString().slice(-1))),te};return s.createElement("div",{className:N.wrapperOverrides},s.createElement("div",{className:"slate-query-field__wrapper"},s.createElement("div",{id:"data-link-input",className:"slate-query-field"},S&&s.createElement(h.h_,null,s.createElement(i.r,{referenceElement:ie,placement:"bottom-end",modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"arrow",enabled:!1},{name:"offset",options:{offset:[250,0]}}]},({ref:X,style:te,placement:ae})=>s.createElement("div",{ref:X,style:te,"data-placement":ae,className:N.suggestionsWrapper},s.createElement(p.Z,{scrollTop:de,autoHeightMax:"300px",setScrollTop:({scrollTop:_})=>ge(_)},s.createElement(C,{activeRef:ce,suggestions:re.current.suggestions,onSuggestionSelect:ee,onClose:()=>Y(!1),activeIndex:Q}))))),s.createElement(o.ML,{schema:u.Yi,ref:U,placeholder:W,value:re.current.linkUrl,onChange:Ce,onKeyDown:(X,te,ae)=>fe(X,ae),plugins:R,className:(0,t.cx)(N.editor,N.input,t.css`
                  padding: 3px 8px;
                `)}))))});w.displayName="DataLinkInput";function A(I,F){return(I?.clientHeight??0)*F}},18543:(Z,O,e)=>{"use strict";e.d(O,{V:()=>o});var t=e(9892),n=e(68404),l=e(68183),s=e(79406),i=e(74285),f=e(14391),c=e(42044);const o=({children:m,links:r,style:u})=>{const d=[{items:(0,s.R)(r),label:"Data links"}],g=d[0].items.length,p=()=>d.map((h,a)=>n.createElement(f.k,{key:`${h.label}${a}`,label:h.label},(h.items||[]).map(v=>n.createElement(c.s,{key:v.label,url:v.url,label:v.label,target:v.target,icon:v.icon,active:v.active,onClick:v.onClick})))),E=t.css`
    cursor: context-menu;
  `;if(g>1)return n.createElement(i.z,{renderMenuItems:p},({openMenu:h})=>m({openMenu:h,targetClassName:E}));{const h=r()[0];return n.createElement("a",{href:h.href,onClick:h.onClick,target:h.target,title:h.title,style:{...u,overflow:"hidden",display:"flex"},"aria-label":l.wl.components.DataLinksContextMenu.singleLink},m({}))}}},68037:(Z,O,e)=>{"use strict";e.d(O,{d:()=>y});var t=e(9892),n=e(82897),l=e(68404),s=e(72648),i=e(7804),f=e(31403),c=e(35029),o=e(79406),m=e(24799),r=e(46967),u=e(8944),d=e(35919);const g=P=>({listItem:t.css`
    margin-bottom: ${P.spacing()};
  `,infoText:t.css`
    padding-bottom: ${P.spacing(2)};
    margin-left: 66px;
    color: ${P.colors.text.secondary};
  `}),p=l.memo(({index:P,value:D,onChange:M,suggestions:b,isLast:R})=>{const B=(0,s.wW)(g),w=(F,K)=>{M(P,{...D,url:F},K)},A=F=>{M(P,{...D,title:F.target.value})},I=()=>{M(P,{...D,targetBlank:!D.targetBlank})};return l.createElement("div",{className:B.listItem},l.createElement(m.g,{label:"Title"},l.createElement(r.I,{value:D.title,onChange:A,placeholder:"Show details"})),l.createElement(m.g,{label:"URL",invalid:(0,o.g)(D.url),error:"Data link is an Explore URL in a deprecated format. Please visit the URL to be redirected, and edit this data link to use that URL."},l.createElement(d.v,{value:D.url,onChange:w,suggestions:b})),l.createElement(m.g,{label:"Open in new tab"},l.createElement(u.r,{value:D.targetBlank||!1,onChange:I})),R&&l.createElement("div",{className:B.infoText},"With data links you can reference data variables like series name, labels and values. Type CMD+Space, CTRL+Space, or $ to open variable suggestions."))});p.displayName="DataLinkEditor";const E=({link:P,index:D,getSuggestions:M,onSave:b,onCancel:R})=>{const[B,w]=(0,l.useState)(P);return l.createElement(l.Fragment,null,l.createElement(p,{value:B,index:D,isLast:!1,suggestions:M(),onChange:(A,I)=>{w(I)}}),l.createElement(c.u.ButtonRow,null,l.createElement(f.zx,{variant:"secondary",onClick:()=>R(D),fill:"outline"},"Cancel"),l.createElement(f.zx,{onClick:()=>{b(D,B)}},"Save")))};var h=e(57227),a=e(8180);const v=({link:P,onEdit:D,onRemove:M})=>{const b=(0,s.l4)(),R=x(b),{title:B="",url:w=""}=P,A=B.trim()!=="",I=w.trim()!=="",F=(0,o.g)(w);return l.createElement("div",{className:R.wrapper},l.createElement("div",{className:R.titleWrapper},l.createElement("div",{className:(0,t.cx)(R.url,!I&&R.notConfigured,F&&R.errored)},A?B:"Data link title not provided"),l.createElement("div",{className:R.actionButtons},l.createElement(a.h,{name:"pen",onClick:D}),l.createElement(a.h,{name:"times",onClick:M}))),l.createElement("div",{className:(0,t.cx)(R.url,!I&&R.notConfigured,F&&R.errored),title:w},I?w:"Data link url not provided"),F&&l.createElement(h.S,null,"Explore data link may not work in the future. Please edit."))},x=(0,i.B)(P=>({wrapper:t.css`
      margin-bottom: ${P.spacing(2)};
      width: 100%;
      &:last-child {
        margin-bottom: 0;
      }
      display: flex;
      flex-direction: column;
    `,titleWrapper:t.css`
      label: data-links-list-item-title;
      justify-content: space-between;
      display: flex;
      width: 100%;
      align-items: center;
    `,actionButtons:t.css`
      margin-left: ${P.spacing(1)};
      display: flex;
    `,errored:t.css`
      color: ${P.colors.error.text};
      font-style: italic;
    `,notConfigured:t.css`
      font-style: italic;
    `,title:t.css`
      color: ${P.colors.text.primary};
      font-size: ${P.typography.size.sm};
      font-weight: ${P.typography.fontWeightMedium};
    `,url:t.css`
      color: ${P.colors.text.secondary};
      font-size: ${P.typography.size.sm};
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 90%;
    `})),y=({links:P,onChange:D,getSuggestions:M,data:b})=>{const R=(0,s.l4)(),[B,w]=(0,l.useState)(null),[A,I]=(0,l.useState)(!1),F=C(R),K=P??[],W=B!==null,U=(Q,z)=>{if(A)if(z.title.trim()===""&&z.url.trim()===""){I(!1),w(null);return}else w(null),I(!1);const G=(0,n.cloneDeep)(K);G[Q]=z,D(G),w(null)},N=()=>{let Q=(0,n.cloneDeep)(K);w(Q.length),I(!0)},S=Q=>{A&&I(!1),w(null)},Y=Q=>{const z=(0,n.cloneDeep)(K);z.splice(Q,1),D(z)};return l.createElement(l.Fragment,null,K.length>0&&l.createElement("div",{className:F.wrapper},K.map((Q,z)=>l.createElement(v,{key:`${Q.title}/${z}`,index:z,link:Q,onChange:U,onEdit:()=>w(z),onRemove:()=>Y(z),data:b}))),W&&B!==null&&l.createElement(c.u,{title:"Edit link",isOpen:!0,closeOnBackdropClick:!1,onDismiss:()=>{S(B)}},l.createElement(E,{index:B,link:A?{title:"",url:""}:K[B],data:b,onSave:U,onCancel:S,getSuggestions:M})),l.createElement(f.zx,{size:"sm",icon:"plus",onClick:N,variant:"secondary"},"Add link"))},C=(0,i.B)(P=>({wrapper:t.css`
      margin-bottom: ${P.spacing(2)};
    `}))},45576:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(39904),i=e(89719);function f({links:o}){const m=(0,l.wW)(c);if(o.length===1)return n.createElement(i.k,{link:o[0]});const r=o.filter(d=>d.target==="_blank"),u=o.filter(d=>d.target==="_self");return n.createElement(n.Fragment,null,u.map((d,g)=>n.createElement(i.k,{key:g,link:d})),n.createElement("div",{className:m.wrapper},n.createElement("p",{className:m.externalLinksHeading},"External links"),r.map((d,g)=>n.createElement("a",{key:g,href:d.href,target:d.target,className:m.externalLink},n.createElement(s.J,{name:"external-link-alt"}),d.title))))}const c=o=>({wrapper:t.css`
    flex-basis: 150px;
    width: 100px;
    margin-top: ${o.spacing(1)};
  `,externalLinksHeading:t.css`
    color: ${o.colors.text.secondary};
    font-weight: ${o.typography.fontWeightRegular};
    font-size: ${o.typography.size.sm};
    margin: 0;
  `,externalLink:t.css`
    color: ${o.colors.text.link};
    font-weight: ${o.typography.fontWeightRegular};
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    &:hover {
      text-decoration: underline;
    }

    div {
      margin-right: ${o.spacing(1)};
    }
  `})},64260:(Z,O,e)=>{"use strict";e.d(O,{O:()=>s});var t=e(68404),n=e(8944),l=e(81764);function s({options:i,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Alerting"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(l._,{labelWidth:26,label:"Manage alerts via Alerting UI",disabled:i.readOnly},t.createElement(n.x,{value:i.jsonData.manageAlerts!==!1,onChange:c=>f({...i,jsonData:{...i.jsonData,manageAlerts:c.currentTarget.checked}})}))))))}},85615:(Z,O,e)=>{"use strict";e.d(O,{W:()=>c});var t=e(68404),n=e(31403),l=e(81764),s=e(11543),i=e(46967),f=e(97379);const c=({hasCert:o,label:m,onChange:r,onClick:u,placeholder:d})=>t.createElement(s.Z,null,t.createElement(l._,{label:m,labelWidth:14,disabled:o},o?t.createElement(i.I,{type:"text",value:"configured",width:24}):t.createElement(f.K,{rows:7,onChange:r,placeholder:d,required:!0})),o&&t.createElement(n.zx,{variant:"secondary",onClick:u,style:{marginLeft:4}},"Reset"))},92099:(Z,O,e)=>{"use strict";e.d(O,{H:()=>d});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(7804),f=e(31403),c=e(95569),o=e(39904),m=e(34517);const r=(0,i.B)(()=>({layout:t.css`
      display: flex;
      align-items: center;
      margin-bottom: 4px;
      > * {
        margin-left: 4px;
        margin-bottom: 0;
        height: 100%;
        &:first-child,
        &:last-child {
          margin-left: 0;
        }
      }
    `})),u=({header:p,onBlur:E,onChange:h,onRemove:a,onReset:v})=>{const x=r();return s.createElement("div",{className:x.layout},s.createElement(c.W,{label:"Header",name:"name",placeholder:"X-Custom-Header",labelWidth:5,value:p.name||"",onChange:y=>h({...p,name:y.target.value}),onBlur:E}),s.createElement(m.c,{label:"Value","aria-label":"Value",name:"value",isConfigured:p.configured,value:p.value,labelWidth:5,inputWidth:p.configured?11:12,placeholder:"Header Value",onReset:()=>v(p.id),onChange:y=>h({...p,value:y.target.value}),onBlur:E}),s.createElement(f.zx,{type:"button","aria-label":"Remove header",variant:"secondary",size:"xs",onClick:y=>a(p.id)},s.createElement(o.J,{name:"trash-alt"})))};u.displayName="CustomHeaderRow";class d extends s.PureComponent{constructor(E){super(E),this.state={headers:[]},this.updateSettings=()=>{const{headers:x}=this.state,y=Object.fromEntries(Object.entries(this.props.dataSourceConfig.jsonData).filter(([P,D])=>!P.startsWith("httpHeaderName"))),C=Object.fromEntries(Object.entries(this.props.dataSourceConfig.secureJsonData||{}).filter(([P,D])=>!P.startsWith("httpHeaderValue")));for(const[P,D]of x.entries())y[`httpHeaderName${P+1}`]=D.name,D.configured||(C[`httpHeaderValue${P+1}`]=D.value);this.props.onChange({...this.props.dataSourceConfig,jsonData:y,secureJsonData:C})},this.onHeaderAdd=()=>{this.setState(x=>({headers:[...x.headers,{id:(0,n.uniqueId)(),name:"",value:"",configured:!1}]}))},this.onHeaderChange=(x,y)=>{this.setState(({headers:C})=>({headers:C.map((P,D)=>x!==D?P:{...y})}))},this.onHeaderReset=x=>{this.setState(({headers:y})=>({headers:y.map((C,P)=>C.id!==x?C:{...C,value:"",configured:!1})}))},this.onHeaderRemove=x=>{this.setState(({headers:y})=>({headers:y.filter(C=>C.id!==x)}),this.updateSettings)};const{jsonData:h,secureJsonData:a,secureJsonFields:v}=this.props.dataSourceConfig;this.state={headers:Object.keys(h).sort().filter(x=>x.startsWith("httpHeaderName")).map((x,y)=>({id:(0,n.uniqueId)(),name:h[x],value:a!==void 0?a[x]:"",configured:v&&v[`httpHeaderValue${y+1}`]||!1}))}}render(){const{headers:E}=this.state,{dataSourceConfig:h}=this.props;return s.createElement("div",{className:"gf-form-group"},s.createElement("div",{className:"gf-form"},s.createElement("h6",null,"Custom HTTP Headers")),s.createElement("div",null,E.map((a,v)=>s.createElement(u,{key:a.id,header:a,onChange:x=>{this.onHeaderChange(v,x)},onBlur:this.updateSettings,onRemove:this.onHeaderRemove,onReset:this.onHeaderReset}))),!h.readOnly&&s.createElement("div",{className:"gf-form"},s.createElement(f.zx,{variant:"secondary",icon:"plus",type:"button",onClick:a=>{this.onHeaderAdd()}},"Add header")))}}var g=null},12006:(Z,O,e)=>{"use strict";e.d(O,{E:()=>D});var t=e(9892),n=e(68404),l=e(68183),s=e(72648),i=e(95569),f=e(19426),c=e(81764),o=e(50869),m=e(39904),r=e(53217),u=e(8944),d=e(43339),g=e(34517);const p=({dataSourceConfig:M,onChange:b})=>{const R=M.secureJsonData?M.secureJsonData.basicAuthPassword:"",B=()=>{b({...M,secureJsonData:{...M.secureJsonData,basicAuthPassword:""},secureJsonFields:{...M.secureJsonFields,basicAuthPassword:!1}})},w=A=>{b({...M,secureJsonData:{...M.secureJsonData,basicAuthPassword:A.currentTarget.value}})};return n.createElement(n.Fragment,null,n.createElement(c._,{disabled:M.readOnly},n.createElement(i.W,{label:"User",labelWidth:10,inputWidth:18,placeholder:"user",value:M.basicAuthUser,onChange:A=>b({...M,basicAuthUser:A.currentTarget.value})})),n.createElement(c._,{disabled:M.readOnly},n.createElement(g.c,{isConfigured:!!(M.secureJsonFields&&M.secureJsonFields.basicAuthPassword),value:R||"",inputWidth:18,labelWidth:10,onReset:B,onChange:w})))};var E=e(92099);const h=26,a=({dataSourceConfig:M,onChange:b,showForwardOAuthIdentityOption:R=!0})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"TLS Client Auth",labelWidth:h,disabled:M.readOnly},n.createElement(u.x,{id:"http-settings-tls-client-auth",value:M.jsonData.tlsAuth||!1,onChange:B=>b({...M.jsonData,tlsAuth:B.currentTarget.checked})})),n.createElement(c._,{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs",labelWidth:h,disabled:M.readOnly},n.createElement(u.x,{id:"http-settings-ca-cert",value:M.jsonData.tlsAuthWithCACert||!1,onChange:B=>b({...M.jsonData,tlsAuthWithCACert:B.currentTarget.checked})}))),n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"Skip TLS Verify",labelWidth:h,disabled:M.readOnly},n.createElement(u.x,{id:"http-settings-skip-tls-verify",value:M.jsonData.tlsSkipVerify||!1,onChange:B=>b({...M.jsonData,tlsSkipVerify:B.currentTarget.checked})}))),R&&n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"Forward OAuth Identity",tooltip:"Forward the user's upstream OAuth identity to the data source (Their access token gets passed along).",labelWidth:h,disabled:M.readOnly},n.createElement(u.x,{id:"http-settings-forward-oauth",value:M.jsonData.oauthPassThru||!1,onChange:B=>b({...M.jsonData,oauthPassThru:B.currentTarget.checked})}))));var v=e(23622);const x=[{label:"Server (default)",value:"proxy"},{label:"Browser",value:"direct"}],y={label:"Server (default)",value:"proxy"},C=()=>n.createElement("div",{className:"grafana-info-box m-t-2"},n.createElement("p",null,"Access mode controls how requests to the data source will be handled.",n.createElement("strong",null,"\xA0",n.createElement("i",null,"Server"))," ","should be the preferred way if nothing else is stated."),n.createElement("div",{className:"alert-title"},"Server access mode (Default):"),n.createElement("p",null,"All requests will be made from the browser to Grafana backend/server which in turn will forward the requests to the data source and by that circumvent possible Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the grafana backend/server if you select this access mode."),n.createElement("div",{className:"alert-title"},"Browser access mode:"),n.createElement("p",null,"All requests will be made from the browser directly to the data source and may be subject to Cross-Origin Resource Sharing (CORS) requirements. The URL needs to be accessible from the browser if you select this access mode.")),P=26,D=M=>{const{defaultUrl:b,dataSourceConfig:R,onChange:B,showAccessOptions:w,sigV4AuthToggleEnabled:A,showForwardOAuthIdentityOption:I,azureAuthSettings:F,renderSigV4Editor:K}=M;let W;const[U,N]=(0,n.useState)(!1),S=(0,s.l4)(),Y=(0,n.useCallback)(ge=>{B({...R,...ge})},[R,B]);switch(R.access){case"direct":W=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Browser"),", this means the URL needs to be accessible from the browser.");break;case"proxy":W=n.createElement(n.Fragment,null,"Your access method is ",n.createElement("em",null,"Server"),", this means the URL needs to be accessible from the grafana backend/server.");break;default:W="Specify a complete HTTP URL (for example http://your_server:8080)"}const Q=n.createElement(r.Ph,{"aria-label":"Access",className:"width-20 gf-form-input",options:x,value:x.filter(ge=>ge.value===R.access)[0]||y,onChange:ge=>Y({access:ge.value}),disabled:R.readOnly}),z=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(R.url),G=t.css`
    box-shadow: inset 0 0px 5px ${S.v1.palette.red};
  `,k=(0,t.cx)({["width-20"]:!0,[G]:!z}),j=n.createElement(o.I,{className:k,placeholder:b,value:R.url,"aria-label":l.wl.components.DataSource.DataSourceHttpSettings.urlInput,onChange:ge=>Y({url:ge.currentTarget.value}),disabled:R.readOnly}),de=F?.azureAuthSupported&&F.getAzureAuthEnabled(R)||!1;return n.createElement("div",{className:"gf-form-group"},n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"HTTP"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"URL",labelWidth:13,tooltip:W,inputEl:j})),w&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form-inline"},n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Access",labelWidth:13,inputWidth:20,inputEl:Q})),n.createElement("div",{className:"gf-form"},n.createElement("button",{type:"button",className:"gf-form-label query-keyword pointer",onClick:()=>N(ge=>!ge)},"Help\xA0",n.createElement(m.J,{name:U?"angle-down":"angle-right",style:{marginBottom:0}})))),U&&n.createElement(C,null)),R.access==="proxy"&&n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form"},n.createElement(f.c,{width:13,tooltip:"Grafana proxy deletes forwarded cookies by default. Specify cookies by name that should be forwarded to the data source."},"Allowed cookies"),n.createElement(d.B,{tags:R.jsonData.keepCookies,width:40,onChange:ge=>Y({jsonData:{...R.jsonData,keepCookies:ge}}),disabled:R.readOnly})),n.createElement("div",{className:"gf-form"},n.createElement(i.W,{label:"Timeout",type:"number",labelWidth:13,inputWidth:20,tooltip:"HTTP request timeout in seconds",placeholder:"Timeout in seconds","aria-label":"Timeout in seconds",value:R.jsonData.timeout,onChange:ge=>{Y({jsonData:{...R.jsonData,timeout:parseInt(ge.currentTarget.value,10)}})},disabled:R.readOnly}))))),n.createElement(n.Fragment,null,n.createElement("h3",{className:"page-heading"},"Auth"),n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"Basic auth",labelWidth:P,disabled:R.readOnly},n.createElement(u.x,{id:"http-settings-basic-auth",value:R.basicAuth,onChange:ge=>{Y({basicAuth:ge.currentTarget.checked})}})),n.createElement(c._,{label:"With Credentials",tooltip:"Whether credentials such as cookies or auth headers should be sent with cross-site requests.",labelWidth:P,disabled:R.readOnly},n.createElement(u.x,{id:"http-settings-with-credentials",value:R.withCredentials,onChange:ge=>{Y({withCredentials:ge.currentTarget.checked})}}))),F?.azureAuthSupported&&n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"Azure Authentication",tooltip:"Use Azure authentication for Azure endpoint.",labelWidth:P,disabled:R.readOnly},n.createElement(u.x,{id:"http-settings-azure-auth",value:de,onChange:ge=>{Y(F.setAzureAuthEnabled(R,ge.currentTarget.checked))}}))),A&&n.createElement("div",{className:"gf-form-inline"},n.createElement(c._,{label:"SigV4 auth",labelWidth:P,disabled:R.readOnly},n.createElement(u.x,{id:"http-settings-sigv4-auth",value:R.jsonData.sigV4Auth||!1,onChange:ge=>{Y({jsonData:{...R.jsonData,sigV4Auth:ge.currentTarget.checked}})}}))),R.access==="proxy"&&n.createElement(a,{dataSourceConfig:R,onChange:ge=>Y({jsonData:ge}),showForwardOAuthIdentityOption:I})),R.basicAuth&&n.createElement(n.Fragment,null,n.createElement("h6",null,"Basic Auth Details"),n.createElement("div",{className:"gf-form-group"},n.createElement(p,{...M}))),F?.azureAuthSupported&&de&&F.azureSettingsUI&&n.createElement(F.azureSettingsUI,{dataSourceConfig:R,onChange:B}),R.jsonData.sigV4Auth&&A&&K,(R.jsonData.tlsAuth||R.jsonData.tlsAuthWithCACert)&&n.createElement(v.s,{dataSourceConfig:R,onChange:B}),R.access==="proxy"&&n.createElement(E.H,{dataSourceConfig:R,onChange:B})))}},12580:(Z,O,e)=>{"use strict";e.d(O,{i:()=>s});var t=e(68404),n=e(8944),l=e(81764);function s({options:i,onOptionsChange:f}){return t.createElement(t.Fragment,null,t.createElement("h3",{className:"page-heading"},"Secure Socks Proxy"),t.createElement("div",{className:"gf-form-group"},t.createElement("div",{className:"gf-form-inline"},t.createElement("div",{className:"gf-form"},t.createElement(l._,{labelWidth:26,label:"Enabled",tooltip:"Connect to this datasource via the secure socks proxy."},t.createElement(n.x,{value:i.jsonData.enableSecureSocksProxy??!1,onChange:c=>f({...i,jsonData:{...i.jsonData,enableSecureSocksProxy:c.currentTarget.checked}})}))))))}},23622:(Z,O,e)=>{"use strict";e.d(O,{s:()=>c});var t=e(9892),n=e(68404),l=e(95569),s=e(39904),i=e(6554),f=e(85615);const c=({dataSourceConfig:o,onChange:m})=>{const r=o.secureJsonFields&&o.secureJsonFields.tlsCACert,u=o.secureJsonFields&&o.secureJsonFields.tlsClientCert,d=o.secureJsonFields&&o.secureJsonFields.tlsClientKey,g=o.jsonData&&o.jsonData.serverName,p=a=>v=>{v.preventDefault();const x={...o.secureJsonFields};x[a]=!1,m({...o,secureJsonFields:x})},E=a=>v=>{const x={...o.secureJsonData};x[a]=v.currentTarget.value,m({...o,secureJsonData:x})},h=a=>{const v={...o.jsonData,serverName:a.currentTarget.value};m({...o,jsonData:v})};return n.createElement("div",{className:"gf-form-group"},n.createElement("div",{className:(0,t.cx)("gf-form",t.css`
            align-items: baseline;
          `)},n.createElement("h6",null,"TLS/SSL Auth Details"),n.createElement(i.u,{placement:"right-end",content:"TLS/SSL Certs are encrypted and stored in the Grafana database.",theme:"info"},n.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},n.createElement(s.J,{name:"info-circle",size:"xs",style:{marginLeft:"10px"}})))),n.createElement("div",null,o.jsonData.tlsAuthWithCACert&&n.createElement(f.W,{hasCert:!!r,onChange:E("tlsCACert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",label:"CA Cert",onClick:p("tlsCACert")}),o.jsonData.tlsAuth&&n.createElement(n.Fragment,null,n.createElement("div",{className:"gf-form"},n.createElement(l.W,{label:"ServerName",labelWidth:7,inputWidth:30,placeholder:"domain.example.com",value:g&&o.jsonData.serverName,onChange:h})),n.createElement(f.W,{hasCert:!!u,label:"Client Cert",onChange:E("tlsClientCert"),placeholder:"Begins with -----BEGIN CERTIFICATE-----",onClick:p("tlsClientCert")}),n.createElement(f.W,{hasCert:!!d,label:"Client Key",placeholder:"Begins with -----BEGIN RSA PRIVATE KEY-----",onChange:E("tlsClientKey"),onClick:p("tlsClientKey")}))))}},77239:(Z,O,e)=>{"use strict";e.d(O,{M:()=>o});var t=e(9892),n=e(68404),l=e(23481),s=e(72648),i=e(94437),f=e(39904),c=e(36290);const o=(0,n.memo)(u=>{const d=(0,s.wW)(r),{isOpen:g,onClose:p}=u;return g?n.createElement(i.L,{useCapture:!0,includeButtonPress:!1,onClick:p},n.createElement("div",{className:d.modal,"data-testid":"date-picker"},n.createElement(m,{...u}))):null});o.displayName="DatePicker";const m=(0,n.memo)(({value:u,minDate:d,maxDate:g,onChange:p})=>{const E=(0,s.wW)(c.mg);return n.createElement(l.ZP,{className:E.body,tileClassName:E.title,value:u||new Date,minDate:d,maxDate:g,nextLabel:n.createElement(f.J,{name:"angle-right"}),prevLabel:n.createElement(f.J,{name:"angle-left"}),onChange:h=>{Array.isArray(h)||p(h)},locale:"en"})});m.displayName="Body";const r=u=>({modal:t.css`
      z-index: ${u.zIndex.modal};
      position: absolute;
      box-shadow: ${u.shadows.z3};
      background-color: ${u.colors.background.primary};
      border: 1px solid ${u.colors.border.weak};
      border-radius: 2px 0 0 2px;

      button:disabled {
        color: ${u.colors.text.disabled};
      }
    `})},86348:(Z,O,e)=>{"use strict";e.d(O,{d:()=>o});var t=e(9892),n=e(68404),l=e(46519),s=e(72648),i=e(46967),f=e(77239);const c=r=>(0,l.CQ)(r).format("L"),o=({value:r,minDate:u,maxDate:d,onChange:g,closeOnSelect:p,placeholder:E="Date",...h})=>{const[a,v]=n.useState(!1),x=(0,s.wW)(m);return n.createElement("div",{className:x.container},n.createElement(i.I,{type:"text",autoComplete:"off",placeholder:E,value:r&&c(r),onClick:()=>v(!0),onChange:y=>{y.target.value===""&&g("")},className:x.input,...h}),n.createElement(f.M,{isOpen:a,value:r&&typeof r!="string"?r:(0,l.CQ)().toDate(),minDate:u,maxDate:d,onChange:y=>{g(y),p&&v(!1)},onClose:()=>v(!1)}))},m=()=>({container:t.css`
      position: relative;
    `,input:t.css`
    /* hides the native Calendar picker icon given when using type=date */
    input[type='date']::-webkit-inner-spin-button,
    input[type='date']::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
    `})},35575:(Z,O,e)=>{"use strict";e.d(O,{x:()=>M});var t=e(9892),n=e(99510),l=e(81699),s=e(6665),i=e(68404),f=e(23481),c=e(11979),o=e(47597),m=e(38849),r=e(46519),u=e(85511),d=e(31403),g=e(81764),p=e(46967),E=e(39904),h=e(52081),a=e(72648),v=e(27581),x=e(91942),y=e(36290),C=e(21053),P=e(85052);function D(w,A,I){return(0,r.v9)(w)?w.isValid():C.isMathString(w)?C.isValid(w):(0,P.J)(w,{roundUp:A,timeZone:I}).isValid()}const M=({date:w,maxDate:A,minDate:I,label:F,onChange:K,disabledHours:W,disabledMinutes:U,disabledSeconds:N,showSeconds:S=!0})=>{const[Y,Q]=(0,i.useState)(!1),z=(0,i.useRef)(null),{overlayProps:G,underlayProps:k}=(0,s.Ir)({onClose:()=>Q(!1),isDismissable:!0,isOpen:Y,shouldCloseOnInteractOutside:ae=>{const _=document.getElementsByClassName(x.F)[0];return!(_&&_.contains(ae))}},z),{dialogProps:j}=(0,n.R)({},z),de=(0,a.l4)(),{modalBackdrop:ge}=(0,v.J)(de),re=(0,o.Z)(`(min-width: ${de.breakpoints.values.lg}px)`),ce=(0,a.wW)(B),[ie,fe]=(0,i.useState)(),[Ce,ee]=(0,i.useState)(),ne=(0,c.D)(ie,Ce,{placement:"bottom-start"}),X=(0,i.useCallback)(ae=>{Q(!1),K(ae)},[K]),te=(0,i.useCallback)(ae=>{ae.preventDefault(),Q(!0)},[Q]);return i.createElement("div",{"data-testid":"date-time-picker",style:{position:"relative"}},i.createElement(b,{date:w,onChange:K,isFullscreen:re,onOpen:te,label:F,ref:fe,showSeconds:S}),Y?re?i.createElement(u.h_,null,i.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:z,...G,...j},i.createElement(R,{date:w,onChange:X,isFullscreen:!0,onClose:()=>Q(!1),maxDate:A,minDate:I,ref:ee,style:ne.styles.popper,showSeconds:S,disabledHours:W,disabledMinutes:U,disabledSeconds:N})))):i.createElement(u.h_,null,i.createElement("div",{className:ge,...k}),i.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:z,...G,...j},i.createElement("div",{className:ce.modal},i.createElement(R,{date:w,maxDate:A,minDate:I,onChange:X,isFullscreen:!1,onClose:()=>Q(!1),showSeconds:S,disabledHours:W,disabledMinutes:U,disabledSeconds:N}))))):null)},b=i.forwardRef(({date:w,label:A,onChange:I,isFullscreen:F,onOpen:K,showSeconds:W=!0},U)=>{const N=W?"YYYY-MM-DD HH:mm:ss":"YYYY-MM-DD HH:mm",[S,Y]=(0,i.useState)(()=>({value:w?(0,m.dq)(w):(0,m.dq)((0,r.CQ)()),invalid:!1}));(0,i.useEffect)(()=>{w&&Y({invalid:!D((0,m.dq)(w,{format:N})),value:(0,r.v9)(w)?(0,m.dq)(w,{format:N}):w})},[w,N]);const Q=(0,i.useCallback)(k=>{const j=!D(k.currentTarget.value);Y({value:k.currentTarget.value,invalid:j})},[]),z=(0,i.useCallback)(()=>{(0,r.v9)(S.value)&&I((0,r.CQ)(S.value))},[S.value,I]),G=i.createElement(d.zx,{"aria-label":"Time picker",icon:"calendar-alt",variant:"secondary",onClick:K});return i.createElement(g._,{label:A,invalid:!!(S.value&&S.invalid),className:t.css`
          margin-bottom: 0;
        `},i.createElement(p.I,{onChange:Q,addonAfter:G,value:S.value,onBlur:z,"data-testid":"date-time-input",placeholder:"Select date/time",ref:U}))});b.displayName="DateTimeInput";const R=i.forwardRef(({date:w,onClose:A,onChange:I,isFullscreen:F,maxDate:K,minDate:W,style:U,showSeconds:N=!0,disabledHours:S,disabledMinutes:Y,disabledSeconds:Q},z)=>{const G=(0,a.wW)(y.mg),k=(0,a.wW)(B),[j,de]=(0,i.useState)(()=>w&&w.isValid()?w.toDate():new Date),ge=(0,i.useCallback)(ce=>{Array.isArray(ce)||de(ie=>(ce.setHours(ie.getHours()),ce.setMinutes(ie.getMinutes()),ce.setSeconds(ie.getSeconds()),ce))},[]),re=(0,i.useCallback)(ce=>{de(ce.toDate())},[]);return i.createElement("div",{className:(0,t.cx)(k.container,{[k.fullScreen]:F}),style:U,ref:z},i.createElement(f.ZP,{next2Label:null,prev2Label:null,value:j,nextLabel:i.createElement(E.J,{name:"angle-right"}),nextAriaLabel:"Next month",prevLabel:i.createElement(E.J,{name:"angle-left"}),prevAriaLabel:"Previous month",onChange:ge,locale:"en",className:G.body,tileClassName:G.title,maxDate:K,minDate:W}),i.createElement("div",{className:k.time},i.createElement(x.y,{showSeconds:N,onChange:re,value:(0,r.CQ)(j),disabledHours:S,disabledMinutes:Y,disabledSeconds:Q})),i.createElement(h.Lh,null,i.createElement(d.zx,{type:"button",onClick:()=>I((0,r.CQ)(j))},"Apply"),i.createElement(d.zx,{variant:"secondary",type:"button",onClick:A},"Cancel")))});R.displayName="DateTimeCalendar";const B=w=>({container:t.css`
    padding: ${w.spacing(1)};
    border: 1px ${w.colors.border.weak} solid;
    border-radius: ${w.shape.borderRadius(1)};
    background-color: ${w.colors.background.primary};
    z-index: ${w.zIndex.modal};
  `,fullScreen:t.css`
    position: absolute;
  `,time:t.css`
    margin-bottom: ${w.spacing(2)};
  `,modal:t.css`
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: ${w.zIndex.modal};
    max-width: 280px;
  `})},19115:(Z,O,e)=>{"use strict";e.d(O,{x:()=>C});var t=e(9892),n=e(99510),l=e(81699),s=e(6665),i=e(68404),f=e(11979),c=e(72648),o=e(37951),m=e(31403),r=e(68226),u=e(24799),d=e(39904),g=e(46967),p=e(85511),E=e(6554),h=e(65012),a=e(98574),v=e(21356),x=e(25482);const y=v.r.filter(R=>(0,x.jD)(R.from));function C(R){const{timeRange:B,onChange:w}=R,[A,I]=(0,i.useState)(!1),F=(0,i.useCallback)(()=>I(!1),[]),K=(0,x.C_)(B),[W,U]=(0,i.useState)({value:K.from,validation:(0,x.x5)(K.from)}),[N,S]=(0,i.useState)({value:K.to,validation:(0,x.x5)(K.to)}),Y=(0,i.useRef)(null),{overlayProps:Q,underlayProps:z}=(0,s.Ir)({onClose:()=>I(!1),isDismissable:!0,isOpen:A},Y),{dialogProps:G}=(0,n.R)({},Y),[k,j]=(0,i.useState)(null),[de,ge]=(0,i.useState)(null),re=(0,f.D)(k,de,{placement:"auto-start"}),ce=(0,c.wW)(M(W.validation.errorMessage,N.validation.errorMessage)),ie=ee=>{const ne=(0,x.aw)(ee);ne&&(F(),U({...W,value:ee.from}),S({...N,value:ee.to}),w(ne))},fe=(0,i.useCallback)(ee=>{ee.stopPropagation(),ee.preventDefault(),I(!A)},[A]),Ce=ee=>{if(ee.preventDefault(),!N.validation.isValid||!W.validation.isValid)return;const ne=(0,x.aw)({from:W.value,to:N.value,display:""});ne&&(w(ne),I(!1))};return i.createElement("div",{className:ce.container,ref:j},i.createElement("button",{className:ce.pickerInput,type:"button",onClick:fe},i.createElement("span",{className:ce.clockIcon},i.createElement(d.J,{name:"clock-nine"})),i.createElement("span",null,K.from," to ",K.to),i.createElement("span",{className:ce.caretIcon},i.createElement(d.J,{name:A?"angle-up":"angle-down",size:"lg"}))),A&&i.createElement(p.h_,null,i.createElement("div",{role:"presentation",className:ce.backdrop,...z}),i.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("div",{ref:Y,...Q,...G},i.createElement("div",{className:ce.content,ref:ge,style:re.styles.popper,...re.attributes},i.createElement("div",{className:ce.body},i.createElement(r.Z,{className:ce.leftSide,hideHorizontalTrack:!0},i.createElement(a.V,{title:(0,o.t)("time-picker.time-range.example-title","Example time ranges"),options:y,onChange:ie,value:K})),i.createElement("div",{className:ce.rightSide},i.createElement("div",{className:ce.title},i.createElement(h.r,null,i.createElement(E.u,{content:i.createElement(P,null),placement:"bottom",theme:"info"},i.createElement("div",null,i.createElement(o.c,{i18nKey:"time-picker.time-range.specify"},"Specify time range ",i.createElement(d.J,{name:"info-circle"})))))),i.createElement(u.g,{label:"From",invalid:!W.validation.isValid,error:W.validation.errorMessage},i.createElement(g.I,{onClick:ee=>ee.stopPropagation(),onBlur:()=>U({...W,validation:(0,x.x5)(W.value)}),onChange:ee=>U({...W,value:ee.currentTarget.value}),value:W.value})),i.createElement(u.g,{label:"To",invalid:!N.validation.isValid,error:N.validation.errorMessage},i.createElement(g.I,{onClick:ee=>ee.stopPropagation(),onBlur:()=>S({...N,validation:(0,x.x5)(N.value)}),onChange:ee=>S({...N,value:ee.currentTarget.value}),value:N.value})),i.createElement(m.zx,{"aria-label":"TimePicker submit button",onClick:Ce},"Apply time range"))))))))}const P=()=>{const R=(0,c.wW)(D);return i.createElement(i.Fragment,null,i.createElement("div",{className:R.supported},"Supported formats: ",i.createElement("code",{className:R.tooltip},"now-[digit]s/m/h/d/w")),i.createElement("div",null,"Example: to select a time range from 10 minutes ago to now"),i.createElement("code",{className:R.tooltip},"From: now-10m To: now"),i.createElement("div",{className:R.link},"For more information see"," ",i.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls/"},"docs ",i.createElement(d.J,{name:"external-link-alt"})),"."))},D=R=>({supported:t.css`
    margin-bottom: ${R.spacing(1)};
  `,tooltip:t.css`
    margin: 0;
  `,link:t.css`
    margin-top: ${R.spacing(1)};
  `}),M=(R,B)=>w=>{const A=(0,g.H)({theme:w,invalid:!1}),F=250+b(w,R)+b(w,B);return{backdrop:t.css`
      position: fixed;
      z-index: ${w.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    `,container:t.css`
      display: flex;
      position: relative;
    `,pickerInput:(0,t.cx)(A.input,A.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        padding-left: 0;
        line-height: ${w.spacing.gridSize*w.components.height.md-2}px;
      `),caretIcon:(0,t.cx)(A.suffix,t.css`
        position: relative;
        margin-left: ${w.spacing(.5)};
      `),clockIcon:(0,t.cx)(A.prefix,t.css`
        position: relative;
        margin-right: ${w.spacing(.5)};
      `),content:t.css`
      background: ${w.colors.background.primary};
      box-shadow: ${w.shadows.z3};
      position: absolute;
      z-index: ${w.zIndex.modal};
      width: 500px;
      top: 100%;
      border-radius: ${w.shape.radius.default};
      border: 1px solid ${w.colors.border.weak};
      left: 0;
      white-space: normal;
    `,body:t.css`
      display: flex;
      height: ${F}px;
    `,description:t.css`
      color: ${w.colors.text.secondary};
      font-size: ${w.typography.size.sm};
    `,leftSide:t.css`
      width: 50% !important;
      border-right: 1px solid ${w.colors.border.medium};
    `,rightSide:t.css`
      width: 50%;
      padding: ${w.spacing(1)};
    `,title:t.css`
      margin-bottom: ${w.spacing(1)};
    `}};function b(R,B){return B?B.length>34?R.spacing.gridSize*6.5:R.spacing.gridSize*4:0}},25482:(Z,O,e)=>{"use strict";e.d(O,{C_:()=>l,aw:()=>n,jD:()=>i,x5:()=>s});const t=/^now$|^now\-(\d{1,10})([wdhms])$/,n=m=>({from:f(m.from),to:f(m.to)}),l=m=>{const r=o(m.from),u=o(m.to);return{from:r,to:u,display:`${r} to ${u}`}},s=(m,r=Date.now())=>i(m)?f(m)>Math.ceil(r/1e3)?{isValid:!1,errorMessage:"Can not enter value prior to January 1, 1970."}:{isValid:!0}:{isValid:!1,errorMessage:"Value not in relative time format."},i=m=>t.test(m),f=m=>{const r=t.exec(m);if(!r||r.length!==3)return 0;const[,u,d]=r,g=parseInt(u,10);return isNaN(g)?0:g*c[d]},c={w:604800,d:86400,h:3600,m:60,s:1},o=m=>m<=0?"now":m>=c.w&&m%c.w===0?`now-${m/c.w}w`:m>=c.d&&m%c.d===0?`now-${m/c.d}d`:m>=c.h&&m%c.h===0?`now-${m/c.h}h`:m>=c.m&&m%c.m===0?`now-${m/c.m}m`:`now-${m}s`},91942:(Z,O,e)=>{"use strict";e.d(O,{F:()=>m,y:()=>r});var t=e(9892),n=e(63960),l=e(68404),s=e(46519),i=e(72648),f=e(39904),c=e(85419),o=e(73267);const m="time-of-day-picker-panel",r=({minuteStep:g=1,showHour:p=!0,showSeconds:E=!1,onChange:h,value:a,size:v="auto",disabled:x,disabledHours:y,disabledMinutes:C,disabledSeconds:P})=>{const D=(0,i.wW)(d);return l.createElement(n.Z,{className:(0,t.cx)((0,o.ht)()[v],D.input),popupClassName:(0,t.cx)(D.picker,m),defaultValue:(0,s.C_)(),onChange:M=>h((0,s.CQ)(M)),allowEmpty:!1,showSecond:E,value:(0,s.C_)(a),showHour:p,minuteStep:g,inputIcon:l.createElement(u,{wrapperStyle:D.caretWrapper}),disabled:x,disabledHours:y,disabledMinutes:C,disabledSeconds:P})},u=({wrapperStyle:g=""})=>l.createElement("div",{className:g},l.createElement(f.J,{name:"angle-down"})),d=g=>{const p=g.components.input.background,E=g.v1.palette.black,h=g.colors.background.secondary,a=g.shape.borderRadius(1),v=g.components.input.borderColor;return{caretWrapper:t.css`
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      display: inline-block;
      text-align: right;
      color: ${g.colors.text.secondary};
    `,picker:t.css`
      .rc-time-picker-panel-select {
        font-size: 14px;
        background-color: ${p};
        border-color: ${v};
        li {
          outline-width: 2px;
          &.rc-time-picker-panel-select-option-selected {
            background-color: inherit;
            border: 1px solid ${g.v1.palette.orange};
            border-radius: ${a};
          }

          &:hover {
            background: ${h};
          }

          &.rc-time-picker-panel-select-option-disabled {
            color: ${g.colors.action.disabledText};
          }
        }
      }

      .rc-time-picker-panel-inner {
        box-shadow: 0px 4px 4px ${E};
        background-color: ${p};
        border-color: ${v};
        border-radius: ${a};
        margin-top: 3px;

        .rc-time-picker-panel-input-wrap {
          margin-right: 2px;

          &,
          .rc-time-picker-panel-input {
            background-color: ${p};
            padding-top: 2px;
          }
        }

        .rc-time-picker-panel-combobox {
          display: flex;
        }
      }
    `,input:t.css`
      .rc-time-picker-input {
        background-color: ${p};
        border-radius: ${a};
        border-color: ${v};
        height: ${g.spacing(4)};

        &:focus {
          ${(0,c.focusCss)(g)}
        }

        &:disabled {
          background-color: ${g.colors.action.disabledBackground};
          color: ${g.colors.action.disabledText};
          border: 1px solid ${g.colors.action.disabledBackground};
          &:focus {
            box-shadow: none;
          }
        }
      }
    `}}},95794:(Z,O,e)=>{"use strict";e.d(O,{K:()=>a});var t=e(9892),n=e(68404),l=e(21053),s=e(46519),i=e(69311),f=e(68183),c=e(7804),o=e(72648),m=e(94437),r=e(39904),u=e(46967),d=e(3630),g=e(99489),p=e(21356);const E=x=>l.isValid(x.from)&&l.isValid(x.to),h=()=>{},a=({value:x,onChange:y,onChangeTimeZone:C=h,clearable:P,hideTimeZone:D=!0,timeZone:M="browser",placeholder:b="Select time range",isReversed:R=!0,hideQuickRanges:B=!1,disabled:w=!1})=>{const[A,I]=(0,n.useState)(!1),F=(0,o.l4)(),K=v(F,w),W=Y=>{Y.stopPropagation(),Y.preventDefault(),!w&&I(!A)},U=()=>{I(!1)},N=Y=>{U(),y(Y)},S=Y=>{Y.stopPropagation();const Q=(0,s.CQ)(null),z=(0,s.CQ)(null);y({from:Q,to:z,raw:{from:Q,to:z}})};return n.createElement("div",{className:K.container},n.createElement("button",{type:"button",className:K.pickerInput,"aria-label":f.wl.components.TimePicker.openButton,onClick:W},E(x)?n.createElement(d.sU,{value:x,timeZone:M}):n.createElement("span",{className:K.placeholder},b),!w&&n.createElement("span",{className:K.caretIcon},E(x)&&P&&n.createElement(r.J,{className:K.clearIcon,name:"times",size:"lg",onClick:S}),n.createElement(r.J,{name:A?"angle-up":"angle-down",size:"lg"}))),A&&n.createElement(m.L,{includeButtonPress:!1,onClick:U},n.createElement(g.x,{timeZone:M,value:E(x)?x:(0,i.JK)(),onChange:N,quickOptions:p.r,onChangeTimeZone:C,className:K.content,hideTimeZone:D,isReversed:R,hideQuickRanges:B})))},v=(0,c.B)((x,y=!1)=>{const C=(0,u.H)({theme:x,invalid:!1});return{container:t.css`
      display: flex;
      position: relative;
    `,content:t.css`
      margin-left: 0;
      position: absolute;
      top: 116%;
      z-index: ${x.zIndex.dropdown};
    `,pickerInput:(0,t.cx)(C.input,y&&C.inputDisabled,C.wrapper,t.css`
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        padding-right: 0;
        line-height: ${x.spacing.gridSize*4-2}px;
      `),caretIcon:(0,t.cx)(C.suffix,t.css`
        position: relative;
        top: -1px;
        margin-left: ${x.spacing(.5)};
      `),clearIcon:t.css`
      margin-right: ${x.spacing(.5)};
      &:hover {
        color: ${x.colors.text.maxContrast};
      }
    `,placeholder:t.css`
      color: ${x.colors.text.disabled};
      opacity: 1;
    `}})},3630:(Z,O,e)=>{"use strict";e.d(O,{IF:()=>P,Xc:()=>y,sU:()=>D});var t=e(9892),n=e(99510),l=e(81699),s=e(6665),i=e(68404),f=e(46519),c=e(38849),o=e(38306),m=e(33180),r=e(21053),u=e(68183),d=e(72648),g=e(37951),p=e(26202),E=e(27581),h=e(64319),a=e(6554),v=e(99489),x=e(21356);function y(B){const[w,A]=(0,i.useState)(!1),{value:I,onMoveBackward:F,onMoveForward:K,onZoom:W,timeZone:U,fiscalYearStartMonth:N,timeSyncButton:S,isSynced:Y,history:Q,onChangeTimeZone:z,onChangeFiscalYearStartMonth:G,hideQuickRanges:k,widthOverride:j,isOnCanvas:de}=B,ge=Ve=>{B.onChange(Ve),A(!1)},re=Ve=>{Ve.stopPropagation(),Ve.preventDefault(),A(!w)},ce=()=>{A(!1)},ie=(0,i.createRef)(),{overlayProps:fe,underlayProps:Ce}=(0,s.Ir)({onClose:ce,isDismissable:!0,isOpen:w},ie),{dialogProps:ee}=(0,n.R)({},ie),ne=(0,d.l4)(),X=(0,d.wW)(b),{modalBackdrop:te}=(0,E.J)(ne),ae=(0,f.v9)(I.raw.from)||(0,f.v9)(I.raw.to),_=Y?"active":de?"canvas":"default",ve=M(I,U);return i.createElement(p.h,{className:X.container},ae&&i.createElement(h.h,{"aria-label":(0,g.t)("time-picker.range-picker.backwards-time-aria-label","Move time range backwards"),variant:_,onClick:F,icon:"angle-left",narrow:!0}),i.createElement(a.u,{content:i.createElement(P,{timeRange:I,timeZone:U}),placement:"bottom",interactive:!0},i.createElement(h.h,{"data-testid":u.wl.components.TimePicker.openButton,"aria-label":(0,g.t)("time-picker.range-picker.current-time-selected","Time range selected: {{currentTimeRange}}",{currentTimeRange:ve}),"aria-controls":"TimePickerContent",onClick:re,icon:"clock-nine",isOpen:w,variant:_},i.createElement(D,{...B}))),w&&i.createElement("div",null,i.createElement("div",{role:"presentation",className:(0,t.cx)(te,X.backdrop),...Ce}),i.createElement(l.MT,{contain:!0,autoFocus:!0},i.createElement("section",{className:X.content,ref:ie,...fe,...ee},i.createElement(v.x,{timeZone:U,fiscalYearStartMonth:N,value:I,onChange:ge,quickOptions:x.r,history:Q,showHistory:!0,widthOverride:j,onChangeTimeZone:z,onChangeFiscalYearStartMonth:G,hideQuickRanges:k})))),S,ae&&i.createElement(h.h,{"aria-label":(0,g.t)("time-picker.range-picker.forwards-time-aria-label","Move time range forwards"),onClick:K,icon:"angle-right",narrow:!0,variant:_}),i.createElement(a.u,{content:C,placement:"bottom"},i.createElement(h.h,{"aria-label":(0,g.t)("time-picker.range-picker.zoom-out-button","Zoom out time range"),onClick:W,icon:"search-minus",variant:_})))}y.displayName="TimeRangePicker";const C=()=>i.createElement(i.Fragment,null,i.createElement(g.c,{i18nKey:"time-picker.range-picker.zoom-out-tooltip"},"Time range zoom out ",i.createElement("br",null)," CTRL+Z")),P=({timeRange:B,timeZone:w})=>{const A=(0,d.wW)(R);return i.createElement(i.Fragment,null,(0,c.dq)(B.from,{timeZone:w}),i.createElement("div",{className:"text-center"},i.createElement(g.c,{i18nKey:"time-picker.range-picker.to"},"to")),(0,c.dq)(B.to,{timeZone:w}),i.createElement("div",{className:"text-center"},i.createElement("span",{className:A.utc},(0,o.Vs)(w))))},D=(0,i.memo)(({hideText:B,value:w,timeZone:A})=>{const I=(0,d.wW)(R);return B?null:i.createElement("span",{className:I.container},i.createElement("span",null,M(w,A)),i.createElement("span",{className:I.utc},m.describeTimeRangeAbbreviation(w,A)))});D.displayName="TimePickerButtonLabel";const M=(B,w)=>{const A={to:r.isMathString(B.raw.to)?B.raw.to:B.to,from:r.isMathString(B.raw.from)?B.raw.from:B.from};return m.describeTimeRange(A,w)},b=B=>({container:t.css`
      position: relative;
      display: flex;
      vertical-align: middle;
    `,backdrop:(0,t.css)({display:"none",[B.breakpoints.down("sm")]:{display:"block"}}),content:(0,t.css)({position:"absolute",right:0,top:"116%",zIndex:B.zIndex.dropdown,[B.breakpoints.down("sm")]:{position:"fixed",right:"50%",top:"50%",transform:"translate(50%, -50%)",zIndex:B.zIndex.modal}})}),R=B=>({container:t.css`
      display: flex;
      align-items: center;
      white-space: nowrap;
    `,utc:t.css`
      color: ${B.v1.palette.orange};
      font-size: ${B.typography.size.sm};
      padding-left: 6px;
      line-height: 28px;
      vertical-align: bottom;
      font-weight: ${B.typography.fontWeightMedium};
    `})},36290:(Z,O,e)=>{"use strict";e.d(O,{mg:()=>d,uT:()=>o});var t=e(9892),n=e(68404),l=e(23481),s=e(46519),i=e(85052),f=e(72648),c=e(39904);function o({onChange:g,from:p,to:E,timeZone:h}){const a=m(p,E),v=r(g,h),x=(0,f.wW)(d);return n.createElement(l.ZP,{selectRange:!0,next2Label:null,prev2Label:null,className:x.body,tileClassName:x.title,value:a,nextLabel:n.createElement(c.J,{name:"angle-right"}),prevLabel:n.createElement(c.J,{name:"angle-left"}),onChange:v,locale:"en"})}o.displayName="Body";function m(g,p,E=new Date){const h=g.toDate(),a=p.toDate(),v=(0,s.CQ)(h).isValid()?h:E,x=(0,s.CQ)(a).isValid()?a:E;return v>x?[x,v]:[v,x]}function r(g,p){return(0,n.useCallback)(E=>{if(!Array.isArray(E))return console.error("onCalendarChange: should be run in selectRange={true}");const h=(0,i.J)(u(E[0]),{timeZone:p}),a=(0,i.J)(u(E[1]),{timeZone:p});g(h,a)},[g,p])}function u(g){return[g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds()]}const d=g=>{const p=".react-calendar__tile--hasActive:not(.react-calendar__tile--range)";return{title:t.css`
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.primary};
      font-size: ${g.typography.size.md};
      border: 1px solid transparent;

      &:hover {
        position: relative;
      }

      &:disabled {
        color: ${g.colors.action.disabledText};
      }
    `,body:t.css`
      z-index: ${g.zIndex.modal};
      background-color: ${g.colors.background.primary};
      width: 268px;

      .react-calendar__navigation {
        display: flex;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation__arrow,
      .react-calendar__navigation {
        padding-top: 4px;
        background-color: inherit;
        color: ${g.colors.text.primary};
        border: 0;
        font-weight: ${g.typography.fontWeightMedium};
      }

      .react-calendar__month-view__weekdays {
        background-color: inherit;
        text-align: center;
        color: ${g.colors.primary.text};

        abbr {
          border: 0;
          text-decoration: none;
          cursor: default;
          display: block;
          padding: 4px 0 4px 0;
        }
      }

      .react-calendar__month-view__days {
        background-color: inherit;
      }

      .react-calendar__tile,
      .react-calendar__tile--now {
        margin-bottom: 4px;
        background-color: inherit;
        height: 26px;
      }

      .react-calendar__navigation__label,
      .react-calendar__navigation > button:focus,
      .time-picker-calendar-tile:focus {
        outline: 0;
      }

      ${p},
      .react-calendar__tile--active,
      .react-calendar__tile--active:hover {
        color: ${g.colors.primary.contrastText};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.primary.main};
        box-shadow: none;
        border: 0px;
      }

      .react-calendar__tile--rangeEnd,
      .react-calendar__tile--rangeStart {
        padding: 0;
        border: 0px;
        color: ${g.colors.primary.contrastText};
        font-weight: ${g.typography.fontWeightMedium};
        background: ${g.colors.primary.main};

        abbr {
          background-color: ${g.colors.primary.main};
          border-radius: 100px;
          display: block;
          padding-top: 2px;
          height: 26px;
        }
      }

      ${p},
      .react-calendar__tile--rangeStart {
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
      }

      ${p},
      .react-calendar__tile--rangeEnd {
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
      }
    `}}},99489:(Z,O,e)=>{"use strict";e.d(O,{x:()=>_});var t=e(9892),n=e(68404),l=e(46519),s=e(33180),i=e(68183),f=e(14747),c=e(72648),o=e(7804),m=e(85419),r=e(37951),u=e(68226),d=e(39904),g=e(82897),p=e(38306),E=e(2594),h=e(24799),a=e(53217),v=e(31403),x=e(52566),y=e(64612),C=e(4883),P=e(10516),D=e(21356);const M=Ae=>{const{timeZone:et,fiscalYearStartMonth:_e,timestamp:Se=Date.now(),onChangeTimeZone:Fe,onChangeFiscalYearStartMonth:Xe}=Ae,[Qe,ct]=(0,n.useState)(!1),[ht,ft]=(0,n.useState)("tz"),Re=(0,n.useCallback)(Oe=>{Oe&&Oe.stopPropagation(),ct(!Qe)},[Qe,ct]),nt=(0,c.l4)(),le=b(nt);if(!(0,g.isString)(et))return null;const Pe=(0,p.Pr)(et,Se);return Pe?n.createElement("div",null,n.createElement("section",{"aria-label":(0,r.t)("time-picker.footer.time-zone-selection","Time zone selection"),className:le.container},n.createElement("div",{className:le.timeZoneContainer},n.createElement("div",{className:le.timeZone},n.createElement(P.d,{title:Pe.name}),n.createElement("div",{className:le.spacer}),n.createElement(y.K,{info:Pe})),n.createElement(C.v,{timeZone:et,timestamp:Se})),n.createElement("div",{className:le.spacer}),n.createElement(v.zx,{variant:"secondary",onClick:Re,size:"sm"},n.createElement(r.c,{i18nKey:"time-picker.footer.change-settings-button"},"Change time settings"))),Qe?n.createElement("div",{className:le.editContainer},n.createElement("div",null,n.createElement(E.S,{value:ht,options:[{label:(0,r.t)("time-picker.footer.time-zone-option","Time zone"),value:"tz"},{label:(0,r.t)("time-picker.footer.fiscal-year-option","Fiscal year"),value:"fy"}],onChange:ft})),ht==="tz"?n.createElement("section",{"data-testid":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(le.timeZoneContainer,le.timeSettingContainer)},n.createElement(x.O,{includeInternal:!0,onChange:Oe=>{Re(),(0,g.isString)(Oe)&&Fe(Oe)},onBlur:Re})):n.createElement("section",{"aria-label":i.wl.components.TimeZonePicker.containerV2,className:(0,t.cx)(le.timeZoneContainer,le.timeSettingContainer)},n.createElement(h.g,{className:le.fiscalYearField,label:(0,r.t)("time-picker.footer.fiscal-year-start","Fiscal year start month")},n.createElement(a.Ph,{value:_e,menuShouldPortal:!1,options:D.E,onChange:Oe=>{Xe&&Xe(Oe.value??0)}})))):null):null},b=(0,o.B)(Ae=>({container:t.css`
      border-top: 1px solid ${Ae.colors.border.weak};
      padding: 11px;
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
    `,editContainer:t.css`
      border-top: 1px solid ${Ae.colors.border.weak};
      padding: 11px;
      justify-content: space-between;
      align-items: center;
      padding: 7px;
    `,spacer:t.css`
      margin-left: 7px;
    `,timeSettingContainer:t.css`
      padding-top: ${Ae.spacing(1)};
    `,fiscalYearField:t.css`
      margin-bottom: 0px;
    `,timeZoneContainer:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      flex-grow: 1;
    `,timeZone:t.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
      flex-grow: 1;
    `}));var R=e(65012),B=e(85052),w=e(38849),A=e(21053),I=e(6554),F=e(46967),K=e(99510),W=e(81699),U=e(6665),N=e(27581),S=e(36290);function Y({onClose:Ae,onApply:et}){const _e=(0,c.wW)(Q);return n.createElement("div",{className:_e.container},n.createElement(v.zx,{className:_e.apply,onClick:et},n.createElement(r.c,{i18nKey:"time-picker.calendar.apply-button"},"Apply time range")),n.createElement(v.zx,{variant:"secondary",onClick:Ae},n.createElement(r.c,{i18nKey:"time-picker.calendar.cancel-button"},"Cancel")))}Y.displayName="Footer";const Q=Ae=>({container:t.css`
      background-color: ${Ae.colors.background.primary};
      display: flex;
      justify-content: center;
      padding: 10px;
      align-items: stretch;
    `,apply:t.css`
      margin-right: 4px;
      width: 100%;
      justify-content: center;
    `});function z({onClose:Ae}){const et=(0,c.wW)(G);return n.createElement("div",{className:et.container},n.createElement(R.r,null,n.createElement(r.c,{i18nKey:"time-picker.calendar.select-time"},"Select a time range")),n.createElement(v.zx,{"aria-label":i.wl.components.TimePicker.calendar.closeButton,icon:"times",variant:"secondary",onClick:Ae}))}z.displayName="Header";const G=Ae=>({container:t.css`
      background-color: ${Ae.colors.background.primary};
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 7px;
    `}),k=(Ae,et=!1)=>({container:t.css`
      top: 0px;
      position: absolute;
      ${et?"left":"right"}: 544px;
      box-shadow: ${Ae.shadows.z3};
      background-color: ${Ae.colors.background.primary};
      z-index: -1;
      border: 1px solid ${Ae.colors.border.weak};
      border-radius: 2px 0 0 2px;

      &:after {
        display: block;
        background-color: ${Ae.colors.background.primary};
        width: 19px;
        height: 100%;
        content: ${et?"":" "};
        position: absolute;
        top: 0;
        right: -19px;
        border-left: 1px solid ${Ae.colors.border.weak};
      }
    `,modal:t.css`
      box-shadow: ${Ae.shadows.z3};
      left: 50%;
      position: fixed;
      top: 50%;
      transform: translate(-50%, -50%);
      z-index: ${Ae.zIndex.modal};
    `,content:t.css`
      margin: 0 auto;
      width: 268px;
    `});function j(Ae){const et=(0,c.l4)(),{modalBackdrop:_e}=(0,N.J)(et),Se=k(et,Ae.isReversed),{isOpen:Fe,isFullscreen:Xe,onClose:Qe}=Ae,ct=n.createRef(),{dialogProps:ht}=(0,K.R)({"aria-label":i.wl.components.TimePicker.calendar.label},ct),{overlayProps:ft}=(0,U.Ir)({isDismissable:!0,isOpen:Fe,onClose:Qe},ct);return Fe?Xe?n.createElement(W.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},n.createElement("section",{className:Se.container,ref:ct,...ft,...ht},n.createElement(z,{...Ae}),n.createElement(S.uT,{...Ae}))):n.createElement(U.Xj,null,n.createElement("div",{className:_e}),n.createElement(W.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},n.createElement("section",{className:Se.modal,ref:ct,...ft,...ht},n.createElement("div",{className:Se.content,"aria-label":i.wl.components.TimePicker.calendar.label},n.createElement(z,{...Ae}),n.createElement(S.uT,{...Ae}),n.createElement(Y,{...Ae}))))):null}const de=(0,n.memo)(j);j.displayName="TimePickerCalendar";const ge={default:()=>(0,r.t)("time-picker.range-content.default-error",'Please enter a past date or "now"'),range:()=>(0,r.t)("time-picker.range-content.range-error",`"From" can't be after "To"`)},re=Ae=>{const{value:et,isFullscreen:_e=!1,timeZone:Se,onApply:Fe,isReversed:Xe,fiscalYearStartMonth:Qe}=Ae,[ct,ht]=ie(et.raw.from,et.raw.to,Se),ft=(0,c.wW)(ee),[Re,nt]=(0,n.useState)(ct),[le,Pe]=(0,n.useState)(ht),[Oe,Le]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const[tt,Ge]=ie(et.raw.from,et.raw.to,Se);nt(tt),Pe(Ge)},[et.raw.from,et.raw.to,Se]);const Ye=(0,n.useCallback)(tt=>{tt.preventDefault(),Le(!0)},[Le]),be=(0,n.useCallback)(()=>{if(le.invalid||Re.invalid)return;const tt={from:Re.value,to:le.value},Ge=s.convertRawToRange(tt,Se,Qe);Fe(Ge)},[Re.invalid,Re.value,Fe,Se,le.invalid,le.value,Qe]),Te=(0,n.useCallback)((tt,Ge)=>{const[dt,pt]=ie(tt,Ge,Se);nt(dt),Pe(pt)},[Se]),me=tt=>{tt.key==="Enter"&&be()},he=s.convertRawToRange({from:"now/fy",to:"now/fy"},Se,Qe),De=(0,r.t)("time-picker.range-content.fiscal-year","Fiscal year"),$e=n.createElement("div",{className:ft.tooltip},s.isFiscal(et)?n.createElement(I.u,{content:`${De}: ${he.from.format("MMM-DD")} - ${he.to.format("MMM-DD")}`},n.createElement(d.J,{name:"info-circle"})):null),ke=n.createElement(v.zx,{"aria-label":i.wl.components.TimePicker.calendar.openButton,icon:"calendar-alt",variant:"secondary",type:"button",onClick:Ye});return n.createElement("div",null,n.createElement("div",{className:ft.fieldContainer},n.createElement(h.g,{label:(0,r.t)("time-picker.range-content.from-input","From"),invalid:Re.invalid,error:Re.errorMessage},n.createElement(F.I,{onClick:tt=>tt.stopPropagation(),onChange:tt=>Te(tt.currentTarget.value,le.value),addonAfter:ke,onKeyDown:me,"aria-label":i.wl.components.TimePicker.fromField,value:Re.value})),$e),n.createElement("div",{className:ft.fieldContainer},n.createElement(h.g,{label:(0,r.t)("time-picker.range-content.to-input","To"),invalid:le.invalid,error:le.errorMessage},n.createElement(F.I,{onClick:tt=>tt.stopPropagation(),onChange:tt=>Te(Re.value,tt.currentTarget.value),addonAfter:ke,onKeyDown:me,"aria-label":i.wl.components.TimePicker.toField,value:le.value})),$e),n.createElement(v.zx,{"data-testid":i.wl.components.TimePicker.applyTimeRange,type:"button",onClick:be},n.createElement(r.c,{i18nKey:"time-picker.range-content.apply-button"},"Apply time range")),n.createElement(de,{isFullscreen:_e,isOpen:Oe,from:(0,B.J)(Re.value),to:(0,B.J)(le.value),onApply:be,onClose:()=>Le(!1),onChange:Te,timeZone:Se,isReversed:Xe}))};function ce(Ae,et,_e){const Se={from:Ae,to:et},Fe=s.convertRawToRange(Se,_e);return!(Fe.from.isSame(Fe.to)||Fe.from.isBefore(Fe.to))}function ie(Ae,et,_e){const Se=fe(Ae,_e),Fe=fe(et,_e),Xe=!Ce(Se,!1,_e),Qe=!Ce(Fe,!0,_e),ct=ce(Se,Fe,_e)&&!Qe;return[{value:Se,invalid:Xe||ct,errorMessage:ct&&!Xe?ge.range():ge.default()},{value:Fe,invalid:Qe,errorMessage:ge.default()}]}function fe(Ae,et){return(0,l.v9)(Ae)?(0,w.dq)(Ae,{timeZone:et}):Ae}function Ce(Ae,et,_e){return(0,l.v9)(Ae)?Ae.isValid():A.isMathString(Ae)?A.isValid(Ae):(0,B.J)(Ae,{roundUp:et,timeZone:_e}).isValid()}function ee(Ae){return{fieldContainer:t.css`
      display: flex;
    `,tooltip:t.css`
      padding-left: ${Ae.spacing(1)};
      padding-top: ${Ae.spacing(3)};
    `}}var ne=e(98574);const X=(Ae,et)=>s.convertRawToRange({from:Ae.from,to:Ae.to},et),te=(Ae,et)=>{const _e=(0,w.dq)(Ae.from,{timeZone:et}),Se=(0,w.dq)(Ae.to,{timeZone:et});return{from:_e,to:Se,display:`${_e} to ${Se}`}},ae=Ae=>{const{quickOptions:et=[],isReversed:_e,isFullscreen:Se,hideQuickRanges:Fe,timeZone:Xe,fiscalYearStartMonth:Qe,value:ct,onChange:ht,history:ft,showHistory:Re,className:nt,hideTimeZone:le,onChangeTimeZone:Pe,onChangeFiscalYearStartMonth:Oe}=Ae,Le=!ft?.length,Ye=Se&&Re||!Se&&(Re&&!Le||!Fe),be=(0,c.l4)(),Te=Ie(be,_e,Fe,Ye,Se),me=rt(ft,Xe),he=pe(ct.raw,et),[De,$e]=(0,n.useState)(""),ke=et.filter(Ge=>Ge.display.toLowerCase().includes(De.toLowerCase())),tt=Ge=>ht(X(Ge));return n.createElement("div",{id:"TimePickerContent",className:(0,t.cx)(Te.container,nt)},n.createElement("div",{className:Te.body},(!Se||!Fe)&&n.createElement("div",{className:Te.rightSide},n.createElement("div",{className:Te.timeRangeFilter},n.createElement(f.H,{width:0,autoFocus:!0,value:De,onChange:$e,placeholder:(0,r.t)("time-picker.content.filter-placeholder","Search quick ranges")})),n.createElement(u.$,null,!Se&&n.createElement(ve,{...Ae,historyOptions:me}),!Fe&&n.createElement(ne.V,{options:ke,onChange:tt,value:he}))),Se&&n.createElement("div",{className:Te.leftSide},n.createElement(Ve,{...Ae,historyOptions:me}))),!le&&Se&&n.createElement(M,{timeZone:Xe,fiscalYearStartMonth:Qe,onChangeTimeZone:Pe,onChangeFiscalYearStartMonth:Oe}))},_=Ae=>{const{widthOverride:et}=Ae,_e=(0,c.l4)(),Se=(et||window.innerWidth)>=_e.breakpoints.values.lg;return n.createElement(ae,{...Ae,isFullscreen:Se})},ve=Ae=>{const{value:et,hideQuickRanges:_e,onChange:Se,timeZone:Fe,historyOptions:Xe=[],showHistory:Qe}=Ae,ct=(0,c.l4)(),ht=We(ct),ft=(0,l.v9)(et.raw.from)||(0,l.v9)(et.raw.to),[Re,nt]=(0,n.useState)(!ft),le=_e?!1:Re,Pe=Oe=>Se(X(Oe,Fe));return n.createElement("fieldset",null,n.createElement("div",{className:ht.header},n.createElement("button",{type:"button",className:ht.expandButton,onClick:()=>{_e||nt(!le)},"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle,"aria-expanded":!le,"aria-controls":"expanded-timerange"},n.createElement(R.r,null,n.createElement(r.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range")),!_e&&n.createElement(d.J,{name:le?"angle-down":"angle-up"}))),!le&&n.createElement("div",{className:ht.body,id:"expanded-timerange"},n.createElement("div",{className:ht.form},n.createElement(re,{value:et,onApply:Se,timeZone:Fe,isFullscreen:!1})),Qe&&n.createElement(ne.V,{title:(0,r.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Xe,onChange:Pe,placeholderEmpty:null})))},Ve=Ae=>{const{onChange:et,value:_e,timeZone:Se,fiscalYearStartMonth:Fe,isReversed:Xe,historyOptions:Qe}=Ae,ct=(0,c.l4)(),ht=Je(ct,Ae.hideQuickRanges),ft=Re=>et(X(Re,Se));return n.createElement(n.Fragment,null,n.createElement("div",{className:ht.container},n.createElement("div",{className:ht.title,"data-testid":i.wl.components.TimePicker.absoluteTimeRangeTitle},n.createElement(R.r,null,n.createElement(r.c,{i18nKey:"time-picker.absolute.title"},"Absolute time range"))),n.createElement(re,{value:_e,timeZone:Se,fiscalYearStartMonth:Fe,onApply:et,isFullscreen:!0,isReversed:Xe})),Ae.showHistory&&n.createElement("div",{className:ht.recent},n.createElement(ne.V,{title:(0,r.t)("time-picker.absolute.recent-title","Recently used absolute ranges"),options:Qe||[],onChange:ft,placeholderEmpty:n.createElement(it,null)})))},it=(0,n.memo)(()=>{const Ae=(0,c.l4)(),et=He(Ae);return n.createElement("div",{className:et.container},n.createElement(r.c,{i18nKey:"time-picker.content.empty-recent-list"},n.createElement("div",null,n.createElement("span",null,"It looks like you haven't used this time picker before. As soon as you enter some time intervals, recently used intervals will appear here.")),n.createElement("div",null,n.createElement("a",{className:et.link,href:"https://grafana.com/docs/grafana/latest/dashboards/time-range-controls",target:"_new"},"Read the documentation"),n.createElement("span",null," to find out more about how to enter custom time ranges."))))});function rt(Ae,et){return!Array.isArray(Ae)||Ae.length===0?[]:Ae.map(_e=>te(_e,et))}it.displayName="EmptyRecentList";const pe=(Ae,et)=>(0,n.useMemo)(()=>{if(s.isRelativeTimeRange(Ae))return et.find(_e=>_e.from===Ae.from&&_e.to===Ae.to)},[Ae,et]),Ie=(0,o.B)((Ae,et,_e,Se,Fe)=>({container:t.css`
      background: ${Ae.colors.background.primary};
      box-shadow: ${Ae.shadows.z3};
      width: ${Fe?"546px":"262px"};
      border-radius: 2px;
      border: 1px solid ${Ae.colors.border.weak};
      ${et?"left":"right"}: 0;
    `,body:t.css`
      display: flex;
      flex-direction: row-reverse;
      height: ${Se?"381px":"217px"};
    `,leftSide:t.css`
      display: flex;
      flex-direction: column;
      border-right: ${et?"none":`1px solid ${Ae.colors.border.weak}`};
      width: ${_e?"100%":"60%"};
      overflow: hidden;
      order: ${et?1:0};
    `,rightSide:t.css`
      width: ${Fe?"40%":"100%"}; !important;
      border-right: ${et?`1px solid ${Ae.colors.border.weak}`:"none"};
      display: flex;
      flex-direction: column;
    `,timeRangeFilter:t.css`
      padding: ${Ae.spacing(1)};
    `,spacing:t.css`
      margin-top: 16px;
    `})),We=(0,o.B)(Ae=>({header:t.css`
      display: flex;
      flex-direction: row;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid ${Ae.colors.border.weak};
      padding: 7px 9px 7px 9px;
    `,expandButton:t.css`
      background-color: transparent;
      border: none;
      display: flex;
      width: 100%;

      &:focus-visible {
        ${(0,m.getFocusStyles)(Ae)}
      }
    `,body:t.css`
      border-bottom: 1px solid ${Ae.colors.border.weak};
    `,form:t.css`
      padding: 7px 9px 7px 9px;
    `})),Je=(0,o.B)((Ae,et)=>({container:t.css`
      padding-top: 9px;
      padding-left: 11px;
      padding-right: ${et?"11px":"20%"};
    `,title:t.css`
      margin-bottom: 11px;
    `,recent:t.css`
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding-top: ${Ae.spacing(1)};
    `})),He=(0,o.B)(Ae=>({container:t.css`
      padding: 12px;
      margin: 12px;

      a,
      span {
        font-size: 13px;
      }\
    `,link:t.css`
      color: ${Ae.colors.text.link};
    `}))},65012:(Z,O,e)=>{"use strict";e.d(O,{r:()=>i});var t=e(9892),n=e(68404),l=e(72648);const s=f=>({text:t.css`
      font-size: ${f.typography.size.md};
      font-weight: ${f.typography.fontWeightMedium};
      color: ${f.colors.text.primary};
      margin: 0;
      display: flex;
    `}),i=(0,n.memo)(({children:f})=>{const c=(0,l.wW)(s);return n.createElement("h3",{className:c.text},f)});i.displayName="TimePickerTitle"},98574:(Z,O,e)=>{"use strict";e.d(O,{V:()=>g});var t=e(9892),n=e(68404),l=e(7804),s=e(37951),i=e(65012),f=e(44288),c=e(72648),o=e(85419);const m=a=>({container:t.css`
      display: flex;
      align-items: center;
      flex-direction: row-reverse;
      justify-content: space-between;
    `,selected:t.css`
      background: ${a.colors.action.selected};
      font-weight: ${a.typography.fontWeightMedium};
    `,radio:t.css`
      opacity: 0;
      width: 0 !important;

      &:focus-visible + label {
        ${(0,o.getFocusStyles)(a)};
      }
    `,label:t.css`
      cursor: pointer;
      flex: 1;
      padding: 7px 9px 7px 9px;

      &:hover {
        background: ${a.colors.action.hover};
        cursor: pointer;
      }
    `}),r=(0,n.memo)(({value:a,onSelect:v,selected:x=!1,name:y})=>{const C=(0,c.wW)(m),P=(0,f.Z)();return n.createElement("li",{className:(0,t.cx)(C.container,x&&C.selected)},n.createElement("input",{className:C.radio,checked:x,name:y,type:"checkbox",id:P,onChange:()=>v(a)}),n.createElement("label",{className:C.label,htmlFor:P},a.display))});r.displayName="TimeRangeOption";const u=(0,l.B)(()=>({title:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 16px 5px 9px;
    `})),d=(0,l.B)(()=>({grow:t.css`
      flex-grow: 1;
      align-items: flex-start;
    `})),g=a=>{const v=u(),{title:x,options:y,placeholderEmpty:C}=a;return typeof C<"u"&&y.length<=0?n.createElement(n.Fragment,null,C):x?n.createElement("section",{"aria-label":x},n.createElement("fieldset",null,n.createElement("div",{className:v.title},n.createElement(i.r,null,x)),n.createElement(p,{...a}))):n.createElement(p,{...a})},p=({options:a,value:v,onChange:x,title:y})=>{const C=d();return n.createElement(n.Fragment,null,n.createElement("ul",{"aria-roledescription":(0,s.t)("time-picker.time-range.aria-role","Time range selection")},a.map((P,D)=>n.createElement(r,{key:E(P,D),value:P,selected:h(P,v),onSelect:x,name:y??(0,s.t)("time-picker.time-range.default-title","Time ranges")}))),n.createElement("div",{className:C.grow}))};function E(a,v){return`${a.from}-${a.to}-${v}`}function h(a,v){return!v||!a?!1:v.from===a.from&&v.to===a.to}},52566:(Z,O,e)=>{"use strict";e.d(O,{O:()=>x});var t=e(82897),n=e(68404),l=e(38306),s=e(37951),i=e(53217),f=e(9892),c=e(72648);const o=b=>{const{children:R,label:B}=b,w=(0,c.wW)(m);return B?n.createElement("div",null,n.createElement("div",{className:w.header},n.createElement("span",{className:w.label},B)),R):n.createElement("div",null,R)},m=b=>({header:f.css`
      padding: 7px 10px;
      width: 100%;
      border-top: 1px solid ${b.colors.border.weak};
      text-transform: capitalize;
    `,label:f.css`
      font-size: ${b.typography.size.sm};
      color: ${b.colors.text.secondary};
      font-weight: ${b.typography.fontWeightMedium};
    `});var r=e(4883),u=e(7804),d=e(39904),g=e(64612),p=e(10516);const E="tz-utc-offset",h=b=>{const{children:R,innerProps:B,innerRef:w,data:A,isSelected:I,isFocused:F}=b,K=(0,c.l4)(),W=v(K),U=Date.now(),N=(0,f.cx)(W.container,F&&W.containerFocused);if(!(0,t.isString)(A.value))return null;const S=(0,l.Pr)(A.value,U);return n.createElement("div",{className:N,...B,ref:w,"aria-label":"Select option"},n.createElement("div",{className:(0,f.cx)(W.leftColumn,W.row)},n.createElement("div",{className:(0,f.cx)(W.leftColumn,W.wideRow)},n.createElement(p.d,{title:R}),n.createElement("div",{className:W.spacer}),n.createElement(g.K,{info:S})),n.createElement("div",{className:W.rightColumn},n.createElement(r.v,{timeZone:S?.ianaName||A.value,timestamp:U,className:E}),I&&n.createElement("span",null,n.createElement(d.J,{name:"check"})))))},a=b=>{const{children:R,innerProps:B,innerRef:w,data:A,isSelected:I,isFocused:F}=b,K=(0,c.l4)(),W=v(K),U=Date.now(),N=(0,f.cx)(W.container,F&&W.containerFocused);if(!(0,t.isString)(A.value))return null;const S=(0,l.Pr)(A.value,U);return n.createElement("div",{className:N,...B,ref:w,"aria-label":"Select option"},n.createElement("div",{className:W.body},n.createElement("div",{className:W.row},n.createElement("div",{className:W.leftColumn},n.createElement(p.d,{title:R})),n.createElement("div",{className:W.rightColumn},I&&n.createElement("span",null,n.createElement(d.J,{name:"check"})))),n.createElement("div",{className:W.row},n.createElement("div",{className:W.leftColumn},n.createElement(g.K,{info:S})),n.createElement("div",{className:W.rightColumn},n.createElement(r.v,{timestamp:U,timeZone:S?.ianaName||A.value,className:E})))))},v=(0,u.B)(b=>({container:f.css`
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      padding: 6px 8px 4px;

      &:hover {
        background: ${b.colors.action.hover};
      }
    `,containerFocused:f.css`
      background: ${b.colors.action.hover};
    `,body:f.css`
      display: flex;
      font-weight: ${b.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,row:f.css`
      display: flex;
      flex-direction: row;
    `,leftColumn:f.css`
      flex-grow: 1;
      text-overflow: ellipsis;
    `,rightColumn:f.css`
      justify-content: flex-end;
      align-items: center;
    `,wideRow:f.css`
      display: flex;
      flex-direction: row;
      align-items: baseline;
    `,spacer:f.css`
      margin-left: 6px;
    `})),x=b=>{const{onChange:R,width:B,autoFocus:w=!1,onBlur:A,value:I,includeInternal:F=!1,disabled:K=!1,inputId:W}=b,U=y(F),N=C(U,I),S=D(),Y=B&&B<=45?a:h,Q=(0,n.useCallback)(z=>{if(!z||!(0,t.isString)(z.value))return R(I);R(z.value)},[R,I]);return n.createElement(i.Ph,{inputId:W,value:N,placeholder:(0,s.t)("time-picker.zone.select-search-input","Type to search (country, city, abbreviation)"),autoFocus:w,menuShouldPortal:!1,openMenuOnFocus:!0,width:B,filterOption:S,options:U,onChange:Q,onBlur:A,components:{Option:Y,Group:o},disabled:K,"aria-label":(0,s.t)("time-picker.zone.select-aria-label","Time zone picker")})},y=b=>{const R=Date.now();return(0,l.$8)(b).map(w=>{const A=w.zones.reduce((I,F)=>{const K=(0,l.Pr)(F,R);return K&&I.push({label:K.name,value:K.zone,searchIndex:M(K,R)}),I},[]);return{label:w.name,options:A}})},C=(b,R)=>(0,n.useMemo)(()=>{if(R===void 0)return;const B=(0,t.toLower)(R);return b.find(A=>A.label?B.startsWith((0,t.toLower)(A.label)):P(B))?.options.find(A=>(0,t.isEmpty)(B)?A.value===l.RQ.default:(0,t.toLower)(A.value)===B)},[b,R]),P=b=>{switch(b){case l.RQ.default:case l.RQ.localBrowserTime:case l.RQ.utc:return!0;default:return!1}},D=()=>(0,n.useCallback)((b,R)=>!R||!b.data||!b.data.searchIndex?!0:b.data.searchIndex.indexOf((0,t.toLower)(R))>-1,[]),M=(b,R)=>{const B=[(0,t.toLower)(b.name),(0,t.toLower)(b.abbreviation),(0,t.toLower)((0,r.k)(R,b.zone))];for(const w of b.countries)B.push((0,t.toLower)(w.name)),B.push((0,t.toLower)(w.code));return B.join("|")}},64612:(Z,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({info:c})=>{const o=(0,l.wW)(f),m=i(c);return c?n.createElement("div",{className:o.description},m):null},i=c=>(0,n.useMemo)(()=>{const o=[];if(!c)return"";if(c.countries.length>0){const m=c.countries[0];o.push(m.name)}return c.abbreviation&&o.push(c.abbreviation),o.join(", ")},[c]),f=c=>({description:t.css`
      font-weight: normal;
      font-size: ${c.typography.size.sm};
      color: ${c.colors.text.secondary};
      white-space: normal;
      text-overflow: ellipsis;
    `})},4883:(Z,O,e)=>{"use strict";e.d(O,{k:()=>o,v:()=>c});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(38849),f=e(72648);const c=r=>{const{timestamp:u,timeZone:d,className:g}=r,p=(0,f.wW)(m);return(0,n.isString)(d)?s.createElement(s.Fragment,null,s.createElement("span",{className:(0,t.cx)(p.offset,g)},o(u,d))):null},o=(r,u)=>{const d=(0,i.dq)(r,{timeZone:u,format:"Z"});return d==="+00:00"?"UTC":`UTC${d}`},m=r=>{const u=t.css`
    font-weight: normal;
    font-size: ${r.typography.size.sm};
    color: ${r.colors.text.secondary};
    white-space: normal;
  `;return{offset:t.css`
      ${u};
      color: ${r.colors.text.primary};
      background: ${r.colors.background.secondary};
      padding: 2px 5px;
      border-radius: 2px;
      margin-left: 4px;
    `}}},10516:(Z,O,e)=>{"use strict";e.d(O,{d:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({title:f})=>{const c=(0,l.wW)(i);return f?n.createElement("span",{className:c.title},f):null},i=f=>({title:t.css`
      font-weight: ${f.typography.fontWeightRegular};
      text-overflow: ellipsis;
    `})},80124:(Z,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(68404),n=e(68183),l=e(53217);const s=[{value:"",label:"Default"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"},{value:"monday",label:"Monday"}],i=f=>{const{onChange:c,width:o,autoFocus:m=!1,onBlur:r,value:u,disabled:d=!1,inputId:g}=f,p=(0,t.useCallback)(E=>{E.value!==void 0&&c(E.value)},[c]);return t.createElement(l.Ph,{inputId:g,value:s.find(E=>E.value===u)?.value,placeholder:n.wl.components.WeekStartPicker.placeholder,autoFocus:m,openMenuOnFocus:!0,width:o,options:s,onChange:p,onBlur:r,disabled:d})}},21356:(Z,O,e)=>{"use strict";e.d(O,{E:()=>n,r:()=>t});const t=[{from:"now-5m",to:"now",display:"Last 5 minutes"},{from:"now-15m",to:"now",display:"Last 15 minutes"},{from:"now-30m",to:"now",display:"Last 30 minutes"},{from:"now-1h",to:"now",display:"Last 1 hour"},{from:"now-3h",to:"now",display:"Last 3 hours"},{from:"now-6h",to:"now",display:"Last 6 hours"},{from:"now-12h",to:"now",display:"Last 12 hours"},{from:"now-24h",to:"now",display:"Last 24 hours"},{from:"now-2d",to:"now",display:"Last 2 days"},{from:"now-7d",to:"now",display:"Last 7 days"},{from:"now-30d",to:"now",display:"Last 30 days"},{from:"now-90d",to:"now",display:"Last 90 days"},{from:"now-6M",to:"now",display:"Last 6 months"},{from:"now-1y",to:"now",display:"Last 1 year"},{from:"now-2y",to:"now",display:"Last 2 years"},{from:"now-5y",to:"now",display:"Last 5 years"},{from:"now-1d/d",to:"now-1d/d",display:"Yesterday"},{from:"now-2d/d",to:"now-2d/d",display:"Day before yesterday"},{from:"now-7d/d",to:"now-7d/d",display:"This day last week"},{from:"now-1w/w",to:"now-1w/w",display:"Previous week"},{from:"now-1M/M",to:"now-1M/M",display:"Previous month"},{from:"now-1Q/fQ",to:"now-1Q/fQ",display:"Previous fiscal quarter"},{from:"now-1y/y",to:"now-1y/y",display:"Previous year"},{from:"now-1y/fy",to:"now-1y/fy",display:"Previous fiscal year"},{from:"now/d",to:"now/d",display:"Today"},{from:"now/d",to:"now",display:"Today so far"},{from:"now/w",to:"now/w",display:"This week"},{from:"now/w",to:"now",display:"This week so far"},{from:"now/M",to:"now/M",display:"This month"},{from:"now/M",to:"now",display:"This month so far"},{from:"now/y",to:"now/y",display:"This year"},{from:"now/y",to:"now",display:"This year so far"},{from:"now/fQ",to:"now",display:"This fiscal quarter so far"},{from:"now/fQ",to:"now/fQ",display:"This fiscal quarter"},{from:"now/fy",to:"now",display:"This fiscal year so far"},{from:"now/fy",to:"now/fy",display:"This fiscal year"}],n=[{label:"January",value:0},{label:"February",value:1},{label:"March",value:2},{label:"April",value:3},{label:"May",value:4},{label:"June",value:5},{label:"July",value:6},{label:"August",value:7},{label:"September",value:8},{label:"October",value:9},{label:"November",value:10},{label:"December",value:11}]},30979:(Z,O,e)=>{"use strict";e.d(O,{d:()=>u});var t=e(9892),n=e(99510),l=e(81699),s=e(6665),i=e(97395),f=e(68404),c=e(68183),o=e(72648),m=e(68226),r=e(8180);function u({children:g,inline:p=!1,onClose:E,closeOnMaskClick:h=!0,scrollableContent:a=!1,title:v,subtitle:x,width:y="40%",expandable:C=!1,tabs:P}){const D=(0,o.wW)(d),[M,b]=(0,f.useState)(!1),[R,B]=(0,f.useState)(!1),w=M?"100%":y,A=f.useRef(null),{dialogProps:I,titleProps:F}=(0,n.R)({},A),{overlayProps:K}=(0,s.Ir)({isDismissable:!1,isOpen:R,onClose:E},A);(0,f.useEffect)(()=>{B(!0)},[]);const W=f.createElement("div",{className:D.content},g),U={};return p&&(U.position="absolute"),f.createElement(i.Z,{open:R,onClose:E,placement:"right",width:w,getContainer:p?void 0:"body",style:U,className:D.drawerContent,rootClassName:D.drawer,motion:{motionAppear:!0,motionName:D.drawerMotion},maskClassName:D.mask,maskClosable:h,maskMotion:{motionAppear:!0,motionName:D.maskMotion}},f.createElement(l.MT,{restoreFocus:!0,contain:!0,autoFocus:!0},f.createElement("div",{"aria-label":typeof v=="string"?c.wl.components.Drawer.General.title(v):c.wl.components.Drawer.General.title("no title"),className:D.container,...K,...I,ref:A},typeof v=="string"&&f.createElement("div",{className:D.header},f.createElement("div",{className:D.actions},C&&!M&&f.createElement(r.h,{name:"angle-left",size:"xl",onClick:()=>b(!0),"aria-label":c.wl.components.Drawer.General.expand}),C&&M&&f.createElement(r.h,{name:"angle-right",size:"xl",onClick:()=>b(!1),"aria-label":c.wl.components.Drawer.General.contract}),f.createElement(r.h,{name:"times",size:"xl",onClick:E,"aria-label":c.wl.components.Drawer.General.close})),f.createElement("div",{className:D.titleWrapper},f.createElement("h3",{...F},v),typeof x=="string"&&f.createElement("div",{className:"muted"},x),typeof x!="string"&&x,P&&f.createElement("div",{className:D.tabsWrapper},P))),typeof v!="string"&&v,f.createElement("div",{className:D.contentScroll},a?f.createElement(m.$,{autoHeightMin:"100%"},W):W))))}const d=g=>({container:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      flex: 1 1 0;
    `,drawer:t.css`
      .rc-drawer-content-wrapper {
        box-shadow: ${g.shadows.z3};

        ${g.breakpoints.down("sm")} {
          width: 100% !important;
        }
      }
    `,drawerContent:t.css`
      background-color: ${g.colors.background.primary} !important;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      z-index: ${g.zIndex.dropdown};
    `,drawerMotion:t.css`
      &-appear {
        transform: translateX(100%);
        transition: none !important;

        &-active {
          transition: ${g.transitions.create("transform")} !important;
          transform: translateX(0);
        }
      }
    `,mask:t.css`
      background-color: ${g.components.overlay.background} !important;
      backdrop-filter: blur(1px);
    `,maskMotion:t.css`
      &-appear {
        opacity: 0;

        &-active {
          opacity: 1;
          transition: ${g.transitions.create("opacity")};
        }
      }
    `,header:t.css`
      background-color: ${g.colors.background.canvas};
      flex-grow: 0;
      padding-top: ${g.spacing(.5)};
    `,actions:t.css`
      display: flex;
      align-items: baseline;
      justify-content: flex-end;
    `,titleWrapper:t.css`
      margin-bottom: ${g.spacing(3)};
      padding: ${g.spacing(0,1,0,3)};
      overflow-wrap: break-word;
    `,content:(0,t.css)({padding:g.spacing(2),height:"100%",flexGrow:1}),contentScroll:(0,t.css)({minHeight:0,flex:1}),tabsWrapper:(0,t.css)({paddingLeft:g.spacing(2),margin:g.spacing(3,-1,-3,-3)})})},44342:(Z,O,e)=>{"use strict";e.d(O,{d:()=>p});var t=e(9892),n=e(35210),l=e(81699),s=e(9815),i=e(91053),f=e(68404),c=e(72648),o=e(26202),m=e(94437),r=e(38484),u=e(42044),d=e(64319);const g=h=>{const{className:a,options:v,value:x,onChange:y,narrow:C,variant:P,...D}=h,M=(0,c.wW)(E),b=(0,i.W)({}),R=f.useRef(null),{menuTriggerProps:B,menuProps:w}=(0,s.u4)({},b,R),{buttonProps:A}=(0,n.U)(B,R),I=F=>{y(F),b.close()};return f.createElement(o.h,{className:M.wrapper},f.createElement(d.h,{className:a,isOpen:b.isOpen,narrow:C,variant:P,ref:R,...A,...D},x?.label||(x?.value!=null?String(x?.value):null)),b.isOpen&&f.createElement("div",{className:M.menuWrapper},f.createElement(m.L,{onClick:b.close,parent:document,includeButtonPress:!1},f.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},f.createElement(r.v,{tabIndex:-1,onClose:b.close,...w},v.map(F=>f.createElement(u.s,{key:`${F.value}`,label:F.label??String(F.value),onClick:()=>I(F),active:F.value===x?.value,ariaChecked:F.value===x?.value,ariaLabel:F.ariaLabel||F.label,role:"menuitemradio"})))))))};g.displayName="ButtonSelect";const p=f.memo(g),E=h=>({wrapper:t.css`
      position: relative;
      display: inline-flex;
    `,menuWrapper:t.css`
      position: absolute;
      z-index: ${h.zIndex.dropdown};
      top: ${h.spacing(4)};
      right: 0;
    `})},71698:(Z,O,e)=>{"use strict";e.d(O,{L:()=>o});var t=e(9892),n=e(81699),l=e(68404),s=e(85361),i=e(22163),f=e(61970),c=e(85511);const o=l.memo(({children:r,overlay:u,placement:d,offset:g,onVisibleChange:p})=>{const[E,h]=(0,l.useState)(!1),a=(0,l.useRef)(null);(0,l.useEffect)(()=>{p?.(E)},[p,E]);const{getArrowProps:v,getTooltipProps:x,setTooltipRef:y,setTriggerRef:C,visible:P}=(0,s.O)({visible:E,placement:d,onVisibleChange:h,interactive:!0,delayHide:0,delayShow:0,offset:g??[0,8],trigger:["click"]}),D=150,M=m(D),b=()=>{h(!1)},R=B=>{(B.key==="Escape"||B.key==="Tab")&&h(!1)};return l.createElement(l.Fragment,null,l.cloneElement(typeof r=="function"?r(P):r,{ref:C}),P&&l.createElement(c.h_,null,l.createElement(n.MT,{autoFocus:!0,restoreFocus:!0,contain:!0},l.createElement("div",{ref:y,...x(),onClick:b,onKeyDown:R},l.createElement("div",{...v({className:"tooltip-arrow"})}),l.createElement(i.Z,{nodeRef:a,appear:!0,in:!0,timeout:{appear:D,exit:0,enter:0},classNames:M},l.createElement("div",{ref:a},f.renderOrCallToRender(u)))))))});o.displayName="Dropdown";const m=r=>({appear:(0,t.css)({opacity:"0",position:"relative",transform:"scaleY(0.5)",transformOrigin:"top"}),appearActive:(0,t.css)({opacity:"1",transform:"scaleY(1)",transition:`transform ${r}ms cubic-bezier(0.2, 0, 0.2, 1), opacity ${r}ms cubic-bezier(0.2, 0, 0.2, 1)`})})},69097:(Z,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({children:f})=>{const c=(0,l.wW)(i);return n.createElement("div",{className:c.container},f)},i=f=>({container:t.css`
      border-left: 3px solid ${f.colors.info.main};
      background-color: ${f.colors.background.secondary};
      padding: ${f.spacing(2)};
      min-width: 350px;
      border-radius: ${f.shape.radius.default};
      margin-bottom: ${f.spacing(4)};
    `})},53546:(Z,O,e)=>{"use strict";e.d(O,{Pf:()=>o,SV:()=>f,z4:()=>c});var t=e(37916),n=e(68404),l=e(53843),s=e(45253),i=e(39198);class f extends n.PureComponent{constructor(){super(...arguments),this.state={error:null,errorInfo:null}}componentDidCatch(r,u){(0,t.Tb)(r,{contexts:{react:{componentStack:u.componentStack}}}),l.s?.api?.pushError(r),this.setState({error:r,errorInfo:u}),this.props.onError&&this.props.onError(r)}componentDidUpdate(r){const{dependencies:u,onRecover:d}=this.props;if(this.state.error&&u&&r.dependencies){for(let g=0;g<u.length;g++)if(u[g]!==r.dependencies[g]){this.setState({error:null,errorInfo:null}),d&&d();break}}}render(){const{children:r}=this.props,{error:u,errorInfo:d}=this.state;return r({error:u,errorInfo:d})}}class c extends n.PureComponent{render(){const{title:r,children:u,style:d,dependencies:g}=this.props;return n.createElement(f,{dependencies:g},({error:p,errorInfo:E})=>E?d==="alertbox"?n.createElement(s.b,{title:r||""},n.createElement("details",{style:{whiteSpace:"pre-wrap"}},p&&p.toString(),n.createElement("br",null),E.componentStack)):n.createElement(i.X,{title:r||"",error:p,errorInfo:E}):u)}}c.defaultProps={title:"An unexpected error happened",style:"alertbox"};function o(m,r={}){const u=d=>n.createElement(c,{...r},n.createElement(m,{...d}));return u.displayName="WithErrorBoundary",u}},39198:(Z,O,e)=>{"use strict";e.d(O,{X:()=>i});var t=e(9892),n=e(68404),l=e(7804);const s=(0,l.B)(()=>t.css`
    width: 500px;
    margin: 64px auto;
  `),i=({error:f,errorInfo:c,title:o})=>n.createElement("div",{className:s()},n.createElement("h2",null,o),n.createElement("details",{style:{whiteSpace:"pre-wrap"}},f&&f.toString(),n.createElement("br",null),c&&c.componentStack));i.displayName="ErrorWithStack"},30784:(Z,O,e)=>{"use strict";e.d(O,{A_:()=>E,Yo:()=>d});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(47469),f=e(91134),c=e(20112),o=e(72648),m=e(45253),r=e(39904),u=e(27119);function d({options:y,children:C,readAs:P,onLoad:D,fileListRenderer:M,onFileRemove:b}){const[R,B]=(0,s.useState)([]),[w,A]=(0,s.useState)([]),I=(0,c.Cf)("decbytes")(y?.maxSize?y?.maxSize:0),F=(0,s.useCallback)((de,ge)=>{B(re=>re.map(ce=>(ce.id===de.id&&ge(ce),ce)))},[]),K=(0,s.useCallback)((de,ge,re)=>{let ce=de.map(v);if(y?.multiple===!1?B(ce):B(ie=>[...ie,...ce]),G(ge),y?.onDrop)y.onDrop(de,ge,re);else for(const ie of ce){const fe=new FileReader,Ce=()=>{P?fe[P](ie.file):fe.readAsText(ie.file)};F(ie,ee=>{ee.abortUpload=()=>{fe.abort()},ee.retryUpload=()=>{F(ie,ne=>{ne.error=null,ne.progress=void 0}),Ce()}}),fe.onabort=()=>{F(ie,ee=>{ee.error=new DOMException("Aborted")})},fe.onprogress=ee=>{F(ie,ne=>{ne.progress=ee.loaded})},fe.onload=()=>{D?.(fe.result)},fe.onerror=()=>{F(ie,ee=>{ee.error=fe.error})},Ce()}},[D,y,P,F]),W=de=>{const ge=R.filter(re=>de.id!==re.id);B(ge),b?.(de)},{getRootProps:U,getInputProps:N,isDragActive:S}=(0,i.uI)({...y,useFsAccessApi:!1,onDrop:K,accept:p(y?.accept)}),Y=(0,o.l4)(),Q=x(Y,S),z=R.map(de=>M?M(de,W):s.createElement(u.K,{key:de.id,file:de,removeFile:W})),G=de=>{let ge=[];de.map(re=>{re.errors.map(ce=>{ge.findIndex(ie=>ie.code===ce.code&&ie.message===ce.message)===-1&&ge.push(ce)})}),A(ge)},k=de=>s.createElement("div",{className:Q.errorAlert},s.createElement(m.b,{title:"Upload failed",severity:"error",onRemove:j},de.map(ge=>{switch(ge.code){case f.jK.FileTooLarge:return s.createElement("div",{key:ge.message+ge.code},"File is larger than ",(0,c.zc)(I));default:return s.createElement("div",{key:ge.message+ge.code},ge.message)}}))),j=()=>{A([])};return s.createElement("div",{className:Q.container},s.createElement("div",{"data-testid":"dropzone",...U({className:Q.dropzone})},s.createElement("input",{...N()}),C??s.createElement(E,{primaryText:h(R,y)})),w.length>0&&k(w),s.createElement("div",{className:Q.acceptContainer},y?.accept&&s.createElement("small",{className:(0,t.cx)(Q.small,Q.acceptMargin,Q.acceptedFiles)},a(y.accept)),y?.maxSize&&s.createElement("small",{className:(0,t.cx)(Q.small,Q.acceptMargin)},`Max file size: ${(0,c.zc)(I)}`)),z)}function g(y){return["txt","json","csv","xls","yml"].some(C=>y.match(C))?"text/plain":"application/octet-stream"}function p(y){return(0,n.isString)(y)?{[g(y)]:[y]}:Array.isArray(y)?y.reduce((C,P)=>{const D=g(P);return C[D]=C[D]?[...C[D],P]:[P],C},{}):y}function E({primaryText:y="Upload file",secondaryText:C="Drag and drop here or browse"}){const P=(0,o.l4)(),D=x(P);return s.createElement("div",{className:D.iconWrapper},s.createElement(r.J,{name:"upload",size:"xxl"}),s.createElement("h3",null,y),s.createElement("small",{className:D.small},C))}function h(y,C){return C?.multiple===void 0||C?.multiple?"Upload file":y.length?"Replace file":"Upload file"}function a(y){return(0,n.isString)(y)?`Accepted file type: ${y}`:Array.isArray(y)?`Accepted file types: ${y.join(", ")}`:`Accepted file types: ${Object.values(y).flat().join(", ")}`}function v(y){return{id:(0,n.uniqueId)("file"),file:y,error:null}}function x(y,C){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${y.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${y.colors.border.medium};
      background-color: ${C?y.colors.background.secondary:y.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptContainer:t.css`
      display: flex;
    `,acceptedFiles:t.css`
      flex-grow: 1;
    `,acceptMargin:t.css`
      margin: ${y.spacing(2,0,1)};
    `,small:t.css`
      color: ${y.colors.text.secondary};
    `,errorAlert:t.css`
      padding-top: 10px;
    `}}},27119:(Z,O,e)=>{"use strict";e.d(O,{K:()=>r});var t=e(9892),n=e(68404),l=e(20112),s=e(72648),i=e(39027),f=e(31403),c=e(39904),o=e(8180);const m="Remove file";function r({file:d,removeFile:g}){const p=(0,s.wW)(u),{file:E,progress:h,error:a,abortUpload:v,retryUpload:x}=d,y=()=>a?n.createElement(n.Fragment,null,n.createElement("span",{className:p.error},a.message),x&&n.createElement(o.h,{type:"button","aria-label":"Retry",name:"sync",tooltip:"Retry",tooltipPlacement:"top",onClick:x}),g&&n.createElement(o.h,{className:x?p.marginLeft:"",type:"button",name:"trash-alt",onClick:()=>g(d),tooltip:m,"aria-label":m})):h&&E.size>h?n.createElement(n.Fragment,null,n.createElement("progress",{className:p.progressBar,max:E.size,value:h}),n.createElement("span",{className:p.paddingLeft},Math.round(h/E.size*100),"%"),v&&n.createElement(f.zx,{variant:"secondary",type:"button",fill:"text",onClick:v},"Cancel upload")):g&&n.createElement(o.h,{name:"trash-alt",onClick:()=>g(d),tooltip:m,"aria-label":m,type:"button",tooltipPlacement:"top"}),C=(0,l.Cf)("decbytes")(E.size);return n.createElement("div",{className:p.fileListContainer},n.createElement("span",{className:p.fileNameWrapper},n.createElement(c.J,{name:"file-blank",size:"lg","aria-hidden":!0}),n.createElement("span",{className:p.padding},(0,i.O)(E.name)),n.createElement("span",null,(0,l.zc)(C))),n.createElement("div",{className:p.fileNameWrapper},y()))}function u(d){return{fileListContainer:t.css`
      width: 100%;
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      padding: ${d.spacing(2)};
      border: 1px dashed ${d.colors.border.medium};
      background-color: ${d.colors.background.secondary};
      margin-top: ${d.spacing(1)};
    `,fileNameWrapper:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
    `,padding:t.css`
      padding: ${d.spacing(0,1)};
    `,paddingLeft:t.css`
      padding-left: ${d.spacing(2)};
    `,marginLeft:t.css`
      margin-left: ${d.spacing(1)};
    `,error:t.css`
      padding-right: ${d.spacing(2)};
      color: ${d.colors.error.text};
    `,progressBar:t.css`
      border-radius: ${d.shape.radius.default};
      height: 4px;
      ::-webkit-progress-bar {
        background-color: ${d.colors.border.weak};
        border-radius: ${d.shape.radius.default};
      }
      ::-webkit-progress-value {
        background-color: ${d.colors.primary.main};
        border-radius: ${d.shape.radius.default};
      }
    `}}},47556:(Z,O,e)=>{"use strict";e.d(O,{A_:()=>t.A_,K$:()=>n.K,Yo:()=>t.Yo});var t=e(30784),n=e(27119)},82381:(Z,O,e)=>{"use strict";e.d(O,{p:()=>r});var t=e(9892),n=e(68404),l=e(44288),s=e(68183),i=e(72648),f=e(85419),c=e(39027),o=e(31403),m=e(39904);const r=({onFileUpload:d,className:g,children:p="Upload file",accept:E="*",size:h="md",showFileName:a})=>{const v=(0,i.wW)(u(h)),[x,y]=(0,n.useState)(""),C=(0,l.Z)(),P=(0,n.useCallback)(D=>{const M=D.currentTarget?.files?.[0];M&&y(M.name??""),d(D)},[d]);return n.createElement(n.Fragment,null,n.createElement("input",{type:"file",id:C,className:v.fileUpload,onChange:P,multiple:!1,accept:E,"data-testid":s.wl.components.FileUpload.inputField}),n.createElement("label",{htmlFor:C,className:(0,t.cx)(v.labelWrapper,g)},n.createElement(m.J,{name:"upload",className:v.icon}),p),a&&x&&n.createElement("span",{"aria-label":"File name",className:v.fileName,"data-testid":s.wl.components.FileUpload.fileNameSpan},(0,c.O)(x)))},u=d=>g=>{const p=(0,o.fW)({theme:g,variant:"primary",size:d,iconOnly:!1}),E=(0,f.getFocusStyles)(g);return{fileUpload:(0,t.css)({height:"0.1px",opacity:"0",overflow:"hidden",position:"absolute",width:"0.1px",zIndex:-1,"&:focus + label":E,"&:focus-visible + label":E}),labelWrapper:p.button,icon:p.icon,fileName:(0,t.css)({marginLeft:g.spacing(.5)})}}},14747:(Z,O,e)=>{"use strict";e.d(O,{H:()=>c});var t=e(68404),n=e(29076);function l(...o){const m=t.useRef(null);return t.useEffect(()=>{o.forEach(r=>{r&&(typeof r=="function"?r(m.current):r.current=m.current)})},[o]),m}var s=e(31403),i=e(39904),f=e(46967);const c=t.forwardRef(({value:o,width:m,onChange:r,escapeRegex:u=!0,...d},g)=>{const p=t.useRef(null),E=l(g,p),h=o!==""?t.createElement(s.zx,{icon:"times",fill:"text",size:"sm",onClick:a=>{p.current?.focus(),r(""),a.stopPropagation()}},"Clear"):null;return t.createElement(f.I,{prefix:t.createElement(i.J,{name:"search"}),suffix:h,width:m,type:"text",value:u?(0,n.x6)(o??""):o,onChange:a=>r(u?(0,n.GE)(a.currentTarget.value):a.currentTarget.value),...d,ref:E})});c.displayName="FilterInput"},41165:(Z,O,e)=>{"use strict";e.d(O,{B:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(31403),i=e(39904);const f=({label:o,selected:m,onClick:r,icon:u="check"})=>{const d=(0,l.wW)(c),g=(0,l.wW)(s.gN);return n.createElement("button",{type:"button",className:(0,t.cx)(g,d.wrapper,m&&d.selected),onClick:r},n.createElement("span",null,o),m&&n.createElement(i.J,{name:u,className:d.icon}))},c=o=>({wrapper:t.css`
      background: ${o.colors.background.secondary};
      border-radius: ${o.shape.borderRadius(8)};
      padding: ${o.spacing(0,2)};
      font-size: ${o.typography.bodySmall.fontSize};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: ${o.typography.bodySmall.lineHeight};
      color: ${o.colors.text.secondary};
      display: flex;
      align-items: center;
      height: 32px;

      &:hover {
        background: ${o.colors.action.hover};
        color: ${o.colors.text.primary};
      }
    `,selected:t.css`
      color: ${o.colors.text.primary};
      background: ${o.colors.action.selected};

      &:hover {
        background: ${o.colors.action.focus};
      }
    `,icon:t.css`
      margin-left: ${o.spacing(.5)};
    `})},95569:(Z,O,e)=>{"use strict";e.d(O,{W:()=>i});var t=e(9892),n=e(68404),l=e(19426);const s={labelWidth:6,inputWidth:12},i=({label:c,tooltip:o,labelWidth:m,inputWidth:r,inputEl:u,className:d,interactive:g,...p})=>{const E=f();return n.createElement("div",{className:(0,t.cx)(E.formField,d)},n.createElement(l.c,{width:m,tooltip:o,interactive:g},c),u||n.createElement("input",{type:"text",className:`gf-form-input ${r?`width-${r}`:""}`,...p,disabled:p.disabled}))};i.displayName="FormField",i.defaultProps=s;const f=()=>({formField:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
    `})},19426:(Z,O,e)=>{"use strict";e.d(O,{c:()=>c});var t=e(9085),n=e.n(t),l=e(68404),s=e(39904),i=e(6554);const c=({children:o,isFocused:m,isInvalid:r,className:u,htmlFor:d,tooltip:g,width:p,interactive:E,...h})=>{const a=n()(u,`gf-form-label width-${p||"10"}`,{"gf-form-label--is-focused":m,"gf-form-label--is-invalid":r});return l.createElement("label",{className:a,...h,htmlFor:d},o,g&&l.createElement(i.u,{placement:"top",content:g,theme:"info",interactive:E},l.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))}},72777:(Z,O,e)=>{"use strict";e.d(O,{W:()=>l});var t=e(68404);function n(s){return s<20?.9:s<26?.8:.6}const l=({value:s,className:i,style:f,...c})=>{const o=(s.prefix??"").length>0,m=(s.suffix??"").length>0;let r;if(f&&f.fontSize&&typeof f.fontSize=="number"){const u=f.fontSize,d=n(u);r={fontSize:u*d}}return t.createElement("div",{className:i,style:f,...c},t.createElement("div",null,o&&t.createElement("span",null,s.prefix),t.createElement("span",null,s.text),m&&t.createElement("span",{style:r},s.suffix)))};l.displayName="FormattedDisplayValue"},58255:(Z,O,e)=>{"use strict";e.d(O,{X:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(7804),i=e(85419),f=e(64353);const c=n.forwardRef(({label:m,description:r,value:u,htmlValue:d,onChange:g,disabled:p,className:E,...h},a)=>{const v=(0,n.useCallback)(y=>{g&&g(y)},[g]),x=(0,l.wW)(o);return n.createElement("label",{className:(0,t.cx)(x.wrapper,E)},n.createElement("div",{className:x.checkboxWrapper},n.createElement("input",{type:"checkbox",className:x.input,checked:u,disabled:p,onChange:v,value:d,...h,ref:a}),n.createElement("span",{className:x.checkmark})),m&&n.createElement("span",{className:x.label},m),r&&n.createElement("span",{className:x.description},r))}),o=(0,s.B)(m=>{const r=(0,f.F)(m),u=2,d=1;return{wrapper:t.css`
      display: inline-grid;
      align-items: center;
      column-gap: ${m.spacing(d)};
      grid-template-columns: auto 1fr;
      grid-template-rows: auto auto;
      position: relative;
      vertical-align: middle;
    `,input:t.css`
      position: absolute;
      z-index: 1;
      top: 0;
      left: 0;
      width: 100% !important; // global styles unset this
      height: 100%;
      opacity: 0;

      &:focus + span,
      &:focus-visible + span {
        ${(0,i.getFocusStyles)(m)}
      }

      &:focus:not(:focus-visible) + span {
        ${(0,i.getMouseFocusStyles)(m)}
      }

      /**
       * Using adjacent sibling selector to style checked state.
       * Primarily to limit the classes necessary to use when these classes will be used
       * for angular components styling
       * */
      &:checked + span {
        background: blue;
        background: ${m.colors.primary.main};
        border: none;

        &:hover {
          background: ${m.colors.primary.shade};
        }

        &:after {
          content: '';
          position: absolute;
          z-index: 2;
          left: 5px;
          top: 1px;
          width: 6px;
          height: 12px;
          border: solid ${m.colors.primary.contrastText};
          border-width: 0 3px 3px 0;
          transform: rotate(45deg);
        }
      }

      &:disabled + span {
        background-color: ${m.colors.action.disabledBackground};
        cursor: not-allowed;

        &:hover {
          background-color: ${m.colors.action.disabledBackground};
        }

        &:after {
          border-color: ${m.colors.action.disabledText};
        }
      }
    `,checkboxWrapper:t.css`
      display: flex;
      align-items: center;
      grid-column-start: 1;
      grid-row-start: 1;
    `,checkmark:t.css`
      position: relative; /* Checkbox should be layered on top of the invisible input so it recieves :hover */
      z-index: 2;
      display: inline-block;
      width: ${m.spacing(u)};
      height: ${m.spacing(u)};
      border-radius: ${m.shape.borderRadius()};
      background: ${m.components.input.background};
      border: 1px solid ${m.components.input.borderColor};

      &:hover {
        cursor: pointer;
        border-color: ${m.components.input.borderHover};
      }
    `,label:(0,t.cx)(r.label,t.css`
        grid-column-start: 2;
        grid-row-start: 1;
        position: relative;
        z-index: 2;
        cursor: pointer;
        max-width: fit-content;
        line-height: ${m.typography.bodySmall.lineHeight};
        margin-bottom: 0;
      `),description:(0,t.cx)(r.description,t.css`
        grid-column-start: 2;
        grid-row-start: 2;
        line-height: ${m.typography.bodySmall.lineHeight};
        margin-top: 0; /* The margin effectively comes from the top: -2px on the label above it */
      `)}});c.displayName="Checkbox"},24799:(Z,O,e)=>{"use strict";e.d(O,{g:()=>m});var t=e(9892),n=e(68404),l=e(7804),s=e(72648),i=e(61970),f=e(57227),c=e(64353);const o=(0,l.B)(u=>({field:t.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${u.spacing(2)};
    `,fieldHorizontal:t.css`
      flex-direction: row;
      justify-content: space-between;
      flex-wrap: wrap;
    `,fieldValidationWrapper:t.css`
      margin-top: ${u.spacing(.5)};
    `,fieldValidationWrapperHorizontal:t.css`
      flex: 1 1 100%;
    `,validationMessageHorizontalOverflow:t.css`
      width: 0;
      overflow-x: visible;

      & > * {
        white-space: nowrap;
      }
    `})),m=({label:u,description:d,horizontal:g,invalid:p,loading:E,disabled:h,required:a,error:v,children:x,className:y,validationMessageHorizontalOverflow:C,htmlFor:P,...D})=>{const M=(0,s.l4)(),b=o(M),R=P??(0,i.getChildId)(x),B=typeof u=="string"?n.createElement(c._,{htmlFor:R,description:d},`${u}${a?" *":""}`):u,w=r({invalid:p,disabled:h,loading:E});return n.createElement("div",{className:(0,t.cx)(b.field,g&&b.fieldHorizontal,y),...D},B,n.createElement("div",null,n.cloneElement(x,w),p&&v&&!g&&n.createElement("div",{className:(0,t.cx)(b.fieldValidationWrapper,{[b.validationMessageHorizontalOverflow]:!!C})},n.createElement(f.S,null,v))),p&&v&&g&&n.createElement("div",{className:(0,t.cx)(b.fieldValidationWrapper,b.fieldValidationWrapperHorizontal,{[b.validationMessageHorizontalOverflow]:!!C})},n.createElement(f.S,null,v)))};function r(u){for(const d in u)u[d]===void 0&&delete u[d];return u}},70132:(Z,O,e)=>{"use strict";e.d(O,{F:()=>n});var t=e(59052);const n=({name:l,control:s,children:i,...f})=>{const{fields:c,append:o,prepend:m,remove:r,swap:u,move:d,insert:g}=(0,t.Dq)({control:s,name:l,...f});return i({fields:c,append:o,prepend:m,remove:r,swap:u,move:d,insert:g})}},13393:(Z,O,e)=>{"use strict";e.d(O,{C:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(7804),i=e(19825);const f=({label:o,children:m,className:r,...u})=>{const d=(0,l.l4)(),g=c(d);return n.createElement("fieldset",{className:(0,t.cx)(g.wrapper,r),...u},o&&n.createElement(i.D,null,o),m)},c=(0,s.B)(o=>({wrapper:t.css`
      margin-bottom: ${o.spacing(4)};

      &:last-child {
        margin-bottom: 0;
      }
    `}))},57227:(Z,O,e)=>{"use strict";e.d(O,{S:()=>c});var t=e(9892),n=e(68404),l=e(7804),s=e(72648),i=e(39904);const f=(0,l.B)(o=>{const m=`
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      padding: ${o.spacing(.5,1)};
      color: ${o.colors.error.contrastText};
      background: ${o.colors.error.main};
      border-radius: ${o.shape.borderRadius()};
      position: relative;
      display: inline-block;
      align-self: flex-start;

      a {
        color: ${o.colors.error.contrastText};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `;return{vertical:t.css`
      ${m}
      margin: ${o.spacing(.5,0,0,0)};

      &:before {
        content: '';
        position: absolute;
        left: 9px;
        top: -5px;
        width: 0;
        height: 0;
        border-width: 0 4px 5px 4px;
        border-color: transparent transparent ${o.colors.error.main} transparent;
        border-style: solid;
      }
    `,horizontal:t.css`
      ${m}
      margin-left: 10px;

      &:before {
        content: '';
        position: absolute;
        left: -5px;
        top: 9px;
        width: 0;
        height: 0;
        border-width: 4px 5px 4px 0;
        border-color: transparent #e02f44 transparent transparent;
        border-style: solid;
      }
    `,fieldValidationMessageIcon:t.css`
      margin-right: ${o.spacing()};
    `}}),c=({children:o,horizontal:m,className:r})=>{const u=(0,s.l4)(),d=f(u),g=(0,t.cx)(m?d.horizontal:d.vertical,r);return n.createElement("div",{role:"alert",className:g},n.createElement(i.J,{className:d.fieldValidationMessageIcon,name:"exclamation-triangle"}),o)}},94270:(Z,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(9892),n=e(68404),l=e(59052);function s({defaultValues:i,onSubmit:f,validateOnMount:c=!1,validateFieldsOnMount:o,children:m,validateOn:r="onSubmit",maxWidth:u=600,...d}){const{handleSubmit:g,trigger:p,formState:E,...h}=(0,l.cI)({mode:r,defaultValues:i});return(0,n.useEffect)(()=>{c&&p(o)},[p,o,c]),n.createElement("form",{className:t.css`
        max-width: ${u!=="none"?u+"px":u};
        width: 100%;
      `,onSubmit:g(f),...d},m({errors:E.errors,formState:E,...h}))}},81764:(Z,O,e)=>{"use strict";e.d(O,{_:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(61970),i=e(57227),f=e(77117);const c=({children:m,label:r,tooltip:u,labelWidth:d="auto",invalid:g,loading:p,disabled:E,required:h,className:a,htmlFor:v,grow:x,shrink:y,error:C,transparent:P,interactive:D,...M})=>{const b=(0,l.l4)(),R=o(b,x,y),B=v??(0,s.getChildId)(m),w=typeof r=="string"?n.createElement(f.W,{interactive:D,width:d,tooltip:u,htmlFor:B,transparent:P},`${r}${h?" *":""}`):r;return n.createElement("div",{className:(0,t.cx)(R.container,a),...M},w,n.createElement("div",{className:R.childContainer},n.cloneElement(m,{invalid:g,disabled:E,loading:p}),g&&C&&n.createElement("div",{className:(0,t.cx)(R.fieldValidationWrapper)},n.createElement(i.S,null,C))))};c.displayName="InlineField";const o=(m,r,u)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${r?1:0} ${u?1:0} auto;
      margin: 0 ${m.spacing(.5)} ${m.spacing(.5)} 0;
    `,childContainer:t.css`
      flex: ${r?1:0} ${u?1:0} auto;
    `,fieldValidationWrapper:t.css`
      margin-top: ${m.spacing(.5)};
    `})},11543:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({children:f,className:c,...o})=>{const m=(0,l.wW)(i);return n.createElement("div",{className:(0,t.cx)(m.container,c),...o},f)},i=f=>({container:t.css`
      label: InlineFieldRow;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-content: flex-start;
      row-gap: ${f.spacing(.5)};
    `})},77117:(Z,O,e)=>{"use strict";e.d(O,{W:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(39904),i=e(6554);const f=({children:o,className:m,tooltip:r,width:u,transparent:d,interactive:g,as:p="label",...E})=>{const h=(0,l.wW)((0,n.useCallback)(a=>c(a,d,u),[d,u]));return n.createElement(p,{className:(0,t.cx)(h.label,m),...E},o,r&&n.createElement(i.u,{interactive:g,placement:"top",content:r,theme:"info"},n.createElement(s.J,{tabIndex:0,name:"info-circle",size:"sm",className:h.icon})))},c=(o,m=!1,r)=>({label:t.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      padding: 0 ${o.spacing(1)};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      background-color: ${m?"transparent":o.colors.background.secondary};
      height: ${o.spacing(o.components.height.md)};
      line-height: ${o.spacing(o.components.height.md)};
      margin-right: ${o.spacing(.5)};
      border-radius: ${o.shape.radius.default};
      border: none;
      width: ${r?r!=="auto"?`${8*r}px`:r:"100%"};
      color: ${o.colors.text.primary};
    `,icon:t.css`
      color: ${o.colors.text.secondary};
      margin-left: 10px;

      :hover {
        color: ${o.colors.text.primary};
      }
    `})},62157:(Z,O,e)=>{"use strict";e.d(O,{m:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({children:f,className:c,grow:o,...m})=>{const r=(0,l.wW)(u=>i(u,o));return n.createElement("div",{className:(0,t.cx)(r.container,c),...m},f)};s.displayName="InlineSegmentGroup";const i=(f,c)=>({container:t.css`
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      text-align: left;
      position: relative;
      flex: ${c?1:0} 0 auto;
      margin-bottom: ${f.spacing(.5)};
    `})},64353:(Z,O,e)=>{"use strict";e.d(O,{F:()=>f,_:()=>c});var t=e(9892),n=e(68404),l=e(7804),s=e(72648),i=e(39904);const f=(0,l.B)(o=>({label:t.css`
      label: Label;
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightMedium};
      line-height: 1.25;
      margin-bottom: ${o.spacing(.5)};
      color: ${o.colors.text.primary};
      max-width: 480px;
    `,labelContent:t.css`
      display: flex;
      align-items: center;
    `,description:t.css`
      label: Label-description;
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      font-weight: ${o.typography.fontWeightRegular};
      margin-top: ${o.spacing(.25)};
      display: block;
    `,categories:t.css`
      label: Label-categories;
      display: inline-flex;
      align-items: center;
    `,chevron:t.css`
      margin: 0 ${o.spacing(.25)};
    `})),c=({children:o,description:m,className:r,category:u,...d})=>{const g=(0,s.l4)(),p=f(g),E=u?.map((h,a)=>n.createElement("span",{className:p.categories,key:`${h}/${a}`},n.createElement("span",null,h),n.createElement(i.J,{name:"angle-right",className:p.chevron})));return n.createElement("div",{className:(0,t.cx)(p.label,r)},n.createElement("label",{...d},n.createElement("div",{className:p.labelContent},E,o),m&&n.createElement("span",{className:p.description},m)))}},50869:(Z,O,e)=>{"use strict";e.d(O,{G:()=>i,I:()=>f});var t=e(9085),n=e.n(t),l=e(68404),s=e(97291),i=(c=>(c.Invalid="invalid",c.Valid="valid",c))(i||{});class f extends l.PureComponent{constructor(){super(...arguments),this.state={error:null},this.validatorAsync=o=>m=>{const r=(0,s.Gu)(m.target.value,o);this.setState(u=>({...u,error:r?r[0]:null}))},this.populateEventPropsWithStatus=(o,m)=>{const r={...o};return m&&Object.keys(s.JU).forEach(u=>{((0,s.z3)(u,m)||o[u])&&(r[u]=async d=>{d.persist(),(0,s.z3)(u,m)&&await this.validatorAsync(m[u]).apply(this,[d]),o[u]&&o[u].apply(null,[d,this.status])})}),r}}get status(){return this.state.error?"invalid":"valid"}get isInvalid(){return this.status==="invalid"}render(){const{validationEvents:o,className:m,hideErrorMessage:r,inputRef:u,...d}=this.props,{error:g}=this.state,p=n()("gf-form-input",{invalid:this.isInvalid},m),E=this.populateEventPropsWithStatus(d,o);return l.createElement("div",{style:{flexGrow:1}},l.createElement("input",{...E,ref:u,className:p}),g&&!r&&l.createElement("span",null,g))}}f.defaultProps={className:""}},21662:(Z,O,e)=>{"use strict";e.d(O,{B:()=>s,Z:()=>i});var t=e(68404),n=e(81121),l=e(39904);const s=f=>{const c=f.selectProps.menuIsOpen;return t.createElement(n.c.IndicatorsContainer,{...f},t.createElement(l.J,{name:c?"angle-up":"angle-down",style:{marginTop:"7px"}}))},i=s},76603:(Z,O,e)=>{"use strict";e.d(O,{P:()=>l,Z:()=>s});var t=e(68404),n=e(81121);const l=i=>{const{children:f}=i;return t.createElement(n.c.NoOptionsMessage,{...i},t.createElement("div",{className:"gf-form-select-box__desc-option"},t.createElement("div",{className:"gf-form-select-box__desc-option__body"},f)))},s=l},29418:(Z,O,e)=>{"use strict";e.d(O,{qb:()=>P,Ph:()=>C});var t=e(9085),n=e.n(t),l=e(68404),s=e(81121),i=e(47935),f=e(68165),c=e(36183),o=e(72648),m=e(68226),r=e(874),u=e(24901),d=e(54897),g=e(6554),p=e(21662),E=e(76603),h=e(39904);const a=b=>{const{children:R,isSelected:B,data:w}=b;return l.createElement(s.c.Option,{...b},l.createElement("div",{className:"gf-form-select-box__desc-option"},w.imgUrl&&l.createElement("img",{className:"gf-form-select-box__desc-option__img",src:w.imgUrl,alt:""}),l.createElement("div",{className:"gf-form-select-box__desc-option__body"},l.createElement("div",null,R),w.description&&l.createElement("div",{className:"gf-form-select-box__desc-option__desc"},w.description)),B&&l.createElement(h.J,{name:"check","aria-hidden":"true"})))},v=null,x=b=>l.createElement(s.c.MenuList,{...b},l.createElement(m.$,{autoHide:!1,autoHeightMax:"inherit"},b.children)),y=class extends l.PureComponent{render(){const{defaultValue:b,getOptionLabel:R,getOptionValue:B,onChange:w,options:A,placeholder:I,width:F,value:K,className:W,isDisabled:U,isLoading:N,isSearchable:S,isClearable:Y,backspaceRemovesValue:Q,isMulti:z,autoFocus:G,openMenuOnFocus:k,onBlur:j,maxMenuHeight:de,noOptionsMessage:ge,isOpen:re,components:ce,tooltipContent:ie,tabSelectsValue:fe,onCloseMenu:Ce,onOpenMenu:ee,allowCustomValue:ne,formatCreateLabel:X,"aria-label":te}=this.props;let ae="";F&&(ae="width-"+F);let _=i.ZP;const ve={};ne&&(_=c.Z,ve.formatCreateLabel=X??(rt=>rt));const Ve=n()("gf-form-input","gf-form-input--form-dropdown",ae,W),it={...y.defaultProps.components,...ce};return l.createElement(D,{onCloseMenu:Ce,onOpenMenu:ee,tooltipContent:ie,isOpen:re},(rt,pe)=>l.createElement(_,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:Ve,components:it,defaultValue:b,value:K,getOptionLabel:R,getOptionValue:B,menuShouldScrollIntoView:!1,isSearchable:S,onChange:w,options:A,placeholder:I||"Choose",styles:(0,d.Z)(this.context),isDisabled:U,isLoading:N,isClearable:Y,autoFocus:G,onBlur:j,openMenuOnFocus:k,maxMenuHeight:de,noOptionsMessage:ge,isMulti:z,backspaceRemovesValue:Q,menuIsOpen:re,onMenuOpen:rt,onMenuClose:pe,tabSelectsValue:fe,"aria-label":te,...ve}))}};let C=y;C.contextType=o.Ni,C.defaultProps={className:"",isDisabled:!1,isSearchable:!0,isClearable:!1,isMulti:!1,openMenuOnFocus:!1,autoFocus:!1,isLoading:!1,backspaceRemovesValue:!0,maxMenuHeight:300,tabSelectsValue:!0,allowCustomValue:!1,components:{Option:a,SingleValue:u.P,IndicatorsContainer:p.Z,MenuList:x,Group:r.n}};class P extends l.PureComponent{render(){const{defaultValue:R,getOptionLabel:B,getOptionValue:w,onChange:A,placeholder:I,width:F,value:K,className:W,loadOptions:U,defaultOptions:N,isLoading:S,loadingMessage:Y,noOptionsMessage:Q,isDisabled:z,isSearchable:G,isClearable:k,backspaceRemovesValue:j,autoFocus:de,onBlur:ge,openMenuOnFocus:re,maxMenuHeight:ce,isMulti:ie,tooltipContent:fe,onCloseMenu:Ce,onOpenMenu:ee,isOpen:ne}=this.props;let X="";F&&(X="width-"+F);const te=n()("gf-form-input","gf-form-input--form-dropdown",X,W);return l.createElement(D,{onCloseMenu:Ce,onOpenMenu:ee,tooltipContent:fe,isOpen:ne},(ae,_)=>l.createElement(f.Z,{captureMenuScroll:!1,classNamePrefix:"gf-form-select-box",className:te,components:{Option:a,SingleValue:u.P,IndicatorsContainer:p.Z,NoOptionsMessage:E.Z},defaultValue:R,value:K,getOptionLabel:B,getOptionValue:w,menuShouldScrollIntoView:!1,onChange:A,loadOptions:U,isLoading:S,defaultOptions:N,placeholder:I||"Choose",styles:(0,d.Z)(this.context),loadingMessage:Y,noOptionsMessage:Q,isDisabled:z,isSearchable:G,isClearable:k,autoFocus:de,onBlur:ge,openMenuOnFocus:re,maxMenuHeight:ce,isMulti:ie,backspaceRemovesValue:j}))}}P.contextType=o.Ni,P.defaultProps={className:"",components:{},loadingMessage:()=>"Loading...",isDisabled:!1,isClearable:!1,isMulti:!1,isSearchable:!0,backspaceRemovesValue:!0,autoFocus:!1,openMenuOnFocus:!1,maxMenuHeight:300};class D extends l.PureComponent{constructor(){super(...arguments),this.state={isOpenInternal:!1},this.onOpenMenu=()=>{const{onOpenMenu:R}=this.props;R&&R(),this.setState({isOpenInternal:!0})},this.onCloseMenu=()=>{const{onCloseMenu:R}=this.props;R&&R(),this.setState({isOpenInternal:!1})}}render(){const{children:R,isOpen:B,tooltipContent:w}=this.props,{isOpenInternal:A}=this.state;let I;return(A||B)&&(I=!1),w?l.createElement(g.u,{show:I,content:w,placement:"bottom"},l.createElement("div",null,R(this.onOpenMenu,this.onCloseMenu))):l.createElement("div",null,R(this.onOpenMenu,this.onCloseMenu))}}const M=null},18979:(Z,O,e)=>{"use strict";e.d(O,{r:()=>f});var t=e(82897),n=e.n(t),l=e(68404),s=e(39904),i=e(6554);class f extends l.PureComponent{constructor(){super(...arguments),this.state={id:(0,t.uniqueId)()},this.internalOnChange=o=>{o.stopPropagation(),this.props.onChange(o)}}render(){const{labelClass:o="",switchClass:m="",label:r,checked:u,disabled:d,transparent:g,className:p,tooltip:E,tooltipPlacement:h}=this.props,a=this.state.id,v=`gf-form-label ${o} ${g?"gf-form-label--transparent":""} pointer`,x=`gf-form-switch ${m} ${g?"gf-form-switch--transparent":""}`;return l.createElement("div",{className:"gf-form-switch-container-react"},l.createElement("label",{htmlFor:a,className:`gf-form gf-form-switch-container ${p||""}`},r&&l.createElement("div",{className:v},r,E&&l.createElement(i.u,{placement:h||"auto",content:E,theme:"info"},l.createElement("div",{className:"gf-form-help-icon gf-form-help-icon--right-normal"},l.createElement(s.J,{name:"info-circle",size:"sm",style:{marginLeft:"10px"}})))),l.createElement("div",{className:x},l.createElement("input",{disabled:d,id:a,type:"checkbox",checked:u,onChange:this.internalOnChange}),l.createElement("span",{className:"gf-form-switch__slider"}))))}}},19825:(Z,O,e)=>{"use strict";e.d(O,{D:()=>i});var t=e(9892),n=e(68404),l=e(72648);const s=f=>({legend:t.css`
      font-size: ${f.typography.h3.fontSize};
      font-weight: ${f.typography.fontWeightRegular};
      margin: 0 0 ${f.spacing(2)} 0;
    `}),i=({children:f,className:c,...o})=>{const m=(0,l.wW)(s);return n.createElement("legend",{className:(0,t.cx)(m.legend,c),...o},f)}},2594:(Z,O,e)=>{"use strict";e.d(O,{S:()=>d});var t=e(9892),n=e(82897),l=e(68404),s=e(43565),i=e(72648),f=e(39904),c=e(7804),o=e(85419),m=e(73267);const r=l.forwardRef(({children:p,active:E=!1,disabled:h=!1,size:a="md",onChange:v,onClick:x,id:y,name:C=void 0,description:P,fullWidth:D,"aria-label":M},b)=>{const R=(0,i.l4)(),B=u(R,a,D);return l.createElement(l.Fragment,null,l.createElement("input",{type:"radio",className:B.radio,onChange:v,onClick:x,disabled:h,id:y,checked:E,name:C,"aria-label":M,ref:b}),l.createElement("label",{className:B.radioLabel,htmlFor:y,title:P},p))});r.displayName="RadioButton";const u=(0,c.B)((p,E,h)=>{const{fontSize:a,height:v,padding:x}=(0,m.iL)(E,p),y=p.colors.text.secondary,C=p.colors.text.primary,P=v*p.spacing.gridSize-4-2;return{radio:t.css`
      position: absolute;
      opacity: 0;
      z-index: -1000;

      &:checked + label {
        color: ${p.colors.text.primary};
        font-weight: ${p.typography.fontWeightMedium};
        background: ${p.colors.action.selected};
        z-index: 3;
      }

      &:focus + label,
      &:focus-visible + label {
        ${(0,o.getFocusStyles)(p)};
      }

      &:focus:not(:focus-visible) + label {
        ${(0,o.getMouseFocusStyles)(p)}
      }

      &:disabled + label {
        color: ${p.colors.text.disabled};
        cursor: not-allowed;
      }
    `,radioLabel:t.css`
      display: inline-block;
      position: relative;
      font-size: ${a};
      height: ${P}px;
      // Deduct border from line-height for perfect vertical centering on windows and linux
      line-height: ${P}px;
      color: ${y};
      padding: ${p.spacing(0,x)};
      border-radius: ${p.shape.borderRadius()};
      background: ${p.colors.background.primary};
      cursor: pointer;
      z-index: 1;
      flex: ${h?"1 0 0":"none"};
      text-align: center;
      user-select: none;
      white-space: nowrap;

      &:hover {
        color: ${C};
      }
    `}});function d({options:p,value:E,onChange:h,onClick:a,disabled:v,disabledOptions:x,size:y="md",id:C,className:P,fullWidth:D=!1,autoFocus:M=!1}){const b=(0,l.useCallback)(F=>()=>{h&&h(F.value)},[h]),R=(0,l.useCallback)(F=>()=>{a&&a(F.value)},[a]),B=C??(0,n.uniqueId)("radiogroup-"),w=(0,l.useRef)(B),A=(0,i.wW)(g),I=(0,l.useRef)(null);return(0,l.useEffect)(()=>{M&&I.current&&I.current.focus()},[M]),l.createElement("div",{className:(0,t.cx)(A.radioGroup,D&&A.fullWidth,P)},p.map((F,K)=>{const W=x&&F.value&&x.includes(F.value),U=F.icon?(0,s.iJ)(F.icon):void 0;return l.createElement(r,{size:y,disabled:W||v,active:E===F.value,key:`o.label-${K}`,"aria-label":F.ariaLabel,onChange:b(F),onClick:R(F),id:`option-${F.value}-${B}`,name:w.current,description:F.description,fullWidth:D,ref:E===F.value?I:void 0},U&&l.createElement(f.J,{name:U,className:A.icon}),F.imgUrl&&l.createElement("img",{src:F.imgUrl,alt:F.label,className:A.img}),F.label," ",F.component?l.createElement(F.component,null):null)}))}d.displayName="RadioButtonGroup";const g=p=>({radioGroup:(0,t.css)({display:"inline-flex",flexDirection:"row",flexWrap:"nowrap",border:`1px solid ${p.components.input.borderColor}`,borderRadius:p.shape.borderRadius(),padding:"2px"}),fullWidth:(0,t.css)({display:"flex"}),icon:t.css`
      margin-right: 6px;
    `,img:t.css`
      width: ${p.spacing(2)};
      height: ${p.spacing(2)};
      margin-right: ${p.spacing(1)};
    `})},29395:(Z,O,e)=>{"use strict";e.d(O,{x:()=>c});var t=e(9892),n=e(82897),l=e(68404),s=e(72648);const i=({id:m,name:r,label:u,checked:d,disabled:g,description:p,onChange:E})=>{const h=(0,s.wW)(f);return l.createElement("label",{title:p,className:h.label},l.createElement("input",{id:m,name:r,type:"radio",checked:d,disabled:g,className:h.input,onChange:()=>E&&E(m)}),u)},f=m=>({input:t.css`
    position: relative;
    appearance: none;
    outline: none;
    background-color: ${m.colors.background.canvas};
    margin: 0;
    width: ${m.spacing(2)} !important; /* TODO How to overcome this? Checkbox does the same 🙁 */
    height: ${m.spacing(2)};
    border: 1px solid ${m.colors.border.medium};
    border-radius: 50%;
    margin: 3px 0; /* Space for box-shadow when focused */

    :checked {
      background-color: ${m.v1.palette.white};
      border: 5px solid ${m.colors.primary.main};
    }

    :disabled {
      background-color: ${m.colors.action.disabledBackground} !important;
      border-color: ${m.colors.border.weak};
    }

    :disabled:checked {
      border: 1px solid ${m.colors.border.weak};
    }

    :disabled:checked::after {
      content: '';
      width: 6px;
      height: 6px;
      background-color: ${m.colors.text.disabled};
      border-radius: 50%;
      display: inline-block;
      position: absolute;
      top: 4px;
      left: 4px;
    }

    :focus {
      outline: none !important;
      box-shadow: 0 0 0 1px ${m.colors.background.canvas}, 0 0 0 3px ${m.colors.primary.main};
    }
  `,label:t.css`
    font-size: ${m.typography.fontSize};
    line-height: 22px; /* 16px for the radio button and 6px for the focus shadow */
    display: grid;
    grid-template-columns: ${m.spacing(2)} auto;
    gap: ${m.spacing(1)};
  `});function c({name:m,id:r,options:u,value:d,onChange:g,className:p,disabled:E,disabledOptions:h=[]}){const a=(0,s.wW)(o),v=r??(0,n.uniqueId)("radiogroup-list-");return l.createElement("div",{id:r,className:(0,t.cx)(a.container,p),role:"radiogroup"},u.map((x,y)=>{const C=`${v}-${y}`,P=d&&d===x.value,D=E||h.some(b=>b===x.value),M=()=>g&&x.value&&g(x.value);return l.createElement(i,{key:C,id:C,name:m,label:x.label,description:x.description,checked:P,disabled:D,onChange:M})}))}const o=m=>({container:t.css`
    display: grid;
    gap: ${m.spacing(1)};
  `})},73267:(Z,O,e)=>{"use strict";e.d(O,{GL:()=>l,RK:()=>s,ht:()=>f,iL:()=>o,nf:()=>i});var t=e(9892),n=e(85419);const l=m=>t.css`
  &:focus {
    ${(0,n.focusCss)(m)}
  }
`,s=(m,r=!1)=>{const u=r?m.colors.error.border:m.components.input.borderColor,d=r?m.colors.error.shade:m.components.input.borderHover,g=m.components.input.background,p=m.components.input.text,E=m.isDark?"#2e2f35":"#bab4ca";return(0,t.cx)(i(m),t.css`
      background: ${g};
      line-height: ${m.typography.body.lineHeight};
      font-size: ${m.typography.size.md};
      color: ${p};
      border: 1px solid ${u};

      &:-webkit-autofill,
      &:-webkit-autofill:hover {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${g}!important;
        -webkit-text-fill-color: ${p} !important;
        border-color: ${E};
      }

      &:-webkit-autofill:focus {
        /* Welcome to 2005. This is a HACK to get rid od Chromes default autofill styling */
        box-shadow: 0 0 0 2px ${m.colors.background.primary}, 0 0 0px 4px ${m.colors.primary.main},
          inset 0 0 0 1px rgba(255, 255, 255, 0), inset 0 0 0 100px ${g}!important;
        -webkit-text-fill-color: ${p} !important;
      }

      &:hover {
        border-color: ${d};
      }

      &:focus {
        outline: none;
      }

      &:disabled {
        background-color: ${m.colors.action.disabledBackground};
        color: ${m.colors.action.disabledText};
        border: 1px solid ${m.colors.action.disabledBackground};

        &:hover {
          border-color: ${u};
        }
      }

      &::placeholder {
        color: ${m.colors.text.disabled};
        opacity: 1;
      }
    `)},i=m=>t.css`
    padding: ${m.spacing(0,1,0,1)};
  `,f=()=>({sm:t.css`
      width: ${c("sm")};
    `,md:t.css`
      width: ${c("md")};
    `,lg:t.css`
      width: ${c("lg")};
    `,auto:t.css`
      width: ${c("auto")};
    `}),c=m=>{switch(m){case"sm":return"200px";case"md":return"320px";case"lg":return"580px";case"auto":default:return"auto"}};function o(m,r){switch(m){case"sm":return{padding:1,fontSize:r.typography.size.sm,height:r.components.height.sm};case"lg":return{padding:3,fontSize:r.typography.size.lg,height:r.components.height.lg};case"md":default:return{padding:2,fontSize:r.typography.size.md,height:r.components.height.md}}}},69823:(Z,O,e)=>{"use strict";e.d(O,{a:()=>p});var t=e(24259),n=e.n(t),l=e(68404),s=e(20112),i=e(66847),f=e(24177),c=e(4176),o=e(31403),m=e(66926),r=e(58230);const u={mode:f.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]};function d(E,h,a){const v=a!=null,x=Math.min(E*.15/1.5,20),y=x*1.5,C=v?h-y:h,P=Math.min(C,E);return{showLabel:v,gaugeHeight:P,titleFontSize:x}}function g(E,h,a,v){if(h.color?.mode!==m.S.Thresholds)return[{value:h.min??i.Hx,color:a.color??m.R}];const x=h.thresholds??u,y=x.mode===f.H.Percentage,C=x.steps;let P=h.min??i.Hx,D=h.max??i.Z3;y&&(P=0,D=100);const M=(0,r.m1)(P,C),b=(0,r.m1)(D,C),R=[{value:+P.toFixed(E),color:v.visualization.getColorByName(M.color)}];let B=!0;for(let w=0;w<C.length;w++){const A=C[w];if(B){M===A&&(B=!1);continue}const I=C[w-1];if(R.push({value:A.value,color:v.visualization.getColorByName(I.color)}),A===b)break}return R.push({value:+D.toFixed(E),color:v.visualization.getColorByName(b.color)}),R}class p extends l.PureComponent{constructor(){super(...arguments),this.canvasElement=null,this.renderVisualization=()=>{const{width:h,value:a,height:v,onClick:x,text:y,theme:C}=this.props,P=d(h,v,a.title),D=l.createElement("div",{style:{height:`${P.gaugeHeight}px`,width:"100%"},ref:M=>this.canvasElement=M});return l.createElement(l.Fragment,null,x?l.createElement("button",{className:(0,o.gN)(C),type:"button",onClick:x},D):D,P.showLabel&&l.createElement("div",{style:{textAlign:"center",fontSize:y?.titleSize??P.titleFontSize,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",position:"relative",width:"100%",top:"-4px",cursor:"default"}},a.title))}}componentDidMount(){this.draw()}componentDidUpdate(){this.draw()}draw(){const{field:h,showThresholdLabels:a,showThresholdMarkers:v,width:x,height:y,theme:C,value:P}=this.props,D=d(x,y,P.title),M=Math.min(x,D.gaugeHeight),b=C.colors.background.secondary,R=a?1.5:1,B=Math.min(M/5.5,40)/R,w=B/5,A=(0,s.zc)(P),F=Math.min(x,M*1.3)*.9-((B+(v?w:0)+(a?10:0))*2+10),K=this.props.text?.valueSize??(0,c.MX)(A,F,M,1,B*1.7),W=Math.max(K/2.5,12);let U=h.min??i.Hx,N=h.max??i.Z3,S=P.numeric;h.thresholds?.mode===f.H.Percentage&&(U=0,N=100,P.percent===void 0?S=(S-U)/(N-U)*100:S=P.percent*100);const Y=h.decimals===void 0?2:h.decimals;v&&(U=+U.toFixed(Y),N=+N.toFixed(Y));const Q={series:{gauges:{gauge:{min:U,max:N,neutralValue:h.custom?.neutral,background:{color:b},border:{color:null},shadow:{show:!1},width:B},frame:{show:!1},label:{show:!1},layout:{margin:0,thresholdWidth:0,vMargin:0},cell:{border:{width:0}},threshold:{values:g(Y,h,P,C),label:{show:a,margin:w+1,font:{size:W}},show:v,width:w},value:{color:P.color,formatter:()=>A,font:{size:K,family:C.typography.fontFamily}},show:!0}}},z={data:[[0,S]],label:P.title};try{this.canvasElement&&n().plot(this.canvasElement,[z],Q)}catch(G){console.error("Gauge rendering error",G,Q,P)}}render(){return l.createElement("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",overflow:"hidden"},className:this.props.className},this.renderVisualization())}}p.defaultProps={showThresholdMarkers:!0,showThresholdLabels:!1,field:{min:0,max:100,thresholds:u}}},87691:(Z,O,e)=>{"use strict";e.d(O,{k:()=>h});var t=e(24259),n=e.n(t),l=e(82897),s=e(68404),i=e(68219),f=e(40538),c=e(24505),o=e(65987),m=e(50800),r=e(31438);const u=({dimensions:v,activeDimensions:x,pos:y,timeZone:C})=>{let P=null;if(x.xAxis===null)return null;x.yAxis&&(P=x.yAxis[0]);const D=x.xAxis[1]?(0,i.jC)(v.xAxis,x.xAxis[0],x.xAxis[1]):y.x,M=(0,r.wu)(v.yAxis.columns,v.xAxis.columns,D,C),b=M.time,R=M.results.map((B,w)=>({color:B.color,label:B.label,value:B.value,isActive:P===w}));return s.createElement(m.c,{series:R,timestamp:b})};u.displayName="MultiModeGraphTooltip";var d=e(20112),g=e(89890);const p=({dimensions:v,activeDimensions:x,timeZone:y})=>{if(x.yAxis===null||x.yAxis[1]===void 0||x.xAxis===null||x.xAxis[1]===void 0)return null;const C=(0,i.jC)(v.xAxis,x.xAxis[0],x.xAxis[1]),P=(0,i.$q)(v.xAxis,x.xAxis[0]),D=P.display?(0,d.zc)(P.display(C)):C,M=(0,i.$q)(v.yAxis,x.yAxis[0]),b=(0,i.jC)(v.yAxis,x.yAxis[0],x.yAxis[1]),R=M.display,B=R(b);return s.createElement(m.c,{series:[{color:B.color,label:(0,g.C)(M),value:(0,d.zc)(B)}],timestamp:D})};p.displayName="SingleModeGraphTooltip";const E=({mode:v=f.f3.Single,dimensions:x,activeDimensions:y,pos:C,timeZone:P})=>!y||!y.xAxis?null:v==="single"?s.createElement(p,{dimensions:x,activeDimensions:y,timeZone:P}):s.createElement(u,{dimensions:x,activeDimensions:y,pos:C,timeZone:P});E.displayName="GraphTooltip";class h extends s.PureComponent{constructor(){super(...arguments),this.state={isTooltipVisible:!1,isContextVisible:!1},this.element=null,this.onPlotSelected=(x,y)=>{const{onHorizontalRegionSelected:C}=this.props;C&&C(y.xaxis.from,y.xaxis.to)},this.onPlotHover=(x,y,C)=>{this.setState({isTooltipVisible:!0,activeItem:C,pos:y})},this.onPlotClick=(x,y,C)=>{this.setState({isContextVisible:!0,isTooltipVisible:!1,contextItem:C,contextPos:y})},this.renderTooltip=()=>{const{children:x,series:y,timeZone:C}=this.props,{pos:P,activeItem:D,isTooltipVisible:M}=this.state;let b=null;if(!M||!P||y.length===0||(s.Children.forEach(x,U=>{if(b)return;(U&&U.type&&(U.type.displayName||U.type.name))===c.I.displayName&&(b=U)}),!b))return null;const R=b.props,B=R.mode||"single";if(!D&&B==="single")return null;const w=R.tooltipComponent||E,A=D?D.series.seriesIndex:0,I=D?D.dataIndex:void 0,F={xAxis:[A,I],yAxis:D?[D.series.seriesIndex,D.dataIndex]:null},K={dimensions:{xAxis:(0,i.q2)("xAxis",y.map(U=>U.timeField)),yAxis:(0,i.q2)("yAxis",y.map(U=>U.valueField))},activeDimensions:F,pos:P,mode:R.mode||f.f3.Single,timeZone:C},W=s.createElement(w,{...K});return s.cloneElement(b,{content:W,position:{x:P.pageX,y:P.pageY},offset:{x:10,y:10}})},this.renderContextMenu=()=>{const{series:x}=this.props,{contextPos:y,contextItem:C,isContextVisible:P}=this.state;if(!P||!y||!C||x.length===0)return null;const D=C?C.series.seriesIndex:0,M=C?C.dataIndex:void 0,b={xAxis:[D,M],yAxis:C?[C.series.seriesIndex,C.dataIndex]:null},R={xAxis:(0,i.q2)("xAxis",x.map(I=>I.timeField)),yAxis:(0,i.q2)("yAxis",x.map(I=>I.valueField))},B=()=>this.setState({isContextVisible:!1}),w=()=>({datapoint:C.datapoint,dataIndex:C.dataIndex,series:C.series,seriesIndex:C.series.seriesIndex,pageX:y.pageX,pageY:y.pageY}),A={x:y.pageX,y:y.pageY,onClose:B,getContextMenuSource:w,timeZone:this.props.timeZone,dimensions:R,contextDimensions:b};return s.createElement(o.w,{...A})},this.getBarWidth=()=>{const{series:x}=this.props;return Math.min(...x.map(y=>y.timeStep))}}componentDidUpdate(x,y){x!==this.props&&this.draw()}componentDidMount(){this.draw(),this.element&&(this.$element=n()(this.element),this.$element.bind("plotselected",this.onPlotSelected),this.$element.bind("plothover",this.onPlotHover),this.$element.bind("plotclick",this.onPlotClick))}componentWillUnmount(){this.$element&&this.$element.unbind("plotselected",this.onPlotSelected)}getYAxes(x){return x.length===0?[{show:!0,min:-1,max:1}]:(0,l.uniqBy)(x.map(y=>{const C=y.yAxis?y.yAxis.index:1,P=y.yAxis&&y.yAxis.min&&!isNaN(y.yAxis.min)?y.yAxis.min:null,D=y.yAxis&&y.yAxis.tickDecimals&&!isNaN(y.yAxis.tickDecimals)?y.yAxis.tickDecimals:null;return{show:!0,index:C,position:C===1?"left":"right",min:P,tickDecimals:D}}),y=>y.index)}draw(){if(this.element===null)return;const{width:x,series:y,timeRange:C,showLines:P,showBars:D,showPoints:M,isStacked:b,lineWidth:R,timeZone:B,onHorizontalRegionSelected:w}=this.props;if(!x)return;const A=x/100,I=C.from.valueOf(),F=C.to.valueOf(),K=this.getYAxes(y),W={legend:{show:!1},series:{stack:b,lines:{show:P,lineWidth:R,zero:!1},points:{show:M,fill:1,fillColor:!1,radius:2},bars:{show:D,fill:1,barWidth:D?this.getBarWidth()/1.5:1,zero:!1,lineWidth:R},shadowSize:0},xaxis:{timezone:B,show:!0,mode:"time",min:I,max:F,label:"Datetime",ticks:A,timeformat:(0,r.mc)(A,I,F),tickFormatter:r.sV},yaxes:K,grid:{minBorderMargin:0,markings:[],backgroundColor:null,borderWidth:0,hoverable:!0,clickable:!0,color:"#a1a1a1",margin:{left:0,right:0},labelMarginX:0,mouseActiveRadius:30},selection:{mode:w?"x":null,color:"#666"},crosshair:{mode:"x"}};try{n().plot(this.element,y.filter(U=>U.isVisible),W)}catch(U){throw console.error("Graph rendering error",U,W,y),new Error("Error rendering panel")}}render(){const{ariaLabel:x,height:y,width:C,series:P}=this.props,D=P.length===0,M=this.renderTooltip(),b=this.renderContextMenu();return s.createElement("div",{className:"graph-panel","aria-label":x},s.createElement("div",{className:"graph-panel__chart",ref:R=>this.element=R,style:{height:y,width:C},onMouseLeave:()=>{this.setState({isTooltipVisible:!1})}}),D&&s.createElement("div",{className:"datapoints-warning"},"No data"),M,b)}}h.defaultProps={showLines:!0,showPoints:!1,showBars:!1,isStacked:!1,lineWidth:1};const a=null},65987:(Z,O,e)=>{"use strict";e.d(O,{b:()=>g,w:()=>d});var t=e(9892),n=e(68404),l=e(68219),s=e(38849),i=e(72648),f=e(30909),c=e(72777),o=e(52081),m=e(14391),r=e(42044),u=e(6264);const d=({getContextMenuSource:E,timeZone:h,itemsGroup:a,dimensions:v,contextDimensions:x,...y})=>{const C=E(),P=a?a.map(b=>({...b,items:b.items?.filter(R=>R.label)})):[],D=()=>{if(!C)return null;let b;if(v?.yAxis&&x?.yAxis?.[1]){const B=(0,l.jC)(v.yAxis,x.yAxis[0],x.yAxis[1]),w=C.series.valueField.display;b=w(B)}const R=(0,s.dq)(C.datapoint[0],{defaultWithMS:C.series.hasMsResolution,timeZone:h});return n.createElement(g,{timestamp:R,seriesColor:C.series.color,displayName:C.series.alias||C.series.label,displayValue:b})},M=()=>P?.map((b,R)=>n.createElement(m.k,{key:`${b.label}${R}`,label:b.label},(b.items||[]).map(B=>n.createElement(r.s,{key:`${B.label}`,url:B.url,label:B.label,target:B.target,icon:B.icon,active:B.active,onClick:B.onClick}))));return n.createElement(f.x,{...y,renderMenuItems:M,renderHeader:D})},g=({timestamp:E,seriesColor:h,displayName:a,displayValue:v})=>{const x=(0,i.wW)(p);return n.createElement("div",{className:x.wrapper},n.createElement("strong",null,E),n.createElement(o.Lh,null,n.createElement("div",null,n.createElement(u.F,{color:h}),n.createElement("span",{className:x.displayName},a)),v&&n.createElement(c.W,{value:v})))};function p(E){return{wrapper:t.css`
      padding: ${E.spacing(.5)} ${E.spacing(1)};
      font-size: ${E.typography.size.sm};
      z-index: ${E.zIndex.tooltip};
    `,displayName:t.css`
      white-space: nowrap;
      padding-left: ${E.spacing(.5)};
    `}}},56506:(Z,O,e)=>{"use strict";e.d(O,{U:()=>s});var t=e(82897),n=e.n(t),l=e(68404);class s extends l.Component{constructor(f){super(f),this.onSeriesToggle=this.onSeriesToggle.bind(this),this.state={hiddenSeries:[],toggledSeries:f.series}}componentDidUpdate(f){const{series:c}=this.props;(0,t.isEqual)(f.series,c)||this.setState({hiddenSeries:[],toggledSeries:c})}onSeriesToggle(f,c){const{series:o,onHiddenSeriesChanged:m}=this.props,{hiddenSeries:r}=this.state;if(c.ctrlKey||c.metaKey||c.shiftKey){const p=r.indexOf(f)>-1?r.filter(h=>h!==f):r.concat([f]),E=o.map(h=>({...h,isVisible:p.indexOf(h.label)===-1}));this.setState({hiddenSeries:p,toggledSeries:E},()=>m?m(p):void 0);return}const u=o.map(p=>p.label),d=r.length+1===u.length?[]:(0,t.difference)(u,[f]),g=o.map(p=>({...p,isVisible:d.indexOf(p.label)===-1}));this.setState({hiddenSeries:d,toggledSeries:g},()=>m?m(d):void 0)}render(){const{children:f}=this.props,{toggledSeries:c}=this.state;return f({onSeriesToggle:this.onSeriesToggle,toggledSeries:c})}}},29781:(Z,O,e)=>{"use strict";e.d(O,{U:()=>m});var t=e(9892),n=e(68404),l=e(7804),s=e(68226),i=e(78056),f=e(87691);const c=(0,l.B)(({placement:r})=>({wrapper:t.css`
    display: flex;
    flex-direction: ${r==="bottom"?"column":"row"};
  `,graphContainer:t.css`
    min-height: 65%;
    flex-grow: 1;
  `,legendContainer:t.css`
    padding: 10px 0;
    max-height: ${r==="bottom"?"35%":"none"};
  `})),o=(r,u=!1,d=!1)=>{const g=r.reduce((E,h)=>E+(h[1]||0),0)===0,p=!r.reduce((E,h)=>E&&h[1]!==null,!0);return u&&p||d&&g},m=r=>{const{series:u,timeRange:d,width:g,height:p,showBars:E,showLines:h,showPoints:a,sortLegendBy:v,sortLegendDesc:x,legendDisplayMode:y,legendVisibility:C,placement:P,onSeriesToggle:D,onToggleSort:M,hideEmpty:b,hideZero:R,isStacked:B,lineWidth:w,onHorizontalRegionSelected:A,timeZone:I,children:F,ariaLabel:K}=r,{graphContainer:W,wrapper:U,legendContainer:N}=c(r),S=u.reduce((Y,Q)=>o(Q.data,b,R)?Y:Y.concat([{label:Q.label,color:Q.color||"",disabled:!Q.isVisible,yAxis:Q.yAxis.index,getDisplayValues:()=>Q.info||[]}]),[]);return n.createElement("div",{className:U,"aria-label":K},n.createElement("div",{className:W},n.createElement(f.k,{series:u,timeRange:d,timeZone:I,showLines:h,showPoints:a,showBars:E,width:g,height:p,isStacked:B,lineWidth:w,onHorizontalRegionSelected:A},F)),C&&n.createElement("div",{className:N},n.createElement(s.$,{hideHorizontalTrack:!0},n.createElement(i.l,{items:S,displayMode:y,placement:P,sortBy:v,sortDesc:x,onLabelClick:(Y,Q)=>{D&&D(Y.label,Q)},onToggleSort:M}))))}},31438:(Z,O,e)=>{"use strict";e.d(O,{mc:()=>o,sV:()=>c,wu:()=>f});var t=e(20112),n=e(89890),l=e(38849),s=e(47513);const i=(m,r)=>{let u=0,d=m.values.length-1,g;for(;;){if(u>d)return Math.max(d,0);g=Math.floor((u+d)/2);const p=m.values.get(g);if(p===r)return g;p&&p<r?u=g+1:d=g-1}},f=(m,r,u,d)=>{let g,p,E,h,a;const v=[];let x,y;for(g=0;g<m.length;g++){p=m[g];const C=r[g];E=i(C,u),h=u-C.values.get(E),a=C.values.get(E),(x===void 0||h>=0&&(h<x||x<0)||h<0&&h>x)&&(x=h,y=C.display?(0,t.zc)(C.display(a)):a);const P=p.display(p.values.get(E));v.push({value:(0,t.zc)(P),datapointIndex:E,seriesIndex:g,color:P.color,label:(0,n.C)(p),time:C.display?(0,t.zc)(C.display(a)):a})}return{results:v,time:y}},c=(m,r)=>(0,l.dq)(m,{format:r?.options?.timeformat,timeZone:r?.options?.timezone}),o=(m,r,u)=>{if(r&&u&&m){const d=u-r,g=d/m/1e3,p=86400010,E=31536e6;return g<=10?s.U6.interval.millisecond:g<=45?s.U6.interval.second:d<=p?s.U6.interval.minute:g<=8e4?s.U6.interval.hour:d<=E?s.U6.interval.day:g<=31536e3?s.U6.interval.month:s.U6.interval.year}return s.U6.interval.minute}},72269:(Z,O,e)=>{"use strict";e.d(O,{d:()=>E,j:()=>g});var t=e(68404),n=e(53376),l=e(98803),s=e(3249),i=e(85854),f=e(55294),c=e(25318),o=e(60325),m=e(729),r=e(3200),u=e(2445),d=e(86979);const g="__fixed";function p(h,a,v=[]){for(const x of v)if(typeof x=="function"){if(!x(h,a))return!1}else if(a[x]!==h[x])return!1;return!0}class E extends t.Component{constructor(a){super(a),this.panelContext={},this.subscription=new n.w0,this.getTimeRange=()=>this.props.timeRange;let v=this.prepState(a);v.alignedData=v.config.prepData([v.alignedFrame]),this.state=v,this.plotInstance=t.createRef()}prepState(a,v=!0){let x=null;const{frames:y,fields:C,preparePlotFrame:P}=a,M=(P||d.R)(y,C||{x:s.Ls.get(i.mi.firstTimeField).get({}),y:s.Ls.get(i.mi.numeric).get({})},a.timeRange);if((0,u.Zp)("GraphNG",!1,"data aligned",M),M){let b=this.state?.config;v&&(b=a.prepConfig(M,this.props.frames,this.getTimeRange),(0,u.Zp)("GraphNG",!1,"config prepared",b)),x={alignedFrame:M,config:b},(0,u.Zp)("GraphNG",!1,"data prepared",x.alignedData)}return x}handleCursorUpdate(a){const v=a.payload?.point?.time,x=this.plotInstance.current;if(x&&v){const y=x.valToPos(v,"x");let C;if(y&&(C=(0,u.ah)(x,x.posToIdx(y))),!C||!y)return;x.setCursor({left:y,top:C})}}componentDidMount(){this.panelContext=this.context;const{eventBus:a}=this.panelContext;this.subscription.add(a.getStream(f.es).pipe((0,l.p)(50)).subscribe({next:v=>{a!==v.origin&&this.handleCursorUpdate(v)}})),this.subscription.add(a.getStream(c.IA).pipe((0,l.p)(50)).subscribe({next:v=>this.handleCursorUpdate(v)})),this.subscription.add(a.getStream(f.xH).pipe((0,l.p)(50)).subscribe({next:()=>{const v=this.plotInstance?.current;v&&v.setCursor({left:-10,top:-10})}}))}componentDidUpdate(a){const{frames:v,structureRev:x,timeZone:y,propsToDiff:C}=this.props,P=!p(a,this.props,C);if(v!==a.frames||P||y!==a.timeZone){let D=this.prepState(this.props,!1);D&&((this.state.config===void 0||y!==a.timeZone||x!==a.structureRev||!x||P)&&(D.config=this.props.prepConfig(D.alignedFrame,this.props.frames,this.getTimeRange),(0,u.Zp)("GraphNG",!1,"config recreated",D.config)),D.alignedData=D.config.prepData([D.alignedFrame]),this.setState(D))}}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{width:a,height:v,children:x,timeRange:y,renderLegend:C}=this.props,{config:P,alignedFrame:D,alignedData:M}=this.state;return P?t.createElement(m.AY,{width:a,height:v,legend:C(P)},(b,R)=>t.createElement(r.N,{config:P,data:M,width:b,height:R,timeRange:y,plotRef:B=>this.plotInstance.current=B},x?x(P,D):null)):null}}E.contextType=o.bb},16566:(Z,O,e)=>{"use strict";e.d(O,{z:()=>l});var t=e(68404);const n=t.createContext({}),l=()=>{const{data:s,dimFields:i,mapSeriesIndexToDataFrameFieldIndex:f}=(0,t.useContext)(n),c=(0,t.useCallback)(()=>{const o=i.x;let m=null;for(let r=0;r<s.fields.length;r++)if(o(s.fields[r],s,[s])){m=s.fields[r];break}return m},[s,i]);return{dimFields:i,mapSeriesIndexToDataFrameFieldIndex:f,getXAxisField:c,alignedData:s}}},45778:(Z,O,e)=>{"use strict";e.d(O,{w:()=>s});var t=e(14582),n=e(19695);const l={threshold:(f,c,o)=>f+o,midpoint:(f,c,o)=>(f+c)/2,plusone:(f,c,o)=>f+1};function s(f){if(f.frame.length===0)return f.frame;let c=!0,{frame:o,refFieldName:m,refFieldPseudoMax:r,refFieldPseudoMin:u,insertMode:d}=f;d||(d=l.threshold);const g=o.fields.find(h=>m!=null?h.name===m:h.type===t.fS.time);if(g==null)return o;g.state={...g.state,nullThresholdApplied:!0};const p=o.fields.map(h=>h.config.custom?.insertNulls??g.config.interval??null),E=new Set(p);if(E.delete(null),E.size===0)return o;if(E.size===1){const h=E.values().next().value;if(h<=0)return o;const a=g.values.toArray(),v=o.fields.map(y=>y.values.toArray()),x=i(a,v,h,u,r,d,c);return x===v?o:{...o,length:x[0].length,fields:o.fields.map((y,C)=>({...y,values:new n.G(x[C])}))}}return o}function i(f,c,o,m=null,r=null,u,d){const g=f.length,p=[];if(m!=null&&m<f[0]){let v=Math.ceil((f[0]-m)/o),x=f[0]-v*o;for(;x<f[0];)p.push(u(x-o,x,o)),x+=o}p.push(f[0]);let E=f[0];for(let v=1;v<g;v++){const x=f[v];for(;x-E>o&&(p.push(u(E,x,o)),E+=o,!!d););p.push(x),E=x}if(r!=null&&r>E)for(;E+o<r;)p.push(u(E,r,o)),E+=o;const h=p.length;if(h===g)return c;const a=[];for(let v of c){let x;if(v!==f){x=Array(h);for(let y=0,C=0;y<h;y++)x[y]=f[C]===p[y]?v[C++]:null}else x=p;a.push(x)}return a}},45389:(Z,O,e)=>{"use strict";e.d(O,{I:()=>n});var t=e(19695);function n(l){return{...l,fields:l.fields.map(s=>{const i=+s.config?.noValue;if(Number.isNaN(i))return s;{const f=s.values.toArray().slice();for(let c=0;c<f.length;c++)f[c]===null&&(f[c]=i);return{...s,values:new t.G(f)}}})}}},86979:(Z,O,e)=>{"use strict";e.d(O,{z:()=>u,R:()=>r});var t=e(14582),n=e(19695),l=e(98234),s=e(40538),i=e(72269),f=e(45778);function c(g,p,E){let h,a;for(let v=0;v<p.length;v++)if(p[v]==null)a==null&&h!=null&&(a=v);else{if(a!=null){if(g[v]-h<E)for(;a<v;)p[a++]=void 0;a=null}h=g[v]}return p}function o(g){return g.type===t.fS.number&&g.config.custom?.drawStyle===s.l8.Bars&&!g.config.custom?.hideFrom?.viz}function m(g){let p=g.fields.find(h=>h.type===t.fS.time),E=p?.values.toArray();for(let h=0;h<g.fields.length;h++){let a=g.fields[h];if(a===p||o(a))continue;let v=a.config.custom?.spanNulls;typeof v=="number"&&v!==-1&&(a.values=new n.G(c(E,a.values.toArray(),v)))}return g}function r(g,p,E){g=g.map(x=>x.fields[0].state?.nullThresholdApplied?x:(0,f.w)({frame:x,refFieldName:null,refFieldPseudoMin:E?.from.valueOf(),refFieldPseudoMax:E?.to.valueOf()}));let h=0;g.forEach(x=>{x.fields.forEach(y=>{o(y)&&(y.config.custom={...y.config.custom,spanNulls:-1},h++)})});let a=1/0;h>1&&g.forEach(x=>{if(!x.fields.some(o))return;const y=x.fields[0].values.toArray();for(let C=0;C<y.length;C++)C>0&&(a=Math.min(a,y[C]-y[C-1]))});let v=(0,l._9)({frames:g,joinBy:p.x,keep:p.y,keepOriginIndices:!0});return v?(v=m(v),a!==1/0&&(v.fields.forEach((x,y)=>{let C=x.values.toArray();if(y===0){let P=C[C.length-1];C.push(P+a,P+2*a)}else o(x)?C.push(null,null):C.push(void 0,void 0)}),v.length+=2),v):null}function u(g){const p="na",E=`${g.min!==void 0?g.min:p}-${g.max!==void 0?g.max:p}`,h=`${g.custom?.axisSoftMin!==void 0?g.custom.axisSoftMin:p}-${g.custom?.axisSoftMax!==void 0?g.custom.axisSoftMax:p}`,a=`${g.custom?.axisPlacement!==void 0?g.custom?.axisPlacement:s.LB.Auto}`,v=g.unit??i.j,x=g.custom?.scaleDistribution?d(g.custom.scaleDistribution):s.wf.Linear,y=Boolean(g.custom?.axisLabel)?g.custom.axisLabel:p;return`${v}/${E}/${h}/${a}/${x}/${y}`}function d(g){return g.type===s.wf.Log?`${g.type}${g.log}`:g.type}},39904:(Z,O,e)=>{"use strict";e.d(O,{J:()=>Hs});var t=e(9892),n=e(68404),l=e(61549),s=e(43565),i=e(72648),f=e(79161),c=e(94654),o=e(70726),m=e(30735),r=e(97048),u=e(43053),d=e(76059),g=e(41477),p=e(25173),E=e(89833),h=e(59658),a=e(85429),v=e(26925),x=e(22346),y=e(85334),C=e(10958),P=e(84060),D=e(92270),M=e(7803),b=e(26183),R=e(94526),B=e(49893),w=e(79691),A=e(35644),I=e(47255),F=e(76375),K=e(88921),W=e(59622),U=e(35988),N=e(63536),S=e(65976),Y=e(69343),Q=e(38958),z=e(95e3),G=e(53505),k=e(45299),j=e(65774),de=e(39239),ge=e(53516),re=e(94149),ce=e(62373),ie=e(42601),fe=e(39295),Ce=e(19570),ee=e(369),ne=e(71942),X=e(97623),te=e(7955),ae=e(41429),_=e(88447),ve=e(61501),Ve=e(47069),it=e(48509),rt=e(43305),pe=e(16584),Ie=e(42644),We=e(79603),Je=e(65291),He=e(45230),Ae=e(7835),et=e(63050),_e=e(49024),Se=e(67226),Fe=e(49162),Xe=e(88297),Qe=e(70973),ct=e(26055),ht=e(56271),ft=e(5810),Re=e(3408),nt=e(67628),le=e(50778),Pe=e(7274),Oe=e(70471),Le=e(75603),Ye=e(91196),be=e(48411),Te=e(16243),me=e(78372),he=e(8380),De=e(48578),$e=e(83143),ke=e(18625),tt=e(91157),Ge=e(24062),dt=e(35548),pt=e(26407),Ke=e(23841),je=e(19827),ot=e(5386),at=e(60093),xt=e(69980),Dt=e(50319),wt=e(67743),sn=e(27207),mn=e(7532),Dn=e(6127),Rn=e(61449),St=e(79748),At=e(80384),Wt=e(51164),Qt=e(58929),jt=e(98723),Xt=e(90577),tn=e(52677),on=e(98851),dn=e(20323),$t=e(2533),qt=e(51284),Vt=e(63742),nn=e(35398),un=e(57710),En=e(91290),cn=e(27714),wn=e(42148),Gn=e(1316),Nn=e(39423),Wn=e(31277),qn=e(71580),ga=e(71171),ea=e(36746),ca=e(4403),ba=e(80579),zn=e(3802),$n=e(22465),ta=e(11774),Fa=e(98361),Ma=e(45453),Oa=e(99703),Qa=e(52370),Qn=e(34924),Aa=e(40159),ia=e(76419),_a=e(26216),As=e(96864),va=e(83507),Ga=e(88043),Xa=e(95428),da=e(87784),as=e(72461),qs=e(39228),Ys=e(59619),sr=e(43743),er=e(24099),Sr=e(55054),rr=e(8),Ms=e(3265),js=e(13965),Ls=e(6666),Ss=e(97091),Vs=e(34604),Va=e(75864),Or=e(28122),hr=e(48491),Us=e(97612),Qs=e(32411),vr=e(36319),or=e(96861),Ea=e(25169),Er=e(34052),zs=e(88175),Bs=e(36277),ir=e(62695),lr=e(65023),yr=e(51433),tr=e(46558);let Pr=!1,ws="public/img/icons/";function Gt(is,Za){l.V[ws+Za]={content:is,status:"loaded"}}function na(){Pr=!0;const is=typeof window<"u"&&window.__grafana_public_path__;is&&(ws=is+"img/icons/"),Gt(f,"unicons/at.svg"),Gt(c,"unicons/adjust-circle.svg"),Gt(o,"unicons/angle-double-down.svg"),Gt(m,"unicons/angle-double-right.svg"),Gt(r,"unicons/angle-down.svg"),Gt(u,"unicons/angle-left.svg"),Gt(d,"unicons/angle-right.svg"),Gt(g,"unicons/angle-up.svg"),Gt(p,"unicons/apps.svg"),Gt(E,"unicons/arrow.svg"),Gt(h,"unicons/arrow-down.svg"),Gt(a,"unicons/arrow-from-right.svg"),Gt(v,"unicons/arrow-left.svg"),Gt(x,"unicons/arrow-random.svg"),Gt(y,"unicons/arrow-right.svg"),Gt(C,"unicons/arrow-to-right.svg"),Gt(P,"unicons/arrow-up.svg"),Gt(D,"unicons/arrows-h.svg"),Gt(M,"unicons/backward.svg"),Gt(b,"unicons/bars.svg"),Gt(R,"unicons/bell.svg"),Gt(B,"unicons/bell-slash.svg"),Gt(w,"unicons/bolt.svg"),Gt(A,"unicons/book.svg"),Gt(I,"unicons/book-open.svg"),Gt(F,"unicons/brackets-curly.svg"),Gt(K,"unicons/bug.svg"),Gt(W,"unicons/building.svg"),Gt(U,"unicons/calculator-alt.svg"),Gt(N,"unicons/calendar-alt.svg"),Gt(S,"unicons/calendar-slash.svg"),Gt(Y,"unicons/camera.svg"),Gt(Q,"unicons/channel-add.svg"),Gt(z,"unicons/chart-line.svg"),Gt(G,"unicons/check.svg"),Gt(k,"unicons/check-circle.svg"),Gt(j,"unicons/circle.svg"),Gt(de,"unicons/clipboard-alt.svg"),Gt(ge,"unicons/clock-nine.svg"),Gt(re,"unicons/cloud.svg"),Gt(ce,"unicons/cloud-download.svg"),Gt(ie,"unicons/code-branch.svg"),Gt(fe,"unicons/cog.svg"),Gt(Ce,"unicons/columns.svg"),Gt(ee,"unicons/comment-alt.svg"),Gt(ne,"unicons/comment-alt-share.svg"),Gt(X,"unicons/comments-alt.svg"),Gt(te,"unicons/compass.svg"),Gt(ae,"unicons/copy.svg"),Gt(_,"unicons/corner-down-right-alt.svg"),Gt(ve,"unicons/cube.svg"),Gt(Ve,"unicons/dashboard.svg"),Gt(it,"unicons/database.svg"),Gt(rt,"unicons/document-info.svg"),Gt(pe,"unicons/download-alt.svg"),Gt(Ie,"unicons/draggabledots.svg"),Gt(We,"unicons/edit.svg"),Gt(Je,"unicons/ellipsis-v.svg"),Gt(He,"unicons/ellipsis-h.svg"),Gt(Ae,"unicons/envelope.svg"),Gt(et,"unicons/exchange-alt.svg"),Gt(_e,"unicons/exclamation-triangle.svg"),Gt(Se,"unicons/external-link-alt.svg"),Gt(Fe,"unicons/eye.svg"),Gt(Xe,"unicons/eye-slash.svg"),Gt(Qe,"unicons/file-alt.svg"),Gt(ct,"unicons/file-blank.svg"),Gt(ht,"unicons/filter.svg"),Gt(ft,"unicons/folder.svg"),Gt(Re,"unicons/folder-open.svg"),Gt(nt,"unicons/folder-plus.svg"),Gt(le,"unicons/folder-upload.svg"),Gt(Pe,"unicons/forward.svg"),Gt(Oe,"unicons/graph-bar.svg"),Gt(Le,"unicons/history.svg"),Gt(Ye,"unicons/home-alt.svg"),Gt(be,"unicons/import.svg"),Gt(Te,"unicons/info.svg"),Gt(me,"unicons/info-circle.svg"),Gt(he,"unicons/k6.svg"),Gt(De,"unicons/key-skeleton-alt.svg"),Gt($e,"unicons/keyboard.svg"),Gt(ke,"unicons/link.svg"),Gt(tt,"unicons/list-ul.svg"),Gt(Ge,"unicons/lock.svg"),Gt(dt,"unicons/minus.svg"),Gt(pt,"unicons/minus-circle.svg"),Gt(Ke,"unicons/mobile-android.svg"),Gt(je,"unicons/monitor.svg"),Gt(ot,"unicons/pause.svg"),Gt(at,"unicons/pen.svg"),Gt(xt,"unicons/play.svg"),Gt(Dt,"unicons/plug.svg"),Gt(wt,"unicons/plus.svg"),Gt(sn,"unicons/plus-circle.svg"),Gt(mn,"unicons/power.svg"),Gt(Dn,"unicons/presentation-play.svg"),Gt(Rn,"unicons/process.svg"),Gt(St,"unicons/question-circle.svg"),Gt(At,"unicons/repeat.svg"),Gt(Wt,"unicons/rocket.svg"),Gt(Qt,"unicons/rss.svg"),Gt(jt,"unicons/save.svg"),Gt(Xt,"unicons/search.svg"),Gt(tn,"unicons/search-minus.svg"),Gt(on,"unicons/search-plus.svg"),Gt(dn,"unicons/share-alt.svg"),Gt($t,"unicons/shield.svg"),Gt(qt,"unicons/signal.svg"),Gt(Vt,"unicons/signin.svg"),Gt(nn,"unicons/signout.svg"),Gt(un,"unicons/sitemap.svg"),Gt(En,"unicons/slack.svg"),Gt(cn,"unicons/sliders-v-alt.svg"),Gt(wn,"unicons/sort-amount-down.svg"),Gt(Gn,"unicons/sort-amount-up.svg"),Gt(Nn,"unicons/square-shape.svg"),Gt(Wn,"unicons/star.svg"),Gt(qn,"unicons/step-backward.svg"),Gt(ga,"unicons/sync.svg"),Gt(ea,"unicons/table.svg"),Gt(ca,"unicons/tag-alt.svg"),Gt(ba,"unicons/times.svg"),Gt(zn,"unicons/trash-alt.svg"),Gt($n,"unicons/unlock.svg"),Gt(ta,"unicons/upload.svg"),Gt(Fa,"unicons/user.svg"),Gt(Ma,"unicons/users-alt.svg"),Gt(Oa,"unicons/wrap-text.svg"),Gt(Qa,"unicons/cloud-upload.svg"),Gt(Qn,"unicons/credit-card.svg"),Gt(Aa,"unicons/file-copy-alt.svg"),Gt(ia,"unicons/fire.svg"),Gt(_a,"unicons/hourglass.svg"),Gt(As,"unicons/layer-group.svg"),Gt(va,"unicons/layers-alt.svg"),Gt(Ga,"unicons/line-alt.svg"),Gt(Xa,"unicons/list-ui-alt.svg"),Gt(da,"unicons/message.svg"),Gt(as,"unicons/palette.svg"),Gt(qs,"unicons/percentage.svg"),Gt(Ys,"unicons/shield-exclamation.svg"),Gt(sr,"unicons/plus-square.svg"),Gt(er,"unicons/x.svg"),Gt(Sr,"unicons/capture.svg"),Gt(rr,"custom/gf-grid.svg"),Gt(Ms,"custom/gf-landscape.svg"),Gt(js,"custom/gf-layout-simple.svg"),Gt(Ls,"custom/gf-portrait.svg"),Gt(Ss,"custom/gf-bar-alignment-after.svg"),Gt(Vs,"custom/gf-bar-alignment-before.svg"),Gt(Va,"custom/gf-bar-alignment-center.svg"),Gt(Or,"custom/gf-interpolation-linear.svg"),Gt(hr,"custom/gf-interpolation-smooth.svg"),Gt(Us,"custom/gf-interpolation-step-after.svg"),Gt(Qs,"custom/gf-interpolation-step-before.svg"),Gt(vr,"custom/gf-logs.svg"),Gt(or,"custom/gf-movepane-left.svg"),Gt(Ea,"custom/gf-movepane-right.svg"),Gt(Er,"mono/favorite.svg"),Gt(zs,"mono/grafana.svg"),Gt(Bs,"mono/heart.svg"),Gt(ir,"mono/heart-break.svg"),Gt(lr,"mono/panel-add.svg"),Gt(yr,"mono/library-panel.svg"),Gt(tr,"unicons/record-audio.svg")}var ps=e(37532);const cr=is=>({container:t.css`
      label: Icon;
      display: inline-block;
      line-height: 0;
    `,icon:t.css`
      vertical-align: middle;
      display: inline-block;
      fill: currentColor;
    `,orange:t.css`
      fill: ${is.v1.palette.orange};
    `}),Hs=n.forwardRef(({size:is="md",type:Za="default",name:Ze,className:Et,style:Ct,title:Be="",...we},xe)=>{const yt=(0,i.wW)(cr);if(Ze?.startsWith("fa fa-"))return n.createElement("i",{className:os(Ze,Et),...we,style:Ct});if(Pr||na(),(0,s.Mo)(Ze)||console.warn("Icon component passed an invalid icon name",Ze),!Ze||Ze.includes(".."))return n.createElement("div",{ref:xe},"invalid icon name");const Rt=(0,ps.B)(is),Bt=Rt,Kt=Ze.startsWith("gf-bar-align")?16:Ze.startsWith("gf-interp")?30:Rt,fn=(0,ps.y)(Ze,Za),Pn=`${ws}${fn}/${Ze}.svg`;return n.createElement("div",{className:yt.container,...we,ref:xe},n.createElement(l.Z,{src:Pn,width:Kt,height:Bt,title:Be,className:(0,t.cx)(yt.icon,Et,Za==="mono"?{[yt.orange]:Ze==="favorite"}:""),style:Ct}))});Hs.displayName="Icon";function os(is,Za){return(0,t.cx)(is,{"fa-spin":is==="fa fa-spinner"},Za)}},37532:(Z,O,e)=>{"use strict";e.d(O,{B:()=>l,y:()=>n});const t=["grafana","favorite","heart-break","heart","panel-add","library-panel","circle-mono"];function n(s,i){return s?.startsWith("gf-")?"custom":t.includes(s)?"mono":i==="default"?"unicons":i==="solid"?"solid":"mono"}function l(s){switch(s){case"xs":return 12;case"sm":return 14;case"md":return 16;case"lg":return 18;case"xl":return 24;case"xxl":return 36;case"xxxl":return 48}}},8180:(Z,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(9892),n=e(68404),l=e(64724),s=e(72648),i=e(85419),f=e(7804),c=e(39904),o=e(37532),m=e(6554);const r=n.forwardRef(({name:d,size:g="md",iconType:p,tooltip:E,tooltipPlacement:h,ariaLabel:a,className:v,variant:x="secondary",...y},C)=>{const P=(0,s.l4)(),D=u(P,g,x),M=typeof E=="string"?E:"",b=n.createElement("button",{ref:C,"aria-label":a||M,...y,className:(0,t.cx)(D.button,v)},n.createElement(c.J,{name:d,size:g,className:D.icon,type:p}));return E?n.createElement(m.u,{content:E,placement:h},b):b});r.displayName="IconButton";const u=(0,f.B)((d,g,p)=>{const E=(0,o.B)(g),h=Math.max(E/3,8);let a=d.colors.text.primary;return p==="primary"?a=d.colors.primary.text:p==="destructive"&&(a=d.colors.error.text),{button:t.css`
      width: ${E}px;
      height: ${E}px;
      background: transparent;
      border: none;
      color: ${a};
      padding: 0;
      margin: 0;
      outline: none;
      box-shadow: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      position: relative;
      border-radius: ${d.shape.borderRadius()};
      z-index: 0;
      margin-right: ${d.spacing(.5)};

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        color: ${d.colors.action.disabledText};
        opacity: 0.65;
        box-shadow: none;
      }

      &:before {
        content: '';
        display: block;
        opacity: 1;
        position: absolute;
        transition-duration: 0.2s;
        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
        z-index: -1;
        bottom: -${h}px;
        left: -${h}px;
        right: -${h}px;
        top: -${h}px;
        background: none;
        border-radius: 50%;
        box-sizing: border-box;
        transform: scale(0);
        transition-property: transform, opacity;
      }

      &:focus,
      &:focus-visible {
        ${(0,i.getFocusStyles)(d)}
      }

      &:focus:not(:focus-visible) {
        ${(0,i.getMouseFocusStyles)(d)}
      }

      &:hover {
        color: ${a};

        &:before {
          background-color: ${p==="secondary"?d.colors.action.hover:l.alpha(a,.12)};
          border: none;
          box-shadow: none;
          opacity: 1;
          transform: scale(0.8);
        }
      }
    `,icon:t.css`
      vertical-align: baseline;
      display: flex;
    `}})},26338:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>c,a:()=>m});var t=e(9892),n=e(68404),l=e(40400),s=e(72648),i=e(19985),f=e(17784);const c=n.memo(n.forwardRef(({title:u,featureState:d,...g},p)=>{const E=(0,s.wW)(o),h=d?n.createElement(n.Fragment,null,n.createElement("div",{className:E.badge},n.createElement(m,{featureState:d})),n.createElement("h3",null,u)):n.createElement("h3",null,u);return n.createElement(f.v,{branded:!0,title:h,urlTitle:"Read documentation",ref:p,...g})}));c.displayName="FeatureInfoBox";const o=u=>({badge:t.css`
      margin-bottom: ${u.spacing(1)};
    `}),m=({featureState:u,tooltip:d})=>{const g=r(u);return n.createElement(i.C,{text:g.text,color:g.color,icon:g.icon,tooltip:d})};function r(u){switch(u){case l.CQ.alpha:return{text:"Alpha",icon:"exclamation-triangle",color:"orange"}}return{text:"Beta",icon:"rocket",color:"blue"}}},17784:(Z,O,e)=>{"use strict";e.d(O,{v:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(7804),i=e(45253),f=e(39904);const c=n.memo(n.forwardRef(({title:m,className:r,children:u,branded:d,url:g,urlTitle:p,onDismiss:E,severity:h="info",...a},v)=>{const x=(0,l.wW)(o);return n.createElement(i.b,{severity:h,className:r,...a,ref:v,title:m},n.createElement("div",null,u),g&&n.createElement("a",{href:g,className:(0,t.cx)("external-link",x.docsLink),target:"_blank",rel:"noreferrer"},n.createElement(f.J,{name:"book"})," ",p||"Read more"))}));c.displayName="InfoBox";const o=(0,s.B)(m=>({docsLink:t.css`
      display: inline-block;
      margin-top: ${m.spacing(2)};
    `}))},4784:(Z,O,e)=>{"use strict";e.d(O,{K:()=>c});var t=e(9892),n=e(68404),l=e(11979),s=e(72648),i=e(39904),f=e(85511);function c({referenceElement:u,children:d,suffixIcon:g,placement:p}){const[E,h]=(0,n.useState)(null),a=(0,l.D)(u,E,{placement:p}),v=(0,s.wW)(o),x=(0,s.wW)(r);return n.createElement(f.h_,null,n.createElement("div",{style:{display:"inline-block",...a.styles.popper},...a.attributes.popper,ref:h},n.createElement("span",{className:(0,t.cx)(v.root,x[p])},d&&n.createElement("span",null,d),g&&n.createElement(i.J,{name:g}))))}const o=u=>({root:(0,t.css)({...u.typography.bodySmall,willChange:"transform",background:u.components.tooltip.background,color:u.components.tooltip.text,padding:u.spacing(.5,1.5),borderRadius:100,display:"inline-flex",gap:u.spacing(.5),alignItems:"center"})}),m=(u,d)=>(0,t.keyframes)({from:{opacity:0,transform:`translate(${u}, ${d})`},to:{opacity:1,transform:"translate(0, 0px)"}}),r=u=>{const g=m(0,u.spacing(1)),p=m(0,u.spacing(1*-1)),E=m(u.spacing(1),0),h=m(u.spacing(1*-1),0);return{top:(0,t.css)({marginBottom:u.spacing(1),animation:`${g} ease-out 100ms`}),bottom:(0,t.css)({marginTop:u.spacing(1),animation:`${p} ease-out 100ms`}),left:(0,t.css)({marginRight:u.spacing(1),animation:`${E} ease-out 100ms`}),right:(0,t.css)({marginLeft:u.spacing(1),animation:`${h} ease-out 100ms`})}}},68668:(Z,O,e)=>{"use strict";e.d(O,{H:()=>s});var t=e(68404),n=e(4176),l=e(46967);const s=t.forwardRef((f,c)=>{const{defaultValue:o="",minWidth:m=10,maxWidth:r,onCommitChange:u,onKeyDown:d,onBlur:g,...p}=f,[E,h]=t.useState(o),[a,v]=t.useState(m);return(0,t.useEffect)(()=>{v(i(E.toString(),m,r))},[E,r,m]),t.createElement(l.I,{...p,ref:c,value:E.toString(),onChange:x=>{h(x.currentTarget.value)},width:a,onBlur:x=>{g?g(x):u&&u(x)},onKeyDown:x=>{d?d(x):x.key==="Enter"&&u&&u(x)},"data-testid":"autosize-input"})});function i(f,c,o){if(!f)return c;const m=3,r=(0,n.X1)(f.toString(),14).width/8+m;return c&&r<c?c:o&&r>o?o:r}s.displayName="AutoSizeInput"},46967:(Z,O,e)=>{"use strict";e.d(O,{H:()=>m,I:()=>o});var t=e(9892),n=e(68404),l=e(10025),s=e(72648),i=e(7804),f=e(73267),c=e(67487);const o=n.forwardRef((r,u)=>{const{className:d,addonAfter:g,addonBefore:p,prefix:E,suffix:h,invalid:a,loading:v,width:x=0,...y}=r,[C,P]=(0,l.Z)(),[D,M]=(0,l.Z)(),b=(0,s.l4)(),R=m({theme:b,invalid:!!a,width:x});return n.createElement("div",{className:(0,t.cx)(R.wrapper,d),"data-testid":"input-wrapper"},!!p&&n.createElement("div",{className:R.addon},p),n.createElement("div",{className:R.inputWrapper},E&&n.createElement("div",{className:R.prefix,ref:C},E),n.createElement("input",{ref:u,className:R.input,...y,style:{paddingLeft:E?P.width+12:void 0,paddingRight:h||v?M.width+12:void 0}}),(h||v)&&n.createElement("div",{className:R.suffix,ref:D},v&&n.createElement(c.$,{className:R.loadingIndicator,inline:!0}),h)),!!g&&n.createElement("div",{className:R.addon},g))});o.displayName="Input";const m=(0,i.B)(({theme:r,invalid:u=!1,width:d})=>{const g="28px",p=t.css`
    position: absolute;
    top: 0;
    z-index: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-grow: 0;
    flex-shrink: 0;
    font-size: ${r.typography.size.md};
    height: 100%;
    /* Min width specified for prefix/suffix classes used outside React component*/
    min-width: ${g};
    color: ${r.colors.text.secondary};
  `;return{wrapper:(0,t.cx)(t.css`
        label: input-wrapper;
        display: flex;
        width: ${d?`${r.spacing(d)}`:"100%"};
        height: ${r.spacing(r.components.height.md)};
        border-radius: ${r.shape.borderRadius()};
        &:hover {
          > .prefix,
          .suffix,
          .input {
            border-color: ${u?r.colors.error.border:r.colors.primary.border};
          }

          // only show number buttons on hover
          input[type='number'] {
            -moz-appearance: number-input;
            -webkit-appearance: number-input;
            appearance: textfield;
          }

          input[type='number']::-webkit-inner-spin-button,
          input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: inner-spin-button !important;
            opacity: 1;
          }
        }
      `),inputWrapper:t.css`
      label: input-inputWrapper;
      position: relative;
      flex-grow: 1;
      /* we want input to be above addons, especially for focused state */
      z-index: 1;

      /* when input rendered with addon before only*/
      &:not(:first-child):last-child {
        > input {
          border-left: none;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      /* when input rendered with addon after only*/
      &:first-child:not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      /* when rendered with addon before and after */
      &:not(:first-child):not(:last-child) {
        > input {
          border-right: none;
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }

      input {
        /* paddings specified for classes used outside React component */
        &:not(:first-child) {
          padding-left: ${g};
        }
        &:not(:last-child) {
          padding-right: ${g};
        }
        &[readonly] {
          cursor: default;
        }
      }
    `,input:(0,t.cx)((0,f.GL)(r),(0,f.RK)(r,u),t.css`
        label: input-input;
        position: relative;
        z-index: 0;
        flex-grow: 1;
        border-radius: ${r.shape.borderRadius()};
        height: 100%;
        width: 100%;
      `),inputDisabled:t.css`
      background-color: ${r.colors.action.disabledBackground};
      color: ${r.colors.action.disabledText};
      border: 1px solid ${r.colors.action.disabledBackground};
      &:focus {
        box-shadow: none;
      }
    `,addon:t.css`
      label: input-addon;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-grow: 0;
      flex-shrink: 0;
      position: relative;

      &:first-child {
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        > :last-child {
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
        }
      }

      &:last-child {
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        > :first-child {
          border-top-left-radius: 0;
          border-bottom-left-radius: 0;
        }
      }
      > *:focus {
        /* we want anything that has focus and is an addon to be above input */
        z-index: 2;
      }
    `,prefix:(0,t.cx)(p,t.css`
        label: input-prefix;
        padding-left: ${r.spacing(1)};
        padding-right: ${r.spacing(.5)};
        border-right: none;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
      `),suffix:(0,t.cx)(p,t.css`
        label: input-suffix;
        padding-left: ${r.spacing(1)};
        padding-right: ${r.spacing(1)};
        margin-bottom: -2px;
        border-left: none;
        border-top-left-radius: 0;
        border-bottom-left-radius: 0;
        right: 0;
      `),loadingIndicator:t.css`
      & + * {
        margin-left: ${r.spacing(.5)};
      }
    `}})},63619:(Z,O,e)=>{"use strict";e.d(O,{g:()=>n});var t=e(59052);const n=t.Qr},65455:(Z,O,e)=>{"use strict";e.d(O,{e:()=>p});var t=e(9892),n=e(82897),l=e(68404),s=e(91742),i=e(49922),f=e(72648),c=e(39904),o=e(8180);const m=t.css`
  display: flex;
  align-items: center;
  height: 100%;
`;function r({row:v,__rowID:x}){return l.createElement("div",{className:m},l.createElement(o.h,{tooltip:"toggle row expanded","aria-controls":x,name:v.isExpanded?"angle-down":"angle-right","aria-expanded":v.isExpanded,...v.getToggleRowExpandedProps()}))}const u="__expander";function d(v){return[{id:u,Cell:r,disableSortBy:!0,width:0},...v.map(x=>({id:x.id,accessor:x.id,Header:x.header||(()=>null),sortType:x.sortType||"alphanumeric",disableSortBy:!Boolean(x.sortType),width:x.disableGrow?0:void 0,visible:x.visible,...x.cell&&{Cell:x.cell}}))]}const g=v=>({table:t.css`
    border-radius: ${v.shape.borderRadius()};
    border: solid 1px ${v.colors.border.weak};
    background-color: ${v.colors.background.secondary};
    width: 100%;

    td {
      padding: ${v.spacing(1)};
    }

    td,
    th {
      min-width: ${v.spacing(3)};
    }
  `,evenRow:t.css`
    background: ${v.colors.background.primary};
  `,disableGrow:t.css`
    width: 0%;
  `,header:t.css`
    &,
    & > button {
      position: relative;
      white-space: nowrap;
      padding: ${v.spacing(1)};
    }
    & > button {
      &:after {
        content: '\\00a0';
      }
      width: 100%;
      height: 100%;
      background: none;
      border: none;
      padding-right: ${v.spacing(2.5)};
      text-align: left;
      &:hover {
        background-color: ${v.colors.emphasize(v.colors.background.secondary,.05)};
      }
    }
  `,sortableHeader:t.css`
    /* increases selector's specificity so that it always takes precedence over default styles  */
    && {
      padding: 0;
    }
  `});function p({data:v,className:x,columns:y,renderExpandedRow:C,getRowId:P}){const D=(0,f.wW)(g),M=(0,l.useMemo)(()=>d(y),[y]),b=E(),R=(0,l.useCallback)(K=>`${b}-${K.id}`.replace(/\s/g,""),[b]),{getTableProps:B,getTableBodyProps:w,headerGroups:A,rows:I,prepareRow:F}=(0,s.useTable)({columns:M,data:v,autoResetExpanded:!1,autoResetSortBy:!1,disableMultiSort:!0,getRowId:P,initialState:{hiddenColumns:[!C&&u,...M.filter(K=>!(!K.visible||K.visible(v))).map(K=>K.id).filter(i.fQ)].filter(i.fQ)}},s.useSortBy,s.useExpanded);return I.forEach(F),l.createElement("table",{...B(),className:(0,t.cx)(D.table,x)},l.createElement("thead",null,A.map(K=>{const{key:W,...U}=K.getHeaderGroupProps();return l.createElement("tr",{key:W,...U},K.headers.map(N=>{const{key:S,...Y}=N.getHeaderProps();return l.createElement("th",{key:S,className:(0,t.cx)(D.header,{[D.disableGrow]:N.width===0,[D.sortableHeader]:N.canSort}),...Y,...N.isSorted&&{"aria-sort":N.isSortedDesc?"descending":"ascending"}},l.createElement(a,{column:N}))}))})),l.createElement("tbody",{...w()},I.map((K,W)=>{const U=(0,t.cx)(W%2===0&&D.evenRow),{key:N,...S}=K.getRowProps(),Y=R(K);return l.createElement(l.Fragment,{key:N},l.createElement("tr",{className:U,...S},K.cells.map(Q=>{const{key:z,...G}=Q.getCellProps();return l.createElement("td",{key:z,...G},Q.render("Cell",{__rowID:Y}))})),K.isExpanded&&C&&l.createElement("tr",{className:U,...S,id:Y},l.createElement("td",{colSpan:K.cells.length},C(K.original))))})))}const E=()=>(0,l.useMemo)(()=>(0,n.uniqueId)("InteractiveTable"),[]),h=v=>({sortIcon:t.css`
    position: absolute;
    top: ${v.spacing(1)};
  `});function a({column:{canSort:v,render:x,isSorted:y,isSortedDesc:C,getSortByToggleProps:P}}){const D=(0,f.wW)(h),{onClick:M}=P(),b=l.createElement(l.Fragment,null,x("Header"),y&&l.createElement("span",{"aria-hidden":"true",className:D.sortIcon},l.createElement(c.J,{name:C?"angle-down":"angle-up"})));return v?l.createElement("button",{type:"button",onClick:M},b):b}},16065:(Z,O,e)=>{"use strict";e.d(O,{g:()=>l});var t=e(68404),n=e(73892);class l extends t.PureComponent{constructor(){super(...arguments),this.wrapperRef=(0,t.createRef)(),this.renderJson=()=>{const{json:i,config:f,open:c,onDidRender:o}=this.props,m=this.wrapperRef.current,r=new n.u(i,c,f);m.hasChildNodes()?m.replaceChild(r.render(),m.lastChild):m.appendChild(r.render()),o&&o(r.json)}}componentDidMount(){this.renderJson()}componentDidUpdate(){this.renderJson()}render(){const{className:i}=this.props;return t.createElement("div",{className:i,ref:this.wrapperRef})}}l.defaultProps={open:3,config:{animateOpen:!0}}},73892:(Z,O,e)=>{"use strict";e.d(O,{u:()=>a});var t=e(82897);function n(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function l(v){return!!v&&typeof v==="object"}function s(v){if(v===void 0)return"";if(v===null||typeof v=="object"&&!v.constructor)return"Object";const y=/function ([^(]*)/.exec(v.constructor.toString());return y&&y.length>1?y[1]:""}function i(v){return v===null?"null":typeof v}function f(v,x){const y=i(v);return y==="null"||y==="undefined"?y:(y==="string"&&(x='"'+n(x)+'"'),y==="function"?v.toString().replace(/[\r\n]/g,"").replace(/\{.*\}/,"")+"{\u2026}":x)}let c="";function o(v){return l(v)?(c=s(v),Array.isArray(v)&&(c+="["+v.length+"]")):c=f(v,v.toString()),c}function m(v){return`json-formatter-${v}`}function r(v,x,y){const C=document.createElement(v);return x&&C.classList.add(m(x)),y!==void 0&&(y instanceof Node?C.appendChild(y):C.appendChild(document.createTextNode(String(y)))),C}const u=/(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/,d=/\d{2}:\d{2}:\d{2} GMT-\d{4}/,g=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/,p=10,E=typeof window<"u"&&window.requestAnimationFrame||(v=>(v(),0)),h={animateOpen:!0,animateClose:!0};class a{constructor(x,y=1,C=h,P){this.json=x,this.open=y,this.config=C,this.key=P,this._isOpen=null,this.element=null,this.skipChildren=!1}get isOpen(){return this._isOpen!==null?this._isOpen:this.open>0}set isOpen(x){this._isOpen=x}get isDate(){return this.type==="string"&&(u.test(this.json)||g.test(this.json)||d.test(this.json))}get isUrl(){return this.type==="string"&&this.json.indexOf("http")===0}get isArray(){return Array.isArray(this.json)}get isObject(){return l(this.json)}get isEmptyObject(){return!this.keys.length&&!this.isArray}get isEmpty(){return this.isEmptyObject||this.keys&&!this.keys.length&&this.isArray}get hasKey(){return typeof this.key<"u"}get constructorName(){return s(this.json)}get type(){return i(this.json)}get keys(){return this.isObject?Object.keys(this.json).map(x=>x||'""'):[]}toggleOpen(){this.isOpen=!this.isOpen,this.element&&(this.isOpen?this.appendChildren(this.config.animateOpen):this.removeChildren(this.config.animateClose),this.element.classList.toggle(m("open")))}openAtDepth(x=1){x<0||(this.open=x,this.isOpen=x!==0,this.element&&(this.removeChildren(!1),x===0?this.element.classList.remove(m("open")):(this.appendChildren(this.config.animateOpen),this.element.classList.add(m("open")))))}isNumberArray(){return this.json.length>0&&this.json.length<4&&((0,t.isNumber)(this.json[0])||(0,t.isNumber)(this.json[1]))}renderArray(){const x=r("span");return x.appendChild(r("span","bracket","[")),this.isNumberArray()?(this.json.forEach((y,C)=>{C>0&&x.appendChild(r("span","array-comma",",")),x.appendChild(r("span","number",y))}),this.skipChildren=!0):x.appendChild(r("span","number",this.json.length)),x.appendChild(r("span","bracket","]")),x}render(x=!1){this.element=r("div","row");const y=r("a","toggler-link"),C=r("span","toggler");if(this.isObject&&y.appendChild(C),this.hasKey&&y.appendChild(r("span","key",`${this.key}:`)),this.isObject){const D=r("span","value"),M=r("span"),b=r("span","constructor-name",this.constructorName);if(M.appendChild(b),this.isArray){const R=this.renderArray();M.appendChild(R)}D.appendChild(M),y.appendChild(D)}else{const D=this.isUrl?r("a"):r("span");D.classList.add(m(this.type)),this.isDate&&D.classList.add(m("date")),this.isUrl&&(D.classList.add(m("url")),D.setAttribute("href",this.json));const M=f(this.json,this.json);D.appendChild(document.createTextNode(M)),y.appendChild(D)}const P=r("div","children");return this.isObject&&P.classList.add(m("object")),this.isArray&&P.classList.add(m("array")),this.isEmpty&&P.classList.add(m("empty")),this.config&&this.config.theme&&this.element.classList.add(m(this.config.theme)),this.isOpen&&this.element.classList.add(m("open")),x||this.element.appendChild(y),this.skipChildren?y.removeChild(C):this.element.appendChild(P),this.isObject&&this.isOpen&&this.appendChildren(),this.isObject&&y.addEventListener("click",this.toggleOpen.bind(this)),this.element}appendChildren(x=!1){const y=this.element&&this.element.querySelector(`div.${m("children")}`);if(!(!y||this.isEmpty))if(x){let C=0;const P=()=>{const D=this.keys[C],M=new a(this.json[D],this.open-1,this.config,D);y.appendChild(M.render()),C+=1,C<this.keys.length&&(C>p?P():E(P))};E(P)}else this.keys.forEach(C=>{const P=new a(this.json[C],this.open-1,this.config,C);y.appendChild(P.render())})}removeChildren(x=!1){const y=this.element&&this.element.querySelector(`div.${m("children")}`);if(x){let C=0;const P=()=>{y&&y.children.length&&(y.removeChild(y.children[0]),C+=1,C>p?P():E(P))};E(P)}else y&&(y.innerHTML="")}}},52081:(Z,O,e)=>{"use strict";e.d(O,{Ar:()=>i,Lh:()=>f,W2:()=>o,wc:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=(d=>(d[d.Horizontal=0]="Horizontal",d[d.Vertical=1]="Vertical",d))(s||{});const i=({children:d,orientation:g=0,spacing:p="sm",justify:E="flex-start",align:h="normal",wrap:a=!1,width:v="100%",height:x="100%",...y})=>{const C=(0,l.wW)((0,n.useCallback)(P=>m(P,g,p,E,h,a),[h,E,g,p,a]));return n.createElement("div",{className:C.layout,style:{width:v,height:x},...y},n.Children.toArray(d).filter(Boolean).map((P,D)=>n.createElement("div",{className:C.childWrapper,key:D},P)))},f=({children:d,spacing:g,justify:p,align:E="center",wrap:h,width:a,height:v})=>n.createElement(i,{spacing:g,justify:p,orientation:0,align:E,width:a,height:v,wrap:h},d),c=({children:d,spacing:g,justify:p,align:E,width:h,height:a})=>n.createElement(i,{spacing:g,justify:p,orientation:1,align:E,width:h,height:a},d),o=({children:d,padding:g,margin:p,grow:E,shrink:h})=>{const a=(0,l.wW)((0,n.useCallback)(v=>u(v,g,p),[g,p]));return n.createElement("div",{className:(0,t.cx)(a.wrapper,E!==void 0&&t.css`
            flex-grow: ${E};
          `,h!==void 0&&t.css`
            flex-shrink: ${h};
          `)},d)},m=(d,g,p,E,h,a)=>{const v=p!=="none"?d.spacing(r[p]):0,x=g===0&&!a||g===1?0:`-${v}`,y=g===1?"vertical-group":"horizontal-group";return{layout:t.css`
      label: ${y};
      display: flex;
      flex-direction: ${g===1?"column":"row"};
      flex-wrap: ${a?"wrap":"nowrap"};
      justify-content: ${E};
      align-items: ${h};
      height: 100%;
      max-width: 100%;
      // compensate for last row margin when wrapped, horizontal layout
      margin-bottom: ${x};
    `,childWrapper:t.css`
      label: layoutChildrenWrapper;
      margin-bottom: ${g===0&&!a?0:v};
      margin-right: ${g===0?v:0};
      display: flex;
      align-items: ${h};

      &:last-child {
        margin-bottom: ${g===1&&0};
        margin-right: ${g===0&&0};
      }
    `}},r={none:0,xs:.5,sm:1,md:2,lg:3},u=(d,g,p)=>{const E=g&&g!=="none"&&d.spacing(r[g])||0,h=p&&p!=="none"&&d.spacing(r[p])||0;return{wrapper:t.css`
      label: container;
      margin: ${h};
      padding: ${E};
    `}}},29460:(Z,O,e)=>{"use strict";e.d(O,{r:()=>i});var t=e(68404),n=e(16144),l=e(83383),s=e(8928);const i=(0,t.forwardRef)(({href:f,children:c,...o},m)=>{const r=l.u.stripBaseFromUrl(s.QX.sanitizeUrl(f??""));return t.createElement(n.Link,{ref:m,to:r,...o},c)});i.displayName="Link"},398:(Z,O,e)=>{"use strict";e.d(O,{L:()=>i});var t=e(9892),n=e(68404),l=e(7804);const s=(0,l.B)((f=!1)=>({list:t.css`
    list-style-type: none;
    margin: 0;
    padding: 0;
  `,item:t.css`
    display: ${f&&"inline-block"||"block"};
  `}));class i extends n.PureComponent{constructor(c){super(c)}render(){const{items:c,renderItem:o,getItemKey:m,className:r,inline:u}=this.props,d=s(u);return n.createElement("ul",{className:(0,t.cx)(d.list,r)},c.map((g,p)=>n.createElement("li",{className:d.item,key:m?m(g):p},o(g,p))))}}},19882:(Z,O,e)=>{"use strict";e.d(O,{Y:()=>l});var t=e(68404),n=e(398);class l extends t.PureComponent{render(){return t.createElement(n.L,{inline:!0,...this.props})}}},56766:(Z,O,e)=>{"use strict";e.d(O,{a:()=>l});var t=e(68404),n=e(398);class l extends t.PureComponent{render(){return t.createElement(n.L,{...this.props})}}},74750:(Z,O,e)=>{"use strict";e.d(O,{F:()=>c});var t=e(9892),n=e(68404),l=e(72648);const s=2.4,i=500,f=4e3;function c({width:m,ariaLabel:r="Loading bar"}){const u=(0,l.wW)(o),d=Math.min(Math.max(Math.round(m*s),i),f),g={width:"100%",animation:`${u.animation} ${d}ms infinite linear`,willChange:"transform"};return n.createElement("div",{style:g},n.createElement("div",{"aria-label":r,className:u.bar}))}const o=()=>({animation:(0,t.keyframes)({"0%":{transform:"translateX(-50%)"},"100%":{transform:"translateX(100%)"}}),bar:(0,t.css)({width:"28%",height:1,background:"linear-gradient(90deg, rgba(110, 159, 255, 0) 0%, #6E9FFF 80.75%, rgba(110, 159, 255, 0) 100%)"})})},61744:(Z,O,e)=>{"use strict";e.d(O,{u:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(67487);const i=({text:c,className:o,...m})=>{const r=(0,l.wW)(f);return n.createElement("div",{className:(0,t.cx)(r.container,o),...m},c," ",n.createElement(s.$,{inline:!0}))},f=c=>({container:t.css`
      margin-bottom: ${c.spacing(4)};
    `})},58321:(Z,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(9892),n=e(68404),l=e(72648);const s=["level","lvl","filename"],i=({labels:c})=>{const o=(0,l.wW)(f),m=Object.keys(c).filter(r=>!r.startsWith("_")&&!s.includes(r));return m.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},m.sort().map(r=>{const u=c[r];if(!u)return;const d=`${r}: ${u}`;return n.createElement("span",{key:r,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:d},u))}))},f=c=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${c.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: 0 2px;
      background-color: ${c.colors.background.secondary};
      border-radius: ${c.shape.borderRadius(1)};
      margin: 1px 4px 0 0;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: 20em;
      text-overflow: ellipsis;
      overflow: hidden;
    `})},12402:(Z,O,e)=>{"use strict";e.d(O,{Q:()=>m});var t=e(2525),n=e(68404),l=e(14677),s=e.n(l),i=e(33399),f=e(72648);function c(r,u){return u.split(/;\s*/).reduce((d,g)=>{if(g==="color:rgba(0,0,0,0.5)")return{color:r.colors.text.secondary};const p=g.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const E=p[1].replace(/-([a-z])/g,(h,a)=>a.toUpperCase());d[E]=p[2]}return d},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(u,d){return u.value===d.prevValue?null:{chunks:t.ZP.parse(u.value).spans.map(p=>p.css?{style:c(u.theme,p.css),text:p.text}:{text:p.text}),prevValue:u.value}}render(){const{chunks:u}=this.state;return u.map((d,g)=>{const p=this.props.highlight?.searchWords?n.createElement(s(),{key:g,textToHighlight:d.text,searchWords:this.props.highlight.searchWords,findChunks:i.Xt,highlightClassName:this.props.highlight.highlightClassName}):d.text;return d.style?n.createElement("span",{key:g,style:d.style,"data-testid":"ansiLogLine"},p):p})}}const m=(0,f.HE)(o);m.displayName="LogMessageAnsi"},63512:(Z,O,e)=>{"use strict";e.d(O,{w:()=>Se});var t=e(58635),n=e(68404),l=e(35864),s=e(40538),i=e(72648),f=e(9892),c=e(38849),o=e(85419),m=e(39904),r=e(6554),u=e(94599),d=e(89719),g=e(8180),p=e(7804);const E=Fe=>({logsStatsRow:f.css`
    label: logs-stats-row;
    margin: ${parseInt(Fe.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:f.css`
    label: logs-stats-row--active;
    color: ${Fe.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:f.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:f.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:f.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: 0.5em;
  `,logsStatsRowPercent:f.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: 0.5em;
    width: 3em;
  `,logsStatsRowBar:f.css`
    label: logs-stats-row__bar;
    height: 4px;
    overflow: hidden;
    background: ${Fe.colors.text.disabled};
  `,logsStatsRowInnerBar:f.css`
    label: logs-stats-row__innerbar;
    height: 4px;
    overflow: hidden;
    background: ${Fe.colors.primary.main};
  `}),h=({active:Fe,count:Xe,proportion:Qe,value:ct})=>{const ht=(0,i.wW)(E),ft=`${Math.round(Qe*100)}%`,Re={width:ft},nt=Fe?(0,f.cx)([ht.logsStatsRow,ht.logsStatsRowActive]):(0,f.cx)([ht.logsStatsRow]);return n.createElement("div",{className:nt},n.createElement("div",{className:(0,f.cx)([ht.logsStatsRowLabel])},n.createElement("div",{className:(0,f.cx)([ht.logsStatsRowValue]),title:ct},ct),n.createElement("div",{className:(0,f.cx)([ht.logsStatsRowCount])},Xe),n.createElement("div",{className:(0,f.cx)([ht.logsStatsRowPercent])},ft)),n.createElement("div",{className:(0,f.cx)([ht.logsStatsRowBar])},n.createElement("div",{className:(0,f.cx)([ht.logsStatsRowInnerBar]),style:Re})))};h.displayName="LogLabelStatsRow";const a=5,v=(0,p.B)(Fe=>({logsStats:f.css`
      label: logs-stats;
      background: inherit;
      color: ${Fe.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:f.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${Fe.colors.border.medium};
      display: flex;
    `,logsStatsTitle:f.css`
      label: logs-stats__title;
      font-weight: ${Fe.typography.fontWeightMedium};
      padding-right: ${Fe.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:f.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:f.css`
      label: logs-stats__body;
      padding: 5px 0;
    `}));class x extends n.PureComponent{render(){const{label:Xe,rowCount:Qe,stats:ct,value:ht,theme:ft,isLabel:Re}=this.props,nt=v(ft),le=ct.slice(0,a);let Pe=le.find(he=>he.value===ht),Oe=ct.slice(a);const Le=!Pe;Le&&(Pe=Oe.find(he=>he.value===ht),Oe=Oe.filter(he=>he.value!==ht));const Ye=Oe.reduce((he,De)=>he+De.count,0),Te=le.reduce((he,De)=>he+De.count,0)+Ye,me=Ye/Te;return n.createElement("div",{className:nt.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:nt.logsStatsHeader},n.createElement("div",{className:nt.logsStatsTitle},Xe,": ",Te," of ",Qe," rows have that ",Re?"label":"field")),n.createElement("div",{className:nt.logsStatsBody},le.map(he=>n.createElement(h,{key:he.value,...he,active:he.value===ht})),Le&&Pe&&n.createElement(h,{key:Pe.value,...Pe,active:!0}),Ye>0&&n.createElement(h,{key:"__OTHERS__",count:Ye,value:"Other",proportion:me})))}}const y=(0,i.HE)(x);y.displayName="LogLabelStats";var C=e(98736);const P=Fe=>({noHoverBackground:f.css`
      label: noHoverBackground;
      :hover {
        background-color: transparent;
      }
    `,hoverCursor:f.css`
      label: hoverCursor;
      cursor: pointer;
    `,wordBreakAll:f.css`
      label: wordBreakAll;
      word-break: break-all;
    `,showingField:f.css`
      color: ${Fe.colors.primary.text};
    `,hoverValueCopy:f.css`
      margin: ${Fe.spacing(0,0,0,1.2)};
      position: absolute;
      top: 0px;
      justify-content: center;
      border-radius: ${Fe.shape.radius.circle};
      width: 26px;
      height: 26px;
    `,wrapLine:f.css`
      label: wrapLine;
      white-space: pre-wrap;
    `});class D extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null,mouseOver:!1},this.showField=()=>{const{onClickShowDetectedField:Xe,parsedKey:Qe}=this.props;Xe&&Xe(Qe)},this.hideField=()=>{const{onClickHideDetectedField:Xe,parsedKey:Qe}=this.props;Xe&&Xe(Qe)},this.filterLabel=()=>{const{onClickFilterLabel:Xe,parsedKey:Qe,parsedValue:ct}=this.props;Xe&&Xe(Qe,ct)},this.filterOutLabel=()=>{const{onClickFilterOutLabel:Xe,parsedKey:Qe,parsedValue:ct}=this.props;Xe&&Xe(Qe,ct)},this.showStats=()=>{const{showFieldsStats:Xe}=this.state;if(!Xe){const Qe=this.props.getStats(),ct=Qe?Qe.reduce((ht,ft)=>ht+ft.count,0):0;this.setState({fieldStats:Qe,fieldCount:ct})}this.toggleFieldsStats()}}toggleFieldsStats(){this.setState(Xe=>({showFieldsStats:!Xe.showFieldsStats}))}hoverValueCopy(){const Xe=!this.state.mouseOver;this.setState({mouseOver:Xe})}render(){const{theme:Xe,parsedKey:Qe,parsedValue:ct,isLabel:ht,links:ft,showDetectedFields:Re,wrapLogMessage:nt,onClickShowDetectedField:le,onClickHideDetectedField:Pe,onClickFilterLabel:Oe,onClickFilterOutLabel:Le}=this.props,{showFieldsStats:Ye,fieldStats:be,fieldCount:Te,mouseOver:me}=this.state,he=P(Xe),De=(0,C.h)(Xe),$e=le&&Pe,ke=Oe&&Le,tt=!ht&&Re&&Re.includes(Qe)?n.createElement(g.h,{name:"eye",className:he.showingField,title:"Hide this field",onClick:this.hideField}):n.createElement(g.h,{name:"eye",title:"Show this field instead of the message",onClick:this.showField});return n.createElement("tr",{className:(0,f.cx)(De.logDetailsValue,{[he.noHoverBackground]:Ye})},n.createElement("td",{className:De.logsDetailsIcon},n.createElement(g.h,{name:"signal",title:"Ad-hoc statistics",onClick:this.showStats})),ke&&ht&&n.createElement(n.Fragment,null,n.createElement("td",{className:De.logsDetailsIcon},n.createElement(g.h,{name:"search-plus",title:"Filter for value",onClick:this.filterLabel})),n.createElement("td",{className:De.logsDetailsIcon},n.createElement(g.h,{name:"search-minus",title:"Filter out value",onClick:this.filterOutLabel}))),$e&&!ht&&n.createElement("td",{className:De.logsDetailsIcon,colSpan:2},tt),n.createElement("td",{className:De.logDetailsLabel},Qe),n.createElement("td",{className:(0,f.cx)(he.wordBreakAll,nt&&he.wrapLine),onMouseEnter:this.hoverValueCopy.bind(this),onMouseLeave:this.hoverValueCopy.bind(this)},ct,me&&n.createElement(u.m,{getText:()=>ct,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"sm",className:he.hoverValueCopy}),ft?.map(Ge=>n.createElement("span",{key:Ge.title},"\xA0",n.createElement(d.k,{link:Ge}))),Ye&&n.createElement(y,{stats:be,label:Qe,value:ct,rowCount:Te,isLabel:ht})))}}const M=(0,i.HE)(D);M.displayName="LogDetailsRow";var b=e(14582),R=e(14677),B=e.n(R),w=e(28550),A=e(33399),I=e(12402),F=e(8928),K=e(45253),W=e(94437),U=e(68226),N=e(56766);const S=(Fe,Xe)=>{const Qe=Xe?f.css`
        top: -250px;
      `:f.css`
        margin-top: -250px;
        width: 75%;
      `,ct=Xe?f.css`
        top: 100%;
      `:f.css`
        margin-top: 40px;
        width: 75%;
      `;return{commonStyles:f.css`
      position: absolute;
      height: 250px;
      z-index: ${Fe.zIndex.dropdown};
      overflow: hidden;
      background: ${Fe.colors.background.primary};
      box-shadow: 0 0 10px ${Fe.v1.palette.black};
      border: 1px solid ${Fe.colors.background.secondary};
      border-radius: ${Fe.shape.borderRadius()};
      width: 100%;
    `,header:f.css`
      height: 30px;
      padding: 0 10px;
      display: flex;
      align-items: center;
      background: ${Fe.colors.background.secondary};
    `,logs:f.css`
      height: 220px;
      padding: 10px;
    `,afterContext:Qe,beforeContext:ct}},Y=({row:Fe,rows:Xe,onLoadMoreContext:Qe,canLoadMoreRows:ct})=>{const{header:ht}=(0,i.wW)(S);return n.createElement("div",{className:ht},n.createElement("span",{className:f.css`
          opacity: 0.6;
        `},"Found ",Xe.length," rows."),(Xe.length>=10||Xe.length>10&&Xe.length%10!==0)&&ct&&n.createElement("span",{className:f.css`
            margin-left: 10px;
            &:hover {
              text-decoration: underline;
              cursor: pointer;
            }
          `,onClick:Qe},"Load 10 more"))},Q=({row:Fe,rows:Xe,error:Qe,className:ct,shouldScrollToBottom:ht,canLoadMoreRows:ft,onLoadMoreContext:Re})=>{const{commonStyles:nt,logs:le}=(0,i.wW)(S),[Pe,Oe]=(0,n.useState)(0),Le=(0,n.useRef)(null);(0,n.useLayoutEffect)(()=>{const be=Xe.length>0&&Xe.length<=10;ht&&be&&Le.current&&Oe(Le.current.offsetHeight)},[ht,Xe]);const Ye={row:Fe,rows:Xe,onLoadMoreContext:Re,canLoadMoreRows:ft};return n.createElement("div",{className:(0,f.cx)(nt,ct)},ht&&!Qe&&n.createElement(Y,{...Ye}),n.createElement("div",{className:le},n.createElement(U.$,{autoHide:!0,scrollTop:Pe,autoHeightMin:"210px"},n.createElement("div",{ref:Le},!Qe&&n.createElement(N.a,{items:Xe,renderItem:be=>n.createElement("div",{className:f.css`
                        padding: 5px 0;
                      `},typeof be=="string"&&F.QX.hasAnsiCodes(be)?n.createElement(I.Q,{value:be}):be)}),Qe&&n.createElement(K.b,{title:Qe})))),!ht&&!Qe&&n.createElement(Y,{...Ye}))},z=({row:Fe,context:Xe,errors:Qe,onOutsideClick:ct,onLoadMoreContext:ht,hasMoreContextRows:ft,wrapLogMessage:Re})=>{(0,n.useEffect)(()=>{const Pe=Oe=>{Oe.keyCode===27&&ct()};return document.addEventListener("keydown",Pe,!1),()=>{document.removeEventListener("keydown",Pe,!1)}},[ct]);const{afterContext:nt,beforeContext:le}=(0,i.wW)(Pe=>S(Pe,Re));return n.createElement(W.L,{onClick:ct},n.createElement("div",{onClick:Pe=>Pe.stopPropagation()},Xe.after&&n.createElement(Q,{rows:Xe.after,error:Qe&&Qe.after,row:Fe,className:nt,shouldScrollToBottom:!0,canLoadMoreRows:ft?ft.after:!1,onLoadMoreContext:ht}),Xe.before&&n.createElement(Q,{onLoadMoreContext:ht,canLoadMoreRows:ft?ft.before:!1,row:Fe,rows:Xe.before,error:Qe&&Qe.before,className:le})))},G=1e5,k=Fe=>{const Xe=(0,w.Z)(Fe.components.dashboard.background).setAlpha(.7).toRgbString();return{positionRelative:f.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:f.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${Xe};
    `,horizontalScroll:f.css`
      label: verticalScroll;
      white-space: pre;
    `,contextNewline:f.css`
      display: block;
      margin-left: 0px;
    `,contextButton:f.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      right: -8px;
      top: 0;
      bottom: auto;
      width: 80px;
      height: 36px;
      background: ${Fe.colors.background.primary};
      box-shadow: ${Fe.shadows.z3};
      padding: ${Fe.spacing(0,0,0,.5)};
      z-index: 100;
    `}};function j(Fe,Xe,Qe,ct){const ht=Qe&&Qe.length>0&&Qe[0]&&Qe[0].length>0&&Xe.length<G,ft=Qe??[];if(Fe){const Re=ht?{searchWords:ft,highlightClassName:ct}:void 0;return n.createElement(I.Q,{value:Xe,highlight:Re})}else return ht?n.createElement(B(),{textToHighlight:Xe,searchWords:ft,findChunks:A.Xt,highlightClassName:ct}):Xe}const de=(0,t.Z)((Fe,Xe)=>{if(Xe)try{return JSON.stringify(JSON.parse(Fe),void 0,2)}catch{return Fe}return Fe});class ge extends n.PureComponent{constructor(){super(...arguments),this.onContextToggle=Xe=>{Xe.stopPropagation(),this.props.onToggleContext()}}render(){const{row:Xe,theme:Qe,errors:ct,hasMoreContextRows:ht,updateLimit:ft,context:Re,contextIsOpen:nt,showContextToggle:le,wrapLogMessage:Pe,prettifyLogMessage:Oe,onToggleContext:Le}=this.props,Ye=(0,C.h)(Qe,Xe.logLevel),{hasAnsi:be,raw:Te}=Xe,me=de(Te,Oe),he=k(Qe);return n.createElement("td",{style:nt?{position:"unset"}:void 0,className:Ye.logsRowMessage},n.createElement("div",{className:(0,f.cx)({[he.positionRelative]:Pe},{[he.horizontalScroll]:!Pe})},nt&&Re&&n.createElement(z,{row:Xe,context:Re,errors:ct,wrapLogMessage:Pe,hasMoreContextRows:ht,onOutsideClick:Le,onLoadMoreContext:()=>{ft&&ft()}}),n.createElement("span",{className:(0,f.cx)(he.positionRelative,{[he.rowWithContext]:nt})},j(be,me,Xe.searchWords,Ye.logsRowMatchHighLight)),!nt&&le?.(Xe)&&n.createElement("span",{className:(0,f.cx)("log-row-context",Ye.context,he.contextButton),onClick:De=>De.stopPropagation()},n.createElement(r.u,{placement:"top",content:"Show context"},n.createElement(g.h,{size:"md",name:"gf-show-context",onClick:this.onContextToggle})),n.createElement(r.u,{placement:"top",content:"Copy"},n.createElement(g.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(JSON.stringify(me))})))))}}const re=(0,i.HE)(ge);re.displayName="LogRowMessage";const ce=(0,t.Z)(l.MT),ie=(0,t.Z)((Fe,Xe)=>{const Qe=fe(Fe.entry),ht=[...Ce(Fe,Xe),...Qe].reduce((Re,nt)=>{const le=nt.value.replace(/(^")|("$)/g,""),Pe=`${nt.key}=${le}`;return Re[Pe]?Re[Pe].links=[...Re[Pe].links||[],...nt.links||[]]:Re[Pe]=nt,Re},{}),ft=Object.values(ht);return ft.sort(ee),ft}),fe=(0,t.Z)(Fe=>{if(Fe.length>G)return[];const Xe=ce(Fe);return Xe?Xe.getFields(Fe).map(ht=>{const ft=Xe.getLabelFromField(ht),Re=Xe.getValueFromField(ht);return{key:ft,value:Re}}):[]}),Ce=(0,t.Z)((Fe,Xe)=>Fe.dataFrame.fields.map((Qe,ct)=>({...Qe,index:ct})).filter((Qe,ct)=>!ne(Qe,ct,Fe)).map(Qe=>{const ct=Xe?Xe(Qe,Fe.rowIndex):[];return{key:Qe.name,value:Qe.values.get(Fe.rowIndex).toString(),links:ct,fieldIndex:Qe.index}}));function ee(Fe,Xe){return Fe.links?.length&&!Xe.links?.length?-1:!Fe.links?.length&&Xe.links?.length||Fe.key>Xe.key?1:Fe.key<Xe.key?-1:0}function ne(Fe,Xe,Qe){return!!(Fe.name==="labels"&&Fe.type===b.fS.other||Fe.name==="id"||Qe.entryFieldIndex===Xe||Fe.config.custom?.hidden||Fe.values.get(Qe.rowIndex)==null)}const X=Fe=>({logsRowLevelDetails:f.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:f.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${Fe.colors.background.primary};
      }
    `});class te extends n.PureComponent{constructor(){super(...arguments),this.getParser=(0,t.Z)(l.MT),this.getStatsForDetectedField=Xe=>{const Qe=this.getParser(this.props.row.entry).buildMatcher(Xe);return(0,l.zd)(this.props.getRows(),Qe)}}render(){const{row:Xe,theme:Qe,hasError:ct,onClickFilterOutLabel:ht,onClickFilterLabel:ft,getRows:Re,showDuplicates:nt,className:le,onClickShowDetectedField:Pe,onClickHideDetectedField:Oe,showDetectedFields:Le,getFieldLinks:Ye,wrapLogMessage:be}=this.props,Te=(0,C.h)(Qe,Xe.logLevel),me=X(Qe),he=Xe.labels?Xe.labels:{},De=Object.keys(he).length>0,$e=ie(Xe,Ye),ke=$e&&$e.length>0,tt=(0,f.cx)(!ct&&[Te.logsRowLevel,me.logsRowLevelDetails]);return n.createElement("tr",{className:(0,f.cx)(le,me.logDetails)},nt&&n.createElement("td",null),n.createElement("td",{className:tt,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:Te.logDetailsContainer},n.createElement("table",{className:Te.logDetailsTable},n.createElement("tbody",null,De&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:Te.logDetailsHeading,"aria-label":"Log labels"},"Log labels")),Object.keys(he).sort().map(Ge=>{const dt=he[Ge];return n.createElement(M,{key:`${Ge}=${dt}`,parsedKey:Ge,parsedValue:dt,isLabel:!0,getStats:()=>(0,l.lL)(Re(),Ge),onClickFilterOutLabel:ht,onClickFilterLabel:ft})}),ke&&n.createElement("tr",null,n.createElement("td",{colSpan:5,className:Te.logDetailsHeading,"aria-label":"Detected fields"},"Detected fields",n.createElement(r.u,{content:"Fields that are parsed from log message and detected by Grafana."},n.createElement(m.J,{name:"question-circle",size:"xs",className:f.css`
                            margin-left: 4px;
                          `})))),$e.sort().map(Ge=>{const{key:dt,value:pt,links:Ke,fieldIndex:je}=Ge;return n.createElement(M,{key:`${dt}=${pt}`,parsedKey:dt,parsedValue:pt,links:Ke,onClickShowDetectedField:Pe,onClickHideDetectedField:Oe,getStats:()=>je===void 0?this.getStatsForDetectedField(dt):(0,l.i6)(Xe.dataFrame.fields[je].values.toArray()),showDetectedFields:Le,wrapLogMessage:be})}),!ke&&!De&&n.createElement("tr",null,n.createElement("td",{colSpan:5,"aria-label":"No details"},"No details available")))))))}}const ae=(0,i.HE)(te);ae.displayName="LogDetails";var _=e(58321),ve=e(50700),Ve=e(16911),it=e(71895);const rt=async(Fe,Xe,Qe,ct)=>{const ht=[Fe(Xe,{limit:Qe}),Fe(Xe,{limit:Qe+1,direction:"FORWARD"})],ft=await Promise.all(ht.map(le=>le.catch(Pe=>Pe))),Re=ft.map(le=>{const Pe=le;if(!Pe.data)return[];const Oe=[];for(let Le=0;Le<Pe.data.length;Le++){const Ye=(0,Ve.g0)(Pe.data[Le]),be=new it.N(Ye),Te=be.getFieldByName("ts"),me=be.getFieldByName("id");for(let he=0;he<Te.values.length;he++){if(me){if(me.values.get(he)===Xe.uid)continue}else if(parseInt(Te.values.get(he),10)===Xe.timeEpochMs)continue;const $e=Ye.fields.filter(ke=>ke.name==="line")[0].values.get(he);Oe.push($e)}}return ct===s.UV.Ascending?Oe.reverse():Oe}),nt=ft.map(le=>{const Pe=le;return Pe.message?Pe.message:""});return{data:ct===s.UV.Ascending?Re.reverse():Re,errors:ct===s.UV.Ascending?nt.reverse():nt}},pe=({getRowContext:Fe,row:Xe,children:Qe,logsSortOrder:ct})=>{const[ht,ft]=(0,n.useState)(10),[Re,nt]=(0,n.useState)(null),[le,Pe]=(0,n.useState)({before:!0,after:!0}),{value:Oe}=(0,ve.Z)(async()=>await rt(Fe,Xe,ht,ct),[ht]);return(0,n.useEffect)(()=>{Oe&&nt(Le=>{let Ye=!0,be=!0;if(Le){const Te=Le.data[0],me=Le.data[1],he=Oe.data[0],De=Oe.data[1];(!he||Te.length===he.length)&&(Ye=!1),(!De||me.length===De.length)&&(be=!1)}return Pe({before:Ye,after:be}),Oe})},[Oe]),Qe({result:{before:Re?Re.data[0]:[],after:Re?Re.data[1]:[]},errors:{before:Re?Re.errors[0]:void 0,after:Re?Re.errors[1]:void 0},hasMoreContextRows:le,updateLimit:()=>ft(ht+10),limit:ht})};class Ie extends n.PureComponent{render(){const{row:Xe,showDetectedFields:Qe,getFieldLinks:ct,wrapLogMessage:ht}=this.props,ft=ie(Xe,ct),Re=ht?"":f.css`
          white-space: nowrap;
        `,nt=Qe.map(le=>{const Pe=ft.find(Oe=>{const{key:Le}=Oe;return Le===le});return Pe?`${le}=${Pe.value}`:null}).filter(le=>le!==null).join(" ");return n.createElement("td",{className:Re},nt)}}const We=(0,i.HE)(Ie);We.displayName="LogRowMessageDetectedFields";const Je=Fe=>({topVerticalAlign:f.css`
      label: topVerticalAlign;
      margin-top: -${Fe.spacing(.9)};
      margin-left: -${Fe.spacing(.25)};
    `,detailsOpen:f.css`
      &:hover {
        background-color: ${o.hoverColor(Fe.colors.background.primary,Fe)};
      }
    `,errorLogRow:f.css`
      label: erroredLogRow;
      color: ${Fe.colors.text.secondary};
    `});class He extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=()=>{this.setState(Xe=>({showContext:!Xe.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&this.setState(Xe=>({showDetails:!Xe.showDetails}))}}renderTimeStamp(Xe){return(0,c.dq)(Xe,{timeZone:this.props.timeZone})}renderLogRow(Xe,Qe,ct,ht){const{getRows:ft,onClickFilterLabel:Re,onClickFilterOutLabel:nt,onClickShowDetectedField:le,onClickHideDetectedField:Pe,enableLogDetails:Oe,row:Le,showDuplicates:Ye,showContextToggle:be,showLabels:Te,showTime:me,showDetectedFields:he,wrapLogMessage:De,prettifyLogMessage:$e,theme:ke,getFieldLinks:tt,forceEscape:Ge,onLogRowHover:dt}=this.props,{showDetails:pt,showContext:Ke}=this.state,je=(0,C.h)(ke,Le.logLevel),ot=Je(ke),{errorMessage:at,hasError:xt}=(0,l.Mi)(Le),Dt=(0,f.cx)(je.logsRow,{[ot.errorLogRow]:xt}),wt=Le.hasUnescapedContent&&Ge?{...Le,entry:(0,l.l3)(Le.entry),raw:(0,l.l3)(Le.raw)}:Le;return n.createElement(n.Fragment,null,n.createElement("tr",{className:Dt,onClick:this.toggleDetails,onMouseEnter:()=>{dt&&dt(Le)},onMouseLeave:()=>{dt&&dt(void 0)}},Ye&&n.createElement("td",{className:je.logsRowDuplicates},wt.duplicates&&wt.duplicates>0?`${wt.duplicates+1}x`:null),n.createElement("td",{className:(0,f.cx)({[je.logsRowLevel]:!xt})},xt&&n.createElement(r.u,{content:`Error: ${at}`,placement:"right",theme:"error"},n.createElement(m.J,{className:je.logIconError,name:"exclamation-triangle",size:"xs"}))),Oe&&n.createElement("td",{title:pt?"Hide log details":"See log details",className:je.logsRowToggleDetails},n.createElement(m.J,{className:ot.topVerticalAlign,name:pt?"angle-down":"angle-right"})),me&&n.createElement("td",{className:je.logsRowLocalTime},this.renderTimeStamp(Le.timeEpochMs)),Te&&wt.uniqueLabels&&n.createElement("td",{className:je.logsRowLabels},n.createElement(_.j,{labels:wt.uniqueLabels})),he&&he.length>0?n.createElement(We,{row:wt,showDetectedFields:he,getFieldLinks:tt,wrapLogMessage:De}):n.createElement(re,{row:wt,getRows:ft,errors:Qe,hasMoreContextRows:ct,updateLimit:ht,context:Xe,contextIsOpen:Ke,showContextToggle:be,wrapLogMessage:De,prettifyLogMessage:$e,onToggleContext:this.toggleContext})),this.state.showDetails&&n.createElement(ae,{className:Dt,showDuplicates:Ye,getFieldLinks:tt,onClickFilterLabel:Re,onClickFilterOutLabel:nt,onClickShowDetectedField:le,onClickHideDetectedField:Pe,getRows:ft,row:wt,wrapLogMessage:De,hasError:xt,showDetectedFields:he}))}render(){const{showContext:Xe}=this.state,{logsSortOrder:Qe,row:ct,getRowContext:ht}=this.props;return Xe?n.createElement(n.Fragment,null,n.createElement(pe,{row:ct,getRowContext:ht,logsSortOrder:Qe},({result:ft,errors:Re,hasMoreContextRows:nt,updateLimit:le})=>n.createElement(n.Fragment,null,this.renderLogRow(ft,Re,nt,le)))):this.renderLogRow()}}const Ae=(0,i.HE)(He);Ae.displayName="LogRow";const et=100;class _e extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1},this.makeGetRows=(0,t.Z)(Xe=>()=>Xe),this.sortLogs=(0,t.Z)((Xe,Qe)=>(0,l.$u)(Xe,Qe))}componentDidMount(){const{logRows:Xe,previewLimit:Qe}=this.props,ht=(Xe?Xe.length:0)<=Qe*2;ht?this.setState({renderAll:ht}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:Xe,showContextToggle:Qe,showLabels:ct,showTime:ht,wrapLogMessage:ft,prettifyLogMessage:Re,logRows:nt,deduplicatedRows:le,timeZone:Pe,onClickFilterLabel:Oe,onClickFilterOutLabel:Le,theme:Ye,enableLogDetails:be,previewLimit:Te,getFieldLinks:me,logsSortOrder:he,showDetectedFields:De,onClickShowDetectedField:$e,onClickHideDetectedField:ke,forceEscape:tt,onLogRowHover:Ge}=this.props,{renderAll:dt}=this.state,{logsRowsTable:pt}=(0,C.h)(Ye),Ke=le||nt,je=nt&&nt.length>0,ot=Ke?Ke.reduce((Rn,St)=>St.duplicates?Rn+St.duplicates:Rn,0):0,at=Xe!==s.Y4.none&&ot>0,xt=Ke||[],Dt=he?this.sortLogs(xt,he):xt,wt=Dt.slice(0,Te),sn=Dt.slice(Te,Dt.length),mn=this.makeGetRows(Dt),Dn=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:pt},n.createElement("tbody",null,je&&wt.map((Rn,St)=>n.createElement(Ae,{key:Rn.uid,getRows:mn,getRowContext:Dn,row:Rn,showContextToggle:Qe,showDuplicates:at,showLabels:ct,showTime:ht,showDetectedFields:De,wrapLogMessage:ft,prettifyLogMessage:Re,timeZone:Pe,enableLogDetails:be,onClickFilterLabel:Oe,onClickFilterOutLabel:Le,onClickShowDetectedField:$e,onClickHideDetectedField:ke,getFieldLinks:me,logsSortOrder:he,forceEscape:tt,onLogRowHover:Ge})),je&&dt&&sn.map((Rn,St)=>n.createElement(Ae,{key:Rn.uid,getRows:mn,getRowContext:Dn,row:Rn,showContextToggle:Qe,showDuplicates:at,showLabels:ct,showTime:ht,showDetectedFields:De,wrapLogMessage:ft,prettifyLogMessage:Re,timeZone:Pe,enableLogDetails:be,onClickFilterLabel:Oe,onClickFilterOutLabel:Le,onClickShowDetectedField:$e,onClickHideDetectedField:ke,getFieldLinks:me,logsSortOrder:he,forceEscape:tt,onLogRowHover:Ge})),je&&!dt&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",Dt.length-Te," rows..."))))}}_e.defaultProps={previewLimit:et};const Se=(0,i.HE)(_e);Se.displayName="LogsRows"},98736:(Z,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(9892),n=e(90595),l=e(85419);const s=(i,f)=>{let c=i.isLight?i.v1.palette.gray5:i.v1.palette.gray2;const o=l.hoverColor(i.colors.background.secondary,i);switch(f){case n.in.crit:case n.in.critical:c="#705da0";break;case n.in.error:case n.in.err:c="#e24d42";break;case n.in.warning:case n.in.warn:c=i.colors.warning.main;break;case n.in.info:c="#7eb26d";break;case n.in.debug:c="#1f78c1";break;case n.in.trace:c="#6ed0e0";break}return{logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${i.components.textHighlight.text}
      background-color: ${i.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${i.typography.fontFamilyMonospace};
      font-size: ${i.typography.bodySmall.fontSize};
      width: 100%;
    `,context:t.css`
      label: context;
      visibility: hidden;
      white-space: nowrap;
      position: relative;
      margin-left: 10px;
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-context {
          visibility: visible;
          z-index: 1;
          text-decoration: underline;
          &:hover {
            color: ${i.colors.warning.main};
          }
        }
      }

      td:last-child {
        width: 100%;
      }

      > td {
        position: relative;
        padding-right: ${i.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }

      &:hover {
        background: ${o};
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logsRowLevel:t.css`
      label: logs-row__level;
      max-width: 10px;
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: 4px;
        background-color: ${c};
      }
    `,logIconError:t.css`
      color: ${i.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${i.colors.border.medium};
      padding: 0 ${i.spacing(1)} ${i.spacing(1)};
      border-radius: ${i.shape.radius.default};
      margin: 20px 8px 20px 16px;
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${i.v1.palette.gray3};
      padding-top: 6px;
      padding-left: 6px;
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${i.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${i.typography.fontWeightBold};
      padding: ${i.spacing(1)} 0 ${i.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${o};
      }
    `}}},15448:(Z,O,e)=>{"use strict";e.d(O,{b:()=>s});var t=e(68404),n=e(53217),l=e(80760);const s=({value:i,onChange:f,context:c,item:o})=>{const m=o.settings??{},r=(0,l.IX)(c.data,m?.filter),u=(0,l.nw)(r,i),d=(0,t.useCallback)(p=>{if(!(p&&!(0,l.w3)(p.value,r)))return f(p?.value)},[r,f]),g=u.find(p=>p.value===i);return t.createElement(t.Fragment,null,t.createElement(n.Ph,{value:g,placeholder:m.placeholderText??"Select field",options:u,onChange:d,noOptionsMessage:m.noFieldsMessage,width:m.width,isClearable:m.isClearable!==!1}))}},16453:(Z,O,e)=>{"use strict";e.d(O,{$w:()=>u,OL:()=>o});var t=e(68404),n=e(14582),l=e(85854),s=e(3249),i=e(50622),f=e(53217);const c=(0,t.memo)(d=>{const{data:g,options:p,onChange:E,id:h}=d,a=m(g),v=r(a,p),x=(0,t.useCallback)(C=>E(C.value),[E]),y=v.find(C=>C.value===p);return t.createElement(f.Ph,{inputId:h,value:y,options:v,onChange:x})});c.displayName="FieldTypeMatcherEditor";const o=[{value:n.fS.number,label:"Number",icon:(0,i.WZ)(n.fS.number)},{value:n.fS.string,label:"String",icon:(0,i.WZ)(n.fS.string)},{value:n.fS.time,label:"Time",icon:(0,i.WZ)(n.fS.time)},{value:n.fS.boolean,label:"Boolean",icon:(0,i.WZ)(n.fS.boolean)},{value:n.fS.trace,label:"Traces",icon:(0,i.WZ)(n.fS.trace)},{value:n.fS.enum,label:"Enum",icon:(0,i.WZ)(n.fS.enum)},{value:n.fS.other,label:"Other",icon:(0,i.WZ)(n.fS.other)}],m=d=>(0,t.useMemo)(()=>{const g=new Map;for(const p of o)g.set(p.value,0);for(const p of d)for(const E of p.fields){const h=E.type||n.fS.other;let a=g.get(h);a||(a=0),g.set(h,a+1)}return g},[d]),r=(d,g)=>(0,t.useMemo)(()=>{let p=!1;const E=[];for(const h of o){const a=d.get(h.value),v=g===h.value;(a||v)&&E.push({...h,label:`${h.label} (${d.get(h.value)})`}),v&&(p=!0)}return g&&!p&&E.push({value:g,label:`${g} (No matches)`}),E},[d,g]),u={id:l.mi.byType,component:c,matcher:s.Ls.get(l.mi.byType),name:"Fields with type",description:"Set properties for fields of a specific type (number, string, boolean)",optionsToLabel:d=>d}},92830:(Z,O,e)=>{"use strict";e.d(O,{J8:()=>r,fN:()=>p});var t=e(9892),n=e(68404),l=e(21760),s=e(85854),i=e(3249),f=e(40538),c=e(72648),o=e(46967),m=e(53217);const r=[{label:"==",value:f.Bd.EQ},{label:"!=",value:f.Bd.NEQ},{label:">",value:f.Bd.GT},{label:">=",value:f.Bd.GTE},{label:"<",value:f.Bd.LT},{label:"<=",value:f.Bd.LTE}];function u(E){return E===l.gz.allIsNull||E===l.gz.allIsZero}const d=({options:E,onChange:h})=>{const a=(0,c.wW)(g),v=(0,n.useMemo)(()=>l.TB.selectOptions([E?.reducer]),[E?.reducer]),x=(0,n.useCallback)(M=>h({...E,reducer:M.value}),[E,h]),y=(0,n.useCallback)(M=>h({...E,op:M.value}),[E,h]),C=(0,n.useCallback)(M=>{const b=M.currentTarget.valueAsNumber;return h({...E,value:b})},[E,h]),P=E??{},D=u(E.reducer);return n.createElement("div",{className:a.spot},n.createElement(m.Ph,{value:v.current,options:v.options,onChange:x,placeholder:"Select field reducer"}),P.reducer&&!D&&n.createElement(n.Fragment,null,n.createElement(m.Ph,{value:r.find(M=>M.value===P.op),options:r,onChange:y,"aria-label":"Comparison operator",width:19}),n.createElement(o.I,{type:"number",value:P.value,onChange:C})))},g=E=>({spot:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      gap: 4px;
    `}),p={id:s.mi.byValue,component:d,matcher:i.Ls.get(s.mi.byValue),name:"Fields with values",description:"Set properties for fields with reducer condition",optionsToLabel:E=>`${E?.reducer} ${E?.op} ${E?.value}`}},37676:(Z,O,e)=>{"use strict";e.d(O,{i:()=>y});var t=e(64140),n=e(68404),l=e(85854),s=e(3249),i=e(46967);const f=(0,n.memo)(C=>{const{options:P,onChange:D}=C,M=(0,n.useCallback)(b=>D(b.target.value),[D]);return n.createElement(i.I,{placeholder:"Enter regular expression",defaultValue:P,onBlur:M})});f.displayName="FieldNameByRegexMatcherEditor";const c={id:l.mi.byRegexp,component:f,matcher:s.Ls.get(l.mi.byRegexp),name:"Fields with name matching regex",description:"Set properties for fields with names matching a regex",optionsToLabel:C=>C};var o=e(53217),m=e(80760);const r=(0,n.memo)(C=>{const{data:P,options:D,onChange:M,id:b}=C,R=(0,m.IX)(P),B=(0,m.nw)(R,D),w=(0,n.useCallback)(I=>{if((0,m.w3)(I.value,R))return M(I.value)},[R,M]),A=B.find(I=>I.value===D);return n.createElement(o.Ph,{value:A,options:B,onChange:w,inputId:b})});r.displayName="FieldNameMatcherEditor";const u={id:l.mi.byName,component:r,matcher:s.Ls.get(l.mi.byName),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:C=>C},d=(0,n.memo)(C=>{const{data:P,options:D,onChange:M}=C,{readOnly:b,prefix:R}=D,B=(0,m.IX)(P),w=(0,m.nw)(B,void 0),A=(0,n.useCallback)(I=>{if(Array.isArray(I))return M({...D,names:I.reduce((F,K)=>((0,m.w3)(K.value,B)&&F.push(K.value),F),[])})},[B,M,D]);if(b){const I=(D.names??[]).join(", ");return n.createElement(i.I,{value:I,readOnly:!0,disabled:!0,prefix:R})}return n.createElement(o.NU,{value:D.names,options:w,onChange:A})});d.displayName="FieldNameMatcherEditor";const g={id:l.mi.byNames,component:d,matcher:s.Ls.get(l.mi.byNames),name:"Fields with name",description:"Set properties for a specific field",optionsToLabel:C=>(C.names??[]).join(", "),excludeFromPicker:!0};var p=e(16453),E=e(92830);const h=(0,n.memo)(C=>{const{data:P,options:D,onChange:M}=C,b=v(P),R=x(b),B=(0,n.useCallback)(A=>{if(!(!A.value||!b.has(A.value)))return M(A.value)},[b,M]),w=R.find(A=>A.value===D);return n.createElement(o.Ph,{value:w,options:R,onChange:B})});h.displayName="FieldsByFrameRefIdMatcher";const a={id:l.mi.byFrameRefID,component:h,matcher:s.Ls.get(l.mi.byFrameRefID),name:"Fields returned by query",description:"Set properties for fields from a specific query",optionsToLabel:C=>C},v=C=>(0,n.useMemo)(()=>{const P=new Set;for(const D of C)D.refId&&P.add(D.refId);return P},[C]),x=C=>(0,n.useMemo)(()=>Array.from(C).map(P=>({value:P,label:P})),[C]),y=new t.B(()=>[u,c,p.$w,a,g,E.fN])},80760:(Z,O,e)=>{"use strict";e.d(O,{IX:()=>f,nw:()=>c,w3:()=>s});var t=e(68404),n=e(89890),l=e(50622);function s(o,m){return o?m.display.has(o)||m.raw.has(o):!1}function i(o,m){const r={display:new Set,raw:new Set,fields:new Map};for(const u of o)for(const d of u.fields){if(m&&!m(d))continue;const g=(0,n.C)(d,u,o);r.display.add(g),r.fields.set(g,d),d.name&&g!==d.name&&(r.raw.add(d.name),r.fields.set(d.name,d))}return r}function f(o,m){return(0,t.useMemo)(()=>i(o,m),[o,m])}function c(o,m,r,u){return(0,t.useMemo)(()=>{let d=!1;const g=[];r&&g.push(r);for(const p of o.display){!d&&p===m&&(d=!0);const E=o.fields.get(p);(!u||u===E?.type)&&g.push({value:p,label:p,icon:E?(0,l.e7)(E):void 0})}for(const p of o.raw)o.display.has(p)||(!d&&p===m&&(d=!0),g.push({value:p,label:`${p} (base field name)`}));return m&&!d&&g.push({value:m,label:`${m} (not found)`}),g},[o,m,r,u])}},38484:(Z,O,e)=>{"use strict";e.d(O,{v:()=>r});var t=e(9892),n=e(68404),l=e(72648);function s(){const d=(0,l.wW)(i);return n.createElement("div",{className:d.divider})}const i=d=>({divider:(0,t.css)({height:1,backgroundColor:d.colors.border.weak,margin:d.spacing(.5,0)})});var f=e(14391),c=e(42044),o=e(69914);const m=n.forwardRef(({header:d,children:g,ariaLabel:p,onOpen:E,onClose:h,onKeyDown:a,...v},x)=>{const y=(0,l.wW)(u),C=(0,n.useRef)(null);(0,n.useImperativeHandle)(x,()=>C.current);const[P]=(0,o.d)({localRef:C,onOpen:E,onClose:h,onKeyDown:a});return n.createElement("div",{...v,tabIndex:-1,ref:C,className:y.wrapper,role:"menu","aria-label":p,onKeyDown:P},d&&n.createElement("div",{className:(0,t.cx)(y.header,Boolean(g)&&n.Children.toArray(g).length>0&&y.headerBorder)},d),g)});m.displayName="Menu";const r=Object.assign(m,{Item:c.s,Divider:s,Group:f.k}),u=d=>({header:(0,t.css)({padding:`${d.spacing(.5,1,1,1)}`}),headerBorder:(0,t.css)({borderBottom:`1px solid ${d.colors.border.weak}`}),wrapper:(0,t.css)({background:`${d.colors.background.primary}`,boxShadow:`${d.shadows.z3}`,display:"inline-block",borderRadius:`${d.shape.borderRadius()}`,padding:`${d.spacing(.5,0)}`})})},14391:(Z,O,e)=>{"use strict";e.d(O,{k:()=>f});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(72648);const f=({label:o,ariaLabel:m,children:r})=>{const u=(0,i.wW)(c),d=`group-label-${(0,n.uniqueId)()}`;return s.createElement("div",{role:"group","aria-labelledby":!m&&o?d:void 0,"aria-label":m},o&&s.createElement("label",{id:d,className:u.groupLabel,"aria-hidden":!0},o),r)};f.displayName="MenuGroup";const c=o=>({groupLabel:t.css`
      color: ${o.colors.text.secondary};
      font-size: ${o.typography.size.sm};
      padding: ${o.spacing(.5,1)};
    `})},42044:(Z,O,e)=>{"use strict";e.d(O,{s:()=>u});var t=e(9892),n=e(68404),l=e(72648),s=e(85419),i=e(39904),f=e(68183),c=e(69914);const o=g=>{if(!g)return!1;const p=g.parentElement.getBoundingClientRect(),E=g.getBoundingClientRect();return E.width!==0&&p.right+E.width+10>window.innerWidth},m=n.memo(({items:g,isOpen:p,openedWithArrow:E,setOpenedWithArrow:h,close:a,customStyle:v})=>{const x=(0,l.wW)(r),y=(0,n.useRef)(null),[C]=(0,c.d)({localRef:y,isMenuOpen:p,openedWithArrow:E,setOpenedWithArrow:h,close:a}),[P,D]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{p&&y.current&&D(o(y.current))},[p]),n.createElement(n.Fragment,null,n.createElement("div",{className:x.iconWrapper,"aria-label":f.wl.components.Menu.SubMenu.icon},n.createElement(i.J,{name:"angle-right",className:x.icon,"aria-hidden":!0})),p&&n.createElement("div",{ref:y,className:(0,t.cx)(x.subMenu,{[x.pushLeft]:P}),"aria-label":f.wl.components.Menu.SubMenu.container,style:v},n.createElement("div",{tabIndex:-1,className:x.itemsWrapper,role:"menu",onKeyDown:C},g)))});m.displayName="SubMenu";const r=g=>({iconWrapper:t.css`
      display: flex;
      flex: 1;
      justify-content: end;
    `,icon:t.css`
      opacity: 0.7;
      margin-left: ${g.spacing(1)};
      color: ${g.colors.text.secondary};
    `,itemsWrapper:t.css`
      background: ${g.colors.background.primary};
      box-shadow: ${g.shadows.z3};
      display: inline-block;
      border-radius: ${g.shape.borderRadius()};
    `,pushLeft:t.css`
      right: 100%;
      left: unset;
    `,subMenu:t.css`
      position: absolute;
      top: 0;
      left: 100%;
      z-index: ${g.zIndex.dropdown};
    `}),u=n.memo(n.forwardRef((g,p)=>{const{url:E,icon:h,label:a,ariaLabel:v,ariaChecked:x,target:y,onClick:C,className:P,active:D,disabled:M,destructive:b,childItems:R,role:B="menuitem",tabIndex:w=-1,customSubMenuContainerStyles:A,shortcut:I,testId:F}=g,K=(0,l.wW)(d),[W,U]=(0,n.useState)(D),[N,S]=(0,n.useState)(!1),[Y,Q]=(0,n.useState)(!1),z=(0,n.useCallback)(()=>{M||(S(!0),U(!0))},[M]),G=(0,n.useCallback)(()=>{M||(S(!1),U(!1))},[M]),k=R&&R.length>0,j=k?"div":E===void 0?"button":"a",de=(0,t.cx)({[K.item]:!0,[K.active]:W,[K.disabled]:M,[K.destructive]:b&&!M},P),ge={[j==="button"?"disabled":"aria-disabled"]:M,...j==="a"&&M&&{href:void 0,onClick:void 0},...M&&{tabIndex:-1,["data-disabled"]:M}},re=(0,n.useRef)(null);(0,n.useImperativeHandle)(p,()=>re.current);const ce=Ce=>{switch(Ce.key){case"ArrowRight":Ce.preventDefault(),Ce.stopPropagation(),k&&(S(!0),Q(!0),U(!0));break;default:break}},ie=()=>{S(!1),U(!1),re?.current?.focus()},fe=Boolean(I&&I.length>0);return n.createElement(j,{target:y,className:de,rel:y==="_blank"?"noopener noreferrer":void 0,href:E,onClick:C,onMouseEnter:z,onMouseLeave:G,onKeyDown:ce,role:E===void 0?B:void 0,"data-role":"menuitem",ref:re,"data-testid":F,"aria-label":v,"aria-checked":x,tabIndex:w,...ge},n.createElement(n.Fragment,null,h&&n.createElement(i.J,{name:h,className:K.icon,"aria-hidden":!0}),a,n.createElement("div",{className:(0,t.cx)(K.rightWrapper,{[K.withShortcut]:fe})},fe&&n.createElement("div",{className:K.shortcut},n.createElement(i.J,{name:"keyboard","aria-hidden":!0}),I),k&&n.createElement(m,{items:R,isOpen:N,openedWithArrow:Y,setOpenedWithArrow:Q,close:ie,customStyle:A}))))}));u.displayName="MenuItem";const d=g=>({item:t.css`
      background: none;
      cursor: pointer;
      white-space: nowrap;
      color: ${g.colors.text.primary};
      display: flex;
      align-items: center;
      padding: ${g.spacing(.5,2)};
      min-height: ${g.spacing(4)};
      margin: 0;
      border: none;
      width: 100%;
      position: relative;

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${g.colors.action.hover};
        color: ${g.colors.text.primary};
        text-decoration: none;
      }

      &:focus-visible {
        ${(0,s.getFocusStyles)(g)}
      }
    `,active:t.css`
      background: ${g.colors.action.hover};
    `,destructive:t.css`
      color: ${g.colors.error.text};

      svg {
        color: ${g.colors.error.text};
      }

      &:hover,
      &:focus,
      &:focus-visible {
        background: ${g.colors.error.main};
        color: ${g.colors.error.contrastText};

        svg {
          color: ${g.colors.error.contrastText};
        }
      }
    `,disabled:t.css`
      color: ${g.colors.action.disabledText};

      &:hover,
      &:focus,
      &:focus-visible {
        cursor: not-allowed;
        background: none;
        color: ${g.colors.action.disabledText};
      }
    `,icon:t.css`
      opacity: 0.7;
      margin-right: 10px;
      margin-left: -4px;
      color: ${g.colors.text.secondary};
    `,rightWrapper:t.css`
      display: flex;
      align-items: center;
      margin-left: auto;
    `,shortcutIcon:t.css`
      margin-right: ${g.spacing(1)};
    `,withShortcut:t.css`
      min-width: ${g.spacing(10.5)};
    `,shortcut:t.css`
      display: flex;
      align-items: center;
      gap: ${g.spacing(1)};
      margin-left: ${g.spacing(2)};
      color: ${g.colors.text.secondary};
      opacity: 0.7;
    `})},69914:(Z,O,e)=>{"use strict";e.d(O,{d:()=>i});var t=e(68404),n=e(58252);const l=(f,c)=>(f%c+c)%c,s=-1,i=({localRef:f,isMenuOpen:c,openedWithArrow:o,setOpenedWithArrow:m,close:r,onOpen:u,onClose:d,onKeyDown:g})=>{const[p,E]=(0,t.useState)(s);return(0,t.useEffect)(()=>{c&&o&&(E(0),m?.(!1))},[c,o,m]),(0,t.useEffect)(()=>{const a=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])');a?.[p]?.focus(),a?.forEach((v,x)=>{v.tabIndex=x===p?0:-1})},[f,p]),(0,n.Z)(()=>{u?.(E)}),[a=>{const v=f?.current?.querySelectorAll('[data-role="menuitem"]:not([data-disabled])'),x=v?.length??0;switch(a.key){case"ArrowUp":a.preventDefault(),a.stopPropagation(),E(l(p-1,x));break;case"ArrowDown":a.preventDefault(),a.stopPropagation(),E(l(p+1,x));break;case"ArrowLeft":a.preventDefault(),a.stopPropagation(),E(s),r?.();break;case"Home":a.preventDefault(),a.stopPropagation(),E(0);break;case"End":a.preventDefault(),a.stopPropagation(),E(x-1);break;case"Enter":a.preventDefault(),a.stopPropagation(),v?.[p]?.click();break;case"Escape":d?.();break;case"Tab":a.preventDefault(),d?.();break;default:break}g?.(a)}]}},35029:(Z,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(9892),n=e(99510),l=e(81699),s=e(6665),i=e(68404),f=e(72648),c=e(8180),o=e(52081),m=e(38894),r=e(27581);function u(p){const{title:E,children:h,isOpen:a=!1,closeOnEscape:v=!0,closeOnBackdropClick:x=!0,className:y,contentClassName:C,onDismiss:P,onClickBackdrop:D,trapFocus:M=!0}=p,b=(0,f.l4)(),R=(0,r.J)(b),B=(0,i.useRef)(null),{overlayProps:w,underlayProps:A}=(0,s.Ir)({isKeyboardDismissDisabled:!v,isOpen:a,onClose:P},B),{dialogProps:I,titleProps:F}=(0,n.R)({},B);if(!a)return null;const K=(0,t.cx)(R.modalHeader,typeof E!="string"&&R.modalHeaderWithTabs);return i.createElement(s.Xj,null,i.createElement("div",{role:"presentation",className:R.modalBackdrop,onClick:D||(x?P:void 0),...A}),i.createElement(l.MT,{contain:M,autoFocus:!0,restoreFocus:!0},i.createElement("div",{className:(0,t.cx)(R.modal,y),ref:B,...w,...I},i.createElement("div",{className:K},typeof E=="string"&&i.createElement(g,{...p,title:E,id:F.id}),typeof E!="string"&&E,i.createElement("div",{className:R.modalHeaderClose},i.createElement(c.h,{"aria-label":"Close dialogue",name:"times",size:"xl",onClick:P}))),i.createElement("div",{className:(0,t.cx)(R.modalContent,C)},h))))}function d({leftItems:p,children:E}){const h=(0,f.l4)(),a=(0,r.J)(h);return p?i.createElement("div",{className:a.modalButtonRow},i.createElement(o.Lh,{justify:"space-between"},i.createElement(o.Lh,{justify:"flex-start",spacing:"md"},p),i.createElement(o.Lh,{justify:"flex-end",spacing:"md"},E))):i.createElement("div",{className:a.modalButtonRow},i.createElement(o.Lh,{justify:"flex-end",spacing:"md"},E))}u.ButtonRow=d;function g({icon:p,iconTooltip:E,title:h,id:a}){return i.createElement(m.x,{icon:p,iconTooltip:E,title:h,id:a})}},38894:(Z,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(68404),n=e(72648),l=e(27581);const s=({icon:i,iconTooltip:f,title:c,children:o,id:m})=>{const r=(0,n.wW)(l.J);return t.createElement(t.Fragment,null,t.createElement("h2",{className:r.modalHeaderTitle,id:m},c),o)}},72535:(Z,O,e)=>{"use strict";e.d(O,{Q:()=>n});var t=e(68404);const n=({children:l})=>t.createElement("div",{className:"share-modal-body"},t.createElement("div",{className:"share-modal-header"},t.createElement("div",{className:"share-modal-content"},l)))},88683:(Z,O,e)=>{"use strict";e.d(O,{H:()=>i});var t=e(68404),n=e(79841),l=e(72142),s=e(38894);const i=({icon:f,title:c,tabs:o,activeTab:m,onChangeTab:r})=>t.createElement(s.x,{icon:f,title:c},t.createElement(l.J,{hideBorder:!0},o.map((u,d)=>t.createElement(n.O,{key:`${u.value}-${d}`,label:u.label,icon:u.icon,suffix:u.tabSuffix,active:u.value===m,onChangeTab:()=>r(u)}))))},5191:(Z,O,e)=>{"use strict";e.d(O,{$i:()=>l,JY:()=>i,Y0:()=>s,kr:()=>n});var t=e(68404);const n=t.createContext({component:null,props:{},showModal:()=>{},hideModal:()=>{}});class l extends t.Component{constructor(c){super(c),this.showModal=(o,m)=>{this.setState({component:o,props:m})},this.hideModal=()=>{this.setState({component:null,props:{}})},this.state={component:c.component||null,props:c.props||{},showModal:this.showModal,hideModal:this.hideModal}}render(){return t.createElement(n.Provider,{value:this.state},this.props.children)}}const s=()=>t.createElement(n.Consumer,null,({component:f,props:c})=>f?t.createElement(f,{...c}):null),i=n.Consumer},27581:(Z,O,e)=>{"use strict";e.d(O,{J:()=>l});var t=e(9892),n=e(7804);const l=(0,n.B)(s=>{const i=s.shape.borderRadius(1);return{modal:t.css`
      position: fixed;
      z-index: ${s.zIndex.modal};
      background: ${s.colors.background.primary};
      box-shadow: ${s.shadows.z3};
      border-radius: ${i};
      border: 1px solid ${s.colors.border.weak};
      background-clip: padding-box;
      outline: none;
      width: 750px;
      max-width: 100%;
      left: 0;
      right: 0;
      margin-left: auto;
      margin-right: auto;
      top: 10%;
      max-height: 80%;
      display: flex;
      flex-direction: column;
    `,modalBackdrop:t.css`
      position: fixed;
      z-index: ${s.zIndex.modalBackdrop};
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      background-color: ${s.components.overlay.background};
      backdrop-filter: blur(1px);
    `,modalHeader:t.css`
      label: modalHeader;
      display: flex;
      align-items: center;
      min-height: 42px;
      margin: ${s.spacing(1,2,0,2)};
    `,modalHeaderWithTabs:t.css`
      border-bottom: 1px solid ${s.colors.border.weak};
    `,modalHeaderTitle:t.css`
      font-size: ${s.typography.size.lg};
      margin: ${s.spacing(0,4,0,1)};
      display: flex;
      align-items: center;
      position: relative;
      top: 2px;
    `,modalHeaderIcon:t.css`
      margin-right: ${s.spacing(2)};
      font-size: inherit;
      &:before {
        vertical-align: baseline;
      }
    `,modalHeaderClose:t.css`
      height: 100%;
      display: flex;
      align-items: center;
      color: ${s.colors.text.secondary};
      flex-grow: 1;
      justify-content: flex-end;
    `,modalContent:t.css`
      overflow: auto;
      padding: ${s.spacing(3)};
      width: 100%;
    `,modalButtonRow:t.css`
      padding-top: ${s.spacing(3)};
    `}})},9405:(Z,O,e)=>{"use strict";e.d(O,{p:()=>g});var t=e(9892),n=e(68404),l=e(87442),s=e(68183),i=e(72648),f=e(84128),c=e(10339);function o(E){for(let h=E.length-1;h>0;h--){const a=E.charAt(h);if(a==="$")return{index:h,prefix:E.substring(h)};if(a===" "||a==="	"||a==='"'||a==="'")return{index:h+1,prefix:E.substring(h+1)}}return{index:0,prefix:E}}function m(E,h,a,v){const x=[];for(const y of a)h&&!y.label.startsWith(h)||x.push({...y,kind:r(E,y.kind),range:v,insertText:y.insertText??y.label});return x}function r(E,h){switch(h){case c.k.Method:return E.languages.CompletionItemKind.Method;case c.k.Field:return E.languages.CompletionItemKind.Field;case c.k.Property:return E.languages.CompletionItemKind.Property;case c.k.Constant:return E.languages.CompletionItemKind.Constant;case c.k.Text:return E.languages.CompletionItemKind.Text}return E.languages.CompletionItemKind.Text}function u(E,h,a){if(!(!h||!a))return E.languages.registerCompletionItemProvider(h,{triggerCharacters:["$"],provideCompletionItems:(v,x,y)=>{const C={startLineNumber:x.lineNumber,endLineNumber:x.lineNumber,startColumn:x.column,endColumn:x.column};if(y.triggerCharacter==="$")return C.startColumn=x.column-1,{suggestions:m(E,"$",a(),C)};const P=v.getValueInRange({startLineNumber:x.lineNumber,startColumn:1,endLineNumber:x.lineNumber,endColumn:x.column}),{index:D,prefix:M}=o(P);C.startColumn=D+1;const b=m(E,M,a(),C);if(b.length)return{suggestions:b}}})}class d extends n.PureComponent{constructor(h){super(h),this.loadCustomLanguage=()=>{const{language:a}=this.props,v=l.F.getIfExists(a);return v?v.init():Promise.resolve()},this.getEditorValue=()=>"",this.onBlur=()=>{const{onBlur:a}=this.props;a&&a(this.getEditorValue())},this.onSave=()=>{const{onSave:a}=this.props;a&&a(this.getEditorValue())},this.handleBeforeMount=a=>{this.monaco=a;const{language:v,getSuggestions:x,onBeforeEditorMount:y}=this.props;x&&(this.completionCancel=u(a,v,x)),y?.(a)},this.handleOnMount=(a,v)=>{const{onChange:x,onEditorDidMount:y}=this.props;this.getEditorValue=()=>a.getValue(),a.addCommand(v.KeyMod.CtrlCmd|v.KeyCode.KeyS,this.onSave);const C=this.loadCustomLanguage();y&&(C.then(()=>y(a,v)),a.getModel()?.onDidChangeContent(()=>x?.(a.getValue())))}}componentWillUnmount(){this.completionCancel&&this.completionCancel.dispose()}componentDidUpdate(h){const{getSuggestions:a,language:v}=this.props,x=h.language!==v;if(h.getSuggestions!==a||x){if(this.completionCancel&&this.completionCancel.dispose(),!this.monaco){console.warn("Monaco instance not loaded yet");return}a&&(this.completionCancel=u(this.monaco,v,a))}x&&this.loadCustomLanguage()}render(){const{theme:h,language:a,width:v,height:x,showMiniMap:y,showLineNumbers:C,readOnly:P,monacoOptions:D}=this.props,M=this.props.value??"",b=M.length>100,R=this.props.containerStyles??p(h).container,B={wordWrap:"off",tabSize:2,codeLens:!1,contextmenu:!1,minimap:{enabled:b&&y,renderCharacters:!1},readOnly:P,lineNumbersMinChars:4,lineDecorationsWidth:1*h.spacing.gridSize,overviewRulerBorder:!1,automaticLayout:!0,padding:{top:.5*h.spacing.gridSize,bottom:.5*h.spacing.gridSize},fixedOverflowWidgets:!0};return C||(B.glyphMargin=!1,B.folding=!1,B.lineNumbers="off",B.lineNumbersMinChars=0),n.createElement("div",{className:R,onBlur:this.onBlur,"aria-label":s.wl.components.CodeEditor.container},n.createElement(f.o,{width:v,height:x,language:a,value:M,options:{...B,...D??{}},beforeMount:this.handleBeforeMount,onMount:this.handleOnMount}))}}const g=(0,i.HE)(d),p=E=>({container:t.css`
      border-radius: ${E.shape.borderRadius()};
      border: 1px solid ${E.components.input.borderColor};
    `})},84128:(Z,O,e)=>{"use strict";e.d(O,{o:()=>f});var t=e(68404),n=e(61744),l=e(39198),s=e(22350);const i=c=>{const o=(0,s.Z)(async()=>await c);return{...o,dependency:o.value}},f=c=>{const{loading:o,error:m,dependency:r}=i(e.e(2462).then(e.bind(e,28099)));if(o)return t.createElement(n.u,{text:""});if(m)return t.createElement(l.X,{title:"React Monaco Editor failed to load",error:m,errorInfo:{componentStack:m?.stack||""}});const u=r.ReactMonacoEditor;return t.createElement(u,{...c})}},10339:(Z,O,e)=>{"use strict";e.d(O,{k:()=>t});var t=(n=>(n.Method="method",n.Field="field",n.Property="property",n.Constant="constant",n.Text="text",n))(t||{})},25503:(Z,O,e)=>{"use strict";e.d(O,{T:()=>n});var t=e(10339);function n(l){const s="${"+l.value+"}",i=l.value===l.label?l.origin:`${l.label} / ${l.origin}`;return{label:s,kind:t.k.Property,detail:i,documentation:l.documentation}}},35224:(Z,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(9892),n=e(68404),l=e(68183),s=e(29460),i=e(8125),f=e(72648),c=e(85419),o=e(39904),m=e(8180);const r=n.memo(({title:d,section:g,parent:p,pageIcon:E,onGoBack:h,children:a,titleHref:v,parentHref:x,leftItems:y,isFullscreen:C,className:P,"aria-label":D,buttonOverflowAlignment:M="right",forceShowLeftItems:b=!1})=>{const R=(0,f.wW)(u),B=(0,t.cx)("page-toolbar",R.toolbar,{["page-toolbar--fullscreen"]:C,[R.noPageIcon]:!E},P),w=n.createElement(n.Fragment,null,n.createElement("span",{className:R.truncateText},d),g&&n.createElement("span",{className:R.pre}," / ",g));return n.createElement("nav",{className:B,"aria-label":D},n.createElement("div",{className:R.leftWrapper},E&&!h&&n.createElement("div",{className:R.pageIcon},n.createElement(o.J,{name:E,size:"lg","aria-hidden":!0})),h&&n.createElement("div",{className:R.pageIcon},n.createElement(m.h,{name:"arrow-left",tooltip:"Go back (Esc)",tooltipPlacement:"bottom",size:"xxl","aria-label":l.wl.components.BackButton.backArrow,onClick:h})),n.createElement("nav",{"aria-label":"Search links",className:R.navElement},p&&x&&n.createElement(n.Fragment,null,n.createElement(s.r,{"aria-label":`Search dashboard in the ${p} folder`,className:(0,t.cx)(R.titleText,R.parentLink,R.titleLink,R.truncateText),href:x},p," ",n.createElement("span",{className:R.parentIcon})),v&&n.createElement("span",{className:(0,t.cx)(R.titleText,R.titleDivider),"aria-hidden":!0},"/")),(d||Boolean(y?.length))&&n.createElement("div",{className:R.titleWrapper},d&&n.createElement("h1",{className:R.h1Styles},v?n.createElement(s.r,{"aria-label":"Search dashboard by name",className:(0,t.cx)(R.titleText,R.titleLink),href:v},w):n.createElement("div",{className:R.titleText},w)),y?.map((A,I)=>n.createElement("div",{className:(0,t.cx)(R.leftActionItem,{[R.forceShowLeftActionItems]:b}),key:I},A))))),n.createElement(i.R,{alignment:M},n.Children.toArray(a).filter(Boolean)))});r.displayName="PageToolbar";const u=d=>{const{spacing:g,typography:p}=d,E=(0,c.getFocusStyles)(d);return{pre:t.css`
      white-space: pre;
    `,toolbar:t.css`
      align-items: center;
      background: ${d.colors.background.canvas};
      display: flex;
      gap: ${d.spacing(2)};
      justify-content: space-between;
      padding: ${d.spacing(1.5,2)};

      ${d.breakpoints.down("md")} {
        padding-left: 53px;
      }
    `,noPageIcon:t.css`
      ${d.breakpoints.down("md")} {
        padding-left: ${d.spacing(2)};
      }
    `,leftWrapper:t.css`
      display: flex;
      flex-wrap: nowrap;
      max-width: 70%;
    `,pageIcon:t.css`
      display: none;
      ${d.breakpoints.up("sm")} {
        display: flex;
        padding-right: ${d.spacing(1)};
        align-items: center;
      }
    `,truncateText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,titleWrapper:t.css`
      display: flex;
      margin: 0;
      min-width: 0;
    `,navElement:t.css`
      display: flex;
      align-items: center;
      min-width: 0;
    `,h1Styles:t.css`
      margin: ${g(0,1,0,0)};
      line-height: inherit;
      flex-grow: 1;
      min-width: 0;
    `,parentIcon:t.css`
      margin-left: ${d.spacing(.5)};
    `,titleText:t.css`
      display: flex;
      font-size: ${p.size.lg};
      margin: 0;
      max-width: 300px;
      border-radius: ${d.shape.radius.default};
    `,titleLink:t.css`
      &:focus-visible {
        ${E}
      }
    `,titleDivider:t.css`
      padding: ${g(0,.5,0,.5)};
      display: none;
      ${d.breakpoints.up("md")} {
        display: unset;
      }
    `,parentLink:t.css`
      display: none;
      ${d.breakpoints.up("md")} {
        display: unset;
        flex: 1;
      }
    `,leftActionItem:t.css`
      display: none;
      align-items: center;
      padding-right: ${g(.5)};
      ${d.breakpoints.up("md")} {
        display: flex;
      }
    `,forceShowLeftActionItems:t.css`
      display: flex;
    `}}},78889:(Z,O,e)=>{"use strict";e.d(O,{t:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(31403),i=e(39904);const f=({currentPage:o,numberOfPages:m,onNavigate:r,hideWhenSinglePage:u,showSmallVersion:d,className:g})=>{const p=(0,l.wW)(c),E=d?1:8,h=(0,n.useMemo)(()=>{const a=[...new Array(m).keys()],v=m>E,x=(y,C)=>n.createElement("li",{key:y,className:p.item},n.createElement(s.zx,{size:"sm",variant:C,onClick:()=>r(y)},y));return a.reduce((y,C)=>{const P=C+1,D=P===o?"primary":"secondary",M=E,b=m-E+1,R=b-M,B=P===1||P===m,w=R>-1&&o>=M&&o<=b,A=d?1:3,I=d?0:2;return v?B||o<M&&P<M||R>=0&&o>b&&P>b||R<0&&o>=M&&P>b||w&&P>=o-I&&P<=o+I?y.push(x(P,D)):(P===M&&o<M||P===b&&o>b||w&&(P===o-A||P===o+A))&&y.push(n.createElement("li",{key:P,className:p.item},n.createElement(i.J,{className:p.ellipsis,name:"ellipsis-v"}))):y.push(x(P,D)),y},[])},[o,m,r,E,d,p.ellipsis,p.item]);return u&&m<=1?null:n.createElement("div",{className:(0,t.cx)(p.container,g)},n.createElement("ol",null,n.createElement("li",{className:p.item},n.createElement(s.zx,{"aria-label":"previous",size:"sm",variant:"secondary",onClick:()=>r(o-1),disabled:o===1},n.createElement(i.J,{name:"angle-left"}))),h,n.createElement("li",{className:p.item},n.createElement(s.zx,{"aria-label":"next",size:"sm",variant:"secondary",onClick:()=>r(o+1),disabled:o===m},n.createElement(i.J,{name:"angle-right"})))))},c=()=>({container:t.css`
      float: right;
    `,item:t.css`
      display: inline-block;
      padding-left: 10px;
      margin-bottom: 5px;
    `,ellipsis:t.css`
      transform: rotate(90deg);
    `})},99562:(Z,O,e)=>{"use strict";e.d(O,{g:()=>r});var t=e(9892),n=e(68404),l=e(72648);const s={gray98:"#f7f8fa",gray97:"#f1f5f9",gray95:"#e9edf2",gray90:"#dce1e6",gray85:"#c7d0d9",gray70:"#9fa7b3",gray60:"#7b8087",gray33:"#464c54",gray25:"#2c3235",gray15:"#202226",gray10:"#141619",gray05:"#0b0c0e",blue95:"#5794f2",blue85:"#33a2e5",blue80:"#3274d9",blue77:"#1f60c4",red88:"#e02f44"},i=8,f={name:"Grafana Default",typography:{fontFamily:{sansSerif:'"Inter", "Helvetica", "Arial", sans-serif',monospace:"'Roboto Mono', monospace"},size:{base:"14px",xs:"10px",sm:"12px",md:"14px",lg:"18px"},heading:{h1:"28px",h2:"24px",h3:"21px",h4:"18px",h5:"16px",h6:"14px"},weight:{light:300,regular:400,semibold:500,bold:500},lineHeight:{xs:1,sm:1.1,md:1.5,lg:2},link:{decoration:"none",hoverDecoration:"none"}},breakpoints:{xs:"0",sm:"544px",md:"769px",lg:"992px",xl:"1200px",xxl:"1440px"},spacing:{base:i,insetSquishMd:"4px 8px",d:"16px",xxs:"2px",xs:"4px",sm:"8px",md:"16px",lg:"24px",xl:"32px",gutter:"30px",formSpacingBase:i,formMargin:`${i*4}px`,formFieldsetMargin:`${i*2}px`,formInputHeight:i*4,formButtonHeight:i*4,formInputPaddingHorizontal:`${i}px`,formInputAffixPaddingHorizontal:`${i/2}px`,formInputMargin:`${i*2}px`,formLabelPadding:"0 0 0 2px",formLabelMargin:`0 0 ${i/2+"px"} 0`,formValidationMessagePadding:"4px 8px",formValidationMessageMargin:"4px 0 0 0",inlineFormMargin:"4px"},border:{radius:{sm:"2px",md:"3px",lg:"5px"},width:{sm:"1px"}},height:{sm:24,md:32,lg:48},panelPadding:8,panelHeaderHeight:28,zIndex:{navbarFixed:1e3,sidemenu:1020,dropdown:1030,typeahead:1030,tooltip:1040,modalBackdrop:1050,modal:1060,portal:1061}},c=null;var o=e(39904),m=e(6554);const r=({error:d,onClick:g})=>{const p=(0,l.wW)(u);return d?n.createElement(m.u,{theme:"error",content:d},n.createElement(o.J,{onClick:g,className:(0,t.cx)(p.icon,{[p.clickable]:!!g}),size:"sm",name:"exclamation-triangle"})):null},u=()=>({clickable:(0,t.css)({cursor:"pointer"}),icon:(0,t.css)({color:`${s.red88}`})})},8861:(Z,O,e)=>{"use strict";e.d(O,{T:()=>c});var t=e(9892),n=e(68404),l=e(68183),s=e(72648),i=e(39904),f=e(6554);const c=({onCancel:m,loading:r})=>{const u=(0,s.wW)(o);return r?n.createElement(f.u,{content:"Cancel query"},n.createElement(i.J,{className:(0,t.cx)("spin-clockwise",{[u.clickable]:!!m}),name:"sync",size:"sm",onClick:m,"aria-label":l.wl.components.LoadingIndicator.icon})):null},o=()=>({clickable:(0,t.css)({cursor:"pointer"})})},60325:(Z,O,e)=>{"use strict";e.d(O,{R9:()=>i,_w:()=>s,bb:()=>l});var t=e(68404),n=e(85081);const l=t.createContext({eventBus:new n.F}),s=l.Provider,i=()=>t.useContext(l)},38208:(Z,O,e)=>{"use strict";e.d(O,{fm:()=>I});var t=e(99562),n=e(8861),l=e(9892),s=e(68404),i=e(49922),f=e(68183),c=e(72648);function o({children:F,delay:K}){const[W,U]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const N=setInterval(()=>{U(!0)},K);return()=>{clearInterval(N)}},[F,K]),s.createElement(s.Fragment,null,W?F:null)}var m=e(39904),r=e(74750),u=e(6554),d=e(71698),g=e(64319);function p({menu:F,title:K,placement:W="bottom",offset:U,dragClassCancel:N,menuButtonClass:S,onVisibleChange:Y,onOpenMenu:Q}){const z=K?f.wl.components.Panels.Panel.menu(K):"panel-menu-button",G=(0,s.useCallback)(k=>(k&&Q&&Q(),Y),[Q,Y]);return s.createElement(d.L,{overlay:F,placement:W,offset:U,onVisibleChange:G},s.createElement(g.h,{"aria-label":`Menu for panel with ${K?`title ${K}`:"no title"}`,title:"Menu",icon:"ellipsis-v",iconSize:"md",narrow:!0,"data-testid":z,className:(0,l.cx)(S,N)}))}function E({menu:F,title:K,dragClass:W,children:U,offset:N=-32,onOpenMenu:S}){const Y=(0,c.wW)(h),Q=(0,s.useRef)(null),z=(0,s.useCallback)(de=>{Q.current?.setPointerCapture(de.pointerId)},[]),G=(0,s.useCallback)(de=>{Q.current?.releasePointerCapture(de.pointerId)},[]),[k,j]=(0,s.useState)(!1);return U===void 0||s.Children.count(U)===0?null:s.createElement("div",{className:(0,l.cx)(Y.container,{"show-on-hover":!k}),style:{top:`${N}px`},"data-testid":"hover-header-container"},W&&s.createElement("div",{className:(0,l.cx)(Y.square,Y.draggable,W),onPointerDown:z,onPointerUp:G,ref:Q},s.createElement(m.J,{name:"expand-arrows",className:Y.draggableIcon})),!K&&s.createElement("h6",{className:(0,l.cx)(Y.untitled,Y.draggable,W)},"Untitled"),U,F&&s.createElement(p,{menu:F,title:K,placement:"bottom",menuButtonClass:Y.menuButton,onVisibleChange:j,onOpenMenu:S}))}function h(F){return{hidden:(0,l.css)({visibility:"hidden",opacity:"0"}),container:(0,l.css)({label:"hover-container-widget",transition:"all .1s linear",display:"flex",position:"absolute",zIndex:1,right:0,boxSizing:"content-box",alignItems:"center",background:F.colors.background.secondary,color:F.colors.text.primary,border:`1px solid ${F.colors.border.weak}`,borderRadius:F.shape.radius.default,height:F.spacing(4),boxShadow:F.shadows.z1}),square:(0,l.css)({display:"flex",justifyContent:"center",alignItems:"center",width:F.spacing(4),height:"100%"}),draggable:(0,l.css)({cursor:"move",[F.breakpoints.down("md")]:{display:"none"}}),menuButton:(0,l.css)({background:"inherit",border:"none","&:hover":{background:F.colors.secondary.main}}),untitled:(0,l.css)({color:F.colors.text.disabled,fontStyle:"italic",padding:F.spacing(0,1),marginBottom:0}),draggableIcon:(0,l.css)({transform:"rotate(45deg)",color:F.colors.text.secondary,"&:hover":{color:F.colors.text.primary}})}}var a=e(85419),v=e(31403);const x=(0,s.forwardRef)(({className:F,children:K,href:W,onClick:U,target:N,title:S,...Y},Q)=>{const z=(0,c.wW)(y);return W?s.createElement("a",{ref:Q,href:W,onClick:U,target:N,title:S,className:(0,l.cx)(z.linkItem,F),...Y},K):U?s.createElement(v.zx,{ref:Q,className:(0,l.cx)(z.item,F),variant:"secondary",fill:"text",onClick:U},K):s.createElement("span",{ref:Q,className:(0,l.cx)(z.item,F),...Y},K)});x.displayName="TitleItem";const y=F=>{const K=(0,l.css)({color:`${F.colors.text.secondary}`,label:"panel-header-item",cursor:"auto",border:"none",borderRadius:`${F.shape.borderRadius()}`,padding:`${F.spacing(0,1)}`,height:`${F.spacing(F.components.panel.headerHeight)}`,display:"flex",alignItems:"center",justifyContent:"center","&:focus, &:focus-visible":{...(0,a.getFocusStyles)(F),zIndex:1},"&: focus:not(:focus-visible)":(0,a.getMouseFocusStyles)(F),"&:hover ":{boxShadow:`${F.shadows.z1}`,background:`${F.colors.background.secondary}`,color:`${F.colors.text.primary}`}});return{item:K,linkItem:(0,l.cx)(K,(0,l.css)({cursor:"pointer"}))}};function C({description:F,className:K}){const W=(0,c.wW)(P),U=()=>{const N=typeof F=="function"?F():F;return s.createElement("div",{className:"panel-info-content markdown-html"},s.createElement("div",{dangerouslySetInnerHTML:{__html:N}}))};return F!==""?s.createElement(u.u,{interactive:!0,content:U},s.createElement(x,{className:(0,l.cx)(K,W.description)},s.createElement(m.J,{name:"info-circle",size:"md"}))):null}const P=F=>({description:(0,l.css)({code:{whiteSpace:"normal",wordWrap:"break-word"},"pre > code":{display:"block"}})});function D({message:F,onClick:K,ariaLabel:W="status"}){const U=(0,c.wW)(M);return s.createElement(g.h,{className:U.buttonStyles,onClick:K,variant:"destructive",icon:"exclamation-triangle",iconSize:"md",tooltip:F||"","aria-label":W})}const M=F=>{const{headerHeight:K,padding:W}=F.components.panel;return{buttonStyles:(0,l.css)({label:"panel-header-state-button",display:"flex",alignItems:"center",justifyContent:"center",padding:F.spacing(W),width:F.spacing(K),height:F.spacing(K),borderRadius:F.shape.radius.default})}};function b({width:F,height:K,children:W,padding:U="md",title:N="",description:S="",displayMode:Y="default",titleItems:Q,menu:z,dragClass:G,dragClassCancel:k,hoverHeader:j=!1,hoverHeaderOffset:de,loadingState:ge,statusMessage:re,statusMessageOnClick:ce,leftItems:ie,actions:fe,onCancelQuery:Ce,onOpenMenu:ee}){const ne=(0,c.l4)(),X=(0,c.wW)(A),te=!j,ae="show-on-hover",_=B(ne,te),{contentStyle:ve,innerWidth:Ve,innerHeight:it}=w(U,ne,F,_,K),rt={height:_,cursor:G?"move":"auto"},pe={width:F,height:K};Y==="transparent"&&(pe.backgroundColor="transparent",pe.border="none"),ie&&(fe=ie);const Ie=N?f.wl.components.Panels.Panel.title(N):"Panel",We=s.createElement(s.Fragment,null,N&&s.createElement("h6",{title:N,className:X.title},N),s.createElement("div",{className:(0,l.cx)(X.titleItems,k),"data-testid":"title-items-container"},s.createElement(C,{description:S,className:k}),Q),ge===i.Gu.Streaming&&s.createElement(u.u,{content:Ce?"Stop streaming":"Streaming"},s.createElement(x,{className:k,"data-testid":"panel-streaming",onClick:Ce},s.createElement(m.J,{name:"circle-mono",size:"md",className:X.streaming}))),ge===i.Gu.Loading&&Ce&&s.createElement(o,{delay:2e3},s.createElement(u.u,{content:"Cancel query"},s.createElement(x,{className:k,"data-testid":"panel-cancel-query",onClick:Ce},s.createElement(m.J,{name:"sync-slash",size:"md"})))),s.createElement("div",{className:X.rightAligned},fe&&s.createElement("div",{className:X.rightActions},R(fe,Je=>Je))));return s.createElement("div",{className:X.container,style:pe,"data-testid":Ie},s.createElement("div",{className:X.loadingBarContainer},ge===i.Gu.Loading?s.createElement(r.F,{width:F,ariaLabel:"Panel loading bar"}):null),j&&s.createElement(s.Fragment,null,s.createElement(E,{menu:z,title:N,offset:de,dragClass:G,onOpenMenu:ee},We),re&&s.createElement("div",{className:X.errorContainerFloating},s.createElement(D,{message:re,onClick:ce,ariaLabel:"Panel status"}))),te&&s.createElement("div",{className:(0,l.cx)(X.headerContainer,G),style:rt,"data-testid":"header-container"},re&&s.createElement("div",{className:k},s.createElement(D,{message:re,onClick:ce,ariaLabel:"Panel status"})),We,z&&s.createElement(p,{menu:z,title:N,placement:"bottom-end",menuButtonClass:(0,l.cx)(X.menuItem,k,ae),onOpenMenu:ee})),s.createElement("div",{className:X.content,style:ve},W(Ve,it)))}const R=(F,K)=>{const W=s.Children.toArray(F).filter(Boolean);return W.length>0?K(W):null},B=(F,K)=>K?F.spacing.gridSize*F.components.panel.headerHeight:0,w=(F,K,W,U,N)=>{const S=(F==="md"?K.components.panel.padding:0)*K.spacing.gridSize,Y=S*2,Q=1*2,z=W-Y-Q,G=N-U-Y-Q;return{contentStyle:{padding:S},innerWidth:z,innerHeight:G}},A=F=>{const{background:K,borderColor:W,padding:U}=F.components.panel;return{container:(0,l.css)({label:"panel-container",backgroundColor:K,border:`1px solid ${W}`,position:"relative",borderRadius:F.shape.borderRadius(1),height:"100%",display:"flex",flexDirection:"column",flex:"1 1 0",".show-on-hover":{visibility:"hidden",opacity:"0"},"&:focus-visible, &:hover":{".show-on-hover":{visibility:"visible",opacity:"1"}},"&:focus-visible":{outline:`1px solid ${F.colors.action.focus}`},"&:focus-within":{".show-on-hover":{visibility:"visible",opacity:"1"}}}),loadingBarContainer:(0,l.css)({label:"panel-loading-bar-container",position:"absolute",top:0,width:"100%",overflow:"hidden"}),content:(0,l.css)({label:"panel-content",flexGrow:1,contain:"strict"}),headerContainer:(0,l.css)({label:"panel-header",display:"flex",alignItems:"center"}),streaming:(0,l.css)({label:"panel-streaming",marginRight:0,color:F.colors.success.text,"&:hover":{color:F.colors.success.text}}),title:(0,l.css)({label:"panel-title",marginBottom:0,padding:F.spacing(0,U),textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",fontSize:F.typography.h6.fontSize,fontWeight:F.typography.h6.fontWeight}),items:(0,l.css)({display:"flex"}),item:(0,l.css)({display:"flex",justifyContent:"center",alignItems:"center"}),hiddenMenu:(0,l.css)({visibility:"hidden"}),menuItem:(0,l.css)({label:"panel-menu",border:"none",background:F.colors.secondary.main,"&:hover":{background:F.colors.secondary.shade}}),errorContainerFloating:(0,l.css)({label:"error-container",position:"absolute",left:0,top:0,zIndex:F.zIndex.tooltip}),rightActions:(0,l.css)({display:"flex",padding:F.spacing(0,U),gap:F.spacing(1)}),rightAligned:(0,l.css)({label:"right-aligned-container",marginLeft:"auto",display:"flex",alignItems:"center"}),titleItems:(0,l.css)({display:"flex",height:"100%"})}},I=b;I.LoadingIndicator=n.T,I.ErrorIndicator=t.g,I.TitleItem=x},17882:(Z,O,e)=>{"use strict";e.d(O,{R:()=>t});var t=(n=>(n.ToggleSelection="select",n.AppendToSelection="append",n))(t||{})},72080:(Z,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({children:f,className:c,...o})=>{const m=(0,l.wW)(i);return n.createElement("div",{className:(0,t.cx)(m,c),...o},f)},i=f=>t.css`
    background-color: ${f.components.panel.background};
    border: 1px solid ${f.components.panel.borderColor};
    border-radius: ${f.shape.radius.default};
  `},51613:(Z,O,e)=>{"use strict";e.d(O,{o:()=>s});var t=e(68404),n=e(24699),l=e(19985);const s=({status:f,...c})=>{const o=i(f);return t.createElement(l.C,{text:o.text,color:o.color,icon:o.icon,tooltip:o.tooltip,...c})};s.displayName="PluginSignatureBadge";function i(f){switch(f||(f=n.Xy.invalid),f){case n.Xy.internal:return{text:"Core",color:"blue",tooltip:"Core plugin that is bundled with Grafana"};case n.Xy.valid:return{text:"Signed",icon:"lock",color:"green",tooltip:"Signed and verified plugin"};case n.Xy.invalid:return{text:"Invalid signature",icon:"exclamation-triangle",color:"red",tooltip:"Invalid plugin signature"};case n.Xy.modified:return{text:"Modified signature",icon:"exclamation-triangle",color:"red",tooltip:"Valid signature but content has been modified"};case n.Xy.missing:return{text:"Missing signature",icon:"exclamation-triangle",color:"red",tooltip:"Missing plugin signature"};default:return{text:"Unsigned",icon:"exclamation-triangle",color:"red",tooltip:"Unsigned external plugin"}}}},85511:(Z,O,e)=>{"use strict";e.d(O,{RN:()=>i,h_:()=>s,lO:()=>f});var t=e(68404),n=e(97394),l=e(72648);function s(o){const{children:m,className:r,root:u,forwardedRef:d}=o,g=(0,l.l4)(),p=(0,t.useRef)(null),E=u??i();return p.current||(p.current=document.createElement("div"),r&&(p.current.className=r),p.current.style.position="relative",p.current.style.zIndex=`${g.zIndex.portal}`),(0,t.useLayoutEffect)(()=>(p.current&&E.appendChild(p.current),()=>{p.current&&E.removeChild(p.current)}),[E]),n.createPortal(t.createElement("div",{ref:d},m),p.current)}function i(){return window.document.getElementById("grafana-portal-container")??document.body}function f(){return t.createElement("div",{id:"grafana-portal-container"})}const c=t.forwardRef((o,m)=>t.createElement(s,{...o,forwardedRef:m}));c.displayName="RefForwardingPortal"},69659:(Z,O,e)=>{"use strict";e.d(O,{q:()=>C});var t=e(9892),n=e(9085),l=e.n(n),s=e(82897),i=e.n(s),f=e(68404),c=e(40246),o=e(56747),m=e(68183),r=e(12724),u=e(73958),d=e(47838),g=e(9830),p=e(74778),E=e(71096),h=e(784),a=e(6464),v=e(72648),x=e(85419);class y extends f.PureComponent{constructor(M,b){super(M,b),this.lastExecutedValue=null,this.mounted=!1,this.editor=null,this.onChange=(I,F)=>{const K=I.document!==this.state.value.document,W=this.state.value;this.props.onRichValueChange&&this.props.onRichValueChange(I),this.setState({value:I},()=>{if(K){const U=c.Z.serialize(W)!==c.Z.serialize(I);U&&F&&this.runOnChangeAndRunQuery(),U&&!F&&this.runOnChangeDebounced()}})},this.runOnChange=()=>{const{onChange:I}=this.props,F=c.Z.serialize(this.state.value);I&&I(this.cleanText(F))},this.runOnRunQuery=()=>{const{onRunQuery:I}=this.props;I&&(I(),this.lastExecutedValue=this.state.value)},this.runOnChangeAndRunQuery=()=>{this.runOnChange(),this.runOnRunQuery()},this.handleBlur=(I,F,K)=>{const{onBlur:W}=this.props;if(W)W();else{const U=this.lastExecutedValue?c.Z.serialize(this.lastExecutedValue):"",N=c.Z.serialize(F.value);U!==N&&this.runOnChangeAndRunQuery()}return K()},this.runOnChangeDebounced=(0,s.debounce)(this.runOnChange,500);const{onTypeahead:R,cleanText:B,portalOrigin:w,onWillApplySuggestion:A}=M;this.plugins=[(0,u.b)({onTypeahead:R,cleanText:B,portalOrigin:w,onWillApplySuggestion:A}),(0,d.d)({handler:this.runOnChangeAndRunQuery}),(0,g.z)(),(0,p.G)(),(0,E.$)(),(0,h.R)(),(0,a.w)(),...M.additionalPlugins||[]].filter(I=>I),this.state={suggestions:[],typeaheadContext:null,typeaheadPrefix:"",typeaheadText:"",value:(0,r.l1)(M.query||"",M.syntax)}}componentDidMount(){this.mounted=!0}componentWillUnmount(){this.mounted=!1}componentDidUpdate(M,b){const{query:R,syntax:B,syntaxLoaded:w}=this.props;if(!M.syntaxLoaded&&w&&this.editor){const I=this.editor.insertText(" ").deleteBackward(1);this.onChange(I.value,!0)}const{value:A}=this.state;R!==M.query&&R!==c.Z.serialize(A)&&this.setState({value:(0,r.l1)(R||"",B)})}cleanText(M){return M.replace(/[\r]/g,"")}render(){const{disabled:M,theme:b}=this.props,R=l()("slate-query-field__wrapper",{"slate-query-field__wrapper--disabled":M}),B=P(b);return f.createElement("div",{className:(0,t.cx)(R,B.wrapper)},f.createElement("div",{className:"slate-query-field","aria-label":m.wl.components.QueryField.container},f.createElement(o.ML,{ref:w=>this.editor=w,schema:r.Yi,autoCorrect:!1,readOnly:this.props.disabled,onBlur:this.handleBlur,onClick:this.props.onClick,onChange:w=>{this.onChange(w.value,!1)},placeholder:this.props.placeholder,plugins:this.plugins,spellCheck:!1,value:this.state.value})))}}const C=(0,v.HE)(y),P=D=>{const M=(0,x.getFocusStyles)(D);return{wrapper:t.css`
      &:focus-within {
        ${M}
      }
    `}}},5562:(Z,O,e)=>{"use strict";e.d(O,{dP:()=>u,o5:()=>m});var t=e(14016),n=e(68404),l=e(37556),s=e(68183),i=e(37951),f=e(26202),c=e(44342),o=e(64319);const m=["5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"],r=class extends n.PureComponent{constructor(p){super(p),this.onChangeSelect=E=>{const{onIntervalChanged:h}=this.props;h&&E.value!=null&&h(E.value)}}getVariant(){return this.props.isLive?"primary":this.props.isLoading?"destructive":this.props.primary?"primary":this.props.isOnCanvas?"canvas":"default"}render(){const{onRefresh:p,intervals:E,tooltip:h,value:a,text:v,isLoading:x,noIntervalPicker:y,width:C}=this.props,P=a||"",D=this.getVariant(),M=g({intervals:E}),b=M.find(({value:K})=>K===P),R=d(r.offOption.value);let B=b||R;B.label===R.label&&(B={value:""});const w=B.ariaLabel,A=(0,i.t)("refresh-picker.aria-label.duration-selected","Choose refresh time interval with current interval {{durationAriaLabel}} selected",{durationAriaLabel:w}),I=(0,i.t)("refresh-picker.aria-label.choose-interval","Auto refresh turned off. Choose refresh time interval"),F=B.value===""?I:A;return n.createElement(f.h,{className:"refresh-picker"},n.createElement(o.h,{"aria-label":v,tooltip:h,onClick:p,variant:D,icon:x?"fa fa-spinner":"sync",style:C?{width:C}:void 0,"data-testid":s.wl.components.RefreshPicker.runButtonV2},v),!y&&n.createElement(c.d,{value:B,options:M,onChange:this.onChangeSelect,variant:D,title:(0,i.t)("refresh-picker.select-button.auto-refresh","Set auto refresh interval"),"data-testid":s.wl.components.RefreshPicker.intervalButtonV2,"aria-label":F}))}};let u=r;u.offOption={label:"Off",value:"",ariaLabel:"Turn off auto refresh"},u.liveOption={label:"Live",value:"LIVE",ariaLabel:"Turn on live streaming"},u.isLive=p=>p===r.liveOption.value;function d(p){return p===u.liveOption.value?{label:(0,i.t)("refresh-picker.live-option.label","Live"),value:"LIVE",ariaLabel:(0,i.t)("refresh-picker.live-option.aria-label","Turn on live streaming")}:{label:(0,i.t)("refresh-picker.off-option.label","Off"),value:"",ariaLabel:(0,i.t)("refresh-picker.off-option.aria-label","Turn off auto refresh")}}function g({intervals:p=m}={}){const E=p.map(h=>{const a=(0,l.RA)(h),v=(0,t.Z)(a);return{label:h,value:h,ariaLabel:v}});return E.unshift(d(u.offOption.value)),E}},39856:(Z,O,e)=>{"use strict";e.d(O,{D:()=>l});var t=e(68404),n=e(8928);function l({component:s,content:i,...f}){return t.createElement(s||"span",{dangerouslySetInnerHTML:{__html:n.QX.sanitize(i)},...f})}},34517:(Z,O,e)=>{"use strict";e.d(O,{c:()=>o});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(31403),f=e(95569);const c=()=>({noRadiusInput:t.css`
      border-bottom-right-radius: 0 !important;
      border-top-right-radius: 0 !important;
    `,noRadiusButton:t.css`
      border-bottom-left-radius: 0 !important;
      border-top-left-radius: 0 !important;
    `}),o=({label:m="Password",labelWidth:r,inputWidth:u=12,onReset:d,isConfigured:g,tooltip:p,placeholder:E="Password",interactive:h,...a})=>{const v=c();return s.createElement(f.W,{label:m,tooltip:p,interactive:h,labelWidth:r,inputEl:g?s.createElement(s.Fragment,null,s.createElement("input",{type:"text",className:(0,t.cx)(`gf-form-input width-${u}`,v.noRadiusInput),disabled:!0,value:"configured",...(0,n.omit)(a,"value")}),s.createElement(i.zx,{onClick:d,variant:"secondary",type:"button"},"Reset")):s.createElement("input",{type:"password",className:`gf-form-input width-${u}`,placeholder:E,...a})})};o.displayName="SecretFormField"},52953:(Z,O,e)=>{"use strict";e.d(O,{m4:()=>c});var t=e(68404),n=e(31403),l=e(46967),s=e(52081);const i="configured",f="Reset",c=({isConfigured:o,onReset:m,...r})=>t.createElement(s.Lh,null,!o&&t.createElement(l.I,{...r,type:"password"}),o&&t.createElement(l.I,{...r,type:"text",disabled:!0,value:i}),o&&t.createElement(n.zx,{onClick:m,variant:"secondary"},f))},70862:(Z,O,e)=>{"use strict";e.d(O,{m:()=>t.m4});var t=e(52953)},30810:(Z,O,e)=>{"use strict";e.d(O,{Zk:()=>r});var t=e(9892),n=e(68404),l=e(72648),s=e(31403),i=e(52081),f=e(97379);const c="configured",o="Reset",m=u=>({configuredStyle:t.css`
      min-height: ${u.spacing(u.components.height.md)};
      padding-top: ${u.spacing(.5)};
      resize: none;
    `}),r=({isConfigured:u,onReset:d,...g})=>{const p=(0,l.wW)(m);return n.createElement(i.Lh,null,!u&&n.createElement(f.K,{...g}),u&&n.createElement(f.K,{...g,rows:1,disabled:!0,value:c,className:(0,t.cx)(p.configuredStyle)}),u&&n.createElement(s.zx,{onClick:d,variant:"secondary"},o))}},88892:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>t.Zk});var t=e(30810)},70044:(Z,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(72648),f=e(77117),c=e(97924),o=e(28318),m=e(2357);function r({options:u,value:d,onChange:g,Component:p,className:E,allowCustomValue:h,allowEmptyValue:a,placeholder:v,disabled:x,inputMinWidth:y,inputPlaceholder:C,onExpandedChange:P,autofocus:D=!1,...M}){const[b,R,B,w]=(0,o._)(D,P),A=y?Math.max(y,R):R,I=(0,i.wW)(c.N);if(!B){const F=(0,n.isObject)(d)?d.label:d;return s.createElement(b,{disabled:x,Component:p||s.createElement(f.W,{className:(0,t.cx)(I.segment,{[I.queryPlaceholder]:v!==void 0&&!d,[I.disabled]:x},E)},F||v)})}return s.createElement(m.V,{...M,value:d&&!(0,n.isObject)(d)?{value:d}:d,placeholder:C,options:u,width:A,onClickOutside:()=>w(!1),allowCustomValue:h,allowEmptyValue:a,onChange:F=>{w(!1),g(F)}})}},68118:(Z,O,e)=>{"use strict";e.d(O,{V:()=>d});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(671),f=e(72648),c=e(37951),o=e(77117),m=e(2357),r=e(97924),u=e(28318);function d({value:p,onChange:E,loadOptions:h,reloadOptionsOnChange:a=!1,Component:v,className:x,allowCustomValue:y,allowEmptyValue:C,disabled:P,placeholder:D,inputMinWidth:M,inputPlaceholder:b,autofocus:R=!1,onExpandedChange:B,noOptionMessageHandler:w=g,...A}){const[I,F]=(0,i.Z)(h,[h]),[K,W,U,N]=(0,u._)(R,B),S=M?Math.max(M,W):W,Y=(0,f.wW)(r.N);if(!U){const Q=(0,n.isObject)(p)?p.label:p;return s.createElement(K,{onClick:a?void 0:F,disabled:P,Component:v||s.createElement(o.W,{className:(0,t.cx)(Y.segment,{[Y.queryPlaceholder]:D!==void 0&&!p,[Y.disabled]:P},x)},Q||D)})}return s.createElement(m.V,{...A,value:p&&!(0,n.isObject)(p)?{value:p}:p,placeholder:b,options:I.value??[],loadOptions:a?F:void 0,width:S,noOptionsMessage:w(I),allowCustomValue:y,allowEmptyValue:C,onClickOutside:()=>{N(!1)},onChange:Q=>{N(!1),E(Q)}})}function g(p){return p.loading?(0,c.t)("grafana-ui.segment-async.loading","Loading options..."):p.error?(0,c.t)("grafana-ui.segment-async.error","Failed to load options"):!Array.isArray(p.value)||p.value.length===0?(0,c.t)("grafana-ui.segment-async.no-options","No options found"):""}},58564:(Z,O,e)=>{"use strict";e.d(O,{X:()=>r});var t=e(9892),n=e(68404),l=e(92787),s=e(72648),i=e(4176),f=e(77117),c=e(97924),o=e(28318);const m=14;function r({value:u,onChange:d,Component:g,className:p,placeholder:E,inputPlaceholder:h,disabled:a,autofocus:v=!1,onExpandedChange:x,...y}){const C=(0,n.useRef)(null),[P,D]=(0,n.useState)(u),[M,b]=(0,n.useState)((0,i.X1)((u||"").toString(),m).width),[R,,B,w]=(0,o._)(v,x),A=(0,s.wW)(c.N);if((0,l.Z)(C,()=>{w(!1),d(P)}),!B)return n.createElement(R,{disabled:a,Component:g||n.createElement(f.W,{className:(0,t.cx)(A.segment,{[A.queryPlaceholder]:E!==void 0&&!P,[A.disabled]:a},p)},u||E)});const I=t.css`
    width: ${Math.max(M+20,32)}px;
  `;return n.createElement("input",{...y,ref:C,autoFocus:!0,className:(0,t.cx)("gf-form gf-form-input",I),value:P,placeholder:h,onChange:F=>{const{width:K}=(0,i.X1)(F.target.value,m);b(K),D(F.target.value)},onBlur:()=>{w(!1),d(P)},onKeyDown:F=>{[13,27].includes(F.keyCode)&&(w(!1),d(P))}})}},30991:(Z,O,e)=>{"use strict";e.d(O,{f:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(11543),i=e(77117);const f=({label:o,htmlFor:m,children:r,fill:u})=>{const d=(0,l.wW)(c);return n.createElement(n.Fragment,null,n.createElement(s.Z,null,n.createElement(i.W,{htmlFor:m,width:12,className:d.label},o),r,u&&n.createElement("div",{className:d.fill},n.createElement(i.W,null,""))))},c=o=>({label:t.css`
    color: ${o.colors.primary.text};
  `,fill:t.css`
    flex-grow: 1;
    margin-bottom: ${o.spacing(.5)};
  `})},2357:(Z,O,e)=>{"use strict";e.d(O,{V:()=>s});var t=e(68404),n=e(72648),l=e(53217);function s({value:i,placeholder:f="",options:c=[],onChange:o,onClickOutside:m,loadOptions:r=void 0,width:u,noOptionsMessage:d="",allowCustomValue:g=!1,allowEmptyValue:p=!1,...E}){const h=(0,t.useRef)(null),a=(0,n.l4)();let v=u>0?u/a.spacing.gridSize:void 0,x,y={};return r?(x=l.qb,y={loadOptions:r,defaultOptions:!0}):x=l.Ph,t.createElement("div",{...E,ref:h},t.createElement(x,{width:v,noOptionsMessage:d,placeholder:f,autoFocus:!0,isOpen:!0,onChange:o,options:c,value:i,closeMenuOnSelect:!1,onCloseMenu:()=>{if(h&&h.current){const C=h.current.querySelector('input[id^="react-select-"]');C&&(C.value||p)?o({value:C.value,label:C.value}):m()}},allowCustomValue:g,...y}))}},97924:(Z,O,e)=>{"use strict";e.d(O,{N:()=>n});var t=e(9892);const n=l=>{const s="v1"in l?l.v1.palette:l.palette;return{segment:t.css`
      cursor: pointer;
      width: auto;
    `,queryPlaceholder:t.css`
      color: ${s.gray2};
    `,disabled:t.css`
      cursor: not-allowed;
      opacity: 0.65;
      box-shadow: none;
    `}}},28318:(Z,O,e)=>{"use strict";e.d(O,{_:()=>s});var t=e(68404),n=e(72648),l=e(31403);const s=(i,f)=>{const c=(0,t.useRef)(null),o=(0,n.wW)(l.gN),[m,r]=(0,t.useState)(i),[u,d]=(0,t.useState)(0),g=E=>{r(E),f&&f(E)};return[({Component:E,onClick:h,disabled:a})=>t.createElement("button",{type:"button",className:o,ref:c,disabled:a,onClick:()=>{g(!0),c&&c.current&&d(c.current.clientWidth*1.25),h?.()}},E),u,m,g]}},62997:(Z,O,e)=>{"use strict";e.d(O,{m:()=>l});var t=e(68404),n=e(39904);const l=({isOpen:s})=>{const i=s?"search":"angle-down",f=s?"sm":"md";return t.createElement(n.J,{name:i,size:f})}},53217:(Z,O,e)=>{"use strict";e.d(O,{M8:()=>X,qb:()=>Ce,gY:()=>ne,NU:()=>fe,Ph:()=>ie,eI:()=>M,LT:()=>ee});var t=e(68404),n=e(47935),l=e(68165),s=e(64118),i=e(36183),f=e(63134),c=e(72648),o=e(39904),m=e(67487),r=e(62997),u=e(9892),d=e(46967);const g=t.forwardRef((te,ae)=>{const{children:_}=te,ve=(0,c.l4)(),Ve=(0,d.H)({theme:ve,invalid:!1});return t.createElement("div",{className:(0,u.cx)(Ve.suffix,u.css`
          position: relative;
        `),ref:ae},_)});g.displayName="IndicatorsContainer";var p=e(7804),E=e(73267);const h=(0,p.B)((te,ae,_)=>{const ve=(0,d.H)({theme:te,invalid:ae});return{input:(0,u.cx)((0,E.nf)(te),u.css`
        width: 100%;
        max-width: 100%;
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
        padding-right: 0;
        position: relative;
        box-sizing: border-box;
      `,_&&u.css`
          padding-left: 0;
        `),prefix:(0,u.cx)(ve.prefix,u.css`
        position: relative;
      `)}}),a=t.forwardRef(function({focused:ae,invalid:_,disabled:ve,children:Ve,innerProps:it,prefix:rt,...pe},Ie){const We=(0,c.l4)(),Je=h(We,_,!!rt);return t.createElement("div",{className:Je.input,...it,ref:Ie},rt&&t.createElement("div",{className:(0,u.cx)(Je.prefix)},rt),Ve)});var v=e(8180),x=e(27501);const y=({innerProps:te,children:ae})=>{const _=(0,c.l4)(),ve=(0,x.D)(_);return t.createElement("div",{...te,className:ve.multiValueContainer},ae)},C=({children:te,innerProps:ae})=>{const _=(0,c.l4)(),ve=(0,x.D)(_);return t.createElement(v.h,{...ae,name:"times",size:"sm",className:ve.multiValueRemove})};var P=e(81121),D=e(85419);const M=te=>{const{isDisabled:ae,isFocused:_,children:ve,selectProps:{invalid:Ve=!1}}=te,it=(0,c.l4)(),rt=b(it,_,ae,Ve);return t.createElement(P.c.SelectContainer,{...te,className:(0,u.cx)(rt.wrapper,te.className)},ve)},b=(0,p.B)((te,ae,_,ve)=>{const Ve=(0,d.H)({theme:te,invalid:ve});return{wrapper:(0,u.cx)(Ve.wrapper,(0,E.RK)(te,ve),ae&&u.css`
            ${(0,D.focusCss)(te.v1)}
          `,_&&Ve.inputDisabled,u.css`
          position: relative;
          box-sizing: border-box;
          /* The display property is set by the styles prop in SelectBase because it's dependant on the width prop  */
          flex-direction: row;
          flex-wrap: wrap;
          align-items: stretch;
          justify-content: space-between;

          min-height: 32px;
          height: auto;
          max-width: 100%;

          /* Input padding is applied to the InputControl so the menu is aligned correctly */
          padding: 0;
          cursor: ${_?"not-allowed":"pointer"};
        `)}});var R=e(82897),B=e(75478),w=e(43565),A=e(68226);const I=({children:te,maxHeight:ae,innerRef:_,innerProps:ve})=>{const Ve=(0,c.l4)(),it=(0,x.D)(Ve);return t.createElement("div",{...ve,className:it.menu,style:{maxHeight:ae},"aria-label":"Select options menu"},t.createElement(A.$,{scrollRefCallback:_,autoHide:!1,autoHeightMax:"inherit",hideHorizontalTrack:!0},te))};I.displayName="SelectMenu";const F=37,K=7,W=({children:te,maxHeight:ae,options:_,getValue:ve})=>{const Ve=(0,c.l4)(),it=(0,x.D)(Ve),[rt]=ve(),Ie=(rt?_.findIndex(Ae=>Ae.value===rt.value):0)*F;if(!Array.isArray(te))return null;const Je=((0,R.max)(_.map(Ae=>Ae.label?.length))??0)*K,He=Math.min(_.length*F,ae);return t.createElement(B.t7,{className:it.menu,height:He,width:Je,"aria-label":"Select options menu",itemCount:te.length,itemSize:F,initialScrollOffset:Ie},({index:Ae,style:et})=>t.createElement("div",{style:{...et,overflow:"hidden"}},te[Ae]))};W.displayName="VirtualizedSelectMenu";const U=({children:te,data:ae,innerProps:_,innerRef:ve,isFocused:Ve,isSelected:it,renderOptionLabel:rt})=>{const pe=(0,c.l4)(),Ie=(0,x.D)(pe),We=ae.icon?(0,w.iJ)(ae.icon):void 0;return t.createElement("div",{ref:ve,className:(0,u.cx)(Ie.option,Ve&&Ie.optionFocused,it&&Ie.optionSelected,ae.isDisabled&&Ie.optionDisabled),..._,"aria-label":"Select option",title:ae.title},We&&t.createElement(o.J,{name:We,className:Ie.optionIcon}),ae.imgUrl&&t.createElement("img",{className:Ie.optionImage,src:ae.imgUrl,alt:ae.label||ae.value}),t.createElement("div",{className:Ie.optionBody},t.createElement("span",null,rt?rt(ae):te),ae.description&&t.createElement("div",{className:Ie.optionDescription},ae.description),ae.component&&t.createElement(ae.component,null)))};U.displayName="SelectMenuOptions";var N=e(874),S=e(24901);class Y extends t.Component{render(){const{children:ae}=this.props,{selectProps:_}=this.props;if(_&&Array.isArray(ae)&&Array.isArray(ae[0])&&_.maxVisibleValues!==void 0&&!(_.showAllSelectedWhenOpen&&_.menuIsOpen)){const[ve,...Ve]=ae,it=ve.slice(0,_.maxVisibleValues);return this.renderContainer([it,...Ve])}return this.renderContainer(ae)}renderContainer(ae){const{isMulti:_,theme:ve}=this.props,Ve=(0,x.D)(ve),it=(0,u.cx)(Ve.valueContainer,_&&Ve.valueContainerMulti);return t.createElement("div",{className:it},ae)}}const Q=(0,c.HE)(Y);var z=e(54897);const G=(te,ae)=>{if(Array.isArray(te)){const _=te.filter(Boolean);return _?.length?_:void 0}if(typeof te=="object")return[te];if(typeof te=="string"||typeof te=="number"){const _=k(te,ae);if(_)return[_]}},k=(te,ae)=>{for(const _ of ae)if("options"in _){let ve=k(te,_.options);if(ve)return ve}else if("value"in _&&_.value===te)return _;return null},j=te=>te.map(({description:ae,..._})=>_),de=te=>{const{maxVisibleValues:ae,selectedValuesCount:_,menuIsOpen:ve,showAllSelectedWhenOpen:Ve}=te;return ae!==void 0&&_>ae&&!(Ve&&ve)?t.createElement("span",{key:"excess-values",id:"excess-values"},"(+",_-ae,")"):null},ge=te=>{const{children:ae,innerProps:_,selectProps:{menuIsOpen:ve,onMenuClose:Ve,onMenuOpen:it},isFocused:rt,isMulti:pe,getValue:Ie,innerRef:We}=te,Je=te.selectProps;return Je.renderControl?t.createElement(Je.renderControl,{isOpen:ve,value:pe?Ie():Ie()[0],ref:We,onClick:ve?Ve:it,onBlur:Ve,disabled:!!Je.disabled,invalid:!!Je.invalid}):t.createElement(a,{ref:We,innerProps:_,prefix:Je.prefix,focused:rt,invalid:!!Je.invalid,disabled:!!Je.disabled},ae)};function re({allowCustomValue:te=!1,allowCreateWhileLoading:ae=!1,"aria-label":_,autoFocus:ve=!1,backspaceRemovesValue:Ve=!0,cacheOptions:it,className:rt,closeMenuOnSelect:pe=!0,components:Ie,createOptionPosition:We="last",defaultOptions:Je,defaultValue:He,disabled:Ae=!1,filterOption:et,formatCreateLabel:_e,getOptionLabel:Se,getOptionValue:Fe,inputValue:Xe,invalid:Qe,isClearable:ct=!1,id:ht,isLoading:ft=!1,isMulti:Re=!1,inputId:nt,isOpen:le,isOptionDisabled:Pe,isSearchable:Oe=!0,loadOptions:Le,loadingMessage:Ye="Loading options...",maxMenuHeight:be=300,minMenuHeight:Te,maxVisibleValues:me,menuPlacement:he="auto",menuPosition:De,menuShouldPortal:$e=!0,noOptionsMessage:ke="No options found",onBlur:tt,onChange:Ge,onCloseMenu:dt,onCreateOption:pt,onInputChange:Ke,onKeyDown:je,onOpenMenu:ot,onFocus:at,openMenuOnFocus:xt=!1,options:Dt=[],placeholder:wt="Choose",prefix:sn,renderControl:mn,showAllSelectedWhenOpen:Dn=!0,tabSelectsValue:Rn=!0,value:St,virtualized:At=!1,width:Wt,isValidNewOption:Qt,formatOptionLabel:jt}){const Xt=(0,c.l4)(),tn=(0,x.D)(Xt),on=(0,t.useRef)(null),[dn,$t]=(0,t.useState)(!1),qt=(0,z.O)(Xt,Wt);(0,t.useEffect)(()=>{if(Le&&le&&on.current&&on.current.controlRef&&he==="auto"){const Nn=window.innerHeight-on.current.controlRef.getBoundingClientRect().bottom;$t(Nn<be)}},[be,he,Le,le]);const Vt=(0,t.useCallback)((Nn,Wn)=>{if(Re&&Nn==null)return Ge([],Wn);Ge(Nn,Wn)},[Re,Ge]);let nn=n.ZP;const un={};let En={},cn;if(Re&&Le)cn=St;else if(Re&&St&&Array.isArray(St)&&!Le)cn=St.map(Nn=>{const Wn=k(Nn.value??Nn,Dt);return!te||Wn?Wn:typeof Nn=="string"?(0,f.E)(Nn):Nn});else if(Le){const Nn=He||St;cn=Nn?[Nn]:[]}else cn=G(St,Dt);const wn={"aria-label":_,autoFocus:ve,backspaceRemovesValue:Ve,captureMenuScroll:!1,closeMenuOnSelect:pe,defaultValue:He,disabled:Ae,filterOption:et,getOptionLabel:Se,getOptionValue:Fe,inputValue:Xe,invalid:Qe,isClearable:ct,id:ht,isDisabled:Ae,isLoading:ft,isMulti:Re,inputId:nt,isOptionDisabled:Pe,isSearchable:Oe,maxMenuHeight:be,minMenuHeight:Te,maxVisibleValues:me,menuIsOpen:le,menuPlacement:he==="auto"&&dn?"top":he,menuPosition:De,menuShouldBlockScroll:!0,menuPortalTarget:$e&&typeof document<"u"?document.body:void 0,menuShouldScrollIntoView:!1,onBlur:tt,onChange:Vt,onInputChange:Ke,onKeyDown:je,onMenuClose:dt,onMenuOpen:ot,onFocus:at,formatOptionLabel:jt,openMenuOnFocus:xt,options:At?j(Dt):Dt,placeholder:wt,prefix:sn,renderControl:mn,showAllSelectedWhenOpen:Dn,tabSelectsValue:Rn,value:Re?cn:cn?.[0]};te&&(nn=i.Z,un.allowCreateWhileLoading=ae,un.formatCreateLabel=_e??ce,un.onCreateOption=pt,un.createOptionPosition=We,un.isValidNewOption=Qt),Le&&(nn=te?s.Z:l.Z,En={loadOptions:Le,cacheOptions:it,defaultOptions:Je});const Gn=At?W:I;return t.createElement(t.Fragment,null,t.createElement(nn,{ref:on,components:{MenuList:Gn,Group:N.n,ValueContainer:Q,IndicatorsContainer(Nn){const{selectProps:Wn}=Nn,{value:qn,showAllSelectedWhenOpen:ga,maxVisibleValues:ea,menuIsOpen:ca}=Wn;if(ea!==void 0){const ba=qn.length,zn=[...Nn.children];return zn.splice(-1,0,de({maxVisibleValues:ea,selectedValuesCount:ba,showAllSelectedWhenOpen:ga,menuIsOpen:ca})),t.createElement(g,{...Nn},zn)}return t.createElement(g,{...Nn})},IndicatorSeparator(){return t.createElement(t.Fragment,null)},Control:ge,Option:U,ClearIndicator(Nn){const{clearValue:Wn}=Nn;return t.createElement(o.J,{name:"times",role:"button","aria-label":"select-clear-value",className:tn.singleValueRemove,onMouseDown:qn=>{qn.preventDefault(),qn.stopPropagation(),Wn()}})},LoadingIndicator(){return t.createElement(m.$,{inline:!0})},LoadingMessage(){return t.createElement("div",{className:tn.loadingMessage},Ye)},NoOptionsMessage(){return t.createElement("div",{className:tn.loadingMessage,"aria-label":"No options provided"},ke)},DropdownIndicator(Nn){return t.createElement(r.m,{isOpen:Nn.selectProps.menuIsOpen})},SingleValue(Nn){return t.createElement(S.P,{...Nn,disabled:Ae})},SelectContainer:M,MultiValueContainer:y,MultiValueRemove:C,...Ie},styles:qt,className:rt,...wn,...un,...En}))}function ce(te){return t.createElement("div",{style:{display:"flex",gap:"8px",alignItems:"center"}},t.createElement("div",null,te),t.createElement("div",{style:{flexGrow:1}}),t.createElement("div",{className:"muted small",style:{display:"flex",gap:"8px",alignItems:"center"}},"Hit enter to add"))}function ie(te){return t.createElement(re,{...te})}function fe(te){return t.createElement(re,{...te,isMulti:!0})}function Ce(te){return t.createElement(re,{...te})}function ee(te){return t.createElement(re,{virtualized:!0,...te})}function ne(te){return t.createElement(re,{virtualized:!0,...te})}function X(te){return t.createElement(re,{...te,isMulti:!0})}},874:(Z,O,e)=>{"use strict";e.d(O,{n:()=>o});var t=e(9892),n=e(68404),l=e(7804),s=e(72648),i=e(39904);const f=(0,l.B)(m=>({header:t.css`
      display: flex;
      align-items: center;
      justify-content: flex-start;
      justify-items: center;
      cursor: pointer;
      padding: 7px 10px;
      width: 100%;
      border-bottom: 1px solid ${m.colors.background.secondary};

      &:hover {
        color: ${m.colors.text.maxContrast};
      }
    `,label:t.css`
      flex-grow: 1;
    `,icon:t.css`
      padding-right: 2px;
    `}));class c extends n.PureComponent{constructor(){super(...arguments),this.state={expanded:!1},this.onToggleChildren=()=>{this.setState(r=>({expanded:!r.expanded}))}}componentDidMount(){if(this.props.data.expanded)this.setState({expanded:!0});else if(this.props.selectProps&&this.props.selectProps.value){const{value:r}=this.props.selectProps.value;r&&this.props.options.some(u=>u.value===r)&&this.setState({expanded:!0})}}componentDidUpdate(r){r.selectProps.inputValue!==""&&this.setState({expanded:!0})}render(){const{children:r,label:u,theme:d}=this.props,{expanded:g}=this.state,p=f(d);return n.createElement("div",null,n.createElement("div",{className:p.header,onClick:this.onToggleChildren},n.createElement("span",{className:p.label},u),n.createElement(i.J,{className:p.icon,name:g?"angle-up":"angle-down"})," "),g&&r)}}const o=(0,s.HE)(c)},24901:(Z,O,e)=>{"use strict";e.d(O,{P:()=>d});var t=e(9892),n=e(68404),l=e(81121),s=e(43565),i=e(72648);function f(p,E={}){const{duration:h=250,delay:a=250}=E,[v,x]=(0,n.useState)(p),y=(0,n.useRef)();return(0,n.useEffect)(()=>{let C;if(p)C=setTimeout(()=>{y.current=new Date,x(p)},a);else{const P=y.current?Date.now()-y.current.valueOf():0,D=()=>{y.current=void 0,x(p)};P>=h?D():C=setTimeout(D,h-P)}return()=>{C&&(clearTimeout(C),C=void 0)}},[p,h,a]),v}var c=e(39904),o=e(67487),m=e(19801),r=e(41200);const u=p=>({singleValue:t.css`
      label: singleValue;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
      grid-area: 1 / 1 / 2 / 3;
    `,spinnerWrapper:t.css`
      width: 16px;
      height: 16px;
      display: inline-block;
      margin-right: 10px;
      position: relative;
      vertical-align: middle;
      overflow: hidden;
    `,spinnerIcon:t.css`
      width: 100%;
      height: 100%;
      position: absolute;
    `,optionIcon:t.css`
      margin-right: ${p.spacing(1)};
      color: ${p.colors.text.secondary};
    `,disabled:t.css`
      color: ${p.colors.text.disabled};
    `,isOpen:t.css`
      color: ${p.colors.text.disabled};
    `}),d=p=>{const{children:E,data:h,isDisabled:a}=p,v=(0,i.wW)(u),x=f(h.loading||!1,{delay:250,duration:750}),y=h.icon?(0,s.iJ)(h.icon):void 0;return n.createElement(l.c.SingleValue,{...p,className:(0,t.cx)(v.singleValue,a&&v.disabled,p.selectProps.menuIsOpen&&v.isOpen)},h.imgUrl?n.createElement(g,{loading:x,imgUrl:h.imgUrl,styles:v,alt:h.label??h.value}):n.createElement(n.Fragment,null,n.createElement(r.R,{horizontal:!0,size:16,visible:x,duration:150},n.createElement("div",{className:v.spinnerWrapper},n.createElement(o.$,{className:v.spinnerIcon,inline:!0}))),y&&n.createElement(c.J,{name:y,role:"img",className:v.optionIcon})),!h.hideText&&E)},g=p=>n.createElement("div",{className:p.styles.spinnerWrapper},n.createElement(m.n,{duration:150,visible:p.loading},n.createElement(o.$,{className:p.styles.spinnerIcon,inline:!0})),n.createElement(m.n,{duration:150,visible:!p.loading},n.createElement("img",{className:p.styles.spinnerIcon,src:p.imgUrl,alt:p.alt})))},27501:(Z,O,e)=>{"use strict";e.d(O,{D:()=>l});var t=e(9892),n=e(7804);const l=(0,n.B)(s=>({menu:t.css`
      label: grafana-select-menu;
      background: ${s.components.dropdown.background};
      box-shadow: ${s.shadows.z3};
      position: relative;
      min-width: 100%;
      z-index: 1;
    `,option:t.css`
      label: grafana-select-option;
      padding: 8px;
      display: flex;
      align-items: center;
      flex-direction: row;
      flex-shrink: 0;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;

      &:hover {
        background: ${s.colors.action.hover};
      }
    `,optionIcon:t.css`
      margin-right: ${s.spacing(1)};
    `,optionImage:t.css`
      label: grafana-select-option-image;
      width: 16px;
      margin-right: 10px;
    `,optionDescription:t.css`
      label: grafana-select-option-description;
      font-weight: normal;
      font-size: ${s.typography.size.sm};
      color: ${s.colors.text.secondary};
      white-space: normal;
      line-height: ${s.typography.body.lineHeight};
    `,optionBody:t.css`
      label: grafana-select-option-body;
      display: flex;
      font-weight: ${s.typography.fontWeightMedium};
      flex-direction: column;
      flex-grow: 1;
    `,optionFocused:t.css`
      label: grafana-select-option-focused;
      background: ${s.colors.action.focus};
    `,optionSelected:t.css`
      background: ${s.colors.action.selected};
    `,optionDisabled:t.css`
      label: grafana-select-option-disabled;
      background-color: ${s.colors.action.disabledBackground};
      color: ${s.colors.action.disabledText};
      cursor: not-allowed;
    `,singleValue:t.css`
      label: grafana-select-single-value;
      color: ${s.components.input.text};
      grid-area: 1 / 1 / 2 / 3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      box-sizing: border-box;
      max-width: 100%;
    `,valueContainer:t.css`
      label: grafana-select-value-container;
      align-items: center;
      display: grid;
      position: relative;
      box-sizing: border-box;
      flex: 1 1 0%;
      outline: none;
      overflow: hidden;
    `,valueContainerMulti:t.css`
      label: grafana-select-value-container-multi;
      flex-wrap: wrap;
      display: flex;
    `,loadingMessage:t.css`
      label: grafana-select-loading-message;
      padding: ${s.spacing(1)};
      text-align: center;
      width: 100%;
    `,multiValueContainer:t.css`
      label: grafana-select-multi-value-container;
      display: flex;
      align-items: center;
      line-height: 1;
      background: ${s.colors.background.secondary};
      border-radius: ${s.shape.borderRadius()};
      margin: ${s.spacing(.25,1,.25,0)};
      padding: ${s.spacing(.25,0,.25,1)};
      color: ${s.colors.text.primary};
      font-size: ${s.typography.size.sm};

      &:hover {
        background: ${s.colors.emphasize(s.colors.background.secondary)};
      }
    `,multiValueRemove:t.css`
      label: grafana-select-multi-value-remove;
      margin: ${s.spacing(0,.5)};
      cursor: pointer;
      svg {
        margin-bottom: 0;
      }
    `,singleValueRemove:t.css`
      cursor: pointer;
      &:hover {
        color: ${s.colors.text.primary};
      }
    `}))},54897:(Z,O,e)=>{"use strict";e.d(O,{O:()=>l,Z:()=>n});var t=e(68404);function n(s){return{clearIndicator:()=>({}),container:()=>({}),control:()=>({}),dropdownIndicator:()=>({}),group:()=>({}),groupHeading:()=>({}),indicatorsContainer:()=>({}),indicatorSeparator:()=>({}),input:function(i){return{...i,color:"inherit",margin:0,padding:0,zIndex:1}},loadingIndicator:()=>({}),loadingMessage:()=>({}),menu:()=>({}),menuList:({maxHeight:i})=>({maxHeight:i}),multiValue:()=>({}),multiValueLabel:()=>({}),multiValueRemove:()=>({}),noOptionsMessage:()=>({}),option:()=>({}),placeholder:i=>({...i,color:s.colors.text.secondary}),singleValue:()=>({}),valueContainer:()=>({})}}function l(s,i){return(0,t.useMemo)(()=>({...n(s),menuPortal:f=>({...f,zIndex:s.zIndex.portal}),menu:({top:f,bottom:c,position:o})=>({top:f,bottom:c,position:o,minWidth:"100%",zIndex:s.zIndex.dropdown}),container:()=>({width:i?s.spacing(i):"100%",display:i==="auto"?"inline-flex":"flex"}),option:(f,c)=>({...f,opacity:c.isDisabled?.5:1})}),[s,i])}},60857:()=>{"use strict"},41490:(Z,O,e)=>{"use strict";e.d(O,{F:()=>g});var t=e(82897),n=e.n(t),l=e(68404),s=e(91017),i=e(59980),f=e(15402),c=e(24434),o=e(53704),m=e(71735),r=e(29076),u=e(5562);function d(p){return{label:p,value:stringToMs(p)}}class g extends l.PureComponent{constructor(E){super(E),this.propsSubject=new s.x,this.subscription=null}componentDidMount(){this.subscription=this.propsSubject.pipe((0,o.w)(E=>u.dP.isLive(E.interval)?(0,i.of)({}):E.loading?f.C:(0,c.F)((0,r.e0)(E.interval))),(0,m.b)(()=>this.props.func())).subscribe(),this.propsSubject.next(this.props)}componentDidUpdate(E){u.dP.isLive(E.interval)&&u.dP.isLive(this.props.interval)||(0,t.isEqual)(E,this.props)||this.propsSubject.next(this.props)}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe(),this.propsSubject.unsubscribe()}render(){return null}}},50954:(Z,O,e)=>{"use strict";e.d(O,{PR:()=>a,ZH:()=>u,rD:()=>g});var t=e(82897),n=e.n(t),l=e(21760),s=e(20251),i=e(24177),f=e(67008),c=e(66926),o=e(36998),m=e(58230);const r=["reduceOptions","orientation"];function u(v,x,y){let C=v.options;if(v.fieldConfig=v.fieldConfig||{defaults:{},overrides:[]},x==="singlestat"&&y.angular)return d(v,y);for(const P of r)y.hasOwnProperty(P)&&(C[P]=(0,t.cloneDeep)(y[P]));return C}function d(v,x){const y=x.angular,C=l.TB.getIfExists(y.valueName),P={reduceOptions:{calcs:[C?C.id:l.gz.mean]},orientation:s.wm.Horizontal},D={};if(y.format&&(D.unit=y.format),y.tableColumn&&(P.reduceOptions.fields=`/^${y.tableColumn}$/`),y.nullPointMode&&(D.nullValueMode=y.nullPointMode),y.nullText&&(D.noValue=y.nullText),(y.decimals||y.decimals===0)&&(D.decimals=y.decimals),y.thresholds&&y.colors){const b=y.thresholds.split(",").map(B=>Number(B.trim())),R=[];for(const B of y.colors){const w=R.length-1;w>=0?R.push({value:b[w],color:B}):R.push({value:-1/0,color:B})}D.thresholds={mode:i.H.Absolute,steps:R}}const M=(0,f.Jb)(y,D.thresholds);return M&&M.length&&(D.mappings=M),y.gauge&&y.gauge.show&&(D.min=y.gauge.minValue,D.max=y.gauge.maxValue),v.fieldConfig.defaults=D,P}function g(v){if(!v.options)return{};const x=parseFloat(v.pluginVersion||"6.1");let y=v.options;x<6.2&&(y=E(y)),x<6.3&&(y=p(y));const{fieldOptions:C}=y;if(x<6.6&&C){if(C&&C.override){const{override:M,...b}=y.fieldOptions;y={...y,fieldOptions:{...b,overrides:[]}}}let P=C?.defaults?.thresholds;P?delete C.defaults.thresholds:(P=C?.thresholds,delete C.thresholds),P&&(C.defaults.thresholds={mode:i.H.Absolute,steps:P});const{defaults:D}=C;D.color&&typeof D.color=="string"&&(D.color={mode:c.S.Fixed,fixedColor:D.color}),(0,o.gb)(D)}if(x<7&&(v.fieldConfig=v.fieldConfig||{defaults:{},overrides:[]},v.fieldConfig={defaults:C&&C.defaults?{...v.fieldConfig.defaults,...C.defaults}:v.fieldConfig.defaults,overrides:C&&C.overrides?[...v.fieldConfig.overrides,...C.overrides]:v.fieldConfig.overrides},C&&(y.reduceOptions={values:C.values,limit:C.limit,calcs:C.calcs}),delete y.fieldOptions),x<7.1){const P=v.fieldConfig.defaults.title;P!=null&&(v.fieldConfig.defaults.displayName=P,delete v.fieldConfig.defaults.title)}if(x<8){const P=v.fieldConfig?.defaults;let D=P?.unit;D==="percent"?((0,t.isNumber)(P.min)||(P.min=0),(0,t.isNumber)(P.max)||(P.max=100)):D==="percentunit"&&((0,t.isNumber)(P.min)||(P.min=0),(0,t.isNumber)(P.max)||(P.max=1))}return y}function p(v){const{fieldOptions:x}=v;if(!x)return v;const{mappings:y,...C}=v.fieldOptions;let P;return v.thresholds&&(P={mode:i.H.Absolute,steps:h(v.thresholds)}),{...v,fieldOptions:{...C,defaults:{...x.defaults,mappings:y,thresholds:P}}}}function E(v){const{valueOptions:x}=v;if(!x)return v;const y={},C={};if(y.mappings=v.valueMappings,y.thresholds=v.thresholds,y.defaults=C,C.unit=x.unit,C.decimals=x.decimals,x.stat){const D=l.TB.get(x.stat);D&&(y.calcs=[D.id])}C.min=v.minValue,C.max=v.maxValue;const P={...v,fieldOptions:y};return(0,t.omit)(P,"valueMappings","thresholds","valueOptions","minValue","maxValue")}function h(v){if(!v||!v.length)return;const x=v.map(y=>({value:y.value===null?-1/0:y.value,color:y.color}));return(0,m.bP)(x),x[0].value=-1/0,x}function a(v){return(0,f.Jb)(v)}},70161:(Z,O,e)=>{"use strict";e.d(O,{PR:()=>t.PR,ZH:()=>t.ZH,rD:()=>t.rD});var t=e(50954)},97759:(Z,O,e)=>{"use strict";e.d(O,{U:()=>u});var t=e(9892),n=e(39341),l=e(63835),s=e(68404),i=e(72648),f=e(66084);const c=d=>{const{value:g,children:p,visible:E,placement:h,tipFormatter:a,...v}=d,x=(0,s.useRef)(),y=(0,s.useRef)(null),C=(0,i.wW)(o);function P(){y.current!==null&&cancelAnimationFrame(y.current)}function D(){y.current=requestAnimationFrame(()=>{x.current?.forcePopupAlign?.()})}return(0,s.useEffect)(()=>(E?D():P(),P),[g,E]),s.createElement(f.Z,{overlayClassName:C.tooltip,placement:h,overlay:a??g,overlayInnerStyle:{minHeight:"auto"},ref:x,visible:E,...v},p)},o=d=>({tooltip:(0,t.css)({position:"absolute",display:"block",visibility:"visible",fontSize:d.typography.bodySmall.fontSize,opacity:.9,padding:3})}),m=c;var r=e(29571);const u=({min:d,max:g,onChange:p,onAfterChange:E,orientation:h="horizontal",reverse:a,step:v,formatTooltipResult:x,value:y,tooltipAlwaysVisible:C=!0})=>{const P=(0,s.useCallback)(w=>{p?.(typeof w=="number"?[w,w]:w)},[p]),D=(0,s.useCallback)(w=>{E?.(typeof w=="number"?[w,w]:w)},[E]),M=h==="horizontal",b=(0,i.l4)(),R=(0,r.W)(b,M),B=(w,A)=>s.createElement(m,{value:A.value,visible:C||A.dragging,tipFormatter:x,placement:M?"top":"right"},w);return s.createElement("div",{className:(0,t.cx)(R.container,R.slider)},s.createElement(n.Global,{styles:R.tooltip}),s.createElement(l.Z,{min:d,max:g,step:v,defaultValue:y,range:!0,onChange:P,onAfterChange:D,vertical:!M,reverse:a,handleRender:B}))};u.displayName="RangeSlider"},90330:(Z,O,e)=>{"use strict";e.d(O,{i:()=>o});var t=e(9892),n=e(39341),l=e(63835),s=e(68404),i=e(72648),f=e(46967),c=e(29571);const o=({min:m,max:r,onChange:u,onAfterChange:d,orientation:g="horizontal",reverse:p,step:E,value:h,ariaLabelForHandle:a,marks:v,included:x})=>{const y=g==="horizontal",C=(0,i.l4)(),P=(0,c.W)(C,y,Boolean(v)),D=l.Z,[M,b]=(0,s.useState)(h??m),R=(0,s.useCallback)(K=>{const W=typeof K=="number"?K:K[0];b(W),u?.(W)},[b,u]),B=(0,s.useCallback)(K=>{let W=+K.target.value;Number.isNaN(W)&&(W=0),b(W),u&&u(W),d&&d(W)},[u,d]),w=(0,s.useCallback)(K=>{const W=+K.target.value;W>r?b(r):W<m&&b(m)},[r,m]),A=(0,s.useCallback)(K=>{const W=typeof K=="number"?K:K[0];d?.(W)},[d]),I=y?[]:[P.sliderInputVertical],F=y?[]:[P.sliderInputFieldVertical];return s.createElement("div",{className:(0,t.cx)(P.container,P.slider)},s.createElement(n.Global,{styles:P.tooltip}),s.createElement("div",{className:(0,t.cx)(P.sliderInput,...I)},s.createElement(D,{min:m,max:r,step:E,defaultValue:h,value:M,onChange:R,onAfterChange:A,vertical:!y,reverse:p,ariaLabelForHandle:a,marks:v,included:x}),s.createElement(f.I,{type:"text",className:(0,t.cx)(P.sliderInputField,...F),value:M,onChange:B,onBlur:w,min:m,max:r})))};o.displayName="Slider"},29571:(Z,O,e)=>{"use strict";e.d(O,{W:()=>s});var t=e(9892),n=e(39341),l=e(7804);const s=(0,l.B)((i,f,c=!1)=>{const{spacing:o}=i,m=i.colors.border.strong,r=i.colors.primary.main,u=i.colors.primary.main,g=`box-shadow: 0px 0px 0px 6px ${i.colors.primary.transparent}`;return{container:t.css`
      width: 100%;
      margin: ${f?"inherit":`${o(1,3,1,1)}`};
      padding-bottom: ${f&&c?i.spacing(1):"inherit"};
      height: ${f?"auto":"100%"};
    `,slider:t.css`
      .rc-slider {
        display: flex;
        flex-grow: 1;
        margin-left: 7px; // half the size of the handle to align handle to the left on 0 value
      }
      .rc-slider-mark {
        top: ${i.spacing(1.75)};
      }
      .rc-slider-mark-text {
        color: ${i.colors.text.disabled};
        font-size: ${i.typography.bodySmall.fontSize};
      }
      .rc-slider-mark-text-active {
        color: ${i.colors.text.primary};
      }
      .rc-slider-handle {
        border: none;
        background-color: ${u};
        box-shadow: ${i.shadows.z1};
        cursor: pointer;
        opacity: 1;
      }

      .rc-slider-handle:hover,
      .rc-slider-handle:active,
      .rc-slider-handle-click-focused:focus {
        ${g};
      }

      // The triple class names is needed because that's the specificity used in the source css :(
      .rc-slider-handle-dragging.rc-slider-handle-dragging.rc-slider-handle-dragging,
      .rc-slider-handle:focus-visible {
        box-shadow: 0 0 0 5px ${i.colors.text.primary};
      }

      .rc-slider-dot,
      .rc-slider-dot-active {
        background-color: ${i.colors.text.primary};
        border-color: ${i.colors.text.primary};
      }

      .rc-slider-track {
        background-color: ${r};
      }
      .rc-slider-rail {
        background-color: ${m};
        cursor: pointer;
      }
    `,tooltip:n.css`
      body {
        .rc-slider-tooltip {
          cursor: grab;
          user-select: none;
          z-index: ${i.zIndex.tooltip};
        }

        .rc-slider-tooltip-inner {
          color: ${i.colors.text.primary};
          background-color: transparent !important;
          border-radius: 0;
          box-shadow: none;
        }

        .rc-slider-tooltip-placement-top .rc-slider-tooltip-arrow {
          display: none;
        }

        .rc-slider-tooltip-placement-top {
          padding: 0;
        }
      }
    `,sliderInput:t.css`
      display: flex;
      flex-direction: row;
      align-items: center;
      width: 100%;
    `,sliderInputVertical:t.css`
      flex-direction: column;
      height: 100%;

      .rc-slider {
        margin: 0;
        order: 2;
      }
    `,sliderInputField:t.css`
      margin-left: ${i.spacing(3)};
      width: 60px;
      input {
        text-align: center;
      }
    `,sliderInputFieldVertical:t.css`
      margin: 0 0 ${i.spacing(3)} 0;
      order: 1;
    `}})},67307:(Z,O,e)=>{"use strict";e.d(O,{b:()=>p});var t=e(82897),n=e(68404),l=e(38067),s=e(14582),i=e(425),f=e(40538),c=e(3200),o=e(13347),m=e(2445),r=e(44405),u=e(45778);function d(E,h){const a=E.y.values.length,v={...E.y.config,...h};return(0,u.w)({frame:{refId:"sparkline",fields:[E.x??r.r.newField(a),{...E.y,config:v}],length:a}})}const g={drawStyle:f.l8.Line,showPoints:f.Jp.Auto,axisPlacement:f.LB.Hidden,pointSize:2};class p extends n.PureComponent{constructor(h){super(h);const a=d(h.sparkline,h.config);this.state={data:(0,m.Bj)(a,(0,m.i7)(a)),alignedDataFrame:a,configBuilder:this.prepareConfig(a)}}static getDerivedStateFromProps(h,a){const v=d(h.sparkline,h.config);return v?{...a,data:(0,m.Bj)(v,(0,m.i7)(v)),alignedDataFrame:v}:{...a}}componentDidUpdate(h,a){const{alignedDataFrame:v}=this.state;if(!v)return;let x=!1;h.sparkline!==this.props.sparkline?x=!(0,l.Ch)(this.state.alignedDataFrame,a.alignedDataFrame):x=!(0,t.isEqual)(h.config,this.props.config),x&&this.setState({configBuilder:this.prepareConfig(v)})}getYRange(h){let{min:a,max:v}=this.state.alignedDataFrame.fields[1].state?.range;return a===v?(a===0?v=100:(a=0,v*=2),[a,v]):[Math.max(a,h.config.min??-1/0),Math.min(v,h.config.max??1/0)]}prepareConfig(h){const{theme:a}=this.props,v=new o.U;v.setCursor({show:!1,x:!1,y:!1});const x=h.fields[0];v.addScale({scaleKey:"x",orientation:f.wN.Horizontal,direction:f.bQ.Right,isTime:!1,range:()=>{const{sparkline:y}=this.props;if(y.x){if(y.timeRange&&y.x.type===s.fS.time)return[y.timeRange.from.valueOf(),y.timeRange.to.valueOf()];const C=y.x.values;return[C.get(0),C.get(C.length-1)]}return[0,y.y.values.length-1]}}),v.addAxis({scaleKey:"x",theme:a,placement:f.LB.Hidden});for(let y=0;y<h.fields.length;y++){const C=h.fields[y],P=C.config,D={...g,...P.custom};if(C===x||C.type!==s.fS.number)continue;const M=P.unit||"__fixed";v.addScale({scaleKey:M,orientation:f.wN.Vertical,direction:f.bQ.Up,range:()=>this.getYRange(C)}),v.addAxis({scaleKey:M,theme:a,placement:f.LB.Hidden});const b=(0,i.fD)(C),R=b.getCalculator(C,a)(0,0),B=D.drawStyle===f.l8.Points?f.Jp.Always:D.showPoints;v.addSeries({pxAlign:!1,scaleKey:M,theme:a,colorMode:b,thresholds:P.thresholds,drawStyle:D.drawStyle,lineColor:D.lineColor??R,lineWidth:D.lineWidth,lineInterpolation:D.lineInterpolation,showPoints:B,pointSize:D.pointSize,fillOpacity:D.fillOpacity,fillColor:D.fillColor,lineStyle:D.lineStyle,gradientMode:D.gradientMode})}return v}render(){const{data:h,configBuilder:a}=this.state,{width:v,height:x,sparkline:y}=this.props;return n.createElement(c.N,{data:h,config:a,width:v,height:x,timeRange:y.timeRange})}}},67487:(Z,O,e)=>{"use strict";e.d(O,{$:()=>f});var t=e(9892),n=e(68404),l=e(7804),s=e(39904);const i=(0,l.B)((c,o)=>({wrapper:t.css`
      font-size: ${c}px;
      ${o?t.css`
            display: inline-block;
          `:""}
    `})),f=({className:c,inline:o=!1,iconClassName:m,style:r,size:u=16})=>{const d=i(u,o);return n.createElement("div",{"data-testid":"Spinner",style:r,className:(0,t.cx)(d.wrapper,c)},n.createElement(s.J,{className:(0,t.cx)("fa-spin",m),name:"fa fa-spinner"}))}},71294:(Z,O,e)=>{"use strict";e.d(O,{m:()=>f});var t=e(82897),n=e.n(t),l=e(68404),s=e(21760),i=e(53217);class f extends l.PureComponent{constructor(){super(...arguments),this.checkInput=()=>{const{stats:o,allowMultiple:m,defaultStat:r,onChange:u}=this.props,d=s.TB.list(o);if(d.length!==o.length){const g=d.map(E=>E.id),p=(0,t.difference)(o,g);console.warn("Unknown stats",p,o),u(d.map(E=>E.id))}!m&&o.length>1&&(console.warn("Removing extra stat",o),u([o[0]])),r&&o.length<1&&u([r])},this.onSelectionChange=o=>{const{onChange:m}=this.props;Array.isArray(o)?m(o.map(r=>r.value)):m(o&&o.value?[o.value]:[])}}componentDidMount(){this.checkInput()}componentDidUpdate(o){this.checkInput()}render(){const{stats:o,allowMultiple:m,defaultStat:r,placeholder:u,className:d,menuPlacement:g,width:p,inputId:E}=this.props,h=s.TB.selectOptions(o);return l.createElement(i.Ph,{value:h.current,className:d,isClearable:!r,isMulti:m,width:p,isSearchable:!0,options:h.options,placeholder:u,onChange:this.onSelectionChange,menuPlacement:g,inputId:E})}}f.defaultProps={allowMultiple:!1}},8944:(Z,O,e)=>{"use strict";e.d(O,{r:()=>m,x:()=>r});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(99227),f=e(72648),c=e(7804),o=e(85419);const m=s.forwardRef(({value:d,checked:g,onChange:p,id:E,label:h,disabled:a,...v},x)=>{g&&(0,i.d)("Switch","checked prop","value");const y=(0,f.l4)(),C=u(y),P=(0,s.useRef)(E||(0,n.uniqueId)("switch-"));return s.createElement("div",{className:(0,t.cx)(C.switch)},s.createElement("input",{type:"checkbox",disabled:a,checked:d,onChange:D=>{!a&&p?.(D)},id:P.current,...v,ref:x}),s.createElement("label",{htmlFor:P.current,"aria-label":h??"Toggle switch"}))});m.displayName="Switch";const r=s.forwardRef(({transparent:d,className:g,showLabel:p,label:E,value:h,id:a,...v},x)=>{const y=(0,f.l4)(),C=u(y,d);return s.createElement("div",{className:(0,t.cx)(C.inlineContainer,g,v.disabled&&C.disabled)},p&&s.createElement("label",{htmlFor:a,className:(0,t.cx)(C.inlineLabel,h&&C.inlineLabelEnabled,"inline-switch-label")},E),s.createElement(m,{...v,id:a,label:E,ref:x,value:h}))});r.displayName="Switch";const u=(0,c.B)((d,g)=>({switch:t.css`
      width: 32px;
      height: 16px;
      position: relative;

      input {
        opacity: 0;
        left: -100vw;
        z-index: -1000;
        position: absolute;

        &:disabled + label {
          background: ${d.colors.action.disabledBackground};
          cursor: not-allowed;
        }

        &:checked + label {
          background: ${d.colors.primary.main};
          border-color: ${d.colors.primary.main};

          &:hover {
            background: ${d.colors.primary.shade};
          }

          &::after {
            transform: translate3d(18px, -50%, 0);
            background: ${d.colors.primary.contrastText};
          }
        }

        &:focus + label,
        &:focus-visible + label {
          ${(0,o.getFocusStyles)(d)}
        }

        &:focus:not(:focus-visible) + label {
          ${(0,o.getMouseFocusStyles)(d)}
        }
      }

      label {
        width: 100%;
        height: 100%;
        cursor: pointer;
        border: none;
        border-radius: ${d.shape.radius.pill};
        background: ${d.components.input.background};
        border: 1px solid ${d.components.input.borderColor};
        transition: all 0.3s ease;

        &:hover {
          border-color: ${d.components.input.borderHover};
        }

        &::after {
          position: absolute;
          display: block;
          content: '';
          width: 12px;
          height: 12px;
          border-radius: ${d.shape.radius.circle};
          background: ${d.colors.text.secondary};
          box-shadow: ${d.shadows.z1};
          top: 50%;
          transform: translate3d(2px, -50%, 0);
          transition: transform 0.2s cubic-bezier(0.19, 1, 0.22, 1);
        }
      }
    `,inlineContainer:t.css`
      padding: ${d.spacing(0,1)};
      height: ${d.spacing(d.components.height.md)};
      display: inline-flex;
      align-items: center;
      background: ${g?"transparent":d.components.input.background};
      border: 1px solid ${g?"transparent":d.components.input.borderColor};
      border-radius: ${d.shape.borderRadius()};

      &:hover {
        border: 1px solid ${g?"transparent":d.components.input.borderHover};

        .inline-switch-label {
          color: ${d.colors.text.primary};
        }
      }
    `,disabled:t.css`
      background-color: rgba(204, 204, 220, 0.04);
      color: rgba(204, 204, 220, 0.6);
      border: 1px solid rgba(204, 204, 220, 0.04);
    `,inlineLabel:t.css`
      cursor: pointer;
      padding-right: ${d.spacing(1)};
      color: ${d.colors.text.secondary};
      white-space: nowrap;
    `,inlineLabelEnabled:t.css`
      color: ${d.colors.text.primary};
    `}))},18607:(Z,O,e)=>{"use strict";e.d(O,{W:()=>u});var t=e(9892),n=e(68404),l=e(72142),s=e(79841),i=e(8180),f=e(68226),c=e(94893),o=e(7804),m=e(72648);const r=(0,o.B)(d=>({container:t.css`
      height: 100%;
    `,tabContent:t.css`
      padding: ${d.spacing(2)};
      background-color: ${d.colors.background.primary};
      height: calc(100% - ${d.components.menuTabs.height}px);
    `,close:t.css`
      position: absolute;
      right: 16px;
      top: 5px;
      cursor: pointer;
      font-size: ${d.typography.size.lg};
    `,tabs:t.css`
      padding-top: ${d.spacing(1)};
      border-color: ${d.colors.border.weak};
      ul {
        margin-left: ${d.spacing(2)};
      }
    `}));function u(d){const[g,p]=(0,n.useState)(d.tabs.some(C=>C.value===d.defaultTab)?d.defaultTab:d.tabs?.[0].value),E=C=>{p(C.value)},{tabs:h,onClose:a,closeIconTooltip:v}=d,x=(0,m.l4)(),y=r(x);return n.createElement("div",{className:y.container},n.createElement(l.J,{className:y.tabs},h.map(C=>n.createElement(s.O,{key:C.value,label:C.label,active:C.value===g,onChangeTab:()=>E(C),icon:C.icon})),n.createElement(i.h,{className:y.close,onClick:a,name:"times",title:v??"Close"})),n.createElement(f.$,{autoHeightMin:"100%"},n.createElement(c.I,{className:y.tabContent},h.find(C=>C.value===g)?.content)))}},89361:(Z,O,e)=>{"use strict";e.d(O,{i:()=>c,c:()=>m});var t=e(68404),n=e(21760),l=e(68183),s=e(9892);const i=r=>{const u=s.css`
    width: 100%;
    list-style: none;
  `,d=s.css`
    width: 100%;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
  `;return r.value&&!Array.isArray(r.value)?t.createElement("span",null,r.value):r.value&&Array.isArray(r.value)&&r.value.length>0?t.createElement("ul",{className:u},r.value.map((g,p)=>{const E=Object.keys(g)[0];return t.createElement("li",{className:d,key:p},t.createElement("span",null,E),t.createElement("span",null,g[E]))})):f},f=()=>t.createElement("span",null,"\xA0");function c(r){const{totalColumnsWidth:u,footerGroups:d,isPaginationVisible:g,tableStyles:p}=r,E=l.wl.components.Panels.Visualization.Table;return t.createElement("div",{style:{position:g?"relative":"absolute",width:u?`${u}px`:"100%",bottom:"0px"}},d.map(h=>{const{key:a,...v}=h.getFooterGroupProps();return t.createElement("div",{className:p.tfoot,...v,key:a,"data-testid":E.footer},h.headers.map(x=>o(x,p)))}))}function o(r,u){const d=r.getHeaderProps();return d?(d.style=d.style??{},d.style.position="absolute",d.style.justifyContent=r.justifyContent,t.createElement("div",{className:u.headerCell,...d},r.render("Footer"))):null}function m(r,u,d){if(u===void 0)return f;if(d){if(u[r]===void 0)return f;const g=n.TB.get(n.gz.count).name;return i({value:[{[g]:String(u[r])}]})}return i({value:u[r]})}},24115:(Z,O,e)=>{"use strict";e.d(O,{A:()=>d,U:()=>u});var t=e(82897),n=e.n(t),l=e(68404),s=e(59309),i=e(14582),f=e(19695),c=e(16911),o=e(40538),m=e(67307),r=e(48010);const u={drawStyle:o.l8.Line,lineInterpolation:o.KC.Smooth,lineWidth:1,fillOpacity:17,gradientMode:o.FI.Hue,pointSize:2,barAlignment:o.pu.Center,showPoints:o.Jp.Never},d=E=>{const{field:h,innerWidth:a,tableStyles:v,cell:x,cellProps:y}=E,C=g(x.value);if(!C)return l.createElement("div",{...y,className:v.cellContainer},"no data");const P=(0,s.dz)(C.y);C.y.config.min=P.min,C.y.config.max=P.max,C.y.state={range:P};const D=p(h),M={color:h.config.color,custom:{...u,...D}};return l.createElement("div",{...y,className:v.cellContainer},l.createElement(m.b,{width:a,height:v.cellHeightInner,sparkline:C,config:M,theme:v.theme}))};function g(E){if((0,t.isArray)(E))return{y:{name:"test",type:i.fS.number,values:new f.G(E),config:{}}};if((0,c.aY)(E)){const h=E.fields.find(v=>v.type===i.fS.time),a=E.fields.find(v=>v.type===i.fS.number);if(h&&a)return{x:h,y:a}}}function p(E){let h=(0,r.S_)(E);if(h.type===o.h2.Auto&&(h={...h,type:o.h2.Sparkline}),h.type===o.h2.Sparkline)return h;throw new Error(`Excpected options type ${o.h2.Sparkline} but got ${h.type}`)}},88144:(Z,O,e)=>{"use strict";e.d(O,{i:()=>ge});var t=e(68404),n=e(91742),l=e(75478),s=e(21760),i=e(40538),f=e(72648),c=e(68226),o=e(78889),m=e(89361),r=e(68183),u=e(50622),d=e(39904),g=e(9892),p=e(56921),E=e(94437),h=e(52081),a=e(64353),v=e(8180),x=e(31403),y=e(14747),C=e(58255),P=e(7804);const D=28,M=D*5,b=({options:re,values:ce,caseSensitive:ie,onChange:fe})=>{const Ce=(0,f.l4)(),ee=R(Ce),[ne,X]=(0,t.useState)(""),te=(0,t.useMemo)(()=>new RegExp(ne,ie?void 0:"i"),[ne,ie]),ae=(0,t.useMemo)(()=>re.filter(rt=>rt.label===void 0?!1:te.test(rt.label)),[re,te]),_=Ce.spacing.gridSize,ve=(0,t.useMemo)(()=>Math.min(ae.length*D,M)+_,[_,ae.length]),Ve=(0,t.useCallback)(rt=>{X(rt)},[X]),it=(0,t.useCallback)(rt=>pe=>{const Ie=pe.currentTarget.checked?ce.concat(rt):ce.filter(We=>We.value!==rt.value);fe(Ie)},[fe,ce]);return t.createElement(h.wc,{spacing:"md"},t.createElement(y.H,{placeholder:"Filter values",onChange:Ve,value:ne}),!ae.length&&t.createElement(a._,null,"No values"),ae.length&&t.createElement(l.t7,{height:ve,itemCount:ae.length,itemSize:D,width:"100%",className:ee.filterList},({index:rt,style:pe})=>{const Ie=ae[rt],{value:We,label:Je}=Ie,He=ce.find(Ae=>Ae.value===We)!==void 0;return t.createElement("div",{className:ee.filterListRow,style:pe,title:Je},t.createElement(C.X,{value:He,label:Je,onChange:it(Ie)}))}))},R=(0,P.B)(re=>({filterList:g.css`
    label: filterList;
  `,filterListRow:g.css`
    label: filterListRow;
    cursor: pointer;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: ${re.spacing(.5)};

    :hover {
      background-color: ${re.colors.action.hover};
    }
  `}));var B=e(48010);const w=({column:{preFilteredRows:re,filterValue:ce,setFilter:ie},onClose:fe,field:Ce})=>{const ee=(0,f.l4)(),ne=(0,t.useMemo)(()=>(0,B.AF)(re,Ce),[re,Ce]),X=(0,t.useMemo)(()=>(0,B.mP)(ne),[ne]),te=(0,t.useMemo)(()=>(0,B.n0)(X,ce),[X,ce]),[ae,_]=(0,t.useState)(te),[ve,Ve]=(0,t.useState)(!1),it=(0,t.useCallback)(Je=>fe(),[fe]),rt=(0,t.useCallback)(Je=>{const He=ae.length?ae:void 0;ie(He),fe()},[ie,ae,fe]),pe=(0,t.useCallback)(Je=>{ie(void 0),fe()},[ie,fe]),Ie=(0,t.useMemo)(()=>ce!==void 0,[ce]),We=(0,f.wW)(A);return t.createElement(E.L,{onClick:it,useCapture:!0},t.createElement("div",{className:(0,g.cx)(We.filterContainer),onClick:I},t.createElement(h.wc,{spacing:"lg"},t.createElement(h.wc,{spacing:"xs"},t.createElement(h.Lh,{justify:"space-between",align:"center"},t.createElement(a._,{className:We.label},"Filter by values:"),t.createElement(v.h,{name:"text-fields",tooltip:"Match case",style:{color:ve?ee.colors.text.link:ee.colors.text.disabled},onClick:()=>{Ve(Je=>!Je)}})),t.createElement("div",{className:(0,g.cx)(We.listDivider)}),t.createElement(b,{onChange:_,values:ae,options:X,caseSensitive:ve})),t.createElement(h.Lh,{spacing:"lg"},t.createElement(h.Lh,null,t.createElement(x.zx,{size:"sm",onClick:rt},"Ok"),t.createElement(x.zx,{size:"sm",variant:"secondary",onClick:it},"Cancel")),Ie&&t.createElement(h.Lh,null,t.createElement(x.zx,{fill:"text",size:"sm",onClick:pe},"Clear filter"))))))},A=re=>({filterContainer:g.css`
    label: filterContainer;
    width: 100%;
    min-width: 250px;
    height: 100%;
    max-height: 400px;
    background-color: ${re.colors.background.primary};
    border: 1px solid ${re.colors.border.weak};
    padding: ${re.spacing(2)};
    margin: ${re.spacing(1)} 0;
    box-shadow: ${re.shadows.z3};
    border-radius: ${re.shape.radius.default};
  `,listDivider:g.css`
    label: listDivider;
    width: 100%;
    border-top: 1px solid ${re.colors.border.medium};
    padding: ${re.spacing(.5,2)};
  `,label:g.css`
    margin-bottom: 0;
  `}),I=re=>{re.stopPropagation()},F=({column:re,field:ce,tableStyles:ie})=>{const fe=(0,t.useRef)(null),[Ce,ee]=(0,t.useState)(!1),ne=(0,f.wW)(K),X=(0,t.useMemo)(()=>Boolean(re.filterValue),[re.filterValue]),te=(0,t.useCallback)(()=>ee(!0),[ee]),ae=(0,t.useCallback)(()=>ee(!1),[ee]);return!ce||!ce.config.custom?.filterable?null:t.createElement("button",{className:(0,g.cx)(ie.headerFilter,X?ne.filterIconEnabled:ne.filterIconDisabled),ref:fe,type:"button",onClick:te},t.createElement(d.J,{name:"filter"}),Ce&&fe.current&&t.createElement(p.J,{content:t.createElement(w,{column:re,tableStyles:ie,field:ce,onClose:ae}),placement:"bottom-start",referenceElement:fe.current,show:!0}))},K=re=>({filterIconEnabled:g.css`
    label: filterIconEnabled;
    color: ${re.colors.primary.text};
  `,filterIconDisabled:g.css`
    label: filterIconDisabled;
    color: ${re.colors.text.disabled};
  `}),W=re=>{const{headerGroups:ce,showTypeIcons:ie,tableStyles:fe}=re,Ce=r.wl.components.Panels.Visualization.Table;return t.createElement("div",{role:"rowgroup",className:fe.headerRow},ce.map(ee=>{const{key:ne,...X}=ee.getHeaderGroupProps();return t.createElement("div",{className:fe.thead,...X,key:ne,"aria-label":Ce.header,role:"row"},ee.headers.map((te,ae)=>U(te,fe,ie)))}))};function U(re,ce,ie){const fe=re.getHeaderProps(),Ce=re.field??null;return re.canResize&&(fe.style.userSelect=re.isResizing?"none":"auto"),fe.style.position="absolute",fe.style.justifyContent=re.justifyContent,t.createElement("div",{className:ce.headerCell,...fe,role:"columnheader"},re.canSort&&t.createElement(t.Fragment,null,t.createElement("button",{...re.getSortByToggleProps(),className:ce.headerCellLabel},ie&&t.createElement(d.J,{name:(0,u.e7)(Ce),title:Ce?.type,size:"sm",className:ce.typeIcon}),t.createElement("div",null,re.render("Header")),re.isSorted&&(re.isSortedDesc?t.createElement(d.J,{size:"lg",name:"arrow-down",className:ce.sortIcon}):t.createElement(d.J,{name:"arrow-up",size:"lg",className:ce.sortIcon}))),re.canFilter&&t.createElement(F,{column:re,tableStyles:ce,field:Ce})),!re.canSort&&re.render("Header"),!re.canSort&&re.canFilter&&t.createElement(F,{column:re,tableStyles:ce,field:Ce}),re.canResize&&t.createElement("div",{...re.getResizerProps(),className:ce.resizeHandle}))}var N=e(35316);function S(re,ce){(0,t.useEffect)(()=>{const ie=re.current?.querySelector(".track-vertical"),fe=ce.current?.firstChild;fe&&ie&&(ie?.remove(),fe.querySelector(":scope > .track-vertical")?.remove(),fe.append(ie))})}function Y(re,ce,ie){(0,t.useEffect)(()=>{if(re.lastExpandedIndex!==void 0){ce.current?.resetAfterIndex(Math.max(re.lastExpandedIndex-1,0));return}},[re.lastExpandedIndex,re.toggleRowExpandedCounter,ce,ie])}var Q=e(89890);function z({onColumnResize:re,onSortByChange:ce,data:ie}){return(0,t.useCallback)((fe,Ce)=>{switch(Ce.type){case"columnDoneResizing":if(re){const ne=fe.columnResizing.headerIdWidths[0][0],X=parseInt(ne,10),te=Math.round(fe.columnResizing.columnWidths[ne]),ae=ie.fields[X];if(!ae)return fe;const _=(0,Q.C)(ae,ie);re(_,te)}case"toggleSortBy":if(ce){const ee=[];for(const ne of fe.sortBy){const X=ie.fields[parseInt(ne.id,10)];X&&ee.push({displayName:(0,Q.C)(X,ie),desc:ne.desc})}ce(ee)}case"toggleRowExpanded":if(Ce.id)return{...fe,lastExpandedIndex:parseInt(Ce.id,10),toggleRowExpandedCounter:fe.toggleRowExpandedCounter+1}}return fe},[ie,re,ce])}function G(re,ce){const ie={toggleRowExpandedCounter:0};if(re){ie.sortBy=[];for(const fe of re)for(const Ce of ce)Ce.Header===fe.displayName&&ie.sortBy.push({id:Ce.id,desc:fe.desc})}return ie}var k=e(12245);const j=150,de=36,ge=(0,t.memo)(re=>{const{ariaLabel:ce,data:ie,subData:fe,height:Ce,onCellFilterAdded:ee,width:ne,columnMinWidth:X=j,noHeader:te,resizable:ae=!0,initialSortBy:_,footerOptions:ve,showTypeIcons:Ve,footerValues:it,enablePagination:rt,cellHeight:pe=i.Ss.Sm}=re,Ie=(0,t.useRef)(null),We=(0,t.useRef)(null),Je=(0,t.useRef)(null),He=(0,f.l4)(),Ae=(0,k.p)(He,pe),et=te?0:Ae.rowHeight,[_e,Se]=(0,t.useState)(it),Fe=(0,t.useMemo)(()=>{const at=de;let xt=0;if(!_e)return 0;for(const Dt of _e)Array.isArray(Dt)&&Dt.length>xt&&(xt=Dt.length);return xt>1?at*xt:at},[_e]),Xe=(0,t.useMemo)(()=>ie.fields.length?Array(ie.length).fill(0):[],[ie]),Qe=Boolean(ve?.countRows&&ve.reducer&&ve.reducer.length&&ve.reducer[0]===s.gz.count),ct=(0,t.useMemo)(()=>(0,B.Pu)(ie,ne,X,!!fe?.length,_e,Qe),[ie,ne,X,_e,fe,Qe]),ht=z(re),ft=(0,t.useMemo)(()=>({columns:ct,data:Xe,disableResizing:!ae,stateReducer:ht,initialState:G(_,ct),autoResetFilters:!1,sortTypes:{number:B.QT,"alphanumeric-insensitive":B.nl}}),[_,ct,Xe,ae,ht]),{getTableProps:Re,headerGroups:nt,footerGroups:le,rows:Pe,prepareRow:Oe,totalColumnsWidth:Le,page:Ye,state:be,gotoPage:Te,setPageSize:me,pageOptions:he}=(0,n.useTable)(ft,n.useFilters,n.useSortBy,n.useAbsoluteLayout,n.useResizeColumns,n.useExpanded,n.usePagination),De=be;(0,t.useEffect)(()=>{ve||Se(it)},[it,ve]),(0,t.useEffect)(()=>{if(!ve)return;if(!ve.show){Se(void 0);return}if(Qe){const xt=[];xt[0]=nt[0]?.headers[0]?.filteredRows.length.toString()??ie.length.toString(),Se(xt);return}const at=(0,B.jB)(nt[0].headers,(0,B.KF)(Pe),ve,He);Se(at)},[ve,He,be.filters,ie]);let $e=Ce-(et+Fe);rt&&($e-=Ae.cellHeight);const ke=Math.round($e/Ae.rowHeight)-1;(0,t.useEffect)(()=>{ke<=0||me(ke)},[ke,me]),Y(De,Ie,ie),S(Je,We);const tt=(0,t.useCallback)(at=>{if(be.expanded[at]){const xt=fe?.find(Dt=>Dt.meta?.custom?.parentRowIndex===at);if(xt){const Dt=!!xt.meta?.custom?.noHeader,wt={height:Ae.rowHeight*(xt.length+(Dt?0:1)),background:He.colors.emphasize(He.colors.background.primary,.015),paddingLeft:B.bc,position:"absolute",bottom:0};return t.createElement("div",{style:wt},t.createElement(ge,{data:xt,width:ne-B.bc,height:Ae.rowHeight*(xt.length+1),noHeader:Dt}))}}return null},[be.expanded,fe,Ae.rowHeight,He.colors,ne]),Ge=(0,t.useCallback)(({index:at,style:xt})=>{let Dt=Pe[at];return rt&&(Dt=Ye[at]),Oe(Dt),t.createElement("div",{...Dt.getRowProps({style:xt}),className:Ae.row},tt(at),Dt.cells.map((wt,sn)=>t.createElement(N.p,{key:sn,tableStyles:Ae,cell:wt,onCellFilterAdded:ee,columnIndex:sn,columnCount:Dt.cells.length})))},[ee,Ye,rt,Oe,Pe,Ae,tt]),dt=(0,t.useCallback)(at=>{Te(at-1)},[Te]),pt=rt?Ye.length:Pe.length;let Ke=null;if(rt){const at=be.pageIndex*be.pageSize+1;let xt=at+be.pageSize-1;const Dt=ne<550;xt>ie.length&&(xt=ie.length),Ke=t.createElement("div",{className:Ae.paginationWrapper},t.createElement(o.t,{currentPage:be.pageIndex+1,numberOfPages:he.length,showSmallVersion:Dt,onNavigate:dt}),Dt?null:t.createElement("div",{className:Ae.paginationSummary},at," - ",xt," of ",ie.length," rows"))}const je=at=>{if(be.expanded[at]){const xt=fe?.find(Dt=>Dt.meta?.custom?.parentRowIndex===at);if(xt){const Dt=!!xt.meta?.custom?.noHeader;return Ae.rowHeight*(xt.length+1+(Dt?0:1))}}return Ae.rowHeight},ot=at=>{const{scrollTop:xt}=at.target;Ie.current!==null&&Ie.current.scrollTo(xt)};return t.createElement("div",{...Re(),className:Ae.table,"aria-label":ce,role:"table",ref:We},t.createElement(c.$,{hideVerticalTrack:!0},t.createElement("div",{className:Ae.tableContentWrapper(Le)},!te&&t.createElement(W,{headerGroups:nt,showTypeIcons:Ve,tableStyles:Ae}),pt>0?t.createElement("div",{ref:Je},t.createElement(c.$,{onScroll:ot,hideHorizontalTrack:!0},t.createElement(l.S_,{key:Ae.rowHeight,height:$e,itemCount:pt,itemSize:je,width:"100%",ref:Ie,style:{overflow:void 0}},Ge))):t.createElement("div",{style:{height:Ce-et},className:Ae.noData},"No data"),_e&&t.createElement(m.i,{isPaginationVisible:Boolean(rt),footerValues:_e,footerGroups:le,totalColumnsWidth:Le,tableStyles:Ae}))),Ke)});ge.displayName="Table"},35316:(Z,O,e)=>{"use strict";e.d(O,{p:()=>t});const t=({cell:n,tableStyles:l,onCellFilterAdded:s,userProps:i})=>{const f=n.getCellProps(),c=n.column.field;if(!c?.display)return null;f.style&&(f.style.minWidth=f.style.width,f.style.justifyContent=n.column.justifyContent);let o=(n.column.width??24)-l.cellPadding*2;return n.render("Cell",{field:c,tableStyles:l,onCellFilterAdded:s,cellProps:f,innerWidth:o,userProps:i})}},12245:(Z,O,e)=>{"use strict";e.d(O,{p:()=>n});var t=e(9892);function n(s,i){const f=s.colors.border.weak,c=s.colors.primary.border,o=6,m=l(s,i,o),r=m+2,u=28,d=s.colors.emphasize(s.colors.background.primary,.03),g=(p,E,h)=>{const a={margin:s.spacing(0,-.5,0,.5)},v={position:"absolute",top:0,right:0,margin:"auto"},x={overflow:"visible",width:"auto !important",boxShadow:`0 0 2px ${s.colors.primary.main}`,background:E??d,zIndex:1};return t.css`
      label: ${h?"cellContainerOverflow":"cellContainerNoOverflow"};
      padding: ${o}px;
      width: 100%;
      // Cell height need to account for row border
      height: ${r-1}px;
      display: flex;
      align-items: center;
      border-right: 1px solid ${f};

      ${p?`color: ${p};`:""};
      ${E?`background: ${E};`:""};
      background-clip: padding-box;

      &:last-child:not(:only-child) {
        border-right: none;
      }

      &:hover {
        ${h&&x};
        .cellActions {
          visibility: visible;
          opacity: 1;
          width: auto;
        }
      }

      a {
        color: inherit;
      }

      .cellActions {
        display: flex;
        ${h?a:v}
        visibility: hidden;
        opacity: 0;
        width: 0;
        align-items: center;
        height: 100%;
        padding: ${s.spacing(1,.5,1,.5)};
        background: ${E?"none":s.colors.emphasize(s.colors.background.primary,.03)};

        svg {
          color: ${p};
        }
      }

      .cellActionsLeft {
        right: auto !important;
        left: 0;
      }

      .cellActionsTransparent {
        background: none;
      }
    `};return{theme:s,cellHeight:m,buildCellContainerStyle:g,cellPadding:o,cellHeightInner:m-o*2,rowHeight:r,table:t.css`
      height: 100%;
      width: 100%;
      overflow: auto;
      display: flex;
      flex-direction: column;
    `,thead:t.css`
      label: thead;
      height: ${u}px;
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,tfoot:t.css`
      label: tfoot;
      height: ${u}px;
      border-top: 1px solid ${f};
      overflow-y: auto;
      overflow-x: hidden;
      position: relative;
    `,headerRow:t.css`
      label: row;
      border-bottom: 1px solid ${f};
    `,headerCell:t.css`
      height: 100%;
      padding: 0 ${o}px;
      overflow: hidden;
      white-space: nowrap;
      display: flex;
      align-items: center;
      font-weight: ${s.typography.fontWeightMedium};

      &:last-child {
        border-right: none;
      }
    `,headerCellLabel:t.css`
      border: none;
      padding: 0;
      background: inherit;
      cursor: pointer;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      font-weight: ${s.typography.fontWeightMedium};
      display: flex;
      align-items: center;
      margin-right: ${s.spacing(.5)};

      &:hover {
        text-decoration: underline;
        color: ${s.colors.text.link};
      }
    `,cellContainer:g(void 0,void 0,!0),cellContainerNoOverflow:g(void 0,void 0,!1),cellText:t.css`
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
    `,sortIcon:t.css`
      margin-left: ${s.spacing(.5)};
    `,cellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      color: ${s.colors.text.link};
      font-weight: ${s.typography.fontWeightMedium};
      &:hover {
        text-decoration: underline;
        color: ${s.colors.text.link};
      }
    `,cellLinkForColoredCell:t.css`
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      font-weight: ${s.typography.fontWeightMedium};
      text-decoration: underline;
    `,imageCellLink:t.css`
      cursor: pointer;
      overflow: hidden;
      height: 100%;
    `,headerFilter:t.css`
      background: transparent;
      border: none;
      label: headerFilter;
      padding: 0;
    `,paginationWrapper:t.css`
      display: flex;
      height: ${m}px;
      justify-content: center;
      align-items: center;
      width: 100%;
      li {
        margin-bottom: 0;
      }
    `,paginationSummary:t.css`
      color: ${s.colors.text.secondary};
      font-size: ${s.typography.bodySmall.fontSize};
      display: flex;
      justify-content: flex-end;
      padding: ${s.spacing(0,1,0,2)};
    `,tableContentWrapper:p=>{const E=p!==void 0?`${p}px`:"100%";return t.css`
        label: tableContentWrapper;
        width: ${E};
        display: flex;
        flex-direction: column;
      `},row:t.css`
      label: row;
      border-bottom: 1px solid ${f};

      &:hover {
        background-color: ${d};
      }

      &:last-child {
        border-bottom: 0;
      }
    `,imageCell:t.css`
      height: 100%;
    `,resizeHandle:t.css`
      label: resizeHandle;
      cursor: col-resize !important;
      display: inline-block;
      background: ${c};
      opacity: 0;
      transition: opacity 0.2s ease-in-out;
      width: 8px;
      height: 100%;
      position: absolute;
      right: -4px;
      border-radius: ${s.shape.radius.default};
      top: 0;
      touch-action: none;

      &:hover {
        opacity: 1;
      }
    `,typeIcon:t.css`
      margin-right: ${s.spacing(1)};
      color: ${s.colors.text.secondary};
    `,noData:t.css`
      align-items: center;
      display: flex;
      height: 100%;
      justify-content: center;
      width: 100%;
    `,expanderCell:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      height: ${r}px;
      cursor: pointer;
    `}}function l(s,i,f){const c=s.typography.fontSize,o=s.typography.body.lineHeight;switch(i){case"md":return 42;case"lg":return 48;case"sm":default:return f*2+c*o}}},13580:(Z,O,e)=>{"use strict";e.d(O,{PT:()=>t,tE:()=>n});const t="=",n="!="},48010:(Z,O,e)=>{"use strict";e.d(O,{bc:()=>ie,AF:()=>X,KF:()=>We,S_:()=>He,Pu:()=>Ce,n0:()=>ve,jB:()=>pe,E4:()=>fe,q7:()=>Ae,nl:()=>Ve,QT:()=>it,mP:()=>ae});var t=e(82897),n=e(58635),l=e(14582),s=e(89890),i=e(16911),f=e(34472),c=e(20112),o=e(21760),m=e(19695),r=e(36512),u=e(40538),d=e(68404),g=e(24177),p=e(59309),E=e(20251),h=e(19670),a=e(18543);const v={mode:g.H.Absolute,steps:[{color:"blue",value:-1/0},{color:"green",value:20}]},x=_e=>{const{field:Se,innerWidth:Fe,tableStyles:Xe,cell:Qe,cellProps:ct,row:ht}=_e,ft=Se.display(Qe.value),Re=He(Se);let nt=(0,p.xD)(Se,!1);nt.thresholds||(nt={...nt,thresholds:v});let le=u.QH.Gradient,Pe;Re.type===u.h2.Gauge&&(le=Re.mode??u.QH.Gradient,Pe=Re.valueDisplayMode!==void 0?Re.valueDisplayMode:u.M8.Text);const Oe=()=>(0,t.isFunction)(Se.getLinks)?Se.getLinks({valueRowIndex:ht.index}):[],Le=Boolean(Oe().length),Ye=y(Se,ft,Qe.row.index),be=Te=>{const{openMenu:me,targetClassName:he}=Te;return d.createElement(h.xf,{width:Fe,height:Xe.cellHeightInner,field:nt,display:Se.display,text:{valueSize:14},value:ft,orientation:E.wm.Horizontal,theme:Xe.theme,alignmentFactors:Ye,onClick:me,className:he,itemSpacing:1,lcdCellWidth:8,displayMode:le,valueDisplayMode:Pe})};return d.createElement("div",{...ct,className:Xe.cellContainer},Le&&d.createElement(a.V,{links:Oe,style:{display:"flex",width:"100%"}},Te=>be(Te)),!Le&&be({}))};function y(_e,Se,Fe){let Xe=_e.state?.alignmentFactors;if(Xe)return Xe.text.length<Se.text.length&&(Xe.text=Se.text),Xe;{Xe={...Se};const Qe=Math.min(_e.values.length,Fe+1e3);for(let ct=Fe+1;ct<Qe;ct++)_e.display(_e.values.get(ct)).text.length>Xe.text.length&&(Xe.text=Se.text);return _e.state?_e.state.alignmentFactors=Xe:_e.state={alignmentFactors:Xe},Xe}}var C=e(9892),P=e(28550),D=e(72648),M=e(30901),b=e(16514),R=e(31403),B=e(8180),w=e(52081),A=e(94599),I=e(35029),F=e(9405);function K({value:_e,onDismiss:Se,mode:Fe}){let Xe=_e;if((0,t.isString)(_e))try{_e=JSON.parse(_e)}catch{}else Xe=JSON.stringify(_e,null," ");let Qe=Xe;return Fe==="code"&&(Qe=JSON.stringify(_e,null," ")),d.createElement(I.u,{onDismiss:Se,isOpen:!0,title:"Inspect value"},Fe==="code"?d.createElement(F.p,{width:"100%",height:500,language:"json",showLineNumbers:!0,showMiniMap:(Qe&&Qe.length)>100,value:Qe,readOnly:!0}):d.createElement("pre",null,Qe),d.createElement(I.u.ButtonRow,null,d.createElement(A.m,{icon:"copy",getText:()=>Qe},"Copy to Clipboard")))}var W=e(13580);function U({field:_e,cell:Se,previewMode:Fe,showFilters:Xe,onCellFilterAdded:Qe}){const[ct,ht]=(0,d.useState)(!1),ft=fe(_e)==="flex-end",Re=Boolean(_e.config.custom?.inspect),nt={size:"sm",tooltipPlacement:"top"},le=(0,d.useCallback)(Oe=>{Qe&&Qe({key:_e.name,operator:W.PT,value:Se.value})},[Se,_e,Qe]),Pe=(0,d.useCallback)(Oe=>{Qe&&Qe({key:_e.name,operator:W.tE,value:Se.value})},[Se,_e,Qe]);return d.createElement(d.Fragment,null,d.createElement("div",{className:`cellActions ${ft?"cellActionsLeft":""}`},d.createElement(w.Lh,{spacing:"xs"},Re&&d.createElement(B.h,{name:"eye",tooltip:"Inspect value",onClick:()=>{ht(!0)},...nt}),Xe&&d.createElement(B.h,{name:"search-plus",onClick:le,tooltip:"Filter for value",...nt}),Xe&&d.createElement(B.h,{name:"search-minus",onClick:Pe,tooltip:"Filter out value",...nt}))),ct&&d.createElement(K,{mode:Fe,value:Se.value,onDismiss:()=>{ht(!1)}}))}const N=_e=>{const{field:Se,cell:Fe,tableStyles:Xe,row:Qe,cellProps:ct}=_e,ht=Boolean(Se.config.custom?.inspect),ft=Se.display(Fe.value);let Re;d.isValidElement(Fe.value)?Re=Fe.value:Re=(0,c.zc)(ft);const nt=_e.onCellFilterAdded&&Se.config.filterable,le=nt&&Fe.value!==void 0||ht,Pe=He(Se),Oe=S(Xe,Pe,ft,ht),Le=Boolean((0,M.i)(Se,Qe)?.length),Ye=(0,D.wW)(R._7);return d.createElement("div",{...ct,className:Oe},!Le&&d.createElement("div",{className:Xe.cellText},Re),Le&&d.createElement(a.V,{links:()=>(0,M.i)(Se,Qe)||[]},be=>be.openMenu?d.createElement("button",{className:(0,C.cx)(Ye,Y(Xe,Pe,be.targetClassName)),onClick:be.openMenu},Re):d.createElement("div",{className:Y(Xe,Pe,be.targetClassName)},Re)),le&&d.createElement(U,{..._e,previewMode:"text",showFilters:nt}))};function S(_e,Se,Fe,Xe=!1){const Qe=_e.theme.isDark?1:-.7;let ct,ht;if(Se.type===u.h2.ColorText)ct=Fe.color;else if(Se.type===u.h2.ColorBackground){const ft=Se.mode??u.v7.Gradient;if(ft===u.v7.Basic)ct=(0,b.bM)(Fe.color,_e.theme.isDark),ht=(0,P.Z)(Fe.color).toRgbString();else if(ft===u.v7.Gradient){const Re=(0,P.Z)(Fe.color).darken(10*Qe).spin(5);ct=(0,b.bM)(Fe.color,_e.theme.isDark),ht=`linear-gradient(120deg, ${Re.toRgbString()}, ${Fe.color})`}}return ct!==void 0||ht!==void 0?_e.buildCellContainerStyle(ct,ht,!Xe):Xe?_e.cellContainerNoOverflow:_e.cellContainer}function Y(_e,Se,Fe){return Se.type===u.h2.Auto?(0,C.cx)(_e.cellLink,Fe):(0,C.cx)(_e.cellLinkForColoredCell,Fe)}var Q=e(89361),z=e(56257),G=e(69377);function k(_e){const{cell:Se,tableStyles:Fe,cellProps:Xe}=_e;let Qe="";return Se.value instanceof G.Z?Qe=new z.Z().writeGeometry(Se.value,{featureProjection:"EPSG:3857",dataProjection:"EPSG:4326"}):Se.value!=null&&(Qe=`${Se.value}`),d.createElement("div",{...Xe,className:Fe.cellContainer},d.createElement("div",{className:Fe.cellText,style:{fontFamily:"monospace"}},Qe))}const j=_e=>{const{field:Se,cell:Fe,tableStyles:Xe,row:Qe,cellProps:ct}=_e,ht=Se.display(Fe.value),ft=Boolean((0,M.i)(Se,Qe)?.length),Re=(0,D.wW)(R._7);return d.createElement("div",{...ct,className:Xe.cellContainer},!ft&&d.createElement("img",{src:ht.text,className:Xe.imageCell,alt:""}),ft&&d.createElement(a.V,{style:{height:"100%"},links:()=>(0,M.i)(Se,Qe)||[]},nt=>{const le=d.createElement("img",{src:ht.text,className:Xe.imageCell,alt:""});return nt.openMenu?d.createElement(R.zx,{className:(0,C.cx)(Re),onClick:nt.openMenu},le):le}))};function de(_e){const{cell:Se,tableStyles:Fe,cellProps:Xe,field:Qe,row:ct}=_e,ht=Boolean(Qe.config.custom?.inspect),ft=C.css`
    cursor: pointer;
    font-family: monospace;
  `;let Re=Se.value,nt=Re;if((0,t.isString)(Re))try{Re=JSON.parse(Re)}catch{}else nt=JSON.stringify(Re,null," ");const le=Boolean((0,M.i)(Qe,ct)?.length),Pe=(0,D.wW)(R._7);return d.createElement("div",{...Xe,className:ht?Fe.cellContainerNoOverflow:Fe.cellContainer},d.createElement("div",{className:(0,C.cx)(Fe.cellText,ft)},!le&&d.createElement("div",{className:Fe.cellText},nt),le&&d.createElement(a.V,{links:()=>(0,M.i)(Qe,ct)||[]},Oe=>Oe.openMenu?d.createElement(R.zx,{className:(0,C.cx)(Pe),onClick:Oe.openMenu},nt):d.createElement(d.Fragment,null,nt))),ht&&d.createElement(U,{..._e,previewMode:"code"}))}var ge=e(39904);function re({row:_e,tableStyles:Se}){return d.createElement("div",{className:Se.expanderCell,..._e.getToggleRowExpandedProps()},d.createElement(ge.J,{"aria-label":_e.isExpanded?"Collapse row":"Expand row",name:_e.isExpanded?"angle-down":"angle-right",size:"xl"}))}var ce=e(24115);const ie=50;function fe(_e){if(!_e)return"flex-start";if(_e.config.custom)switch(_e.config.custom.align){case"right":return"flex-end";case"left":return"flex-start";case"center":return"center"}return _e.type===l.fS.number?"flex-end":"flex-start"}function Ce(_e,Se,Fe,Xe,Qe,ct){const ht=[];let ft=0;Xe&&(ht.push({Header:()=>null,id:"expander",Cell:re,width:ie,minWidth:ie,filter:(nt,le,Pe)=>[],justifyContent:"left",field:_e.fields[0],sortType:"basic"}),Se-=ie);for(const[nt,le]of _e.fields.entries()){const Pe=le.config.custom||{};if(Pe.hidden)continue;Pe.width?Se-=Pe.width:ft++;const Oe=Ye=>{switch(Ye){case l.fS.number:return"number";case l.fS.time:return"basic";default:return"alphanumeric-insensitive"}},Le=ee(Pe.cellOptions?.type,le);ht.push({Cell:Le,id:nt.toString(),field:le,Header:(0,s.C)(le,_e),accessor:(Ye,be)=>le.values.get(be),sortType:Oe(le.type),width:Pe.width,minWidth:Pe.minWidth??Fe,filter:(0,n.Z)(ne(le)),justifyContent:fe(le),Footer:(0,Q.c)(nt,Qe,ct)})}let Re=Se/ft;for(let nt=ft;nt>0;nt--)for(const le of ht)!le.width&&le.minWidth>Re&&(le.width=le.minWidth,Se-=le.width,ft-=1,Re=Se/ft);for(const nt of ht)nt.width||(nt.width=Re),nt.minWidth=50;return ht}function ee(_e,Se){switch(_e){case u.h2.ColorText:case u.h2.ColorBackground:return N;case u.h2.Image:return j;case u.h2.Gauge:return x;case u.h2.Sparkline:return ce.A;case u.h2.JSONView:return de}if(Se.type===l.fS.geo)return k;if(Se.type===l.fS.frame){const Fe=Se.values.get(0);return(0,i.aY)(Fe)&&(0,f.pP)(Fe)?ce.A:de}return Se.type===l.fS.other?de:N}function ne(_e){return function(Se,Fe,Xe){return Se.length===0||!Xe||!_e?Se:Se.filter(Qe=>{if(!Qe.values.hasOwnProperty(Fe))return!1;const ct=te(Qe,_e);return Xe.find(ht=>ht.value===ct)!==void 0})}}function X(_e,Se){if(!Se||_e.length===0)return{};const Fe={};for(let Xe=0;Xe<_e.length;Xe++){const Qe=te(_e[Xe],Se);Fe[Qe||"(Blanks)"]=Qe}return Fe}function te(_e,Se){if(!Se||!_e)return"";const Fe=Se.values.get(_e.index),Xe=Se.display?Se.display(Fe):Fe;return Se.display?(0,c.zc)(Xe):Xe}function ae(_e){return Object.keys(_e).reduce((Se,Fe)=>Se.concat({value:_e[Fe],label:Fe}),[]).sort(_)}function _(_e,Se){return _e.label===void 0&&Se.label===void 0?0:_e.label===void 0&&Se.label!==void 0?-1:_e.label!==void 0&&Se.label===void 0?1:_e.label<Se.label?-1:_e.label>Se.label?1:0}function ve(_e,Se){return Se?_e.filter(Fe=>Se.some(Xe=>Xe.value===Fe.value)):[]}function Ve(_e,Se,Fe){return String(_e.values[Fe]).localeCompare(String(Se.values[Fe]),void 0,{sensitivity:"base"})}function it(_e,Se,Fe){const Xe=rt(_e.values[Fe]),Qe=rt(Se.values[Fe]);return Xe===Qe?0:Xe>Qe?1:-1}function rt(_e){return _e==null||_e===""||isNaN(_e)?Number.NEGATIVE_INFINITY:typeof _e=="number"?_e:Number(_e)}function pe(_e,Se,Fe,Xe){return et(_e),_e.map((Qe,ct)=>{if(Qe?.field?.type!==l.fS.number)return ct===0&&Fe.reducer&&Fe.reducer.length>0?o.TB.get(Fe.reducer[0]).name:void 0;let ht=(0,t.clone)(Qe.field);return ht.values=new m.G(Se[Qe.id]),ht.state=void 0,Qe.field=ht,Fe.fields&&Fe.fields.length>0?Fe.fields.find(Re=>Re===Qe?.field?.name)?Ie(Qe.field,Fe.reducer,Xe):void 0:Ie(Qe.field,Fe.reducer||[],Xe)})}function Ie(_e,Se,Fe){const Xe=_e.display??(0,r.U_)({field:_e,theme:Fe}),Qe=Se[0],ct=(0,o.Kx)({field:_e,reducers:Se})[Qe];return(0,c.zc)(Xe(ct))}function We(_e){const Se=[];for(const Fe in _e)for(const[Xe,Qe]of Object.entries(_e[Fe].values))Se[Xe]===void 0&&(Se[Xe]=[]),Se[Xe].push(Qe);return Se}const Je={type:u.h2.Auto};function He(_e){return _e.config.custom?.displayMode?Ae(_e.config.custom?.displayMode):_e.config.custom?.cellOptions?_e.config.custom.cellOptions:Je}function Ae(_e){switch(_e){case"basic":case"gradient-gauge":case"lcd-gauge":let Se=u.QH.Basic;return _e==="gradient-gauge"?Se=u.QH.Gradient:_e==="lcd-gauge"&&(Se=u.QH.Lcd),{type:u.h2.Gauge,mode:Se};case"color-background":case"color-background-solid":let Fe=u.v7.Basic;return _e==="color-background"&&(Fe=u.v7.Gradient),{type:u.h2.ColorBackground,mode:Fe};default:return{type:_e}}}function et(_e){const Se=_e.findIndex((Fe,Xe)=>Fe?.id!==String(Xe));Se!==-1&&(_e.splice(Se,0,{id:String(Se)}),et(_e))}},91363:(Z,O,e)=>{"use strict";e.d(O,{w:()=>u});var t=e(9892),n=e(82897),l=e.n(n),s=e(68404),i=e(89230),f=e(72648),c=e(7804),o=e(39904),m=e(97379);class r extends s.PureComponent{constructor(p){super(p),this.readCSV=(0,n.debounce)(()=>{const{config:a}=this.props,{text:v}=this.state;this.setState({data:(0,i.uP)(v,{config:a})})},150),this.onTextChange=a=>{this.setState({text:a.target.value})};const{text:E,config:h}=p;this.state={text:E,data:(0,i.uP)(E,{config:h})}}componentDidUpdate(p,E){const{text:h}=this.state;(h!==E.text||this.props.config!==p.config)&&this.readCSV(),this.props.text!==p.text&&this.props.text!==h&&this.setState({text:this.props.text}),this.state.data!==E.data&&this.props.onSeriesParsed(this.state.data,this.state.text)}render(){const{width:p,height:E,theme:h}=this.props,{data:a}=this.state,v=d(h);return s.createElement("div",{className:v.tableInputCsv},s.createElement(m.K,{style:{width:p,height:E},placeholder:"Enter CSV here...",value:this.state.text,onChange:this.onTextChange,className:v.textarea}),a&&s.createElement("footer",{className:v.footer},a.map((x,y)=>s.createElement("span",{key:y},"Rows:",x.length,", Columns:",x.fields.length," \xA0",s.createElement(o.J,{name:"check-circle"})))))}}const u=(0,f.HE)(r);u.displayName="TableInputCSV";const d=(0,c.B)(g=>({tableInputCsv:t.css`
      position: relative;
    `,textarea:t.css`
      height: 100%;
      width: 100%;
    `,footer:t.css`
      position: absolute;
      bottom: 15px;
      right: 15px;
      border: 1px solid #222;
      background: ${g.colors.success.main};
      padding: 1px ${g.spacing(.5)};
      font-size: 80%;
    `}))},51275:(Z,O,e)=>{"use strict";e.d(O,{A:()=>c});var t=e(9892),n=e(68404),l=e(20112),s=e(7804),i=e(72648);const f=(0,s.B)(o=>({counter:t.css`
      label: counter;
      margin-left: ${o.spacing(1)};
      border-radius: ${o.spacing(3)};
      background-color: ${o.colors.action.hover};
      padding: ${o.spacing(.25,1)};
      color: ${o.colors.text.secondary};
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
    `})),c=({value:o})=>{const m=(0,i.wW)(f);return n.createElement("span",{className:m.counter},(0,l.SP)(o,0).text)}},79841:(Z,O,e)=>{"use strict";e.d(O,{O:()=>o});var t=e(9892),n=e(68404),l=e(68183),s=e(72648),i=e(85419),f=e(39904),c=e(51275);const o=n.forwardRef(({label:r,active:u,icon:d,onChangeTab:g,counter:p,suffix:E,className:h,href:a,...v},x)=>{const y=(0,s.wW)(m),C=()=>n.createElement(n.Fragment,null,d&&n.createElement(f.J,{name:d}),r,typeof p=="number"&&n.createElement(c.A,{value:p}),E&&n.createElement(E,{className:y.suffix})),P=(0,t.cx)(y.link,u?y.activeStyle:y.notActive);return n.createElement("div",{className:y.item},n.createElement("a",{href:a||"#",className:P,...v,onClick:g,"aria-label":v["aria-label"]||l.wl.components.Tab.title(r),role:"tab","aria-selected":u,ref:x},C()))});o.displayName="Tab";const m=r=>({item:t.css`
      list-style: none;
      position: relative;
      display: flex;
      white-space: nowrap;
    `,link:t.css`
      color: ${r.colors.text.secondary};
      padding: ${r.spacing(1.5,2,1)};
      display: block;
      height: 100%;

      svg {
        margin-right: ${r.spacing(1)};
      }

      &:focus-visible {
        ${(0,i.getFocusStyles)(r)}
      }

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 4px;
        border-radius: ${r.shape.radius.default};
        bottom: 0px;
      }
    `,notActive:t.css`
      a:hover,
      &:hover,
      &:focus {
        color: ${r.colors.text.primary};

        &::before {
          background-color: ${r.colors.action.hover};
        }
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${r.colors.text.primary};
      overflow: hidden;

      a {
        color: ${r.colors.text.primary};
      }

      &::before {
        background-image: ${r.colors.gradients.brandHorizontal};
      }
    `,suffix:t.css`
      margin-left: ${r.spacing(1)};
    `})},94893:(Z,O,e)=>{"use strict";e.d(O,{I:()=>f});var t=e(9892),n=e(68404),l=e(7804),s=e(72648);const i=(0,l.B)(c=>({tabContent:t.css`
      background: ${c.colors.background.primary};
    `})),f=({children:c,className:o,...m})=>{const r=(0,s.l4)(),u=i(r);return n.createElement("div",{...m,className:(0,t.cx)(u.tabContent,o)},c)}},72142:(Z,O,e)=>{"use strict";e.d(O,{J:()=>f});var t=e(9892),n=e(68404),l=e(7804),s=e(72648);const i=(0,l.B)((c,o=!1)=>({tabsWrapper:!o&&t.css`
        border-bottom: 1px solid ${c.colors.border.weak};
      `,tabs:t.css`
      position: relative;
      display: flex;
      height: ${c.components.menuTabs.height}px;
    `})),f=n.forwardRef(({children:c,className:o,hideBorder:m},r)=>{const u=(0,s.l4)(),d=i(u,m);return n.createElement("div",{className:(0,t.cx)(d.tabsWrapper,o),ref:r},n.createElement("div",{className:d.tabs,role:"tablist"},c))});f.displayName="TabsBar"},13026:(Z,O,e)=>{"use strict";e.d(O,{L:()=>c});var t=e(9892),n=e(68404),l=e(68183),s=e(72648),i=e(39904),f=e(51275);const c=n.forwardRef(({label:m,active:r,icon:u,counter:d,className:g,suffix:p,onChangeTab:E,href:h,...a},v)=>{const x=(0,s.wW)(o),y=()=>n.createElement(n.Fragment,null,u&&n.createElement(i.J,{name:u}),m,typeof d=="number"&&n.createElement(f.A,{value:d}),p&&n.createElement(p,{className:x.suffix})),C=(0,t.cx)(x.link,r&&x.activeStyle);return n.createElement("a",{href:h,className:C,...a,onClick:E,"aria-label":a["aria-label"]||l.wl.components.Tab.title(m),role:"tab","aria-selected":r,ref:v},y())});c.displayName="Tab";const o=m=>({link:t.css`
      padding: 6px 12px;
      display: block;
      height: 100%;
      cursor: pointer;
      position: relative;

      color: ${m.colors.text.primary};

      svg {
        margin-right: ${m.spacing(1)};
      }

      &:hover,
      &:focus {
        text-decoration: underline;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${m.colors.text.maxContrast};
      overflow: hidden;

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${m.shape.radius.default};
        background-image: linear-gradient(0deg, #f05a28 30%, #fbca0a 99%);
      }
    `,suffix:t.css`
      margin-left: ${m.spacing(1)};
    `})},34719:(Z,O,e)=>{"use strict";e.d(O,{V:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(3385),i=e(39904);const f=(0,n.forwardRef)(({name:o,onClick:m,icon:r,className:u,colorIndex:d,...g},p)=>{const E=(0,l.l4)(),h=c(E,o,d),a=x=>{x.preventDefault(),x.stopPropagation(),m?.(o,x)},v=(0,t.cx)(h.wrapper,u,{[h.hover]:m!==void 0});return m?n.createElement("button",{...g,className:v,onClick:a,ref:p},r&&n.createElement(i.J,{name:r}),o):n.createElement("span",{...g,className:v,ref:p},r&&n.createElement(i.J,{name:r}),o)});f.displayName="Tag";const c=(o,m,r)=>{let u;return r===void 0?u=(0,s.Bx)(m):u=(0,s.vm)(r),{wrapper:t.css`
      appearance: none;
      border-style: none;
      font-weight: ${o.typography.fontWeightMedium};
      font-size: ${o.typography.size.sm};
      line-height: ${o.typography.bodySmall.lineHeight};
      vertical-align: baseline;
      background-color: ${u.color};
      color: ${o.v1.palette.gray98};
      white-space: nowrap;
      text-shadow: none;
      padding: 3px 6px;
      border-radius: ${o.shape.radius.default};
    `,hover:t.css`
      &:hover {
        opacity: 0.85;
        cursor: pointer;
      }
    `}}},34807:(Z,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(34719);const i=(0,n.memo)((0,n.forwardRef)(({displayMax:c,tags:o,icon:m,onClick:r,className:u,getAriaLabel:d},g)=>{const p=(0,l.l4)(),E=f(p,Boolean(c&&c>0)),h=o.length,a=c?o.slice(0,c):o;return n.createElement("ul",{className:(0,t.cx)(E.wrapper,u),"aria-label":"Tags",ref:g},a.map((v,x)=>n.createElement("li",{className:E.li,key:v},n.createElement(s.V,{name:v,icon:m,onClick:r,"aria-label":d?.(v,x),"data-tag-id":x}))),c&&c>0&&h-c>0&&n.createElement("span",{className:E.moreTagsLabel},"+ ",h-c))}));i.displayName="TagList";const f=(c,o)=>({wrapper:t.css`
      position: relative;
      align-items: ${o?"center":"unset"};
      display: flex;
      flex: 1 1 auto;
      flex-wrap: wrap;
      flex-shrink: ${o?0:1};
      justify-content: flex-end;
      gap: 6px;
    `,moreTagsLabel:t.css`
      color: ${c.colors.text.secondary};
      font-size: ${c.typography.size.sm};
    `,li:(0,t.css)({listStyle:"none"})})},43339:(Z,O,e)=>{"use strict";e.d(O,{B:()=>r});var t=e(9892),n=e(68404),l=e(72648),s=e(31403),i=e(46967),f=e(3385),c=e(8180);const o=({name:d,disabled:g,onRemove:p})=>{const{color:E,borderColor:h}=(0,n.useMemo)(()=>(0,f.Bx)(d),[d]),a=(0,l.wW)(m);return n.createElement("li",{className:a.itemStyle,style:{backgroundColor:E,borderColor:h}},n.createElement("span",{className:a.nameStyle},d),n.createElement(c.h,{name:"times",size:"lg",disabled:g,ariaLabel:`Remove "${d}" tag`,onClick:()=>p(d),type:"button",className:a.buttonStyles}))},m=d=>{const g=d.spacing.gridSize*3;return{itemStyle:(0,t.css)({display:"flex",gap:"3px",alignItems:"center",height:`${g}px`,lineHeight:`${g-2}px`,color:"#fff",borderWidth:"1px",borderStyle:"solid",borderRadius:d.shape.radius.default,padding:`0 ${d.spacing(.5)}`,whiteSpace:"nowrap",textShadow:"none",fontWeight:500,fontSize:d.typography.size.sm}),nameStyle:(0,t.css)({maxWidth:"25ch",textOverflow:"ellipsis",overflow:"hidden"}),buttonStyles:(0,t.css)({margin:0,"&:hover::before":{display:"none"}})}},r=({placeholder:d="New tag (enter key to add)",tags:g=[],onChange:p,width:E,className:h,disabled:a,addOnBlur:v,invalid:x,id:y})=>{const[C,P]=(0,n.useState)(""),D=(0,l.wW)(u),M=(0,l.l4)(),b=(0,n.useCallback)(I=>{P(I.target.value)},[]),R=I=>{p(g.filter(F=>F!==I))},B=I=>{I?.preventDefault(),g.includes(C)||p(g.concat(C)),P("")},w=()=>{v&&C&&B()},A=I=>{I.key==="Enter"&&C!==""&&B(I)};return n.createElement("div",{className:(0,t.cx)(D.wrapper,h,E?(0,t.css)({width:M.spacing(E)}):"")},n.createElement(i.I,{id:y,disabled:a,placeholder:d,onChange:b,value:C,onKeyDown:A,onBlur:w,invalid:x,suffix:n.createElement(s.zx,{fill:"text",className:D.addButtonStyle,onClick:B,size:"md",disabled:C.length<=0},"Add")}),g?.length>0&&n.createElement("ul",{className:D.tags},g.map(I=>n.createElement(o,{key:I,name:I,onRemove:R,disabled:a}))))},u=d=>({wrapper:t.css`
    min-height: ${d.spacing(4)};
    display: flex;
    flex-direction: column;
    gap: ${d.spacing(1)};
    flex-wrap: wrap;
  `,tags:t.css`
    display: flex;
    justify-content: flex-start;
    flex-wrap: wrap;
    gap: ${d.spacing(.5)};
  `,addButtonStyle:t.css`
    margin: 0 -${d.spacing(1)};
  `})},97379:(Z,O,e)=>{"use strict";e.d(O,{K:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(7804),i=e(73267);const f=n.forwardRef(({invalid:o,className:m,...r},u)=>{const d=(0,l.l4)(),g=c(d,o);return n.createElement("textarea",{...r,className:(0,t.cx)(g.textarea,m),ref:u})}),c=(0,s.B)((o,m=!1)=>({textarea:(0,t.cx)((0,i.RK)(o),(0,i.GL)(o),t.css`
        border-radius: ${o.shape.borderRadius()};
        padding: ${o.spacing.gridSize/4}px ${o.spacing.gridSize}px;
        width: 100%;
        border-color: ${m?o.colors.error.border:o.components.input.borderColor};
      `)}));f.displayName="TextArea"},68948:(Z,O,e)=>{"use strict";e.d(O,{p:()=>A});var t=e(68404),n=e(72648),l=e(72269),s=e(60325),i=e(68416),f=e(82897),c=e(75974),o=e(14582),m=e(36512),r=e(425),u=e(66926),d=e(20112),g=e(89890),p=e(29431),E=e(55294),h=e(40538),a=e(86979),v=e(13347),x=e(52240),y=e(2445);const C=new Set(["bytes","bits","kbytes","mbytes","gbytes","tbytes","pbytes","binBps","binbps","KiBs","Kibits","MiBs","Mibits","GiBs","Gibits","TiBs","Tibits","PiBs","Pibits"]),P=Array(53);for(let I=0;I<P.length;I++)P[I]=2**I;const D=(I,F=1)=>I==null?"-":I.toFixed(F),M={drawStyle:h.l8.Line,showPoints:h.Jp.Auto,axisPlacement:h.LB.Auto},b=({frame:I,theme:F,timeZones:K,getTimeRange:W,eventBus:U,sync:N,allFrames:S,renderers:Y,tweakScale:Q=G=>G,tweakAxis:z=G=>G})=>{const G=new v.U(K[0]);let k;G.setPrepData(te=>(k=te[0],(0,y.Bj)(te[0],G.getStackingGroups())));const j=I.fields[0];if(!j)return G;const de="x";let ge="_x",re="";const ce=j.config.custom?.axisPlacement!==h.LB.Hidden?h.LB.Bottom:h.LB.Hidden,ie=j.config.custom?.axisPlacement!==h.LB.Hidden;if(j.type===o.fS.time){ge="time",G.addScale({scaleKey:de,orientation:h.wN.Horizontal,direction:h.bQ.Right,isTime:!0,range:()=>{const ae=W();return[ae.from.valueOf(),ae.to.valueOf()]}});const te=K.length>1?(ae,_)=>_.map((ve,Ve)=>Ve<2?null:ve):void 0;for(let ae=0;ae<K.length;ae++){const _=K[ae];G.addAxis({scaleKey:de,isTime:!0,placement:ce,show:ie,label:j.config.custom?.axisLabel,timeZone:_,theme:F,grid:{show:ae===0&&j.config.custom?.axisGridShow},filter:te})}K.length>1&&G.addHook("drawAxes",ae=>{ae.ctx.save(),ae.ctx.fillStyle=F.colors.text.primary,ae.ctx.textAlign="left",ae.ctx.textBaseline="bottom";let _=0;ae.axes.forEach(ve=>{if(ve.side===2){let Ve=ve._pos+ve._size;ae.ctx.fillText(K[_],ae.bbox.left,Ve*c.Z.pxRatio),_++}}),ae.ctx.restore()})}else j.config.unit&&(ge=j.config.unit),G.addScale({scaleKey:de,orientation:h.wN.Horizontal,direction:h.bQ.Right}),G.addAxis({scaleKey:de,placement:ce,show:ie,label:j.config.custom?.axisLabel,theme:F,grid:{show:j.config.custom?.axisGridShow}});let fe=Y?.flatMap(te=>Object.values(te.fieldMap).filter(ae=>te.indicesOnly.indexOf(ae)===-1))??[],Ce;for(let te=1;te<I.fields.length;te++){const ae=I.fields[te],_={...ae.config,custom:{...M,...ae.config.custom}},ve=_.custom;if(ae===j||ae.type!==o.fS.number)continue;let Ve=ae.display??D;ae.config.custom?.stacking?.mode===h.o0.Percent&&(Ve=(0,m.U_)({field:{...ae,config:{...ae.config,unit:"percentunit"}},theme:F}));const it=(0,a.z)(_),rt=(0,r.fD)(ae),Ie=(0,r.YO)(ae,F).color;if(G.addScale(Q({scaleKey:it,orientation:h.wN.Vertical,direction:h.bQ.Up,distribution:ve.scaleDistribution?.type,log:ve.scaleDistribution?.log,linearThreshold:ve.scaleDistribution?.linearThreshold,min:ae.config.min,max:ae.config.max,softMin:ve.axisSoftMin,softMax:ve.axisSoftMax,centeredZero:ve.axisCenteredZero,range:ve.stacking?.mode===h.o0.Percent?(Se,Fe,Xe)=>(Fe=Fe<0?-1:0,Xe=Xe>0?1:0,[Fe,Xe]):void 0,decimals:ae.config.decimals},ae)),re||(re=it),ve.axisPlacement!==h.LB.Hidden){let Se;ve.axisColorMode===h.yK.Series&&(rt.isByValue&&ae.config.custom?.gradientMode===h.FI.Scheme&&rt.id===u.S.Thresholds?Se=(0,x.P2)(1,F,rt,ae.config.thresholds):Se=Ie);let Fe={};Se&&(Fe={border:{show:!0,width:1,stroke:Se},ticks:{stroke:Se},color:ve.axisColorMode===h.yK.Series?Se:void 0});let Xe;C.has(_.unit)&&(Xe=P),G.addAxis(z({scaleKey:it,label:ve.axisLabel,size:ve.axisWidth,placement:ve.axisPlacement??h.LB.Auto,formatValue:(Qe,ct)=>(0,d.zc)(Ve(Qe,ct)),theme:F,grid:{show:ve.axisGridShow},decimals:ae.config.decimals,distr:ve.scaleDistribution?.type,incrs:Xe,...Fe},ae))}const We=ve.drawStyle===h.l8.Points?h.Jp.Always:ve.showPoints;let Je=()=>null;ve.spanNulls!==!0&&(Je=(Se,Fe,Xe,Qe)=>{let ct=[],ht=Se.series[Fe];if(!Xe&&Qe&&Qe.length){const[ft,Re]=ht.idxs,nt=Se.data[0],le=Se.data[Fe],Pe=Math.round(Se.valToPos(nt[ft],"x",!0)),Oe=Math.round(Se.valToPos(nt[Re],"x",!0));Qe[0][0]===Pe&&ct.push(ft);for(let Le=0;Le<Qe.length;Le++){let Ye=Qe[Le],be=Qe[Le+1];if(be&&Ye[1]===be[0]){let Te=Se.posToIdx(Ye[1],!0);if(le[Te]==null)for(let me=1;me<100;me++){if(le[Te+me]!=null){Te+=me;break}if(le[Te-me]!=null){Te-=me;break}}ct.push(Te)}}Qe[Qe.length-1][1]===Oe&&ct.push(Re)}return ct.length?ct:null});let{fillOpacity:He}=ve,Ae=null,et=null;if(ae.state?.origin){Ce||(Ce=R(I,S));const Se=S[ae.state.origin.frameIndex],Fe=Se?.fields[ae.state.origin.fieldIndex],Xe=(0,g.C)(Fe??ae,Se,S);if(fe.indexOf(Xe)>=0)Ae=()=>null,et=()=>{};else if(ve.transform===h.pR.Constant){const Qe=c.Z.paths.linear();Ae=(ct,ht)=>{const ft=ct._data,Re=W();let nt=[Re.from.valueOf(),Re.to.valueOf()],le=ft[ht].find(Le=>Le!=null),Pe=[le,le],Oe=ft.slice();return Oe[0]=nt,Oe[ht]=Pe,Qe({...ct,_data:Oe},ht,0,1)}}if(ve.fillBelowTo){const Qe=I.fields.find(Re=>ve.fillBelowTo===Re.name||ve.fillBelowTo===Re.config?.displayNameFromDS||ve.fillBelowTo===(0,g.C)(Re,I,S)),ct=Qe?(0,g.C)(Qe,I,S):ve.fillBelowTo,ht=Ce.get(Xe),ft=Ce.get(ct);(0,f.isNumber)(ft)&&(0,f.isNumber)(ht)?(G.addBand({series:[ht,ft],fill:void 0}),He||(He=35)):He=0}}let _e;rt.id===u.S.Thresholds&&(_e=Se=>(0,r.YO)(k.fields[Se],F).color),G.addSeries({pathBuilder:Ae,pointsBuilder:et,scaleKey:it,showPoints:We,pointsFilter:Je,colorMode:rt,fillOpacity:He,theme:F,dynamicSeriesColor:_e,drawStyle:ve.drawStyle,lineColor:ve.lineColor??Ie,lineWidth:ve.lineWidth,lineInterpolation:ve.lineInterpolation,lineStyle:ve.lineStyle,barAlignment:ve.barAlignment,barWidthFactor:ve.barWidthFactor,barMaxWidth:ve.barMaxWidth,pointSize:ve.pointSize,spanNulls:ve.spanNulls||!1,show:!ve.hideFrom?.viz,gradientMode:ve.gradientMode,thresholds:_.thresholds,hardMin:ae.config.min,hardMax:ae.config.max,softMin:ve.axisSoftMin,softMax:ve.axisSoftMax,dataFrameFieldIndex:ae.state?.origin}),ve.thresholdsStyle&&_.thresholds&&(ve.thresholdsStyle.mode??h.i3.Off)!==h.i3.Off&&G.addThresholds({config:ve.thresholdsStyle,thresholds:_.thresholds,scaleKey:it,theme:F,hardMin:ae.config.min,hardMax:ae.config.max,softMin:ve.axisSoftMin,softMax:ve.axisSoftMax})}let ee=(0,y.i7)(I);G.setStackingGroups(ee),Y?.forEach(te=>{Ce||(Ce=R(I,S));let ae={};for(let _ in te.fieldMap){let ve=te.fieldMap[_];ae[_]=Ce.get(ve)}te.init(G,ae)}),G.scaleKeys=[de,re];const ne=15;let X={dataIdx:(te,ae,_,ve)=>{let Ve=te.data[ae];if(Ve[_]==null){let it=null,rt=null,pe;for(pe=_;it==null&&pe-- >0;)Ve[pe]!=null&&(it=pe);for(pe=_;rt==null&&pe++<Ve.length;)Ve[pe]!=null&&(rt=pe);let Ie=te.data[0],We=te.valToPos(ve,"x"),Je=rt==null?1/0:te.valToPos(Ie[rt],"x"),He=it==null?-1/0:te.valToPos(Ie[it],"x"),Ae=We-He,et=Je-We;Ae<=et?Ae<=ne&&(_=it):et<=ne&&(_=rt)}return _}};if(N&&N()!==p.m.Off){const te={point:{[de]:null,[re]:null},data:I},ae=new E.es(te);X.sync={key:"__global_",filters:{pub:(_,ve,Ve,it,rt,pe,Ie)=>N&&N()===p.m.Off?!1:(te.rowIndex=Ie,Ve<0&&it<0?(te.point[ge]=null,te.point[re]=null,U.publish(new E.xH)):(te.point[ge]=ve.posToVal(Ve,de),te.point[re]=ve.posToVal(it,re),te.point.panelRelY=it>0?it/pe:1,U.publish(ae),ae.payload.down=void 0),!0)},scales:[de,re]}}return G.setSync(),G.setCursor(X),G};function R(I,F){const K=new Map;return I.fields.forEach((W,U)=>{const N=W.state?.origin;if(N){const S=F[N.frameIndex]?.fields[N.fieldIndex];S&&K.set((0,g.C)(S,F[N.frameIndex],F),U)}}),K}const B=["legend","options","theme"];class w extends t.Component{constructor(){super(...arguments),this.panelContext={},this.prepConfig=(F,K,W)=>{const{eventBus:U,sync:N}=this.context,{theme:S,timeZone:Y,renderers:Q,tweakAxis:z,tweakScale:G}=this.props;return b({frame:F,theme:S,timeZones:Array.isArray(Y)?Y:[Y],getTimeRange:W,eventBus:U,sync:N,allFrames:K,renderers:Q,tweakScale:G,tweakAxis:z})},this.renderLegend=F=>{const{legend:K,frames:W}=this.props;return!F||K&&!K.showLegend?null:t.createElement(i.l,{data:W,config:F,...K})}}render(){return t.createElement(l.d,{...this.props,prepConfig:this.prepConfig,propsToDiff:B,renderLegend:this.renderLegend})}}w.contextType=s.bb;const A=(0,n.HE)(w);A.displayName="TimeSeries"},64319:(Z,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(9892),n=e(68404),l=e(43565),s=e(68183),i=e(72648),f=e(85419),c=e(31403),o=e(39904),m=e(6554);const r=(0,n.forwardRef)(({tooltip:p,icon:E,iconSize:h,className:a,children:v,imgSrc:x,imgAlt:y,fullWidth:C,isOpen:P,narrow:D,variant:M="default",iconOnly:b,"aria-label":R,isHighlighted:B,...w},A)=>{const I=(0,i.wW)(g),F=(0,t.cx)({[I.button]:!0,[I.buttonFullWidth]:C,[I.narrow]:D},I[M],a),K=(0,t.cx)({[I.content]:!0,[I.contentWithIcon]:!!E,[I.contentWithRightIcon]:P!==void 0}),W=n.createElement("button",{ref:A,className:F,"aria-label":u(R,p),"aria-expanded":P,...w},d(E,h),x&&n.createElement("img",{className:I.img,src:x,alt:y??""}),v&&!b&&n.createElement("div",{className:K},v),P===!1&&n.createElement(o.J,{name:"angle-down"}),P===!0&&n.createElement(o.J,{name:"angle-up"}),B&&n.createElement("div",{className:I.highlight}));return p?n.createElement(m.u,{content:p,placement:"bottom"},W):W});r.displayName="ToolbarButton";function u(p,E){return p||(E?s.wl.components.PageToolbar.item(E):void 0)}function d(p,E){return p?(0,l.Mo)(p)?n.createElement(o.J,{name:p,size:`${E||"lg"}`}):p:null}const g=p=>{const E=(0,c.c9)(p,"primary","solid"),h=(0,c.c9)(p,"destructive","solid"),a=t.css`
    color: ${p.colors.text.secondary};
    background-color: ${p.colors.background.primary};

    &:hover {
      color: ${p.colors.text.primary};
      background: ${p.colors.background.secondary};
    }
  `,v=t.css`
    color: ${p.colors.text.secondary};
    background: transparent;
    border: 1px solid transparent;

    &:hover {
      color: ${p.colors.text.primary};
      background: ${p.colors.background.secondary};
    }
  `;return{button:t.css`
      label: toolbar-button;
      position: relative;
      display: flex;
      align-items: center;
      height: ${p.spacing(p.components.height.md)};
      padding: ${p.spacing(0,1)};
      border-radius: ${p.shape.borderRadius()};
      line-height: ${p.components.height.md*p.spacing.gridSize-2}px;
      font-weight: ${p.typography.fontWeightMedium};
      border: 1px solid ${p.colors.border.weak};
      white-space: nowrap;
      transition: ${p.transitions.create(["background","box-shadow","border-color","color"],{duration:p.transitions.duration.short})};

      &:focus,
      &:focus-visible {
        ${(0,f.getFocusStyles)(p)}
        z-index: 1;
      }

      &:focus:not(:focus-visible) {
        ${(0,f.getMouseFocusStyles)(p)}
      }

      &:hover {
        box-shadow: ${p.shadows.z1};
      }

      &[disabled],
      &:disabled {
        cursor: not-allowed;
        opacity: ${p.colors.action.disabledOpacity};
        background: ${p.colors.action.disabledBackground};
        box-shadow: none;

        &:hover {
          color: ${p.colors.text.disabled};
          background: ${p.colors.action.disabledBackground};
          box-shadow: none;
        }
      }
    `,default:p.flags.topnav?v:a,canvas:a,active:t.css`
      color: ${p.v1.palette.orangeDark};
      border-color: ${p.v1.palette.orangeDark};
      background-color: transparent;

      &:hover {
        color: ${p.colors.text.primary};
        background: ${p.colors.emphasize(p.colors.background.canvas,.03)};
      }
    `,primary:(0,t.css)(E),destructive:(0,t.css)(h),narrow:t.css`
      padding: 0 ${p.spacing(.5)};
    `,img:t.css`
      width: 16px;
      height: 16px;
      margin-right: ${p.spacing(1)};
    `,buttonFullWidth:t.css`
      flex-grow: 1;
    `,content:t.css`
      flex-grow: 1;
    `,contentWithIcon:t.css`
      display: none;
      padding-left: ${p.spacing(1)};

      @media ${f.mediaUp(p.v1.breakpoints.md)} {
        display: block;
      }
    `,contentWithRightIcon:t.css`
      padding-right: ${p.spacing(.5)};
    `,highlight:t.css`
      background-color: ${p.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      position: absolute;
      top: -3px;
      right: -3px;
      z-index: 1;
    `}}},8125:(Z,O,e)=>{"use strict";e.d(O,{R:()=>o});var t=e(9892),n=e(99510),l=e(81699),s=e(6665),i=e(68404),f=e(72648),c=e(64319);const o=(0,i.forwardRef)(({alignment:r="left",className:u,children:d,...g},p)=>{const E=i.Children.toArray(d).filter(w=>w!==null),[h,a]=(0,i.useState)(Array(E.length).fill(!0)),v=(0,i.useRef)(null),[x,y]=(0,i.useState)(!1),C=(0,i.useRef)(null),P=(0,i.createRef)(),{overlayProps:D}=(0,s.Ir)({onClose:()=>y(!1),isDismissable:!0,isOpen:x,shouldCloseOnInteractOutside:w=>!C.current?.contains(w)},P),{dialogProps:M}=(0,n.R)({},P),b=(0,f.l4)(),R=r==="left"?h.indexOf(!1)-1:h.length,B=m(b,R,r);return(0,i.useLayoutEffect)(()=>{const w=new IntersectionObserver(A=>{A.forEach(I=>{if(I.target instanceof HTMLElement&&I.target.parentNode){const F=Array.prototype.indexOf.call(I.target.parentNode.children,I.target);a(K=>{const W=[...K];return W[F]=I.isIntersecting,W})}})},{threshold:1,root:v.current});return v.current&&Array.from(v.current.children).forEach(A=>{A instanceof HTMLElement&&A!==C.current&&w.observe(A)}),()=>w.disconnect()},[d]),i.createElement("div",{ref:v,className:(0,t.cx)(B.container,u),...g},E.map((w,A)=>i.createElement("div",{key:A,style:{order:A,visibility:h[A]?"visible":"hidden"},className:B.childWrapper},w)),h.includes(!1)&&i.createElement("div",{ref:C,className:B.overflowButton},i.createElement(c.h,{variant:x?"active":"default",tooltip:"Show more items",onClick:()=>y(!x),icon:"ellipsis-v",iconOnly:!0,narrow:!0}),x&&i.createElement(l.MT,{contain:!0,autoFocus:!0},i.createElement("div",{className:B.overflowItems,ref:P,...D,...M},E.map((w,A)=>!h[A]&&w)))))});o.displayName="ToolbarButtonRow";const m=(r,u,d)=>({overflowButton:t.css`
    order: ${u};
  `,overflowItems:t.css`
    align-items: center;
    background-color: ${r.colors.background.primary};
    border-radius: ${r.shape.borderRadius()};
    box-shadow: ${r.shadows.z3};
    display: flex;
    flex-wrap: wrap;
    gap: ${r.spacing(1)};
    margin-top: ${r.spacing(1)};
    max-width: 80vw;
    padding: ${r.spacing(.5,1)};
    position: absolute;
    right: 0;
    top: 100%;
    width: max-content;
    z-index: ${r.zIndex.sidemenu};
  `,container:t.css`
    align-items: center;
    display: flex;
    gap: ${r.spacing(1)};
    justify-content: ${d==="left"?"flex-start":"flex-end"};
    min-width: 0;
    position: relative;
  `,childWrapper:t.css`
    align-items: center;
    display: flex;
    gap: ${r.spacing(1)};
  `})},56921:(Z,O,e)=>{"use strict";e.d(O,{J:()=>o});var t=e(68404),n=e(93701),l=e(73934),s=e(41141),i=e(85511);const f={transitionProperty:"opacity",transitionDuration:"200ms",transitionTimingFunction:"linear",opacity:0},c={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1,transitionDelay:"0s"},exiting:{opacity:0,transitionDelay:"500ms"}};class o extends t.PureComponent{render(){const{content:r,show:u,placement:d,onMouseEnter:g,onMouseLeave:p,className:E,wrapperClassName:h,renderArrow:a,referenceElement:v,onKeyDown:x}=this.props;return t.createElement(n.dK,null,t.createElement(s.ZP,{in:u,timeout:100,mountOnEnter:!0,unmountOnExit:!0},y=>t.createElement(i.h_,null,t.createElement(l.r,{placement:d,referenceElement:v,modifiers:[{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}},{name:"eventListeners",options:{scroll:!0,resize:!0}}]},({ref:C,style:P,placement:D,arrowProps:M,update:b})=>t.createElement("div",{onMouseEnter:g,onMouseLeave:p,onKeyDown:x,ref:C,style:{...P,...f,...c[y]},"data-placement":D,className:`${h}`},t.createElement("div",{className:E},typeof r=="string"&&r,t.isValidElement(r)&&t.cloneElement(r),typeof r=="function"&&r({updatePopperPosition:b}),a&&a({arrowProps:M,placement:D})))))))}}},39604:(Z,O,e)=>{"use strict";e.d(O,{D:()=>n});var t=e(68404);class n extends t.Component{constructor(){super(...arguments),this.hideTimeout=null,this.state={show:!1},this.showPopper=()=>{this.hideTimeout&&clearTimeout(this.hideTimeout),this.setState({show:!0})},this.hidePopper=()=>{this.hideTimeout=setTimeout(()=>{this.setState({show:!1})},this.props.hideAfter)}}render(){const{children:s,content:i,placement:f="auto"}=this.props,{show:c}=this.state;return s(this.showPopper,this.hidePopper,{show:c,placement:f,content:i})}}},6554:(Z,O,e)=>{"use strict";e.d(O,{u:()=>o});var t=e(68404),n=e(85361),l=e(72648),s=e(9892),i=e(64724);function f(r,u,d,g,p){return{arrow:s.css`
      height: 1rem;
      width: 1rem;
      position: absolute;
      pointer-events: none;

      &::before {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        width: 0;
      }

      &::after {
        border-style: solid;
        content: '';
        display: block;
        height: 0;
        margin: auto;
        position: absolute;
        width: 0;
      }
    `,container:s.css`
      background-color: ${u};
      border-radius: ${r.shape.radius.default};
      border: 1px solid ${d};
      box-shadow: ${r.shadows.z2};
      color: ${g};
      font-size: ${r.typography.bodySmall.fontSize};
      padding: ${r.spacing(p.topBottom,p.rightLeft)};
      transition: opacity 0.3s;
      z-index: ${r.zIndex.tooltip};
      max-width: 400px;
      overflow-wrap: break-word;

      &[data-popper-interactive='false'] {
        pointer-events: none;
      }

      &[data-popper-placement*='bottom'] > div[data-popper-arrow='true'] {
        left: 0;
        margin-top: -7px;
        top: 0;

        &::before {
          border-color: transparent transparent ${d} transparent;
          border-width: 0 8px 7px 8px;
          position: absolute;
          top: -1px;
        }

        &::after {
          border-color: transparent transparent ${u} transparent;
          border-width: 0 8px 7px 8px;
        }
      }

      &[data-popper-placement*='top'] > div[data-popper-arrow='true'] {
        bottom: 0;
        left: 0;
        margin-bottom: -14px;

        &::before {
          border-color: ${d} transparent transparent transparent;
          border-width: 7px 8px 0 7px;
          position: absolute;
          top: 1px;
        }

        &::after {
          border-color: ${u} transparent transparent transparent;
          border-width: 7px 8px 0 7px;
        }
      }

      &[data-popper-placement*='right'] > div[data-popper-arrow='true'] {
        left: 0;
        margin-left: -10px;

        &::before {
          border-color: transparent ${d} transparent transparent;
          border-width: 7px 6px 7px 0;
        }

        &::after {
          border-color: transparent ${u} transparent transparent;
          border-width: 6px 7px 7px 0;
          left: 2px;
          top: 1px;
        }
      }

      &[data-popper-placement*='left'] > div[data-popper-arrow='true'] {
        margin-right: -11px;
        right: 0;

        &::before {
          border-color: transparent transparent transparent ${d};
          border-width: 7px 0 6px 7px;
        }

        &::after {
          border-color: transparent transparent transparent ${u};
          border-width: 6px 0 5px 5px;
          left: 1px;
          top: 1px;
        }
      }

      code {
        border: none;
        display: inline;
        background: ${i.darken(u,.1)};
        color: ${g};
      }

      pre {
        background: ${i.darken(u,.1)};
        color: ${g};
      }

      a {
        color: ${g};
        text-decoration: underline;
      }

      a:hover {
        text-decoration: none;
      }
    `,headerClose:s.css`
      color: ${r.colors.text.secondary};
      position: absolute;
      right: ${r.spacing(1)};
      top: ${r.spacing(1.5)};
      background-color: transparent;
      border: 0;
    `,header:s.css`
      padding-top: ${r.spacing(1)};
      padding-bottom: ${r.spacing(2)};
    `,body:s.css`
      padding-top: ${r.spacing(1)};
      padding-bottom: ${r.spacing(1)};
    `,footer:s.css`
      padding-top: ${r.spacing(2)};
      padding-bottom: ${r.spacing(1)};
    `}}var c=e(85511);const o=t.memo(({children:r,theme:u,interactive:d,show:g,placement:p,content:E})=>{const[h,a]=t.useState(g);(0,t.useEffect)(()=>{if(h!==!1){const R=B=>{B.key==="Escape"&&a(!1)};return document.addEventListener("keydown",R),()=>{document.removeEventListener("keydown",R)}}else return},[h]);const{getArrowProps:v,getTooltipProps:x,setTooltipRef:y,setTriggerRef:C,visible:P,update:D}=(0,n.O)({visible:h,placement:p,interactive:d,delayHide:d?100:0,delayShow:150,offset:[0,8],trigger:["hover","focus"],onVisibleChange:a}),b=(0,l.wW)(m)[u??"info"];return t.createElement(t.Fragment,null,t.cloneElement(r,{ref:C,tabIndex:0}),P&&t.createElement(c.h_,null,t.createElement("div",{ref:y,...x({className:b.container})},t.createElement("div",{...v({className:b.arrow})}),typeof E=="string"&&E,t.isValidElement(E)&&t.cloneElement(E),typeof E=="function"&&D&&E({updatePopperPosition:D}))))});o.displayName="Tooltip";const m=r=>{const u=f(r,r.components.tooltip.background,r.components.tooltip.background,r.components.tooltip.text,{topBottom:.5,rightLeft:1}),d=f(r,r.colors.error.main,r.colors.error.main,r.colors.error.contrastText,{topBottom:.5,rightLeft:1});return{info:u,["info-alt"]:u,error:d}}},69636:(Z,O,e)=>{"use strict";e.d(O,{H:()=>l});var t=e(68404);function n(s,i){const f=[];return s.forEach(c=>{f.push(c.start,c.end+1)}),f[0]!==0&&f.unshift(0),f[f.length-1]!==i&&f.push(i),f}const l=s=>{let{highlightParts:i,text:f,highlightClassName:c}=s;if(!i?.length)return null;let o=[],m=n(i,f.length),r=i[0].start===0;for(let u=1;u<m.length;u++){let d=m[u-1],g=m[u];o.push((0,t.createElement)(r?"mark":"span",{key:u-1,className:r?c:void 0},f.substring(d,g))),r=!r}return t.createElement("div",null,o)}},61227:(Z,O,e)=>{"use strict";e.d(O,{n:()=>i});var t=e(68404),n=e(20112),l=e(95093);function s(f){return`Custom unit: ${f}`}class i extends t.PureComponent{constructor(){super(...arguments),this.onChange=c=>{this.props.onChange(c.value)}}render(){const{value:c,width:o}=this.props;let m;const u=(0,n.QW)().map(d=>{const g=d.submenu.map(p=>{const E={label:p.text,value:p.value};return p.value===c&&(m=E),E});return{label:d.text,value:d.text,items:g}});return c&&!m&&(m={value:c,label:c}),t.createElement(l.v,{width:o,initialValue:m&&m.label,allowCustomValue:!0,changeOnSelect:!1,formatCreateLabel:s,options:u,placeholder:"Choose",onSelect:this.props.onChange})}}},15670:(Z,O,e)=>{"use strict";e.d(O,{b:()=>f});var t=e(68404),n=e(68183),l=e(72648),s=e(31403),i=e(53217);function f({"aria-label":c,label:o,icon:m,options:r,onChange:u,variant:d,minWidth:g=16,size:p="sm",isFullWidth:E=!0,menuPlacement:h,fill:a,buttonCss:v}){const[x,y]=(0,t.useState)(!1),C=(0,l.l4)();return t.createElement(t.Fragment,null,!x&&t.createElement(s.zx,{size:p||"sm",className:v,icon:m||"plus",onClick:()=>y(!0),variant:d,fill:a,fullWidth:E,"aria-label":n.wl.components.ValuePicker.button(c??o)},o),x&&t.createElement("span",{style:{minWidth:C.spacing(g),flexGrow:E?1:void 0}},t.createElement(i.Ph,{placeholder:o,options:r,"aria-label":n.wl.components.ValuePicker.select(c??o),isOpen:!0,onCloseMenu:()=>y(!1),autoFocus:!0,onChange:P=>{y(!1),u(P)},menuPlacement:h})))}},729:(Z,O,e)=>{"use strict";e.d(O,{AY:()=>c});var t=e(9892),n=e(68404),l=e(11041),s=e(72648),i=e(85419),f=e(68226);const c=({width:r,height:u,legend:d,children:g})=>{const p=(0,s.wW)(o),E={display:"flex",width:`${r}px`,height:`${u}px`},[h,a]=(0,l.Z)();if(!d)return n.createElement(n.Fragment,null,n.createElement("div",{tabIndex:0,style:E,className:p.viz},g(r,u)));const{placement:v,maxHeight:x="35%",maxWidth:y="60%"}=d.props;let C=null;const P={};switch(v){case"bottom":E.flexDirection="column",P.maxHeight=x,a&&(C={width:r,height:u-a.height});break;case"right":E.flexDirection="row",P.maxWidth=y,a&&(C={width:r-a.width,height:u}),d.props.width&&(P.width=d.props.width,C={width:r-d.props.width,height:u});break}return C?.width===0&&(C.width=r),C?.height===0&&(C.height=u),n.createElement("div",{style:E},n.createElement("div",{tabIndex:0,className:p.viz},C&&g(C.width,C.height)),n.createElement("div",{style:P,ref:h},n.createElement(f.$,{hideHorizontalTrack:!0},d)))},o=r=>({viz:(0,t.css)({flexGrow:2,borderRadius:r.shape.borderRadius(1),"&:focus-visible":(0,i.getFocusStyles)(r)})}),m=({children:r})=>n.createElement(n.Fragment,null,r);c.Legend=m},6264:(Z,O,e)=>{"use strict";e.d(O,{F:()=>s});var t=e(68404),n=e(425),l=e(72648);const s=t.memo(t.forwardRef(({color:i,className:f,gradient:c,...o},m)=>{const r=(0,l.l4)();let u;if(c){const g=n.WO.get(c).getColors?.(r);g?.length?u=`linear-gradient(90deg, ${g.join(", ")})`:u=r.visualization.getColorByName("")}else u=i;const d={background:u,width:"14px",height:"4px",borderRadius:r.shape.radius.default,display:"inline-block",marginRight:"8px"};return t.createElement("div",{"data-testid":"series-icon",ref:m,className:f,style:d,...o})}));s.displayName="SeriesIcon"},78056:(Z,O,e)=>{"use strict";e.d(O,{l:()=>M});var t=e(68404),n=e(55294),l=e(40538),s=e(60325),i=e(17882),f=e(9892),c=e(72648),o=e(19882),m=e(56766),r=e(46920);const u=({items:b,itemRenderer:R,onLabelMouseOver:B,onLabelMouseOut:w,onLabelClick:A,placement:I,className:F,readonly:K})=>{const W=(0,c.wW)(d);R||(R=N=>t.createElement(r.e,{item:N,onLabelClick:A,onLabelMouseOver:B,onLabelMouseOut:w,readonly:K}));const U=N=>`${N.getItemKey?N.getItemKey():N.label}`;switch(I){case"right":{const N=(S,Y)=>t.createElement("span",{className:W.itemRight},R(S,Y));return t.createElement("div",{className:(0,f.cx)(W.rightWrapper,F)},t.createElement(m.a,{items:b,renderItem:N,getItemKey:U}))}case"bottom":default:{const N=(S,Y)=>t.createElement("span",{className:W.itemBottom},R(S,Y));return t.createElement("div",{className:(0,f.cx)(W.bottomWrapper,F)},t.createElement("div",{className:W.section},t.createElement(o.Y,{items:b.filter(S=>S.yAxis===1),renderItem:N,getItemKey:U})),t.createElement("div",{className:(0,f.cx)(W.section,W.sectionRight)},t.createElement(o.Y,{items:b.filter(S=>S.yAxis!==1),renderItem:N,getItemKey:U})))}}};u.displayName="VizLegendList";const d=b=>{const R=f.css`
    padding-right: 10px;
    display: flex;
    font-size: ${b.typography.bodySmall.fontSize};
    white-space: nowrap;
  `;return{itemBottom:R,itemRight:(0,f.cx)(R,f.css`
        margin-bottom: ${b.spacing(.5)};
      `),rightWrapper:f.css`
      padding-left: ${b.spacing(.5)};
    `,bottomWrapper:f.css`
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      width: 100%;
      padding-left: ${b.spacing(.5)};
    `,section:f.css`
      display: flex;
    `,sectionRight:f.css`
      justify-content: flex-end;
      flex-grow: 1;
    `}};var g=e(82897),p=e(39904),E=e(20112),h=e(85419),a=e(59943);const v=({item:b,onLabelClick:R,onLabelMouseOver:B,onLabelMouseOut:w,className:A,readonly:I})=>{const F=(0,c.wW)(x),K=(0,t.useCallback)(N=>{B&&B(b,N)},[b,B]),W=(0,t.useCallback)(N=>{w&&w(b,N)},[b,w]),U=(0,t.useCallback)(N=>{R&&R(b,N)},[b,R]);return t.createElement("tr",{className:(0,f.cx)(F.row,A)},t.createElement("td",null,t.createElement("span",{className:F.itemWrapper},t.createElement(a.i,{color:b.color,seriesName:b.label,readonly:I}),t.createElement("button",{disabled:I,type:"button",onBlur:W,onFocus:K,onMouseOver:K,onMouseOut:W,onClick:I?void 0:U,className:(0,f.cx)(F.label,b.disabled&&F.labelDisabled)},b.label," ",b.yAxis===2&&t.createElement("span",{className:F.yAxisLabel},"(right y-axis)")))),b.getDisplayValues&&b.getDisplayValues().map((N,S)=>t.createElement("td",{className:F.value,key:`${N.title}-${S}`},(0,E.zc)(N))))};v.displayName="LegendTableItem";const x=b=>{const R=h.hoverColor(b.colors.background.primary,b);return{row:f.css`
      label: LegendRow;
      font-size: ${b.v1.typography.size.sm};
      border-bottom: 1px solid ${b.colors.border.weak};
      td {
        padding: ${b.spacing(.25,1)};
        white-space: nowrap;
      }

      &:hover {
        background: ${R};
      }
    `,label:f.css`
      label: LegendLabel;
      white-space: nowrap;
      background: none;
      border: none;
      font-size: inherit;
      padding: 0;
    `,labelDisabled:f.css`
      label: LegendLabelDisabled;
      color: ${b.colors.text.disabled};
    `,itemWrapper:f.css`
      display: flex;
      white-space: nowrap;
      align-items: center;
    `,value:f.css`
      text-align: right;
    `,yAxisLabel:f.css`
      color: ${b.colors.text.secondary};
    `}},y=({items:b,sortBy:R,sortDesc:B,itemRenderer:w,className:A,onToggleSort:I,onLabelClick:F,onLabelMouseOver:K,onLabelMouseOut:W,readonly:U})=>{const N=(0,c.wW)(C),S={};for(const Q of b)if(Q.getDisplayValues)for(const z of Q.getDisplayValues())S[z.title??"?"]=z;const Y=R?(0,g.orderBy)(b,Q=>{if(Q.getDisplayValues){const z=Q.getDisplayValues().filter(G=>G.title===R)[0];return z&&z.numeric}},B?"desc":"asc"):b;return w||(w=(Q,z)=>t.createElement(v,{key:`${Q.label}-${z}`,item:Q,onLabelClick:F,onLabelMouseOver:K,onLabelMouseOut:W,readonly:U})),t.createElement("table",{className:(0,f.cx)(N.table,A)},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null),Object.keys(S).map(Q=>{const z=S[Q];return t.createElement("th",{title:z.description,key:Q,className:(0,f.cx)(N.header,I&&N.headerSortable,{[N.withIcon]:R===Q}),onClick:()=>{I&&I(Q)}},Q,R===Q&&t.createElement(p.J,{size:"xs",name:B?"angle-down":"angle-up"}))}))),t.createElement("tbody",null,Y.map(w)))},C=b=>({table:f.css`
    width: 100%;
    th:first-child {
      width: 100%;
      border-bottom: 1px solid ${b.colors.border.weak};
    }
  `,header:f.css`
    color: ${b.colors.primary.text};
    font-weight: ${b.typography.fontWeightMedium};
    border-bottom: 1px solid ${b.colors.border.weak};
    padding: ${b.spacing(.25,1,.25,1)};
    font-size: ${b.typography.bodySmall.fontSize};
    text-align: right;
    white-space: nowrap;
  `,withIcon:f.css`
    padding-right: 4px;
  `,headerSortable:f.css`
    cursor: pointer;
  `});var P=e(26993);function D(b){return b.ctrlKey||b.metaKey||b.shiftKey?i.R.AppendToSelection:i.R.ToggleSelection}function M({items:b,displayMode:R,sortBy:B,seriesVisibilityChangeBehavior:w=P.Y.Isolate,sortDesc:A,onLabelClick:I,onToggleSort:F,placement:K,className:W,itemRenderer:U,readonly:N}){const{eventBus:S,onToggleSeriesVisibility:Y,onToggleLegendSort:Q}=(0,s.R9)(),z=(0,t.useCallback)((j,de)=>{S?.publish({type:n.es.type,payload:{raw:de,x:0,y:0,dataId:j.label}})},[S]),G=(0,t.useCallback)((j,de)=>{S?.publish({type:n.xH.type,payload:{raw:de,x:0,y:0,dataId:j.label}})},[S]),k=(0,t.useCallback)((j,de)=>{I&&I(j,de),Y&&Y(j.label,w===P.Y.Hide?i.R.AppendToSelection:D(de))},[Y,I,w]);switch(R){case l.jK.Table:return t.createElement(y,{className:W,items:b,placement:K,sortBy:B,sortDesc:A,onLabelClick:k,onToggleSort:F||Q,onLabelMouseOver:z,onLabelMouseOut:G,itemRenderer:U,readonly:N});case l.jK.List:return t.createElement(u,{className:W,items:b,placement:K,onLabelMouseOver:z,onLabelMouseOut:G,onLabelClick:k,itemRenderer:U,readonly:N});default:return null}}M.displayName="VizLegend"},46920:(Z,O,e)=>{"use strict";e.d(O,{e:()=>u});var t=e(9892),n=e(68404),l=e(68183),s=e(72648),i=e(59943),f=e(82897),c=e(20112),o=e(19882);const m=({stats:g})=>{const p=(0,s.wW)(r);return g.length===0?null:n.createElement(o.Y,{className:p.list,items:g,renderItem:E=>n.createElement("div",{className:p.item,title:E.description},E.title&&`${(0,f.capitalize)(E.title)}:`," ",(0,c.zc)(E))})},r=()=>({list:t.css`
    flex-grow: 1;
    text-align: right;
  `,item:t.css`
    margin-left: 8px;
  `});m.displayName="VizLegendStatsList";const u=({item:g,onLabelClick:p,onLabelMouseOver:E,onLabelMouseOut:h,className:a,readonly:v})=>{const x=(0,s.wW)(d),y=(0,n.useCallback)(D=>{E&&E(g,D)},[g,E]),C=(0,n.useCallback)(D=>{h&&h(g,D)},[g,h]),P=(0,n.useCallback)(D=>{p&&p(g,D)},[g,p]);return n.createElement("div",{className:(0,t.cx)(x.itemWrapper,g.disabled&&x.itemDisabled,a),"aria-label":l.wl.components.VizLegend.seriesName(g.label)},n.createElement(i.i,{seriesName:g.label,color:g.color,gradient:g.gradient,readonly:v}),n.createElement("button",{disabled:v,type:"button",onBlur:C,onFocus:y,onMouseOver:y,onMouseOut:C,onClick:P,className:x.label},g.label),g.getDisplayValues&&n.createElement(m,{stats:g.getDisplayValues()}))};u.displayName="VizLegendListItem";const d=g=>({label:t.css`
    label: LegendLabel;
    white-space: nowrap;
    background: none;
    border: none;
    font-size: inherit;
    padding: 0;
    user-select: text;
  `,itemDisabled:t.css`
    label: LegendLabelDisabled;
    color: ${g.colors.text.disabled};
  `,itemWrapper:t.css`
    label: LegendItemWrapper;
    display: flex;
    white-space: nowrap;
    align-items: center;
    flex-grow: 1;
  `,value:t.css`
    text-align: right;
  `,yAxisLabel:t.css`
    color: ${g.v1.palette.gray2};
  `})},59943:(Z,O,e)=>{"use strict";e.d(O,{i:()=>i});var t=e(68404),n=e(90208),l=e(60325),s=e(6264);const i=t.memo(({seriesName:f,color:c,gradient:o,readonly:m})=>{const{onSeriesColorChange:r}=(0,l.R9)(),u=(0,t.useCallback)(d=>r(f,d),[f,r]);return f&&r&&c&&!m?t.createElement(n.sp,{color:c,onChange:u,enableNamedColors:!0},({ref:d,showColorPicker:g,hideColorPicker:p})=>t.createElement(s.F,{color:c,className:"pointer",ref:d,onClick:g,onMouseLeave:p})):t.createElement(s.F,{color:c,gradient:o})});i.displayName="VizLegendSeriesIcon"},26993:(Z,O,e)=>{"use strict";e.d(O,{Y:()=>t});var t=(n=>(n[n.Isolate=0]="Isolate",n[n.Hide=1]="Hide",n))(t||{})},4387:(Z,O,e)=>{"use strict";e.d(O,{Q:()=>i});var t=e(68404),n=e(20251);const l=(c,o,m,r)=>{const u=s(c,o,r),d=s(o,c,r),g=Math.max(u,d);let p=Math.floor(c/g),E=Math.ceil(r/p);p=Math.ceil(r/E);const h=p-(p*E-r),a=c/h-m+m/h;return{width:c/p-m+m/p,height:o/E-m+m/E,widthOnLastRow:a,xCount:p,yCount:E}};function s(c,o,m){const r=Math.ceil(Math.sqrt(m*c/o));return Math.floor(r*o/c)*r<m?o/Math.ceil(r*o/c):c/r}class i extends t.PureComponent{constructor(o){super(o),this.state={values:o.getValues()}}componentDidUpdate(o){const{renderCounter:m,source:r}=this.props;(m!==o.renderCounter||r!==o.source)&&this.setState({values:this.props.getValues()})}getOrientation(){const{orientation:o,width:m,height:r}=this.props;return o===n.wm.Auto?m>r?n.wm.Vertical:n.wm.Horizontal:o}renderGrid(){const{renderValue:o,height:m,width:r,itemSpacing:u,getAlignmentFactors:d,orientation:g}=this.props,{values:p}=this.state,E=l(r,m,u,p.length),h=d?d(p,E.width,E.height):{};let a=0,v=0,x=[];for(let y=0;y<p.length;y++){const C=p[y],D=v===E.yCount-1?E.widthOnLastRow:E.width,M=E.height,b=a*D+u*a,R=v*M+u*v,B={position:"absolute",left:b,top:R,width:`${D}px`,height:`${M}px`};x.push(t.createElement("div",{key:y,style:B},o({value:C,width:D,height:M,alignmentFactors:h,orientation:g,count:p.length}))),a++,a===E.xCount&&(a=0,v++)}return t.createElement("div",{style:{position:"relative"}},x)}render(){const{renderValue:o,height:m,width:r,itemSpacing:u,getAlignmentFactors:d,autoGrid:g,orientation:p,minVizWidth:E,minVizHeight:h}=this.props,{values:a}=this.state;if(g&&p===n.wm.Auto)return this.renderGrid();const v={display:"flex"},x={display:"flex",overflow:`${E?"auto":"hidden"} ${h?"auto":"hidden"}`};let y=m,C=r,P=this.getOrientation();switch(P){case n.wm.Horizontal:x.flexDirection="column",x.height=`${m}px`,v.marginBottom=`${u}px`,C=r,y=Math.max(m/a.length-u+u/a.length,h??0);break;case n.wm.Vertical:x.flexDirection="row",x.justifyContent="space-between",v.marginRight=`${u}px`,y=m,C=Math.max(r/a.length-u+u/a.length,E??0)}v.width=`${C}px`,v.height=`${y}px`;const D=d?d(a,C,y):{};return t.createElement("div",{style:x},a.map((M,b)=>t.createElement("div",{key:b,style:f(v,b,a.length)},o({value:M,width:C,height:y,alignmentFactors:D,orientation:P,count:a.length}))))}}i.defaultProps={itemSpacing:8};function f(c,o,m){return o===m-1?{...c,marginRight:0,marginBottom:0}:c}},50800:(Z,O,e)=>{"use strict";e.d(O,{V:()=>f,c:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(6264);const i=o=>({icon:t.css`
      margin-right: ${o.spacing(1)};
      vertical-align: middle;
    `,seriesTable:t.css`
      display: table;
    `,seriesTableRow:t.css`
      display: table-row;
      font-size: ${o.typography.bodySmall.fontSize};
    `,seriesTableCell:t.css`
      display: table-cell;
    `,label:t.css`
      word-break: break-all;
    `,value:t.css`
      padding-left: ${o.spacing(2)};
    `,activeSeries:t.css`
      font-weight: ${o.typography.fontWeightBold};
      color: ${o.colors.text.maxContrast};
    `,timestamp:t.css`
      font-weight: ${o.typography.fontWeightBold};
      font-size: ${o.typography.bodySmall.fontSize};
    `}),f=({color:o,label:m,value:r,isActive:u})=>{const d=(0,l.wW)(i);return n.createElement("div",{"data-testid":"SeriesTableRow",className:(0,t.cx)(d.seriesTableRow,u&&d.activeSeries)},o&&n.createElement("div",{className:d.seriesTableCell},n.createElement(s.F,{color:o,className:d.icon})),m&&n.createElement("div",{className:(0,t.cx)(d.seriesTableCell,d.label)},m),r&&n.createElement("div",{className:(0,t.cx)(d.seriesTableCell,d.value)},r))},c=({timestamp:o,series:m})=>{const r=(0,l.wW)(i);return n.createElement(n.Fragment,null,o&&n.createElement("div",{className:r.timestamp,"aria-label":"Timestamp"},o),m.map((u,d)=>n.createElement(f,{isActive:u.isActive,label:u.label,color:u.color,value:u.value,key:`${u.label}-${d}`})))}},24505:(Z,O,e)=>{"use strict";e.d(O,{I:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(85511),i=e(20888);const f=({content:o,position:m,offset:r})=>{const u=(0,l.wW)(c);return m?n.createElement(s.h_,{className:u.portal},n.createElement(i.S,{position:m,offset:r||{x:0,y:0}},o)):null};f.displayName="VizTooltip";const c=()=>({portal:t.css`
      position: absolute;
      top: 0;
      left: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
    `})},20888:(Z,O,e)=>{"use strict";e.d(O,{S:()=>c});var t=e(9892),n=e(68404),l=e(98101),s=e(72648),i=e(85419);const f=(m=0,r=0,u=0,d=0,g=0,p=0,E=0,h=0)=>{let a=m,v=r;const x=Math.max(m+g+u-(E-g),0),y=Math.abs(Math.min(m-g-u-g,0)),C=x>0,P=y>0,D=Math.max(r+p+d-(h-p),0),M=Math.abs(Math.min(r-p-d-p,0)),b=D>0,R=M>0;return C&&P?a=x>y?g:E-g-u:C?a=m-g-u:a=m+g,b&&R?v=D>M?p:h-p-d:b?v=r-p-d:v=r+p,{x:a,y:v}},c=({position:{x:m,y:r},offset:{x:u,y:d},children:g,allowPointerEvents:p=!1,className:E,...h})=>{const a=(0,n.useRef)(null),[v,x]=(0,n.useState)({width:0,height:0}),{width:y,height:C}=(0,l.Z)(),[P,D]=(0,n.useState)({x:m+u,y:r+d}),M=(0,n.useMemo)(()=>new ResizeObserver(R=>{for(let B of R){const w=Math.floor(B.contentRect.width+16),A=Math.floor(B.contentRect.height+2*8);(v.width!==w||v.height!==A)&&x({width:Math.min(w,y),height:Math.min(A,C)})}}),[v,y,C]);(0,n.useLayoutEffect)(()=>(a.current&&M.observe(a.current),()=>{M.disconnect()}),[M]),(0,n.useLayoutEffect)(()=>{if(a&&a.current){const{x:R,y:B}=f(m,r,v.width,v.height,u,d,y,C);D({x:R,y:B})}},[y,C,m,u,r,d,v]);const b=(0,s.wW)(o);return n.createElement("div",{ref:a,style:{position:"fixed",left:0,pointerEvents:p?"auto":"none",top:0,transform:`translate(${P.x}px, ${P.y}px)`,transition:"transform ease-out 0.1s"},...h,className:(0,t.cx)(b.wrapper,E)},g)};c.displayName="VizTooltipContainer";const o=m=>({wrapper:t.css`
    ${(0,i.getTooltipContainerStyles)(m)}
  `})},14835:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{Alert:()=>$e.b,AlertingSettings:()=>En.O,AsyncMultiSelect:()=>Ls.M8,AsyncSelect:()=>Ls.qb,AsyncVirtualizedSelect:()=>Ls.gY,AutoSizeInput:()=>Er.H,Badge:()=>Qs.C,BarGauge:()=>ht.xf,BarGaugeDisplayMode:()=>rt.QH,BigValue:()=>_e.w6,BigValueColorMode:()=>_e.pc,BigValueGraphMode:()=>_e.IG,BigValueJustifyMode:()=>_e.ap,BigValueTextMode:()=>_e.jG,BrowserLabel:()=>ut._,Button:()=>Qn.zx,ButtonCascader:()=>y.O,ButtonGroup:()=>Aa.h,ButtonSelect:()=>os.d,CallToActionCard:()=>sn._,Card:()=>ps.Z,CardContainer:()=>cr._,Cascader:()=>x.v,CertificationKey:()=>Gn.W,Checkbox:()=>yr.X,ClickOutsideWrapper:()=>Dt.L,ClipboardButton:()=>v.m,CodeEditor:()=>ie.p,CodeEditorSuggestionItemKind:()=>Ce.k,CollapsableSection:()=>Ge.s,Collapse:()=>tt.U,ColorPicker:()=>M.zH,ColorPickerInput:()=>b.T,ConfirmButton:()=>r.p,ConfirmModal:()=>re.s,Container:()=>Us.W2,ContextMenu:()=>mn.x,ControlledCollapse:()=>tt.y,Counter:()=>Ae.A,CustomHeadersSettings:()=>un.H,CustomScrollbar:()=>h.$,DataLinkButton:()=>ot.k,DataLinkInput:()=>Qt.v,DataLinksContextMenu:()=>jt.V,DataLinksInlineEditor:()=>Wt.d,DataSourceHttpSettings:()=>nn.E,DatePicker:()=>N.M,DatePickerWithInput:()=>S.d,DateTimePicker:()=>Y.x,DeleteButton:()=>u.m,Drawer:()=>$n.d,Dropdown:()=>is.L,DropdownIndicator:()=>Ss.m,EmptySearchResult:()=>B.K,ErrorBoundary:()=>qt.SV,ErrorBoundaryAlert:()=>qt.z4,ErrorWithStack:()=>Vt.X,EventsCanvas:()=>yt.TZ,FIXED_UNIT:()=>Bt.j,FadeTransition:()=>Wn.n,FeatureBadge:()=>on.a,FeatureInfoBox:()=>on.Z,Field:()=>da.g,FieldArray:()=>Ms.F,FieldLinkList:()=>at.Z,FieldSet:()=>qs.C,FieldValidationMessage:()=>Ys.S,FileDropzone:()=>ws.Yo,FileDropzoneDefaultChildren:()=>ws.A_,FileListItem:()=>ws.K$,FileUpload:()=>Pr.p,FilterInput:()=>zs.H,FilterPill:()=>ge.B,Form:()=>Ma.l,FormattedValueDisplay:()=>Hs.W,FullWidthButtonContainer:()=>xt.f,Gauge:()=>Fe.a,Graph:()=>Xe.k,GraphContextMenu:()=>ct.w,GraphContextMenuHeader:()=>ct.b,GraphNG:()=>Bt.d,GraphSeriesToggler:()=>ke.U,GraphWithLegend:()=>Qe.U,HorizontalGroup:()=>Us.Lh,Icon:()=>o.J,IconButton:()=>m.h,InfoBox:()=>tn.v,InlineField:()=>sr._,InlineFieldRow:()=>rr.Z,InlineFormLabel:()=>Ze.c,InlineLabel:()=>Sr.W,InlineSegmentGroup:()=>er.m,InlineSwitch:()=>lr.x,InlineToast:()=>C.K,Input:()=>Ea.I,InputControl:()=>Qa.g,InteractiveTable:()=>z.e,JSONFormatter:()=>dn.g,JsonExplorer:()=>$t.u,KeyboardPlugin:()=>Rt.Cm,Label:()=>Xa._,LegacyForms:()=>bt,LegacyInputStatus:()=>n.G,Legend:()=>as.D,Link:()=>Ga.r,LinkButton:()=>Qn.Qj,List:()=>Q.a,LoadingBar:()=>D.F,LoadingPlaceholder:()=>P.u,LogLabels:()=>dt.j,LogMessageAnsi:()=>pt.Q,LogRows:()=>Ke.w,Marker:()=>yt.Jx,Menu:()=>Dn.v,MenuGroup:()=>Rn.k,MenuItem:()=>St.s,Modal:()=>ne.u,ModalHeader:()=>X.x,ModalRoot:()=>_.Y0,ModalTabContent:()=>ae.Q,ModalTabsHeader:()=>te.H,ModalsContext:()=>_.kr,ModalsController:()=>_.JY,ModalsProvider:()=>_.$i,MultiSelect:()=>Ls.NU,PageToolbar:()=>ve.X,Pagination:()=>k.t,PanelChrome:()=>Oe.fm,PanelChromeErrorIndicator:()=>Ye.g,PanelChromeLoadingIndicator:()=>Le.T,PanelContainer:()=>Tt.l,PanelContextProvider:()=>be._w,PanelContextRoot:()=>be.bb,PlotLegend:()=>xe.l,PluginSignatureBadge:()=>Za.o,Popover:()=>p.J,PopoverController:()=>g.D,Portal:()=>E.h_,PortalContainer:()=>E.lO,QueryField:()=>ce.q,RadioButtonGroup:()=>vr.S,RadioButtonList:()=>or.x,RangeSlider:()=>Fa.U,ReactMonacoEditor:()=>fe.o,RefreshPicker:()=>I.dP,RelativeTimeRangePicker:()=>na.x,RenderUserContentAsHTML:()=>et.D,ScaleDistribution:()=>rt.wf,SecretInput:()=>Bs.m,SecretTextArea:()=>ir.Z,SecureSocksProxySettings:()=>cn.i,Segment:()=>ga.X,SegmentAsync:()=>ea.V,SegmentInput:()=>ca.X,SegmentSection:()=>zn.f,SegmentSelect:()=>ba.V,Select:()=>Ls.Ph,SelectContainer:()=>Ls.eI,SeriesColorPicker:()=>M.sp,SeriesColorPickerPopover:()=>R.j,SeriesColorPickerPopoverWithTheme:()=>R.q,SeriesIcon:()=>Xt.F,SeriesTable:()=>nt.c,SeriesTableRow:()=>nt.V,SeriesVisibilityChangeBehavior:()=>me.Y,SeriesVisibilityChangeMode:()=>gn.R,SetInterval:()=>Ve.F,SlideOutTransition:()=>qn.R,Slider:()=>ta.i,Sparkline:()=>Se.b,Spinner:()=>Nn.$,StatsPicker:()=>A.m,Switch:()=>lr.r,TLSAuthSettings:()=>wn.s,Tab:()=>We.O,TabContent:()=>He.I,TabbedContainer:()=>a.W,Table:()=>it.i,TableCellDisplayMode:()=>rt.h2,TableInputCSV:()=>pe.w,TabsBar:()=>Ie.J,Tag:()=>j.V,TagList:()=>de.P,TagsInput:()=>G.B,TextArea:()=>tr.K,TimeOfDayPicker:()=>K.y,TimePickerTooltip:()=>F.IF,TimeRangeInput:()=>Gt.K,TimeRangePicker:()=>F.Xc,TimeSeries:()=>Kt.p,TimeZonePicker:()=>W.O,ToolbarButton:()=>ia.h,ToolbarButtonRow:()=>_a.R,Tooltip:()=>d.u,TooltipPlugin:()=>Rt.ii,UPLOT_AXIS_FONT_SIZE:()=>Be.gD,UPlotChart:()=>we.N,UPlotConfigBuilder:()=>Ct.U,UnitPicker:()=>w.n,ValuePicker:()=>As.b,VerticalGroup:()=>Us.wc,VerticalTab:()=>Je.L,VirtualizedSelect:()=>Ls.LT,VizLayout:()=>Te.AY,VizLegend:()=>he.l,VizLegendListItem:()=>De.e,VizRepeater:()=>le.Q,VizTooltip:()=>ft.I,VizTooltipContainer:()=>Re.S,WeekStartPicker:()=>U.z,WithContextMenu:()=>At.z,XYCanvas:()=>yt.K2,ZoomPlugin:()=>Rt.Rb,buildScaleKey:()=>Pn.z,clearButtonStyles:()=>Qn.gN,convertOldAngularValueMapping:()=>wt.PR,defaultIntervals:()=>I.o5,fieldMatchersUI:()=>va.i,getCardStyles:()=>ps.L,getInputStyles:()=>Ea.H,getLogRowStyles:()=>je.h,getPortalContainer:()=>E.RN,getSelectStyles:()=>Vs.D,graphFieldOptions:()=>Et.q,graphTickFormatter:()=>Pe.sV,graphTimeFormat:()=>Pe.mc,preparePlotFrame:()=>Pn.R,resetSelectStyles:()=>js.Z,sharedInputStyle:()=>Oa.RK,sharedSingleStatMigrationHandler:()=>wt.rD,sharedSingleStatPanelChangedHandler:()=>wt.ZH,useGraphNGContext:()=>fn.z,usePanelContext:()=>be.R9,variableSuggestionToCodeEditorSuggestion:()=>ee.T,withErrorBoundary:()=>qt.Pf});var t=e(95569),n=e(50869),l=e(21662),s=e(76603),i=e(29418),f=e(18979),c=e(34517),o=e(39904),m=e(8180),r=e(71657),u=e(13626),d=e(6554),g=e(39604),p=e(56921),E=e(85511),h=e(68226),a=e(18607),v=e(94599),x=e(95093),y=e(19974),C=e(4784),P=e(61744),D=e(74750),M=e(90208),b=e(83957),R=e(43598),B=e(69097),w=e(61227),A=e(71294),I=e(5562),F=e(3630),K=e(91942),W=e(52566),U=e(80124),N=e(77239),S=e(86348),Y=e(35575),Q=e(56766),z=e(65455),G=e(43339),k=e(78889),j=e(34719),de=e(34807),ge=e(41165),re=e(98102),ce=e(69659),ie=e(9405),fe=e(84128),Ce=e(10339),ee=e(25503),ne=e(35029),X=e(38894),te=e(88683),ae=e(72535),_=e(5191),ve=e(35224),Ve=e(41490),it=e(88144),rt=e(40538),pe=e(91363),Ie=e(72142),We=e(79841),Je=e(13026),He=e(94893),Ae=e(51275),et=e(39856),_e=e(57426),Se=e(67307),Fe=e(69823),Xe=e(87691),Qe=e(29781),ct=e(65987),ht=e(19670),ft=e(24505),Re=e(20888),nt=e(50800),le=e(4387),Pe=e(31438),Oe=e(38208),Le=e(8861),Ye=e(99562),be=e(60325),Te=e(729),me=e(26993),he=e(78056),De=e(46920),$e=e(45253),ke=e(56506),tt=e(2352),Ge=e(20941),dt=e(58321),pt=e(12402),Ke=e(63512),je=e(98736),ot=e(89719),at=e(45576),xt=e(97389),Dt=e(94437),wt=e(70161),sn=e(97097),mn=e(30909),Dn=e(38484),Rn=e(14391),St=e(42044),At=e(74285),Wt=e(68037),Qt=e(35919),jt=e(18543),Xt=e(6264),tn=e(17784),on=e(26338),dn=e(16065),$t=e(73892),qt=e(53546),Vt=e(39198),nn=e(12006),un=e(92099),En=e(64260),cn=e(12580),wn=e(23622),Gn=e(85615),Nn=e(67487),Wn=e(19801),qn=e(41200),ga=e(70044),ea=e(68118),ca=e(58564),ba=e(2357),zn=e(30991),$n=e(30979),ta=e(90330),Fa=e(97759),Ma=e(94270),Oa=e(73267),Qa=e(63619),Qn=e(31403),Aa=e(26202),ia=e(64319),_a=e(8125),As=e(15670),va=e(37676),Ga=e(29460),Xa=e(64353),da=e(24799),as=e(19825),qs=e(13393),Ys=e(57227),sr=e(81764),er=e(62157),Sr=e(77117),rr=e(11543),Ms=e(70132),js=e(54897),Ls=e(53217),Ss=e(62997),Vs=e(27501),Va=e(60857),Or=e.n(Va),hr={};for(const Ht in Va)["default","Icon","IconButton","ConfirmButton","DeleteButton","Tooltip","PopoverController","Popover","Portal","getPortalContainer","PortalContainer","CustomScrollbar","TabbedContainer","ClipboardButton","Cascader","ButtonCascader","InlineToast","LoadingPlaceholder","LoadingBar","ColorPicker","SeriesColorPicker","ColorPickerInput","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","EmptySearchResult","UnitPicker","StatsPicker","RefreshPicker","defaultIntervals","TimeRangePicker","TimePickerTooltip","TimeOfDayPicker","TimeZonePicker","WeekStartPicker","DatePicker","DatePickerWithInput","DateTimePicker","List","InteractiveTable","TagsInput","Pagination","Tag","TagList","FilterPill","ConfirmModal","QueryField","CodeEditor","ReactMonacoEditor","CodeEditorSuggestionItemKind","variableSuggestionToCodeEditorSuggestion","Modal","ModalHeader","ModalTabsHeader","ModalTabContent","ModalsProvider","ModalRoot","ModalsController","ModalsContext","PageToolbar","SetInterval","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tab","VerticalTab","TabContent","Counter","RenderUserContentAsHTML","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","Sparkline","Gauge","Graph","GraphWithLegend","GraphContextMenu","GraphContextMenuHeader","BarGauge","VizTooltip","VizTooltipContainer","SeriesTable","SeriesTableRow","VizRepeater","graphTimeFormat","graphTickFormatter","PanelChrome","PanelChromeLoadingIndicator","PanelChromeErrorIndicator","PanelContextProvider","PanelContextRoot","usePanelContext","VizLayout","SeriesVisibilityChangeBehavior","VizLegend","VizLegendListItem","Alert","GraphSeriesToggler","Collapse","ControlledCollapse","CollapsableSection","LogLabels","LogMessageAnsi","LogRows","getLogRowStyles","DataLinkButton","FieldLinkList","FullWidthButtonContainer","ClickOutsideWrapper","CallToActionCard","ContextMenu","Menu","MenuGroup","MenuItem","WithContextMenu","DataLinksInlineEditor","DataLinkInput","DataLinksContextMenu","SeriesIcon","InfoBox","FeatureBadge","FeatureInfoBox","JSONFormatter","JsonExplorer","ErrorBoundary","ErrorBoundaryAlert","withErrorBoundary","ErrorWithStack","DataSourceHttpSettings","CustomHeadersSettings","AlertingSettings","SecureSocksProxySettings","TLSAuthSettings","CertificationKey","Spinner","FadeTransition","SlideOutTransition","Segment","SegmentAsync","SegmentInput","SegmentSelect","SegmentSection","Drawer","Slider","RangeSlider","Form","sharedInputStyle","InputControl","Button","LinkButton","ButtonGroup","clearButtonStyles","ToolbarButton","ToolbarButtonRow","ValuePicker","fieldMatchersUI","Link","Label","Field","Legend","FieldSet","FieldValidationMessage","InlineField","InlineSegmentGroup","InlineLabel","InlineFieldRow","FieldArray","resetSelectStyles","DropdownIndicator","getSelectStyles","HorizontalGroup","VerticalGroup","Container","Badge","RadioButtonGroup","RadioButtonList","Input","getInputStyles","AutoSizeInput","FilterInput","Switch","InlineSwitch","Checkbox","TextArea","FileUpload","TimeRangeInput","RelativeTimeRangePicker","Card","getCardStyles","CardContainer","FormattedValueDisplay","ButtonSelect","Dropdown","PluginSignatureBadge","InlineFormLabel","LegacyForms","LegacyInputStatus","ScaleDistribution","BarGaugeDisplayMode","UPlotConfigBuilder","UPLOT_AXIS_FONT_SIZE","UPlotChart","PlotLegend","GraphNG","FIXED_UNIT","TimeSeries","useGraphNGContext","preparePlotFrame","buildScaleKey","BrowserLabel","PanelContainer","convertOldAngularValueMapping","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","MultiSelect","Select","SelectContainer","VirtualizedSelect"].indexOf(Ht)<0&&(hr[Ht]=()=>Va[Ht]);e.d(O,hr);var Us=e(52081),Qs=e(19985),vr=e(2594),or=e(29395),Ea=e(46967),Er=e(68668),zs=e(14747),Bs=e(70862),ir=e(88892),lr=e(8944),yr=e(58255),tr=e(97379),Pr=e(82381),ws=e(47556),Gt=e(95794),na=e(19115),ps=e(72948),cr=e(35633),Hs=e(72777),os=e(44342),is=e(71698),Za=e(51613),Ze=e(19426),Et=e(26372),Ct=e(13347),Be=e(23888),we=e(3200),xe=e(68416),yt=e(56709),Rt=e(57989),Bt=e(72269),Kt=e(68948),fn=e(16566),Pn=e(86979),gn=e(17882),ut=e(85951),Tt=e(72080);const bt={SecretFormField:c.c,FormField:t.W,Select:i.Ph,AsyncSelect:i.qb,IndicatorsContainer:l.B,NoOptionsMessage:s.P,Input:n.I,Switch:f.r}},19801:(Z,O,e)=>{"use strict";e.d(O,{n:()=>f});var t=e(9892),n=e(68404),l=e(22163),s=e(7804);const i=(0,s.B)(c=>({enter:t.css`
      label: enter;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      opacity: 1;
      transition: opacity ${c}ms ease-out;
    `,exit:t.css`
      label: exit;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      transition: opacity ${c}ms ease-out;
    `}));function f(c){const{visible:o,children:m,duration:r=250}=c,u=i(r);return n.createElement(l.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:r,classNames:u},m)}},41200:(Z,O,e)=>{"use strict";e.d(O,{R:()=>f});var t=e(9892),n=e(68404),l=e(22163),s=e(7804);const i=(0,s.B)((c,o,m)=>({enter:t.css`
      label: enter;
      ${o}: 0;
      opacity: 0;
    `,enterActive:t.css`
      label: enterActive;
      ${o}: ${m}px;
      opacity: 1;
      transition: opacity ${c}ms ease-out, ${o} ${c}ms ease-out;
    `,exit:t.css`
      label: exit;
      ${o}: ${m}px;
      opacity: 1;
    `,exitActive:t.css`
      label: exitActive;
      opacity: 0;
      ${o}: 0;
      transition: opacity ${c}ms ease-out, ${o} ${c}ms ease-out;
    `}));function f(c){const{visible:o,children:m,duration:r=250,horizontal:u,size:d}=c,g=i(r,u?"width":"height",d);return n.createElement(l.Z,{in:o,mountOnEnter:!0,unmountOnExit:!0,timeout:r,classNames:g},m)}},3200:(Z,O,e)=>{"use strict";e.d(O,{N:()=>o});var t=e(68404),n=e(75974),l=e(2445);function s(m,r){return r.width===m.width&&r.height===m.height}function i(m,r){return r.data===m.data}function f(m,r){return r.config===m.config}function c(m,r){let u=m.timeRange,d=r.timeRange;return u===d||d.from.valueOf()===u.from.valueOf()&&d.to.valueOf()===u.to.valueOf()}class o extends t.Component{constructor(r){super(r),this.plotContainer=(0,t.createRef)(),this.plotCanvasBBox=(0,t.createRef)(),this.state={plot:null}}reinitPlot(){let{width:r,height:u,plotRef:d}=this.props;if(this.state.plot?.destroy(),r===0&&u===0)return;this.props.config.addHook("setSize",E=>{E.over});const g={width:Math.floor(this.props.width),height:Math.floor(this.props.height),...this.props.config.getConfig()};(0,l.Zp)("UPlot",!1,"Reinitializing plot",g);const p=new n.Z(g,this.props.data,this.plotContainer.current);d&&d(p),this.setState({plot:p})}componentDidMount(){this.reinitPlot()}componentWillUnmount(){this.state.plot?.destroy()}componentDidUpdate(r){let{plot:u}=this.state;s(r,this.props)?f(r,this.props)?i(r,this.props)?c(r,this.props)||u?.setScale("x",{min:this.props.timeRange.from.valueOf(),max:this.props.timeRange.to.valueOf()}):u?.setData(this.props.data):this.reinitPlot():u?.setSize({width:Math.floor(this.props.width),height:Math.floor(this.props.height)})}render(){return t.createElement("div",{style:{position:"relative"}},t.createElement("div",{ref:this.plotContainer,"data-testid":"uplot-main-div"}),this.props.children)}}},68416:(Z,O,e)=>{"use strict";e.d(O,{l:()=>u});var t=e(68404),n=e(89890),l=e(425),s=e(21760),i=e(36512),f=e(40538),c=e(72648),o=e(729),m=e(78056);const r=d=>d==null?"-":d.toFixed(1),u=t.memo(({data:d,config:g,placement:p,calcs:E,displayMode:h,...a})=>{const v=(0,c.l4)(),x=g.getSeries().map(y=>{const C=y.props,P=C.dataFrameFieldIndex,D=g.getAxisPlacement(y.props.scaleKey);if(!P)return;const M=d[P.frameIndex]?.fields[P.fieldIndex];if(!M||M.config.custom?.hideFrom?.legend)return;const b=(0,n.C)(M,d[P.frameIndex],d),B=(0,l.YO)(M,v).color;return{disabled:!(C.show??!0),fieldIndex:P,color:B,label:b,yAxis:D===f.LB.Left||D===f.LB.Bottom?1:2,getDisplayValues:()=>{if(!E?.length)return[];const w=M.display??r;let A=null;const I=(0,s.Kx)({field:M,reducers:E});return E.map(F=>{const K=s.TB.get(F);let W=w;return K.id===s.gz.diffperc&&(W=(0,i.U_)({field:{...M,config:{...M.config,unit:"percentunit"}},theme:v})),(K.id===s.gz.count||K.id===s.gz.changeCount||K.id===s.gz.distinctCount)&&(A||(A=(0,i.U_)({field:{...M,config:{...M.config,unit:"none"}},theme:v})),W=A),{...W(I[F]),title:K.name,description:K.description}})},getItemKey:()=>`${b}-${P.frameIndex}-${P.fieldIndex}`}}).filter(y=>y!==void 0);return t.createElement(o.AY.Legend,{placement:p,...a},t.createElement(m.l,{placement:p,items:x,displayMode:h,sortBy:a.sortBy,sortDesc:a.sortDesc}))});u.displayName="PlotLegend"},26372:(Z,O,e)=>{"use strict";e.d(O,{q:()=>n});var t=e(40538);const n={drawStyle:[{label:"Lines",value:t.l8.Line},{label:"Bars",value:t.l8.Bars},{label:"Points",value:t.l8.Points}],lineInterpolation:[{description:"Linear",value:t.KC.Linear,icon:"gf-interpolation-linear"},{description:"Smooth",value:t.KC.Smooth,icon:"gf-interpolation-smooth"},{description:"Step before",value:t.KC.StepBefore,icon:"gf-interpolation-step-before"},{description:"Step after",value:t.KC.StepAfter,icon:"gf-interpolation-step-after"}],barAlignment:[{description:"Before",value:t.pu.Before,icon:"gf-bar-alignment-before"},{description:"Center",value:t.pu.Center,icon:"gf-bar-alignment-center"},{description:"After",value:t.pu.After,icon:"gf-bar-alignment-after"}],showPoints:[{label:"Auto",value:t.Jp.Auto,description:"Show points when the density is low"},{label:"Always",value:t.Jp.Always},{label:"Never",value:t.Jp.Never}],axisPlacement:[{label:"Auto",value:t.LB.Auto,description:"First field on the left, everything else on the right"},{label:"Left",value:t.LB.Left},{label:"Right",value:t.LB.Right},{label:"Hidden",value:t.LB.Hidden}],fillGradient:[{label:"None",value:t.FI.None},{label:"Opacity",value:t.FI.Opacity,description:"Enable fill opacity gradient"},{label:"Hue",value:t.FI.Hue,description:"Small color hue gradient"},{label:"Scheme",value:t.FI.Scheme,description:"Use color scheme to define gradient"}],stacking:[{label:"Off",value:t.o0.None},{label:"Normal",value:t.o0.Normal},{label:"100%",value:t.o0.Percent}],thresholdsDisplayModes:[{label:"Off",value:t.i3.Off},{label:"As lines",value:t.i3.Line},{label:"As lines (dashed)",value:t.i3.Dashed},{label:"As filled regions",value:t.i3.Area},{label:"As filled regions and lines",value:t.i3.LineAndArea},{label:"As filled regions and lines (dashed)",value:t.i3.DashedAndArea}]}},23888:(Z,O,e)=>{"use strict";e.d(O,{ff:()=>u,gD:()=>m,mr:()=>g});var t=e(20112),n=e(43211),l=e(47513),s=e(38849),i=e(40538),f=e(4176),c=e(13890),o=e(36562);const m=12,r=8;class u extends c.L{merge(h){this.props.size=(0,o.V)("max",this.props.size,h.size),this.props.label||(this.props.label=h.label),this.props.placement===i.LB.Auto&&(this.props.placement=h.placement)}calculateSpace(h,a,v,x,y){const C=h.axes[a],P=h.scales[C.scale];if(C.side!==2||!P)return 30;const D=40;if(P.time){const M=y/D,b=(x-v)/M,R=g(h,[v],a,D,b);return(0,f.X1)(R[0],m).width+18}return D}calculateAxisSize(h,a,v){const x=h.axes[v];let y=x.ticks.size;if(x.side===2)y+=x.gap+m;else if(a?.length){let C=a.reduce((D,M)=>Math.max(D,(0,f.X1)(M,m).width),0);const P=Math.min(h.width*.4,C);y+=x.gap+x.labelGap+P}return Math.ceil(y)}getConfig(){let{scaleKey:h,label:a,show:v=!0,placement:x=i.LB.Auto,grid:y={show:!0},ticks:C,space:P,filter:D,gap:M=5,formatValue:b,splits:R,values:B,incrs:w,isTime:A,timeZone:I,theme:F,tickLabelRotation:K,size:W,color:U,border:N,decimals:S,distr:Y=i.wf.Linear}=this.props;const Q=`${m}px ${F.typography.fontFamily}`,z=F.isDark?"rgba(240, 250, 255, 0.09)":"rgba(0, 10, 23, 0.09)";(0,t.br)(h)&&(R=[0,1]),S===0&&Y===i.wf.Linear&&(D=(k,j)=>j.map(de=>Number.isInteger(de)?de:null));let G={scale:h,show:v,stroke:U??F.colors.text.primary,side:p(x),font:Q,size:W??((k,j,de)=>this.calculateAxisSize(k,j,de)),rotate:K,gap:M,labelGap:0,grid:{show:y.show,stroke:z,width:1/devicePixelRatio},ticks:Object.assign({show:!0,stroke:z,width:1/devicePixelRatio,size:4},C),splits:R,values:B,space:P??((k,j,de,ge,re)=>this.calculateSpace(k,j,de,ge,re)),filter:D,incrs:w};return N!=null&&(G.border=N),a!=null&&a.length>0&&(G.label=a,G.labelSize=m+r,G.labelFont=Q,G.labelGap=r),B?G.values=B:A?G.values=g:b&&(G.values=(k,j,de,ge,re)=>{let ce=(0,n.d)((0,n.O)(re,6));return j.map(ie=>b(ie,ce>0?ce:void 0))}),G.timeZone=I,G}}const d={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:28*24*60*60*1e3,year:365*24*60*60*1e3};function g(E,h,a,v,x){const y=E.axes[a].timeZone,C=E.scales.x,P=(C?.max??0)-(C?.min??0),D=Math.round(d.year/d.day)*d.day,M=Math.round(x/d.day)*d.day;let b=l.U6.interval.year;return x<d.second?b=l.U6.interval.millisecond:x<=d.minute?b=l.U6.interval.second:P<=d.day?b=l.U6.interval.minute:x<=d.day?b=l.U6.interval.hour:P<d.year?b=l.U6.interval.day:M===D?b=l.U6.interval.year:x<=d.year&&(b=l.U6.interval.month),h.map(R=>R==null?"":(0,s.dq)(R,{format:b,timeZone:y}))}function p(E){switch(E){case i.LB.Top:return 0;case i.LB.Right:return 1;case i.LB.Bottom:return 2;case i.LB.Left:}return 3}},13347:(Z,O,e)=>{"use strict";e.d(O,{U:()=>y});var t=e(82897),n=e(75974),l=e(69311),s=e(38306),i=e(40538),f=e(2445),c=e(23888),o=e(36562),m=e(66926),r=e(64724),u=e(13890),d=e(52240);class g extends u.L{getConfig(){const{facets:P,drawStyle:D,pathBuilder:M,pointsBuilder:b,pointsFilter:R,lineInterpolation:B,lineWidth:w,lineStyle:A,barAlignment:I,barWidthFactor:F,barMaxWidth:K,showPoints:W,pointSize:U,scaleKey:N,pxAlign:S,spanNulls:Y,show:Q=!0}=this.props;let z={},G=this.getLineColor();z.stroke=G,M!=null?(z.paths=M,z.width=w):D===i.l8.Points?z.paths=()=>null:D!=null&&(z.width=w,A&&A.fill!=="solid"&&(A.fill==="dot"&&(z.cap="round"),z.dash=A.dash??[10,10]),z.paths=(de,ge,re,ce)=>E(D,B,I,F,K)(de,ge,re,ce));const k=typeof G=="string"?G:(de,ge)=>de.series[ge]._stroke,j={points:{stroke:k,fill:k,size:!U||U<w?void 0:U,filter:R}};return b!=null?j.points.show=b:D===i.l8.Points?j.points.show=!0:W===i.Jp.Auto?D===i.l8.Bars&&(j.points.show=!1):W===i.Jp.Never?j.points.show=!1:W===i.Jp.Always&&(j.points.show=!0),{scale:N,facets:P,spanGaps:typeof Y=="number"?!1:Y,value:()=>"",pxAlign:S,show:Q,fill:this.getFill(),...z,...j}}getLineColor(){const{lineColor:P,gradientMode:D,colorMode:M,thresholds:b,theme:R,hardMin:B,hardMax:w,softMin:A,softMax:I,dynamicSeriesColor:F}=this.props;return D===i.FI.None&&F?(K,W)=>F(W)??P??m.R:D===i.FI.Scheme&&M?.id!==m.S.Fixed?(0,d.P2)(1,R,M,b,B,w,A,I):P??m.R}getFill(){const{lineColor:P,fillColor:D,gradientMode:M,fillOpacity:b,colorMode:R,thresholds:B,theme:w,hardMin:A,hardMax:I,softMin:F,softMax:K,dynamicSeriesColor:W}=this.props;if(D)return D;const U=M??i.FI.None,N=(b??0)/100;if(U===i.FI.None&&W&&N>0)return(S,Y)=>{let Q=S.series[Y]._stroke;return r.alpha(Q??"",N)};switch(U){case i.FI.Opacity:return(0,d.DT)(D??P,N);case i.FI.Hue:return(0,d.oN)(D??P,N,w);case i.FI.Scheme:if(R?.id!==m.S.Fixed)return(0,d.P2)(N,w,R,B,A,I,F,K);default:if(N>0)return r.alpha(P??"",N)}}}let p;function E(C,P,D=0,M=.6,b=200){const R=n.Z.paths;if(p||(p={linear:R.linear(),smooth:R.spline(),stepBefore:R.stepped({align:-1}),stepAfter:R.stepped({align:1})}),C===i.l8.Bars){let B=`bars|${D}|${M}|${b}`;return p[B]||(p[B]=R.bars({size:[M,b],align:D})),p[B]}else if(C===i.l8.Line){if(P===i.KC.StepBefore)return p.stepBefore;if(P===i.KC.StepAfter)return p.stepAfter;if(P===i.KC.Smooth)return p.smooth}return p.linear}var h=e(28550),a=e(24177);function v(C){const P=C.config.mode===i.i3.Dashed||C.config.mode===i.i3.DashedAndArea?[10,10]:null;function D(W,U,N,S){let Y=W.ctx,Q=0;for(let z=0;z<N.length;z++)if(N[z].color==="transparent"){Q=z;break}Y.lineWidth=2,P&&Y.setLineDash(P);for(let z=1;z<N.length;z++){const G=N[z];let k;Q>=z&&z>0?k=(0,h.Z)(S.visualization.getColorByName(N[z-1].color)):k=(0,h.Z)(S.visualization.getColorByName(G.color)),k.getAlpha()===1&&k.setAlpha(.7);let j=Math.round(W.bbox.left),de=Math.round(W.valToPos(G.value,U,!0)),ge=Math.round(W.bbox.left+W.bbox.width),re=Math.round(W.valToPos(G.value,U,!0));Y.beginPath(),Y.moveTo(j,de),Y.lineTo(ge,re),Y.strokeStyle=k.toString(),Y.stroke()}}function M(W,U,N,S){let Y=W.ctx,Q=(0,d.KV)(W,U,N.map(z=>{let G=(0,h.Z)(S.visualization.getColorByName(z.color));return G.getAlpha()===1&&G.setAlpha(.15),[z.value,G.toString()]}),!0);Y.fillStyle=Q,Y.fillRect(W.bbox.left,W.bbox.top,W.bbox.width,W.bbox.height)}const{scaleKey:b,thresholds:R,theme:B,config:w,hardMin:A,hardMax:I,softMin:F,softMax:K}=C;return W=>{const U=W.ctx,{min:N,max:S}=W.scales.x,{min:Y,max:Q}=W.scales[b];if(N==null||S==null||Y==null||Q==null)return;let{steps:z,mode:G}=R;if(G===a.H.Percentage){let[k,j]=(0,d.A9)(W,b,A,I,F,K),de=j-k;z=z.map(ge=>({...ge,value:k+de*(ge.value/100)}))}switch(U.save(),w.mode){case i.i3.Line:case i.i3.Dashed:D(W,b,z,B);break;case i.i3.Area:M(W,b,z,B);break;case i.i3.LineAndArea:case i.i3.DashedAndArea:M(W,b,z,B),D(W,b,z,B)}U.restore()}}const x={drag:{setScale:!1},points:{size:(C,P)=>C.series[P].points.size*2,width:(C,P,D)=>D/4},focus:{prox:30}};class y{constructor(P=l.Ys){this.series=[],this.axes={},this.scales=[],this.bands=[],this.stackingGroups=[],this.hasLeftAxis=!1,this.hooks={},this.tz=void 0,this.sync=!1,this.mode=1,this.frames=void 0,this.thresholds={},this.tooltipInterpolator=void 0,this.padding=void 0,this.prepData=void 0,this.scaleKeys=["",""],this.tzDate=D=>{let M=new Date(D);return this.tz?n.Z.tzDate(M,this.tz):M},this.tz=(0,s.Pr)(P,Date.now())?.ianaName}addHook(P,D){(0,f.Zp)("UPlotConfigBuilder",!1,"addHook",P),this.hooks[P]||(this.hooks[P]=[]),this.hooks[P].push(D)}addThresholds(P){this.thresholds[P.scaleKey]||(this.thresholds[P.scaleKey]=P,this.addHook("drawClear",v(P)))}addAxis(P){P.placement=P.placement??i.LB.Auto,P.grid=P.grid??{};let D=P.scaleKey;if(D==="x"&&(D+=P.timeZone??""),this.axes[D]){this.axes[D].merge(P);return}P.placement===i.LB.Auto&&(P.placement=this.hasLeftAxis?i.LB.Right:i.LB.Left),P.placement===i.LB.Left&&(this.hasLeftAxis=!0),P.placement===i.LB.Hidden&&(P.grid.show=!1,P.size=0),this.axes[D]=new c.ff(P)}getAxisPlacement(P){return this.axes[P]?.props.placement??i.LB.Left}setCursor(P){this.cursor=(0,t.merge)({},this.cursor,P)}setMode(P){this.mode=P}setSelect(P){this.select=P}addSeries(P){this.series.push(new g(P))}getSeries(){return this.series}addScale(P){const D=this.scales.find(M=>M.props.scaleKey===P.scaleKey);if(D){D.merge(P);return}this.scales.push(new o.I(P))}addBand(P){this.bands.push(P)}setStackingGroups(P){this.stackingGroups=P}getStackingGroups(){return this.stackingGroups}setTooltipInterpolator(P){this.tooltipInterpolator=P}getTooltipInterpolator(){return this.tooltipInterpolator}setPrepData(P){this.prepData=D=>(this.frames=D,P(D,this.getStackingGroups()))}setSync(){this.sync=!0}hasSync(){return this.sync}setPadding(P){this.padding=P}getConfig(){const P={...f.qt,mode:this.mode,series:[this.mode===2?null:{value:()=>""}]};P.axes=this.ensureNonOverlappingAxes(Object.values(this.axes)).map(M=>M.getConfig()),P.series=[...P.series,...this.series.map(M=>M.getConfig())],P.scales=this.scales.reduce((M,b)=>({...M,...b.getConfig()}),{}),P.hooks=this.hooks,P.select=this.select;const D=(M="")=>(b,R)=>{let B=b.series[R].points._stroke;if(typeof B!="string"){let w=this.frames[0].fields[R];B=w.display(w.values.get(b.cursor.idxs[R])).color}return B+M};return P.cursor=(0,t.merge)({},x,{points:{stroke:D("80"),fill:D()}},this.cursor),P.tzDate=this.tzDate,Array.isArray(this.padding)&&(P.padding=this.padding),this.stackingGroups.length&&this.stackingGroups.forEach(M=>{(0,f.Kq)(M).forEach(b=>{this.addBand(b)})}),this.bands.length&&(P.bands=this.bands),P}ensureNonOverlappingAxes(P){const D=P.find(R=>R.props.scaleKey==="x"),M=P.filter(R=>R.props.grid?.show===void 0),b=M.findIndex(R=>R.props.placement===i.LB.Left||R.props.placement===i.LB.Right||R.props.placement===i.LB.Bottom&&R!==D);for(let R=0;R<M.length;R++)M[R]===D||R===b?M[R].props.grid.show=!0:M[R].props.grid.show=!1;return P}}},36562:(Z,O,e)=>{"use strict";e.d(O,{I:()=>f,V:()=>c});var t=e(75974),n=e(15128),l=e(20112),s=e(40538),i=e(13890);class f extends i.L{merge(m){this.props.min=c("min",this.props.min,m.min),this.props.max=c("max",this.props.max,m.max)}getConfig(){let{isTime:m,scaleKey:r,min:u,max:d,softMin:g,softMax:p,range:E,direction:h,orientation:a,centeredZero:v,decimals:x}=this.props;const y=this.props.distribution,C=m?{}:{distr:y===s.wf.Symlog?4:y===s.wf.Log?3:y===s.wf.Ordinal?2:1,log:y===s.wf.Log||y===s.wf.Symlog?this.props.log??2:void 0,asinh:y===s.wf.Symlog?this.props.linearThreshold??1:void 0};if(y===s.wf.Log){let I=this.props.log,F=I===2?Math.log2:Math.log10;u!=null&&(u<=0?u=null:u=I**Math.floor(F(u))),d!=null&&(d<=0?d=null:d=I**Math.ceil(F(d))),g!=null&&(g<=0?g=null:g=I**Math.floor(F(g))),p!=null&&(p<=0?p=null:p=I**Math.ceil(F(p)))}let P=g==null?3:1,D=p==null?3:1;const M={min:{pad:.1,hard:u??-1/0,soft:g||0,mode:P},max:{pad:.1,hard:d??1/0,soft:p||0,mode:D}};let b=g==null&&u!=null,R=p==null&&d!=null,B=b&&R;const w=(I,F,K,W)=>{const U=I.scales[W];let N=[F,K];if(!B&&F==null&&K==null)return N;let S=U.log??10;if(U.distr===1||U.distr===2||U.distr===4){if(v){let Y=Math.abs(F),Q=Math.abs(K),z=Math.max(Y,Q);F=-z,K=z}U.distr===4?N=t.Z.rangeAsinh(F,K,S,!0):N=t.Z.rangeNum(b?u:F,R?d:K,M)}else U.distr===3&&(N=t.Z.rangeLog(u??F,d??K,S,!0));if(x===0)if(U.distr===1||U.distr===2)N[0]=(0,n.mB)(N[0],1),N[1]=(0,n.UO)(N[1],1);else if(U.distr===3){let Y=U.log===2?Math.log2:Math.log10;if(N[0]<=1)N[0]=1;else{let z=Math.floor(Y(N[0]));N[0]=S**z}let Q=Math.ceil(Y(N[1]));N[1]=S**Q,N[0]===N[1]&&(N[1]*=S)}else U.distr===4&&(N[0]=(0,n.mB)(N[0],1),N[1]=(0,n.UO)(N[1],1));return(U.distr===1||U.distr===4)&&(b&&(N[0]=u),R&&(N[1]=d)),N[0]>=N[1]&&(N[0]=U.distr===3?1:0,N[1]=100),N};let A=!m&&!B;return(0,l.br)(r)&&(A=!1,E=[0,1]),{[r]:{time:m,auto:A,range:E??w,dir:h,ori:a,...C}}}}function c(o,m,r){const u=m!=null,d=r!=null;return u?d?o==="min"?m<r?m:r:m>r?m:r:m:r}},52240:(Z,O,e)=>{"use strict";e.d(O,{A9:()=>g,DT:()=>o,KV:()=>u,P2:()=>p,oN:()=>m});var t=e(28550),n=e(64724),l=e(66926),s=e(24177),i=e(40538),f=e(4176);function c(E,h,a){let v=0,x=0,y=0,C=0;return E===r.Down?(x=h.top,C=h.top+h.height):E===r.Left?(v=h.left+h.width,y=h.left):E===r.Up?(x=h.top+h.height,C=h.top):E===r.Right&&(v=h.left,y=h.left+h.width),a.createLinearGradient(v,x,y,C)}function o(E,h){return(a,v)=>{const x=(0,f.AE)(),y=c(a.scales.x.ori===i.wN.Horizontal?r.Down:r.Left,a.bbox,x);return y.addColorStop(0,n.alpha(E,h)),y.addColorStop(1,n.alpha(E,0)),y}}function m(E,h,a){return(v,x)=>{const y=(0,f.AE)(),C=c(v.scales.x.ori===i.wN.Horizontal?r.Down:r.Left,v.bbox,y),P=(0,t.Z)(E).spin(-15),D=(0,t.Z)(E).spin(15);return a.isDark?(C.addColorStop(0,D.lighten(10).setAlpha(h).toString()),C.addColorStop(1,P.darken(10).setAlpha(h).toString())):(C.addColorStop(0,D.lighten(10).setAlpha(h).toString()),C.addColorStop(1,P.setAlpha(h).toString())),C}}var r=(E=>(E[E.Right=0]="Right",E[E.Up=1]="Up",E[E.Left=2]="Left",E[E.Down=3]="Down",E))(r||{});function u(E,h,a,v=!1){let x=E.scales[h],y=null,C=null;for(let U=0;U<a.length;U++){let N=a[U][0];if((N<=x.min||y==null)&&(y=U),C=U,N>=x.max)break}if(y===C)return a[y][1];let P=a[y][0],D=a[C][0];P===-1/0&&(P=x.min),D===1/0&&(D=x.max);let M=Math.round(E.valToPos(P,h,!0)),b=Math.round(E.valToPos(D,h,!0)),R=M-b;if(R===0)return a[C][1];let B,w,A,I;E.scales.x.ori===i.wN.Horizontal?(B=A=0,w=M,I=b):(w=I=0,B=M,A=b);let K=(0,f.AE)().createLinearGradient(B,w,A,I),W;for(let U=y;U<=C;U++){let N=a[U],S=U===y?M:U===C?b:Math.round(E.valToPos(N[0],h,!0)),Y=(M-S)/R;v&&U>y&&K.addColorStop(Y,W),K.addColorStop(Y,W=N[1])}return K}function d(E,h){let a=E.scales[h],v=1/0,x=-1/0;return E.series.forEach((y,C)=>{if(y.show&&y.scale===h)if(y.min==null){let P=E.data[C];for(let D=0;D<P.length;D++)P[D]!=null&&(v=Math.min(v,P[D]),x=Math.max(x,P[D]))}else v=Math.min(v,y.min),x=Math.max(x,y.max)}),x===v&&(v=a.min,x=a.max),[v,x]}function g(E,h,a,v,x,y){let C=a??x??null,P=v??y??null;if(C==null||P==null){let[D,M]=d(E,h);C=C??D??0,P=P??M??100}return[C,P]}function p(E,h,a,v,x,y,C,P){if(!a)throw Error("Missing colorMode required for color scheme gradients");if(!v)throw Error("Missing thresholds required for color scheme gradients");return(D,M)=>{let b=D.series[M].scale,R="";if(a.id===l.S.Thresholds)if(v.mode===s.H.Absolute){const B=v.steps.map(w=>[w.value,n.alpha(h.visualization.getColorByName(w.color),E)]);R=u(D,b,B,!0)}else{const[B,w]=g(D,b,x,y,C,P),A=w-B,I=v.steps.map(F=>[B+A*(F.value/100),n.alpha(h.visualization.getColorByName(F.color),E)]);R=u(D,b,I,!0)}else if(a.getColors){const B=a.getColors(h),[w,A]=g(D,b,x,y,C,P),I=A-w,F=B.map((K,W)=>[w+I*(W/(B.length-1)),n.alpha(h.visualization.getColorByName(K),E)]);R=u(D,b,F,!1)}return R}}},66243:(Z,O,e)=>{"use strict";e.d(O,{T:()=>i});var t=e(68404),n=e(24015),l=e(50215),s=e(45807);function i({id:f,events:c,renderEventMarker:o,mapEventToXYCoords:m,config:r}){const u=(0,t.useRef)(),[d,g]=(0,t.useState)(0),p=(0,n.Z)();(0,t.useLayoutEffect)(()=>{r.addHook("init",h=>{u.current=h}),r.addHook("draw",()=>{p()&&g(h=>h+1)})},[r,g]);const E=(0,t.useMemo)(()=>{const h=[];if(!u.current||c.length===0)return h;for(let a=0;a<c.length;a++){const v=c[a];for(let x=0;x<v.length;x++){const y=m(v,{fieldIndex:x,frameIndex:a});y&&h.push(t.createElement(l.J,{...y,key:`${f}-marker-${a}-${x}`},o(v,{fieldIndex:x,frameIndex:a})))}}return t.createElement(t.Fragment,null,h)},[c,o,d]);return u.current?t.createElement(s.K,{left:u.current.bbox.left/window.devicePixelRatio,top:u.current.bbox.top/window.devicePixelRatio},E):null}},50215:(Z,O,e)=>{"use strict";e.d(O,{J:()=>n});var t=e(68404);const n=({x:l,y:s,children:i})=>t.createElement("div",{style:{position:"absolute",top:`${s}px`,left:`${l}px`}},i)},45807:(Z,O,e)=>{"use strict";e.d(O,{K:()=>l});var t=e(9892),n=e(68404);const l=({children:s,left:i,top:f})=>{const c=(0,n.useMemo)(()=>t.css`
      position: absolute;
      overflow: visible;
      left: ${i}px;
      top: ${f}px;
    `,[i,f]);return n.createElement("div",{className:c},s)}},56709:(Z,O,e)=>{"use strict";e.d(O,{Jx:()=>n.J,K2:()=>l.K,TZ:()=>t.T});var t=e(66243),n=e(50215),l=e(45807)},16366:(Z,O,e)=>{"use strict";e.d(O,{C:()=>o});var t=e(82897),n=e.n(t),l=e(68404);const s=.1,i=2,f=new Set(["ArrowRight","ArrowLeft","ArrowUp","ArrowDown","Shift"," "]),c=m=>{let r=m.root.closest("[tabindex]"),u=new Set,d=null,g=null;if(!r)return;const p=(C,P)=>{const{cursor:D}=m;if(D.left===void 0||D.top===void 0)return;const{width:M,height:b}=m.over.style,[R,B]=[Math.floor(parseFloat(M)),Math.floor(parseFloat(b))];m.setCursor({left:(0,t.clamp)(D.left+C,0,R),top:(0,t.clamp)(D.top+P,0,B)})},E=C=>{if(u.size===0||!m){g=null;return}const M=(C-(g??C))*s;let b=0,R=0;u.has("ArrowUp")&&(R-=M),u.has("ArrowDown")&&(R+=M),u.has("ArrowLeft")&&(b-=M),u.has("ArrowRight")&&(b+=M),u.has("Shift")&&(b*=i,R*=i),p(b,R);const{cursor:B}=m;if(u.has(" ")&&B){const w=Number(m.over.style.height.slice(0,-2));m.setSelect({left:B.left<d?B.left:d,top:0,width:Math.abs(B.left-(d??B.left)),height:w},!1)}g=C,window.requestAnimationFrame(E)},h=C=>{if(C.key==="Tab"){m.setCursor({left:-5,top:-5});return}if(!f.has(C.key))return;if(C.preventDefault(),C.stopPropagation(),!u.has(C.key)){const D=u.size===0;u.add(C.key),d=C.key===" "&&d===null?m.cursor.left:d,D&&window.requestAnimationFrame(E)}},a=C=>{f.has(C.key)&&(u.delete(C.key),C.key===" "&&(C.preventDefault(),C.stopPropagation(),m.setSelect(m.select),d=null))},v=()=>{if(!r?.matches(":focus-visible"))return;const C=parseFloat(m.over.style.width),P=parseFloat(m.over.style.height);m.setCursor({left:C/2,top:P/2})},x=()=>{g=null,d=null,u.clear(),m.setSelect({left:0,top:0,width:0,height:0},!1)};r.addEventListener("keydown",h),r.addEventListener("keyup",a),r.addEventListener("focus",v),r.addEventListener("blur",x);const y=()=>{r?.removeEventListener("keydown",h),r?.removeEventListener("keyup",a),r?.removeEventListener("focus",v),r?.removeEventListener("blur",x),r=null};(m.hooks.destroy??=[]).push(y)},o=({config:m})=>((0,l.useLayoutEffect)(()=>m.addHook("init",c),[m]),null)},1105:(Z,O,e)=>{"use strict";e.d(O,{_:()=>x,i:()=>a});var t=e(68404),n=e(24015),l=e(29431),s=e(36512),i=e(66926),f=e(89890),c=e(20112),o=e(14582),m=e(76553),r=e(40538),u=e(72648),d=e(85511),g=e(50800),p=e(20888),E=e(2445);const h=10,a=({mode:y=r.f3.Single,sortOrder:C=r.As.None,sync:P,timeZone:D,config:M,renderTooltip:b,...R})=>{const B=(0,t.useRef)(),w=(0,u.l4)(),[A,I]=(0,t.useState)(null),[F,K]=(0,t.useState)(null),[W,U]=(0,t.useState)([]),[N,S]=(0,t.useState)(null),[Y,Q]=(0,t.useState)(!1),z=(0,n.Z)(),G="TooltipPlugin";if((0,t.useEffect)(()=>{(0,E.Zp)(G,!0,`Focused series: ${A}, focused point: ${F}`)},[F,A]),(0,t.useLayoutEffect)(()=>{let re;const ce=()=>{z()&&(Q(!0),B.current?.root.classList.add("plot-active"))},ie=()=>{z()&&(S(null),Q(!1),B.current?.root.classList.remove("plot-active"))};M.addHook("syncRect",(Ce,ee)=>re=ee),M.addHook("init",Ce=>{B.current=Ce,Ce.root.parentElement?.addEventListener("focus",ce),Ce.over.addEventListener("mouseenter",ce),Ce.root.parentElement?.addEventListener("blur",ie),Ce.over.addEventListener("mouseleave",ie),P&&P()===l.m.Crosshair&&Ce.root.classList.add("shared-crosshair")});const fe=M.getTooltipInterpolator();return fe?M.addHook("setCursor",Ce=>{fe(I,K,ee=>{if(ee){S(null);return}if(!re)return;const{x:ne,y:X}=x(Ce,re);ne!==void 0&&X!==void 0&&S({x:ne,y:X})},Ce)}):(M.addHook("setLegend",Ce=>{z()&&(K(Ce.legend.idx),U(Ce.legend.idxs.slice()))}),M.addHook("setCursor",Ce=>{if(!re||!z())return;const{x:ee,y:ne}=x(Ce,re);S(ee!==void 0&&ne!==void 0?{x:ee,y:ne}:null)}),M.addHook("setSeries",(Ce,ee)=>{z()&&I(ee)})),()=>{S(null),B.current&&(B.current.over.removeEventListener("mouseleave",ie),B.current.over.removeEventListener("mouseenter",ce),B.current.root.parentElement?.removeEventListener("focus",ce),B.current.root.parentElement?.removeEventListener("blur",ie))}},[M,S,Q,K,U]),F===null||!Y&&P&&P()===l.m.Crosshair)return null;let k=R.data.fields[0];if(!k)return null;const j=k.display||(0,s.U_)({field:k,timeZone:D,theme:w});let de=null,ge=j(k.values.get(F)).text;if(b)de=b(R.data,A,F);else{if(y===r.f3.Single&&A!==null){const re=R.data.fields[A];if(!re)return null;const ce=W?.[A]??F;ge=j(k.values.get(ce)).text;const fe=(re.display||(0,s.U_)({field:re,timeZone:D,theme:w}))(re.values.get(ce));de=t.createElement(g.c,{series:[{color:fe.color||i.R,label:(0,f.C)(re,R.data,R.frames),value:fe?(0,c.zc)(fe):null}],timestamp:ge})}if(y===r.f3.Multi){let re=[];const ce=R.data,ie=ce.fields,fe=[];for(let Ce=0;Ce<ie.length;Ce++){const ee=ce.fields[Ce];if(!ee||ee===k||ee.type===o.fS.time||ee.type!==o.fS.number||ee.config.custom?.hideFrom?.tooltip||ee.config.custom?.hideFrom?.viz)continue;const ne=R.data.fields[Ce].values.get(W[Ce]),X=ee.display(ne);fe.push(ne),re.push({color:X.color||i.R,label:(0,f.C)(ee,ce,R.frames),value:X?(0,c.zc)(X):null,isActive:A===Ce})}if(C!==r.As.None){const Ce=[...re],ee=m.sortValues(C);re.sort((ne,X)=>{const te=Ce.indexOf(ne),ae=Ce.indexOf(X);return ee(fe[te],fe[ae])})}de=t.createElement(g.c,{series:re,timestamp:ge})}}return t.createElement(d.h_,null,de&&N&&t.createElement(p.S,{position:{x:N.x,y:N.y},offset:{x:h,y:h}},de))};function v({left:y,top:C},P){return y===void 0||C===void 0?!1:y<0||y>P.width||C<0||C>P.height}function x(y,C){let P,D;const M=y.cursor.left||0,b=y.cursor.top||0;if(v(y.cursor,C)){const R=y.posToIdx(M);if(b<0||b>C.height){let B=(0,E.ah)(y,R);B&&(D=C.top+B,M>=0&&M<=C.width&&(P=C.left+y.valToPos(y.data[0][y.posToIdx(M)],y.series[0].scale)))}}else P=C.left+M,D=C.top+b;return{x:P,y:D}}},99375:(Z,O,e)=>{"use strict";e.d(O,{R:()=>s});var t=e(68404),n=e(2445);const l=5,s=({onZoom:i,config:f})=>{const[c,o]=(0,t.useState)(null);return(0,t.useEffect)(()=>{if(c){if((0,n.Zp)("ZoomPlugin",!1,"selected",c),c.bbox.width<l)return;i({from:c.min,to:c.max})}},[c]),(0,t.useLayoutEffect)(()=>{f.addHook("setSelect",m=>{const r=m.posToVal(m.select.left,"x"),u=m.posToVal(m.select.left+m.select.width,"x");o({min:r,max:u,bbox:{left:m.bbox.left/window.devicePixelRatio+m.select.left,top:m.bbox.top/window.devicePixelRatio,height:m.bbox.height/window.devicePixelRatio,width:m.select.width}}),m.setSelect({left:0,width:0},!1)})},[f]),null}},57989:(Z,O,e)=>{"use strict";e.d(O,{Cm:()=>l.C,Rb:()=>t.R,ii:()=>n.i});var t=e(99375),n=e(1105),l=e(16366)},13890:(Z,O,e)=>{"use strict";e.d(O,{L:()=>t});class t{constructor(l){this.props=l}}},2445:(Z,O,e)=>{"use strict";e.d(O,{Bj:()=>p,Kq:()=>d,Zp:()=>x,ah:()=>E,i7:()=>g,qt:()=>r});var t=e(14582),n=e(2932),l=e(40538),s=e(73289),i=e(88383),f=e(86979);const c=/\b(YYYY|YY|MMMM|MMM|MM|M|DD|D|WWWW|WWW|HH|H|h|AA|aa|a|mm|m|ss|s|fff)\b/g;function o(y){return y.replace(c,C=>`{${C}}`)}const m=(y,C,P)=>{let D=C%2?P[0]||P[2]:P[1]||P[3];return P[C]||!D?0:8},r={ms:1,focus:{alpha:1},cursor:{focus:{prox:30}},legend:{show:!1},padding:[m,m,m,m],series:[],hooks:{}};var u=(y=>(y[y.Pos=1]="Pos",y[y.Neg=-1]="Neg",y))(u||{});function d(y){let C=[],{series:P,dir:D}=y,M=P.length-1,b=P.slice().reverse();return b.forEach((R,B)=>{if(B!==M){let w=b[B+1];C.push({series:[R,w],dir:-1*D})}}),C}function g(y){let C=new Map;return y.fields.forEach(({config:P,values:D},M)=>{if(M===0)return;let{custom:b}=P;if(b==null||b.hideFrom?.viz)return;let{stacking:R}=b;if(R==null)return;let{mode:B,group:w}=R;if(B===l.o0.None)return;let A=D.toArray(),I=b.transform,F=h(I,A),K=b.drawStyle,W=K===l.l8.Bars?b.barAlignment:K===l.l8.Line?b.lineInterpolation:null,U=`${F}|${B}|${w}|${(0,f.z)(P)}|${K}|${W}`,N=C.get(U);N==null&&(N={series:[],dir:F},C.set(U,N)),N.series.push(M)}),[...C.values()]}function p(y,C,P){let D=Array(y.fields.length),M=C.length,b=y.length,R=M>0?Array(b).fill(0):[],B=M>0?Array(b).fill(!1):[],w=Array.from({length:M},()=>R.slice()),A=Array.from({length:M},()=>B.slice());if(C.forEach((I,F)=>{let K=A[F];I.series.forEach(W=>{let U=y.fields[W];if(U.config.custom?.hideFrom?.viz)return;let N=U.values.toArray();for(let S=0;S<b;S++)N[S]!=null&&(K[S]=!0)})}),y.fields.forEach((I,F)=>{let K=I.values.toArray();if(F===0){I.type===t.fS.time?D[F]=(0,n.J_)(I).values.toArray():D[F]=K;return}let{custom:W}=I.config;if(!W||W.hideFrom?.viz){D[F]=K;return}if(W.transform===l.pR.Constant){let N=K.findIndex(Y=>Y!=null),S=K[N];K=Array(K.length).fill(void 0),K[N]=S}else if(K=K.slice(),W.transform===l.pR.NegativeY)for(let N=0;N<K.length;N++)K[N]!=null&&(K[N]*=-1);let U=W.stacking?.mode;if(!U||U===l.o0.None)D[F]=K;else{let N=C.findIndex(z=>z.series.indexOf(F)>-1),S=w[N],Y=A[N],Q=D[F]=Array(b);for(let z=0;z<b;z++){let G=K[z];G!=null?Q[z]=S[z]+=G:Q[z]=Y[z]?S[z]:G}}}),P){let I=D.map((F,K)=>{let W=C.findIndex(U=>U.series.indexOf(K)>-1);return W!==-1?w[W]:F});P({totals:I})}return y.fields.forEach((I,F)=>{if(F===0||I.config.custom?.hideFrom?.viz)return;if(I.config.custom?.stacking?.mode===l.o0.Percent){let W=C.findIndex(Y=>Y.series.indexOf(F)>-1),U=w[W],N=C[W],S=D[F];for(let Y=0;Y<b;Y++){let Q=S[Y];Q!=null&&(S[Y]=U[Y]===0?0:N.dir*(Q/U[Y]))}}}),D}function E(y,C){let P,D=1,M=1,b=y.data[1][C],R=y.data[1][C];for(let B=1;B<y.data.length;B++){const A=y.data[B][C];A!=null&&(b==null?b=A:A>b&&(b=y.data[B][C],D=B),R==null?R=A:A<R&&(R=y.data[B][C],M=B))}return R==null&&b==null?P=void 0:R!=null&&b!=null?P=(y.valToPos(R,y.series[M].scale)+y.valToPos(b,y.series[D].scale))/2:P=y.valToPos(R||b,y.series[D||M].scale),P!==void 0&&P<0&&(P=y.bbox.height/devicePixelRatio),P}function h(y,C){const P=a(C);return y===l.pR.NegativeY?P?1:-1:P?-1:1}function a(y,C=100){const P=y.length;if(P===0)return!1;let D=0,M=P-1;for(;D<=M&&y[D]==null;)D++;for(;M>=D&&y[M]==null;)M--;let b=0,R=0;if(M>=D){const B=Math.max(1,Math.floor((M-D+1)/C));for(let w=D;w<=M;w+=B){const A=y[w];A!=null&&(A<0||Object.is(A,-0)?b++:A>0&&R++)}if(b>R)return!0}return!1}const v=(0,i.h)("uPlot"),x=v.logger;(0,s.x)("graphng",void 0,v)},40419:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{ALERTING_COLOR:()=>s.ns,AxisPlacement:()=>o.LB,BarAlignment:()=>o.pu,BarValueVisibility:()=>o.eU,BracesPlugin:()=>c.hP,ClearPlugin:()=>c.Gp,ClipboardPlugin:()=>c.wl,DEFAULT_ANNOTATION_COLOR:()=>s.Jx,DOMUtil:()=>s.Qi,DrawStyle:()=>o.$6,EventsWithValidation:()=>s.JU,GlobalStyles:()=>i.nz,GraphGradientMode:()=>o.FI,GraphTresholdsStyleMode:()=>o.i3,IndentationPlugin:()=>c.Rc,LegendDisplayMode:()=>o.jK,LineInterpolation:()=>o.KC,NO_DATA_COLOR:()=>s._V,NewlinePlugin:()=>c.z2,NodeGraphDataFrameFieldNames:()=>s.zG,OK_COLOR:()=>s.te,PENDING_COLOR:()=>s.f7,PointVisibility:()=>o.mv,REGION_FILL_ALPHA:()=>s.iV,ReactUtils:()=>s.Ot,RunnerPlugin:()=>c.dv,SCHEMA:()=>s.Yi,ScaleDirection:()=>o.bQ,ScaleOrientation:()=>o.wN,SearchFunctionType:()=>s.nu,SelectionShortcutsPlugin:()=>c.$L,SlatePrism:()=>c.Ze,StackingMode:()=>o.o0,SuggestionsPlugin:()=>c.bm,ThemeContext:()=>i.Ni,TooltipDisplayMode:()=>o.f3,ansicolor:()=>s._J,attachDebugger:()=>s.xq,calculateFontSize:()=>s.MX,colors:()=>s.O9,commonOptionsBuilder:()=>f.q,createLogger:()=>s.hu,fuzzyMatch:()=>s.C6,getCanvasContext:()=>s.AE,getCellLinks:()=>s.iu,getScrollbarWidth:()=>s.np,getTagColor:()=>s.vm,getTagColorsFromName:()=>s.Bx,getTextColorForAlphaBackground:()=>s.bM,getTextColorForBackground:()=>s.Gc,getTheme:()=>i.gh,hasValidationEvent:()=>s.z3,isCompactUrl:()=>s.go,linkModelToContextMenuItems:()=>s.Rc,makeFragment:()=>s.xl,makeValue:()=>s.l1,measureText:()=>s.X1,mockTheme:()=>i.Zu,mockThemeContext:()=>i.sJ,regexValidation:()=>s.FE,sortedColors:()=>s.Wm,styleMixins:()=>i.GU,stylesFactory:()=>i.Bb,useForceUpdate:()=>s.NW,useStyles:()=>i.yK,useStyles2:()=>i.wW,useTheme:()=>i.Fg,useTheme2:()=>i.l4,validate:()=>s.Gu,withTheme:()=>i.Zz,withTheme2:()=>i.HE});var t=e(14835),l={};for(const m in t)m!=="default"&&(l[m]=()=>t[m]);e.d(O,l);var n=e(24539),l={};for(const m in n)["default","Alert","AlertingSettings","AsyncMultiSelect","AsyncSelect","AsyncVirtualizedSelect","AutoSizeInput","Badge","BarGauge","BarGaugeDisplayMode","BigValue","BigValueColorMode","BigValueGraphMode","BigValueJustifyMode","BigValueTextMode","BrowserLabel","Button","ButtonCascader","ButtonGroup","ButtonSelect","CallToActionCard","Card","CardContainer","Cascader","CertificationKey","Checkbox","ClickOutsideWrapper","ClipboardButton","CodeEditor","CodeEditorSuggestionItemKind","CollapsableSection","Collapse","ColorPicker","ColorPickerInput","ConfirmButton","ConfirmModal","Container","ContextMenu","ControlledCollapse","Counter","CustomHeadersSettings","CustomScrollbar","DataLinkButton","DataLinkInput","DataLinksContextMenu","DataLinksInlineEditor","DataSourceHttpSettings","DatePicker","DatePickerWithInput","DateTimePicker","DeleteButton","Drawer","Dropdown","DropdownIndicator","EmptySearchResult","ErrorBoundary","ErrorBoundaryAlert","ErrorWithStack","EventsCanvas","FIXED_UNIT","FadeTransition","FeatureBadge","FeatureInfoBox","Field","FieldArray","FieldLinkList","FieldSet","FieldValidationMessage","FileDropzone","FileDropzoneDefaultChildren","FileListItem","FileUpload","FilterInput","FilterPill","Form","FormattedValueDisplay","FullWidthButtonContainer","Gauge","Graph","GraphContextMenu","GraphContextMenuHeader","GraphNG","GraphSeriesToggler","GraphWithLegend","HorizontalGroup","Icon","IconButton","InfoBox","InlineField","InlineFieldRow","InlineFormLabel","InlineLabel","InlineSegmentGroup","InlineSwitch","InlineToast","Input","InputControl","InteractiveTable","JSONFormatter","JsonExplorer","KeyboardPlugin","Label","LegacyForms","LegacyInputStatus","Legend","Link","LinkButton","List","LoadingBar","LoadingPlaceholder","LogLabels","LogMessageAnsi","LogRows","Marker","Menu","MenuGroup","MenuItem","Modal","ModalHeader","ModalRoot","ModalTabContent","ModalTabsHeader","ModalsContext","ModalsController","ModalsProvider","MultiSelect","PageToolbar","Pagination","PanelChrome","PanelChromeErrorIndicator","PanelChromeLoadingIndicator","PanelContainer","PanelContextProvider","PanelContextRoot","PlotLegend","PluginSignatureBadge","Popover","PopoverController","Portal","PortalContainer","QueryField","RadioButtonGroup","RadioButtonList","RangeSlider","ReactMonacoEditor","RefreshPicker","RelativeTimeRangePicker","RenderUserContentAsHTML","ScaleDistribution","SecretInput","SecretTextArea","SecureSocksProxySettings","Segment","SegmentAsync","SegmentInput","SegmentSection","SegmentSelect","Select","SelectContainer","SeriesColorPicker","SeriesColorPickerPopover","SeriesColorPickerPopoverWithTheme","SeriesIcon","SeriesTable","SeriesTableRow","SeriesVisibilityChangeBehavior","SeriesVisibilityChangeMode","SetInterval","SlideOutTransition","Slider","Sparkline","Spinner","StatsPicker","Switch","TLSAuthSettings","Tab","TabContent","TabbedContainer","Table","TableCellDisplayMode","TableInputCSV","TabsBar","Tag","TagList","TagsInput","TextArea","TimeOfDayPicker","TimePickerTooltip","TimeRangeInput","TimeRangePicker","TimeSeries","TimeZonePicker","ToolbarButton","ToolbarButtonRow","Tooltip","TooltipPlugin","UPLOT_AXIS_FONT_SIZE","UPlotChart","UPlotConfigBuilder","UnitPicker","ValuePicker","VerticalGroup","VerticalTab","VirtualizedSelect","VizLayout","VizLegend","VizLegendListItem","VizRepeater","VizTooltip","VizTooltipContainer","WeekStartPicker","WithContextMenu","XYCanvas","ZoomPlugin","buildScaleKey","clearButtonStyles","convertOldAngularValueMapping","defaultIntervals","fieldMatchersUI","getCardStyles","getInputStyles","getLogRowStyles","getPortalContainer","getSelectStyles","graphFieldOptions","graphTickFormatter","graphTimeFormat","preparePlotFrame","resetSelectStyles","sharedInputStyle","sharedSingleStatMigrationHandler","sharedSingleStatPanelChangedHandler","useGraphNGContext","usePanelContext","variableSuggestionToCodeEditorSuggestion","withErrorBoundary"].indexOf(m)<0&&(l[m]=()=>n[m]);e.d(O,l);var s=e(13643),i=e(34726),f=e(59851),c=e(8659),o=e(49557)},34315:(Z,O,e)=>{"use strict";e.d(O,{Y:()=>g,r:()=>r});var t=e(68404),n=e(14582),l=e(78798),s=e(40538),i=e(26372),f=e(2594),c=e(24799),o=e(53217),m=e(46967);function r(p,E,h){const a=["Axis"];p.addRadio({path:"axisPlacement",name:"Placement",category:a,defaultValue:i.q.axisPlacement[0].value,settings:{options:i.q.axisPlacement}}).addTextInput({path:"axisLabel",name:"Label",category:a,defaultValue:"",settings:{placeholder:"Optional text"},showIf:v=>v.axisPlacement!==s.LB.Hidden,shouldApply:v=>v.type!==n.fS.time&&v.type!==n.fS.string}).addNumberInput({path:"axisWidth",name:"Width",category:a,settings:{placeholder:"Auto"},showIf:v=>v.axisPlacement!==s.LB.Hidden}).addRadio({path:"axisGridShow",name:"Show grid lines",category:a,defaultValue:void 0,settings:{options:[{value:void 0,label:"Auto"},{value:!0,label:"On"},{value:!1,label:"Off"}]}}).addRadio({path:"axisColorMode",name:"Color",category:a,defaultValue:s.yK.Text,settings:{options:[{value:s.yK.Text,label:"Text"},{value:s.yK.Series,label:"Series"}]}}),p.addCustomEditor({id:"scaleDistribution",path:"scaleDistribution",name:"Scale",category:a,editor:g,override:g,defaultValue:{type:s.wf.Linear},shouldApply:v=>v.type===n.fS.number,process:l.kG}).addBooleanSwitch({path:"axisCenteredZero",name:"Centered zero",category:a,defaultValue:!1,showIf:v=>v.scaleDistribution?.type!==s.wf.Log}).addNumberInput({path:"axisSoftMin",name:"Soft min",defaultValue:E.axisSoftMin,category:a,settings:{placeholder:"See: Standard options > Min"}}).addNumberInput({path:"axisSoftMax",name:"Soft max",defaultValue:E.axisSoftMax,category:a,settings:{placeholder:"See: Standard options > Max"}})}const u=[{label:"Linear",value:s.wf.Linear},{label:"Logarithmic",value:s.wf.Log},{label:"Symlog",value:s.wf.Symlog}],d=[{label:"2",value:2},{label:"10",value:10}],g=({value:p,onChange:E})=>{const h=p?.type??s.wf.Linear;return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:16}},t.createElement(f.S,{value:h,options:u,onChange:a=>{E({...p,type:a,log:a===s.wf.Linear?void 0:p.log??2})}})),(h===s.wf.Log||h===s.wf.Symlog)&&t.createElement(c.g,{label:"Log base"},t.createElement(o.Ph,{options:d,value:p.log??2,onChange:a=>{E({...p,log:a.value})}})),h===s.wf.Symlog&&t.createElement(c.g,{label:"Linear threshold"},t.createElement(m.I,{placeholder:"1",value:p.linearThreshold,onChange:a=>{E({...p,linearThreshold:Number(a.currentTarget.value)})}})))}},91511:(Z,O,e)=>{"use strict";e.d(O,{B:()=>c});var t=e(82897),n=e.n(t),l=e(68404),s=e(52081),i=e(41165);const f=({value:o,onChange:m})=>{const r=(0,l.useCallback)(u=>{m({...o,[u]:!o[u]})},[o,m]);return l.createElement(s.Lh,{spacing:"xs"},Object.keys(o).map(u=>{const d=u;return l.createElement(i.B,{icon:o[d]?"eye-slash":"eye",onClick:()=>r(d),key:d,label:(0,t.startCase)(d),selected:o[d]})}))};function c(o){o.addCustomEditor({id:"hideFrom",name:"Hide in area",category:["Series"],path:"hideFrom",defaultValue:{tooltip:!1,viz:!1,legend:!1},editor:f,override:f,shouldApply:()=>!0,hideFromDefaults:!0,process:m=>m})}},31911:(Z,O,e)=>{"use strict";e.d(O,{J:()=>l});var t=e(35363),n=e(40538);function l(s,i=!0){s.addBooleanSwitch({path:"legend.showLegend",name:"Visibility",category:["Legend"],description:"",defaultValue:!0}).addRadio({path:"legend.displayMode",name:"Mode",category:["Legend"],description:"",defaultValue:n.jK.List,settings:{options:[{value:n.jK.List,label:"List"},{value:n.jK.Table,label:"Table"}]},showIf:f=>f.legend.showLegend}).addRadio({path:"legend.placement",name:"Placement",category:["Legend"],description:"",defaultValue:"bottom",settings:{options:[{value:"bottom",label:"Bottom"},{value:"right",label:"Right"}]},showIf:f=>f.legend.showLegend}).addNumberInput({path:"legend.width",name:"Width",category:["Legend"],settings:{placeholder:"Auto"},showIf:f=>f.legend.showLegend&&f.legend.placement==="right"}),i&&s.addCustomEditor({id:"legend.calcs",path:"legend.calcs",name:"Values",category:["Legend"],description:"Select values or calculations to show in legend",editor:t.S.get("stats-picker").editor,defaultValue:[],settings:{allowMultiple:!0},showIf:f=>f.legend.showLegend!==!1})}},22110:(Z,O,e)=>{"use strict";e.d(O,{V:()=>d,n:()=>u});var t=e(68404),n=e(78798),l=e(14582),s=e(40538),i=e(52081),f=e(2594),c=e(46967),o=e(6554),m=e(8180),r=e(26372);const u=({value:g,context:p,onChange:E,item:h})=>t.createElement(i.Lh,null,t.createElement(f.S,{value:g?.mode||s.o0.None,options:h.settings.options,onChange:a=>{E({...g,mode:a})}}),p.isOverride&&g?.mode&&g?.mode!==s.o0.None&&t.createElement(c.I,{type:"text",placeholder:"Group",suffix:t.createElement(o.u,{content:"Name of the stacking group",placement:"top"},t.createElement(m.h,{name:"question-circle"})),defaultValue:g?.group,onChange:a=>{E({...g,group:a.currentTarget.value.trim()})}}));function d(g,p,E=["Graph styles"]){g.addCustomEditor({id:"stacking",path:"stacking",name:"Stack series",category:E,defaultValue:p,editor:u,override:u,settings:{options:r.q.stacking},process:n.kG,shouldApply:h=>h.type===l.fS.number})}},25272:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>t});function t(n,l=!0){l&&n.addNumberInput({path:"text.titleSize",category:["Text size"],name:"Title",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0}),n.addNumberInput({path:"text.valueSize",category:["Text size"],name:"Value",settings:{placeholder:"Auto",integer:!1,min:1,max:200},defaultValue:void 0})}},77587:(Z,O,e)=>{"use strict";e.d(O,{L:()=>n});var t=e(40538);function n(l,s=!1){const i=["Tooltip"],f=s?[{value:t.f3.Single,label:"Single"},{value:t.f3.None,label:"Hidden"}]:[{value:t.f3.Single,label:"Single"},{value:t.f3.Multi,label:"All"},{value:t.f3.None,label:"Hidden"}],c=[{value:t.As.None,label:"None"},{value:t.As.Ascending,label:"Ascending"},{value:t.As.Descending,label:"Descending"}];l.addRadio({path:"tooltip.mode",name:"Tooltip mode",category:i,defaultValue:"single",settings:{options:f}}).addRadio({path:"tooltip.sort",name:"Values sort order",category:i,defaultValue:t.As.None,showIf:o=>o.tooltip?.mode===t.f3.Multi,settings:{options:c}})}},59851:(Z,O,e)=>{"use strict";e.d(O,{q:()=>t});var t={};e.r(t),e.d(t,{ScaleDistributionEditor:()=>n.Y,StackingEditor:()=>c.n,addAxisConfig:()=>n.r,addHideFrom:()=>l.B,addLegendOptions:()=>s.J,addStackingConfig:()=>c.V,addTextSizeOptions:()=>f.Z,addTooltipOptions:()=>i.L});var n=e(34315),l=e(91511),s=e(31911),i=e(77587),f=e(25272),c=e(22110)},49557:(Z,O,e)=>{"use strict";e.d(O,{$6:()=>t.l8,FI:()=>t.FI,KC:()=>t.KC,LB:()=>t.LB,bQ:()=>t.bQ,eU:()=>t.Jp,f3:()=>t.f3,i3:()=>t.i3,jK:()=>t.jK,mv:()=>t.Jp,o0:()=>t.o0,pu:()=>t.pu,wN:()=>t.wN});var t=e(40538)},13193:(Z,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(44288);const n={"[":"]","{":"}","(":")"},l="brace_match";function s(){return{onKeyDown(i,f,c){const{value:o}=f;switch(i.key){case"(":case"{":case"[":{const{start:{offset:m,key:r},end:{offset:u,key:d},focus:{offset:g}}=o.selection,p=o.focusText.text;if(o.selection.isExpanded)return i.preventDefault(),f.insertTextByKey(r,m,i.key).insertTextByKey(d,u+1,n[i.key]).moveEndBackward(1),!0;if(g===p.length||p[g]===" "||Object.values(n).includes(p[g])){i.preventDefault();const E=n[i.key],h={key:`${l}-${(0,t.Z)()}`,type:`${l}-${E}`,anchor:{key:r,offset:m,object:"point"},focus:{key:d,offset:u+1,object:"point"},object:"annotation"};return f.insertText(i.key).insertText(E).addAnnotation(h).moveBackward(1),!0}break}case")":case"}":case"]":{const m=o.anchorText.text,r=o.selection.anchor.offset,u=m[r],d=i.key,g=`${l}-${d}`,p=o.annotations.find(E=>E?.type===g&&E.anchor.key===o.anchorText.key);if(p&&u===d&&!o.selection.isExpanded)return i.preventDefault(),f.moveFocusForward(1).removeAnnotation(p).moveAnchorForward(1),!0;break}case"Backspace":{const m=o.anchorText.text,r=o.selection.anchor.offset,u=m[r-1],d=m[r];if(n[u]&&n[u]===d)return i.preventDefault(),f.deleteBackward(1).deleteForward(1).focus(),!0}default:break}return c()}}}},74778:(Z,O,e)=>{"use strict";e.d(O,{G:()=>t});function t(){return{onKeyDown(n,l,s){const i=l.value;if(i.selection.isExpanded)return s();if(n.key==="k"&&n.ctrlKey){n.preventDefault();const f=i.anchorText.text,c=i.selection.anchor.offset,m=f.length-c;return l.deleteForward(m),!0}return s()}}}},6464:(Z,O,e)=>{"use strict";e.d(O,{w:()=>l});const t=(s,i,f)=>{if(!s.length)return;const c=s.slice(0,-1).join("").length+s.length-1;return s.join(`
`).slice(i,c+f)},n=s=>s?.replace(/[\uFEFF]/g,"");function l(){const s={onCopy(i,f,c){i.preventDefault();const{document:o,selection:m}=f.value,{start:{offset:r},end:{offset:u}}=m,d=o.getLeafBlocksAtRange(m).toArray().map(p=>p.text),g=n(t(d,r,u));return g&&i.clipboardData&&i.clipboardData.setData("Text",g),!0},onPaste(i,f,c){if(i.preventDefault(),i.clipboardData){const m=n(i.clipboardData.getData("Text"))?.split(`
`);if(m&&m.length){f.insertText(m[0]);for(const r of m.slice(1))f.splitBlock().insertText(r)}}return!0}};return{...s,onCut(i,f,c){return s.onCopy(i,f,c),f.deleteAtRange(f.value.selection),!0}}}},784:(Z,O,e)=>{"use strict";e.d(O,{R:()=>r});var t=e(59641),n=e(53594),l=e(40246);const s=(0,t.TB)("mod+["),i=(0,t.TB)("shift+tab"),f=(0,t.TB)("mod+]"),c="  ",o=(u,d,g)=>{const{startBlock:p,endBlock:E,selection:{start:{offset:h,key:a},end:{offset:v,key:x}}}=d.value;if(l.Z.serialize(d.value)==="")return;u.preventDefault();const y=p.getFirstText();y&&h===0&&a===y.key&&v===y.text.length&&x===y.key||!p.equals(E)?m(d,"right"):d.insertText(c)},m=(u,d)=>{const g=u.value.selection,p=u.value.document.getLeafBlocksAtRange(g).toArray();if(d==="left")for(const E of p){const h=E.text.length-E.text.trimLeft().length,a=E.getFirstText().key,v={anchor:{key:a,offset:h,path:[]},focus:{key:a,offset:h,path:[]}};u.deleteBackwardAtRange(n.e6.create(v),Math.min(c.length,h))}else{const{startText:E}=u.value,h=E.text.slice(0,g.start.offset),a=/^\s*$/.test(h);for(const v of p)u.insertTextByKey(v.getFirstText().key,0,c);a&&u.moveStartBackward(c.length)}};function r(){return{onKeyDown(u,d,g){if(s(u)||i(u))u.preventDefault(),m(d,"left");else if(f(u))u.preventDefault(),m(d,"right");else if(u.key==="Tab")o(u,d,g);else return g();return!0}}}},8659:(Z,O,e)=>{"use strict";e.d(O,{$L:()=>c.$,Gp:()=>n.G,Rc:()=>s.R,Ze:()=>o.Z,bm:()=>m.b,dv:()=>f.d,hP:()=>t.h,wl:()=>l.w,z2:()=>i.z});var t=e(13193),n=e(74778),l=e(6464),s=e(784),i=e(9830),f=e(47838),c=e(71096),o=e(67660),m=e(73958)},9830:(Z,O,e)=>{"use strict";e.d(O,{z:()=>n});function t(l){let s=l.length-l.trimLeft().length;if(s){let i=l[0];for(;--s;)i+=l[0];return i}return""}function n(){return{onKeyDown(l,s,i){const f=s.value;if(f.selection.isExpanded)return i();if(l.key==="Enter"){l.preventDefault();const{startBlock:c}=f,o=c.text,m=t(o);return s.splitBlock().insertText(m).focus()}return i()}}}},47838:(Z,O,e)=>{"use strict";e.d(O,{d:()=>t});function t({handler:n}){return{onKeyDown(l,s,i){return n&&l.key==="Enter"&&(l.shiftKey||l.ctrlKey)?(l.preventDefault(),n(l),s):i()}}}},71096:(Z,O,e)=>{"use strict";e.d(O,{$:()=>l});var t=e(59641);const n=(0,t.TB)("mod+l");function l(){return{onKeyDown(s,i,f){if(n(s)){s.preventDefault();const{focusBlock:c,document:o}=i.value;i.moveAnchorToStartOfBlock(),o.getNextBlock(c.key)?i.moveFocusToStartOfNextBlock():i.moveFocusToEndOfText()}else return f();return!0}}}},95514:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>n});const n="prism-token"},67660:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>d,a:()=>h});var t=e(57706),n=e.n(t),l=e(53594),s=e(95514),i=e(220),f=e(68404);function c(a){return a.object==="block"&&a.type==="code_block"}function o(a){return"javascript"}function m(a,v,x){const{decoration:y}=a;if(y.type!==s.Z)return x();const C=y.data.get("className");return f.createElement("span",{className:C},a.children)}class r extends(0,i.Record)({onlyIn:c,getSyntax:o,renderDecoration:m}){constructor(v){super(v)}}const u=r;function d(a={},v=n().languages){const x=new u(a);return{decorateNode:(y,C,P)=>{if(!x.onlyIn(y))return P();const D=l.gO.create(y),M=x.getSyntax(D),b=v[M];if(!b)return[];const B=D.getTexts().map(F=>F&&F.getText()).join(`
`),w=n().tokenize(B,b),A=h(w),I=C.value.data.set("tokens",A);return C.setData(I),g(x,w,D)},renderDecoration:(y,C,P)=>x.renderDecoration({children:y.children,decoration:y.decoration},C,P)}}function g(a,v,x){const y=x.getTexts(),C=[];let P=0,D=0;return y.forEach(M=>{D=P+M.getText().length;let b=0;function R(B,w){if(typeof B=="string"){if(w){const A=p({text:M,textStart:P,textEnd:D,start:b,end:b+B.length,className:`prism-token token ${w}`,block:x});A&&C.push(A)}b+=B.length}else if(w=`${w} ${B.type}`,B.alias&&(w+=" "+B.alias),typeof B.content=="string"){const A=p({text:M,textStart:P,textEnd:D,start:b,end:b+B.content.length,className:`prism-token token ${w}`,block:x});A&&C.push(A),b+=B.content.length}else for(let A=0;A<B.content.length;A+=1)R(B.content[A],w)}v.forEach(R),P=D+1}),C}function p({text:a,textStart:v,textEnd:x,start:y,end:C,className:P,block:D}){return y>=x||C<=v?null:(y=Math.max(y,v),C=Math.min(C,x),y-=v,C-=v,D.createDecoration({object:"decoration",anchor:{key:a.key,offset:y,object:"point"},focus:{key:a.key,offset:C,object:"point"},type:s.Z,data:{className:P}}))}function E(a){return typeof a=="string"?[{content:a,types:[],aliases:[]}]:Array.isArray(a)?a.flatMap(v=>E(v)):a instanceof n().Token?E(a.content).flatMap(v=>{let x=[];return typeof a.alias=="string"?x=[a.alias]:x=a.alias??[],{content:v.content,types:[a.type,...v.types],aliases:[...x,...v.aliases]}}):[]}function h(a){const v=E(a);if(!v.length)return[];const x=v[0];x.prev=null,x.next=v.length>=2?v[1]:null,x.offsets={start:0,end:x.content.length};for(let C=1;C<v.length-1;C++)v[C].prev=v[C-1],v[C].next=v[C+1],v[C].offsets={start:v[C-1].offsets.end,end:v[C-1].offsets.end+v[C].content.length};const y=v[v.length-1];return y.prev=v.length>=2?v[v.length-2]:null,y.next=null,y.offsets={start:v.length>=2?v[v.length-2].offsets.end:0,end:v.length>=2?v[v.length-2].offsets.end+y.content.length:y.content.length},v}},73958:(Z,O,e)=>{"use strict";e.d(O,{b:()=>I});var t=e(82897),n=e(68404),l=e(97394),s=e(75478),i=e(72648),f=e(26519),c=e(13265);const o=K=>K.reduce((W,{items:U,label:N})=>(W.push({label:N,kind:f.c.GroupTitle}),U.reduce((S,Y)=>(S.push(Y),S),W)),[]),m=K=>K.reduce((W,U)=>W.length<U.label.length?U.label:W,""),r=(K,W,U)=>{const N=(0,c.Z)(U,{font:K.typography.fontFamilyMonospace,fontSize:K.typography.bodySmall.fontSize,fontWeight:"normal"}),S=d(N.width,K),Y=u(N.height,K),Q=g(Y,W);return{listWidth:S,listHeight:Q,itemHeight:Y}},u=(K,W)=>{const U=W.spacing.gridSize*2;return K+U},d=(K,W)=>{const U=W.spacing.gridSize*3,N=800;return Math.min(Math.max(K+U,200),N)},g=(K,W)=>{const U=Math.min(W.length,10),N=100,S=U*K;return Math.max(S,N)};var p=e(9892),E=e(41959);const h=(K,W,U)=>({typeaheadItem:p.css`
      label: type-ahead-item;
      z-index: 11;
      padding: ${K.spacing(1,1,1,2)};
      border: ${K.colors.border.medium};
      overflow-y: scroll;
      overflow-x: hidden;
      outline: none;
      background: ${K.colors.background.secondary};
      color: ${K.colors.text};
      box-shadow: 0 0 20px ${K.v1.colors.dropdownShadow};
      visibility: ${U===!0?"visible":"hidden"};
      width: 250px;
      min-height: ${W+parseInt(K.spacing(.25),10)}px;
      position: relative;
      word-break: break-word;
    `}),a=({item:K,height:W})=>{const U=K&&!!K.documentation,N=K?K.label:"",S=(0,E.a)(K?.documentation),Y=(0,i.l4)(),Q=h(Y,W,U);return n.createElement("div",{className:(0,p.cx)([Q.typeaheadItem])},n.createElement("b",null,N),n.createElement("hr",null),n.createElement("div",{dangerouslySetInnerHTML:{__html:S}}))};var v=e(14677),x=e.n(v),y=e(69636);const C=K=>({typeaheadItem:p.css`
    border: none;
    background: none;
    text-align: left;
    label: type-ahead-item;
    height: auto;
    font-family: ${K.typography.fontFamilyMonospace};
    padding: ${K.spacing(1,1,1,2)};
    font-size: ${K.typography.bodySmall.fontSize};
    text-overflow: ellipsis;
    overflow: hidden;
    z-index: 11;
    display: block;
    white-space: nowrap;
    cursor: pointer;
    transition: color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), border-color 0.3s cubic-bezier(0.645, 0.045, 0.355, 1),
      background 0.3s cubic-bezier(0.645, 0.045, 0.355, 1), padding 0.15s cubic-bezier(0.645, 0.045, 0.355, 1);
  `,typeaheadItemSelected:p.css`
    label: type-ahead-item-selected;
    background-color: ${K.colors.background.secondary};
  `,typeaheadItemMatch:p.css`
    label: type-ahead-item-match;
    color: ${K.v1.palette.yellow};
    border-bottom: 1px solid ${K.v1.palette.yellow};
    padding: inherit;
    background: inherit;
  `,typeaheadItemGroupTitle:p.css`
    label: type-ahead-item-group-title;
    color: ${K.colors.text.secondary};
    font-size: ${K.typography.bodySmall.fontSize};
    line-height: ${K.typography.body.lineHeight};
    padding: ${K.spacing(1)};
  `}),P=K=>{const W=(0,i.wW)(C),{isSelected:U,item:N,prefix:S,style:Y,onMouseEnter:Q,onMouseLeave:z,onClickItem:G}=K,k=U?(0,p.cx)([W.typeaheadItem,W.typeaheadItemSelected]):(0,p.cx)([W.typeaheadItem]),j=(0,p.cx)([W.typeaheadItemMatch]),de=(0,p.cx)([W.typeaheadItemGroupTitle]),ge=N.label||"";return N.kind===f.c.GroupTitle?n.createElement("li",{className:de,style:Y},n.createElement("span",null,ge)):n.createElement("li",{role:"none"},n.createElement("button",{role:"menuitem",className:k,style:Y,onMouseDown:G,onMouseEnter:Q,onMouseLeave:z,type:"button"},N.highlightParts!==void 0?n.createElement(y.H,{text:ge,highlightClassName:j,highlightParts:N.highlightParts}):n.createElement(x(),{textToHighlight:ge,searchWords:[S??""],autoEscape:!0,highlightClassName:j})))},D=(K,W)=>K-W*Math.floor(K/W);class M extends n.PureComponent{constructor(){super(...arguments),this.listRef=(0,n.createRef)(),this.state={hoveredItem:null,typeaheadIndex:null,allItems:[],listWidth:-1,listHeight:-1,itemHeight:-1},this.componentDidMount=()=>{this.props.menuRef&&this.props.menuRef(this),document.addEventListener("selectionchange",this.handleSelectionChange);const W=o(this.props.groupedItems),U=m(W),{listWidth:N,listHeight:S,itemHeight:Y}=r(this.context,W,U);this.setState({listWidth:N,listHeight:S,itemHeight:Y,allItems:W})},this.componentWillUnmount=()=>{document.removeEventListener("selectionchange",this.handleSelectionChange)},this.handleSelectionChange=()=>{this.forceUpdate()},this.componentDidUpdate=(W,U)=>{if(this.state.typeaheadIndex!==null&&U.typeaheadIndex!==this.state.typeaheadIndex&&this.listRef&&this.listRef.current){if(this.state.typeaheadIndex===1){this.listRef.current.scrollToItem(0);return}this.listRef.current.scrollToItem(this.state.typeaheadIndex)}if((0,t.isEqual)(W.groupedItems,this.props.groupedItems)===!1){const N=o(this.props.groupedItems),S=m(N),{listWidth:Y,listHeight:Q,itemHeight:z}=r(this.context,N,S);this.setState({listWidth:Y,listHeight:Q,itemHeight:z,allItems:N,typeaheadIndex:null})}},this.onMouseEnter=W=>{this.setState({hoveredItem:W})},this.onMouseLeave=()=>{this.setState({hoveredItem:null})},this.moveMenuIndex=W=>{const U=this.state.allItems.length;if(U){const N=this.state.typeaheadIndex||0;let S=D(N+W,U);this.state.allItems[S].kind===f.c.GroupTitle&&(S=D(S+W,U)),this.setState({typeaheadIndex:S});return}},this.insertSuggestion=()=>{this.props.onSelectSuggestion&&this.state.typeaheadIndex!==null&&this.props.onSelectSuggestion(this.state.allItems[this.state.typeaheadIndex])}}get menuPosition(){if(!window.getSelection)return"";const W=window.getSelection(),U=W&&W.anchorNode;if(U&&U.parentElement){const N=U.parentElement.getBoundingClientRect(),S=window.scrollX,Y=window.scrollY;return`position: absolute; display: flex; top: ${N.top+Y+N.height+6}px; left: ${N.left+S-2}px`}return""}render(){const{prefix:W,isOpen:U=!1,origin:N}=this.props,{allItems:S,listWidth:Y,listHeight:Q,itemHeight:z,hoveredItem:G,typeaheadIndex:k}=this.state,j=G||k,de=S[G||k||0];return n.createElement(b,{origin:N,isOpen:U,style:this.menuPosition},n.createElement("ul",{role:"menu",className:"typeahead","data-testid":"typeahead"},n.createElement(s.t7,{ref:this.listRef,itemCount:S.length,itemSize:z,itemKey:ge=>{const re=S&&S[ge];return re?`${ge}-${re.label}`:`${ge}`},width:Y,height:Q},({index:ge,style:re})=>{const ce=S&&S[ge];return ce?n.createElement(P,{onClickItem:()=>this.props.onSelectSuggestion?this.props.onSelectSuggestion(ce):{},isSelected:k===null?!1:S[k]===ce,item:ce,prefix:W,style:re,onMouseEnter:()=>this.onMouseEnter(ge),onMouseLeave:this.onMouseLeave}):null})),j&&n.createElement(a,{height:Q,item:de}))}}M.contextType=i.Ni;class b extends n.PureComponent{constructor(W){super(W);const{index:U=0,origin:N="query",style:S}=W;this.node=document.createElement("div"),this.node.setAttribute("style",S),this.node.classList.add("slate-typeahead",`slate-typeahead-${N}-${U}`),document.body.appendChild(this.node)}componentWillUnmount(){document.body.removeChild(this.node)}render(){return this.props.isOpen?(this.node.setAttribute("style",this.props.style),this.node.classList.add("slate-typeahead--open"),l.createPortal(this.props.children,this.node)):(this.node.classList.remove("slate-typeahead--open"),null)}}var R=e(12724),B=e(8644),w=e(95514);const A=250;function I({onTypeahead:K,cleanText:W,onWillApplySuggestion:U,portalOrigin:N}){let S,Y={groupedItems:[],typeaheadPrefix:"",typeaheadContext:"",typeaheadText:""};const Q=(0,t.debounce)(F,A),z=G=>{Y={...Y,...G}};return{onBlur:(G,k,j)=>(Y={...Y,groupedItems:[]},j()),onClick:(G,k,j)=>(Y={...Y,groupedItems:[]},j()),onKeyDown:(G,k,j)=>{const ge=Y.groupedItems.length;switch(G.key){case"Escape":{if(ge)return G.preventDefault(),Y={...Y,groupedItems:[]},k.insertText("");break}case"ArrowDown":case"ArrowUp":if(ge){G.preventDefault(),S.moveMenuIndex(G.key==="ArrowDown"?1:-1);return}break;case"Enter":{if(!(G.shiftKey||G.ctrlKey)&&ge)return G.preventDefault(),S.insertSuggestion();break}case"Tab":{if(ge)return G.preventDefault(),S.insertSuggestion();break}default:{G.key.length===1&&Q(k,z,K,W);break}}return j()},commands:{selectSuggestion:(G,k)=>{const j=Y.groupedItems;if(!j||!j.length)return G;const de=G.applyTypeahead(k);return Q(G,z,K,W),de},applyTypeahead:(G,k)=>{let j=k.insertText||k.label;const de=k.kind==="function",ge=k.move||0,re=ge>0?ge:0,ce=ge<0?-ge:0,{typeaheadPrefix:ie,typeaheadText:fe,typeaheadContext:Ce}=Y;U&&(j=U(j,{groupedItems:Y.groupedItems,typeaheadContext:Ce,typeaheadPrefix:ie,typeaheadText:fe}));const ee=k.deleteBackwards||ie.length,X=(W?W(fe):fe).length-ie.length,te=fe.indexOf(ie),_=ie&&(X>0&&te>-1||j===fe)&&!de?X+te:0;if(j.match(/\n/)){const ve=(0,R.xl)(j);return G.deleteBackward(ee).deleteForward(_).insertFragment(ve).focus(),G}return Y={...Y,groupedItems:[]},G.snapshotSelection().deleteBackward(ee).deleteForward(_).insertText(j).moveForward(re).moveBackward(ce).focus(),G}},renderEditor(G,k,j){if(k.value.selection.isExpanded)return j();const de=j();return n.createElement(n.Fragment,null,de,n.createElement(M,{menuRef:ge=>S=ge,origin:N,prefix:Y.typeaheadPrefix,isOpen:!!Y.groupedItems.length,groupedItems:Y.groupedItems,onSelectSuggestion:k.selectSuggestion}))}}}const F=async(K,W,U,N)=>{if(!U)return;const{value:S}=K,{selection:Y}=S,Q=S.document.getClosestBlock(S.focusBlock.key),z=S.selection.start.offset-1,G=Q&&Q.getDecorations(K),k=G?G.filter(ne=>ne.start.offset<=z&&ne.end.offset>z&&ne.type===w.Z).toArray():[],j=G&&G.filter(ne=>ne.end.offset<=z&&ne.type===w.Z&&ne.data.get("className").includes("label-key")).last(),de=j&&S.focusText.text.slice(j.start.offset,j.end.offset),ge=k.map(ne=>ne.data.get("className")).join(" ").split(" ").filter(ne=>ne.length);let re=S.focusText.text,ce=re.slice(0,Y.focus.offset);k.length&&(re=S.focusText.text.slice(k[0].start.offset,k[0].end.offset),ce=S.focusText.text.slice(k[0].start.offset,Y.focus.offset));const ie=ce.match(/(?:!?=~?"?|")(.*)/);ie?ce=ie[1]:N&&(ce=N(ce));const{suggestions:fe,context:Ce}=await U({prefix:ce,text:re,value:S,wrapperClasses:ge,labelKey:de||void 0,editor:K}),ee=fe.map(ne=>{if(!ne.items)return ne;const X=ne.searchFunctionType||(ne.prefixMatch?B.Z.Prefix:B.Z.Word),te=B.n[X];let ae={...ne};return ce&&(ne.skipFilter||(ae.items=ae.items.filter(_=>(_.filterText||_.label).length>=ce.length),ae.items=te(ae.items,ce)),ae.items=ae.items.filter(_=>!(_.insertText===ce||(_.filterText??_.label)===ce))),ne.skipSort||(ae.items=(0,t.sortBy)(ae.items,_=>_.sortText===void 0?_.sortValue!==void 0?_.sortValue:_.label:_.sortText||_.label)),ae}).filter(ne=>ne.items&&ne.items.length);W({groupedItems:ee,typeaheadPrefix:ce,typeaheadContext:Ce,typeaheadText:re}),K.blur().focus()}},78427:(Z,O,e)=>{"use strict";e.d(O,{n:()=>d});var t=e(39341),n=e(68404),l=e(72648);function s(g){return t.css`
    .panel-options-group {
      border-bottom: 1px solid ${g.colors.border.weak};
    }

    .panel-options-group__header {
      padding: ${g.spacing(1,2,1,1)};
      position: relative;
      display: flex;
      align-items: center;
      cursor: pointer;
      font-weight: 500;
      color: ${g.colors.text.primary};

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.primary,.03)};
      }
    }

    .panel-options-group__icon {
      color: ${g.colors.text.secondary};
      margin-right: ${g.spacing(1)};
      padding: ${g.spacing(0,.9,0,.6)};
    }

    .panel-options-group__title {
      position: relative;
    }

    .panel-options-group__body {
      padding: ${g.spacing(1,2,1,4)};
    }
  `}function i(g){return t.css`
    .card-section {
      margin-bottom: ${g.spacing(4)};
    }

    .card-list {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      list-style-type: none;
    }

    .card-item {
      display: block;
      height: 100%;
      background: ${g.colors.background.secondary};
      box-shadow: none;
      padding: ${g.spacing(2)};
      border-radius: 4px;

      &:hover {
        background: ${g.colors.emphasize(g.colors.background.secondary,.03)};
      }

      .label-tag {
        margin-left: ${g.spacing(1)};
        font-size: 11px;
        padding: 2px 6px;
      }
    }

    .card-item-body {
      display: flex;
      overflow: hidden;
    }

    .card-item-details {
      overflow: hidden;
    }

    .card-item-header {
      margin-bottom: ${g.spacing(2)};
    }

    .card-item-type {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      font-size: ${g.typography.size.sm};
      font-weight: ${g.typography.fontWeightMedium};
    }

    .card-item-badge {
      margin: 6px 0;
    }

    .card-item-notice {
      font-size: ${g.typography.size.sm};
    }

    .card-item-name {
      color: ${g.colors.text.primary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-label {
      margin-left: ${g.spacing(1)};
    }

    .card-item-sub-name {
      color: ${g.colors.text.secondary};
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
    }

    .card-item-sub-name--header {
      color: ${g.colors.text.secondary};
      text-transform: uppercase;
      margin-bottom: ${g.spacing(2)};
      font-size: ${g.typography.size.sm};
      font-weight: bold;
    }

    .card-list-layout-grid {
      .card-item-type {
        display: inline-block;
      }

      .card-item-notice {
        font-size: ${g.typography.size.sm};
        display: inline-block;
        margin-left: ${g.spacing(2)};
      }

      .card-item-header-action {
        float: right;
      }

      .card-item-wrapper {
        width: 100%;
        padding: ${g.spacing(0,2,2,0)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,2,0)}0;
        height: 80px;

        img {
          width: 80px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h3.fontSize};
      }

      ${g.breakpoints.up("md")} {
        .card-item-wrapper {
          width: 50%;
        }
      }

      ${g.breakpoints.up("lg")} {
        .card-item-wrapper {
          width: 33.333333%;
        }
      }

      &.card-list-layout-grid--max-2-col {
        ${g.breakpoints.up("lg")} {
          .card-item-wrapper {
            width: 50%;
          }
        }
      }
    }

    .card-list-layout-list {
      .card-item-wrapper {
        padding: 0;
        width: 100%;
        margin-bottom: ${g.spacing(1)};
      }

      .card-item-wrapper--clickable {
        cursor: pointer;
      }

      .card-item {
        border-radius: 2px;
      }

      .card-item-header {
        float: right;
        text-align: right;
      }

      .card-item-figure {
        margin: ${g.spacing(0,2,0,0)};
        img {
          width: 48px;
        }
      }

      .card-item-name {
        font-size: ${g.typography.h4.fontSize};
      }

      .card-item-sub-name {
        font-size: ${g.typography.size.sm};
      }

      .layout-selector {
        margin-right: 0;
      }
    }
  `}var f=e(85419);function c(g){return t.css`
    html {
      -ms-overflow-style: scrollbar;
      -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      height: 100%;
      font-size: ${g.typography.htmlFontSize}px;
      font-family: ${g.typography.fontFamily};
      line-height: ${g.typography.body.lineHeight};
      font-kerning: normal;
    }

    :root {
      color-scheme: ${g.colors.mode};
    }

    body {
      height: 100%;
      width: 100%;
      position: absolute;
      color: ${g.colors.text.primary};
      background-color: ${g.colors.background.canvas};
      ${o(g.typography.body)}
    }

    h1,
    .h1 {
      ${o(g.typography.h1)}
    }
    h2,
    .h2 {
      ${o(g.typography.h2)}
    }
    h3,
    .h3 {
      ${o(g.typography.h3)}
    }
    h4,
    .h4 {
      ${o(g.typography.h4)}
    }
    h5,
    .h5 {
      ${o(g.typography.h5)}
    }
    h6,
    .h6 {
      ${o(g.typography.h6)}
    }

    p {
      margin: 0 0 ${g.spacing(2)};
    }

    button {
      letter-spacing: ${g.typography.body.letterSpacing};

      &:focus-visible {
        outline: ${(0,f.getFocusStyles)(g)};
      }
      &:focus {
        outline: none;
      }
    }

    // Ex: 14px base font * 85% = about 12px
    small {
      font-size: ${g.typography.bodySmall.fontSize};
    }

    b,
    strong {
      font-weight: ${g.typography.fontWeightMedium};
    }

    em {
      font-style: italic;
      color: ${g.colors.text.primary};
    }

    cite {
      font-style: normal;
    }

    // Utility classes
    .muted {
      color: ${g.colors.text.secondary};
    }

    a.muted:hover,
    a.muted:focus {
      color: ${g.colors.text.primary};
    }

    .text-warning {
      color: ${g.colors.warning.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.warning.text,.15)};
      }
    }

    .text-error {
      color: ${g.colors.error.text};

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.error.text,.15)};
      }
    }

    .text-success {
      color: $success-text-color;

      &:hover,
      &:focus {
        color: ${g.colors.emphasize(g.colors.success.text,.15)};
      }
    }

    a {
      cursor: pointer;
      color: ${g.colors.text.primary};
      text-decoration: none;

      &:focus {
        outline: none;
      }

      &:focus-visible {
        ${(0,f.getFocusStyles)(g)}
      }

      &: [disabled] {
        cursor: default;
        pointer-events: none !important;
      }
    }

    .text-link {
      text-decoration: underline;
    }

    .text-left {
      text-align: left;
    }

    .text-right {
      text-align: right;
    }

    .text-center {
      text-align: center;
    }

    .highlight-search-match {
      background: ${g.components.textHighlight.background};
      color: ${g.components.textHighlight.text};
      padding: 0;
    }
  `}function o(g){return`
    margin: 0;
    font-size: ${g.fontSize};
    line-height: ${g.lineHeight};
    font-weight: ${g.fontWeight};
    letter-spacing: ${g.letterSpacing};
    font-family: ${g.fontFamily};
    margin-bottom: 0.45em;
  `}function m(g){return t.css`
    input,
    button,
    select,
    textarea {
      font-size: ${g.typography.body.fontSize};
      font-weight: ${g.typography.body.fontWeight};
      line-height: ${g.typography.body.lineHeight};
    }
    input,
    button,
    select,
    textarea {
      font-family: ${g.typography.body.fontFamily};
    }

    input,
    select {
      background-color: ${g.components.input.background};
      color: ${g.components.input.text};
      border: none;
      box-shadow: none;
    }

    textarea {
      height: auto;
    }

    // Reset width of input images, buttons, radios, checkboxes
    input[type='file'],
    input[type='image'],
    input[type='submit'],
    input[type='reset'],
    input[type='button'],
    input[type='radio'],
    input[type='checkbox'] {
      width: auto; // Override of generic input selector
    }
  `}function r(g){return t.css`
    // TODO copy from _utils.scss
  `}function u(g){const p=g.breakpoints.values.xxl+g.spacing.gridSize*2+g.components.sidemenu.width;return t.css`
    .grafana-app {
      display: flex;
      align-items: stretch;
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
    }

    .main-view {
      position: relative;
      display: flex;
      flex-direction: column;
      flex-grow: 1;
      height: 100%;
      flex: 1 1 0;
      min-width: 0;
    }

    .page-scrollbar-content {
      display: flex;
      min-height: 100%;
      flex-direction: column;
      width: 100%;
      height: 100%;
    }

    .page-container {
      flex-grow: 1;
      flex-basis: 100%;
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};

      ${g.breakpoints.up("sm")} {
        margin: ${g.spacing(0,1)};
      }

      ${g.breakpoints.up("md")} {
        margin: ${g.spacing(0,2)};
      }

      @media (min-width: ${p}px) {
        max-width: ${g.breakpoints.values.xxl}px;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
      }
    }

    .page-full {
      margin-left: ${g.spacing(2)};
      padding-left: ${g.spacing(2)};
      padding-right: ${g.spacing(2)};
    }

    .page-body {
      padding: ${g.spacing(1)};
      background: ${g.components.panel.background};
      border: 1px solid ${g.components.panel.borderColor};
      margin-bottom: 32px;

      ${g.breakpoints.up("md")} {
        padding: ${g.spacing(2)};
      }

      ${g.breakpoints.up("lg")} {
        padding: ${g.spacing(3)};
      }
    }

    .page-heading {
      font-size: ${g.typography.h4.fontSize};
      margin-top: 0;
      margin-bottom: ${g.spacing(2)};
    }

    .page-action-bar {
      margin-bottom: ${g.spacing(2)};
      display: flex;
      align-items: flex-start;

      > a,
      > button,
      > div:nth-child(2) {
        margin-left: ${g.spacing(2)};
      }
    }

    .page-action-bar--narrow {
      margin-bottom: 0;
    }

    .page-action-bar__spacer {
      width: ${g.spacing(2)};
      flex-grow: 1;
    }

    .page-sub-heading {
      margin-bottom: ${g.spacing(2)};
    }

    .page-sub-heading-icon {
      margin-left: ${g.spacing(1)};
      margin-top: ${g.spacing(.5)};
    }

    .page-hidden {
      display: none;
    }
  `}function d(){const g=(0,l.l4)();return n.createElement(t.Global,{styles:[c(g),m(g),u(g),i(g),s(g),r(g)]})}},72648:(Z,O,e)=>{"use strict";e.d(O,{Fg:()=>u,HE:()=>r,Ni:()=>o,Zz:()=>m,l4:()=>d,sJ:()=>E,wW:()=>p,yK:()=>g});var t=e(24420),n=e.n(t),l=e(68404),s=e(36328),i=e(7804);let f=null;const c=new WeakMap,o=l.createContext((0,s.j)());o.displayName="ThemeContext";const m=h=>{const a=v=>{const x=f||o;return l.createElement(x.Consumer,null,y=>l.createElement(h,{...v,theme:y.v1}))};return a.displayName=`WithTheme(${h.displayName})`,n()(a,h),a},r=h=>{const a=v=>{const x=f||o;return l.createElement(x.Consumer,null,y=>l.createElement(h,{...v,theme:y}))};return a.displayName=`WithTheme(${h.displayName})`,n()(a,h),a};function u(){return(0,l.useContext)(f||o).v1}function d(){return(0,l.useContext)(f||o)}function g(h){const a=u();let v=c.get(h);return v||(v=(0,i.B)(h),c.set(h,v)),v(a)}function p(h){const a=d();let v=c.get(h);return v||(v=(0,i.B)(h),c.set(h,v)),v(a)}const E=h=>(f=l.createContext(h),()=>{f=null})},34726:(Z,O,e)=>{"use strict";e.d(O,{nz:()=>c.n,Ni:()=>t.Ni,gh:()=>s,Zu:()=>i,sJ:()=>t.sJ,GU:()=>o,Bb:()=>f.B,yK:()=>t.yK,wW:()=>t.wW,Fg:()=>t.Fg,l4:()=>t.l4,Zz:()=>t.Zz,HE:()=>t.HE});var t=e(72648),n=e(36328);let l;const s=(m="dark")=>l?l(m):(0,n.j)({colors:{mode:m}}).v1,i=m=>(l=m,()=>{l=null});var f=e(7804),c=e(78427),o=e(85419)},85419:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{cardChrome:()=>n,focusCss:()=>o,getFocusStyles:()=>r,getMouseFocusStyles:()=>m,getTooltipContainerStyles:()=>u,hoverColor:()=>l,listItem:()=>s,listItemSelected:()=>i,mediaUp:()=>f});var t=e(28550);function n(d){return`
    background: ${d.colors.background.secondary};
    &:hover {
      background: ${l(d.colors.background.secondary,d)};
    }
    box-shadow: ${d.components.panel.boxShadow};
    border-radius: ${d.shape.radius.default};
`}function l(d,g){return g.isDark?(0,t.Z)(d).brighten(2).toString():(0,t.Z)(d).darken(2).toString()}function s(d){return`
  background: ${d.colors.background.secondary};
  &:hover {
    background: ${l(d.colors.background.secondary,d)};
  }
  box-shadow: ${d.components.panel.boxShadow};
  border-radius: ${d.shape.radius.default};
`}function i(d){return`
    background: ${l(d.colors.background.secondary,d)};
    color: ${d.colors.text.maxContrast};
`}function f(d){return`only screen and (min-width: ${d})`}const c=d=>d.hasOwnProperty("v1"),o=d=>{const g=c(d),p=g?d.colors.background.canvas:d.colors.bodyBg,E=g?d.colors.primary.main:d.colors.formFocusOutline;return`
  outline: 2px dotted transparent;
  outline-offset: 2px;
  box-shadow: 0 0 0 2px ${p}, 0 0 0px 4px ${E};
  transition-property: outline, outline-offset, box-shadow;
  transition-duration: 0.2s;
  transition-timing-function: cubic-bezier(0.19, 1, 0.22, 1);`};function m(d){return{outline:"none",boxShadow:"none"}}function r(d){return{outline:"2px dotted transparent",outlineOffset:"2px",boxShadow:`0 0 0 2px ${d.colors.background.canvas}, 0 0 0px 4px ${d.colors.primary.main}`,transitionTimingFunction:"cubic-bezier(0.19, 1, 0.22, 1)",transitionDuration:"0.2s",transitionProperty:"outline, outline-offset, box-shadow"}}const u=d=>`
  overflow: hidden;
  background: ${d.colors.background.secondary};
  box-shadow: ${d.shadows.z2};
  max-width: 800px;
  padding: ${d.spacing(1)};
  border-radius: ${d.shape.radius.default};
  z-index: ${d.zIndex.tooltip};
`},7804:(Z,O,e)=>{"use strict";e.d(O,{B:()=>n});var t=e(58635);function n(l){return(0,t.Z)(l)}},26519:(Z,O,e)=>{"use strict";e.d(O,{c:()=>t});var t=(n=>(n.GroupTitle="GroupTitle",n))(t||{})},5771:()=>{"use strict"},50622:(Z,O,e)=>{"use strict";e.d(O,{BI:()=>l,WZ:()=>i,e7:()=>s,iJ:()=>t.iJ});var t=e(43565),n=e(14582);const l=()=>Object.keys(t._S);function s(f){return i(f?.type)}function i(f){if(f)switch(f){case n.fS.time:return"clock-nine";case n.fS.string:return"font";case n.fS.number:return"calculator-alt";case n.fS.boolean:return"toggle-on";case n.fS.trace:return"info-circle";case n.fS.enum:return"list-ol";case n.fS.geo:return"map-marker";case n.fS.other:return"brackets-curly"}return"question-circle"}},24539:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{CompletionItemKind:()=>i.c,getAvailableIcons:()=>o.BI,getFieldTypeIcon:()=>o.e7,getFieldTypeIconName:()=>o.WZ,toIconName:()=>o.iJ});var t=e(2729),n=e.n(t),E={};for(const h in t)h!=="default"&&(E[h]=()=>t[h]);e.d(O,E);var l=e(96590),s=e.n(l),E={};for(const h in l)h!=="default"&&(E[h]=()=>l[h]);e.d(O,E);var i=e(26519),f=e(5771),c=e.n(f),E={};for(const h in f)["default","CompletionItemKind"].indexOf(h)<0&&(E[h]=()=>f[h]);e.d(O,E);var o=e(50622),m=e(64343),r=e.n(m),E={};for(const h in m)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(h)<0&&(E[h]=()=>m[h]);e.d(O,E);var u=e(76891),d=e.n(u),E={};for(const h in u)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(h)<0&&(E[h]=()=>u[h]);e.d(O,E);var g=e(53581),p=e.n(g),E={};for(const h in g)["default","CompletionItemKind","getAvailableIcons","getFieldTypeIcon","getFieldTypeIconName","toIconName"].indexOf(h)<0&&(E[h]=()=>g[h]);e.d(O,E)},96590:()=>{"use strict"},53581:()=>{"use strict"},64343:()=>{"use strict"},76891:()=>{"use strict"},2729:()=>{"use strict"},66120:(Z,O,e)=>{"use strict";e.d(O,{i:()=>t});const t=(n,l)=>{n.key==="Tab"||n.altKey||n.ctrlKey||n.metaKey||(n.stopPropagation(),n.key==="Escape"&&l())}},16514:(Z,O,e)=>{"use strict";e.d(O,{Gc:()=>E,Jx:()=>i,O9:()=>u,Wm:()=>a,_V:()=>o,bM:()=>h,f7:()=>m,iV:()=>r,ns:()=>c,te:()=>f});var t=e(82897),n=e.n(t),l=e(28550);const s=4,i="rgba(0, 211, 255, 1)",f="rgba(11, 237, 50, 1)",c="rgba(237, 46, 24, 1)",o="rgba(150, 150, 150, 1)",m="rgba(247, 149, 32, 1)",r=.09,u=["#7EB26D","#EAB839","#6ED0E0","#EF843C","#E24D42","#1F78C1","#BA43A9","#705DA0","#508642","#CCA300","#447EBC","#C15C17","#890F02","#0A437C","#6D1F62","#584477","#B7DBAB","#F4D598","#70DBED","#F9BA8F","#F29191","#82B5D8","#E5A8E2","#AEA2E0","#629E51","#E5AC0E","#64B0C8","#E0752D","#BF1B00","#0A50A1","#962D82","#614D93","#9AC48A","#F2C96D","#65C5DB","#F9934E","#EA6460","#5195CE","#D683CE","#806EB7","#3F6833","#967302","#2F575E","#99440A","#58140C","#052B51","#511749","#3F2B5B","#E0F9D7","#FCEACA","#CFFAFF","#F9E2D2","#FCE2DE","#BADFF4","#F9D9F9","#DEDAF7"];function d(v){const x=(0,t.map)(v,g),y=(0,t.sortBy)(x,["h"]),C=(0,t.chunk)(y,s),P=(0,t.map)(C,M=>(0,t.sortBy)(M,"l")),D=(0,t.flattenDeep)((0,t.zip)(...P));return(0,t.map)(D,p)}function g(v){return(0,l.Z)(v).toHsl()}function p(v){return(0,l.Z)(v).toHexString()}function E(v){return(0,l.Z)(v).getBrightness()>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}function h(v,x){const y=(0,l.Z)(v),C=y.getBrightness();return y.getAlpha()<.3?x?"rgb(247, 248, 250)":"rgb(32, 34, 38)":C>180?"rgb(32, 34, 38)":"rgb(247, 248, 250)"}let a=d(u)},79406:(Z,O,e)=>{"use strict";e.d(O,{R:()=>t,g:()=>n});const t=l=>l().map(s=>({label:s.title,ariaLabel:s.title,url:s.href,target:s.target,icon:`${s.target==="_blank"?"external-link-alt":"link"}`,onClick:s.onClick})),n=l=>/\/explore\?.*&(left|right)=\[(.*\,){2,}(.*){1}\]/.test(l)},73289:(Z,O,e)=>{"use strict";e.d(O,{x:()=>t});function t(n,l,s){}},39027:(Z,O,e)=>{"use strict";e.d(O,{O:()=>t});function t(n){const s=n.lastIndexOf("."),i=n.substring(s),f=n.substring(0,s);return f.length<16?n:`${f.substring(0,16)}...${i}`}},27303:(Z,O,e)=>{"use strict";e.d(O,{C:()=>l});var t=e(82897),n=e.n(t);function l(s,i){let f=0,c=s.indexOf(i);i=i.replace(/\s/g,"");const o=[];if(c!==-1)return{distance:0,found:!0,ranges:[{start:c,end:c+i.length-1}]};for(const m of i){const r=s.indexOf(m,c);if(r===-1)return{distance:1/0,ranges:[],found:!1};if(c!==-1&&(f+=r-c),c=r+1,o.length===0)o.push({start:r,end:r});else{const u=(0,t.last)(o);r===u.end+1?u.end++:o.push({start:r,end:r})}}return{distance:f,ranges:o,found:!0}}},37951:(Z,O,e)=>{"use strict";e.d(O,{c:()=>f,t:()=>o});var t=e(97925),n=e(68404),l=e(4696),s=e(31249);function i(){t.ZP.options.lng||t.ZP.use(l.Db).init({resources:{},returnEmptyString:!1,lng:"en-US"})}const f=m=>(i(),n.createElement(s.c,{...m})),c=t.ZP.t,o=(m,r,u)=>(i(),c(m,r,u))},13643:(Z,O,e)=>{"use strict";e.d(O,{ns:()=>i.ns,Jx:()=>i.Jx,Qi:()=>t,JU:()=>f.JU,_V:()=>i._V,zG:()=>v,te:()=>i.te,f7:()=>i.f7,iV:()=>i.iV,Ot:()=>s,Yi:()=>c.Yi,nu:()=>p.Z,_J:()=>E._J,xq:()=>a.x,MX:()=>d.MX,O9:()=>i.O9,hu:()=>h.h,C6:()=>x.C,AE:()=>d.AE,iu:()=>u.i,np:()=>r.n,vm:()=>m.vm,Bx:()=>m.Bx,bM:()=>i.bM,Gc:()=>i.Gc,z3:()=>f.z3,go:()=>o.g,Rc:()=>o.R,xl:()=>c.xl,l1:()=>c.l1,X1:()=>d.X1,FE:()=>f.FE,Wm:()=>i.Wm,NW:()=>g.N,Gu:()=>f.Gu});var t={};e.r(t),e.d(t,{getNextCharacter:()=>l,getPreviousCousin:()=>n}),typeof window<"u"&&"Element"in window&&!Element.prototype.closest&&(Element.prototype.closest=function(y){const C=(this.document||this.ownerDocument).querySelectorAll(y);let P=this,D;do{for(D=C.length;--D>=0&&C.item(D)!==P;);P=P.parentElement}while(D<0&&P);return P});function n(y,C){let P=y.parentElement.previousSibling,D;for(;P;){if(D=P.querySelector(C),D)return D;P=P.previousSibling}}function l(y){const C=(y||window).getSelection();if(!C||!C.anchorNode)return null;const P=C.getRangeAt(0),D=C.anchorNode.textContent,M=P.startOffset;return D.slice(M,M+1)}var s=e(61970),i=e(16514),f=e(97291),c=e(12724),o=e(79406),m=e(3385),r=e(90771),u=e(30901),d=e(4176),g=e(32434),p=e(8644),E=e(2525),h=e(88383),a=e(73289),v=(y=>(y.id="id",y.title="title",y.subTitle="subTitle",y.mainStat="mainStat",y.secondaryStat="secondaryStat",y.source="source",y.target="target",y.detail="detail__",y.arc="arc__",y.color="color",y))(v||{}),x=e(27303)},88383:(Z,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(82897),n=e.n(t);const l=(0,t.throttle)((...i)=>{console.log(...i)},500),s=i=>{let f=!1;return{logger:(c,o=!1,...m)=>{},enable:()=>f=!0,disable:()=>f=!1,isEnabled:()=>f}}},4176:(Z,O,e)=>{"use strict";e.d(O,{AE:()=>i,MX:()=>c,X1:()=>f});let t;const n=new Map,l=500;let s="";function i(){return t||(t=document.createElement("canvas").getContext("2d")),t}function f(o,m,r=400){const u=`${r} ${m}px 'Inter'`,d=o+u,g=n.get(d);if(g)return g;const p=i();s!==u&&(p.font=s=u);const E=p.measureText(o);return n.size===l&&n.clear(),n.set(d,E),E}function c(o,m,r,u,d,g){const p=f(o,14,g),E=m/(p.width+2)*14,h=r/u,a=Math.min(h,E);return Math.min(a,d??a)}},61970:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{getChildId:()=>n,renderOrCallToRender:()=>l});var t=e(68404);function n(s){let i;const f=t.Children.only(s);return"id"in f?.props?i=f.props.id:"inputId"in f.props&&(i=f?.props.inputId),typeof i=="string"?i:void 0}function l(s,i){if(t.isValidElement(s)||typeof s=="string"||typeof s=="number")return s;if(typeof s=="function")return s(i);throw new Error(`${s} is not a React element nor a function that returns React element`)}},90771:(Z,O,e)=>{"use strict";e.d(O,{n:()=>n});let t=null;function n(){if(t!==null)return t;if(typeof document<"u"){const l=document.createElement("div"),s={width:"100px",height:"100px",position:"absolute",top:"-9999px",overflow:"scroll",MsOverflowStyle:"scrollbar"};Object.keys(s).map(i=>{l.style[i]=s[i]}),document.body.appendChild(l),t=l.offsetWidth-l.clientWidth,document.body.removeChild(l)}else t=0;return t||0}},8644:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>n,n:()=>f});var t=e(27303),n=(c=>(c.Word="Word",c.Prefix="Prefix",c.Fuzzy="Fuzzy",c))(n||{});const f={Word:(c,o)=>c.filter(m=>(m.filterText||m.label).includes(o)),Prefix:(c,o)=>c.filter(m=>(m.filterText||m.label).startsWith(o)),Fuzzy:(c,o)=>(o=o.toLowerCase(),c.filter(m=>{const{distance:r,ranges:u,found:d}=(0,t.C)(m.label.toLowerCase(),o);return d?(m.sortValue=r,m.highlightParts=u,!0):!1}))}},12724:(Z,O,e)=>{"use strict";e.d(O,{Yi:()=>n,l1:()=>s,xl:()=>l});var t=e(53594);const n={document:{nodes:[{match:[{type:"paragraph"},{type:"code_block"},{type:"code_line"}]}]},inlines:{}},l=(i,f)=>{const c=i.split(`
`).map(m=>t.gO.create({type:"code_line",nodes:[t.xv.create(m)]})),o=t.gO.create({data:{syntax:f},type:"code_block",nodes:c});return t.BB.create({nodes:[o]})},s=(i,f)=>{const c=l(i,f);return t.B4.create({document:c})}},30901:(Z,O,e)=>{"use strict";e.d(O,{i:()=>t});const t=(n,l)=>{let s;if(n.getLinks&&(s=n.getLinks({valueRowIndex:l.index})),!!s){for(let i=0;i<s?.length;i++)if(s[i].onClick){const f=s[i].onClick;s[i].onClick=c=>{c.ctrlKey||c.metaKey||c.shiftKey||(c.preventDefault(),f(c,{field:n,rowIndex:l.index}))}}return s}}},3385:(Z,O,e)=>{"use strict";e.d(O,{Bx:()=>l,vm:()=>s});const t=["#D32D20","#1E72B8","#B240A2","#705DA0","#466803","#497A3C","#3D71AA","#B15415","#890F02","#6E6E6E","#0A437C","#6D1F62","#584477","#4C7A3F","#2F4F4F","#BF1B00","#7662B1","#8A2EB8","#517A00","#000000","#3F6833","#2F575E","#99440A","#AE561A","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],n=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];function l(c=""){const o=i(c.toLowerCase()),m=Math.abs(o%t.length);return s(m)}function s(c){return{color:t[c],borderColor:n[c]}}function i(c){let o=5381;for(let m=0;m<c.length;m++)o=(o<<5)+o+c.charCodeAt(m);return o}var f={getTagColorsFromName:l}},32434:(Z,O,e)=>{"use strict";e.d(O,{N:()=>n});var t=e(68404);function n(){const[l,s]=(0,t.useState)(0);return()=>s(i=>i+1)}},97291:(Z,O,e)=>{"use strict";e.d(O,{FE:()=>s,Gu:()=>n,JU:()=>t,z3:()=>l});var t=(i=>(i.onBlur="onBlur",i.onFocus="onFocus",i.onChange="onChange",i))(t||{});const n=(i,f)=>{const c=f.reduce((o,m)=>m.rule(i)?o:o.concat(m.errorMessage),[]);return c.length>0?c:null},l=(i,f)=>f&&f[i],s=(i,f)=>({rule:c=>!!c.match(i),errorMessage:f||"Value is not valid"})},42879:(Z,O,e)=>{"use strict";e.d(O,{z:()=>t});const t={Breadcrumbs:{breadcrumb:n=>`data-testid ${n} breadcrumb`},TimePicker:{openButton:"data-testid TimePicker Open Button",fromField:"Time Range from field",toField:"Time Range to field",applyTimeRange:"data-testid TimePicker submit button",calendar:{label:"Time Range calendar",openButton:"Open time range calendar",closeButton:"Close time range Calendar"},absoluteTimeRangeTitle:"data-testid-absolute-time-range-narrow"},DataSourcePermissions:{form:()=>'form[name="addPermission"]',roleType:"Role to add new permission to",rolePicker:"Built-in role picker",permissionLevel:"Permission Level"},DataSource:{TestData:{QueryTab:{scenarioSelectContainer:"Test Data Query scenario select container",scenarioSelect:"Test Data Query scenario select",max:"TestData max",min:"TestData min",noise:"TestData noise",seriesCount:"TestData series count",spread:"TestData spread",startValue:"TestData start value",drop:"TestData drop values"}},DataSourceHttpSettings:{urlInput:"Datasource HTTP settings url"},Jaeger:{traceIDInput:"Trace ID"},Prometheus:{configPage:{exemplarsAddButton:"Add exemplar config button",internalLinkSwitch:"Internal link switch"},exemplarMarker:"Exemplar marker"}},Menu:{MenuComponent:n=>`${n} menu`,MenuGroup:n=>`${n} menu group`,MenuItem:n=>`${n} menu item`,SubMenu:{container:"SubMenu container",icon:"SubMenu icon"}},Panels:{Panel:{title:n=>`data-testid Panel header ${n}`,headerItems:n=>`Panel header item ${n}`,menuItems:n=>`data-testid Panel menu item ${n}`,menu:n=>`data-testid Panel menu ${n}`,containerByTitle:n=>`${n} panel`,headerCornerInfo:n=>`Panel header ${n}`},Visualization:{Graph:{container:"Graph container",VisualizationTab:{legendSection:"Legend section"},Legend:{legendItemAlias:n=>`gpl alias ${n}`,showLegendSwitch:"gpl show legend"},xAxis:{labels:()=>"div.flot-x-axis > div.flot-tick-label"}},BarGauge:{value:"Bar gauge value",valueV2:"data-testid Bar gauge value"},PieChart:{svgSlice:"Pie Chart Slice"},Text:{container:()=>".markdown-html"},Table:{header:"table header",footer:"table-footer"}}},VizLegend:{seriesName:n=>`VizLegend series ${n}`},Drawer:{General:{title:n=>`Drawer title ${n}`,expand:"Drawer expand",contract:"Drawer contract",close:"Drawer close",rcContentWrapper:()=>".rc-drawer-content-wrapper"}},PanelEditor:{General:{content:"Panel editor content"},OptionsPane:{content:"Panel editor option pane content",select:"Panel editor option pane select",fieldLabel:n=>`${n} field property editor`},DataPane:{content:"Panel editor data pane content"},applyButton:"data-testid Apply changes and go back to dashboard",toggleVizPicker:"toggle-viz-picker",toggleVizOptions:"toggle-viz-options",toggleTableView:"toggle-table-view",measureButton:"show measure tools"},PanelInspector:{Data:{content:"Panel inspector Data content"},Stats:{content:"Panel inspector Stats content"},Json:{content:"Panel inspector Json content"},Query:{content:"Panel inspector Query content",refreshButton:"Panel inspector Query refresh button",jsonObjectKeys:()=>".json-formatter-key"}},Tab:{title:n=>`Tab ${n}`,active:()=>'[class*="-activeTabStyle"]'},RefreshPicker:{runButton:"RefreshPicker run button",intervalButton:"RefreshPicker interval button",runButtonV2:"data-testid RefreshPicker run button",intervalButtonV2:"data-testid RefreshPicker interval button"},QueryTab:{content:"Query editor tab content",queryInspectorButton:"Query inspector button",queryHistoryButton:"Rich history button",addQuery:"Query editor add query button"},QueryHistory:{queryText:"Query text"},QueryEditorRows:{rows:"Query editor row"},QueryEditorRow:{actionButton:n=>`${n} query operation action`,title:n=>`Query editor row title ${n}`,container:n=>`Query editor row ${n}`},AlertTab:{content:"Alert editor tab content"},Alert:{alert:n=>`Alert ${n}`,alertV2:n=>`data-testid Alert ${n}`},TransformTab:{content:"Transform editor tab content",newTransform:n=>`New transform ${n}`,transformationEditor:n=>`Transformation editor ${n}`,transformationEditorDebugger:n=>`Transformation editor debugger ${n}`},Transforms:{card:n=>`New transform ${n}`,Reduce:{modeLabel:"Transform mode label",calculationsLabel:"Transform calculations label"},SpatialOperations:{actionLabel:"root Action field property editor",locationLabel:"root Location field property editor",location:{autoOption:"Auto location option",coords:{option:"Coords location option",latitudeFieldLabel:"root Latitude field field property editor",longitudeFieldLabel:"root Longitude field field property editor"},geohash:{option:"Geohash location option",geohashFieldLabel:"root Geohash field field property editor"},lookup:{option:"Lookup location option",lookupFieldLabel:"root Lookup field field property editor",gazetteerFieldLabel:"root Gazetteer field property editor"}}},searchInput:"search transformations"},NavBar:{Configuration:{button:"Configuration"},Toggle:{button:"Toggle menu"},Reporting:{button:"Reporting"}},NavMenu:{item:"data-testid Nav menu item"},NavToolbar:{container:"data-testid Nav toolbar"},PageToolbar:{container:()=>".page-toolbar",item:n=>`${n}`,itemButton:n=>`data-testid ${n}`},QueryEditorToolbarItem:{button:n=>`QueryEditor toolbar item button ${n}`},BackButton:{backArrow:"Go Back"},OptionsGroup:{group:n=>n?`Options group ${n}`:"Options group",toggle:n=>n?`Options group ${n} toggle`:"Options group toggle"},PluginVisualization:{item:n=>`Plugin visualization item ${n}`,current:()=>'[class*="-currentVisualizationItem"]'},Select:{option:"Select option",input:()=>'input[id*="time-options-input"]',singleValue:()=>'div[class*="-singleValue"]'},FieldConfigEditor:{content:"Field config editor content"},OverridesConfigEditor:{content:"Field overrides editor content"},FolderPicker:{container:"Folder picker select container",containerV2:"data-testid Folder picker select container",input:"Select a folder"},ReadonlyFolderPicker:{container:"data-testid Readonly folder picker select container"},DataSourcePicker:{container:"Data source picker select container",input:()=>'input[id="data-source-picker"]',inputV2:"Select a data source"},TimeZonePicker:{container:"Time zone picker select container",containerV2:"data-testid Time zone picker select container"},WeekStartPicker:{container:"Choose starting day of the week",containerV2:"data-testid Choose starting day of the week",placeholder:"Choose starting day of the week"},TraceViewer:{spanBar:"data-testid SpanBar--wrapper"},QueryField:{container:"Query field"},QueryBuilder:{queryPatterns:"Query patterns",labelSelect:"Select label",valueSelect:"Select value",matchOperatorSelect:"Select match operator"},ValuePicker:{button:n=>`Value picker button ${n}`,select:n=>`Value picker select ${n}`},Search:{section:"Search section",sectionV2:"data-testid Search section",items:"Search items",itemsV2:"data-testid Search items",cards:"data-testid Search cards",collapseFolder:n=>`data-testid Collapse folder ${n}`,expandFolder:n=>`data-testid Expand folder ${n}`,dashboardItem:n=>`${t.Search.dashboardItems} ${n}`,dashboardCard:n=>`data-testid Search card ${n}`,folderHeader:n=>`data-testid Folder header ${n}`,folderContent:n=>`data-testid Folder content ${n}`,dashboardItems:"data-testid Dashboard search item"},DashboardLinks:{container:"data-testid Dashboard link container",dropDown:"data-testid Dashboard link dropdown",link:"data-testid Dashboard link"},LoadingIndicator:{icon:"Loading indicator"},CallToActionCard:{button:n=>`Call to action button ${n}`,buttonV2:n=>`data-testid Call to action button ${n}`},DataLinksContextMenu:{singleLink:"Data link"},CodeEditor:{container:"Code editor container"},DashboardImportPage:{textarea:"data-testid-import-dashboard-textarea",submit:"data-testid-load-dashboard"},ImportDashboardForm:{name:"data-testid-import-dashboard-title",submit:"data-testid-import-dashboard-submit"},PanelAlertTabContent:{content:"Unified alert editor tab content"},VisualizationPreview:{card:n=>`data-testid suggestion-${n}`},ColorSwatch:{name:"data-testid-colorswatch"},DashboardRow:{title:n=>`data-testid dashboard-row-title-${n}`},UserProfile:{profileSaveButton:"data-testid-user-profile-save",preferencesSaveButton:"data-testid-shared-prefs-save",orgsTable:"data-testid-user-orgs-table",sessionsTable:"data-testid-user-sessions-table"},FileUpload:{inputField:"data-testid-file-upload-input-field",fileNameSpan:"data-testid-file-upload-file-name"},DebugOverlay:{wrapper:"debug-overlay"},OrgRolePicker:{input:"Role"},AnalyticsToolbarButton:{button:"Dashboard insights"},Variables:{variableOption:"data-testid variable-option"}}},68183:(Z,O,e)=>{"use strict";e.d(O,{wl:()=>l});var t=e(42879);const l={pages:{Login:{url:"/login",username:"Username input field",password:"Password input field",submit:"Login button",skip:"Skip change password button"},Home:{url:"/"},DataSource:{name:"Data source settings page name input field",delete:"Data source settings page Delete button",readOnly:"Data source settings page read only message",saveAndTest:"Data source settings page Save and Test button",alert:"Data source settings page Alert"},DataSources:{url:"/datasources",dataSources:s=>`Data source list item ${s}`},EditDataSource:{url:s=>`/datasources/edit/${s}`,settings:"Datasource settings page basic settings"},AddDataSource:{url:"/datasources/new",dataSourcePlugins:s=>`Data source plugin item ${s}`,dataSourcePluginsV2:s=>`Add new data source ${s}`},ConfirmModal:{delete:"Confirm Modal Danger Button"},AddDashboard:{url:"/dashboard/new",itemButton:s=>`data-testid ${s}`,addNewPanel:"Add new panel",addNewRow:"Add new row",addNewPanelLibrary:"Add new panel from panel library"},Dashboard:{url:s=>`/d/${s}`,DashNav:{nav:"Dashboard navigation",navV2:"data-testid Dashboard navigation",publicDashboardTag:"data-testid public dashboard tag"},SubMenu:{submenu:"Dashboard submenu",submenuItem:"data-testid template variable",submenuItemLabels:s=>`data-testid Dashboard template variables submenu Label ${s}`,submenuItemValueDropDownValueLinkTexts:s=>`data-testid Dashboard template variables Variable Value DropDown value link text ${s}`,submenuItemValueDropDownDropDown:"Variable options",submenuItemValueDropDownOptionTexts:s=>`data-testid Dashboard template variables Variable Value DropDown option text ${s}`},Settings:{Actions:{close:"data-testid dashboard-settings-close"},General:{deleteDashBoard:"Dashboard settings page delete dashboard button",sectionItems:s=>`Dashboard settings section item ${s}`,saveDashBoard:"Dashboard settings aside actions Save button",saveAsDashBoard:"Dashboard settings aside actions Save As button",timezone:"Time zone picker select container",title:"Tab General"},Annotations:{List:{addAnnotationCTA:t.z.CallToActionCard.button("Add annotation query"),addAnnotationCTAV2:t.z.CallToActionCard.buttonV2("Add annotation query")},Settings:{name:"Annotations settings name input"}},Variables:{List:{addVariableCTA:t.z.CallToActionCard.button("Add variable"),addVariableCTAV2:t.z.CallToActionCard.buttonV2("Add variable"),newButton:"Variable editor New variable button",table:"Variable editor Table",tableRowNameFields:s=>`Variable editor Table Name field ${s}`,tableRowDefinitionFields:s=>`Variable editor Table Definition field ${s}`,tableRowArrowUpButtons:s=>`Variable editor Table ArrowUp button ${s}`,tableRowArrowDownButtons:s=>`Variable editor Table ArrowDown button ${s}`,tableRowDuplicateButtons:s=>`Variable editor Table Duplicate button ${s}`,tableRowRemoveButtons:s=>`Variable editor Table Remove button ${s}`},Edit:{General:{headerLink:"Variable editor Header link",modeLabelNew:"Variable editor Header mode New",modeLabelEdit:"Variable editor Header mode Edit",generalNameInput:"Variable editor Form Name field",generalNameInputV2:"data-testid Variable editor Form Name field",generalTypeSelect:"Variable editor Form Type select",generalTypeSelectV2:"data-testid Variable editor Form Type select",generalLabelInput:"Variable editor Form Label field",generalLabelInputV2:"data-testid Variable editor Form Label field",generalHideSelect:"Variable editor Form Hide select",generalHideSelectV2:"data-testid Variable editor Form Hide select",selectionOptionsMultiSwitch:"Variable editor Form Multi switch",selectionOptionsIncludeAllSwitch:"Variable editor Form IncludeAll switch",selectionOptionsCustomAllInput:"Variable editor Form IncludeAll field",selectionOptionsCustomAllInputV2:"data-testid Variable editor Form IncludeAll field",previewOfValuesOption:"Variable editor Preview of Values option",submitButton:"Variable editor Submit button",applyButton:"data-testid Variable editor Apply button"},QueryVariable:{queryOptionsDataSourceSelect:t.z.DataSourcePicker.container,queryOptionsRefreshSelect:"Variable editor Form Query Refresh select",queryOptionsRefreshSelectV2:"data-testid Variable editor Form Query Refresh select",queryOptionsRegExInput:"Variable editor Form Query RegEx field",queryOptionsRegExInputV2:"data-testid Variable editor Form Query RegEx field",queryOptionsSortSelect:"Variable editor Form Query Sort select",queryOptionsSortSelectV2:"data-testid Variable editor Form Query Sort select",queryOptionsQueryInput:"Variable editor Form Default Variable Query Editor textarea",valueGroupsTagsEnabledSwitch:"Variable editor Form Query UseTags switch",valueGroupsTagsTagsQueryInput:"Variable editor Form Query TagsQuery field",valueGroupsTagsTagsValuesQueryInput:"Variable editor Form Query TagsValuesQuery field"},ConstantVariable:{constantOptionsQueryInput:"Variable editor Form Constant Query field",constantOptionsQueryInputV2:"data-testid Variable editor Form Constant Query field"},DatasourceVariable:{datasourceSelect:"data-testid datasource variable datasource type"},TextBoxVariable:{textBoxOptionsQueryInput:"Variable editor Form TextBox Query field",textBoxOptionsQueryInputV2:"data-testid Variable editor Form TextBox Query field"},CustomVariable:{customValueInput:"data-testid custom-variable-input"},IntervalVariable:{intervalsValueInput:"data-testid interval variable intervals input"}}}}},Dashboards:{url:"/dashboards",dashboards:s=>`Dashboard search item ${s}`},SaveDashboardAsModal:{newName:"Save dashboard title field",save:"Save dashboard button"},SaveDashboardModal:{save:"Dashboard settings Save Dashboard Modal Save button",saveVariables:"Dashboard settings Save Dashboard Modal Save variables checkbox",saveTimerange:"Dashboard settings Save Dashboard Modal Save timerange checkbox"},SharePanelModal:{linkToRenderedImage:"Link to rendered image"},ShareDashboardModal:{shareButton:"Share dashboard or panel",PublicDashboard:{Tab:"Tab Public dashboard",WillBePublicCheckbox:"data-testid public dashboard will be public checkbox",LimitedDSCheckbox:"data-testid public dashboard limited datasources checkbox",CostIncreaseCheckbox:"data-testid public dashboard cost may increase checkbox",PauseSwitch:"data-testid public dashboard pause switch",EnableAnnotationsSwitch:"data-testid public dashboard on off switch for annotations",CreateButton:"data-testid public dashboard create button",DeleteButton:"data-testid public dashboard delete button",CopyUrlInput:"data-testid public dashboard copy url input",CopyUrlButton:"data-testid public dashboard copy url button",TemplateVariablesWarningAlert:"data-testid public dashboard disabled template variables alert",UnsupportedDataSourcesWarningAlert:"data-testid public dashboard unsupported data sources alert",NoUpsertPermissionsWarningAlert:"data-testid public dashboard no upsert permissions alert",EnableTimeRangeSwitch:"data-testid public dashboard on off switch for time range",EmailSharingConfiguration:{Container:"data-testid email sharing config container",ShareType:"data-testid public dashboard share type",EmailSharingInput:"data-testid public dashboard email sharing input",EmailSharingInviteButton:"data-testid public dashboard email sharing invite button",EmailSharingList:"data-testid public dashboard email sharing list",DeleteEmail:"data-testid public dashboard delete email button",ReshareLink:"data-testid public dashboard reshare link button"}}},PublicDashboard:{page:"public-dashboard-page",NotAvailable:{container:"public-dashboard-not-available",title:"public-dashboard-title",pausedDescription:"public-dashboard-paused-description"}},RequestViewAccess:{form:"request-view-access-form",recipientInput:"request-view-access-recipient-input",submitButton:"request-view-access-submit-button"},Explore:{url:"/explore",General:{container:"data-testid Explore",graph:"Explore Graph",table:"Explore Table",scrollView:"data-testid explorer scroll view"}},SoloPanel:{url:s=>`/d-solo/${s}`},PluginsList:{page:"Plugins list page",list:"Plugins list",listItem:"Plugins list item",signatureErrorNotice:"Unsigned plugins notice"},PluginPage:{page:"Plugin page",signatureInfo:"Plugin signature info",disabledInfo:"Plugin disabled info"},PlaylistForm:{name:"Playlist name",interval:"Playlist interval",itemDelete:"Delete playlist item"},Search:{url:"/?search=openn",FolderView:{url:"/?search=open&layout=folders"}},PublicDashboards:{ListItem:{linkButton:"public-dashboard-link-button",configButton:"public-dashboard-configuration-button",trashcanButton:"public-dashboard-remove-button"}},UserListPage:{org:{url:"/org/users"},admin:{url:"/admin/users"}}},components:t.z}},40538:(Z,O,e)=>{"use strict";e.d(O,{As:()=>A,Bd:()=>z,FI:()=>g,IG:()=>b,Jp:()=>o,KC:()=>u,LB:()=>f,M8:()=>K,QH:()=>F,Ss:()=>S,UV:()=>i,Y4:()=>Q,ap:()=>R,b8:()=>Y,bQ:()=>a,f3:()=>w,h2:()=>W,i3:()=>x,iT:()=>k,jG:()=>B,jK:()=>y,kW:()=>l,kv:()=>s,l8:()=>m,o0:()=>p,pR:()=>r,pc:()=>M,pu:()=>E,q1:()=>n,v7:()=>U,wN:()=>h,wf:()=>d,wm:()=>P,yK:()=>c});var t=(j=>(j.Field="field",j.Fixed="fixed",j.Template="template",j))(t||{}),n=(j=>(j.Auto="auto",j.Coords="coords",j.Geohash="geohash",j.Lookup="lookup",j))(n||{}),l=(j=>(j.Count="count",j.Size="size",j))(l||{}),s=(j=>(j.auto="auto",j.ge="ge",j.le="le",j.unknown="unknown",j))(s||{}),i=(j=>(j.Ascending="Ascending",j.Descending="Descending",j))(i||{}),f=(j=>(j.Auto="auto",j.Bottom="bottom",j.Hidden="hidden",j.Left="left",j.Right="right",j.Top="top",j))(f||{}),c=(j=>(j.Series="series",j.Text="text",j))(c||{}),o=(j=>(j.Always="always",j.Auto="auto",j.Never="never",j))(o||{}),m=(j=>(j.Bars="bars",j.Line="line",j.Points="points",j))(m||{}),r=(j=>(j.Constant="constant",j.NegativeY="negative-Y",j))(r||{}),u=(j=>(j.Linear="linear",j.Smooth="smooth",j.StepAfter="stepAfter",j.StepBefore="stepBefore",j))(u||{}),d=(j=>(j.Linear="linear",j.Log="log",j.Ordinal="ordinal",j.Symlog="symlog",j))(d||{}),g=(j=>(j.Hue="hue",j.None="none",j.Opacity="opacity",j.Scheme="scheme",j))(g||{}),p=(j=>(j.None="none",j.Normal="normal",j.Percent="percent",j))(p||{}),E=(j=>(j[j.After=1]="After",j[j.Before=-1]="Before",j[j.Center=0]="Center",j))(E||{}),h=(j=>(j[j.Horizontal=0]="Horizontal",j[j.Vertical=1]="Vertical",j))(h||{}),a=(j=>(j[j.Down=-1]="Down",j[j.Left=-1]="Left",j[j.Right=1]="Right",j[j.Up=1]="Up",j))(a||{});const v={dash:[]};var x=(j=>(j.Area="area",j.Dashed="dashed",j.DashedAndArea="dashed+area",j.Line="line",j.LineAndArea="line+area",j.Off="off",j.Series="series",j))(x||{}),y=(j=>(j.Hidden="hidden",j.List="list",j.Table="table",j))(y||{});const C={calcs:[]};var P=(j=>(j.Auto="auto",j.Horizontal="horizontal",j.Vertical="vertical",j))(P||{});const D={timezone:[]};var M=(j=>(j.Background="background",j.BackgroundSolid="background_solid",j.None="none",j.Value="value",j))(M||{}),b=(j=>(j.Area="area",j.Line="line",j.None="none",j))(b||{}),R=(j=>(j.Auto="auto",j.Center="center",j))(R||{}),B=(j=>(j.Auto="auto",j.Name="name",j.None="none",j.Value="value",j.ValueAndName="value_and_name",j))(B||{}),w=(j=>(j.Multi="multi",j.None="none",j.Single="single",j))(w||{}),A=(j=>(j.Ascending="asc",j.Descending="desc",j.None="none",j))(A||{});const I={calcs:[]};var F=(j=>(j.Basic="basic",j.Gradient="gradient",j.Lcd="lcd",j))(F||{}),K=(j=>(j.Color="color",j.Hidden="hidden",j.Text="text",j))(K||{}),W=(j=>(j.Auto="auto",j.BasicGauge="basic",j.ColorBackground="color-background",j.ColorBackgroundSolid="color-background-solid",j.ColorText="color-text",j.Gauge="gauge",j.GradientGauge="gradient-gauge",j.Image="image",j.JSONView="json-view",j.LcdGauge="lcd-gauge",j.Sparkline="sparkline",j))(W||{}),U=(j=>(j.Basic="basic",j.Gradient="gradient",j))(U||{});const N={fields:[],reducer:[]};var S=(j=>(j.Lg="lg",j.Md="md",j.Sm="sm",j))(S||{}),Y=(j=>(j.CSV="csv",j.Date="date",j.Distributed="distributed",j.DoubleQuote="doublequote",j.Glob="glob",j.HTML="html",j.JSON="json",j.Lucene="lucene",j.PercentEncode="percentencode",j.Pipe="pipe",j.QueryParam="queryparam",j.Raw="raw",j.Regex="regex",j.SQLString="sqlstring",j.SingleQuote="singlequote",j.Text="text",j.UriEncode="uriencode",j))(Y||{}),Q=(j=>(j.exact="exact",j.none="none",j.numbers="numbers",j.signature="signature",j))(Q||{}),z=(j=>(j.EQ="eq",j.GT="gt",j.GTE="gte",j.LT="lt",j.LTE="lte",j.NEQ="neq",j))(z||{});const G={align:"auto",inspect:!1},k="browser"},85596:(Z,O,e)=>{"use strict";e.d(O,{AU:()=>v,Gu:()=>i,NU:()=>E,Ql:()=>y,Vb:()=>h,ZM:()=>a,gW:()=>l});const t={tags:[]},n={builtIn:0,enable:!0,hide:!1,showIn:0,type:"dashboard"},l={global:!1,id:"00000000-0000-0000-0000-000000000000",index:-1,skipUrlSync:!1};var s=(C=>(C[C.dontHide=0]="dontHide",C[C.hideLabel=1]="hideLabel",C[C.hideVariable=2]="hideVariable",C))(s||{}),i=(C=>(C.Done="Done",C.Error="Error",C.Loading="Loading",C.NotStarted="NotStarted",C.Streaming="Streaming",C))(i||{});const f={asDropdown:!1,includeVars:!1,keepTime:!1,tags:[],targetBlank:!1};var c=(C=>(C.ContinuousGrYlRd="continuous-GrYlRd",C.Fixed="fixed",C.PaletteClassic="palette-classic",C.PaletteSaturated="palette-saturated",C.Thresholds="thresholds",C))(c||{});const o={h:9,w:12,x:0,y:0};var m=(C=>(C.Absolute="absolute",C.Percentage="percentage",C))(m||{});const r={steps:[]};var u=(C=>(C.RangeToText="range",C.RegexToText="regex",C.SpecialValue="special",C.ValueToText="value",C))(u||{}),d=(C=>(C.Empty="empty",C.False="false",C.NaN="nan",C.Null="null",C.NullAndNan="null+nan",C.True="true",C))(d||{}),g=(C=>(C[C.Crosshair=1]="Crosshair",C[C.Off=0]="Off",C[C.Tooltip=2]="Tooltip",C))(g||{});const p=0,E={links:[],repeatDirection:"h",tags:[],targets:[],thresholds:[],timeRegions:[],transformations:[],transparent:!1},h={overrides:[]},a={id:""},v={links:[],mappings:[]},x={collapsed:!1,panels:[]},y={editable:!0,fiscalYearStartMonth:0,graphTooltip:0,links:[],panels:[],schemaVersion:36,style:"dark",tags:[],timezone:"browser"}},30670:(Z,O,e)=>{"use strict";e.d(O,{Ql:()=>l});var t=e(85596),n=(m=>(m[m.dontHide=0]="dontHide",m[m.hideLabel=1]="hideLabel",m[m.hideVariable=2]="hideVariable",m))(n||{});const l=t.Ql,s={...t.gW,rootStateKey:null,error:null,description:null,hide:0,state:t.Gu.NotStarted,datasource:null},i=t.NU,f=t.AU,c=t.Vb,o=t.ZM},37219:(Z,O,e)=>{"use strict";e.d(O,{M:()=>i,Z:()=>l});var t=e(82897),n=e.n(t);class l{constructor(c){if(this.columns=[],this.columnMap={},this.rows=[],this.type="table",c){if(c.columns)for(const o of c.columns)this.addColumn(o);if(c.rows)for(const o of c.rows)this.addRow(o)}}sort(c){c.col===null||c.col===void 0||this.columns.length<=c.col||(this.rows.sort((o,m)=>(o=o[c.col],m=m[c.col],+(o==null)-+(m==null)||+(o>m)||-(o<m))),c.desc&&this.rows.reverse(),this.columns[c.col].sort=!0,this.columns[c.col].desc=c.desc)}addColumn(c){this.columnMap[c.text]||(this.columns.push(c),this.columnMap[c.text]=c)}addRow(c){this.rows.push(c)}}function s(f,c,o){let m=!1;for(let r=0;r<f.length;r++)if(c[r]!==void 0&&o[r]!==void 0){if(c[r]!==o[r])return!1}else(c[r]===void 0||o[r]===void 0)&&(m=!0);return m}function i(f,...c){const o=f||new l;if(arguments.length===1)return o;if(arguments.length===2)return o.columns=c[0].hasOwnProperty("columns")?[...c[0].columns]:[],o.rows=c[0].hasOwnProperty("rows")?[...c[0].rows]:[],o;const m=c.filter(h=>!!h.columns),r={},u=m.slice().reduce((h,a)=>(a.columns.forEach(v=>{const{text:x}=v;r[x]===void 0&&(r[x]=h.length,h.push(v))}),h),[]),d=m.map(h=>h.columns.map(a=>r[a.text])),g=m.reduce((h,a,v)=>{const x=d[v];return a.rows.forEach(y=>{const C=[];x.forEach((P,D)=>{C[P]=y[D]}),h.push(C)}),h},[]),p={},E=g.reduce((h,a,v)=>{if(!p[v]){let x=v+1;for(;x<g.length;){const y=(0,t.findIndex)(g,C=>s(u,a,C),x);if(y>-1){const C=g[y];for(let P=0;P<u.length;P++)a[P]===void 0&&C[P]!==void 0&&(a[P]=C[P]);p[y]=C,x=y+1}else break}h.push(a)}return h},[]);return o.columns=u,o.rows=E,o}},70431:(Z,O,e)=>{"use strict";e.d(O,{e:()=>n});var t=e(62992);const n=(0,t.PH)("core/cleanUpState")},659:(Z,O,e)=>{"use strict";e.d(O,{$l:()=>t.$l,H7:()=>n.H7,RL:()=>n.RL,ad:()=>t.ad});var t=e(98864),n=e(14393)},18271:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>l,h:()=>n});var t=e(85081);const n=new t.F,l=n},73546:(Z,O,e)=>{"use strict";e.d(O,{P:()=>b});var t=e(82897),n=e(68404),l=e(31403),s=e(1108),i=e(29930),f=e(94270),c=e(52081),o=e(53217),m=e(50796),r=e(94080),u=e(28038),d=e(73757),g=(K=>(K.None="None",K.Team="Team",K.User="User",K.BuiltInRole="builtInRole",K))(g||{});const p=({title:K="Add Permission For",permissions:W,assignments:U,onAdd:N,onCancel:S})=>{const[Y,Q]=(0,n.useState)(g.None),[z,G]=(0,n.useState)(0),[k,j]=(0,n.useState)(0),[de,ge]=(0,n.useState)(""),[re,ce]=(0,n.useState)(""),ie=(0,n.useMemo)(()=>{const Ce=[];return U.users&&Ce.push({value:g.User,label:"User"}),U.teams&&Ce.push({value:g.Team,label:"Team"}),U.builtInRoles&&Ce.push({value:g.BuiltInRole,label:"Role"}),Ce},[U]);(0,n.useEffect)(()=>{W.length>0&&ce(W[0])},[W]);const fe=()=>Y===g.Team&&z>0||Y===g.User&&k>0||g.BuiltInRole&&d.B5.hasOwnProperty(de);return n.createElement("div",{className:"cta-form","aria-label":"Permissions slider"},n.createElement(m.P,{onClick:S}),n.createElement("h5",null,K),n.createElement(f.l,{name:"addPermission",maxWidth:"none",onSubmit:()=>N({userId:k,teamId:z,builtInRole:de,permission:re,target:Y})},()=>n.createElement(c.Lh,null,n.createElement(o.Ph,{"aria-label":"Role to add new permission to",value:Y,options:ie,onChange:Ce=>Q(Ce.value),disabled:ie.length===0}),Y===g.User&&n.createElement(u.f,{onSelected:Ce=>j(Ce.value||0),className:"width-20"}),Y===g.Team&&n.createElement(r.c,{onSelected:Ce=>G(Ce.value?.id||0),className:"width-20"}),Y===g.BuiltInRole&&n.createElement(o.Ph,{"aria-label":"Built-in role picker",options:Object.values(d.B5).map(Ce=>({value:Ce,label:Ce})),onChange:Ce=>ge(Ce.value||""),width:40}),n.createElement(o.Ph,{"aria-label":"Permission Level",width:25,value:W.find(Ce=>Ce===re),options:W.map(Ce=>({label:Ce,value:Ce})),onChange:Ce=>ce(Ce.value||"")}),n.createElement(l.zx,{type:"submit",disabled:!fe()},"Save"))))};var E=e(6554),h=e(39904);const a=({item:K,permissionLevels:W,canSet:U,onRemove:N,onChange:S})=>n.createElement("tr",null,n.createElement("td",{style:{width:"1%"}},v(K)),n.createElement("td",{style:{width:"90%"}},y(K)),n.createElement("td",null,K.isInherited&&n.createElement("em",{className:"muted no-wrap"},"Inherited from folder")),n.createElement("td",null,n.createElement("div",{className:"gf-form"},n.createElement(o.Ph,{className:"width-20",disabled:!U||!K.isManaged,onChange:Y=>S(K,Y.value),value:W.find(Y=>Y===K.permission),options:W.map(Y=>({value:Y,label:Y}))}))),n.createElement("td",null,n.createElement(E.u,{content:C(K)},n.createElement(h.J,{name:"info-circle"}))),n.createElement("td",null,K.isManaged?n.createElement(l.zx,{size:"sm",icon:"times",variant:"destructive",disabled:!U,onClick:()=>N(K),"aria-label":`Remove permission for ${x(K)}`}):n.createElement(E.u,{content:K.isInherited?"Inherited Permission":"Provisioned Permission"},n.createElement(l.zx,{size:"sm",icon:"lock"})))),v=K=>K.teamId?n.createElement("img",{className:"filter-table__avatar",src:K.teamAvatarUrl,alt:`Avatar for team ${K.teamId}`}):K.userId?n.createElement("img",{className:"filter-table__avatar",src:K.userAvatarUrl,alt:`Avatar for user ${K.userId}`}):n.createElement(h.J,{size:"xl",name:"shield"}),x=K=>K.userId?K.userLogin:K.teamId?K.team:K.builtInRole,y=K=>K.userId?n.createElement("span",{key:"name"},K.userLogin," "):K.teamId?n.createElement("span",{key:"name"},K.team," "):K.builtInRole?n.createElement("span",{key:"name"},K.builtInRole," "):n.createElement("span",{key:"name"}),C=K=>`Actions: ${[...new Set(K.actions)].sort().join(" ")}`,P=({title:K,items:W,compareKey:U,permissionLevels:N,canSet:S,onRemove:Y,onChange:Q})=>{const z=(0,n.useMemo)(()=>{const G={};for(let k of W){const j=k[U];if(!G[j]){G[j]=k;continue}k.actions.length>G[j].actions.length&&(G[j]=k)}return Object.keys(G).map(k=>G[k])},[W,U]);return z.length===0?null:n.createElement("div",null,n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,K),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",null,"Permission"),n.createElement("th",{style:{width:"1%"}}),n.createElement("th",{style:{width:"1%"}}))),n.createElement("tbody",null,z.map((G,k)=>n.createElement(a,{item:G,onRemove:Y,onChange:Q,canSet:S,key:`${k}-${G.userId}`,permissionLevels:N})))))},D="",M={permissions:[],assignments:{teams:!1,users:!1,builtInRoles:!1}},b=({title:K="Permissions",buttonLabel:W="Add a permission",emptyLabel:U="There are no permissions",resource:N,resourceId:S,canSetPermissions:Y,addPermissionTitle:Q})=>{const[z,G]=(0,n.useState)(!1),[k,j]=(0,n.useState)([]),[de,ge]=(0,n.useState)(M),re=(0,n.useCallback)(()=>B(N,S).then(X=>j(X)),[N,S]);(0,n.useEffect)(()=>{R(N).then(X=>(ge(X),re()))},[N,S,re]);const ce=X=>{let te=null;X.target===g.User?te=w(N,S,X.userId,X.permission):X.target===g.Team?te=A(N,S,X.teamId,X.permission):X.target===g.BuiltInRole&&(te=I(N,S,X.builtInRole,X.permission)),te!==null&&te.then(re)},ie=X=>{let te=null;X.userId?te=w(N,S,X.userId,D):X.teamId?te=A(N,S,X.teamId,D):X.builtInRole&&(te=I(N,S,X.builtInRole,D)),te!==null&&te.then(re)},fe=(X,te)=>{X.permission!==te&&(X.userId?ce({permission:te,userId:X.userId,target:g.User}):X.teamId?ce({permission:te,teamId:X.teamId,target:g.Team}):X.builtInRole&&ce({permission:te,builtInRole:X.builtInRole,target:g.BuiltInRole}))},Ce=(0,n.useMemo)(()=>(0,t.sortBy)(k.filter(X=>X.teamId),["team","isManaged"]),[k]),ee=(0,n.useMemo)(()=>(0,t.sortBy)(k.filter(X=>X.userId),["userLogin","isManaged"]),[k]),ne=(0,n.useMemo)(()=>(0,t.sortBy)(k.filter(X=>X.builtInRole),["builtInRole","isManaged"]),[k]);return n.createElement("div",null,n.createElement("div",{className:"page-action-bar"},n.createElement("h3",{className:"page-sub-heading"},K),n.createElement("div",{className:"page-action-bar__spacer"}),Y&&n.createElement(l.zx,{variant:"primary",key:"add-permission",onClick:()=>G(!0)},W)),n.createElement("div",null,n.createElement(s.s,{in:z},n.createElement(p,{title:Q,onAdd:ce,permissions:de.permissions,assignments:de.assignments,onCancel:()=>G(!1)})),k.length===0&&n.createElement("table",{className:"filter-table gf-form-group"},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",null,U)))),n.createElement(P,{title:"Role",items:ne,compareKey:"builtInRole",permissionLevels:de.permissions,onChange:fe,onRemove:ie,canSet:Y}),n.createElement(P,{title:"User",items:ee,compareKey:"userLogin",permissionLevels:de.permissions,onChange:fe,onRemove:ie,canSet:Y}),n.createElement(P,{title:"Team",items:Ce,compareKey:"team",permissionLevels:de.permissions,onChange:fe,onRemove:ie,canSet:Y})))},R=async K=>{try{return await(0,i.i)().get(`/api/access-control/${K}/description`)}catch(W){return console.error("failed to load resource description: ",W),M}},B=(K,W)=>(0,i.i)().get(`/api/access-control/${K}/${W}`),w=(K,W,U,N)=>F(K,W,"users",U,N),A=(K,W,U,N)=>F(K,W,"teams",U,N),I=(K,W,U,N)=>F(K,W,"builtInRoles",U,N),F=(K,W,U,N,S)=>(0,i.i)().post(`/api/access-control/${K}/${W}/${U}/${N}`,{permission:S})},1108:(Z,O,e)=>{"use strict";e.d(O,{s:()=>f});var t=e(68404),n=e(41141);const l="200px",s=200,i={transition:`max-height ${s}ms ease-in-out`,overflow:"hidden"},f=({children:c,in:o,maxHeight:m=l,style:r=i})=>{const u={exited:{maxHeight:0},entering:{maxHeight:m},entered:{maxHeight:"unset",overflow:"visible"},exiting:{maxHeight:0}};return t.createElement(n.ZP,{in:o,timeout:s},d=>t.createElement("div",{style:{...r,...u[d]}},c))}},95379:(Z,O,e)=>{"use strict";e.d(O,{A:()=>l});var t=e(68404),n=e(34177);const l=t.memo(({actions:s})=>{const{chrome:i}=(0,n.p)();return(0,t.useEffect)(()=>{i.update({actions:s})}),null});l.displayName="TopNavUpdate"},31953:(Z,O,e)=>{"use strict";e.d(O,{G:()=>m});var t=e(9892),n=e(68404),l=e(72648),s=e(79396),i=e(76770),f=e(72948);function c({description:u,text:d,url:g}){const p=(0,l.wW)(o);return n.createElement(f.Z,{className:p.card,href:g},n.createElement(f.Z.Heading,null,d),n.createElement(f.Z.Description,{className:p.description},u))}const o=u=>({card:(0,t.css)({marginBottom:0,gridTemplateRows:"1fr 0 2fr"}),description:(0,t.css)({WebkitLineClamp:3,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden"})});function m({navId:u}){const{node:d}=(0,i.q)(u),g=(0,l.wW)(r),p=d.children?.filter(E=>!E.hideFromTabs);return n.createElement(s.T,{navId:d.id},n.createElement(s.T.Contents,null,n.createElement("div",{className:g.content},p&&p.length>0&&n.createElement("section",{className:g.grid},p?.map(E=>n.createElement(c,{key:E.id,description:E.subTitle,text:E.text,url:E.url??""}))))))}const r=u=>({content:(0,t.css)({display:"flex",flexDirection:"column",gap:u.spacing(2)}),grid:(0,t.css)({display:"grid",gap:u.spacing(3),gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gridAutoRows:"138px",padding:u.spacing(2,0)})})},89097:(Z,O,e)=>{"use strict";e.d(O,{M:()=>i});var t=e(9892),n=e(68404),l=e(35645),s=e(72648);function i({className:c,leftActionsSeparator:o}){const m=(0,s.wW)(f);return o?n.createElement("div",{className:(0,t.cx)(c,m.leftActionsSeparator)}):l.v.featureToggles.topnav?n.createElement("div",{className:(0,t.cx)(c,m.line)}):null}const f=c=>({leftActionsSeparator:(0,t.css)({display:"flex",flexGrow:1}),line:(0,t.css)({width:1,backgroundColor:c.colors.border.medium,height:24})})},13211:(Z,O,e)=>{"use strict";e.d(O,{$:()=>t});const t=40},36578:(Z,O,e)=>{"use strict";e.d(O,{c:()=>r});var t=e(9892),n=e(68404),l=e(64724),s=e(72648),i=e(85419);const f=({className:u,logo:d})=>n.createElement("img",{className:u,src:`${d||"public/img/grafana_icon.svg"}`,alt:"Grafana"}),c=({className:u,children:d})=>{const g=(0,s.l4)(),p=t.css`
    &:before {
      content: '';
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      top: 0;
      background: url(public/img/g8_login_${g.isDark?"dark":"light"}.svg);
      background-position: top center;
      background-size: auto;
      background-repeat: no-repeat;

      opacity: 0;
      transition: opacity 3s ease-in-out;

      @media ${i.mediaUp(g.v1.breakpoints.md)} {
        background-position: center;
        background-size: cover;
      }
    }
  `;return n.createElement("div",{className:(0,t.cx)(p,u)},d)},o=({className:u})=>n.createElement("img",{className:u,src:"public/img/grafana_icon.svg",alt:"Grafana"}),m=()=>{const u=(0,s.l4)();return t.css`
    background: ${l.alpha(u.colors.background.primary,.7)};
    background-size: cover;
  `};class r{}r.LoginLogo=f,r.LoginBackground=c,r.MenuLogo=o,r.LoginBoxBackground=m,r.AppTitle="Grafana",r.LoginTitle="Welcome to Grafana",r.GetLoginSubTitle=()=>null},67345:(Z,O,e)=>{"use strict";e.d(O,{t:()=>t});function t(n,l,s){const i=[];let f=!1;function c(o){const m=new URLSearchParams(o.url?.split("?")[1]);let r=`${o.url?.split("?")[0]}`;m.has("editview")&&(r+=`?editview=${m.get("editview")}`),!f&&!o.hideFromBreadcrumbs&&(s&&r===s.url?(i.unshift({text:s.text,href:o.url??""}),f=!0):i.unshift({text:o.text,href:o.url??""})),o.parentItem&&c(o.parentItem)}if(l)if(l.url&&l.children){const o=l.children.find(m=>m.active);o&&(c(o),o.parentItem!==l&&c(l))}else c(l);return c(n),i}},52822:(Z,O,e)=>{"use strict";e.d(O,{x:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(39904);const i=n.forwardRef(({icon:c,children:o,onClick:m,...r},u)=>{const d=(0,l.wW)(f);return n.createElement("button",{...r,className:d.action,onClick:m},n.createElement(s.J,{name:c,size:"xl"}),o)});i.displayName="CardButton";const f=c=>({action:t.css`
      display: flex;
      flex-direction: column;
      height: 100%;

      justify-self: center;
      cursor: pointer;
      background: ${c.colors.background.secondary};
      border-radius: ${c.shape.borderRadius(1)};
      color: ${c.colors.text.primary};
      border: unset;
      width: 100%;
      display: flex;

      justify-content: center;
      align-items: center;
      text-align: center;

      &:hover {
        background: ${c.colors.emphasize(c.colors.background.secondary)};
      }
    `})},50796:(Z,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(8180);const i=({onClick:c,"aria-label":o,style:m})=>{const r=(0,l.wW)(f);return n.createElement(s.h,{"aria-label":o??"Close",className:r,name:"times",onClick:c,style:m})},f=c=>t.css`
    position: absolute;
    right: ${c.spacing(.5)};
    top: ${c.spacing(1)};
  `},69142:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>r});var t=e(9892),n=e(68404),l=e(68183),s=e(39904),i=e(31403),f=e(97097);const c=t.css`
  text-align: center;
`,o=t.css`
  max-width: 700px;
  margin: 0 auto;
`,r=({title:u,buttonIcon:d,buttonLink:g,buttonTitle:p,buttonDisabled:E,onClick:h,proTip:a,proTipLink:v,proTipLinkTitle:x,proTipTarget:y,infoBox:C,infoBoxTitle:P})=>{const D=()=>n.createElement(n.Fragment,null,a?n.createElement("span",{key:"proTipFooter"},n.createElement(s.J,{name:"rocket"}),n.createElement(n.Fragment,null," ProTip: ",a," "),v&&n.createElement("a",{href:v,target:y,className:"text-link"},x)):"",C?n.createElement("div",{key:"infoBoxHtml",className:`grafana-info-box ${o}`},P&&n.createElement("h5",null,P),n.createElement("div",{dangerouslySetInnerHTML:C})):""),M=D()?"":t.css`
        margin-bottom: 20px;
      `,b=g?i.Qj:i.zx,R=n.createElement(b,{size:"lg",onClick:h,href:g,icon:d,className:M,"data-testid":l.wl.components.CallToActionCard.buttonV2(p),disabled:E},p);return n.createElement(f._,{className:c,message:u,footer:D(),callToActionElement:R})}},44407:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(68404),n=e(35645),l=e(39904),s=e(79396);function i(){return t.createElement(s.T,{navId:"not-found"},t.createElement(s.T.Contents,null,t.createElement("div",{className:"page-container page-body"},t.createElement("div",{className:"panel-container error-container"},t.createElement("div",{className:"error-column graph-box"},t.createElement("div",{className:"error-row"},t.createElement("div",{className:"error-column error-space-between graph-percentage"},t.createElement("p",null,"100%"),t.createElement("p",null,"80%"),t.createElement("p",null,"60%"),t.createElement("p",null,"40%"),t.createElement("p",null,"20%"),t.createElement("p",null,"0%")),t.createElement("div",{className:"error-column image-box"},t.createElement("img",{src:"public/img/graph404.svg",width:"100%",alt:"graph"}),t.createElement("div",{className:"error-row error-space-between"},t.createElement("p",{className:"graph-text"},"Then"),t.createElement("p",{className:"graph-text"},"Now"))))),t.createElement("div",{className:"error-column info-box"},t.createElement("div",{className:"error-row current-box"},t.createElement("p",{className:"current-text"},"current")),t.createElement("div",{className:"error-row",style:{flex:1}},t.createElement(l.J,{name:"minus-circle",className:"error-minus"}),t.createElement("div",{className:"error-column error-space-between error-full-width"},t.createElement("div",{className:"error-row error-space-between"},t.createElement("p",null,"Chances you are on the page you are looking for."),t.createElement("p",{className:"left-margin"},"0%")),t.createElement("div",null,t.createElement("h3",null,"Sorry for the inconvenience"),t.createElement("p",null,"Please go back to your"," ",t.createElement("a",{href:n.v.appSubUrl,className:"error-link"},"home dashboard")," ","and try again."),t.createElement("p",null,"If the error persists, seek help on the"," ",t.createElement("a",{href:"https://community.grafana.com",target:"_blank",rel:"noreferrer",className:"error-link"},"community site"),".")))))))))}const f=i},25337:(Z,O,e)=>{"use strict";e.d(O,{$_:()=>m,dP:()=>i});var t=e(68404),n=e(35645),l=e(39904),s=e(35287);let i=()=>[{target:"_blank",id:"documentation",text:(0,s.t)("nav.help/documentation","Documentation"),icon:"document-info",url:"https://grafana.com/docs/grafana/latest/?utm_source=grafana_footer"},{target:"_blank",id:"support",text:(0,s.t)("nav.help/support","Support"),icon:"question-circle",url:"https://grafana.com/products/enterprise/?utm_source=grafana_footer"},{target:"_blank",id:"community",text:(0,s.t)("nav.help/community","Community"),icon:"comments-alt",url:"https://community.grafana.com/?utm_source=grafana_footer"}];function f(u){return{hasReleaseNotes:!0,isBeta:u.includes("-beta")}}function c(){const{buildInfo:u,licenseInfo:d}=n.v,g=[],p=d.stateInfo?` (${d.stateInfo})`:"";if(g.push({target:"_blank",id:"license",text:`${u.edition}${p}`,url:d.licenseUrl}),u.hideVersion)return g;const{hasReleaseNotes:E}=f(u.version);return g.push({target:"_blank",id:"version",text:`v${u.version} (${u.commit})`,url:E?"https://github.com/grafana/grafana/blob/main/CHANGELOG.md":void 0}),u.hasUpdate&&g.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),g}function o(u){i=u}const m=t.memo(({customLinks:u})=>{const d=(u||i()).concat(c());return t.createElement("footer",{className:"footer"},t.createElement("div",{className:"text-center"},t.createElement("ul",null,d.map(g=>t.createElement("li",{key:g.text},t.createElement(r,{item:g}))))))});m.displayName="Footer";function r({item:u}){const d=u.url?t.createElement("a",{href:u.url,target:u.target,rel:"noopener noreferrer",id:u.id},u.text):u.text;return t.createElement(t.Fragment,null,u.icon&&t.createElement(l.J,{name:u.icon})," ",d)}},16534:(Z,O,e)=>{"use strict";e.d(O,{G:()=>r});var t=e(68404),n=e(68183),l=e(94270),s=e(24799),i=e(52081),f=e(31403),c=e(6554),o=e(5080),m=e(20787);const r=({onSubmit:u,onSkip:d})=>{const g=p=>{u(p.newPassword)};return t.createElement(l.l,{onSubmit:g},({errors:p,register:E,getValues:h})=>t.createElement(t.Fragment,null,t.createElement(s.g,{label:"New password",invalid:!!p.newPassword,error:p?.newPassword?.message},t.createElement(m.Z,{id:"new-password",autoFocus:!0,autoComplete:"new-password",...E("newPassword",{required:"New Password is required"})})),t.createElement(s.g,{label:"Confirm new password",invalid:!!p.confirmNew,error:p?.confirmNew?.message},t.createElement(m.Z,{id:"confirm-new-password",autoComplete:"new-password",...E("confirmNew",{required:"Confirmed Password is required",validate:a=>a===h().newPassword||"Passwords must match!"})})),t.createElement(i.wc,null,t.createElement(f.zx,{type:"submit",className:o.F},"Submit"),d&&t.createElement(c.u,{content:"If you skip you will be prompted to change password next time you log in.",placement:"bottom"},t.createElement(f.zx,{fill:"text",onClick:d,type:"button","aria-label":n.wl.pages.Login.skip},"Skip")))))}},93022:(Z,O,e)=>{"use strict";e.d(O,{X:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(39904),i=e(46967),f=e(57227);const c=({name:m,onChange:r,verifyLayerNameUniqueness:u,overrideStyles:d})=>{const g=(0,l.wW)(o),[p,E]=(0,n.useState)(!1),[h,a]=(0,n.useState)(null),v=M=>{E(!0)},x=M=>{if(E(!1),h){a(null);return}m!==M&&r(M)},y=M=>{const b=M.currentTarget.value.trim();if(b.length===0){a("An empty layer name is not allowed");return}if(u&&!u(b)&&b!==m){a("Layer name already exists");return}h&&a(null)},C=M=>{x(M.currentTarget.value.trim())},P=M=>{M.key==="Enter"&&x(M.currentTarget.value)},D=M=>{M.target.select()};return n.createElement(n.Fragment,null,n.createElement("div",{className:g.wrapper},!p&&n.createElement("button",{className:g.layerNameWrapper,title:"Edit layer name",onClick:v,"data-testid":"layer-name-div"},n.createElement("span",{className:d?"":g.layerName},m),n.createElement(s.J,{name:"pen",className:g.layerEditIcon,size:"sm"})),p&&n.createElement(n.Fragment,null,n.createElement(i.I,{type:"text",defaultValue:m,onBlur:C,autoFocus:!0,onKeyDown:P,onFocus:D,invalid:h!==null,onChange:y,className:g.layerNameInput,"data-testid":"layer-name-input"}),h&&n.createElement(f.S,{horizontal:!0},h))))},o=m=>({wrapper:t.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${m.spacing(.5)};
    `,layerNameWrapper:t.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${m.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${m.spacing(.5)};
      margin: 0;
      background: transparent;

      &:hover {
        background: ${m.colors.action.hover};
        border: 1px dashed ${m.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${m.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,layerName:t.css`
      font-weight: ${m.typography.fontWeightMedium};
      color: ${m.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${m.spacing(.5)};
    `,layerEditIcon:(0,t.cx)(t.css`
        margin-left: ${m.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),layerNameInput:t.css`
      max-width: 300px;
      margin: -4px 0;
    `})},59796:(Z,O,e)=>{"use strict";e.d(O,{G:()=>l});var t=e(68404),n=e(58379);const l=s=>{const{children:i,storageKey:f,defaultValue:c}=s,[o,m]=(0,t.useState)({value:n.Z.getObject(s.storageKey,s.defaultValue)});(0,t.useEffect)(()=>{const d=g=>{g.key===f&&m({value:n.Z.getObject(s.storageKey,s.defaultValue)})};return window.addEventListener("storage",d),()=>{window.removeEventListener("storage",d)}});const r=d=>{try{n.Z.setObject(f,d)}catch(g){console.error(g)}m({value:d})},u=()=>{try{n.Z.delete(f)}catch(d){console.log(d)}m({value:c})};return t.createElement(t.Fragment,null,i(o.value,r,u))}},86824:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(68404),n=e(25318),l=e(54899),s=e(18271),i=e(47694);const f=()=>!!i.ZP.oauth&&Object.keys(i.ZP.oauth).length>0;class c extends t.PureComponent{constructor(r){super(r),this.result={},this.changePassword=u=>{const d={newPassword:u,confirmNew:u,oldPassword:"admin"};if(this.props.resetCode){const g={code:this.props.resetCode,newPassword:u,confirmPassword:u};(0,l.i)().post("/api/user/password/reset",g).then(()=>{this.toGrafana()})}else(0,l.i)().put("/api/user/password",d).then(()=>{this.toGrafana()}).catch(g=>console.error(g))},this.login=u=>{this.setState({isLoggingIn:!0}),(0,l.i)().post("/login",u).then(d=>{if(this.result=d,u.password!=="admin"||i.ZP.ldapEnabled||i.ZP.authProxyEnabled){this.toGrafana();return}else this.changeView()}).catch(()=>{this.setState({isLoggingIn:!1})})},this.changeView=()=>{this.setState({isChangingPassword:!0})},this.toGrafana=()=>{this.result.redirectUrl?i.ZP.appSubUrl!==""&&!this.result.redirectUrl.startsWith(i.ZP.appSubUrl)?window.location.assign(i.ZP.appSubUrl+this.result.redirectUrl):window.location.assign(this.result.redirectUrl):window.location.assign(i.ZP.appSubUrl+"/")},this.state={isLoggingIn:!1,isChangingPassword:!1},i.ZP.loginError&&s.Z.emit(n.SI.alertWarning,["Login Failed",i.ZP.loginError])}render(){const{children:r}=this.props,{isLoggingIn:u,isChangingPassword:d}=this.state,{login:g,toGrafana:p,changePassword:E}=this,{loginHint:h,passwordHint:a,disableLoginForm:v,disableUserSignUp:x}=i.ZP;return t.createElement(t.Fragment,null,r({isOauthEnabled:f(),loginHint:h,passwordHint:a,disableLoginForm:v,disableUserSignUp:x,login:g,isLoggingIn:u,changePassword:E,skipPasswordChange:p,isChangingPassword:d}))}}const o=c},5080:(Z,O,e)=>{"use strict";e.d(O,{F:()=>r,U:()=>u});var t=e(9892),n=e(68404),l=e(68183),s=e(94270),i=e(24799),f=e(46967),c=e(31403),o=e(20787);const m=t.css`
  width: 100%;
  padding-bottom: 16px;
`,r=t.css`
  justify-content: center;
  width: 100%;
`,u=({children:d,onSubmit:g,isLoggingIn:p,passwordHint:E,loginHint:h})=>n.createElement("div",{className:m},n.createElement(s.l,{onSubmit:g,validateOn:"onChange"},({register:a,errors:v})=>n.createElement(n.Fragment,null,n.createElement(i.g,{label:"Email or username",invalid:!!v.user,error:v.user?.message},n.createElement(f.I,{...a("user",{required:"Email or username is required"}),autoFocus:!0,autoCapitalize:"none",placeholder:h,"aria-label":l.wl.pages.Login.username})),n.createElement(i.g,{label:"Password",invalid:!!v.password,error:v.password?.message},n.createElement(o.Z,{id:"current-password",autoComplete:"current-password",passwordHint:E,...a("password",{required:"Password is required"})})),n.createElement(c.zx,{type:"submit","aria-label":l.wl.pages.Login.submit,className:r,disabled:p},p?"Logging in...":"Log in"),d)))},80472:(Z,O,e)=>{"use strict";e.d(O,{$s:()=>c,dd:()=>o,pJ:()=>r});var t=e(9892),n=e(68404),l=e(72648),s=e(85419),i=e(36578),f=e(25337);const c=({children:u,enterAnimation:d=!0})=>{const g=(0,l.wW)(r);return n.createElement("div",{className:(0,t.cx)(g.loginInnerBox,d&&g.enterAnimation)},u)},o=({children:u,branding:d})=>{const g=(0,l.wW)(r),[p,E]=(0,n.useState)(!1),h=d?.loginSubtitle??i.c.GetLoginSubTitle(),a=d?.loginTitle??i.c.LoginTitle,v=d?.loginBoxBackground||i.c.LoginBoxBackground(),x=d?.loginLogo;return(0,n.useEffect)(()=>E(!0),[]),n.createElement(i.c.LoginBackground,{className:(0,t.cx)(g.container,p&&g.loginAnim,d?.loginBackground)},n.createElement("div",{className:(0,t.cx)(g.loginContent,v,"login-content-box")},n.createElement("div",{className:g.loginLogoWrapper},n.createElement(i.c.LoginLogo,{className:g.loginLogo,logo:x}),n.createElement("div",{className:g.titleWrapper},n.createElement("h1",{className:g.mainTitle},a),h&&n.createElement("h3",{className:g.subTitle},h))),n.createElement("div",{className:g.loginOuterBox},u)),d?.hideFooter?n.createElement(n.Fragment,null):n.createElement(f.$_,{customLinks:d?.footerLinks}))},m=t.keyframes`
from{
  opacity: 0;
  transform: translate(-60px, 0px);
}

to{
  opacity: 1;
  transform: translate(0px, 0px);
}`,r=u=>({container:(0,t.css)({minHeight:"100%",backgroundPosition:"center",backgroundRepeat:"no-repeat",minWidth:"100%",marginLeft:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}),loginAnim:t.css`
      &:before {
        opacity: 1;
      }

      .login-content-box {
        opacity: 1;
      }
    `,submitButton:t.css`
      justify-content: center;
      width: 100%;
    `,loginLogo:t.css`
      width: 100%;
      max-width: 60px;
      margin-bottom: 15px;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        max-width: 100px;
      }
    `,loginLogoWrapper:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: ${u.spacing(3)};
    `,titleWrapper:t.css`
      text-align: center;
    `,mainTitle:t.css`
      font-size: 22px;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        font-size: 32px;
      }
    `,subTitle:t.css`
      font-size: ${u.typography.size.md};
      color: ${u.colors.text.secondary};
    `,loginContent:t.css`
      max-width: 478px;
      width: calc(100% - 2rem);
      display: flex;
      align-items: stretch;
      flex-direction: column;
      position: relative;
      justify-content: flex-start;
      z-index: 1;
      min-height: 320px;
      border-radius: ${u.shape.borderRadius(4)};
      padding: ${u.spacing(2,0)};
      opacity: 0;
      transition: opacity 0.5s ease-in-out;

      @media ${s.mediaUp(u.v1.breakpoints.sm)} {
        min-height: 320px;
        justify-content: center;
      }
    `,loginOuterBox:t.css`
      display: flex;
      overflow-y: hidden;
      align-items: center;
      justify-content: center;
    `,loginInnerBox:t.css`
      padding: ${u.spacing(2)};

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
      max-width: 415px;
      width: 100%;
      transform: translate(0px, 0px);
      transition: 0.25s ease;
    `,enterAnimation:t.css`
      animation: ${m} ease-out 0.2s;
    `})},14617:(Z,O,e)=>{"use strict";e.d(O,{L:()=>s,Y:()=>l});var t=e(35645),n=e(35287);function l(i){switch(i){case"home":return(0,n.t)("nav.home.title","Home");case"new":return(0,n.t)("nav.new.title","New");case"create":return(0,n.t)("nav.create.title","Create");case"create-dashboard":return(0,n.t)("nav.create-dashboard.title","Dashboard");case"folder":return(0,n.t)("nav.create-folder.title","Folder");case"import":return(0,n.t)("nav.create-import.title","Import dashboard");case"alert":return(0,n.t)("nav.create-alert.title","Create alert rule");case"starred":return(0,n.t)("nav.starred.title","Starred");case"starred-empty":return(0,n.t)("nav.starred-empty.title","Your starred dashboards will appear here");case"dashboards":return(0,n.t)("nav.dashboards.title","Dashboards");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.title","Dashboards"):(0,n.t)("nav.manage-dashboards.title","Browse");case"dashboards/playlists":return(0,n.t)("nav.playlists.title","Playlists");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.title","Snapshots");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.title","Library panels");case"dashboards/public":return(0,n.t)("nav.public.title","Public dashboards");case"dashboards/new":return(0,n.t)("nav.new-dashboard.title","New dashboard");case"dashboards/folder/new":return(0,n.t)("nav.new-folder.title","New folder");case"dashboards/import":return(0,n.t)("nav.create-import.title","Import dashboard");case"scenes":return(0,n.t)("nav.scenes.title","Scenes");case"explore":return(0,n.t)("nav.explore.title","Explore");case"alerting":return(0,n.t)("nav.alerting.title","Alerting");case"alerting-legacy":return(0,n.t)("nav.alerting-legacy.title","Alerting (legacy)");case"alert-home":return(0,n.t)("nav.alerting-home.title","Home");case"alert-list":return(0,n.t)("nav.alerting-list.title","Alert rules");case"receivers":return(0,n.t)("nav.alerting-receivers.title","Contact points");case"am-routes":return(0,n.t)("nav.alerting-am-routes.title","Notification policies");case"channels":return(0,n.t)("nav.alerting-channels.title","Notification channels");case"silences":return(0,n.t)("nav.alerting-silences.title","Silences");case"groups":return(0,n.t)("nav.alerting-groups.title","Groups");case"alerting-admin":return(0,n.t)("nav.alerting-admin.title","Admin");case"cfg":return t.v.featureToggles.topnav?(0,n.t)("nav.config.title","Administration"):(0,n.t)("nav.config.titleBeforeTopnav","Configuration");case"datasources":return(0,n.t)("nav.datasources.title","Data sources");case"correlations":return(0,n.t)("nav.correlations.title","Correlations");case"users":return(0,n.t)("nav.users.title","Users");case"teams":return(0,n.t)("nav.teams.title","Teams");case"plugins":return(0,n.t)("nav.plugins.title","Plugins");case"org-settings":return t.v.featureToggles.topnav?(0,n.t)("nav.org-settings.title","Default preferences"):(0,n.t)("nav.org-settings.titleBeforeTopnav","Preferences");case"apikeys":return(0,n.t)("nav.api-keys.title","API keys");case"serviceaccounts":return(0,n.t)("nav.service-accounts.title","Service accounts");case"admin":return(0,n.t)("nav.admin.title","Server admin");case"support-bundles":return(0,n.t)("nav.support-bundles.title","Support bundles");case"global-users":return t.v.featureToggles.topnav?(0,n.t)("nav.global-users.title","Users"):(0,n.t)("nav.global-users.titleBeforeTopnav","Users");case"global-orgs":return(0,n.t)("nav.global-orgs.title","Organizations");case"server-settings":return(0,n.t)("nav.server-settings.title","Settings");case"storage":return(0,n.t)("nav.storage.title","Storage");case"upgrading":return(0,n.t)("nav.upgrading.title","Stats and license");case"monitoring":return(0,n.t)("nav.monitoring.title","Observability");case"apps":return(0,n.t)("nav.apps.title","Apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.title","Alerts & IRM");case"help":return(0,n.t)("nav.help.title","Help");case"profile/settings":return(0,n.t)("nav.profile/settings.title","Profile");case"profile/notifications":return(0,n.t)("nav.profile/notifications.title","Notification history");case"profile/password":return(0,n.t)("nav.profile/password.title","Change password");case"sign-out":return(0,n.t)("nav.sign-out.title","Sign out");case"search":return(0,n.t)("nav.search-dashboards.title","Search dashboards");default:return}}function s(i){switch(i){case"dashboards":return(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data");case"dashboards/browse":return t.v.featureToggles.topnav?(0,n.t)("nav.dashboards.subtitle","Create and manage dashboards to visualize your data"):void 0;case"manage-folder":return(0,n.t)("nav.manage-folder.subtitle","Manage folder dashboards and permissions");case"dashboards/playlists":return(0,n.t)("nav.playlists.subtitle","Groups of dashboards that are displayed in a sequence");case"dashboards/snapshots":return(0,n.t)("nav.snapshots.subtitle","Interactive, publically available, point-in-time representations of dashboards");case"dashboards/library-panels":return(0,n.t)("nav.library-panels.subtitle","Reusable panels that can be added to multiple dashboards");case"alerting":return(0,n.t)("nav.alerting.subtitle","Learn about problems in your systems moments after they occur");case"alert-list":return(0,n.t)("nav.alerting-list.subtitle","Rules that determine whether an alert will fire");case"receivers":return(0,n.t)("nav.alerting-receivers.subtitle","Choose how to notify your contact points when an alert instance fires");case"am-routes":return(0,n.t)("nav.alerting-am-routes.subtitle","Determine how alerts are routed to contact points");case"silences":return(0,n.t)("nav.alerting-silences.subtitle","Stop notifications from one or more alerting rules");case"groups":return(0,n.t)("nav.alerting-groups.subtitle","See grouped alerts from an Alertmanager instance");case"datasources":return(0,n.t)("nav.datasources.subtitle","Add and configure data sources");case"correlations":return(0,n.t)("nav.correlations.subtitle","Add and configure correlations");case"users":return(0,n.t)("nav.users.subtitle","Invite and assign roles to users");case"teams":return(0,n.t)("nav.teams.subtitle","Groups of users that have common dashboard and permission needs");case"plugins":return(0,n.t)("nav.plugins.subtitle","Extend the Grafana experience with plugins");case"org-settings":return(0,n.t)("nav.org-settings.subtitle","Manage preferences across an organization");case"apikeys":return(0,n.t)("nav.api-keys.subtitle","Manage and create API keys that are used to interact with Grafana HTTP APIs");case"serviceaccounts":return(0,n.t)("nav.service-accounts.subtitle","Use service accounts to run automated workloads in Grafana");case"global-users":return(0,n.t)("nav.global-users.subtitle","Manage users in Grafana");case"global-orgs":return(0,n.t)("nav.global-orgs.subtitle","Isolated instances of Grafana running on the same server");case"server-settings":return(0,n.t)("nav.server-settings.subtitle","View the settings defined in your Grafana config");case"storage":return(0,n.t)("nav.storage.subtitle","Manage file storage");case"support-bundles":return(0,n.t)("nav.support-bundles.subtitle","Download support bundles");case"admin":return t.v.featureToggles.topnav?(0,n.t)("nav.admin.subtitle","Manage server-wide settings and access to resources such as organizations, users, and licenses"):void 0;case"apps":return(0,n.t)("nav.apps.subtitle","App plugins that extend the Grafana experience");case"monitoring":return(0,n.t)("nav.monitoring.subtitle","Monitoring and infrastructure apps");case"alerts-and-incidents":return(0,n.t)("nav.alerts-and-incidents.subtitle","Alerting and incident management apps");default:return}}},45458:(Z,O,e)=>{"use strict";e.d(O,{Y:()=>f});var t=e(82897),n=e.n(t),l=e(68404),s=e(46967),i=e(24799);class f extends l.PureComponent{constructor(){super(...arguments),this.state={text:"",inputCorrected:!1},this.inputRef=l.createRef(),this.updateValue=()=>{const o=this.inputRef.current?.value;let m=!1,r="";const u=this.props.min,d=this.props.max;let g=o!==""?Number(o):void 0;g&&!Number.isNaN(g)&&(u!=null&&g<u?(r=u.toString(),m=!0):d!=null&&g>d?(r=d.toString(),m=!0):r=o??"",this.setState({text:r,inputCorrected:m})),m&&this.updateValueDebounced(),!Number.isNaN(g)&&g!==this.props.value&&this.props.onChange(g)},this.updateValueDebounced=(0,t.debounce)(this.updateValue,500),this.onChange=o=>{this.setState({text:o.currentTarget.value}),this.updateValueDebounced()},this.onKeyPress=o=>{o.key==="Enter"&&this.updateValue()}}componentDidMount(){this.setState({text:isNaN(this.props.value)?"":`${this.props.value}`})}componentDidUpdate(o){if(this.props.value!==o.value){const m=isNaN(this.props.value)?"":`${this.props.value}`;m!==this.state.text&&this.setState({text:m})}}renderInput(){return l.createElement(s.I,{type:"number",ref:this.inputRef,min:this.props.min,max:this.props.max,step:this.props.step,autoFocus:this.props.autoFocus,value:this.state.text,onChange:this.onChange,onBlur:this.updateValue,onKeyPress:this.onKeyPress,placeholder:this.props.placeholder,disabled:this.props.fieldDisabled,width:this.props.width})}render(){const{inputCorrected:o}=this.state;if(o){let m="",{min:r,max:u}=this.props;return u==null?r!=null&&(m=`< ${r}`):r!=null?m=`${r} < > ${u}`:m=`> ${u}`,l.createElement(i.g,{invalid:o,error:`Out of range ${m}`,validationMessageHorizontalOverflow:!0,style:{direction:"rtl"}},this.renderInput())}return this.renderInput()}}},13355:(Z,O,e)=>{"use strict";e.d(O,{B:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(90208),i=e(8180),f=e(98671);const c=({value:m,settings:r,onChange:u,details:d})=>{const g=(0,l.l4)(),p=(0,l.wW)(o);return n.createElement(s.zH,{color:m??"",onChange:u,enableNamedColors:r?.enableNamedColors!==!1},({ref:E,showColorPicker:h,hideColorPicker:a})=>n.createElement("div",{className:p.spot},n.createElement("div",{className:p.colorPicker},n.createElement(f.b,{ref:E,onClick:h,onMouseLeave:a,color:m?g.visualization.getColorByName(m):g.components.input.borderColor})),d&&n.createElement(n.Fragment,null,m?n.createElement("span",{className:p.colorText,onClick:h},m):n.createElement("span",{className:p.placeholderText,onClick:h},r?.placeholder??"Select color"),r?.isClearable&&m&&n.createElement(i.h,{name:"times",onClick:()=>u(void 0)}))))},o=m=>({spot:t.css`
      cursor: pointer;
      color: ${m.colors.text};
      background: ${m.components.input.background};
      padding: 3px;
      height: ${m.v1.spacing.formInputHeight}px;
      border: 1px solid ${m.components.input.borderColor};
      display: flex;
      flex-direction: row;
      align-items: center;
      align-content: flex-end;
      &:hover {
        border: 1px solid ${m.components.input.borderHover};
      }
    `,colorPicker:t.css`
      padding: 0 ${m.spacing(1)};
    `,colorText:t.css`
      flex-grow: 2;
    `,placeholderText:t.css`
      flex-grow: 2;
      color: ${m.colors.text.secondary};
    `})},12503:(Z,O,e)=>{"use strict";e.d(O,{w:()=>l});var t=e(68404),n=e(45458);const l=({value:s,onChange:i,item:f})=>{const{settings:c}=f,o=(0,t.useCallback)(m=>{i(c?.integer&&m!==void 0?Math.floor(m):m)},[i,c?.integer]);return t.createElement(n.Y,{value:s,min:c?.min,max:c?.max,step:c?.step,placeholder:c?.placeholder,onChange:o})}},52974:(Z,O,e)=>{"use strict";e.d(O,{u:()=>ht,l:()=>ft});var t=e(68404),n=e(35363),l=e(78798),s=e(14582),i=e(24177),f=e(8944),c=e(2594),o=e(52566),m=e(15448),r=e(9892),u=e(82897),d=e(58230),g=e(16514),p=e(46967),E=e(90208),h=e(8180),a=e(72648),v=e(31403),x=e(64353),y=e(7804);const C=[{value:i.H.Absolute,label:"Absolute",description:"Pick thresholds based on the absolute values"},{value:i.H.Percentage,label:"Percentage",description:"Pick threshold based on the percent between min/max"}];class P extends t.PureComponent{constructor(nt){super(nt),this.onAddThreshold=()=>{const{steps:Pe}=this.state;let Oe=0;Pe.length>1&&(Oe=Pe[Pe.length-1].value+10);let Le=g.O9.filter(Te=>!Pe.some(me=>me.color===Te))[1];Le||(Le="#CCCCCC");const Ye={value:Oe,color:Le,key:D++},be=[...Pe,Ye];(0,d.bP)(be),this.setState({steps:be},()=>{this.latestThresholdInputRef.current&&this.latestThresholdInputRef.current.focus(),this.onChange()})},this.onRemoveThreshold=Pe=>{const{steps:Oe}=this.state;Oe.length&&Pe.key!==Oe[0].key&&this.setState({steps:Oe.filter(Le=>Le.key!==Pe.key)},this.onChange)},this.onChangeThresholdValue=(Pe,Oe)=>{const Le=Pe.target.value.replace(/,/g,"."),Ye=parseFloat(Le),be=isNaN(Ye)?"":Ye,Te=this.state.steps.map(me=>(me.key===Oe.key&&(me={...me,value:be}),me));Te.length&&(Te[0].value=-1/0),(0,d.bP)(Te),this.setState({steps:Te})},this.onChangeThresholdColor=(Pe,Oe)=>{const{steps:Le}=this.state,Ye=Le.map(be=>(be.key===Pe.key&&(be={...be,color:Oe}),be));this.setState({steps:Ye},this.onChange)},this.onBlur=()=>{const Pe=[...this.state.steps];(0,d.bP)(Pe),this.setState({steps:Pe},this.onChange)},this.onChange=()=>{this.props.onChange(b(this.props.thresholds,this.state.steps))},this.onModeChanged=Pe=>{this.props.onChange({...this.props.thresholds,mode:Pe})};const le=M(nt.thresholds.steps);le[0].value=-1/0,this.state={steps:le},this.latestThresholdInputRef=t.createRef()}renderInput(nt,le,Pe){const Oe=this.props.thresholds.mode===i.H.Percentage,Le=`Threshold ${Pe+1}`;return isFinite(nt.value)?t.createElement(p.I,{type:"number",step:"0.0001",key:Oe.toString(),onChange:Ye=>this.onChangeThresholdValue(Ye,nt),value:nt.value,"aria-label":Le,ref:Pe===0?this.latestThresholdInputRef:null,onBlur:this.onBlur,prefix:t.createElement("div",{className:le.inputPrefix},t.createElement("div",{className:le.colorPicker},t.createElement(E.zH,{color:nt.color,onChange:Ye=>this.onChangeThresholdColor(nt,Ye),enableNamedColors:!0})),Oe&&t.createElement("div",{className:le.percentIcon},"%")),suffix:t.createElement(h.h,{"aria-label":`Remove ${Le}`,className:le.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveThreshold(nt)})}):t.createElement(p.I,{type:"text",value:"Base","aria-label":Le,disabled:!0,prefix:t.createElement("div",{className:le.colorPicker},t.createElement(E.zH,{color:nt.color,onChange:Ye=>this.onChangeThresholdColor(nt,Ye),enableNamedColors:!0}))})}render(){const{thresholds:nt}=this.props,{steps:le}=this.state;return t.createElement(a.Ni.Consumer,null,Pe=>{const Oe=R(Pe);return t.createElement("div",{className:Oe.wrapper},t.createElement(v.zx,{size:"sm",icon:"plus",onClick:()=>this.onAddThreshold(),variant:"secondary",className:Oe.addButton,fullWidth:!0},"Add threshold"),t.createElement("div",{className:Oe.thresholds},le.slice(0).reverse().map((Le,Ye)=>t.createElement("div",{className:Oe.item,key:`${Le.key}`},this.renderInput(Le,Oe,Ye)))),t.createElement("div",null,t.createElement(x._,{description:"Percentage means thresholds relative to min & max"},"Thresholds mode"),t.createElement(c.S,{options:C,onChange:this.onModeChanged,value:nt.mode})))})}}let D=100;function M(Re){return(!Re||Re.length===0)&&(Re=[{value:-1/0,color:"green"}]),Re.filter((nt,le)=>(0,u.isNumber)(nt.value)||le===0).map(nt=>({color:nt.color,value:nt.value===null?-1/0:nt.value,key:D++}))}function b(Re,nt){return{mode:Re.mode??i.H.Absolute,steps:nt.map(Pe=>{const{key:Oe,...Le}=Pe;return Le})}}const R=(0,y.B)(Re=>({wrapper:r.css`
      display: flex;
      flex-direction: column;
    `,thresholds:r.css`
      display: flex;
      flex-direction: column;
      margin-bottom: ${Re.spacing(2)};
    `,item:r.css`
      margin-bottom: ${Re.spacing(1)};

      &:last-child {
        margin-bottom: 0;
      }
    `,colorPicker:r.css`
      padding: 0 ${Re.spacing(1)};
    `,addButton:r.css`
      margin-bottom: ${Re.spacing(1)};
    `,percentIcon:r.css`
      font-size: ${Re.typography.bodySmall.fontSize};
      color: ${Re.colors.text.secondary};
    `,inputPrefix:r.css`
      display: flex;
      align-items: center;
    `,trashIcon:r.css`
      color: ${Re.colors.text.secondary};
      cursor: pointer;
      margin-right: 0;

      &:hover {
        color: ${Re.colors.text};
      }
    `}));class B extends t.PureComponent{constructor(nt){super(nt)}render(){const{onChange:nt}=this.props;let le=this.props.value;return le||(le={mode:i.H.Percentage,steps:[]}),t.createElement(P,{thresholds:le,onChange:nt})}}var w=e(26031),A=e(52081),I=e(39904),F=e(35029),K=e(92484),W=e(26786),U=e(19677),N=e(15670),S=e(53217);function Y({mapping:Re,index:nt,onChange:le,onRemove:Pe,onDuplicate:Oe,showIconPicker:Le}){const{key:Ye,result:be,id:Te}=Re,me=(0,a.wW)(Q),he=(0,t.useRef)(null),De=(0,t.useCallback)(Dt=>{const wt={...Re,result:{...Re.result}};Dt(wt),le(nt,wt)},[Re,nt,le]);(0,t.useEffect)(()=>{he.current&&Re.isNew&&(he.current.focus(),De(Dt=>{Dt.isNew=!1}))},[Re,he,De]);const $e=Dt=>{De(wt=>{wt.result.color=Dt})},ke=()=>{De(Dt=>{Dt.result.color=void 0})},tt=Dt=>{De(wt=>{wt.result.icon=Dt})},Ge=()=>{De(Dt=>{Dt.result.icon=void 0})},dt=Dt=>{De(wt=>{wt.key=Dt.currentTarget.value})},pt=Dt=>{De(wt=>{wt.result.text=Dt.currentTarget.value})},Ke=Dt=>{De(wt=>{wt.from=parseFloat(Dt.currentTarget.value)})},je=Dt=>{De(wt=>{wt.to=parseFloat(Dt.currentTarget.value)})},ot=Dt=>{De(wt=>{wt.pattern=Dt.currentTarget.value})},at=Dt=>{De(wt=>{wt.specialMatch=Dt.value})},xt=[{label:"Null",value:w.e.Null,description:"Matches null and undefined values"},{label:"NaN",value:w.e[NaN],description:"Matches against Number.NaN (not a number)"},{label:"Null + NaN",value:w.e.NullAndNaN,description:"Matches null, undefined and NaN"},{label:"True",value:w.e.True,description:"Boolean true values"},{label:"False",value:w.e.False,description:"Boolean false values"},{label:"Empty",value:w.e.Empty,description:"Empty string"}];return t.createElement(U._l,{key:Te,draggableId:Te,index:nt},Dt=>t.createElement("tr",{className:me.dragRow,ref:Dt.innerRef,...Dt.draggableProps},t.createElement("td",null,t.createElement("div",{className:me.dragHandle,...Dt.dragHandleProps},t.createElement(I.J,{name:"draggabledots",size:"lg"}))),t.createElement("td",{className:me.typeColumn},Re.type),t.createElement("td",null,Re.type===w.H.ValueToText&&t.createElement(p.I,{ref:he,type:"text",value:Ye??"",onChange:dt,placeholder:"Exact value to match"}),Re.type===w.H.RangeToText&&t.createElement("div",{className:me.rangeInputWrapper},t.createElement(p.I,{type:"number",value:Re.from??"",placeholder:"Range start",onChange:Ke,prefix:"From"}),t.createElement(p.I,{type:"number",value:Re.to??"",placeholder:"Range end",onChange:je,prefix:"To"})),Re.type===w.H.RegexToText&&t.createElement(p.I,{type:"text",value:Re.pattern??"",placeholder:"Regular expression",onChange:ot}),Re.type===w.H.SpecialValue&&t.createElement(S.Ph,{value:xt.find(wt=>wt.value===Re.specialMatch),options:xt,onChange:at})),t.createElement("td",null,t.createElement(p.I,{type:"text",value:be.text??"",onChange:pt,placeholder:"Optional display text"})),t.createElement("td",{className:me.textAlignCenter},be.color&&t.createElement(A.Lh,{spacing:"sm",justify:"center"},t.createElement(E.zH,{color:be.color,onChange:$e,enableNamedColors:!0}),t.createElement(h.h,{name:"times",onClick:ke,tooltip:"Remove color",tooltipPlacement:"top"})),!be.color&&t.createElement(E.zH,{color:"gray",onChange:$e,enableNamedColors:!0},wt=>t.createElement(v.zx,{variant:"primary",fill:"text",onClick:wt.showColorPicker,ref:wt.ref,size:"sm"},"Set color"))),Le&&t.createElement("td",{className:me.textAlignCenter},t.createElement(A.Lh,{spacing:"sm",justify:"center"},t.createElement(W.E,{onChange:tt,onClear:Ge,value:be.icon,size:K.zc.SMALL,folderName:K.QS.Icon,mediaType:K.DD.Icon,color:be.color}),be.icon&&t.createElement(h.h,{name:"times",onClick:Ge,tooltip:"Remove icon",tooltipPlacement:"top"}))),t.createElement("td",{className:me.textAlignCenter},t.createElement(A.Lh,{spacing:"sm"},t.createElement(h.h,{name:"copy",onClick:()=>Oe(nt),"data-testid":"duplicate-value-mapping"}),t.createElement(h.h,{name:"trash-alt",onClick:()=>Pe(nt),"data-testid":"remove-value-mapping"})))))}const Q=Re=>({dragRow:(0,r.css)({position:"relative"}),dragHandle:(0,r.css)({cursor:"grab","&:focus-visible&:after":{bottom:0,content:'""',left:0,position:"absolute",right:0,top:0,outline:`2px solid ${Re.colors.primary.main}`,outlineOffset:"-2px"}}),rangeInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:Re.spacing(2)}}),regexInputWrapper:(0,r.css)({display:"flex","> div:first-child":{marginRight:Re.spacing(2)}}),typeColumn:(0,r.css)({textTransform:"capitalize",textAlign:"center",width:"1%"}),textAlignCenter:(0,r.css)({textAlign:"center"})});function z({value:Re,onChange:nt,onClose:le,showIconPicker:Pe}){const Oe=(0,a.wW)(G),[Le,Ye]=(0,t.useState)([]);(0,t.useEffect)(()=>{Ye(re(Re))},[Re]);const be=tt=>{if(!Re||!tt.destination)return;const Ge=[...Le],dt=Ge[tt.source.index];Ge.splice(tt.source.index,1),Ge.splice(tt.destination.index,0,dt),Ye(Ge)},Te=(tt,Ge)=>{const dt=[...Le];dt.splice(tt,1,Ge),Ye(dt)},me=tt=>{const Ge=[...Le];Ge.splice(tt,1),Ye(Ge)},he=[{label:"Value",value:w.H.ValueToText,description:"Match a specific text value"},{label:"Range",value:w.H.RangeToText,description:"Match a numerical range of values"},{label:"Regex",value:w.H.RegexToText,description:"Match a regular expression with replacement"},{label:"Special",value:w.H.SpecialValue,description:"Match on null, NaN, boolean and empty values"}],De=tt=>{Ye([...Le,j({type:tt.value,result:{},isNew:!0})])},$e=tt=>{const Ge=de(Le[tt]),dt=[...Le];dt.splice(tt,0,{...Ge});for(let pt=tt;pt<Le.length;pt++)dt[pt].result.index=pt;Ye(dt)},ke=()=>{nt(ge(Le)),le()};return(0,t.useEffect)(()=>{Re?.length||De({value:w.H.ValueToText})},[]),t.createElement(t.Fragment,null,t.createElement("div",{className:Oe.tableWrap},t.createElement("table",{className:Oe.editTable},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",{style:{width:"1%"}}),t.createElement("th",{style:{width:"40%",textAlign:"left"},colSpan:2},"Condition"),t.createElement("th",{style:{textAlign:"left"}},"Display text"),t.createElement("th",{style:{width:"10%"}},"Color"),Pe&&t.createElement("th",{style:{width:"10%"}},"Icon"),t.createElement("th",{style:{width:"1%"}}))),t.createElement(U.Z5,{onDragEnd:be},t.createElement(U.bK,{droppableId:"sortable-field-mappings",direction:"vertical"},tt=>t.createElement("tbody",{ref:tt.innerRef,...tt.droppableProps},Le.map((Ge,dt)=>t.createElement(Y,{key:Ge.id,mapping:Ge,index:dt,onChange:Te,onRemove:me,onDuplicate:$e,showIconPicker:Pe})),tt.placeholder))))),t.createElement(F.u.ButtonRow,{leftItems:t.createElement(N.b,{label:"Add a new mapping",variant:"secondary",size:"md",icon:"plus",menuPlacement:"auto",minWidth:40,options:he,onChange:De})},t.createElement(v.zx,{variant:"secondary",fill:"outline",onClick:le},"Cancel"),t.createElement(v.zx,{variant:"primary",onClick:ke},"Update")))}const G=Re=>({tableWrap:r.css`
    max-height: calc(80vh - 170px);
    min-height: 40px;
    overflow: auto;
  `,editTable:(0,r.css)({width:"100%",marginBottom:Re.spacing(2),"thead th":{textAlign:"center"},"tbody tr:hover":{background:Re.colors.action.hover}," th, td":{padding:Re.spacing(1)}})});function k(){return(0,u.uniqueId)("mapping-")}function j(Re){return{type:w.H.ValueToText,result:{},id:k(),...Re}}function de(Re){return{...j(Re),id:k()}}function ge(Re){const nt=[],le={type:w.H.ValueToText,options:{}};return Re.forEach((Pe,Oe)=>{const Le={...Pe.result,index:Oe};switch((!Le.text||Le.text.trim().length===0)&&(Le.text=void 0),Pe.type){case w.H.ValueToText:Pe.key!=null&&(le.options[Pe.key]=Le);break;case w.H.RangeToText:Pe.from!=null&&Pe.to!=null&&nt.push({type:Pe.type,options:{from:Pe.from,to:Pe.to,result:Le}});break;case w.H.RegexToText:Pe.pattern!=null&&nt.push({type:Pe.type,options:{pattern:Pe.pattern,result:Le}});break;case w.H.SpecialValue:nt.push({type:Pe.type,options:{match:Pe.specialMatch,result:Le}})}}),Object.keys(le.options).length>0&&nt.unshift(le),nt}function re(Re){const nt=[];if(Re)for(const le of Re)switch(le.type){case w.H.ValueToText:for(const Pe of Object.keys(le.options))nt.push(j({type:le.type,result:le.options[Pe],key:Pe}));break;case w.H.RangeToText:nt.push(j({type:le.type,result:le.options.result,from:le.options.from??0,to:le.options.to??0}));break;case w.H.RegexToText:nt.push(j({type:le.type,result:le.options.result,pattern:le.options.pattern}));break;case w.H.SpecialValue:nt.push(j({type:le.type,result:le.options.result,specialMatch:le.options.match??w.e.Null}))}return nt.sort((le,Pe)=>(le.result.index??0)>(Pe.result.index??0)?1:-1),nt}const ce=t.memo(Re=>{const{value:nt,onChange:le,item:Pe}=Re,Oe=(0,a.wW)(ie),Le=Pe.settings?.icon,[Ye,be]=(0,t.useState)(!1),Te=(0,t.useCallback)(()=>{be(!1)},[be]),me=(0,t.useMemo)(()=>re(nt),[nt]),he=(0,t.useCallback)(($e,ke)=>{me[ke].result.color=$e,le(ge(me))},[me,le]),De=(0,t.useCallback)(($e,ke)=>{me[ke].result.icon=$e,le(ge(me))},[me,le]);return t.createElement(A.wc,null,t.createElement("table",{className:Oe.compactTable},t.createElement("tbody",null,me.map(($e,ke)=>t.createElement("tr",{key:ke.toString()},t.createElement("td",null,$e.type===w.H.ValueToText&&$e.key,$e.type===w.H.RangeToText&&t.createElement("span",null,"[",$e.from," - ",$e.to,"]"),$e.type===w.H.RegexToText&&$e.pattern,$e.type===w.H.SpecialValue&&$e.specialMatch),t.createElement("td",null,t.createElement(I.J,{name:"arrow-right"})),t.createElement("td",null,$e.result.text),$e.result.color&&t.createElement("td",null,t.createElement(E.zH,{color:$e.result.color,onChange:tt=>he(tt,ke),enableNamedColors:!0})),Le&&$e.result.icon&&t.createElement("td",{"data-testid":"iconPicker"},t.createElement(W.E,{onChange:tt=>De(tt,ke),value:$e.result.icon,size:K.zc.SMALL,folderName:K.QS.Icon,mediaType:K.DD.Icon,color:$e.result.color})))))),t.createElement(v.zx,{variant:"secondary",size:"sm",fullWidth:!0,onClick:()=>be(!0)},me.length>0&&t.createElement("span",null,"Edit value mappings"),me.length===0&&t.createElement("span",null,"Add value mappings")),t.createElement(F.u,{isOpen:Ye,title:"Value mappings",onDismiss:Te,className:Oe.modal,closeOnBackdropClick:!1},t.createElement(z,{value:nt,onChange:le,onClose:Te,showIconPicker:Le})))});ce.displayName="ValueMappingsEditor";const ie=Re=>({modal:(0,r.css)({width:"980px"}),compactTable:(0,r.css)({width:"100%","tbody td":{padding:Re.spacing(.5)}})});var fe=e(99661);const Ce=({value:Re,onChange:nt,item:le})=>{const{placeholder:Pe,isClearable:Oe}=le?.settings??{},Le=(0,t.useCallback)(Ye=>{nt(Ye?.value?.uid)},[nt]);return t.createElement(fe.o,{isClearable:Oe,defaultOptions:!0,onChange:Le,placeholder:Pe,value:Re})};var ee=e(13355),ne=e(425),X=e(66926),te=e(24799);const ae=({value:Re,onChange:nt,item:le,id:Pe})=>{const Oe=(0,a.l4)(),Le=(0,a.wW)(ve),Ye=(0,ne.QY)(Re?.mode),Te=(le.settings?.byValueSupport?ne.WO.list():ne.WO.list().filter(ke=>!ke.isByValue)).map(ke=>{let tt=ke.isByValue?" (by value)":"";return{value:ke.id,label:`${ke.name}${tt}`,description:ke.description,isContinuous:ke.isContinuous,isByValue:ke.isByValue,component(){return t.createElement(_,{mode:ke,theme:Oe})}}}),me=ke=>{nt({...Re,mode:ke.value})},he=ke=>{nt({...Re,mode:$e,fixedColor:ke})},De=ke=>{nt({...Re,mode:$e,seriesBy:ke})},$e=Re?.mode??X.S.Thresholds;if($e===X.S.Fixed)return t.createElement("div",{className:Le.group},t.createElement(S.Ph,{minMenuHeight:200,options:Te,value:$e,onChange:me,className:Le.select,inputId:Pe}),t.createElement(ee.B,{value:Re?.fixedColor,onChange:he}));if(le.settings?.bySeriesSupport&&Ye.isByValue){const ke=[{label:"Last",value:"last"},{label:"Min",value:"min"},{label:"Max",value:"max"}];return t.createElement(t.Fragment,null,t.createElement("div",{style:{marginBottom:Oe.spacing(2)}},t.createElement(S.Ph,{minMenuHeight:200,options:Te,value:$e,onChange:me,inputId:Pe})),t.createElement(te.g,{label:"Color series by"},t.createElement(c.S,{value:Re?.seriesBy??"last",options:ke,onChange:De})))}return t.createElement(S.Ph,{minMenuHeight:200,options:Te,value:$e,onChange:me,inputId:Pe})},_=({mode:Re,theme:nt})=>{if(!Re.getColors)return null;const le=Re.getColors(nt).map(nt.visualization.getColorByName),Pe={height:"8px",width:"100%",margin:"2px 0",borderRadius:"3px",opacity:1};if(Re.isContinuous)Pe.background=`linear-gradient(90deg, ${le.join(",")})`;else{let Oe="",Le="";for(let Ye=0;Ye<le.length;Ye++){const be=le[Ye];if(Oe==="")Oe=`linear-gradient(90deg, ${be} 0%`;else{const me=Ye/(le.length-1)*100;Oe+=`, ${Le} ${me}%, ${be} ${me}%`}Le=be}Pe.background=Oe}return t.createElement("div",{style:Pe})},ve=Re=>({group:r.css`
      display: flex;
    `,select:r.css`
      margin-right: 8px;
      flex-grow: 1;
    `});var Ve=e(28151),it=e(68037);const rt=({value:Re,onChange:nt,context:le})=>t.createElement(it.d,{links:Re,onChange:nt,data:le.data,getSuggestions:()=>le.getSuggestions?le.getSuggestions(Ve.o3.Values):[]});class pe extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:nt}=this.props,{settings:le}=nt;let Pe=nt.settings?.options||[];le?.getOptions&&(Pe=await le.getOptions(this.props.context)),this.state.options!==Pe&&this.setState({isLoading:!1,options:Pe})}}componentDidMount(){this.updateOptions()}componentDidUpdate(nt){const le=nt.item?.settings,Pe=this.props.item?.settings;if(le!==Pe)this.updateOptions();else if(Pe?.getOptions){const Oe=nt.context?.data,Le=this.props.context?.data;Oe!==Le&&this.updateOptions()}}render(){const{options:nt,isLoading:le}=this.state,{value:Pe,onChange:Oe,item:Le}=this.props,{settings:Ye}=Le;return t.createElement(S.NU,{isLoading:le,value:Pe,defaultValue:Pe,allowCustomValue:Ye?.allowCustomValue,onChange:be=>{Oe(be.map(Te=>Te.value).flatMap(Te=>Te!==void 0?[Te]:[]))},options:nt})}}var Ie=e(12503);class We extends t.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0,options:[]},this.updateOptions=async()=>{const{item:nt}=this.props,{settings:le}=nt;let Pe=nt.settings?.options||[];le?.getOptions&&(Pe=await le.getOptions(this.props.context)),this.state.options!==Pe&&this.setState({isLoading:!1,options:Pe})}}componentDidMount(){this.updateOptions()}componentDidUpdate(nt){const le=nt.item?.settings,Pe=this.props.item?.settings;if(le!==Pe)this.updateOptions();else if(Pe?.getOptions){const Oe=nt.context?.data,Le=this.props.context?.data;Oe!==Le&&this.updateOptions()}}render(){const{options:nt,isLoading:le}=this.state,{value:Pe,onChange:Oe,item:Le}=this.props,{settings:Ye}=Le;let be=nt.find(Te=>Te.value===Pe);return!be&&Pe&&(be={label:`${Pe}`,value:Pe}),t.createElement(S.Ph,{isLoading:le,value:be,defaultValue:Pe,allowCustomValue:Ye?.allowCustomValue,isClearable:Ye?.isClearable,onChange:Te=>Oe(Te?.value),options:nt})}}var Je=e(74912),He=e(71294);const Ae=({value:Re,onChange:nt,item:le,id:Pe})=>t.createElement(He.m,{stats:Re,onChange:nt,allowMultiple:!!le.settings?.allowMultiple,defaultStat:le.settings?.defaultStat,inputId:Pe});var et=e(37565),_e=e(35645);class Se extends t.PureComponent{constructor(){super(...arguments),this.state={showAdd:!1},this.onRemoveString=nt=>{const{value:le,onChange:Pe}=this.props,Oe=[...le];Oe.splice(nt,1),Pe(Oe)},this.onValueChange=(nt,le)=>{if("key"in nt&&nt.key!=="Enter")return;const{value:Pe,onChange:Oe}=this.props,Le=nt.currentTarget.value.trim();if(le<0){Le&&(nt.currentTarget.value="",Oe([...Pe,Le])),this.setState({showAdd:!1});return}if(!Le)return this.onRemoveString(le);const Ye=[...Pe];Ye[le]=Le,Oe(Ye)}}render(){const{value:nt,item:le}=this.props,{showAdd:Pe}=this.state,Oe=Fe(_e.v.theme2),Le=le.settings?.placeholder||"Add text";return t.createElement("div",null,nt.map((Ye,be)=>t.createElement(p.I,{className:Oe.textInput,key:`${be}/${Ye}`,defaultValue:Ye||"",onBlur:Te=>this.onValueChange(Te,be),onKeyDown:Te=>this.onValueChange(Te,be),suffix:t.createElement(I.J,{className:Oe.trashIcon,name:"trash-alt",onClick:()=>this.onRemoveString(be)})})),Pe?t.createElement(p.I,{autoFocus:!0,className:Oe.textInput,placeholder:Le,defaultValue:"",onBlur:Ye=>this.onValueChange(Ye,-1),onKeyDown:Ye=>this.onValueChange(Ye,-1),suffix:t.createElement(I.J,{name:"plus-circle"})}):t.createElement(v.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:()=>this.setState({showAdd:!0})},Le))}}const Fe=(0,y.B)(Re=>({textInput:r.css`
      margin-bottom: 5px;
      &:hover {
        border: 1px solid ${Re.components.input.borderHover};
      }
    `,trashIcon:r.css`
      color: ${Re.colors.text.secondary};
      cursor: pointer;

      &:hover {
        color: ${Re.colors.text};
      }
    `}));var Xe=e(61227);function Qe({value:Re,onChange:nt,item:le}){const Pe=(0,a.wW)(ct);return le?.settings?.isClearable&&Re!=null?t.createElement("div",{className:Pe.wrapper},t.createElement("span",{className:Pe.first},t.createElement(Xe.n,{value:Re,onChange:nt})),t.createElement(h.h,{ariaLabel:"clear unit selection",name:"times",onClick:()=>nt(void 0)})):t.createElement(Xe.n,{value:Re,onChange:nt})}const ct=Re=>({wrapper:r.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:r.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),ht=()=>{const Re={id:"number",name:"Number",description:"Allows numeric values input",editor:Ie.w},nt={id:"slider",name:"Slider",description:"Allows numeric values input",editor:Je.p},le={id:"text",name:"Text",description:"Allows string values input",editor:et.A},Pe={id:"strings",name:"String array",description:"An array of strings",editor:Se},Oe={id:"boolean",name:"Boolean",description:"Allows boolean values input",editor(Ke){const{id:je,...ot}=Ke;return t.createElement(f.r,{...ot,onChange:at=>Ke.onChange(at.currentTarget.checked)})}},Le={id:"select",name:"Select",description:"Allows option selection",editor:We},Ye={id:"multi-select",name:"Multi select",description:"Allows for multiple option selection",editor:pe},be={id:"radio",name:"Radio",description:"Allows option selection",editor(Ke){return t.createElement(c.S,{...Ke,options:Ke.item.settings?.options})}},Te={id:"unit",name:"Unit",description:"Allows unit input",editor:Qe},me={id:"color",name:"Color",description:"Allows color selection",editor(Ke){return t.createElement(ee.B,{value:Ke.value,onChange:Ke.onChange,settings:Ke.item.settings,details:!0})}},he={id:"fieldColor",name:"Field Color",description:"Field color selection",editor:ae},De={id:"links",name:"Links",description:"Allows defining data links",editor:rt},$e={id:"stats-picker",name:"Stats Picker",editor:Ae,description:""},ke={id:"timezone",name:"Time zone",description:"Time zone selection",editor:o.O},tt={id:"field-name",name:"Field name",description:"Allows selecting a field name from a data frame",editor:m.b};return[le,Re,nt,Oe,be,Le,Te,De,$e,Pe,ke,he,me,Ye,tt,{id:"dashboard-uid",name:"Dashboard",description:"Select dashboard",editor:Ce},{id:"mappings",name:"Mappings",description:"Allows defining value mappings",editor:ce},{id:"thresholds",name:"Thresholds",description:"Allows defining thresholds",editor:B}]},ft=()=>{const Re=["Standard options"],nt={id:"displayName",path:"displayName",name:"Display name",description:"Change the field or series name",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:l.W0,settings:{placeholder:"none",expandTemplateVars:!0},shouldApply:()=>!0,category:Re},le={id:"unit",path:"unit",name:"Unit",description:"",editor:n.S.get("unit").editor,override:n.S.get("unit").editor,process:l.op,settings:{placeholder:"none"},shouldApply:()=>!0,category:Re},Pe={id:"min",path:"min",name:"Min",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:l.Oh,settings:{placeholder:"auto"},shouldApply:$e=>$e.type===s.fS.number,category:Re},Oe={id:"max",path:"max",name:"Max",description:"Leave empty to calculate based on all values",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:l.Oh,settings:{placeholder:"auto"},shouldApply:$e=>$e.type===s.fS.number,category:Re},Le={id:"decimals",path:"decimals",name:"Decimals",editor:n.S.get("number").editor,override:n.S.get("number").editor,process:l.Oh,settings:{placeholder:"auto",min:0,max:15,integer:!0},shouldApply:$e=>$e.type===s.fS.number,category:Re},Ye={id:"noValue",path:"noValue",name:"No value",description:"What to show when there is no value",editor:n.S.get("text").editor,override:n.S.get("text").editor,process:l.op,settings:{placeholder:"-"},shouldApply:()=>!0,category:Re},be={id:"links",path:"links",name:"Data links",editor:n.S.get("links").editor,override:n.S.get("links").editor,process:l.NN,settings:{placeholder:"-"},shouldApply:()=>!0,category:["Data links"],getItemsCount:$e=>$e?$e.length:0},Te={id:"color",path:"color",name:"Color scheme",editor:n.S.get("fieldColor").editor,override:n.S.get("fieldColor").editor,process:l.kG,shouldApply:()=>!0,settings:{byValueSupport:!0,preferThresholdsMode:!0},category:Re},me={id:"mappings",path:"mappings",name:"Value mappings",description:"Modify the display text based on input value",editor:n.S.get("mappings").editor,override:n.S.get("mappings").editor,process:l.uj,settings:{},defaultValue:[],shouldApply:$e=>$e.type!==s.fS.time,category:["Value mappings"],getItemsCount:$e=>$e?$e.length:0},he={id:"thresholds",path:"thresholds",name:"Thresholds",editor:n.S.get("thresholds").editor,override:n.S.get("thresholds").editor,process:l.ZN,settings:{},defaultValue:{mode:i.H.Absolute,steps:[{value:-1/0,color:"green"},{value:80,color:"red"}]},shouldApply:()=>!0,category:["Thresholds"],getItemsCount:$e=>$e?$e.steps.length:0},De={id:"filterable",path:"filterable",name:"Ad-hoc filterable",hideFromDefaults:!0,editor:n.S.get("boolean").editor,override:n.S.get("boolean").editor,process:l.W4,shouldApply:()=>!0,settings:{},category:Re};return[le,Pe,Oe,Le,nt,Te,Ye,be,me,he,De]}},74912:(Z,O,e)=>{"use strict";e.d(O,{p:()=>o});var t=e(9892),n=e(39341),l=e(63835),s=e(68404),i=e(72648),f=e(29571),c=e(45458);const o=({value:u,onChange:d,item:g})=>{const p=(0,s.useRef)(null),{settings:E}=g,h=E?.min||0,a=E?.max||100,v=E?.step,x=E?.marks||{[h]:h,[a]:a},y=E?.included,C=E?.ariaLabelForHandle,P=75,D=!0,M=(0,i.l4)(),[b,R]=(0,s.useState)(u??h),[B,w]=(0,s.useState)(P);(0,s.useEffect)(()=>{u!=null&&u!==b&&R(u)},[u,b]),(0,s.useEffect)(()=>{const U=getComputedStyle(p.current),N=U.getPropertyValue("font-weight")||"normal",S=U.getPropertyValue("font-size")||"16px",Y=U.getPropertyValue("font-family")||"Arial",Q="0",z=4,G=8,k=Math.max((a+(v||0)).toString().length,(a-(v||0)).toString().length)+z,j=Q.repeat(k),de=m(j,`${N} ${S} ${Y}`);de&&w(de+G*2)},[a,v]);const A=(0,s.useCallback)(U=>{const N=typeof U=="number"?U:U[0];R(N),d&&d(N)},[R,d]),I=(0,s.useCallback)(U=>{let N=U;(Number.isNaN(N)||!N)&&(N=0),R(N),d&&d(N)},[d]),F=(0,f.W)(M,D,Boolean(x)),K=r(M,B),W=D?[]:[F.sliderInputVertical];return s.createElement("div",{className:(0,t.cx)(F.container,F.slider)},s.createElement(n.Global,{styles:F.slider}),s.createElement("label",{className:(0,t.cx)(F.sliderInput,...W)},s.createElement(l.Z,{min:h,max:a,step:v,defaultValue:u,value:b,onChange:A,vertical:!D,reverse:!1,ariaLabelForHandle:C,marks:x,included:y}),s.createElement("span",{className:K.numberInputWrapper,ref:p},s.createElement(c.Y,{value:b,onChange:I,max:a,min:h,step:v}))))};function m(u,d){const p=document.createElement("canvas").getContext("2d");return p?(p.font=d,p.measureText(u).width):null}const r=(u,d)=>({numberInputWrapper:t.css`
      margin-left: 10px;
      max-height: 32px;
      max-width: ${d}px;
      min-width: ${d}px;
      overflow: visible;
      width: 100%;
    `})},37565:(Z,O,e)=>{"use strict";e.d(O,{A:()=>s});var t=e(68404),n=e(97379),l=e(46967);const s=({value:i,onChange:f,item:c,suffix:o})=>{const m=c.settings?.useTextarea?n.K:l.I,r=(0,t.useCallback)(u=>{let d=i??"";"key"in u?u.key==="Enter"&&!c.settings?.useTextarea&&(d=u.currentTarget.value.trim()):d=u.currentTarget.value.trim(),d!==i&&f(d===""?void 0:d)},[i,c.settings?.useTextarea,f]);return t.createElement(m,{placeholder:c.settings?.placeholder,defaultValue:i||"",rows:c.settings?.useTextarea&&c.settings.rows||5,onBlur:r,onKeyDown:r,suffix:o})}},79396:(Z,O,e)=>{"use strict";e.d(O,{T:()=>a});var t=e(9892),n=e(68404),l=e(24844),s=e(35645),i=e(72648),f=e(68226),c=e(34177),o=e(25337),m=e(91289),r=e(79008);function u({children:x}){return n.createElement(n.Fragment,null,x)}var d=e(2555);const g=({isLoading:x,children:y,className:C})=>n.createElement("div",{className:(0,t.cx)("page-container","page-body",C)},x?n.createElement(d.Z,null):y);var p=e(83233),E=e(22174);const h=({navId:x,navModel:y,pageNav:C,children:P,className:D,toolbar:M,scrollRef:b,scrollTop:R,layout:B=l.Qz.Standard,renderTitle:w,subTitle:A,actions:I,info:F,...K})=>{const W=(0,i.wW)(v),U=(0,p.P)(x,y),{chrome:N}=(0,c.p)();(0,E.T)(U,C);const S=C??U?.main;return(0,n.useEffect)(()=>{U?N.update({sectionNav:U.node}):N.update({})},[U,N]),n.createElement("div",{className:(0,t.cx)(W.wrapper,D),...K},B===l.Qz.Standard&&n.createElement(f.$,{autoHeightMin:"100%",scrollTop:R,scrollRefCallback:b},n.createElement("div",{className:(0,t.cx)("page-scrollbar-content",D)},S&&n.createElement(m.m,{actions:I,info:F,navItem:S,renderTitle:w,subTitle:A}),P,n.createElement(o.$_,null))),B===l.Qz.Canvas&&n.createElement(n.Fragment,null,M,n.createElement("div",{className:W.scrollWrapper},n.createElement(f.$,{autoHeightMin:"100%",scrollTop:R,scrollRefCallback:b},n.createElement("div",{className:(0,t.cx)(W.content,!M&&W.contentWithoutToolbar)},P)))),B===l.Qz.Custom&&n.createElement(n.Fragment,null,M,P))};h.Contents=g,h.OldNavOnly=u;const a=s.v.featureToggles.topnav?r.T:h,v=x=>({wrapper:(0,t.css)({width:"100%",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),scrollWrapper:(0,t.css)({width:"100%",flexGrow:1,minHeight:0,display:"flex"}),content:(0,t.css)({display:"flex",flexDirection:"column",padding:x.spacing(0,2,2,2),flexBasis:"100%",flexGrow:1}),contentWithoutToolbar:(0,t.css)({padding:x.spacing(2)})})},83233:(Z,O,e)=>{"use strict";e.d(O,{P:()=>i});var t=e(90158),n=e(86245),l=e(3153),s=e(81168);function i(c,o){if(o)return o;if(c&&l.h)return(0,s.useSelector)((0,t.P1)(f,m=>(0,n.ht)(m,c??"home")))}function f(c){return c.navIndex}},22174:(Z,O,e)=>{"use strict";e.d(O,{T:()=>f});var t=e(68404),n=e(14393),l=e(81168),s=e(36578),i=e(67345);function f(c,o){const m=(0,l.useSelector)(r=>r.navIndex)?.[n.Qz];(0,t.useEffect)(()=>{const r=(c?.node!==c?.main?c?.node:c?.main)??{text:"Grafana"},u=(0,i.t)(r,o,m).map(d=>d.text).reverse();u[u.length-1]=s.c.AppTitle,document.title=u.join(" - ")},[m,c,o])}},91289:(Z,O,e)=>{"use strict";e.d(O,{m:()=>g});var t=e(9892),n=e(68404),l=e(72142),s=e(79841),i=e(72648),f=e(40419),c=e(39904),o=e(79860),m=e(9591),r=e(73194);const u=({children:h,customCss:a})=>{if(!h||h.length===0)return null;const v=h.find(x=>x.active===!0);return n.createElement("div",{className:`gf-form-select-wrapper width-20 ${a}`},n.createElement("div",{className:"dropdown"},n.createElement("button",{type:"button",className:"gf-form-input dropdown-toggle","data-toggle":"dropdown",style:{textAlign:"left"}},v?.text),n.createElement("ul",{role:"menu",className:"dropdown-menu dropdown-menu--menu"},h.map(x=>x.hideFromTabs?null:n.createElement(o.u,{key:x.url,iconClassName:x.icon,text:x.text,href:x.url})))))},d=({children:h})=>!h||h.length===0?null:n.createElement("nav",null,n.createElement(u,{customCss:"page-header__select-nav"},h),n.createElement(l.J,{className:"page-header__tabs",hideBorder:!0},h.map((a,v)=>!a.hideFromTabs&&n.createElement(s.O,{label:a.text,active:a.active,key:`${a.url}-${v}`,icon:a.icon,href:a.url,suffix:a.tabSuffix})))),g=({navItem:h,renderTitle:a,actions:v,info:x,subTitle:y})=>{const C=(0,i.wW)(E);if(!h)return null;const P=D=>{const M=D.icon==="grafana"?12:14,b=D.icon&&(0,f.toIconName)(D.icon),R=y??D.subTitle;return n.createElement("div",{className:"page-header__inner"},n.createElement("span",{className:"page-header__logo"},b&&n.createElement(c.J,{name:b,size:"xxxl",style:{marginTop:M}}),D.img&&n.createElement("img",{className:"page-header__img",src:D.img,alt:""})),n.createElement("div",{className:(0,t.cx)("page-header__info-block",C.headerText)},a?a(D.text):p(D.text,D.breadcrumbs??[],D.highlightText),x&&n.createElement(m.S,{info:x}),R&&n.createElement("div",{className:"page-header__sub-title"},R),v&&n.createElement("div",{className:C.actions},v)))};return n.createElement("div",{className:C.headerCanvas},n.createElement("div",{className:"page-container"},n.createElement("div",{className:"page-header"},P(h),h.children&&h.children.length>0&&n.createElement(d,null,h.children))))};function p(h,a,v){if(!h&&(!a||a.length===0))return null;if(!a||a.length===0)return n.createElement("h1",{className:"page-header__title"},h,v&&n.createElement(r.Z,{text:v,className:t.css`
              vertical-align: middle;
            `}));const x=[];for(const y of a)y.url?x.push(n.createElement("a",{className:"page-header__link",key:x.length,href:y.url},y.title)):x.push(n.createElement("span",{key:x.length}," / ",y.title));return x.push(n.createElement("span",{key:a.length+1}," / ",h)),n.createElement("h1",{className:"page-header__title"},x)}const E=h=>({actions:(0,t.css)({display:"flex",flexDirection:"row",gap:h.spacing(1)}),headerText:(0,t.css)({display:"flex",flexDirection:"column",gap:h.spacing(1)}),headerCanvas:t.css`
    background: ${h.colors.background.canvas};
  `})},9591:(Z,O,e)=>{"use strict";e.d(O,{S:()=>s});var t=e(9892),n=e(68404),l=e(72648);function s({info:f}){const c=(0,l.wW)(i);return n.createElement("div",{className:c.container},f.map((o,m)=>n.createElement(n.Fragment,{key:m},n.createElement("div",{className:c.infoItem},n.createElement("div",{className:c.label},o.label),o.value),m+1<f.length&&n.createElement("div",{"data-testid":"page-info-separator",className:c.separator}))))}const i=f=>({container:(0,t.css)({display:"flex",flexDirection:"row",gap:f.spacing(1.5),overflow:"auto"}),infoItem:(0,t.css)({...f.typography.bodySmall,display:"flex",flexDirection:"column",gap:f.spacing(.5)}),label:(0,t.css)({color:f.colors.text.secondary}),separator:(0,t.css)({borderLeft:`1px solid ${f.colors.border.weak}`})})},2555:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>s});var t=e(68404),n=e(61744);const s=({pageName:i=""})=>{const f=`Loading ${i}...`;return t.createElement("div",{className:"page-loader-wrapper"},t.createElement(n.u,{text:f}))}},79008:(Z,O,e)=>{"use strict";e.d(O,{T:()=>W});var t=e(9892),n=e(68404),l=e(24844),s=e(72648),i=e(68226),f=e(34177),c=e(83233),o=e(22174),m=e(2555);const r=({isLoading:N,children:S,className:Y})=>{let Q=Y?n.createElement("div",{className:Y},S):S;return n.createElement(n.Fragment,null,N?n.createElement(m.Z,null):Q)};var u=e(9591);function d({navItem:N,renderTitle:S,actions:Y,info:Q,subTitle:z}){const G=(0,s.wW)(g),k=z??N.subTitle,j=S?S(N.text):n.createElement("h1",{className:G.pageTitle},N.text);return n.createElement("div",{className:G.pageHeader},n.createElement("div",{className:G.topRow},n.createElement("div",{className:G.titleInfoContainer},n.createElement("div",{className:G.title},N.img&&n.createElement("img",{className:G.img,src:N.img,alt:`logo for ${N.text}`}),j),Q&&n.createElement(u.S,{info:Q})),n.createElement("div",{className:G.actions},Y)),k&&n.createElement("div",{className:G.subTitle},k))}const g=N=>({topRow:(0,t.css)({alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",gap:N.spacing(1,2)}),title:(0,t.css)({display:"flex",flexDirection:"row"}),actions:(0,t.css)({display:"flex",flexDirection:"row",gap:N.spacing(1)}),titleInfoContainer:(0,t.css)({display:"flex",label:"title-info-container",flex:1,flexWrap:"wrap",gap:N.spacing(1,4),justifyContent:"space-between",maxWidth:"100%"}),pageHeader:(0,t.css)({label:"page-header",display:"flex",flexDirection:"column",gap:N.spacing(1),marginBottom:N.spacing(2)}),pageTitle:(0,t.css)({display:"flex",marginBottom:0}),subTitle:(0,t.css)({position:"relative",color:N.colors.text.secondary}),img:(0,t.css)({width:"32px",height:"32px",marginRight:N.spacing(2)})});var p=e(72142),E=e(40419),h=e(79841);function a({navItem:N}){const S=(0,s.wW)(v);return n.createElement("div",{className:S.tabsWrapper},n.createElement(p.J,null,N.children.map((Y,Q)=>{const z=Y.icon?(0,E.toIconName)(Y.icon):void 0;return!Y.hideFromTabs&&n.createElement(h.O,{label:Y.text,active:Y.active,key:`${Y.url}-${Q}`,icon:z,href:Y.url,suffix:Y.tabSuffix})})))}const v=N=>({tabsWrapper:(0,t.css)({paddingBottom:N.spacing(3)})});var x=e(24664),y=e(68183),C=e(41818),P=e(39904);function D({item:N,isSectionRoot:S=!1}){const Y=(0,s.wW)(M),Q=N.children?.filter(de=>!de.hideFromTabs),z=S&&Boolean(N.children[0].children?.length),G=(0,t.cx)({[Y.link]:!0,[Y.activeStyle]:N.active,[Y.isSection]:Boolean(Q?.length)||N.isSection,[Y.isSectionRoot]:S,[Y.noRootMargin]:z});let k=null;N.img?k=n.createElement("img",{"data-testid":"section-image",className:Y.sectionImg,src:N.img,alt:""}):N.icon&&(k=n.createElement(P.J,{"data-testid":"section-icon",name:N.icon}));const j=()=>{(0,C.ff)("grafana_navigation_item_clicked",{path:N.url??N.id,sectionNav:!0})};return n.createElement(n.Fragment,null,n.createElement("a",{onClick:j,href:N.url,className:G,"aria-label":y.wl.components.Tab.title(N.text),role:"tab","aria-selected":N.active},S&&k,N.text,N.tabSuffix&&n.createElement(N.tabSuffix,{className:Y.suffix})),Q?.map((de,ge)=>n.createElement(D,{item:de,key:ge})))}const M=N=>({link:t.css`
      padding: ${N.spacing(1,0,1,1.5)};
      display: flex;
      align-items: center;
      border-radius: ${N.shape.radius.default};
      gap: ${N.spacing(1)};
      height: 100%;
      position: relative;
      color: ${N.colors.text.secondary};

      &:hover,
      &:focus {
        text-decoration: underline;
        z-index: 1;
      }
    `,activeStyle:t.css`
      label: activeTabStyle;
      color: ${N.colors.text.primary};
      font-weight: ${N.typography.fontWeightMedium};
      background: ${N.colors.emphasize(N.colors.background.canvas,.03)};

      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        width: 4px;
        bottom: 2px;
        top: 2px;
        border-radius: ${N.shape.radius.default};
        background-image: ${N.colors.gradients.brandVertical};
      }
    `,suffix:t.css`
      margin-left: ${N.spacing(1)};
    `,sectionImg:(0,t.css)({width:18}),isSectionRoot:(0,t.css)({fontSize:N.typography.h4.fontSize,marginTop:0,marginBottom:N.spacing(2),fontWeight:N.typography.fontWeightMedium}),isSection:(0,t.css)({color:N.colors.text.primary,fontSize:N.typography.h5.fontSize,marginTop:N.spacing(2),fontWeight:N.typography.fontWeightMedium}),noRootMargin:(0,t.css)({marginBottom:0})});var b=e(9085),R=e.n(b),B=e(31403);const w=({isExpanded:N,onClick:S})=>{const Y=(0,s.l4)(),Q=A(Y);return n.createElement(B.zx,{title:"Toggle section navigation","aria-label":N?"Close section navigation":"Open section navigation",icon:"arrow-to-right",className:R()(Q.icon,{[Q.iconExpanded]:N}),variant:"secondary",fill:"text",size:"md",onClick:S})};w.displayName="SectionNavToggle";const A=N=>({icon:(0,t.css)({alignSelf:"center",margin:N.spacing(1,0),transform:"rotate(90deg)",transition:N.transitions.create("opacity"),color:N.colors.text.secondary,zIndex:1,[N.breakpoints.up("md")]:{alignSelf:"flex-start",position:"relative",left:0,margin:N.spacing(0,0,0,1),top:N.spacing(2),transform:"none"},"div:hover > &, &:focus":{opacity:1}}),iconExpanded:(0,t.css)({rotate:"180deg",[N.breakpoints.up("md")]:{opacity:0,margin:0,position:"absolute",right:0,left:"initial"}})});function I({model:N}){const S=(0,s.wW)(K),{isExpanded:Y,onToggleSectionNav:Q}=F();return Boolean(N.main?.children?.length)?n.createElement("div",{className:S.navContainer},n.createElement("nav",{className:(0,t.cx)(S.nav,{[S.navExpanded]:Y})},n.createElement(i.$,{showScrollIndicators:!0},n.createElement("div",{className:S.items,role:"tablist"},n.createElement(D,{item:N.main,isSectionRoot:!0})))),n.createElement(w,{isExpanded:Y,onClick:Q})):null}function F(){const N=(0,s.l4)(),S=window.matchMedia(`(max-width: ${N.breakpoints.values.lg}px)`).matches,[Y,Q]=(0,x.Z)("grafana.sectionNav.expanded",!S),[z,G]=(0,n.useState)(!S&&Y);return(0,n.useEffect)(()=>{const j=window.matchMedia(`(max-width: ${N.breakpoints.values.lg}px)`),de=ge=>G(ge.matches?!1:Y);return j.addEventListener("change",de),()=>j.removeEventListener("change",de)},[Y,N.breakpoints.values.lg]),{isExpanded:z,onToggleSectionNav:()=>{Q(!z),G(!z)}}}const K=N=>({navContainer:(0,t.css)({display:"flex",flexDirection:"column",position:"relative",[N.breakpoints.up("md")]:{flexDirection:"row"}}),nav:(0,t.css)({display:"flex",flexDirection:"column",background:N.colors.background.canvas,flexShrink:0,transition:N.transitions.create(["width","max-height"]),maxHeight:0,visibility:"hidden",[N.breakpoints.up("md")]:{width:0,maxHeight:"unset"}}),navExpanded:(0,t.css)({maxHeight:"50vh",visibility:"visible",[N.breakpoints.up("md")]:{width:"250px",maxHeight:"unset"}}),items:(0,t.css)({display:"flex",flexDirection:"column",padding:N.spacing(2,1,2,2),minWidth:"250px",[N.breakpoints.up("md")]:{padding:N.spacing(4.5,1,2,2)}})}),W=({navId:N,navModel:S,pageNav:Y,renderTitle:Q,actions:z,subTitle:G,children:k,className:j,info:de,layout:ge=l.Qz.Standard,toolbar:re,scrollTop:ce,scrollRef:ie,...fe})=>{const Ce=(0,s.wW)(U),ee=(0,c.P)(N,S),{chrome:ne}=(0,f.p)();(0,o.T)(ee,Y);const X=Y??ee?.node;return(0,n.useEffect)(()=>{ee&&ne.update({sectionNav:ee.node,pageNav:Y})},[ee,Y,ne]),n.createElement("div",{className:(0,t.cx)(Ce.wrapper,j),...fe},ge===l.Qz.Standard&&n.createElement("div",{className:Ce.panes},ee&&n.createElement(I,{model:ee}),n.createElement("div",{className:Ce.pageContainer},n.createElement(i.$,{autoHeightMin:"100%",scrollTop:ce,scrollRefCallback:ie},n.createElement("div",{className:Ce.pageInner},X&&n.createElement(d,{actions:z,navItem:X,renderTitle:Q,info:de,subTitle:G}),Y&&Y.children&&n.createElement(a,{navItem:Y}),n.createElement("div",{className:Ce.pageContent},k))))),ge===l.Qz.Canvas&&n.createElement(i.$,{autoHeightMin:"100%",scrollTop:ce,scrollRefCallback:ie},n.createElement("div",{className:Ce.canvasContent},re,k)),ge===l.Qz.Custom&&n.createElement(n.Fragment,null,re,k))};W.Contents=r,W.OldNavOnly=function(){return null};const U=N=>({wrapper:(0,t.css)({label:"page-wrapper",height:"100%",display:"flex",flex:"1 1 0",flexDirection:"column",minHeight:0}),panes:(0,t.css)({label:"page-panes",display:"flex",height:"100%",width:"100%",flexGrow:1,minHeight:0,flexDirection:"column",[N.breakpoints.up("md")]:{flexDirection:"row"}}),pageContainer:(0,t.css)({label:"page-container",flexGrow:1}),pageContent:(0,t.css)({label:"page-content",flexGrow:1}),pageInner:(0,t.css)({label:"page-inner",padding:N.spacing(2),borderRadius:N.shape.borderRadius(1),border:`1px solid ${N.colors.border.weak}`,background:N.colors.background.primary,display:"flex",flexDirection:"column",flexGrow:1,margin:N.spacing(0,0,0,0),[N.breakpoints.up("sm")]:{margin:N.spacing(0,1,1,1)},[N.breakpoints.up("md")]:{margin:N.spacing(2,2,2,1),padding:N.spacing(3)}}),canvasContent:(0,t.css)({label:"canvas-content",display:"flex",flexDirection:"column",padding:N.spacing(2),flexBasis:"100%",flexGrow:1})})},20787:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>i});var t=e(68404),n=e(68183),l=e(46967),s=e(8180);const i=t.forwardRef(({autoComplete:f,autoFocus:c,id:o,passwordHint:m,...r},u)=>{const[d,g]=(0,t.useState)(!1);return t.createElement(l.I,{id:o,autoFocus:c,autoComplete:f,...r,type:d?"text":"password",placeholder:m,"aria-label":n.wl.pages.Login.password,ref:u,suffix:t.createElement(s.h,{name:d?"eye-slash":"eye",type:"button","aria-controls":o,role:"switch","aria-checked":d,"aria-label":"Show password",onClick:()=>{g(!d)}})})});i.displayName="PasswordField"},6645:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>E});var t=e(9892),n=e(68404),l=e(94270),s=e(52081),i=e(53217),f=e(31403),c=e(7804),o=e(94080),m=e(28038),r=e(47694),u=e(73757),d=e(50796);class g extends n.Component{constructor(a){super(a),this.onTypeChanged=v=>{const x=v.value;switch(x){case u.pC.User:case u.pC.Team:this.setState({type:x,userId:0,teamId:0,role:void 0});break;case u.pC.Editor:this.setState({type:x,userId:0,teamId:0,role:u.B5.Editor});break;case u.pC.Viewer:this.setState({type:x,userId:0,teamId:0,role:u.B5.Viewer});break}},this.onUserSelected=v=>{this.setState({userId:v&&!Array.isArray(v)?v.id:0})},this.onTeamSelected=v=>{this.setState({teamId:v.value?.id&&!Array.isArray(v.value)?v.value.id:0})},this.onPermissionChanged=v=>{this.setState({permission:v.value})},this.onSubmit=async()=>{await this.props.onAddPermission(this.state),this.setState(this.getCleanState())},this.state=this.getCleanState()}getCleanState(){return{userId:0,teamId:0,role:void 0,type:u.pC.Team,permission:u.V5.View}}isValid(){switch(this.state.type){case u.pC.Team:return this.state.teamId>0;case u.pC.User:return this.state.userId>0}return!0}render(){const{onCancel:a}=this.props,v=this.state,x="min-width-20",y=this.isValid(),C=p(r.ZP.theme2);return n.createElement("div",{className:"cta-form"},n.createElement(d.P,{onClick:a}),n.createElement("h5",null,"Add Permission For"),n.createElement(l.l,{maxWidth:"none",onSubmit:this.onSubmit},()=>n.createElement(s.Lh,null,n.createElement(i.Ph,{"aria-label":"Role to add new permission to",isSearchable:!1,value:this.state.type,options:u.BL,onChange:this.onTypeChanged}),v.type===u.pC.User?n.createElement(m.f,{onSelected:this.onUserSelected,className:x}):null,v.type===u.pC.Team?n.createElement(o.c,{onSelected:this.onTeamSelected,className:x}):null,n.createElement("span",{className:C.label},"Can"),n.createElement(i.Ph,{"aria-label":"Permission level",isSearchable:!1,value:this.state.permission,options:u.vT,onChange:this.onPermissionChanged,width:25}),n.createElement(f.zx,{"data-save-permission":!0,type:"submit",disabled:!y},"Save"))))}}g.defaultProps={showPermissionLevels:!0};const p=(0,c.B)(h=>({label:t.css`
    color: ${h.colors.primary.text};
    font-weight: bold;
  `})),E=g},92158:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>d});var t=e(68404),n=e(39904),l=e(53217),s=e(31403),i=e(73757);class f extends t.Component{render(){const{item:p}=this.props,E=i.vT.find(h=>h.value===p.permission);return t.createElement("tr",{className:"gf-form-disabled"},t.createElement("td",{style:{width:"1%"}},t.createElement(n.J,{size:"lg",name:"shield"})),t.createElement("td",{style:{width:"90%"}},p.name,t.createElement("span",{className:"filter-table__weak-italic"}," (Role)")),t.createElement("td",null),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement("div",{className:"gf-form"},t.createElement(l.Ph,{"aria-label":`Permission level for "${p.name}"`,options:i.vT,onChange:()=>{},disabled:!0,value:E}))),t.createElement("td",null,t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}"`,size:"sm",icon:"lock",disabled:!0})))}}const c=g=>g?"gf-form-disabled":"";function o({item:g}){return g.userAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:g.userAvatarUrl,alt:"User avatar"}):g.teamAvatarUrl?t.createElement("img",{className:"filter-table__avatar",src:g.teamAvatarUrl,alt:"Team avatar"}):g.role==="Editor"?t.createElement(n.J,{size:"lg",name:"edit"}):t.createElement(n.J,{size:"lg",name:"eye"})}function m({item:g}){return g.userId?t.createElement("span",{className:"filter-table__weak-italic"},"(User)"):g.teamId?t.createElement("span",{className:"filter-table__weak-italic"},"(Team)"):t.createElement("span",{className:"filter-table__weak-italic"},"(Role)")}class r extends t.PureComponent{constructor(){super(...arguments),this.onPermissionChanged=p=>{this.props.onPermissionChanged(this.props.item,p.value)},this.onRemoveItem=()=>{this.props.onRemoveItem(this.props.item)}}render(){const{item:p,folderInfo:E}=this.props,h=p.dashboardId===-1&&!p.inherited,a=i.vT.find(v=>v.value===p.permission);return t.createElement("tr",{className:c(Boolean(p?.inherited))},t.createElement("td",{style:{width:"1%"}},t.createElement(o,{item:p})),t.createElement("td",{style:{width:"90%"}},p.name," ",t.createElement(m,{item:p})),t.createElement("td",null,p.inherited&&E&&t.createElement("em",{className:"muted no-wrap"},"Inherited from folder"," ",E.canViewFolderPermissions?t.createElement("a",{className:"text-link",href:`${E.url}/permissions`},E.title):E.title),h&&t.createElement("em",{className:"muted no-wrap"},"Default Permission")),t.createElement("td",{className:"query-keyword"},"Can"),t.createElement("td",null,t.createElement(l.Ph,{"aria-label":`Permission level for "${p.name}"`,isSearchable:!1,options:i.vT,onChange:this.onPermissionChanged,disabled:p.inherited,value:a,width:25})),t.createElement("td",null,p.inherited?t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}" (Disabled)`,size:"sm",disabled:!0,icon:"times"}):t.createElement(s.zx,{"aria-label":`Remove permission for "${p.name}"`,size:"sm",variant:"destructive",icon:"times",onClick:this.onRemoveItem})))}}class u extends t.PureComponent{render(){const{items:p,onRemoveItem:E,onPermissionChanged:h,isFetching:a,folderInfo:v}=this.props;return t.createElement("table",{className:"filter-table gf-form-group"},t.createElement("tbody",null,t.createElement(f,{key:0,item:{name:"Admin",permission:4}}),p.map((x,y)=>t.createElement(r,{key:y+1,item:x,onRemoveItem:E,onPermissionChanged:h,folderInfo:v})),a===!0&&p.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"Loading permissions..."))):null,a===!1&&p.length<1?t.createElement("tr",null,t.createElement("td",{colSpan:4},t.createElement("em",null,"No permissions are set. Will only be accessible by admins."))):null))}}const d=u},54630:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>l});var t=e(68404);const l=()=>t.createElement("div",null,t.createElement("h5",null,"What are Permissions?"),t.createElement("p",null,"An Access Control List (ACL) model is used to limit access to Dashboard Folders. A user or a Team can be assigned permissions for a folder or for a single dashboard."))},19117:(Z,O,e)=>{"use strict";e.d(O,{h:()=>i});var t=e(9892),n=e(68404),l=e(41959),s=e(72648);const i=n.memo(n.forwardRef(({className:o,children:m,markdown:r,onRemove:u,...d},g)=>{const p=(0,s.wW)(c);return n.createElement("div",{className:(0,t.cx)(p.wrapper,o),...d,ref:g},r&&f(r),m)}));function f(o){const m=(0,l.a)(o);return n.createElement("div",{className:"markdown-html",dangerouslySetInnerHTML:{__html:m}})}i.displayName="OperationRowHelp";const c=o=>{const m=o.shape.borderRadius();return{wrapper:t.css`
      padding: ${o.spacing(2)};
      border: 2px solid ${o.colors.background.secondary};
      border-top: none;
      border-radius: 0 0 ${m} ${m};
      position: relative;
      top: -4px;
    `}}},1029:(Z,O,e)=>{"use strict";e.d(O,{y:()=>f});var t=e(9892),n=e(68404),l=e(68183),s=e(72648),i=e(8180);const f=({icon:o,active:m,disabled:r,title:u,onClick:d})=>{const g=(0,s.wW)(c);return n.createElement("div",{className:(0,t.cx)(g.icon,m&&g.active)},n.createElement(i.h,{name:o,tooltip:u,className:g.icon,disabled:!!r,onClick:d,type:"button","aria-label":l.wl.components.QueryEditorRow.actionButton(u)}))};f.displayName="QueryOperationAction";const c=o=>({icon:t.css`
      display: flex;
      position: relative;
      color: ${o.colors.text.secondary};
    `,active:t.css`
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: -1px;
        right: 2px;
        height: 3px;
        border-radius: ${o.shape.radius.default};
        bottom: -8px;
        background-image: ${o.colors.gradients.brandHorizontal} !important;
      }
    `})},67254:(Z,O,e)=>{"use strict";e.d(O,{t:()=>d});var t=e(9892),n=e(68404),l=e(19677),s=e(73802),i=e(41818),f=e(72648),c=e(61970),o=e(8180),m=e(39904);const r=({actionsElement:p,disabled:E,draggable:h,dragHandleProps:a,headerElement:v,isContentVisible:x,onRowToggle:y,reportDragMousePosition:C,title:P,id:D})=>{const M=(0,f.wW)(u);return n.createElement("div",{className:M.header},n.createElement("div",{className:M.column},n.createElement(o.h,{name:x?"angle-down":"angle-right",title:"toggle collapse and expand","aria-label":"toggle collapse and expand query row",className:M.collapseIcon,onClick:y,type:"button","aria-expanded":x,"aria-controls":D}),P&&n.createElement("div",{className:M.titleWrapper,onClick:y,"aria-label":"Query operation row title"},n.createElement("div",{className:(0,t.cx)(M.title,E&&M.disabled)},P)),v),n.createElement("div",{className:M.column},p,h&&n.createElement(m.J,{title:"Drag and drop to reorder",name:"draggabledots",size:"lg",className:M.dragIcon,onMouseMove:C,...a})))},u=p=>({header:t.css`
    label: Header;
    padding: ${p.spacing(.5,.5)};
    border-radius: ${p.shape.borderRadius(1)};
    background: ${p.colors.background.secondary};
    min-height: ${p.spacing(4)};
    display: grid;
    grid-template-columns: minmax(100px, max-content) min-content;
    align-items: center;
    justify-content: space-between;
    white-space: nowrap;

    &:focus {
      outline: none;
    }
  `,column:t.css`
    label: Column;
    display: flex;
    align-items: center;
  `,dragIcon:t.css`
    cursor: grab;
    color: ${p.colors.text.disabled};
    margin: ${p.spacing(0,.5)};
    &:hover {
      color: ${p.colors.text};
    }
  `,collapseIcon:t.css`
    margin-left: ${p.spacing(.5)};
    color: ${p.colors.text.disabled};
    }
  `,titleWrapper:t.css`
    display: flex;
    align-items: center;
    flex-grow: 1;
    cursor: pointer;
    overflow: hidden;
    margin-right: ${p.spacing(.5)};
  `,title:t.css`
    font-weight: ${p.typography.fontWeightBold};
    color: ${p.colors.text.link};
    margin-left: ${p.spacing(.5)};
    overflow: hidden;
    text-overflow: ellipsis;
  `,disabled:t.css`
    color: ${p.colors.text.disabled};
  `});r.displayName="QueryOperationRowHeader";function d({children:p,actions:E,title:h,headerElement:a,onClose:v,onOpen:x,isOpen:y,disabled:C,draggable:P,index:D,id:M}){const[b,R]=(0,n.useState)(y!==void 0?y:!0),B=(0,f.wW)(g),w=(0,n.useCallback)(()=>{R(!b)},[b,R]),A=(0,n.useCallback)(W=>{if(W.defaultPrevented){const U=W.currentTarget.getBoundingClientRect(),N=W.clientX-U.left,S=W.clientY-U.top;(0,i.ff)("query_row_reorder_drag_position",{x:N/U.width,y:S/U.height,width:U.width,height:U.height})}},[]);(0,s.Z)(()=>{b?x&&x():v&&v()},[b]);const I={isOpen:b,onOpen:()=>{R(!0)},onClose:()=>{R(!1)}},F=E&&c.renderOrCallToRender(E,I),K=a&&c.renderOrCallToRender(a,I);return P?n.createElement(l._l,{draggableId:M,index:D},W=>n.createElement(n.Fragment,null,n.createElement("div",{ref:W.innerRef,className:B.wrapper,...W.draggableProps},n.createElement("div",null,n.createElement(r,{id:M,actionsElement:F,disabled:C,draggable:!0,dragHandleProps:W.dragHandleProps,headerElement:K,isContentVisible:b,onRowToggle:w,reportDragMousePosition:A,title:h})),b&&n.createElement("div",{className:B.content},p)))):n.createElement("div",{className:B.wrapper},n.createElement(r,{id:M,actionsElement:F,disabled:C,draggable:!1,headerElement:K,isContentVisible:b,onRowToggle:w,reportDragMousePosition:A,title:h}),b&&n.createElement("div",{className:B.content},p))}const g=p=>({wrapper:t.css`
      margin-bottom: ${p.spacing(2)};
    `,content:t.css`
      margin-top: ${p.spacing(.5)};
      margin-left: ${p.spacing(3)};
    `});d.displayName="QueryOperationRow"},17069:(Z,O,e)=>{"use strict";e.d(O,{I:()=>Ce});var t=e(68404),n=e(52081),l=e(67487),s=e(94437),i=e(9892),f=e(72648),c=e(39904),o=e(6554),m=e(46967),r=e(73267),u=e(85419),d=e(27501);const g=(0,t.forwardRef)(({children:ee,iconName:ne},X)=>{const te=(0,f.wW)(p);return t.createElement("div",{className:te.container,ref:X},ne&&t.createElement(c.J,{name:ne,size:"xs"}),ee)});g.displayName="ValueContainer";const p=ee=>{const{prefix:ne}=(0,m.H)({theme:ee}),{multiValueContainer:X}=(0,d.D)(ee);return{container:(0,i.cx)(ne,X,i.css`
        position: relative;
        padding: ${ee.spacing(.5,1,.5,1)};

        svg {
          margin-right: ${ee.spacing(.5)};
        }
      `)}},E=300,h=360,a=260,v=ee=>ee.stopPropagation(),x=({appliedRoles:ee,basicRole:ne,disabled:X,isFocused:te,query:ae,showBasicRole:_,onOpen:ve,onClose:Ve,onQueryChange:it,...rt})=>{const pe=(0,f.wW)(He=>C(He,!1,!!te,!!X,!1)),Ie=(0,t.useRef)(null);(0,t.useEffect)(()=>{te&&Ie.current?.focus()});const We=He=>{const Ae=He.target?.value;it(Ae)},Je=ee.length;return te?t.createElement("div",{className:pe.wrapper},_&&t.createElement(g,null,ne),ee.map(He=>t.createElement(g,{key:He.uid},He.displayName||He.name)),!X&&t.createElement("input",{...rt,className:pe.input,ref:Ie,onMouseDown:v,onChange:We,"data-testid":"role-picker-input",placeholder:te?"Select role":"",value:ae}),t.createElement("div",{className:pe.suffix},t.createElement(c.J,{name:"angle-up",className:pe.dropdownIndicator,onMouseDown:Ve}))):t.createElement("div",{className:(0,i.cx)(pe.wrapper,pe.selectedRoles),onMouseDown:ve},_&&t.createElement(g,null,ne),t.createElement(y,{appliedRoles:ee,numberOfRoles:Je,showBuiltInRole:_}))};x.displayName="RolePickerInput";const y=({showBuiltInRole:ee,numberOfRoles:ne,appliedRoles:X})=>{const te=(0,f.wW)(ae=>P(ae));return t.createElement(t.Fragment,null,ne?t.createElement(o.u,{content:t.createElement("div",{className:te.tooltip},X?.map(ae=>t.createElement("p",{key:ae.uid},ae.displayName)))},t.createElement(g,null,`${ee?"+":""}${ne} role${ne>1?"s":""}`)):!ee&&t.createElement(g,null,"No roles assigned"))},C=(ee,ne,X,te,ae)=>{const _=(0,m.H)({theme:ee,invalid:ne});return{wrapper:(0,i.cx)(_.wrapper,(0,r.RK)(ee,ne),X&&i.css`
          ${u.focusCss(ee.v1)}
        `,te&&_.inputDisabled,i.css`
        min-width: ${h}px;
        min-height: 32px;
        height: auto;
        flex-direction: row;
        padding-right: 24px;
        max-width: 100%;
        align-items: center;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-start;
        position: relative;
        box-sizing: border-box;
        cursor: default;
      `,ae&&i.css`
          padding-left: 0;
        `),input:(0,i.cx)((0,r.RK)(ee,ne),i.css`
        max-width: 120px;
        border: none;
        cursor: ${X?"default":"pointer"};
      `),suffix:_.suffix,dropdownIndicator:i.css`
      cursor: pointer;
    `,selectedRoles:i.css`
      display: flex;
      align-items: center;
      cursor: ${te?"not-allowed":"pointer"};
    `,tooltip:i.css`
      p {
        margin-bottom: ${ee.spacing(.5)};
      }
    `}},P=ee=>({tooltip:i.css`
    p {
      margin-bottom: ${ee.spacing(.5)};
    }
  `});var D=e(68226),M=e(2594),b=e(31403),R=e(81168),B=e(58255),w=e(85511);const A=ee=>({menuWrapper:i.css`
      display: flex;
      max-height: 650px;
      position: absolute;
      z-index: ${ee.zIndex.dropdown};
      overflow: hidden;
      min-width: auto;
    `,menu:i.css`
      min-width: ${a}px;

      & > div {
        padding-top: ${ee.spacing(1)};
      }
    `,menuLeft:i.css`
      right: 0;
      flex-direction: row-reverse;
    `,subMenu:i.css`
      height: 100%;
      min-width: ${a}px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid ${ee.components.input.borderColor};

      & > div {
        padding-top: ${ee.spacing(1)};
      }
    `,subMenuLeft:i.css`
      border-right: 1px solid ${ee.components.input.borderColor};
      border-left: unset;
    `,groupHeader:i.css`
      padding: ${ee.spacing(0,4.5)};
      display: flex;
      align-items: center;
      color: ${ee.colors.text.primary};
      font-weight: ${ee.typography.fontWeightBold};
    `,container:i.css`
      padding: ${ee.spacing(1)};
      border: 1px ${ee.colors.border.weak} solid;
      border-radius: ${ee.shape.borderRadius(1)};
      background-color: ${ee.colors.background.primary};
      z-index: ${ee.zIndex.modal};
    `,menuSection:i.css`
      margin-bottom: ${ee.spacing(2)};
    `,menuOptionCheckbox:i.css`
      display: flex;
      margin: ${ee.spacing(0,1,0,.25)};
    `,menuButtonRow:i.css`
      background-color: ${ee.colors.background.primary};
      padding: ${ee.spacing(1)};
    `,menuOptionBody:i.css`
      font-weight: ${ee.typography.fontWeightRegular};
      padding: ${ee.spacing(0,1.5,0,0)};
    `,menuOptionDisabled:i.css`
      color: ${ee.colors.text.disabled};
      cursor: not-allowed;
    `,menuOptionExpand:i.css`
      position: absolute;
      right: ${ee.spacing(1.25)};
      color: ${ee.colors.text.disabled};

      &:after {
        content: '>';
      }
    `,menuOptionInfoSign:i.css`
      color: ${ee.colors.text.disabled};
    `,basicRoleSelector:i.css`
      margin: ${ee.spacing(1,1.25,1,1)};
    `,subMenuPortal:i.css`
      height: 100%;
      > div {
        height: 100%;
      }
    `,subMenuButtonRow:i.css`
      background-color: ${ee.colors.background.primary};
      padding: ${ee.spacing(1)};
    `,checkboxPartiallyChecked:i.css`
      input {
        &:checked + span {
          &:after {
            border-width: 0 3px 0px 0;
            transform: rotate(90deg);
          }
        }
      }
    `}),I=(0,t.memo)(t.forwardRef(({name:ee,value:ne,isFocused:X,isSelected:te,partiallySelected:ae,disabled:_,onChange:ve,onClick:Ve,onOpenSubMenu:it,onCloseSubMenu:rt,children:pe,root:Ie},We)=>{const Je=(0,f.l4)(),He=(0,d.D)(Je),Ae=(0,f.wW)(A),et=(0,i.cx)(He.option,X&&He.optionFocused,_&&Ae.menuOptionDisabled),_e=Qe=>{_||ne&&ve(ne)},Se=Qe=>{Ve&&Ve(ne)},Fe=()=>{it&&it(ne)},Xe=()=>{rt&&rt()};return t.createElement("div",{onMouseEnter:Fe,onMouseLeave:Xe},t.createElement("div",{ref:We,className:et,"aria-label":"Role picker option",onClick:Se},t.createElement(B.X,{value:te,className:(0,i.cx)(Ae.menuOptionCheckbox,{[Ae.checkboxPartiallyChecked]:ae}),onChange:_e,disabled:_}),t.createElement("div",{className:(0,i.cx)(He.optionBody,Ae.menuOptionBody)},t.createElement("span",null,ee),t.createElement("span",{className:Ae.menuOptionExpand})),Ie&&pe&&t.createElement(w.h_,{className:Ae.subMenuPortal,root:Ie},pe)))}));I.displayName="RoleMenuGroupOption";const F=t.forwardRef(({data:ee,isFocused:ne,isSelected:X,disabled:te,onChange:ae,hideDescription:_},ve)=>{const Ve=(0,f.l4)(),it=(0,d.D)(Ve),rt=(0,f.wW)(A),pe=(0,i.cx)(it.option,ne&&it.optionFocused,te&&rt.menuOptionDisabled),Ie=We=>{te||(We.preventDefault(),We.stopPropagation(),ae(ee))};return t.createElement("div",{ref:ve,className:pe,"aria-label":"Role picker option",onClick:Ie},t.createElement(B.X,{value:X,className:rt.menuOptionCheckbox,onChange:Ie,disabled:te}),t.createElement("div",{className:(0,i.cx)(it.optionBody,rt.menuOptionBody)},t.createElement("span",null,ee.displayName||ee.name),!_&&ee.description&&t.createElement("div",{className:it.optionDescription},ee.description)),ee.description&&t.createElement(o.u,{content:ee.description},t.createElement(c.J,{name:"info-circle",className:rt.menuOptionInfoSign})))});F.displayName="RoleMenuOption";var K=e(25310);const W=({options:ee,selectedOptions:ne,disabledOptions:X,onSelect:te,onClear:ae,showOnLeft:_})=>{const ve=(0,f.l4)(),Ve=(0,d.D)(ve),it=(0,f.wW)(A),rt=async()=>{ae&&ae()};return t.createElement("div",{className:(0,i.cx)(it.subMenu,{[it.subMenuLeft]:_}),"aria-label":"Role picker submenu"},t.createElement(D.$,{autoHide:!1,autoHeightMax:`${E}px`,hideHorizontalTrack:!0},t.createElement("div",{className:Ve.optionBody},ee.map((pe,Ie)=>t.createElement(F,{data:pe,key:Ie,isSelected:!!(pe.uid&&(ne.find(We=>We.uid===pe.uid)||X?.find(We=>We.uid===pe.uid))),disabled:!!(pe.uid&&X?.find(We=>We.uid===pe.uid))||(0,K.r)(pe),onChange:te,hideDescription:!0})))),t.createElement("div",{className:it.subMenuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(b.zx,{size:"sm",fill:"text",onClick:rt},"Clear"))))},U=t.forwardRef(({roles:ee,renderedName:ne,showGroups:X,optionGroups:te,onGroupChange:ae,groupSelected:_,groupPartiallySelected:ve,subMenuNode:Ve,selectedOptions:it,onRoleChange:rt,onClearSubMenu:pe,showOnLeftSubMenu:Ie},We)=>{const[Je,He]=(0,t.useState)(!1),[Ae,et]=(0,t.useState)(""),_e=(0,f.l4)(),Se=(0,d.D)(_e),Fe=(0,f.wW)(A),Xe=(0,t.useCallback)(ct=>{et(ct),He(!0)},[]),Qe=(0,t.useCallback)(()=>{He(!1),et("")},[]);return t.createElement("div",null,ee.length>0&&t.createElement("div",{className:Fe.menuSection},t.createElement("div",{className:Fe.groupHeader},ne),t.createElement("div",{className:Se.optionBody}),X&&te?.length?te.map(ct=>t.createElement(I,{key:ct.value,name:ct.name,value:ct.value,isSelected:_(ct.value)||ve(ct.value),partiallySelected:ve(ct.value),disabled:ct.options?.every(K.r),onChange:ae,onOpenSubMenu:Xe,onCloseSubMenu:Qe,root:Ve,isFocused:Je&&Ae===ct.value},Je&&Ae===ct.value&&t.createElement(W,{options:ct.options,selectedOptions:it,onSelect:rt,onClear:()=>pe(Ae),showOnLeft:Ie}))):ee.map(ct=>t.createElement(F,{data:ct,key:ct.uid,isSelected:!!(ct.uid&&it.find(ht=>ht.uid===ct.uid)),disabled:(0,K.r)(ct),onChange:rt,hideDescription:!0}))))});U.displayName="RoleMenuGroupsSection";var N=(ee=>(ee.fixed="fixed",ee.custom="custom",ee.plugin="plugin",ee))(N||{});const Y=Object.values(R.OrgRole).map(ee=>({label:ee,value:ee})),Q={ldap:"LDAP",current:"Current org"},z=({basicRole:ee,options:ne,appliedRoles:X,showGroups:te,basicRoleDisabled:ae,showBasicRole:_,onSelect:ve,onBasicRoleSelect:Ve,onUpdate:it,updateDisabled:rt,offset:pe,apply:Ie})=>{const[We,Je]=(0,t.useState)(X),[He,Ae]=(0,t.useState)(ee),[et,_e]=(0,t.useState)({}),Se=(0,t.useRef)(null),Fe=(0,f.l4)(),Xe=(0,d.D)(Fe),Qe=(0,f.wW)(A);(0,t.useEffect)(()=>{ve(We)},[We,ve]),(0,t.useEffect)(()=>{Ve&&He&&Ve(He)},[He,Ve]),(0,t.useEffect)(()=>{const Ye=ne.filter(G).sort(ie),be=ne.filter(k).sort(ie),Te=ne.filter(j).sort(ie),me={fixed:de(be).sort((he,De)=>he.name.localeCompare(De.name)),custom:de(Ye).sort((he,De)=>he.name.localeCompare(De.name)),plugin:de(Te).sort((he,De)=>he.name.localeCompare(De.name))};_e({fixed:{groupType:"fixed",optionGroup:me.fixed,renderedName:"Fixed roles",roles:be},custom:{groupType:"custom",optionGroup:me.custom,renderedName:"Custom roles",roles:Ye},plugin:{groupType:"plugin",optionGroup:me.plugin,renderedName:"Plugin roles",roles:Te}})},[ne]);const ct=Ye=>{const be=[];for(const Te of We)ge(Te)===Ye&&be.push(Te);return be},ht=(Ye,be)=>{const Te=ct(be),me=et[Ye]?.optionGroup.find(he=>he.value===be);return Te.length>0&&Te.length>=me.options.length},ft=(Ye,be)=>{const Te=ct(be),me=et[Ye]?.optionGroup.find(he=>he.value===be);return Te.length>0&&Te.length<me.options.length},Re=Ye=>{We.find(be=>be.uid===Ye.uid)?Je(We.filter(be=>be.uid!==Ye.uid)):Je([...We,Ye])},nt=(Ye,be)=>{const Te=et[Ye]?.optionGroup.find(me=>me.value===be);if(Te)if(ht(Ye,be)||ft(Ye,be))Je(We.filter(me=>!Te.options.find(he=>me.uid===he.uid)));else{const me=Te.options.filter(De=>De.delegatable),he=We.filter(De=>!Te.options.find($e=>De.uid===$e.uid));Je([...he,...me])}},le=Ye=>{Ae(Ye)},Pe=async()=>{Je([])},Oe=Ye=>{const be=We.filter(Te=>ge(Te)!==Ye);Je(be)},Le=()=>{it(We,He)};return t.createElement("div",{className:(0,i.cx)(Xe.menu,Qe.menuWrapper,{[Qe.menuLeft]:pe.horizontal>0},i.css`
          bottom: ${pe.vertical>0?`${pe.vertical}px`:"unset"};
          top: ${pe.vertical<0?`${Math.abs(pe.vertical)}px`:"unset"};
        `)},t.createElement("div",{className:Qe.menu,"aria-label":"Role picker menu"},t.createElement(D.$,{autoHide:!1,autoHeightMax:`${E}px`,hideHorizontalTrack:!0,hideVerticalTrack:!0},_&&t.createElement("div",{className:Qe.menuSection},t.createElement("div",{className:Qe.groupHeader},"Basic roles"),t.createElement(M.S,{className:Qe.basicRoleSelector,options:Y,value:He,onChange:le,fullWidth:!0,disabled:ae})),Object.entries(et).map(([Ye,be])=>t.createElement(U,{key:Ye,roles:be.roles,renderedName:be.renderedName,showGroups:te,optionGroups:be.optionGroup,groupSelected:Te=>ht(be.groupType,Te),groupPartiallySelected:Te=>ft(be.groupType,Te),onGroupChange:Te=>nt(be.groupType,Te),subMenuNode:Se?.current,selectedOptions:We,onRoleChange:Re,onClearSubMenu:Oe,showOnLeftSubMenu:pe.horizontal>0}))),t.createElement("div",{className:Qe.menuButtonRow},t.createElement(n.Lh,{justify:"flex-end"},t.createElement(b.zx,{size:"sm",fill:"text",onClick:Pe,disabled:rt},"Clear all"),t.createElement(b.zx,{size:"sm",onClick:Le,disabled:rt},Ie?"Apply":"Update")))),t.createElement("div",{ref:Se}))},G=ee=>!ee.name?.startsWith("fixed:")&&!ee.name.startsWith("plugins:"),k=ee=>ee.name?.startsWith("fixed:"),j=ee=>ee.name?.startsWith("plugins:"),de=ee=>{const ne={};return ee.forEach(te=>{const ae=ge(te),_=re(te);ne[ae]||(ne[ae]={name:_,roles:[]}),ne[ae].roles.push(te)}),Object.entries(ne).map(([te,ae])=>({name:Q[te]||fe(ae.name),value:te,options:ae.roles.sort(ie)}))},ge=ee=>{const ne=ce(ee),X=re(ee);return`${ne}:${X}`},re=ee=>ee.group||"Other",ce=ee=>{const ne=ee.name.indexOf(":");return ne<0?"unknown":ee.name.substring(0,ne)},ie=(ee,ne)=>ee.name.localeCompare(ne.name),fe=ee=>ee.slice(0,1).toUpperCase()+ee.slice(1),Ce=({basicRole:ee,appliedRoles:ne,roleOptions:X,disabled:te,isLoading:ae,basicRoleDisabled:_,showBasicRole:ve,onRolesChange:Ve,onBasicRoleChange:it,canUpdateRoles:rt=!0,apply:pe=!1,maxWidth:Ie=h})=>{const[We,Je]=(0,t.useState)(!1),[He,Ae]=(0,t.useState)(ne),[et,_e]=(0,t.useState)(ee),[Se,Fe]=(0,t.useState)(""),[Xe,Qe]=(0,t.useState)({vertical:0,horizontal:0}),ct=(0,t.useRef)(null);(0,t.useEffect)(()=>{_e(ee),Ae(ne)},[ne,ee]),(0,t.useEffect)(()=>{const Ye=ct?.current?.getBoundingClientRect();if(!Ye||!We)return;const{bottom:be,top:Te,left:me,right:he,width:De}=Ye,$e=window.innerHeight-be,ke=be-Te+10,tt=he-me;let Ge=-tt,dt=-ke;$e<E+20&&(dt=50+(E-$e)-ke),window.innerWidth-he<De&&De<2*a&&(Ge=tt),Qe({horizontal:Ge,vertical:dt})},[We,He]);const ht=(0,t.useCallback)(Ye=>{te||(Ye.preventDefault(),Ye.stopPropagation(),Je(!0))},[Je,te]),ft=(0,t.useCallback)(()=>{Je(!1),Fe(""),Ae(ne),_e(ee)},[ne,ee]),Re=()=>We&&ft(),nt=Ye=>{Fe(Ye||"")},le=Ye=>{Ae(Ye)},Pe=Ye=>{_e(Ye)},Oe=(Ye,be)=>{it&&be&&be!==ee&&it(be),rt&&Ve(Ye),Fe(""),Je(!1)},Le=()=>{const Ye=X.map(be=>({...be,delegatable:rt&&be.delegatable}));return Se&&Se.trim()!==""?Ye.filter(be=>be.name?.toLowerCase().includes(Se.toLowerCase())):Ye};return ae?t.createElement(n.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(l.$,{size:16})):t.createElement("div",{"data-testid":"role-picker",style:{position:"relative",maxWidth:Ie},ref:ct},t.createElement(s.L,{onClick:Re},t.createElement(x,{basicRole:et,appliedRoles:He,query:Se,onQueryChange:nt,onOpen:ht,onClose:ft,isFocused:We,disabled:te,showBasicRole:ve}),We&&t.createElement(z,{options:Le(),basicRole:et,appliedRoles:ne,onBasicRoleSelect:Pe,onSelect:le,onUpdate:Oe,showGroups:Se.length===0||Se.trim()==="",basicRoleDisabled:_,showBasicRole:ve,updateDisabled:_&&!rt,apply:pe,offset:Xe})))}},66226:(Z,O,e)=>{"use strict";e.d(O,{R:()=>c});var t=e(68404),n=e(671),l=e(77582),s=e(81168),i=e(17069),f=e(11630);const c=({basicRole:o,userId:m,orgId:r,onBasicRoleChange:u,roleOptions:d,disabled:g,basicRoleDisabled:p,apply:E=!1,onApplyRoles:h,pendingRoles:a,maxWidth:v})=>{const[{loading:x,value:y=[]},C]=(0,n.Z)(async()=>{try{if(E&&Boolean(a?.length))return a;if(l.Vt.hasPermission(s.AccessControlAction.ActionUserRolesList))return await(0,f.kt)(m,r)}catch{console.error("Error loading options")}return[]},[r,m,a]);(0,t.useEffect)(()=>{r&&C()},[r,C,a]);const P=async M=>{E?h&&h(M,m,r):(await(0,f.hB)(M,m,r),await C())},D=l.Vt.hasPermission(s.AccessControlAction.ActionUserRolesAdd)&&l.Vt.hasPermission(s.AccessControlAction.ActionUserRolesRemove);return t.createElement(i.I,{appliedRoles:y,basicRole:o,onRolesChange:P,onBasicRoleChange:u,roleOptions:d,isLoading:x,disabled:g,basicRoleDisabled:p,showBasicRole:!0,apply:E,canUpdateRoles:D,maxWidth:v})}},11630:(Z,O,e)=>{"use strict";e.d(O,{_C:()=>f,hB:()=>i,kt:()=>s,u7:()=>c,ul:()=>l});var t=e(54899),n=e(25310);const l=async(o,m)=>{let r="/api/access-control/roles?delegatable=true";o&&(r+=`&targetOrgId=${o}`);const u=await(0,t.i)().get(r);return!u||!u.length?[]:u.map(n.w)},s=async(o,m)=>{let r=`/api/access-control/users/${o}/roles`;m&&(r+=`?targetOrgId=${m}`);try{const u=await(0,t.i)().get(r);return!u||!u.length?[]:u.map(n.w)}catch(u){return(0,t.kW)(u)&&(u.isHandled=!0),[]}},i=(o,m,r)=>{let u=`/api/access-control/users/${m}/roles`;r&&(u+=`?targetOrgId=${r}`);const d=o.flatMap(g=>g.uid);return(0,t.i)().put(u,{orgId:r,roleUids:d})},f=async(o,m)=>{let r=`/api/access-control/teams/${o}/roles`;m&&(r+=`?targetOrgId=${m}`);try{const u=await(0,t.i)().get(r);return!u||!u.length?[]:u.map(n.w)}catch(u){return(0,t.kW)(u)&&(u.isHandled=!0),[]}},c=(o,m,r)=>{let u=`/api/access-control/teams/${m}/roles`;r&&(u+=`?targetOrgId=${r}`);const d=o.flatMap(g=>g.uid);return(0,t.i)().put(u,{orgId:r,roleUids:d})}},25310:(Z,O,e)=>{"use strict";e.d(O,{r:()=>t,w:()=>n});const t=l=>l.delegatable!==void 0&&!l.delegatable,n=l=>{const s="fixed:";if(!l.displayName&&l.name.startsWith(s)){let i="";i=l.name.replace(s,"").replace(/:/g," "),l.displayName=i}return l}},16964:(Z,O,e)=>{"use strict";e.d(O,{V:()=>s});var t=e(68404),n=e(61549),l=e(8928);const s=c=>t.createElement(n.Z,{...c,cacheRequests:!0,preProcessor:f});let i=new Map;function f(c){let o=i.get(c);return o||(o=l.QX.sanitizeSVGContent(c),i.set(c,o)),o}},99661:(Z,O,e)=>{"use strict";e.d(O,{o:()=>m});var t=e(99151),n=e.n(t),l=e(68404),s=e(53217),i=e(29930);const f=(r="General",u)=>`${r}/${u}`;async function c(r=""){return i.ae.search({type:"dash-db",query:r,limit:100}).then(u=>u.map(d=>({value:{uid:d.uid,title:d.title,folderTitle:d.folderTitle,folderUid:d.folderUid},label:f(d?.folderTitle,d.title)})))}const o=n()(c,250,{leading:!0}),m=({value:r,onChange:u,placeholder:d="Select dashboard",noOptionsMessage:g="No dashboards found",...p})=>{const[E,h]=(0,l.useState)();(0,l.useEffect)(()=>{!r||r===E?.value?.uid||(async()=>{const v=await i.ae.getDashboardByUid(r);v.dashboard&&h({value:{uid:v.dashboard.uid,title:v.dashboard.title,folderTitle:v.meta.folderTitle,folderUid:v.meta.folderUid},label:f(v.meta?.folderTitle,v.dashboard.title)})})()},[r]);const a=(0,l.useCallback)(v=>{h(v),u?.(v?.value)},[u,h]);return l.createElement(s.qb,{loadOptions:o,onChange:a,placeholder:d,noOptionsMessage:g,value:E,defaultOptions:!0,...p})}},79658:(Z,O,e)=>{"use strict";e.d(O,{Es:()=>v});var t=e(9892),n=e(99151),l=e.n(n),s=e(68404),i=e(22350),f=e(25318),c=e(68183),o=e(72648),m=e(46967),r=e(53217),u=e(18271),d=e(35287),g=e(82002),p=e(50946),E=e(81168);const h="+ Add new",a="-10";function v(P){const{dashboardId:D,allowEmpty:M,onChange:b,filter:R,enableCreateNew:B,inputId:w,onClear:A,enableReset:I,initialFolderUid:F,initialTitle:K="",permissionLevel:W=E.PermissionLevelString.Edit,rootName:U="General",showRoot:N=!0,skipInitialLoad:S,accessControlMetadata:Y,customAdd:Q,folderWarning:z}=P,[G,k]=(0,s.useState)(null),[j,de]=(0,s.useState)(!1),[ge,re]=(0,s.useState)(""),[ce,ie]=(0,s.useState)(G?.title??""),fe=(0,o.wW)(C),Ce=typeof A=="function",ee=(0,s.useCallback)(async Ie=>{const We=await(0,p.ZL)(Ie,W,Y),He=x(We,R);return(g.Vt.hasAccess(E.AccessControlAction.DashboardsWrite,g.Vt.isEditor)||g.Vt.hasAccess(E.AccessControlAction.DashboardsCreate,g.Vt.isEditor))&&U?.toLowerCase().startsWith(Ie.toLowerCase())&&N&&He.unshift({label:U,value:""}),I&&Ie===""&&K!==""&&!He.find(et=>et.label===K)&&He.unshift({label:K,value:F}),B&&Boolean(Q)?[...He,{value:a,label:h,title:Ie}]:He},[I,F,K,W,U,N,Y,R,B,Q]),ne=(0,s.useMemo)(()=>l()(ee,300,{leading:!0}),[ee]),X=async()=>{const Ie={label:K,value:void 0},We={label:U,value:""},Je=await ee("");let He=null;F!=null?He=Je.find(Ae=>Ae.value===F)||null:I&&K?He=Ie:F&&(He=Je.find(Ae=>Ae.id===F)||null),!He&&!M&&(g.Vt.isEditor?He=We:!!D?He=Ie:He=Je.length>0?Je[0]:Ie),!j&&k(He)};(0,s.useEffect)(()=>{G&&G.value!==F&&!j&&G.value&&G.label&&b({uid:G.value,title:G.label})},[G,F]),(0,i.Z)(async()=>{if(S){const Ie=await y({getFolder:p.Pb,folderUid:F,folderName:K});k(Ie)}await X()},[S,F,K]),(0,s.useEffect)(()=>{G&&G.id===a&&de(!0)},[G]);const te=(0,s.useCallback)((Ie,We)=>{if(Ie?.value===a)k({id:a,title:ge}),ie(ge);else{if(Ie||(Ie={value:"",label:U}),We.action==="clear"&&A){A();return}k(Ie),b({uid:Ie.value,title:Ie.label})}},[b,A,U,ge]),ae=(0,s.useCallback)(async Ie=>{if(z?.warningCondition(Ie))return!1;const We=await(0,p.L6)({title:Ie});let Je={value:"",label:"Not created"};return We.uid?(u.Z.emit(f.SI.alertSuccess,["Folder Created","OK"]),Je={value:We.uid,label:We.title},k(We),te(Je,{action:"create-option",option:Je})):u.Z.emit(f.SI.alertError,["Folder could not be created"]),Je},[z,te]),_=(0,s.useCallback)(Ie=>{const We=Boolean(Q?.disallowValues);if(Ie.key==="Enter"&&We&&!Q?.isAllowedValue(ce)){Ie.preventDefault();return}switch(Ie.key){case"Enter":{ae(G?.title),de(!1);break}case"Escape":k({value:"",label:U}),de(!1)}},[Q?.disallowValues,Q?.isAllowedValue,ce,ae,G?.title,U]),ve=Ie=>{const We=Ie.currentTarget.value;ie(We),k({id:void 0,title:We})},Ve=()=>{k({value:"",label:U}),de(!1)},it=(Ie,{action:We})=>{We==="input-change"&&re(Je=>Ie),We==="menu-close"&&re(Je=>Ie)},rt=()=>z?.warningCondition(ce)?s.createElement(z.warningComponent,null):null,pe=()=>z?.warningCondition(ge)?s.createElement(z.warningComponent,null):null;return j?s.createElement(s.Fragment,null,s.createElement(rt,null),s.createElement("div",{className:fe.newFolder},"Press enter to create the new folder."),s.createElement(m.I,{"aria-label":"aria-label",width:30,autoFocus:!0,value:ce,onChange:ve,onKeyDown:_,placeholder:"Press enter to confirm new folder.",onBlur:Ve})):s.createElement("div",{"data-testid":c.wl.components.FolderPicker.containerV2},s.createElement(pe,null),s.createElement(r.gY,{inputId:w,"aria-label":c.wl.components.FolderPicker.input,loadingMessage:(0,d.t)("folder-picker.loading","Loading folders..."),defaultOptions:!0,defaultValue:G,inputValue:ge,onInputChange:it,value:G,allowCustomValue:B&&!Boolean(Q),loadOptions:ne,onChange:te,onCreateOption:ae,isClearable:Ce}))}function x(P,D){return(D?D(P):P).map(b=>({label:b.title,value:b.uid}))}async function y({folderName:P,folderUid:D,getFolder:M}){if(D==null)throw new Error("folderUid is not found.");return P?{label:P,value:D}:{label:(await M(D)).title,value:D}}const C=P=>({newFolder:t.css`
    color: ${P.colors.warning.main};
    font-size: ${P.typography.bodySmall.fontSize};
    padding-bottom: ${P.spacing(1)};
  `})},95509:(Z,O,e)=>{"use strict";e.d(O,{P:()=>o});var t=e(68404),n=e(22350),l=e(53217),s=e(39904),i=e(10216),f=e(82e3);const c=()=>(0,f.getGrafanaSearcher)().getSortOptions();function o({onChange:m,value:r,placeholder:u,filter:d,getSortOptions:g,isClearable:p}){const E=(0,n.Z)(async()=>{const a=await(g??c)();return d?a.filter(v=>d.includes(v.value)):a},[g,d]);if(E.loading)return null;const h=Boolean(r?.includes("desc")||r?.startsWith("-"));return t.createElement(l.Ph,{key:r,width:28,onChange:m,value:E.value?.find(a=>a.value===r)??null,options:E.value,"aria-label":"Sort",placeholder:u??`Sort (Default ${i.yw.label})`,prefix:t.createElement(s.J,{name:h?"sort-amount-down":"sort-amount-up"}),isClearable:p})}},94080:(Z,O,e)=>{"use strict";e.d(O,{c:()=>f});var t=e(82897),n=e.n(t),l=e(68404),s=e(54899),i=e(53217);class f extends l.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/teams/search?perpage=100&page=1&query=${o}`).then(m=>{const r=m.teams.map(u=>({value:u,label:u.name,imgUrl:u.avatarUrl}));return this.setState({isLoading:!1}),r})}render(){const{onSelected:o,className:m}=this.props,{isLoading:r}=this.state;return l.createElement("div",{className:"user-picker","data-testid":"teamPicker"},l.createElement(i.qb,{isLoading:r,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:o,className:m,placeholder:"Select a team",noOptionsMessage:"No teams found","aria-label":"Team picker"}))}}},28038:(Z,O,e)=>{"use strict";e.d(O,{f:()=>f});var t=e(82897),n=e.n(t),l=e(68404),s=e(54899),i=e(53217);class f extends l.Component{constructor(o){super(o),this.state={isLoading:!1},this.search=this.search.bind(this),this.debouncedSearch=(0,t.debounce)(this.search,300,{leading:!0,trailing:!0})}search(o){return this.setState({isLoading:!0}),(0,t.isNil)(o)&&(o=""),(0,s.i)().get(`/api/org/users/lookup?query=${o}&limit=100`).then(m=>m.map(r=>({id:r.userId,value:r.userId,label:r.login,imgUrl:r.avatarUrl,login:r.login}))).finally(()=>{this.setState({isLoading:!1})})}render(){const{className:o,onSelected:m,inputId:r}=this.props,{isLoading:u}=this.state;return l.createElement("div",{className:"user-picker","data-testid":"userPicker"},l.createElement(i.qb,{isClearable:!0,className:o,inputId:r,isLoading:u,defaultOptions:!0,loadOptions:this.debouncedSearch,onChange:m,placeholder:"Start typing to search for user",noOptionsMessage:"No users found","aria-label":"User picker"}))}}},21731:(Z,O,e)=>{"use strict";e.d(O,{e:()=>s});var t=e(68404),n=e(3385),l=e(39904);class s extends t.Component{constructor(f){super(f)}render(){const{label:f,removeIcon:c,count:o,onClick:m}=this.props,{color:r}=(0,n.Bx)(f),u={backgroundColor:r},d=o!==0&&t.createElement("span",{className:"tag-count-label"},`(${o})`);return t.createElement("span",{className:"label label-tag",style:u},c&&t.createElement(l.J,{onClick:m,name:"times"}),f," ",d)}}},24357:(Z,O,e)=>{"use strict";e.d(O,{D:()=>g});var t=e(9892),n=e(68404),l=e(81121),s=e(29076),i=e(72648),f=e(53217),c=e(39904),o=e(35287),m=e(21731);const r=({data:E,className:h,label:a,isFocused:v,innerProps:x})=>{const y=(0,i.wW)(u);return n.createElement("div",{className:(0,t.cx)(y.option,v&&y.optionFocused),"aria-label":"Tag option",...x},n.createElement("div",{className:`tag-filter-option ${h||""}`},typeof a=="string"?n.createElement(m.e,{label:a,removeIcon:!1,count:E.count??0}):a))},u=E=>({option:t.css`
      padding: 8px;
      white-space: nowrap;
      cursor: pointer;
      border-left: 2px solid transparent;
      &:hover {
        background: ${E.colors.background.secondary};
      }
    `,optionFocused:t.css`
      background: ${E.colors.background.secondary};
      border-style: solid;
      border-top: 0;
      border-right: 0;
      border-bottom: 0;
      border-left-width: 2px;
    `}),d=(E,h)=>RegExp((0,s.GE)(h),"i").test(E.value),g=({allowCustomValue:E=!1,formatCreateLabel:h,hideValues:a,inputId:v,isClearable:x,onChange:y,placeholder:C,tagOptions:P,tags:D,width:M})=>{const b=(0,i.wW)(p),R=D.map(G=>({value:G,label:G,count:0})),[B,w]=(0,n.useState)(R),[A,I]=(0,n.useState)(!1),[F,K]=(0,n.useState)(D),[W,U]=(0,n.useState)(R),N=(0,n.useMemo)(()=>D.join(),[D]),S=(0,n.useCallback)(async()=>(await P()).map(k=>D.includes(k.term)?{value:k.term,label:k.term,count:0}:{value:k.term,label:k.term,count:k.count}),[P,D]),Y=(0,n.useCallback)(async()=>{I(!0);const G=await S();E&&W.forEach(k=>G.push(k)),w(G),I(!1)},[E,W,S]);(0,n.useEffect)(()=>{D.length>0&&B.length===0&&Y()},[Y,B.length,D.length]),(0,n.useEffect)(()=>{D!==F&&(K(D),Y())},[Y,F,D]);const Q=G=>{G.forEach(k=>k.count=0),y((G||[]).map(k=>k.value)),E&&U(G.filter(k=>!D.includes(k)))},z={key:N,onFocus:Y,isLoading:A,options:B,allowCreateWhileLoading:!0,allowCustomValue:E,formatCreateLabel:h,defaultOptions:!0,filterOption:d,getOptionLabel:G=>G.label,getOptionValue:G=>G.value,inputId:v,isMulti:!0,onChange:Q,loadingMessage:(0,o.t)("tag-filter.loading","Loading..."),noOptionsMessage:(0,o.t)("tag-filter.no-tags","No tags found"),placeholder:C||(0,o.t)("tag-filter.placeholder","Filter by tag"),value:R,width:M,components:{Option:r,MultiValueLabel:()=>null,MultiValueRemove(G){const{data:k}=G;return n.createElement(l.c.MultiValueRemove,{...G},n.createElement(m.e,{key:k.label,label:k.label,removeIcon:!0,count:k.count}))},MultiValueContainer:a?()=>null:l.c.MultiValueContainer}};return n.createElement("div",{className:b.tagFilter},x&&D.length>0&&n.createElement("button",{className:b.clear,onClick:()=>Q([])},"Clear tags"),n.createElement(f.NU,{...z,prefix:n.createElement(c.J,{name:"tag-alt"}),"aria-label":"Tag filter"}))};g.displayName="TagFilter";const p=E=>({tagFilter:t.css`
    position: relative;
    min-width: 180px;
    flex-grow: 1;

    .label-tag {
      margin-left: 6px;
      cursor: pointer;
    }
  `,clear:t.css`
    background: none;
    border: none;
    text-decoration: underline;
    font-size: 12px;
    padding: none;
    position: absolute;
    top: -17px;
    right: 0;
    cursor: pointer;
    color: ${E.colors.text.secondary};

    &:hover {
      color: ${E.colors.text.primary};
    }
  `})},32873:(Z,O,e)=>{"use strict";e.d(O,{a:()=>m});var t=e(82897),n=e.n(t),l=e(68404),s=e(33180),i=e(46519),f=e(3630),c=e(59796);const o="grafana.dashboard.timepicker.history",m=E=>l.createElement(c.G,{storageKey:o,defaultValue:[]},(h,a)=>{const v=u(h),x=r(v,E.timeZone);return l.createElement(f.Xc,{...E,history:x,onChange:y=>{d(y,v,a),E.onChange(y)}})});function r(E,h){return E.map(a=>s.convertRawToRange(a,h))}function u(E){return E.map(h=>{const a=typeof h.from=="string"?h.from:h.from.toISOString(),v=typeof h.to=="string"?h.to:h.to.toISOString();return{from:a,to:v}})}function d(E,h,a){if(!g(E))return;const v={from:typeof E.raw.from=="string"?E.raw.from:E.raw.from.toISOString(),to:typeof E.raw.to=="string"?E.raw.to:E.raw.to.toISOString()},x=p([v,...h]);a(x)}function g(E){return(0,i.v9)(E.raw.from)||(0,i.v9)(E.raw.to)}function p(E){return(0,t.uniqBy)(E,h=>h.from+h.to).slice(0,4)}},97551:(Z,O,e)=>{"use strict";e.d(O,{KN:()=>F,iK:()=>ge,Y:()=>re,$m:()=>j,Ur:()=>G,Nj:()=>U,AR:()=>z,SA:()=>k});var t=e(66926),n=e(89890),l=e(20112),s=e(29431),i=e(55294),f=e(14582),c=e(24177),o=e(59309),m=e(58230),r=e(19695),u=e(98234),d=e(40538),g=e(13347),p=e(72269),E=e(45778),h=e(45389),a=e(2445),v=e(75974),x=e(64724),y=e(28586),C=e(60892);const{round:P,min:D,ceil:M}=Math,b=2;let R=6;const B=y.Gj;function w(ce,ie,fe,Ce,ee){(0,y.Qm)(fe,ce,B,ie,(ne,X,te)=>{let ae=Ce*X,_=Ce*te;ee(ne,ae,_)})}function A(ce){const{mode:ie,numSeries:fe,isDiscrete:Ce,rowHeight:ee=0,colWidth:ne=0,showValue:X,mergeValues:te=!1,theme:ae,label:_,formatValue:ve,alignValue:Ve="left",getTimeRange:it,getValueColor:rt,getFieldConfig:pe,onHover:Ie,onLeave:We}=ce;let Je;const He=Array(fe).fill(null).map(()=>{let Ge=document.createElement("div");return Ge.classList.add("bar-mark"),Ge.style.position="absolute",Ge.style.background="rgba(255,255,255,0.2)",Ge});let Ae;const et=Ge=>{Ae=Array(fe).fill(null).map(dt=>Array(Ge).fill(null))},_e=`500 ${Math.round(12*devicePixelRatio)}px ${ae.typography.fontFamily}`,Se=Array(fe).fill(null),Fe=[ne,1/0],Xe=1-Fe[0],Qe=(Fe[1]??1/0)*v.Z.pxRatio,ct=new Map,ht=new Map;function ft(Ge){ct.forEach((dt,pt)=>{Ge.fillStyle=pt,Ge.fill(dt)}),ht.forEach((dt,pt)=>{Ge.strokeStyle=pt,Ge.stroke(dt)}),ct.clear(),ht.clear()}function Re(Ge,dt,pt,Ke,je,ot,at,xt,Dt,wt,sn,mn,Dn){if(at<1)return;const Rn=rt(wt+1,mn),St=pe(wt),At=I(St,Rn);if(Ae[wt][sn]={x:P(je-pt),y:P(ot-Ke),w:at,h:xt,sidx:wt+1,didx:sn,fillColor:At},Dn){let Wt=At,Qt=ct.get(Wt);if(Qt==null&&ct.set(Wt,Qt=new Path2D),dt(Qt,je,ot,at,xt),Dt){let jt=Rn,Xt=ht.get(jt);Xt==null&&ht.set(jt,Xt=new Path2D),dt(Xt,je+Dt/2,ot+Dt/2,at-Dt,xt-Dt)}}else Ge.beginPath(),dt(Ge,je,ot,at,xt),Ge.fillStyle=At,Ge.fill(),Dt&&(Ge.beginPath(),dt(Ge,je+Dt/2,ot+Dt/2,at-Dt,xt-Dt),Ge.strokeStyle=Rn,Ge.lineWidth=Dt,Ge.stroke())}const nt=(Ge,dt,pt,Ke)=>(v.Z.orient(Ge,dt,(je,ot,at,xt,Dt,wt,sn,mn,Dn,Rn,St,At,Wt,Qt)=>{let jt=P((je.width||0)*v.Z.pxRatio),Xt=Ce(dt);Ge.ctx.save(),Qt(Ge.ctx,Ge.bbox.left,Ge.bbox.top,Ge.bbox.width,Ge.bbox.height),Ge.ctx.clip(),w(ee,dt-1,fe,St,(tn,on,dn)=>{if(ie===F.Changes)for(let $t=0;$t<at.length;$t++){let qt=at[$t];if(qt!=null){let Vt=Math.round(wt(ot[$t],xt,Rn,mn)),nn=$t;for(;++nn<at.length&&(at[nn]===void 0||te&&at[nn]===qt););let un=nn===at.length?mn+Rn+jt:Math.round(wt(ot[nn],xt,Rn,mn));Re(Ge.ctx,Qt,mn,Dn,Vt,P(Dn+on),un-Vt,P(dn),jt,tn,$t,qt,Xt),$t=nn-1}}else if(ie===F.Samples){let $t=wt(ot[1],xt,Rn,mn)-wt(ot[0],xt,Rn,mn),qt=$t*Xe,Vt=P(D(Qe,$t-qt)-jt),nn=Vt/2;for(let un=pt;un<=Ke;un++)if(at[un]!=null){let En=wt(ot[un],xt,Rn,mn);Re(Ge.ctx,Qt,mn,Dn,P(En-nn),P(Dn+on),Vt,P(dn),jt,tn,un,at[un],Xt)}}}),Xt&&(Ge.ctx.lineWidth=jt,ft(Ge.ctx)),Ge.ctx.restore()}),null),le=ve==null||X===d.Jp.Never?!1:(Ge,dt,pt,Ke)=>(Ge.ctx.save(),Ge.ctx.rect(Ge.bbox.left,Ge.bbox.top,Ge.bbox.width,Ge.bbox.height),Ge.ctx.clip(),Ge.ctx.font=_e,Ge.ctx.textAlign=ie===F.Changes?Ve:"center",Ge.ctx.textBaseline="middle",v.Z.orient(Ge,dt,(je,ot,at,xt,Dt,wt,sn,mn,Dn,Rn,St)=>{let At=P((je.width||0)*v.Z.pxRatio),Wt=P(Dn+$e[dt-1]);for(let Qt=0;Qt<at.length;Qt++)if(at[Qt]!=null){const jt=Ae[dt-1][Qt];if(!jt||jt.x>=Rn)continue;let Xt=Math.floor(jt?.w/R);if(X===d.Jp.Auto&&Xt<2)continue;let tn=ve(dt,at[Qt]),on=P(jt.x+mn+jt.w/2);ie===F.Changes&&(Ve==="left"?on=P(jt.x+mn+At+b):Ve==="right"&&(on=P(jt.x+mn+jt.w-At-b))),Ge.ctx.fillStyle=ae.colors.getContrastText(jt.fillColor,3),Ge.ctx.fillText(tn.slice(0,Xt),on,Wt)}}),Ge.ctx.restore(),!1),Pe=Ge=>{let dt=Ge.over,pt="";for(let Ke=32;Ke<=126;Ke++)pt+=String.fromCharCode(Ke);R=Math.ceil(Ge.ctx.measureText(pt).width/pt.length*v.Z.pxRatio),R+=2.5,dt.style.overflow="hidden",He.forEach(Ke=>{dt.appendChild(Ke)})},Oe=Ge=>{Je=Je||new C.lW(0,0,Ge.bbox.width,Ge.bbox.height),Je.clear(),et(Ge.data[0].length),Ge.series.forEach(dt=>{dt._paths=null})};function Le(Ge,dt){let pt=He[Ge],Ke=v.Z.pxRatio;dt?(pt.style.display="",pt.style.left=P(dt.x/Ke)+"px",pt.style.top=P(dt.y/Ke)+"px",pt.style.width=P(dt.w/Ke)+"px",pt.style.height=P(dt.h/Ke)+"px"):pt.style.display="none",Se[Ge]=dt}let Ye;function be(Ge,dt){let pt;for(let Ke=0;Ke<fe;Ke++){let je;if(Ge>=0){let ot=$e[Ke];Je.get(Ge,ot,1,1,at=>{(0,C.Pn)(Ge,ot,at.x,at.y,at.x+at.w,at.y+at.h)&&(je=at,Math.abs(dt-ot)<=at.h/2&&(pt=at))})}je?je!==Se[Ke]&&Le(Ke,je):Se[Ke]!=null&&Le(Ke,null)}pt?pt!==Ye&&(Ye=pt,Ie(pt.sidx,pt.didx,pt)):Ye&&(Ye=void 0,We())}function Te(Ge,dt){let pt;Je.get(Ge,dt,1,1,Ke=>{(0,C.Pn)(Ge,dt,Ke.x,Ke.y,Ke.x+Ke.w,Ke.y+Ke.h)&&(pt=Ke)}),pt?(Le(0,pt),pt!==Ye&&(Ye=pt,Ie(pt.sidx,pt.didx,pt))):Ye&&(Le(0,null),Ye=void 0,We())}const me=ie===F.Changes?be:Te,he=Ge=>{let dt=P(Ge.cursor.left*v.Z.pxRatio),pt=P(Ge.cursor.top*v.Z.pxRatio);if(!Je.o.length&&Je.q==null)for(const Ke of Ae)for(const je of Ke)je&&Je.add(je);me(dt,pt)},De={y:!1,x:ie===F.Changes,points:{show:!1}},$e=Array(fe).fill(0),ke=Array(fe).fill(0),tt=[0,1];return{cursor:De,xSplits:ie===F.Samples?(Ge,dt,pt,Ke,je,ot)=>{let at=[],xt=Ge.data[0][1]-Ge.data[0][0],Dt=M(je/xt);for(let wt=0;wt<Ge.data[0].length;wt+=Dt){let sn=Ge.data[0][wt];sn>=pt&&sn<=Ke&&at.push(sn)}return at}:null,xRange:Ge=>{const dt=it();let pt=dt.from.valueOf(),Ke=dt.to.valueOf();if(ie===F.Samples){let at=(Ge.data[0][1]-Ge.data[0][0])/2;pt<=Ge.data[0][0]&&(pt=Ge.data[0][0]-at);let xt=Ge.data[0].length-1;Ke>=Ge.data[0][xt]&&(Ke=Ge.data[0][xt]+at)}return[pt,Ke]},ySplits:Ge=>(w(ee,null,fe,Ge.bbox.height,(dt,pt,Ke)=>{$e[dt]=P(pt+Ke/2),ke[dt]=Ge.posToVal($e[dt]/v.Z.pxRatio,p.j)}),ke),yValues:(Ge,dt)=>dt.map((pt,Ke)=>_(Ke+1)),yRange:tt,drawPaths:nt,drawPoints:le,init:Pe,drawClear:Oe,setCursor:he}}function I(ce,ie){if(ie[0]==="#"&&ie.length===9)return ie;const fe=(ce.fillOpacity??100)/100;return(0,x.alpha)(ie,fe)}var F=(ce=>(ce.Changes="changes",ce.Samples="samples",ce))(F||{});const K={lineWidth:0,fillOpacity:80};function W(ce){return ce.ctrlKey||ce.metaKey||ce.shiftKey?SeriesVisibilityChangeMode.AppendToSelection:SeriesVisibilityChangeMode.ToggleSelection}const U=({frame:ce,theme:ie,timeZones:fe,getTimeRange:Ce,mode:ee,eventBus:ne,sync:X,rowHeight:te,colWidth:ae,showValue:_,alignValue:ve,mergeValues:Ve,getValueColor:it})=>{const rt=new g.U(fe[0]),pe="time",Ie="x",We=ct=>{const ht=ct.config?.color?.mode;return!(ht&&ct.display&&ht.startsWith("continuous-"))},Je=(ct,ht)=>{const ft=ce.fields[ct];return ft.state?.origin?.fieldIndex!==void 0&&ft.state?.origin?.frameIndex!==void 0&&it?it(ft.state?.origin?.frameIndex,ft.state?.origin?.fieldIndex,ht):t.R},He={mode:ee,numSeries:ce.fields.length-1,isDiscrete:ct=>We(ce.fields[ct]),mergeValues:Ve,rowHeight:te,colWidth:ae,showValue:_,alignValue:ve,theme:ie,label:ct=>(0,n.C)(ce.fields[ct],ce),getFieldConfig:ct=>ce.fields[ct].config.custom,getValueColor:Je,getTimeRange:Ce,formatValue:(ct,ht)=>(0,l.zc)(ce.fields[ct].display(ht)),onHover:(ct,ht)=>{et=ct,_e=ht,Ae=!0},onLeave:()=>{et=null,_e=null,Ae=!0}};let Ae=!1,et=null,_e=null;const Se=A(He),Fe={point:{[pe]:null,[p.j]:null},data:ce};rt.addHook("init",Se.init),rt.addHook("drawClear",Se.drawClear),rt.addHook("setCursor",Se.setCursor);const Xe=(ct,ht,ft)=>{Ae&&(et!=null&&(ct(et),ht(_e)),Ae=!1),ft(et==null)};rt.setTooltipInterpolator(Xe),rt.setPrepData(ct=>(0,a.Bj)(ct[0],(0,a.i7)(ct[0]))),rt.setCursor(Se.cursor),rt.addScale({scaleKey:Ie,isTime:!0,orientation:d.wN.Horizontal,direction:d.bQ.Right,range:Se.xRange}),rt.addScale({scaleKey:p.j,isTime:!1,orientation:d.wN.Vertical,direction:d.bQ.Up,range:Se.yRange}),rt.addAxis({scaleKey:Ie,isTime:!0,splits:Se.xSplits,placement:d.LB.Bottom,timeZone:fe[0],theme:ie,grid:{show:!0}}),rt.addAxis({scaleKey:p.j,isTime:!1,placement:d.LB.Left,splits:Se.ySplits,values:Se.yValues,grid:{show:!1},ticks:{show:!1},gap:16,theme:ie});let Qe=0;for(let ct=0;ct<ce.fields.length;ct++){if(ct===0)continue;const ht=ce.fields[ct],ft=ht.config,Re={...K,...ft.custom};ht.state.seriesIndex=Qe++,rt.addSeries({scaleKey:p.j,pathBuilder:Se.drawPaths,pointsBuilder:Se.drawPoints,lineWidth:Re.lineWidth,fillOpacity:Re.fillOpacity,theme:ie,show:!Re.hideFrom?.viz,thresholds:ft.thresholds,dataFrameFieldIndex:ht.state?.origin})}if(X&&X()!==s.m.Off){let ct={};ct.sync={key:"__global_",filters:{pub:(ht,ft,Re,nt,le,Pe,Oe)=>X&&X()===s.m.Off?!1:(Fe.rowIndex=Oe,Re<0&&nt<0?(Fe.point[pe]=null,Fe.point[p.j]=null,ne.publish(new i.xH)):(Fe.point[pe]=ft.posToVal(Re,Ie),Fe.point.panelRelY=nt>0?nt/Pe:1,Fe.down=void 0,ne.publish(new i.es(Fe))),!0)},scales:[Ie,null]},rt.setSync(),rt.setCursor(ct)}return rt};function N(ce){const ie=new Map;for(let fe=0;fe<ce.fields.length;fe++)ie.set(getFieldDisplayName(ce.fields[fe],ce),fe);return ie}function S(ce){let ie=ce[0],fe;for(let Ce=1;Ce<ce.length;Ce++){let ee=ce[Ce];ee===null?ie=null:ee===ie?(fe||(fe=[...ce]),fe[Ce]=void 0):ee!=null&&(ie=ee)}return fe}function Y(ce){let ie=ce.config.custom?.spanNulls;return ie?ie===!0?1/0:ie:-1}function Q(ce,ie){const fe=ce.config.thresholds;if(ce.type!==f.fS.number||!fe||!fe.steps.length)return;const Ce=G(ce.config,ie);if(Ce.length!==fe.steps.length)return;const ee=new Map,ne=new Map;for(let ae=0;ae<Ce.length;ae++)ee.set(fe.steps[ae],Ce[ae].label),ne.set(Ce[ae].label,Ce[ae].color);let X=ce.values.toArray();const te=new Array(ce.values.length);if(fe.mode===c.H.Percentage){const{min:ae,max:_}=(0,o.xD)(ce),ve=_-ae;X=X.map(Ve=>Ve==null?Ve:(Ve-ae)/ve*100)}for(let ae=0;ae<te.length;ae++){const _=X[ae];_==null?te[ae]=_:te[ae]=ee.get((0,m.m1)(_,fe.steps))}return{...ce,config:{...ce.config,custom:{...ce.config.custom,spanNulls:Y(ce)}},type:f.fS.string,values:new r.G(te),display:ae=>({text:String(ae),color:ne.get(String(ae)),numeric:NaN})}}function z(ce,ie,fe,Ce){if(!ce?.length)return{warn:"No data in response"};let ee=!1;const ne=[];for(let X of ce){let te=!1,ae=!1,_=(0,u.Y3)(X,X.fields.findIndex(it=>it.type===f.fS.time)),ve=(0,E.w)({frame:_,refFieldPseudoMin:fe.from.valueOf(),refFieldPseudoMax:fe.to.valueOf()});ve!==X&&(ae=!0);const Ve=[];for(let it of(0,h.I)(ve).fields)switch(it.type){case f.fS.time:te=!0,ee=!0,Ve.push(it);break;case f.fS.number:if(ie&&it.config.color?.mode===t.S.Thresholds){const rt=Q(it,Ce);if(rt){Ve.push(rt),ae=!0;continue}}case f.fS.boolean:case f.fS.string:it={...it,config:{...it.config,custom:{...it.config.custom,spanNulls:Y(it)}}},Ve.push(it);break;default:ae=!0}te&&Ve.length>1&&(ee=!0,ae?ne.push({..._,fields:Ve}):ne.push(_))}return ee?ne.length?{frames:ne}:{warn:"No graphable fields"}:{warn:"Data does not have a time field"}}function G(ce,ie){const fe=[],Ce=ce.thresholds;if(!Ce||!Ce.steps.length)return fe;const ee=Ce.steps,ne=(0,l.Cf)(Ce.mode===c.H.Percentage?"percent":ce.unit??""),X=te=>(0,l.zc)(ne(te));for(let te=0;te<ee.length;te++){let ae=ee[te],_=ae.value,ve="",Ve="";_===-1/0&&te<ee.length-1?(_=ee[te+1].value,ve="< "):Ve="+",fe.push({label:`${ve}${X(_)}${Ve}`,color:ie.visualization.getColorByName(ae.color),yAxis:1})}return fe}function k(ce,ie,fe){if(!(!ce||ie.showLegend===!1))return j(de(ce),fe)}function j(ce,ie){if(!ce.length)return;const fe=[],Ce=ce[0].config,ee=Ce.color?.mode??t.S.Fixed,ne=Ce.thresholds;if(ee===t.S.Thresholds&&ne?.steps&&ne.steps.length>1)return G(Ce,ie);if(ee.startsWith("continuous"))return;let X=new Map;return ce.forEach(te=>{te.values.toArray().forEach(ae=>{let _=te.display(ae);_.color&&X.set(_.text,_.color)})}),X.forEach((te,ae)=>{ae.length>0&&fe.push({label:ae,color:ie.visualization.getColorByName(te??t.R),yAxis:1})}),fe}function de(ce){const ie=[];for(const fe of ce)for(const Ce of fe.fields)Ce.type!==f.fS.time&&ie.push(Ce);return ie}function ge(ce,ie){let fe,Ce=ie+1;if(Ce>=ce.values.length)return null;const ee=ce.values.get(ie);for(;fe===void 0;){if(Ce>=ce.values.length)return null;const ne=ce.values.get(Ce);ne===void 0||ne===ee?Ce++:fe=Ce}return fe}function re(ce){if(ce<0||Number.isNaN(ce))return"";let ie,fe,Ce,ee,ne,X,te,ae;return te=Math.floor(ce/1e3),X=Math.floor(te/60),te=te%60,ne=Math.floor(X/60),X=X%60,ee=Math.floor(ne/24),ne=ne%24,ie=Math.floor(ee/365),ie>0&&(ee=ee%365),fe=Math.floor(ee/30),fe>0&&(ee=ee%30),Ce=Math.floor(ee/7),Ce>0&&(ee=ee%7),ae=Math.round(ce%1e3*1e3)/1e3,(ie>0?ie+"y "+(fe>0?fe+"mo ":"")+(Ce>0?Ce+"w ":"")+(ee>0?ee+"d ":""):fe>0?fe+"mo "+(Ce>0?Ce+"w ":"")+(ee>0?ee+"d ":""):Ce>0?Ce+"w "+(ee>0?ee+"d ":""):ee>0?ee+"d "+(ne>0?ne+"h ":""):ne>0?ne+"h "+(X>0?X+"m ":""):X>0?X+"m "+(te>0?te+"s ":""):te>0?te+"s "+(ae>0?ae+"ms ":""):ae>0?ae+"ms ":"0").trim()}},33045:(Z,O,e)=>{"use strict";e.d(O,{a:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(58564),i=e(77117),f=e(39904);const c=({values:m,onChange:r,id:u})=>{const d=(0,l.wW)(o);return n.createElement("div",{className:d.wrapper},m.length?m.map((g,p)=>n.createElement("div",{className:d.pair,key:p},n.createElement(s.X,{id:`${u}-key-${p}`,placeholder:"Tag name",value:g.key,onChange:E=>{r(m.map((h,a)=>(a===p&&(h.key=String(E)),h)))}}),n.createElement(i.W,{"aria-label":"equals",className:d.operator},"as"),n.createElement(s.X,{id:`${u}-value-${p}`,placeholder:"New name (optional)",value:g.value||"",onChange:E=>{r(m.map((h,a)=>(a===p&&(h.value=String(E)),h)))}}),n.createElement("button",{onClick:()=>r([...m.slice(0,p),...m.slice(p+1)]),className:"gf-form-label query-part","aria-label":"Remove tag",type:"button"},n.createElement(f.J,{name:"times"})),p===m.length-1?n.createElement("button",{onClick:()=>r([...m,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})):null)):n.createElement("button",{onClick:()=>r([...m,{key:"",value:""}]),className:"gf-form-label query-part","aria-label":"Add tag",type:"button"},n.createElement(f.J,{name:"plus"})))},o=m=>({wrapper:t.css`
    display: flex;
    flex-direction: column;
    gap: ${m.spacing(.5)} 0;
  `,pair:t.css`
    display: flex;
    justify-content: start;
    align-items: center;
  `,operator:t.css`
    color: ${m.v1.palette.orange};
    width: auto;
  `})},83437:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>u,p:()=>r});var t=e(9892),n=e(68404),l=e(53117),s=e(72648),i=e(11543),f=e(81764),c=e(8944),o=e(46967),m=e(33045);function r(E){if(E?.tracesToLogsV2)return E.tracesToLogsV2;if(!E?.tracesToLogs)return;const h={customQuery:!1};return h.datasourceUid=E.tracesToLogs.datasourceUid,h.tags=E.tracesToLogs.mapTagNamesEnabled?E.tracesToLogs.mappedTags:E.tracesToLogs.tags?.map(a=>({key:a})),h.filterByTraceID=E.tracesToLogs.filterByTraceID,h.filterBySpanID=E.tracesToLogs.filterBySpanID,h.spanStartTimeShift=E.tracesToLogs.spanStartTimeShift,h.spanEndTimeShift=E.tracesToLogs.spanEndTimeShift,h}function u({options:E,onOptionsChange:h}){const a=(0,s.wW)(p),v=["loki","elasticsearch","grafana-splunk-datasource","grafana-opensearch-datasource","grafana-falconlogscale-datasource"],x=(0,n.useMemo)(()=>r(E.jsonData)||{customQuery:!1},[E.jsonData]),{query:y="",tags:C,customQuery:P}=x,D=(0,n.useCallback)(M=>{h({...E,jsonData:{...E.jsonData,tracesToLogsV2:{...x,...M},tracesToLogs:void 0}})},[h,E,x]);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Trace to logs"),n.createElement("div",{className:a.infoText},"Navigate from a trace span to the selected data source's logs."),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"The logs data source the trace is going to navigate to",label:"Data source",labelWidth:26},n.createElement(l.q,{inputId:"trace-to-logs-data-source-picker",filter:M=>v.includes(M.type),current:x.datasourceUid,noDefault:!0,width:40,onChange:M=>D({datasourceUid:M.uid})}))),n.createElement(g,{type:"start",value:x.spanStartTimeShift||"",onChange:M=>D({spanStartTimeShift:M})}),n.createElement(g,{type:"end",value:x.spanEndTimeShift||"",onChange:M=>D({spanEndTimeShift:M})}),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"Tags that will be used in the query. Default tags: 'cluster', 'hostname', 'namespace', 'pod'",label:"Tags",labelWidth:26},n.createElement(m.a,{values:C??[],onChange:M=>D({tags:M})}))),n.createElement(d,{disabled:P,type:"trace",id:"filterByTraceID",value:Boolean(x.filterByTraceID),onChange:M=>D({filterByTraceID:M})}),n.createElement(d,{disabled:P,type:"span",id:"filterBySpanID",value:Boolean(x.filterBySpanID),onChange:M=>D({filterBySpanID:M})}),n.createElement(i.Z,null,n.createElement(f._,{tooltip:"Use a custom query with the possibility to interpolate variables from the trace or span",label:"Use custom query",labelWidth:26},n.createElement(c.x,{id:"customQuerySwitch",value:P,onChange:M=>D({customQuery:M.currentTarget.checked})}))),P&&n.createElement(f._,{label:"Query",labelWidth:26,tooltip:"The query that will run when navigating from a trace to logs data source. Interpolate tags using the `$__tags` keyword",grow:!0},n.createElement(o.I,{label:"Query",type:"text",allowFullScreen:!0,value:y,onChange:M=>D({query:M.currentTarget.value})})))}function d(E){return n.createElement(i.Z,null,n.createElement(f._,{disabled:E.disabled,label:`Filter by ${E.type} ID`,labelWidth:26,grow:!0,tooltip:`Filters logs by ${E.type} ID`},n.createElement(c.x,{id:E.id,value:E.value,onChange:h=>E.onChange(h.currentTarget.checked)})))}function g(E){return n.createElement(i.Z,null,n.createElement(f._,{label:`Span ${E.type} time shift`,labelWidth:26,grow:!0,tooltip:`Shifts the ${E.type} time of the span. Default: 0 (Time units can be used here, for example: 5s, -1m, 3h)`},n.createElement(o.I,{type:"text",placeholder:"0",width:40,onChange:h=>E.onChange(h.currentTarget.value),value:E.value})))}const p=E=>({infoText:t.css`
    padding-bottom: ${E.spacing(2)};
    color: ${E.colors.text.secondary};
  `})},73194:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>i});var t=e(9892),n=e(68404),l=e(41818),s=e(72648);const i=({text:c="PRO",className:o,experimentId:m,eventVariant:r="",...u})=>{const d=(0,s.wW)(f);return(0,n.useEffect)(()=>{m&&(0,l.SZ)(m,"test",r)},[m,r]),n.createElement("span",{className:(0,t.cx)(d.badge,o),...u},c)},f=c=>({badge:t.css`
      margin-left: ${c.spacing(1.25)};
      border-radius: ${c.shape.borderRadius(5)};
      background-color: ${c.colors.success.main};
      padding: ${c.spacing(.25,.75)};
      color: white; // use the same color for both themes
      font-weight: ${c.typography.fontWeightMedium};
      font-size: ${c.typography.pxToRem(10)};
    `})},41197:(Z,O,e)=>{"use strict";e.d(O,{B:()=>o});var t=e(9892),n=e(68404),l=e(72648),s=e(35029),i=e(47694),f=e(43226);const c=r=>({Global:[{keys:["g","h"],description:"Go to Home Dashboard"},{keys:["g","e"],description:"Go to Explore"},{keys:["g","p"],description:"Go to Profile"},...i.vc.featureToggles.topnav?[{keys:[`${r} + k`],description:"Open search"}]:[{keys:["s","o"],description:"Open search"},{keys:[`${r} + k`],description:"Open command palette"}],{keys:["esc"],description:"Exit edit/setting views"},{keys:["h"],description:"Show all keyboard shortcuts"},{keys:["c","t"],description:"Change theme"}],Dashboard:[{keys:[`${r}+s`],description:"Save dashboard"},{keys:["d","r"],description:"Refresh all panels"},{keys:["d","s"],description:"Dashboard settings"},{keys:["d","v"],description:"Toggle in-active / view mode"},{keys:["d","k"],description:"Toggle kiosk mode (hides top nav)"},{keys:["d","E"],description:"Expand all rows"},{keys:["d","C"],description:"Collapse all rows"},{keys:["d","a"],description:"Toggle auto fit panels (experimental feature)"},{keys:[`${r} + o`],description:"Toggle shared graph crosshair"},{keys:["d","l"],description:"Toggle all panel legends"}],"Focused Panel":[{keys:["e"],description:"Toggle panel edit view"},{keys:["v"],description:"Toggle panel fullscreen view"},{keys:["p","s"],description:"Open Panel Share Modal"},{keys:["p","d"],description:"Duplicate Panel"},{keys:["p","r"],description:"Remove Panel"},{keys:["p","l"],description:"Toggle panel legend"}],"Time Range":[{keys:["t","z"],description:"Zoom out time range"},{keys:["t","\u2190"],description:"Move time range back"},{keys:["t","\u2192"],description:"Move time range forward"},{keys:["t","a"],description:"Make time range absolute/permanent"}]}),o=({onDismiss:r})=>{const u=(0,l.wW)(m),d=(0,n.useMemo)(()=>(0,f.vl)(),[]),g=(0,n.useMemo)(()=>c(d),[d]);return n.createElement(s.u,{title:"Shortcuts",isOpen:!0,onDismiss:r,onClickBackdrop:r},n.createElement("div",{className:u.categories},Object.entries(g).map(([p,E],h)=>n.createElement("div",{className:u.shortcutCategory,key:h},n.createElement("table",{className:u.shortcutTable},n.createElement("tbody",null,n.createElement("tr",null,n.createElement("th",{className:u.shortcutTableCategoryHeader,colSpan:2},p)),E.map((a,v)=>n.createElement("tr",{key:`${h}-${v}`},n.createElement("td",{className:u.shortcutTableKeys},a.keys.map((x,y)=>n.createElement("span",{className:u.shortcutTableKey,key:`${h}-${v}-${y}`},x))),n.createElement("td",{className:u.shortcutTableDescription},a.description)))))))))};function m(r){return{titleDescription:t.css`
      font-size: ${r.typography.bodySmall.fontSize};
      font-weight: ${r.typography.bodySmall.fontWeight};
      color: ${r.colors.text.disabled};
      padding-bottom: ${r.spacing(2)};
    `,categories:t.css`
      font-size: ${r.typography.bodySmall.fontSize};
      display: flex;
      flex-flow: row wrap;
      justify-content: space-between;
      align-items: flex-start;
    `,shortcutCategory:t.css`
      width: 50%;
      font-size: ${r.typography.bodySmall.fontSize};
    `,shortcutTable:t.css`
      margin-bottom: ${r.spacing(2)};
    `,shortcutTableCategoryHeader:t.css`
      font-weight: normal;
      font-size: ${r.typography.h6.fontSize};
      text-align: left;
    `,shortcutTableDescription:t.css`
      text-align: left;
      color: ${r.colors.text.disabled};
      width: 99%;
      padding: ${r.spacing(1,2)};
    `,shortcutTableKeys:t.css`
      white-space: nowrap;
      width: 1%;
      text-align: right;
      color: ${r.colors.text.primary};
    `,shortcutTableKey:t.css`
      display: inline-block;
      text-align: center;
      margin-right: ${r.spacing(.5)};
      padding: 3px 5px;
      font: 11px Consolas, 'Liberation Mono', Menlo, Courier, monospace;
      line-height: 10px;
      vertical-align: middle;
      border: solid 1px ${r.colors.border.medium};
      border-radius: ${r.shape.borderRadius(3)};
      color: ${r.colors.text.primary};
      background-color: ${r.colors.background.secondary};
    `}}},47694:(Z,O,e)=>{"use strict";e.d(O,{Oh:()=>c,ZP:()=>s,iE:()=>i,vc:()=>n.v});var t=e(24699),n=e(35645);let l=n.v;const s=l,i=()=>l,f=o=>{l={...l,...o}},c=Boolean(n.v.panels?.debug?.state===t.BV.alpha)},84952:(Z,O,e)=>{"use strict";e.d(O,{AV:()=>o,FL:()=>g,K3:()=>t,OA:()=>s,QO:()=>r,b0:()=>c,cz:()=>l,gN:()=>d,hD:()=>n,kh:()=>f,yM:()=>i,zF:()=>m});const t=30,n=8,l=24,s="v",i="h",f=4,c=250,o=t*3,m="panel-copy",r=2,u=23763571993,d=40,g="VisualizationSelectPane.ListMode"},34177:(Z,O,e)=>{"use strict";e.d(O,{h:()=>n,p:()=>l});var t=e(68404);const n=t.createContext(void 0);function l(){const s=(0,t.useContext)(n);if(!s)throw new Error("No GrafanaContext found");return s}},60499:(Z,O,e)=>{"use strict";e.d(O,{AT:()=>m,ZR:()=>u,iG:()=>d,t_:()=>r});var t=e(68404),n=e(44288),l=e(82052),s=e(81168),i=e(659);const f={title:"",text:"",severity:s.AppNotificationSeverity.Success,icon:"check"},c={title:"",text:"",severity:s.AppNotificationSeverity.Warning,icon:"exclamation-triangle"},o={title:"",text:"",severity:s.AppNotificationSeverity.Error,icon:"exclamation-triangle"},m=(g,p="",E)=>({...f,title:g,text:p,id:(0,n.Z)(),timestamp:Date.now(),showing:!0}),r=(g,p="",E,h)=>({...o,text:(0,l.i)(p),title:g,id:(0,n.Z)(),traceId:E,component:h,timestamp:Date.now(),showing:!0}),u=(g,p="",E)=>({...c,title:g,text:p,traceId:E,id:(0,n.Z)(),timestamp:Date.now(),showing:!0});function d(){const g=(0,s.useDispatch)();return(0,t.useMemo)(()=>({success:(p,E="")=>{g((0,i.$l)(m(p,E)))},warning:(p,E="",h)=>{g((0,i.$l)(u(p,E,h)))},error:(p,E="",h)=>{g((0,i.$l)(r(p,E,h)))}}),[g])}},77582:(Z,O,e)=>{"use strict";e.d(O,{Vt:()=>l.Vt,Wz:()=>s.W,h$:()=>t.Z,rv:()=>n.r});var t=e(18271),n=e(29494),l=e(82002),s=e(4050)},66719:(Z,O,e)=>{"use strict";e.d(O,{H6:()=>m,ZP:()=>r});var t=e(82897),n=e(58379),l=e(50395),s=e(86647);const i=x=>{const y=(0,s.F)().getInstanceSettings(x.datasourceName);return{id:x.ts.toString(),createdAt:x.ts,datasourceName:x.datasourceName,datasourceUid:y?.uid||"",starred:x.starred,comment:x.comment,queries:x.queries}},f=x=>{if(!(0,s.F)().getInstanceSettings({uid:x.datasourceUid}))throw new Error("Datasource not found.");return{ts:x.createdAt,datasourceName:x.datasourceName,starred:x.starred,comment:x.comment,queries:x.queries}};var c=e(69597);const o="grafana.explore.richHistory",m=1e4;class r{async getRichHistory(y){const C=p().map(i),P=y.starred?C.filter(M=>M.starred===!0):C,D=(0,c.ZX)(P,y.sortOrder,y.datasourceFilters,y.search,[y.from,y.to]);return{richHistory:D,total:D.length}}async addToRichHistory(y){const C=Date.now(),P={id:C.toString(),createdAt:C,...y},D=f(P),M=d(p()),b=D.queries.map(I=>(0,t.omit)(I,["key","refId"])),R=M.length>0&&M[0].queries.map(I=>(0,t.omit)(I,["key","refId"]));if((0,t.isEqual)(b,R)){const I=new Error("Entry already exists");throw I.name=l.j.DuplicatedEntry,I}const{queriesToKeep:B,limitExceeded:w}=g(M),A=[D,...B];try{n.Z.setObject(o,A)}catch(I){if(I instanceof Error&&I.name==="QuotaExceededError")v(l.j.StorageFull,`Saving rich history failed: ${I.message}`);else throw I}return w?{warning:{type:l.V.LimitExceeded,message:`Query history reached the limit of ${m}. Old, not-starred items have been removed.`},richHistoryQuery:P}:{richHistoryQuery:P}}async deleteAll(){n.Z.delete(o)}async deleteRichHistory(y){const C=parseInt(y,10),D=n.Z.getObject(o,[]).filter(M=>M.ts!==C);n.Z.setObject(o,D)}async updateStarred(y,C){return u(y,P=>P.starred=C)}async updateComment(y,C){return u(y,P=>P.comment=C)}async getSettings(){return{activeDatasourceOnly:n.Z.getObject(c.hO.activeDatasourceOnly,!1),retentionPeriod:n.Z.getObject(c.hO.retentionPeriod,7),starredTabAsFirstTab:n.Z.getBool(c.hO.starredTabAsFirstTab,!1),lastUsedDatasourceFilters:n.Z.getObject(c.hO.datasourceFilters,[]).map(y=>y.value)}}async updateSettings(y){n.Z.set(c.hO.activeDatasourceOnly,y.activeDatasourceOnly),n.Z.set(c.hO.retentionPeriod,y.retentionPeriod),n.Z.set(c.hO.starredTabAsFirstTab,y.starredTabAsFirstTab),n.Z.setObject(c.hO.datasourceFilters,(y.lastUsedDatasourceFilters||[]).map(C=>({value:C})))}}function u(x,y){const C=parseInt(x,10),P=n.Z.getObject(o,[]),D=(0,t.find)(P,{ts:C});if(!D)throw new Error("Rich history item not found.");return y(D),n.Z.setObject(o,P),i(D)}function d(x){const y=n.Z.getObject(c.hO.retentionPeriod,7),C=(0,c.Jo)(y,!1);return x.filter(P=>P.ts>C||P.starred===!0)||[]}function g(x){let y=!1,C=x.length-1;for(;C>=0&&x.length>=m;)x[C].starred||(x.splice(C,1),y=!0),C--;return{queriesToKeep:x,limitExceeded:y}}function p(){const x=n.Z.getObject(o,[]);return E(x)}function E(x){return x.map(C=>{const P=C.queries.map((D,M)=>h(C,D,M));return{...C,queries:P}})}function h(x,y,C){const P="ABCDEFGHIJKLMNOPQRSTUVXYZ";return typeof y=="object"?y:a(y)?JSON.parse(y):{expr:y,refId:P[C]}}function a(x){try{JSON.parse(x)}catch{return!1}return!0}function v(x,y){const C=new Error(y);throw C.name=x,C}},4420:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(65583),n=e(54899),l=e(86647),s=e(42454),i=e(43823);const f=r=>{const u=(0,l.F)().getInstanceSettings({uid:r.datasourceUid});return{id:r.uid,createdAt:r.createdAt*1e3,datasourceName:u?.name||"",datasourceUid:r.datasourceUid,starred:r.starred,comment:r.comment,queries:r.queries}},c=r=>({uid:r.id,createdAt:Math.floor(r.createdAt/1e3),datasourceUid:r.datasourceUid,starred:r.starred,comment:r.comment,queries:r.queries});class o{constructor(){this.preferenceService=new s.y("user")}async addToRichHistory(u){const{result:d}=await(0,n.i)().post("/api/query-history",{dataSourceUid:u.datasourceUid,queries:u.queries});return{richHistoryQuery:f(d)}}async deleteAll(){throw new Error("not supported")}async deleteRichHistory(u){(0,n.i)().delete(`/api/query-history/${u}`)}async getRichHistory(u){const d=m(u),p=(await(0,t.n)((0,n.i)().fetch({method:"GET",url:`/api/query-history?${d}`,requestId:"query-history-get-all"}))).data,E=(p.result.queryHistory||[]).map(f),h=p.result.totalCount||0;return{richHistory:E,total:h}}async getSettings(){return{activeDatasourceOnly:!1,lastUsedDatasourceFilters:void 0,retentionPeriod:14,starredTabAsFirstTab:(await this.preferenceService.load()).queryHistory?.homeTab==="starred"}}async updateComment(u,d){const g=await(0,n.i)().patch(`/api/query-history/${u}`,{comment:d});return f(g.result)}updateSettings(u){return this.preferenceService.patch({queryHistory:{homeTab:u.starredTabAsFirstTab?"starred":"query"}})}async updateStarred(u,d){let g;return d?g=await(0,n.i)().post(`/api/query-history/star/${u}`):g=await(0,n.i)().delete(`/api/query-history/star/${u}`),f(g.result)}async migrate(u){const d={queries:u.map(c)};await(0,t.n)((0,n.i)().fetch({url:"/api/query-history/migrate",method:"POST",data:d,showSuccessAlert:!1}))}}function m(r){let u=`${r.datasourceFilters.map(p=>{const E=(0,l.F)().getInstanceSettings(p).uid;return`datasourceUid=${encodeURIComponent(E)}`}).join("&")}`;r.search&&(u=u+`&searchString=${r.search}`),r.sortOrder&&(u=u+`&sort=${r.sortOrder===i.A.Ascending?"time-asc":"time-desc"}`);const d=r.from===0?"now":`now-${r.from}d`,g=r.to===0?"now":`now-${r.to}d`;return u=u+`&to=${d}`,u=u+`&from=${g}`,u=u+"&limit=100",u=u+`&page=${r.page||1}`,r.starred&&(u=u+`&onlyStarred=${r.starred}`),u}},50395:(Z,O,e)=>{"use strict";e.d(O,{V:()=>n,j:()=>t});var t=(l=>(l.StorageFull="StorageFull",l.DuplicatedEntry="DuplicatedEntry",l))(t||{}),n=(l=>(l.LimitExceeded="LimitExceeded",l))(n||{})},69597:(Z,O,e)=>{"use strict";e.d(O,{Jo:()=>i,ZX:()=>s,hO:()=>r});var t=e(82897),n=e.n(t),l=e(43823);function s(u,d,g,p,E){const h=c(u,g),a=o(h,p),v=E?f(a,E):a;return m(v,d)}const i=(u,d)=>{const g=new Date,p=new Date(g.setDate(g.getDate()-u));return d?p.setHours(24,0,0,0):p.setHours(0,0,0,0)};function f(u,d){const g=i(d[0],!0),p=i(d[1],!1);return u.filter(E=>E.createdAt<g&&E.createdAt>p)}function c(u,d){return d.length>0?u.filter(g=>d.includes(g.datasourceName)):u}function o(u,d){return u.filter(g=>g.comment.includes(d)?!0:g.queries.filter(E=>Object.values((0,t.omit)(E,["datasource","key","refId","hide","queryType"])).some(h=>h?.toString().includes(d))).length>0)}const m=(u,d)=>{let g;return d===l.A.Ascending&&(g=(p,E)=>p.createdAt<E.createdAt?-1:p.createdAt>E.createdAt?1:0),d===l.A.Descending&&(g=(p,E)=>p.createdAt<E.createdAt?1:p.createdAt>E.createdAt?-1:0),d===l.A.DatasourceZA&&(g=(p,E)=>p.datasourceName<E.datasourceName?-1:p.datasourceName>E.datasourceName?1:0),d===l.A.DatasourceAZ&&(g=(p,E)=>p.datasourceName<E.datasourceName?1:p.datasourceName>E.datasourceName?-1:0),u.sort(g)},r={retentionPeriod:"grafana.explore.richHistory.retentionPeriod",starredTabAsFirstTab:"grafana.explore.richHistory.starredTabAsFirstTab",activeDatasourceOnly:"grafana.explore.richHistory.activeDatasourceOnly",datasourceFilters:"grafana.explore.richHistory.datasourceFilters",migrated:"grafana.explore.richHistory.migrated"}},40967:(Z,O,e)=>{"use strict";e.d(O,{X:()=>m,b:()=>o});var t=e(35645),n=e(77582),l=e(43823),s=e(66719),i=e(4420);const f=new s.ZP,c=new i.Z,o=()=>t.v.queryHistoryEnabled?c:f,m=()=>t.v.queryHistoryEnabled?{availableFilters:[l.A.Descending,l.A.Ascending],lastUsedDataSourcesAvailable:!1,clearHistory:!1,onlyActiveDataSource:!1,changeRetention:!1,queryHistoryAvailable:n.Vt.isSignedIn}:{availableFilters:[l.A.Descending,l.A.Ascending,l.A.DatasourceAZ,l.A.DatasourceZA],lastUsedDataSourcesAvailable:!0,clearHistory:!0,onlyActiveDataSource:!0,changeRetention:!0,queryHistoryAvailable:!0}},40014:(Z,O,e)=>{"use strict";e.d(O,{x:()=>s});var t=e(68404),n=e(81168),l=e(70431);function s(i){const f=(0,n.useDispatch)(),c=(0,t.useRef)(i);c.current=i,(0,t.useEffect)(()=>()=>{f((0,l.e)({cleanupAction:c.current}))},[f])}},76770:(Z,O,e)=>{"use strict";e.d(O,{q:()=>l});var t=e(81168),n=e(86245);const l=s=>{const i=(0,t.useSelector)(f=>f.navIndex);return(0,n.ht)(i,s)}},96044:(Z,O,e)=>{"use strict";e.d(O,{K:()=>s});var t=e(68404),n=e(70356),l=e(37932);function s(){const{search:i}=(0,n.TH)(),f=(0,t.useMemo)(()=>(0,l.Ox)(i||""),[i]),c=(0,t.useCallback)((o,m)=>l.E1.partial(o,m),[]);return[f,c]}},19719:(Z,O,e)=>{"use strict";e.d(O,{D_:()=>m,a2:()=>o,k$:()=>c});const t="en-US",n="fr-FR",l="es-ES",s="de-DE",i="zh-Hans",f="pseudo-LOCALE",c=t,o=[{code:t,name:"English",loader:()=>Promise.resolve({})},{code:n,name:"Fran\xE7ais",loader:()=>e.e(6419).then(e.t.bind(e,58756,19))},{code:l,name:"Espa\xF1ol",loader:()=>e.e(6008).then(e.t.bind(e,4253,19))},{code:s,name:"Deutsch",loader:()=>e.e(810).then(e.t.bind(e,90810,19))},{code:i,name:"\u4E2D\u6587\uFF08\u7B80\u4F53\uFF09",loader:()=>e.e(5001).then(e.t.bind(e,35001,19))}],m=o.map(r=>r.code)},35287:(Z,O,e)=>{"use strict";e.d(O,{$q:()=>d,cC:()=>m,t:()=>u,uC:()=>c});var t=e(97925),n=e(68404),l=e(4696),s=e(31249),i=e(19719);const f={type:"backend",init(){},async read(g,p,E){const h=i.a2.find(v=>v.code===g);if(!h)return E(new Error("No message loader available for "+g),null);const a=await h.loader();E(null,a)}};function c(g){const p=i.D_.includes(g)?g:i.k$;return u("_comment","Do not manually edit this file, or update these source phrases in Crowdin. The source of truth for English strings are in the code source"),t.ZP.use(f).use(l.Db).init({lng:p,partialBundledLanguages:!0,resources:{},returnEmptyString:!1,pluralSeparator:"__"})}function o(g){const p=VALID_LANGUAGES.includes(g)?g:DEFAULT_LANGUAGE;return i18n.changeLanguage(p)}const m=g=>n.createElement(s.c,{...g}),r=t.ZP.t,u=(g,p,E)=>r(g,p,E),d=(g,p={})=>{if(typeof g=="string")return d(new Date(g),p);const E=t.ZP.options.lng??i.k$;return new Intl.DateTimeFormat(E,p).format(g)}},37959:(Z,O,e)=>{"use strict";e.d(O,{Qp:()=>M,aB:()=>Y,UW:()=>W,nu:()=>U,Nw:()=>N,Ce:()=>fe,Bz:()=>ie});var t=e(82897),n=e(84946),l=e(68114),s=e(49372),i=e(90595),f=e(40538),c=e(16911),o=e(71895),m=e(14582),r=e(66926),u=e(15355),d=e(46519),g=e(8928),p=e(38849),E=e(33180),h=e(49922),a=e(8428),v=e(16514),x=e(2525),y=e(47694);function C(ee,ne){return y.ZP.bootData.user.lightTheme?ne:ee}var P=e(81042);const D="Line limit",M="Common labels",b={[i.in.critical]:v.O9[7],[i.in.warning]:v.O9[1],[i.in.error]:v.O9[4],[i.in.info]:v.O9[0],[i.in.debug]:v.O9[5],[i.in.trace]:v.O9[2],[i.in.unknown]:C("#8e8e8e","#bdc4cd")},R=1,B=1e3*R,w=60*B,A=60*w,I=24*A,F=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-6]\d[,\.]\d+([+-][0-2]\d:[0-5]\d|Z)/g;function K(ee,ne,X){switch(X){case f.Y4.exact:return ee.entry.replace(F,"")===ne.entry.replace(F,"");case f.Y4.numbers:return ee.entry.replace(/\d/g,"")===ne.entry.replace(/\d/g,"");case f.Y4.signature:return ee.entry.replace(/\w/g,"")===ne.entry.replace(/\w/g,"");default:return!1}}function W(ee,ne){return ne===f.Y4.none?ee:ee.reduce((X,te,ae)=>{const _={...te},ve=X[X.length-1];return ae>0&&K(te,ve,ne)?ve.duplicates++:(_.duplicates=0,X.push(_)),X},[])}function U(ee,ne){return ne.size===0?ee:ee.filter(X=>!ne.has(X.logLevel))}function N(ee,ne){const X={},te=[];for(const ae of ee){let _=X[ae.logLevel];_||(X[ae.logLevel]=_={lastTs:null,datapoints:[],target:ae.logLevel,color:b[ae.logLevel]},te.push(_));const ve=Math.floor(ae.timeEpochMs/ne)*ne;ve===_.lastTs?_.datapoints[_.datapoints.length-1][0]++:(_.datapoints.push([1,ve]),_.lastTs=ve);for(const Ve of te)Ve!==_&&Ve.lastTs!==ve&&(Ve.datapoints.push([0,ve]),Ve.lastTs=ve)}return te.map((ae,_)=>{ae.datapoints.sort((rt,pe)=>rt[1]-pe[1]);const ve=(0,c.g0)(ae),it=new o.N(ve).getFirstFieldOfType(m.fS.number);return ve.fields[it.index].config.min=0,ve.fields[it.index].config.decimals=0,ve.fields[it.index].config.color={mode:r.S.Fixed,fixedColor:ae.color},ve.fields[it.index].config.custom={drawStyle:f.l8.Bars,barAlignment:f.pu.Center,barWidthFactor:.9,barMaxWidth:5,lineColor:ae.color,pointColor:ae.color,fillColor:ae.color,lineWidth:0,fillOpacity:100,stacking:{mode:f.o0.Normal,group:"A"}},ve})}function S(ee){return ee.fields.some(ne=>ne.type===m.fS.time)&&ee.fields.some(ne=>ne.type===m.fS.string)}function Y(ee,ne,X,te){const{logSeries:ae}=z(ee),_=j(ae,te);if(_){if(ne&&_.rows.length>0){const ve=_.rows.sort(P.DA),{visibleRange:Ve,bucketSize:it,visibleRangeMs:rt,requestedRangeMs:pe}=Q(ve,ne,X);_.visibleRange=Ve,_.bucketSize=it,_.series=N(ve,it),_.meta&&(_.meta=ge(_,rt,pe))}else _.series=[];return _.queries=te,_}return{hasUniqueLabels:!1,rows:[],meta:[],series:[],queries:te}}function Q(ee,ne,X,te=20,ae=1e3){let _=X,ve=ne,Ve=Math.max(ve*te,ae),it,rt;if(X){const pe=ee[0].timeEpochMs;if(rt=X.to-X.from,it=X.to-pe,it>0){const Ie=it/rt;ve*=Ie,Ve=Math.max(Math.ceil(ve*te),ae),_={from:Math.floor(pe/Ve)*Ve,to:X.to}}else it=1}return{bucketSize:Ve,visibleRange:_,visibleRangeMs:it,requestedRangeMs:rt}}function z(ee){const ne=[],X=[];for(const te of ee){if(S(te)||!te.fields.length){X.push(te);continue}te.length>0&&ne.push(te)}return{logSeries:X,metricSeries:ne}}function G(ee){const{stringField:ne,labelsField:X}=ee;return X!==void 0?X.values.toArray():[ne.labels??{}]}function k(ee,ne){const{stringField:X,labelsField:te}=ee;return te!==void 0?te.values.get(ne):X.labels??{}}function j(ee,ne=[]){if(ee.length===0)return;const X=[];let te=[];const ae=ee.filter(et=>et.fields.length);ae.length&&ae.forEach(et=>{const _e=new o.N(et),Se=_e.getFirstFieldOfType(m.fS.string),Fe=_e.getFirstFieldOfType(m.fS.time),Xe=et.meta?.custom?.frameType==="LabeledTimeValues"?_e.getFieldByName("labels"):void 0;if(Se!==void 0&&Fe!==void 0){const Qe={series:et,timeField:Fe,labelsField:Xe,timeNanosecondField:_e.getFieldByName("tsNs"),stringField:Se,logLevelField:_e.getFieldByName("level"),idField:de(_e)};te.push(Qe);const ct=G(Qe);ct.length>0&&X.push(ct)}});const _=X.flat(),ve=_.length>0?(0,u.FT)(_):{},Ve=[];let it=!1;for(const et of te){const{timeField:_e,timeNanosecondField:Se,stringField:Fe,logLevelField:Xe,idField:Qe,series:ct}=et;for(let ht=0;ht<ct.length;ht++){const ft=_e.values.get(ht),Re=(0,d.zh)(ft),nt=Se?Se.values.get(ht):void 0,le=nt||Re.valueOf()+"000000",Pe=Fe.values.get(ht)??"",Oe=typeof Pe=="string"?Pe:JSON.stringify(Pe),Le=g.QX.hasAnsiCodes(Oe),Ye=!!Oe.match(/\\n|\\t|\\r/),be=ct.meta?.custom?.searchWords??ct.meta?.searchWords??[],Te=Le?x._J.strip(Oe):Oe,me=k(et,ht),he=(0,u.IU)(me,ve);Object.keys(he).length>0&&(it=!0);let De=i.in.unknown;const $e=Xe&&Xe.values.get(ht)||me&&me.level;$e?De=(0,P.jx)($e):De=(0,P.ZO)(Te);const ke=ne.find(tt=>tt.refId===ct.refId)?.datasource?.type;Ve.push({entryFieldIndex:Fe.index,rowIndex:ht,dataFrame:ct,logLevel:De,timeFromNow:(0,p.E8)(ft),timeEpochMs:Re.valueOf(),timeEpochNs:le,timeLocal:(0,p.dq)(ft,{timeZone:"browser"}),timeUtc:(0,p.dq)(ft,{timeZone:"utc"}),uniqueLabels:he,hasAnsi:Le,hasUnescapedContent:Ye,searchWords:be,entry:Te,raw:Oe,labels:me||{},uid:Qe?Qe.values.get(ht):ht.toString(),datasourceType:ke})}}const rt=[];(0,t.size)(ve)>0&&rt.push({label:M,value:ve,kind:i.Ku.LabelsMap});const Ie=ee.filter(et=>et.meta&&et.meta.limit).reduce((et,_e)=>(et[_e.refId??""]=_e.meta?.limit??0,et),{}),We=Object.values(Ie).reduce((et,_e)=>et+=_e,0);We>0&&rt.push({label:D,value:We,kind:i.Ku.Number});let Je=0;const He={};let Ae=!1;for(const et of ee){const _e=et.meta?.custom?.lokiQueryStatKey,{refId:Se}=et;if(!Ae&&et.meta?.custom?.error&&(rt.push({label:"",value:et.meta?.custom.error,kind:i.Ku.Error}),Ae=!0),Se&&!He[Se]){if(_e&&et.meta?.stats){const Fe=et.meta.stats.find(Xe=>Xe.displayName===_e);Fe&&(Je+=Fe.value)}He[Se]=!0}}if(Je>0){const{text:et,suffix:_e}=(0,a.i7)("B")(Je);rt.push({label:"Total bytes processed",value:`${et} ${_e}`,kind:i.Ku.String})}return{hasUniqueLabels:it,meta:rt,rows:Ve}}function de(ee){const ne=["id"];for(const X of ne){const te=ee.getFieldByName(X);if(te)return te}}function ge(ee,ne,X){let te=[...ee.meta];const ae=te.findIndex(ve=>ve.label===D),_=ae>=0&&te[ae]?.value;if(_&&_>0){let ve;if(_===ee.rows.length&&ne&&X){const Ve=(ne/X*100).toFixed(2);ve=`${_} reached, received logs cover ${Ve}% (${E.msRangeToTimeString(ne)}) of your selected time range (${E.msRangeToTimeString(X)})`}else ve=`${_} (${ee.rows.length} returned)`;te[ae]={label:D,value:ve,kind:i.Ku.String}}return te}function re(ee,ne){const X=ne&&ee===i.in.unknown?"logs":ee,te=b[ee];return{displayNameFromDS:X,color:{mode:r.S.Fixed,fixedColor:te},custom:{drawStyle:f.l8.Bars,barAlignment:f.pu.Center,lineColor:te,pointColor:te,fillColor:te,lineWidth:1,fillOpacity:100,stacking:{mode:f.o0.Normal,group:"A"}}}}const ce=(ee,ne,X)=>(ee.fields=ee.fields.map(te=>(te.type===m.fS.number&&(te.config={...te.config,...re(ne(ee),X)}),te)),ee);function ie(ee,ne,X){const te=X.range.to.valueOf()-X.range.from.valueOf(),ae=Ce(ne.scopedVars,te);return ne.interval=ae.interval,ne.scopedVars.__interval={value:ae.interval,text:ae.interval},ae.intervalMs!==void 0&&(ne.intervalMs=ae.intervalMs,ne.scopedVars.__interval_ms={value:ae.intervalMs,text:ae.intervalMs}),ne.hideFromInspector=!0,new n.y(_=>{let ve=[];_.next({state:h.Gu.Loading,error:void 0,data:[]});const Ve=ee.query(ne),rt=((0,l.b)(Ve)?Ve:(0,s.D)(Ve)).subscribe({complete:()=>{_.complete()},next:pe=>{const{error:Ie}=pe;if(Ie!==void 0)_.next({state:h.Gu.Error,error:Ie,data:[]}),_.error(Ie);else{const We=(0,t.groupBy)(pe.data,"refId");ve=pe.data.map(Je=>{let He=Je.refId||"";He.startsWith("log-volume-")&&(He=He.substr(11));const Ae={logsVolumeType:i.o8.FullRange,absoluteRange:{from:X.range.from.valueOf(),to:X.range.to.valueOf()},datasourceName:ee.name,sourceQuery:X.targets.find(et=>et.refId===He)};return Je.meta={...Je.meta,custom:{...Je.meta?.custom,...Ae}},ce(Je,X.extractLevel,We[Je.refId].length===1)}),_.next({state:pe.state,error:void 0,data:ve})}},error:pe=>{_.next({state:h.Gu.Error,error:pe,data:[]}),_.error(pe)}});return()=>{rt?.unsubscribe()}})}function fe(ee,ne){return ne.hideFromInspector=!0,new n.y(X=>{let te=[];X.next({state:h.Gu.Loading,error:void 0,data:[]});const ae=ee.query(ne),ve=((0,l.b)(ae)?ae:(0,s.D)(ae)).subscribe({complete:()=>{X.next({state:h.Gu.Done,error:void 0,data:te}),X.complete()},next:Ve=>{const{error:it}=Ve;it!==void 0?(X.next({state:h.Gu.Error,error:it,data:[]}),X.error(it)):te=Ve.data.map(rt=>{const pe=(0,c.g0)(rt),{timeIndex:Ie}=(0,c.sV)(pe);return(0,c.aK)(pe,Ie)})},error:Ve=>{X.next({state:h.Gu.Error,error:Ve,data:[]}),X.error(Ve)}});return()=>{ve?.unsubscribe()}})}function Ce(ee,ne){if(ee.__interval_ms){let X=ee.__interval_ms.value,te="";return ne<B*5?(X=R,te="1ms"):X>A?(X=I,te="1d"):X>w?(X=A,te="1h"):X>B?(X=w,te="1m"):(X=B,te="1s"),{interval:te,intervalMs:X}}else return{interval:"$__interval"}}},96694:(Z,O,e)=>{"use strict";e.d(O,{U:()=>n});var t=e(81168);function n(l){switch(l.kiosk){case"tv":return t.KioskMode.TV;case"1":case!0:return t.KioskMode.Full;default:return null}}},29494:(Z,O,e)=>{"use strict";e.d(O,{r:()=>n});class t{constructor(){this.panelsRendered=0,this.enabled=void 0}renderingCompleted(){this.panelsRendered+=1,window.panelsRendered=this.panelsRendered}}const n=new t},98864:(Z,O,e)=>{"use strict";e.d(O,{$l:()=>o,Av:()=>p,F6:()=>u,Jk:()=>d,VW:()=>g,ad:()=>m,hS:()=>r,mE:()=>h,vo:()=>a});var t=e(62992),n=e(81168);const l=25,s="notifications",i=`${s}/lastRead`,f={byId:C(),lastRead:Number.parseInt(window.localStorage.getItem(i)??`${Date.now()}`,10)},c=(0,t.oM)({name:"appNotifications",initialState:f,reducers:{notifyApp:(D,{payload:M})=>{Object.values(D.byId).some(b=>v(M,b)&&b.showing)||(D.byId[M.id]=M,P(D.byId))},hideAppNotification:(D,{payload:M})=>{M in D.byId&&(D.byId[M].showing=!1,P(D.byId))},clearNotification:(D,{payload:M})=>{delete D.byId[M],P(D.byId)},clearAllNotifications:D=>{D.byId={},P(D.byId)},readAllNotifications:(D,{payload:M})=>{D.lastRead=M}}}),{notifyApp:o,hideAppNotification:m,clearNotification:r,clearAllNotifications:u,readAllNotifications:d}=c.actions,g=c.reducer,p=D=>D.lastRead,E=D=>Object.values(D.byId).sort((M,b)=>b.timestamp-M.timestamp),h=D=>E(D).filter(x),a=D=>Object.values(D.byId).filter(M=>M.showing);function v(D,M){return D.icon===M.icon&&D.severity===M.severity&&D.text===M.text&&D.title===M.title}function x(D){return D.severity===n.AppNotificationSeverity.Warning||D.severity===n.AppNotificationSeverity.Error}function y(D){return typeof D=="object"&&D!==null&&"id"in D&&"icon"in D&&"title"in D&&"text"in D}function C(){const D=window.localStorage.getItem(s);if(!D)return{};const M=JSON.parse(D);return Object.values(M).every(b=>y(b))?M:{}}function P(D){const M=Object.values(D).filter(x).sort((b,R)=>R.timestamp-b.timestamp).slice(0,l).reduce((b,R)=>(b[R.id]={id:R.id,severity:R.severity,icon:R.icon,title:R.title,text:R.text,traceId:R.traceId,timestamp:R.timestamp,showing:R.showing},b),{});try{window.localStorage.setItem(s,JSON.stringify(M))}catch(b){console.error("Unable to persist notifications to local storage"),console.error(b)}}},61962:(Z,O,e)=>{"use strict";e.d(O,{Lk:()=>m,OQ:()=>o,V4:()=>u,gd:()=>r});var t=e(62992),n=e(35645),l=e(14617);const s=n.v.bootData?.navTree??[];function i(d){return d.map(g=>{const p=g.children&&i(g.children);return{...g,children:p,text:(0,l.Y)(g.id)??g.text,subTitle:(0,l.L)(g.id)??g.subTitle,emptyMessage:(0,l.Y)(g.emptyMessageId)}})}const f="starred/",c=(0,t.oM)({name:"navBarTree",initialState:()=>i(n.v.bootData?.navTree??[]),reducers:{setStarred:(d,g)=>{const p=d.find(x=>x.id==="starred"),{id:E,title:h,url:a,isStarred:v}=g.payload;if(p)if(v){p.children||(p.children=[]);const x={id:f+E,text:h,url:a};p.children.push(x),p.children.sort((y,C)=>y.text.localeCompare(C.text))}else{const x=p.children?.findIndex(y=>y.id===f+E)??-1;x>-1&&p?.children?.splice(x,1)}},updateDashboardName:(d,g)=>{const{id:p,title:E,url:h}=g.payload,a=d.find(v=>v.id==="starred");if(a){const v=a.children?.find(x=>x.id===p);v&&(v.text=E,v.url=h,a.children?.sort((x,y)=>x.text.localeCompare(y.text)))}},removePluginFromNavTree:(d,g)=>{const p="plugin-page-"+g.payload.pluginID,E=d.findIndex(h=>h.id===p);E>-1&&d.splice(E,1)}}}),{setStarred:o,removePluginFromNavTree:m,updateDashboardName:r}=c.actions,u=c.reducer},14393:(Z,O,e)=>{"use strict";e.d(O,{Cu:()=>c,G4:()=>p,H7:()=>d,Qz:()=>f,RL:()=>u});var t=e(62992),n=e(82897),l=e.n(n),s=e(47694),i=e(14617);const f="home";function c(){const E={},h=(0,n.cloneDeep)(s.ZP.bootData.navTree),a=h.find(x=>x.id===f),v=h.filter(x=>x.id!==f);return a&&o(E,[a]),o(E,v,E[f]),E}function o(E,h,a){const v=[];for(const x of h){const y={...x,text:(0,i.Y)(x.id)??x.text,subTitle:(0,i.L)(x.id)??x.subTitle,emptyMessage:(0,i.Y)(x.emptyMessageId),parentItem:a};y.id&&(E[y.id]=y),y.children&&o(E,y.children,y),v.push(y)}a&&(a.children=v),E["not-found"]={...m("Page not found","404 Error").node},E.error={...m("Page error","An unexpected error").node}}function m(E,h){const a={text:E,subTitle:h,icon:"exclamation-triangle"};return{node:a,main:a}}const r={},u=(0,t.PH)("navIndex/updateNavIndex"),d=(0,t.PH)("navIndex/updateConfigurationSubtitle"),g=(E,h)=>({...E,parentItem:{...E.parentItem,text:E.parentItem?.text??"",subTitle:h}}),p=(E=r,h)=>{if(u.match(h)){const a={},v=h.payload;for(const x of v.children)a[x.id]={...x,parentItem:v};return{...E,...a}}else if(d.match(h)){const a=`Organization: ${h.payload}`;return{...E,cfg:{...E.cfg,subTitle:a},datasources:g(E.datasources,a),correlations:g(E.correlations,a),users:g(E.users,a),teams:g(E.teams,a),plugins:g(E.plugins,a),"org-settings":g(E["org-settings"],a),apikeys:g(E.apikeys,a)}}return E}},86245:(Z,O,e)=>{"use strict";e.d(O,{ht:()=>l,vw:()=>s});var t=e(14393);const n=()=>{const c={id:"not-found",text:"Page not found",icon:"exclamation-triangle",subTitle:"404 Error",url:"not-found"};return{node:c,main:c}},l=(c,o,m,r=!1)=>{if(c[o]){const u=c[o],d=r?u:s(u),g=i(d,o);return{node:u,main:g}}return m||n()};function s(c){return c.parentItem&&c.parentItem.id!==t.Qz?s(c.parentItem):c}function i(c,o){return c.id===o?{...c,active:!0}:c.children&&c.children.length>0?{...c,children:c.children.map(m=>i(m,o))}:c}const f=c=>`${c.main.text}${c.node.text?": "+c.node.text:""}`},42454:(Z,O,e)=>{"use strict";e.d(O,{y:()=>n});var t=e(29930);class n{constructor(s){this.resourceUri=s}update(s){return t.ae.put(`/api/${this.resourceUri}/preferences`,s)}patch(s){return t.ae.patch(`/api/${this.resourceUri}/preferences`,s)}load(){return t.ae.get(`/api/${this.resourceUri}/preferences`)}}},38535:(Z,O,e)=>{"use strict";e.d(O,{b:()=>s});var t=e(68404),n=e(91017),l=e(32434);class s{constructor(c){this._subject=new n.x,this._state=c}useState(){return i(this)}get state(){return this._state}setState(c){this._state={...this._state,...c},this._subject.next(this._state)}subscribeToState(c){return this._subject.subscribe(c)}}function i(f){const c=(0,l.N)();return(0,t.useEffect)(()=>{const o=f.subscribeToState({next:c});return()=>o.unsubscribe()},[f,c]),f.state}},29930:(Z,O,e)=>{"use strict";e.d(O,{y$:()=>ce,ae:()=>ie,i:()=>fe});var t=e(91017),n=e(65583),l=e(84946),s=e(53376),i=e(12877),f=e(85850),c=e(59980),o=e(49372),m=e(5173),r=e(9471),u=e(90801),d=e(71735),g=e(59724),p=e(39859),E=e(57027),h=e(66516),a=e(82615),v=e(29933),x=e(44288),y=e(25318),C=e(7238),P=e(35645),D=e(18271),M=e(47694),b=e(53747),R=e(9892),B=e(68404),w=e(72648),A=e(85511),I=e(17784),F=e(31403),K=e(7804),W=e(27581);const U=ee=>{const ne=(0,w.l4)(),X=N(ne),te=(0,W.J)(ne),ae=Boolean(ee.maxConcurrentSessions),_=()=>{window.location.reload()};return B.createElement(A.h_,null,B.createElement("div",{className:te.modal},B.createElement(I.v,{title:"You have been automatically signed out",severity:"warning",className:X.infobox},B.createElement("div",{className:X.text},B.createElement("p",null,"Your session token was automatically revoked because you have reached",B.createElement("strong",null,` the maximum number of ${ae?ee.maxConcurrentSessions:""} concurrent sessions `),"for your account."),B.createElement("p",null,B.createElement("strong",null,"To resume your session, sign in again."),"Contact your administrator or visit the license page to review your quota if you are repeatedly signed out automatically.")),B.createElement(F.zx,{size:"md",variant:"primary",onClick:_},"Sign in"))),B.createElement("div",{className:(0,R.cx)(te.modalBackdrop,X.backdrop)}))},N=(0,K.B)(ee=>({infobox:R.css`
      margin-bottom: 0;
    `,text:R.css`
      margin: ${ee.spacing(1,0,2)};
    `,backdrop:R.css`
      background-color: ${ee.colors.background.canvas};
      opacity: 0.8;
    `}));var S=e(45984),Y=e(8878),Q=e(99822),z=(ee=>(ee[ee.Pending=0]="Pending",ee[ee.InProgress=1]="InProgress",ee[ee.Done=2]="Done",ee))(z||{});class G{constructor(ne=!1){this.state={},this.queue=new t.x,this.updates=new t.x,this.add=(X,te)=>this.queue.next({id:X,options:te,state:0}),this.setInProgress=X=>this.queue.next({id:X,state:1}),this.setDone=X=>this.queue.next({id:X,state:2}),this.getUpdates=()=>this.updates.asObservable(),this.getUpdate=X=>{const te=Object.keys(X).filter(_=>X[_].state===1).length;return{noOfPending:Object.keys(X).filter(_=>X[_].state===0).length,noOfInProgress:te,state:X}},this.publishUpdate=(X,te)=>{this.printState(X,te),this.updates.next(X)},this.printState=(X,te)=>{if(!te)return;const ae=Object.keys(X.state).reduce((_,ve)=>{const Ve={id:ve,state:X.state[ve].state};return _.push(Ve),_},[]);console.log("FetchQueue noOfStarted",X.noOfInProgress),console.log("FetchQueue noOfNotStarted",X.noOfPending),console.log("FetchQueue state",ae)},this.queue.subscribe(X=>{const{id:te,state:ae,options:_}=X;if(this.state[te]||(this.state[te]={state:0,options:{url:""}}),ae===2){delete this.state[te];const Ve=this.getUpdate(this.state);this.publishUpdate(Ve,ne);return}this.state[te].state=ae,_&&(this.state[te].options=_);const ve=this.getUpdate(this.state);this.publishUpdate(ve,ne)})}}var k=e(86870);class j{constructor(ne,X,te){const ae=te?.http2Enabled?1e3:5;ne.getUpdates().pipe((0,u.h)(({noOfPending:_})=>_>0),(0,k.b)(({state:_,noOfInProgress:ve})=>{const Ve=Object.keys(_).filter(Ie=>_[Ie].state===z.Pending&&!(0,Q.mu)(_[Ie].options.url)).reduce((Ie,We)=>{const Je={id:We,options:_[We].options};return Ie.push(Je),Ie},[]),it=Object.keys(_).filter(Ie=>_[Ie].state===z.Pending&&(0,Q.mu)(_[Ie].options.url)).reduce((Ie,We)=>{const Je={id:We,options:_[We].options};return Ie.push(Je),Ie},[]),rt=Math.max(ae-ve-Ve.length,0),pe=it.slice(0,rt);return Ve.concat(pe)})).subscribe(({id:_,options:ve})=>{X.add(_,ve)})}}class de{constructor(ne,X){this.queue=new t.x,this.responses=new t.x,this.add=(te,ae)=>{this.queue.next({id:te,options:ae})},this.getResponses=te=>this.responses.asObservable().pipe((0,u.h)(ae=>ae.id===te)),this.queue.subscribe(te=>{const{id:ae,options:_}=te;ne.setInProgress(ae),this.responses.next({id:ae,observable:X(_)})})}}var ge=e(82002);const re="cancel_all_requests_request_id";class ce{constructor(ne){this.inFlightRequests=new t.x,this.HTTP_REQUEST_CANCELED=-1,this.inspectorStream=new t.x,this.dependencies={fromFetch:m.U,appEvents:D.Z,contextSrv:ge.Vt,logout:()=>{ge.Vt.setLoggedOut()}},ne&&(this.dependencies={...this.dependencies,...ne}),this.noBackendCache=!1,this.internalFetch=this.internalFetch.bind(this),this.fetchQueue=new G,this.responseQueue=new de(this.fetchQueue,this.internalFetch),new j(this.fetchQueue,this.responseQueue,(0,M.iE)())}async request(ne){return await(0,n.n)(this.fetch(ne).pipe((0,r.U)(X=>X.data)))}fetch(ne){const X=(0,x.Z)(),te=this.fetchQueue;return new l.y(ae=>{const _=new s.w0;return _.add(this.responseQueue.getResponses(X).subscribe(ve=>{_.add(ve.observable.subscribe(ae))})),this.fetchQueue.add(X,ne),function(){te.setDone(X),_.unsubscribe()}})}internalFetch(ne){ne.requestId&&this.inFlightRequests.next(ne.requestId),ne=this.parseRequestOptions(ne);const X=(0,b.v)();X!==null&&X!==""&&(ne.headers||(ne.headers={}),P.v.jwtUrlLogin&&P.v.jwtHeaderName&&(ne.headers[P.v.jwtHeaderName]=`${X}`));const te=this.getFromFetchStream(ne),ae=te.pipe(this.toFailureStream(ne)),_=te.pipe((0,u.h)(ve=>ve.ok===!0),(0,d.b)(ve=>{this.showSuccessAlert(ve),this.inspectorStream.next(ve)}));return(0,i.T)(_,ae).pipe((0,g.K)(ve=>(0,f._)(this.processRequestError(ne,ve))),this.handleStreamCancellation(ne))}resolveCancelerIfExists(ne){this.inFlightRequests.next(ne)}cancelAllInFlightRequests(){this.inFlightRequests.next(re)}async datasourceRequest(ne){return(0,n.n)(this.fetch(ne))}parseRequestOptions(ne){const X=this.dependencies.contextSrv.user?.orgId;return ne.retry=ne.retry??0,(0,Q.R8)(ne.url)&&(X&&(ne.headers=ne.headers??{},ne.headers["X-Grafana-Org-Id"]=X),ne.url.startsWith("/")&&(ne.url=ne.url.substring(1)),ne.headers?.Authorization&&(ne.headers["X-DS-Authorization"]=ne.headers.Authorization,delete ne.headers.Authorization),this.noBackendCache&&(ne.headers=ne.headers??{},ne.headers["X-Grafana-NoCache"]="true")),ne.hideFromInspector===void 0&&(ne.hideFromInspector=(0,Q.R8)(ne.url)&&!(0,Q.mu)(ne.url)),ne}getFromFetchStream(ne){const X=(0,Y.Xv)(ne),te=(0,Y.nS)(ne);return this.dependencies.fromFetch(X,te).pipe((0,p.z)(async ae=>{const{status:_,statusText:ve,ok:Ve,headers:it,url:rt,type:pe,redirected:Ie}=ae,We=ne.responseType??((0,Y.rZ)(it)?"json":void 0),Je=await(0,Y.aO)(ae,We);return{status:_,statusText:ve,ok:Ve,data:Je,headers:it,url:rt,type:pe,redirected:Ie,config:ne}}),(0,E.B)())}toFailureStream(ne){const{isSignedIn:X}=this.dependencies.contextSrv.user;return te=>te.pipe((0,u.h)(ae=>ae.ok===!1),(0,p.z)(ae=>{const{status:_,statusText:ve,data:Ve}=ae,it={status:_,statusText:ve,data:Ve,config:ne};return(0,f._)(it)}),(0,h.a)(ae=>ae.pipe((0,p.z)((_,ve)=>{const Ve=ve===0&&ne.retry===0;if(_.status===401&&(0,Q.R8)(ne.url)&&Ve&&X){if(_.data?.error?.id==="ERR_TOKEN_REVOKED")return this.dependencies.appEvents.publish(new S.Dn({component:U,props:{maxConcurrentSessions:_.data?.error?.maxConcurrentSessions}})),(0,c.of)({});let it=()=>this.loginPing();return P.v.featureToggles.clientTokenRotation&&(it=()=>this.rotateToken()),(0,o.D)(it()).pipe((0,g.K)(rt=>(rt.status===401&&this.dependencies.logout(),(0,f._)(rt))))}return(0,f._)(_)}))))}showApplicationErrorAlert(ne){}showSuccessAlert(ne){const{config:X}=ne;if(X.showSuccessAlert===!1||X.showSuccessAlert===void 0&&(X.method==="GET"||(0,Q.mu)(X.url)||!(0,Q.R8)(X.url)))return;const te=ne.data;te?.message&&this.dependencies.appEvents.emit(y.SI.alertSuccess,[te.message])}showErrorAlert(ne,X){if(ne.showErrorAlert===!1||ne.showErrorAlert===void 0&&((0,Q.mu)(ne.url)||!(0,Q.R8)(ne.url)))return;let te="",ae=X.data.message;ae==="Unexpected error"&&X.message&&(ae=X.message),ae.length>80&&(te=ae,ae="Error"),X.status===422&&(te=X.data.message,ae="Validation failed"),this.dependencies.appEvents.emit(X.status<500?y.SI.alertWarning:y.SI.alertError,[ae,te,X.data.traceID])}processRequestError(ne,X){return X.data=X.data??{message:"Unexpected error"},typeof X.data=="string"&&(X.data={message:X.data,error:X.statusText,response:X.data}),X.data&&!X.data.message&&typeof X.data.error=="string"&&(X.data.message=X.data.error),X.data.message&&setTimeout(()=>{X.isHandled||this.showErrorAlert(ne,X)},50),this.inspectorStream.next(X),X}handleStreamCancellation(ne){return X=>X.pipe((0,a.R)(this.inFlightRequests.pipe((0,u.h)(te=>{let ae=!1;return ne&&ne.requestId&&ne.requestId===te&&(ae=!0),te===re&&(ae=!0),ae}))),(0,v.T)(()=>({type:C.eA.Cancelled,cancelled:!0,data:null,status:this.HTTP_REQUEST_CANCELED,statusText:"Request was aborted",config:ne})))}getInspectorStream(){return this.inspectorStream}async get(ne,X,te,ae){return this.request({...ae,method:"GET",url:ne,params:X,requestId:te})}async delete(ne,X,te){return this.request({...te,method:"DELETE",url:ne,data:X})}async post(ne,X,te){return this.request({...te,method:"POST",url:ne,data:X})}async patch(ne,X,te){return this.request({...te,method:"PATCH",url:ne,data:X})}async put(ne,X,te){return this.request({...te,method:"PUT",url:ne,data:X})}withNoBackendCache(ne){return this.noBackendCache=!0,ne().finally(()=>{this.noBackendCache=!1})}rotateToken(){return this.request({url:"/api/user/auth-tokens/rotate",method:"POST",retry:1})}loginPing(){return this.request({url:"/api/login/ping",method:"GET",retry:1})}search(ne){return this.get("/api/search",ne)}getDashboardByUid(ne){return this.get(`/api/dashboards/uid/${ne}`)}validateDashboard(ne){const X=JSON.stringify(ne,Ce,2);return this.request({method:"POST",url:"/api/dashboards/validate",data:{dashboard:X},showSuccessAlert:!1,showErrorAlert:!1})}getPublicDashboardByUid(ne){return this.get(`/api/public/dashboards/${ne}`)}getFolderByUid(ne,X={}){const te=new URLSearchParams;return X.withAccessControl&&te.set("accesscontrol","true"),this.get(`/api/folders/${ne}?${te.toString()}`)}}const ie=new ce,fe=()=>ie;function Ce(ee,ne){if(!(typeof ne=="number"&&!Number.isFinite(ne)))return ne}},82002:(Z,O,e)=>{"use strict";e.d(O,{Vt:()=>r});var t=e(82897),n=e.n(t),l=e(33180),s=e(54899),i=e(66121),f=e(81168),c=e(47694);class o{constructor(){this.id=0,this.isGrafanaAdmin=!1,this.isSignedIn=!1,this.orgRole="",this.orgId=0,this.orgName="",this.login="",this.externalUserId="",this.orgCount=0,this.timezone="",this.fiscalYearStartMonth=0,this.helpFlags1=0,this.theme="dark",this.hasEditPermissionInFolders=!1,this.email="",this.name="",this.locale="",this.language="",this.weekStart="",this.gravatarUrl="",this.analytics={identifier:""},c.ZP.bootData.user&&(0,t.extend)(this,c.ZP.bootData.user)}}class m{constructor(){this.sidemenuSmallBreakpoint=!1,this.tokenRotationJobId=0,c.ZP.bootData||(c.ZP.bootData={user:{},settings:{},navTree:[]}),this.user=new o,this.isSignedIn=this.user.isSignedIn,this.isGrafanaAdmin=this.user.isGrafanaAdmin,this.isEditor=this.hasRole("Editor")||this.hasRole("Admin"),this.hasEditPermissionInFolders=this.user.hasEditPermissionInFolders,this.minRefreshInterval=c.ZP.minRefreshInterval,this.isSignedIn&&this.scheduleTokenRotationJob()}async fetchUserPermissions(){try{this.accessControlEnabled()&&(this.user.permissions=await(0,s.i)().get("/api/access-control/user/actions",{reloadcache:!0}))}catch(g){console.error(g)}}setLoggedOut(){this.cancelTokenRotationJob(),this.user.isSignedIn=!1,this.isSignedIn=!1,window.location.reload()}hasRole(g){return g==="ServerAdmin"?this.isGrafanaAdmin:this.user.orgRole===g}accessControlEnabled(){return c.ZP.rbacEnabled}licensedAccessControlEnabled(){return(0,i.v)("accesscontrol")&&c.ZP.rbacEnabled}hasPermissionInMetadata(g,p){return this.accessControlEnabled()?!!p.accessControl?.[g]:!0}hasPermission(g){return this.accessControlEnabled()?!!this.user.permissions?.[g]:!0}isGrafanaVisible(){return document.visibilityState===void 0||document.visibilityState==="visible"}isAllowedInterval(g){return c.ZP.minRefreshInterval?l.intervalToMs(g)>=l.intervalToMs(c.ZP.minRefreshInterval):!0}getValidInterval(g){return this.isAllowedInterval(g)?g:c.ZP.minRefreshInterval}hasAccessToExplore(){return this.accessControlEnabled()?this.hasPermission(f.AccessControlAction.DataSourcesExplore)&&c.ZP.exploreEnabled:(this.isEditor||c.ZP.viewersCanEdit)&&c.ZP.exploreEnabled}hasAccess(g,p){return this.accessControlEnabled()?this.hasPermission(g):p}hasAccessInMetadata(g,p,E){return this.accessControlEnabled()?this.hasPermissionInMetadata(g,p):E}evaluatePermission(g,p){return this.accessControlEnabled()?p.some(E=>this.hasPermission(E))?[]:["Reject"]:g()}scheduleTokenRotationJob(){if(c.ZP.featureToggles.clientTokenRotation&&this.isSignedIn){let g=this.getSessionExpiry();if(g===0){this.rotateToken().then();return}let E=(g-Math.floor(Math.random()*(20-1)+1))*1e3-Date.now();this.tokenRotationJobId=setTimeout(()=>{if(this.getSessionExpiry()>g){this.scheduleTokenRotationJob();return}this.rotateToken().then()},E)}}cancelTokenRotationJob(){c.ZP.featureToggles.clientTokenRotation&&this.tokenRotationJobId>0&&clearTimeout(this.tokenRotationJobId)}rotateToken(){return fetch("/api/user/auth-tokens/rotate",{method:"POST"}).then(g=>{if(g.status===200){this.scheduleTokenRotationJob();return}if(g.status===401){this.setLoggedOut();return}}).catch(g=>{console.error(g)})}getSessionExpiry(){const g=document.cookie.split("; ").find(E=>E.startsWith("grafana_session_expiry="));if(!g)return 0;let p=g.split("=").at(1);return p?parseInt(p,10):0}}let r=new m;const u=d=>{throw new Error("contextSrv can be only overridden in test environment")}},13019:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(82897),n=e.n(t),l=e(54899),s=e(47694),i=e(58379);class f{constructor(){}addDashboardImpression(r){const u=this.impressionKey();let d=[];i.Z.exists(u)&&(d=JSON.parse(i.Z.get(u)),(0,t.isArray)(d)||(d=[])),d=d.filter(g=>r!==g),d.unshift(r),d.length>50&&d.pop(),i.Z.set(u,JSON.stringify(d))}async convertToUIDs(){let r=this.getImpressions();const u=(0,t.filter)(r,g=>(0,t.isNumber)(g));if(!u.length)return;const d=await(0,l.i)().get(`/api/dashboards/ids/${u.join(",")}`);i.Z.set(this.impressionKey(),JSON.stringify([...(0,t.filter)(r,g=>(0,t.isString)(g)),...d]))}getImpressions(){const r=i.Z.get(this.impressionKey())||"[]";return JSON.parse(r)}async getDashboardOpened(){try{await this.convertToUIDs()}catch{}return(0,t.filter)(this.getImpressions(),u=>(0,t.isString)(u))}impressionKey(){return"dashboard_impressions-"+s.ZP.bootData.user.orgId}}const o=new f},58379:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>l});class t{get(i){return window.localStorage[i]}set(i,f){window.localStorage[i]=f}getBool(i,f){return f!==void 0&&!this.exists(i)?f:window.localStorage[i]==="true"}getObject(i,f){let c=f;if(this.exists(i)){const o=window.localStorage[i];try{c=JSON.parse(o)}catch(m){console.error(`Error parsing store object: ${i}. Returning default: ${f}. [${m}]`)}}return c}setObject(i,f){let c;try{c=JSON.stringify(f)}catch(o){throw new Error(`Could not stringify object: ${i}. [${o}]`)}try{this.set(i,c)}catch(o){const m=new Error(`Could not save item in localStorage: ${i}. [${o}]`);throw o instanceof Error&&(m.name=o.name),m}return!0}exists(i){return window.localStorage[i]!==void 0}delete(i){window.localStorage.removeItem(i)}}const l=new t},4050:(Z,O,e)=>{"use strict";e.d(O,{W:()=>o,Z:()=>m});var t=e(82897),n=e.n(t),l=e(29076),s=e(20112);function i(r,u){if(!r)return!1;if(r[0]==="/"){const d=(0,l.jO)(r);return u.match(d)!=null}return r===u}function f(r){return r===0?.001:r/10}function c(r){return r?{colors:[{opacity:0},{opacity:r/10}]}:null}function o(r,u,d){for(let g=0;g<r.length;g++){const p=r[g],E=u.yaxes,h=p.yaxis||1,a=E[h-1],v=(0,s.Cf)(a.format);(0,t.isNumber)(u.decimals)?p.updateLegendValues(v,u.decimals):(0,t.isNumber)(a.decimals)?p.updateLegendValues(v,a.decimals+1):p.updateLegendValues(v,null)}}class m{constructor(u){this.datapoints=u.datapoints,this.label=u.alias,this.id=u.alias,this.alias=u.alias,this.aliasEscaped=(0,t.escape)(u.alias),this.color=u.color,this.bars={fillColor:u.color},this.valueFormater=(0,s.Cf)("none"),this.stats={},this.legend=!0,this.unit=u.unit,this.dataFrameIndex=u.dataFrameIndex,this.fieldIndex=u.fieldIndex,this.hasMsResolution=this.isMsResolutionNeeded()}applySeriesOverrides(u){this.lines={},this.dashes={dashLength:[]},this.points={},this.yaxis=1,this.zindex=0,this.nullPointMode=null,delete this.stack,delete this.bars.show;for(let d=0;d<u.length;d++){const g=u[d];i(g.alias,this.alias)&&(g.lines!==void 0&&(this.lines.show=g.lines),g.dashes!==void 0&&(this.dashes.show=g.dashes,this.lines.lineWidth=0),g.points!==void 0&&(this.points.show=g.points),g.bars!==void 0&&(this.bars.show=g.bars),g.fill!==void 0&&(this.lines.fill=f(g.fill)),g.fillGradient!==void 0&&(this.lines.fillColor=c(g.fillGradient)),g.stack!==void 0&&(this.stack=g.stack),g.linewidth!==void 0&&(this.lines.lineWidth=this.dashes.show?0:g.linewidth,this.dashes.lineWidth=g.linewidth),g.dashLength!==void 0&&(this.dashes.dashLength[0]=g.dashLength),g.spaceLength!==void 0&&(this.dashes.dashLength[1]=g.spaceLength),g.nullPointMode!==void 0&&(this.nullPointMode=g.nullPointMode),g.pointradius!==void 0&&(this.points.radius=g.pointradius),g.steppedLine!==void 0&&(this.lines.steps=g.steppedLine),g.zindex!==void 0&&(this.zindex=g.zindex),g.fillBelowTo!==void 0&&(this.fillBelowTo=g.fillBelowTo),g.color!==void 0&&this.setColor(g.color),g.transform!==void 0&&(this.transform=g.transform),g.legend!==void 0&&(this.legend=g.legend),g.hideTooltip!==void 0&&(this.hideTooltip=g.hideTooltip),g.yaxis!==void 0&&(this.yaxis=g.yaxis),g.hiddenSeries!==void 0&&(this.hiddenSeries=g.hiddenSeries))}}getFlotPairs(u){const d=[];this.stats.total=0,this.stats.max=-Number.MAX_VALUE,this.stats.min=Number.MAX_VALUE,this.stats.logmin=Number.MAX_VALUE,this.stats.avg=null,this.stats.current=null,this.stats.first=null,this.stats.delta=0,this.stats.diff=null,this.stats.diffperc=0,this.stats.range=null,this.stats.timeStep=Number.MAX_VALUE,this.allIsNull=!0,this.allIsZero=!0;const g=u==="connected",p=u==="null as zero";let E,h,a=0,v,x=0,y=!0;for(let C=0;C<this.datapoints.length;C++){if(h=this.datapoints[C][0],E=this.datapoints[C][1],v!==void 0){const P=E-v;P<this.stats.timeStep&&(this.stats.timeStep=P)}if(v=E,h===null){if(g)continue;p&&(h=0)}h!==null&&((0,t.isNumber)(h)&&(this.stats.total+=h,this.allIsNull=!1,a++),h>this.stats.max&&(this.stats.max=h),h<this.stats.min&&(this.stats.min=h),this.stats.first===null?this.stats.first=h:x>h?(y=!1,C===this.datapoints.length-1&&(this.stats.delta+=h)):(y?this.stats.delta+=h-x:this.stats.delta+=h,y=!0),x=h,h<this.stats.logmin&&h>0&&(this.stats.logmin=h),h!==0&&(this.allIsZero=!1)),d.push([E,h])}return this.stats.max===-Number.MAX_VALUE&&(this.stats.max=null),this.stats.min===Number.MAX_VALUE&&(this.stats.min=null),d.length&&!this.allIsNull&&(this.stats.avg=this.stats.total/a,this.stats.current=d[d.length-1][1],this.stats.current===null&&d.length>1&&(this.stats.current=d[d.length-2][1])),this.stats.max!==null&&this.stats.min!==null&&(this.stats.range=this.stats.max-this.stats.min),this.stats.current!==null&&this.stats.first!==null&&(this.stats.diff=this.stats.current-this.stats.first,this.stats.diffperc=this.stats.diff/this.stats.first),this.stats.count=d.length,d}updateLegendValues(u,d){this.valueFormater=u,this.decimals=d}formatValue(u){return(0,t.isFinite)(u)||(u=null),(0,s.zc)(this.valueFormater(u,this.decimals))}isMsResolutionNeeded(){for(let u=0;u<this.datapoints.length;u++)if(this.datapoints[u][1]!==null&&this.datapoints[u][1]!==void 0){const d=this.datapoints[u][1].toString();if(d.length===13&&d%1e3!==0)return!0}return!1}hideFromLegend(u){return!!(u.hideEmpty&&this.allIsNull||!this.legend||u.hideZero&&this.allIsZero)}setColor(u){this.color=u,this.bars.fillColor=u}}},92973:(Z,O,e)=>{"use strict";e.d(O,{E:()=>f,f:()=>i});var t=e(68404),n=e(82378),l=e(72648),s=e(77582);const i=({children:c,value:o})=>{const[m,r]=(0,t.useState)(o);return(0,t.useEffect)(()=>{const u=s.h$.subscribe(n.hD,d=>{r(d.payload)});return()=>u.unsubscribe()},[]),t.createElement(l.Ni.Provider,{value:m},c)},f=(c,o)=>function(r){return t.createElement(i,{value:o},t.createElement(c,{...r}))}},77410:(Z,O,e)=>{"use strict";e.d(O,{q:()=>t});class t extends window.Worker{constructor(l,s){const i=l.toString(),f=i.split("/");f.pop();const c=`${f.join("/")}/`,o=`importScripts('${i}');`,m=URL.createObjectURL(new Blob([`__webpack_worker_public_path__ = '${c}'; ${o}`],{type:"application/javascript"}));super(m,s),URL.revokeObjectURL(m)}}},95156:(Z,O,e)=>{"use strict";e.d(O,{y:()=>n});var t=e(47694);function n(l={}){return t.ZP.rbacEnabled?{...l,accesscontrol:!0}:l}},2024:(Z,O,e)=>{"use strict";e.d(O,{A:()=>t});function t(l){return l.map(n).sort((s,i)=>i.sortRank-s.sortRank||s.name.localeCompare(i.name))}function n(l){const s=l;return s.sortRank=0,s.userId>0?(s.name=s.userLogin,s.sortRank=10):s.teamId>0?(s.name=s.team,s.sortRank=20):s.role&&(s.icon="fa fa-fw fa-street-view",s.name=s.role,s.sortRank=30,s.role==="Editor"&&(s.sortRank+=1)),s.inherited&&(s.sortRank+=100),s}},79378:(Z,O,e)=>{"use strict";e.d(O,{R:()=>t});const t=(n,l,s)=>(n.splice(s,0,n.splice(l,1)[0]),n)},43226:(Z,O,e)=>{"use strict";e.d(O,{vl:()=>l});function t(){const s=navigator.userAgent.indexOf("MSIE")>-1,i=navigator.userAgent.indexOf("Edge/")>-1||navigator.userAgent.indexOf("Edg/")>-1,f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,c=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),o=/Edge\/([0-9.]+)/.exec(navigator.userAgent);return s&&parseFloat(/Trident\/([0-9.]+)/.exec(navigator.userAgent)[1])<=7||i&&(o&&parseFloat(o[1])<=16||parseFloat(/Edg\/([0-9.]+)/.exec(navigator.userAgent)[1])<=16)||f&&parseFloat(/Firefox\/([0-9.]+)/.exec(navigator.userAgent)[1])<=64?!1:!(c&&parseFloat(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1])<=54)}function n(){return/(iPhone|iPad|Mac)/.test(navigator.platform)}function l(){return n()?"cmd":"ctrl"}},28630:(Z,O,e)=>{"use strict";e.d(O,{kJ:()=>l});class t{_linkTo(c,o){o<=0&&c.inputEdges.push(this),o>=0&&c.outputEdges.push(this),c.edges.push(this)}link(c,o){if(!c)throw Error("inputNode is required");if(!o)throw Error("outputNode is required");return this.unlink(),this.inputNode=c,this.outputNode=o,this._linkTo(c,1),this._linkTo(o,-1),this}unlink(){let c;const o=this.inputNode,m=this.outputNode;o&&m&&(c=o.edges.indexOf(this),c>-1&&o.edges.splice(c,1),c=m.edges.indexOf(this),c>-1&&m.edges.splice(c,1),c=o.outputEdges.indexOf(this),c>-1&&o.outputEdges.splice(c,1),c=m.inputEdges.indexOf(this),c>-1&&m.inputEdges.splice(c,1))}}class n{constructor(c){this.name=c,this.edges=[],this.inputEdges=[],this.outputEdges=[]}getEdgeFrom(c){return c?typeof c=="object"?this.inputEdges.find(o=>o.inputNode?.name===c.name):this.inputEdges.find(o=>o.inputNode?.name===c):null}getEdgeTo(c){return c?typeof c=="object"?this.outputEdges.find(o=>o.outputNode?.name===c.name):this.outputEdges.find(o=>o.outputNode?.name===c):null}getOptimizedInputEdges(){const c=[];return this.inputEdges.forEach(o=>{o.inputNode?.inputEdges.map(r=>r.inputNode)?.forEach(r=>{const u=r?.getEdgeTo(this.name);u&&c.push(u)})}),this.inputEdges.filter(o=>c.indexOf(o)===-1)}}class l{constructor(){this.nodes={}}createNode(c){const o=new n(c);return this.nodes[c]=o,o}createNodes(c){const o=[];return c.forEach(m=>{o.push(this.createNode(m))}),o}link(c,o){let m=[],r=[];const u=[],d=[];c instanceof Array?m=c:m=[c],o instanceof Array?r=o:r=[o];for(let p=0;p<m.length;p++){const E=m[p];if(typeof E=="string"){const h=this.getNode(E);if(!h)throw Error(`cannot link input node named ${E} since it doesn't exist in graph`);u.push(h)}else u.push(E)}for(let p=0;p<r.length;p++){const E=r[p];if(typeof E=="string"){const h=this.getNode(E);if(!h)throw Error(`cannot link output node named ${E} since it doesn't exist in graph`);d.push(h)}else d.push(E)}const g=[];return u.forEach(p=>{d.forEach(E=>{g.push(this.createEdge().link(p,E))})}),g}descendants(c){if(!c.length)return new Set;const o=new Set(i(c)?c.map(m=>this.nodes[m]).filter(m=>m!==void 0):c);return this.descendantsRecursive(o)}descendantsRecursive(c,o=new Set){for(const m of c){const r=new Set;for(const{inputNode:u}of m.inputEdges)u&&!o.has(u)&&(o.add(u),r.add(u));this.descendantsRecursive(r,o)}return o}createEdge(){return new t}getNode(c){return this.nodes[c]}}const s=f=>{Object.keys(f.nodes).forEach(c=>{const o=f.nodes[c];let m=o.outputEdges.map(u=>u.outputNode?.name).join(", ");m||(m="<none>");let r=o.inputEdges.map(u=>u.inputNode?.name).join(", ");r||(r="<none>"),console.log(`${o.name}:
 - links to:   ${m}
 - links from: ${r}`)})};function i(f){return f.length>0&&typeof f[0]=="string"}},82052:(Z,O,e)=>{"use strict";e.d(O,{i:()=>n});var t=e(54899);function n(l){if(typeof l=="string")return l;if(l){if(l instanceof Error)return l.message;if((0,t.kW)(l)){if(l.data&&l.data.message)return l.data.message;if(l.statusText)return l.statusText}}return JSON.stringify(l)}},55935:(Z,O,e)=>{"use strict";e.d(O,{$$:()=>z,F3:()=>ce,H6:()=>P,HI:()=>I,I$:()=>C,J5:()=>A,OQ:()=>G,Oy:()=>re,RZ:()=>ie,UI:()=>a,Xh:()=>w,Xk:()=>F,Z8:()=>U,Zf:()=>D,_Q:()=>Y,_o:()=>W,fR:()=>K,n9:()=>Ce,uC:()=>M,vP:()=>j,z_:()=>S});var t=e(82897),n=e.n(t),l=e(44288),s=e(40538),i=e(27677),f=e(40400),c=e(69311),o=e(33180),m=e(46519),r=e(21053),u=e(86647),d=e(5562),g=e(58379),p=e(97573),E=e(47694),h=e(99822);const a={from:"now-1h",to:"now"},v={dedupStrategy:s.Y4.none},x=100,y="grafana.explore.datasource",C=ee=>`${y}.${ee}`;async function P(ee){const{panel:ne,datasourceSrv:X,timeSrv:te}=ee;let ae=await X.get(ne.datasource),_=ne.targets.map(Ve=>(0,t.omit)(Ve,"legendFormat")).filter(Ve=>Ve.datasource?.uid!==p.Yq),ve;if(E.vc.featureToggles.exploreMixedDatasource===!1&&ae.meta?.id==="mixed"&&_)for(const Ve of _){const it=await X.get(Ve.datasource||void 0);if(it){ae=it,_=ne.targets.filter(rt=>rt.datasource===it.name);break}}if(ae){let it={range:te.timeRangeForUrl()};if(ae.interpolateVariablesInQueries){const pe=ne.scopedVars||{};it={...it,datasource:ae.name,context:"explore",queries:ae.interpolateVariablesInQueries(_,pe)}}else it={...it,datasource:ae.name,context:"explore",queries:_};const rt=JSON.stringify(it);ve=i.Cj.renderUrl("/explore",{left:rt})}return ve}function D(ee,ne,X,te,ae,_){const ve=ne.reduce((Ie,We)=>(Ie+=We.key,Ie),""),{interval:Ve,intervalMs:it}=fe(te,X.minInterval,X.maxDataPoints),rt=`${ve}`,pe={app:f.zj.Explore,dashboardId:0,timezone:_||c.Ys,startTime:Date.now(),interval:Ve,intervalMs:it,panelId:rt,targets:ne,range:te,requestId:"explore_"+ee,rangeRaw:te.raw,scopedVars:{__interval:{text:Ve,value:Ve},__interval_ms:{text:it,value:it}},maxDataPoints:X.maxDataPoints,liveStreaming:X.liveStreaming};return{queries:ne,request:pe,scanning:ae,id:I(),done:!1}}const M=({key:ee,...ne})=>ne,b=(ee,...ne)=>ne.some(X=>ee.hasOwnProperty(X));var R=(ee=>(ee[ee.RangeFrom=0]="RangeFrom",ee[ee.RangeTo=1]="RangeTo",ee[ee.Datasource=2]="Datasource",ee[ee.SegmentsStart=3]="SegmentsStart",ee))(R||{});const B=ee=>{if(ee)try{return JSON.parse(ee)}catch(ne){console.error(ne)}},w=(ee,ne)=>{if(ee==null)return"";try{return JSON.stringify(ee,null,ne)}catch(X){console.error(X)}return""};function A(ee){const ne=B(ee),X={datasource:null,queries:[],range:a,mode:null};if(!ne)return X;if(!Array.isArray(ne))return{...ne,isFromCompactUrl:!1};if(ne.length<=3)return console.error("Error parsing compact URL state for Explore."),X;const te={from:ne[0],to:ne[1]},ae=ne[2],_=ne.slice(3),ve=_.filter(it=>!b(it,"ui","mode","__panelsState")),Ve=_.find(it=>b(it,"__panelsState"))?.__panelsState;return{datasource:ae,queries:ve,range:te,panelsState:Ve,isFromCompactUrl:!0}}function I(ee=0){return`Q-${(0,l.Z)()}-${ee}`}async function F(ee,ne=0,X){let te,ae,_;return X?ae=X:ee.length>0&&ee[ee.length-1].datasource?ae=ee[ee.length-1].datasource:(te=await(0,u.F)().get(),_=te.getDefaultQuery?.(f.zj.Explore),ae=te.getRef()),te||(te=await(0,u.F)().get(ae),_=te.getDefaultQuery?.(f.zj.Explore)),{refId:(0,h.Hs)(ee),key:I(ne),datasource:ae,..._}}const K=(ee,ne,X=0)=>{const te=I(X),ae=ee.refId||(0,h.Hs)(ne);return{...ee,refId:ae,key:te}},W=ee=>{const ne=ee.map(X=>X.datasource?.uid);return{allHaveDatasource:ne.length===ee.length,noneHaveDatasource:ne.length===0,allDatasourceSame:ne.every((X,te,ae)=>X===ae[0])}};async function U(ee,ne){if(ee&&typeof ee=="object"&&ee.length>0){const X=[];for(let te=0;te<ee.length;te++){const ae=ee[te],_=I(te);let ve=ae.refId;ve||(ve=(0,h.Hs)(X));let Ve=!0;if(ae.datasource)try{await(0,u.F)().get(ae.datasource.uid)}catch{console.error("One of the queries has a datasource that is no longer available and was removed."),Ve=!1}Ve&&X.push({...ae,refId:ve,key:_})}return X}try{const X=ne??(await(0,u.F)().get()).getRef();return[await F(ee??[],void 0,X)]}catch{return[]}}const N=["refId","key","context","datasource"];function S(ee){return ee&&ee.some(ne=>Object.keys(ne).filter(te=>N.indexOf(te)===-1).map(te=>ne[te]).filter(te=>te).length>0)}function Y(ee,ne,X){const te=Date.now();let ae=ee;X.forEach(ve=>{ae=[{query:ve,ts:te},...ae]}),ae.length>x&&(ae=ae.slice(0,x));const _=`grafana.explore.history.${ne}`;try{return g.Z.setObject(_,ae),ae}catch(ve){return console.error(ve),ee}}function Q(ee){const ne=`grafana.explore.history.${ee}`;store.delete(ne)}const z=ee=>ee.reduce((X,te,ae)=>{const _=te.datasource?.uid||te.key;return X.concat(`${_}-${ae}`)},[]),G=(ee,ne,X)=>{let te=o.convertRawToRange(ne,ee,X);return te.to.isBefore(te.from)&&(te=o.convertRawToRange({from:te.raw.to,to:te.raw.from},ee,X)),te},k=ee=>{if(ee===null)return null;if((0,m.v9)(ee)||ee.indexOf("now")!==-1)return ee;if(ee.length===8)return(0,m.zh)(ee,"YYYYMMDD");if(ee.length===15)return(0,m.zh)(ee,"YYYYMMDDTHHmmss");if(ee.length===19)return(0,m.zh)(ee,"YYYY-MM-DD HH:mm:ss");if(ee.match(/^\d+$/)){const X=parseInt(ee,10);return(0,m.zh)(X)}const ne=(0,m.zh)(ee);return ne.isValid()?ne:null},j=(ee,ne,X)=>{const te={from:k(ee.from),to:k(ee.to)};return{from:r.parse(te.from,!1,ne),to:r.parse(te.to,!0,ne),raw:te}},de=ee=>{if(!ee||typeof ee!="object")return;if(ee.refId)return ee;const ne=Object.keys(ee);for(let X=0;X<ne.length;X++){const te=ne[X],ae=de(ee[te]);if(ae)return ae}},ge=ee=>{if(!ee)return[];if(typeof ee!="object")return[];const ne=Object.keys(ee),X=[];for(let te=0;te<ne.length;te++){const ae=ne[te];if(ae==="refId"){X.push(ee[ae]);continue}X.push(ge(ee[ae]))}return uniq(flatten(X))},re=ee=>d.dP.isLive(ee)?s.UV.Ascending:s.UV.Descending,ce=ee=>{let X=`${window.location.protocol==="https:"?"wss://":"ws://"}${window.location.host}${E.vc.appSubUrl}`;return X.endsWith("/")&&(X=X.slice(0,-1)),`${X}${ee}`},ie=ee=>{ee&&ee.unsubscribe()};function fe(ee,ne,X){return X?o.calculateInterval(ee,X,ne):{interval:"1s",intervalMs:1e3}}const Ce=ee=>{const ne=document.createElement("textarea");ne.value=ee,document.body.appendChild(ne),ne.select(),document.execCommand("copy"),document.body.removeChild(ne)}},8878:(Z,O,e)=>{"use strict";e.d(O,{Xv:()=>h,aO:()=>p,nS:()=>s,rZ:()=>d,tW:()=>E});var t=e(82897),n=e.n(t),l=e(99227);const s=v=>{const x=v.method,y=u(v),C=d(y),P=g(v,C),D=a(v);return{method:x,headers:y,body:P,credentials:D}},i={canParse:()=>!0,parse:v=>(v.get("accept")||v.set("accept","application/json, text/plain, */*"),v)},f=v=>({canParse:x=>(x?.method?x?.method.toLowerCase():"")===v,parse:x=>(x.get("content-type")||x.set("content-type","application/json"),x)}),c=f("post"),o=f("put"),m=f("patch"),r=[c,o,m,i],u=v=>{const x=v?.headers?new Headers(v.headers):new Headers;return r.filter(P=>P.canParse(v)).reduce((P,D)=>D.parse(P),x)},d=v=>{if(!v)return!1;const x=v.get("content-type");return!!(x&&x.toLowerCase()==="application/json")},g=(v,x)=>v&&(!v.data||typeof v.data=="string"?v.data:x?JSON.stringify(v.data):new URLSearchParams(v.data));async function p(v,x){if(x)switch(x){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"json":return v.headers.get("Content-Length")==="0"?(console.warn(`${v.url} returned an invalid JSON`),{}):await v.json();case"text":return v.text()}const y=await v.text();try{return JSON.parse(y)}catch{}return y}function E(v){return Object.keys(v).map(x=>{const y=v[x];return Array.isArray(y)?y.map(C=>`${encodeURIComponent(x)}=${encodeURIComponent(C)}`).join("&"):`${encodeURIComponent(x)}=${encodeURIComponent(y)}`}).join("&")}const h=v=>{const x=(0,t.omitBy)(v.params,C=>C===void 0||C&&C.length===0),y=E(x);return v.params&&y.length?`${v.url}?${y}`:v.url},a=v=>v&&(v.credentials?v.credentials:v.withCredentials?((0,l.d)("BackendSrvRequest","withCredentials","credentials"),"include"):"same-origin")},40229:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{default:()=>t});function t(n,l){l=l||{};const s=l.delimiter||".";let i=l.maxDepth||3,f=1;const c={};function o(m,r){Object.keys(m).forEach(u=>{const d=m[u],g=l?.safe&&Array.isArray(d),E=Object.prototype.toString.call(d)==="[object Object]",h=r?r+s+u:u;if(l?.maxDepth||(i=f+1),!g&&E&&Object.keys(d).length&&f<i)return++f,o(d,h);c[h]=d})}return o(n,null),c}},24816:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(99227),n=e(29076),l=e(33180),s=e(20112);const i={valueFormats:{},intervalRegex:/(\d+(?:\.\d+)?)(ms|[Mwdhmsy])/,intervalsInSeconds:{y:31536e3,M:2592e3,w:604800,d:86400,h:3600,m:60,s:1,ms:.001},regexEscape:c=>((0,t.d)("kbn.ts","kbn.regexEscape()","escapeRegex from @grafana/data"),(0,n.yI)(c)),roundInterval:c=>((0,t.d)("kbn.ts","kbn.roundInterval()","@grafana/data"),l.roundInterval(c)),secondsToHms:c=>((0,t.d)("kbn.ts","kbn.secondsToHms()","@grafana/data"),l.secondsToHms(c)),secondsToHhmmss:c=>{const o=[],m=Math.floor(c/3600),r=Math.floor(c%3600/60),u=Math.floor(c%3600%60);return m>9?o.push(""+m):o.push("0"+m),r>9?o.push(""+r):o.push("0"+r),u>9?o.push(""+u):o.push("0"+u),o.join(":")},toPercent:(c,o)=>Math.floor(c/o*1e4)/100+"%",addSlashes:c=>c.replace(/[\'\"\\0]/g,"\\$&"),describeInterval:c=>((0,t.d)("kbn.ts","kbn.describeInterval()","@grafana/data"),l.describeInterval(c)),intervalToSeconds:c=>((0,t.d)("kbn.ts","rangeUtil.intervalToSeconds()","@grafana/data"),l.intervalToSeconds(c)),intervalToMs:c=>((0,t.d)("kbn.ts","rangeUtil.intervalToMs()","@grafana/data"),l.intervalToMs(c)),calculateInterval:(c,o,m)=>((0,t.d)("kbn.ts","kbn.calculateInterval()","@grafana/data"),l.calculateInterval(c,o,m)),queryColorDot:(c,o)=>'<div class="icon-circle" style="'+["display:inline-block","color:"+c,"font-size:"+o+"px"].join(";")+'"></div>',slugifyForUrl:c=>c.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-"),stringToJsRegex:c=>((0,t.d)("kbn.ts","kbn.stringToJsRegex()","@grafana/data"),(0,n.jO)(c)),toFixed:(c,o)=>{if(c===null)return"";const m=o?Math.pow(10,Math.max(0,o)):1,r=String(Math.round(c*m)/m);if(r.indexOf("e")!==-1||c===0)return r;if(o!=null){const u=r.indexOf("."),d=u===-1?0:r.length-u-1;if(d<o)return(d?r:r+".")+String(m).slice(1,o-d+1)}return r},toFixedScaled:(c,o,m,r,u)=>m===null?i.toFixed(c,o)+u:i.toFixed(c,m+r)+u,roundValue:(c,o)=>{if(c===null)return null;const m=Math.pow(10,o),r=(m*c).toFixed(o);return Math.round(parseFloat(r))/m},getUnitFormats:s.QW};typeof Proxy<"u"?i.valueFormats=new Proxy(i.valueFormats,{get(c,o,m){if(typeof o!="string")throw{message:`Value format ${String(o)} is not a string`};const r=(0,s.Cf)(o);return r?(u,d,g,p)=>(0,s.zc)(r(u,d,g,p?"utc":"browser")):Reflect.get(c,o,m)}}):i.valueFormats=(0,s.Td)();const f=i},99822:(Z,O,e)=>{"use strict";e.d(O,{DI:()=>l,Hs:()=>t,R8:()=>i,mu:()=>s,sB:()=>c,vH:()=>n});const t=o=>{for(let m=0;;m++){const r=f(m);if(!o.some(u=>u.refId===r))return r}};function n(o){const m=["refId","hide","key","queryType","datasource"];for(const r in o)if(r!=="label"&&!m.includes(r))return!1;return!0}function l(o,m,r){const u=m||{};return u.refId=t(o),u.hide=!1,!u.datasource&&r&&(u.datasource=r),[...o,u]}function s(o){return o.indexOf("api/datasources/proxy")!==-1||o.indexOf("api/ds/query")!==-1}function i(o){return!o.match(/^http/)}function f(o){const m="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return o<m.length?m[o]:f(Math.floor(o/m.length)-1)+m[o%m.length]}function c(o){return o||void 0}},51424:(Z,O,e)=>{"use strict";e.d(O,{As:()=>p.A,DR:()=>K,HK:()=>x,OH:()=>I,VI:()=>y,au:()=>E,bQ:()=>R,di:()=>v,gt:()=>C,k4:()=>F,kg:()=>a,rq:()=>M,rv:()=>D,t2:()=>b,ub:()=>h,y9:()=>P});var t=e(82897),n=e.n(t),l=e(27677),s=e(38849),i=e(86647),f=e(659),c=e(60499),o=e(3153),m=e(47694),r=e(66719),u=e(4420),d=e(50395),g=e(40967),p=e(43823);async function E(U,N,S,Y,Q,z,G){const k=S&&S.filter(j=>W(j));if(k.length>0){let j=!1,de=!1,ge;try{ge=(await(0,g.b)().addToRichHistory({datasourceUid:U,datasourceName:N??"",queries:k,starred:Y,comment:Q??""})).warning}catch(re){return re instanceof Error&&(re.name===d.j.StorageFull?(j=!0,z&&(0,o.WI)((0,f.$l)((0,c.t_)(re.message)))):re.name!==d.j.DuplicatedEntry&&(0,o.WI)((0,f.$l)((0,c.t_)("Rich History update failed",re.message)))),{richHistoryStorageFull:j,limitExceeded:de}}return ge&&ge.type===d.V.LimitExceeded&&(de=!0,G&&(0,o.WI)((0,f.$l)((0,c.ZR)(ge.message)))),{richHistoryStorageFull:j,limitExceeded:de}}return{}}async function h(U){return await(0,g.b)().getRichHistory(U)}async function a(U){await(0,g.b)().updateSettings(U)}async function v(){return await(0,g.b)().getSettings()}async function x(){return(0,g.b)().deleteAll()}async function y(U,N){try{return await(0,g.b)().updateStarred(U,N)}catch(S){S instanceof Error&&(0,o.WI)((0,f.$l)((0,c.t_)("Saving rich history failed",S.message)));return}}async function C(U,N){try{return await(0,g.b)().updateComment(U,N)}catch(S){S instanceof Error&&(0,o.WI)((0,f.$l)((0,c.t_)("Saving rich history failed",S.message)));return}}async function P(U){try{return await(0,g.b)().deleteRichHistory(U),U}catch(N){N instanceof Error&&(0,o.WI)((0,f.$l)((0,c.t_)("Saving rich history failed",N.message)));return}}var D=(U=>(U.Successful="successful",U.Failed="failed",U.NotNeeded="not-needed",U))(D||{});async function M(){const U=new r.ZP,N=new u.Z;try{const{richHistory:S}=await U.getRichHistory({datasourceFilters:[],from:0,search:"",sortOrder:p.A.Descending,starred:!1,to:14});return S.length===0?{status:"not-needed"}:(await N.migrate(S),(0,o.WI)((0,f.$l)((0,c.AT)("Query history successfully migrated from local storage"))),{status:"successful"})}catch(S){const Y=S instanceof Error?S:new Error("Uknown error occurred.");return(0,o.WI)((0,f.$l)((0,c.ZR)(`Query history migration failed. ${Y.message}`))),{status:"failed",error:Y}}}const b=U=>{const N={range:{from:"now-1h",to:"now"},datasource:U.datasourceName,queries:U.queries,context:"explore"},S=(0,l.S)(N),Y=/.*(?=\/explore)/.exec(`${window.location.href}`)[0];return l.Cj.renderUrl(`${Y}/explore`,{left:S})},R=U=>{let N;switch(U){case 0:N="today";break;case 1:N="yesterday";break;case 7:N="a week ago";break;case 14:N="two weeks ago";break;default:N=`${U} days ago`}return N};function B(U){return(0,s.dq)(U,{format:"MMMM D"})}function w(U){const N=(0,t.omit)(U,["key","refId","datasource"]);return JSON.stringify(N)}function A(U,N){let S="";return N===p.A.DatasourceAZ||N===p.A.DatasourceZA?S=U.datasourceName:S=B(U.createdAt),S}function I(U,N){return N?.getQueryDisplayText?N.getQueryDisplayText(U):w(U)}function F(U,N){let S={};return U.forEach(Y=>{let Q=A(Y,N);Q in S?S[Q]=[...S[Q],Y]:S[Q]=[Y]}),S}function K(){return(0,i.F)().getList({mixed:m.vc.featureToggles.exploreMixedDatasource===!0}).map(U=>({name:U.name,uid:U.uid}))}function W(U){const N=(0,t.omit)(U,["key","refId","datasource"]);return Object.keys(N).length>0}},43823:(Z,O,e)=>{"use strict";e.d(O,{A:()=>t});var t=(n=>(n.Descending="Descending",n.Ascending="Ascending",n.DatasourceAZ="Datasource A-Z",n.DatasourceZA="Datasource Z-A",n))(t||{})},57465:(Z,O,e)=>{"use strict";e.d(O,{D:()=>r,L:()=>u});var t=e(58635),n=e(35645),l=e(54899),s=e(659),i=e(60499),f=e(3153),c=e(55935);function o(){return`${window.location.protocol}//${window.location.host}${n.v.appSubUrl}`}function m(d){let g=d.replace(o(),"");return g.startsWith("/")?g.substring(1,g.length):g}const r=(0,t.Z)(async function(d){try{return(await(0,l.i)().post("/api/short-urls",{path:m(d)})).url}catch(g){console.error("Error when creating shortened link: ",g),(0,f.WI)((0,s.$l)((0,i.t_)("Error generating shortened link")))}}),u=async d=>{const g=await r(d);g?((0,c.n9)(g),(0,f.WI)((0,s.$l)((0,i.AT)("Shortened link copied to clipboard")))):(0,f.WI)((0,s.$l)((0,i.t_)("Error generating shortened link")))}},97724:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{getFlotRange:()=>s,getFlotTickDecimals:()=>i,getFlotTickSize:()=>l,getPrecision:()=>o,getScaledDecimals:()=>n,getStringPrecision:()=>m,grafanaTimeFormat:()=>f,logp:()=>c,tickStep:()=>t});function t(r,u,d){const g=Math.sqrt(50),p=Math.sqrt(10),E=Math.sqrt(2),h=Math.abs(u-r)/Math.max(0,d);let a=Math.pow(10,Math.floor(Math.log(h)/Math.LN10));const v=h/a;return v>=g?a*=10:v>=p?a*=5:v>=E&&(a*=2),u<r?-a:a}function n(r,u){return r-Math.floor(Math.log(u)/Math.LN10)}function l(r,u,d,g){const p=(u-r)/d;let E=-Math.floor(Math.log(p)/Math.LN10);const h=g,a=Math.pow(10,-E),v=p/a;let x;return v<1.5?x=1:v<3?(x=2,v>2.25&&(h==null||E+1<=h)&&(x=2.5,++E)):v<7.5?x=5:x=10,x*=a,x}function s(r,u,d,g){let E=+(r??d),h=+(u??g);const a=h-E;if(a===0){const x=Math.abs(h===0?1:h*.25);r===null&&(E-=x),(u==null||r!=null)&&(h+=x)}else .02!=null&&(r==null&&(E-=a*.02,E<0&&d!=null&&d>=0&&(E=0)),u==null&&(h+=a*.02,h>0&&g!=null&&g<=0&&(h=0)));return{min:E,max:h}}function i(r,u,d,g){const{min:p,max:E}=s(d.min,d.max,r,u),h=.3*Math.sqrt(g),a=(E-p)/h,v=-Math.floor(Math.log(a)/Math.LN10),x=Math.pow(10,-v),y=a/x;let C;y<1.5?C=1:y<3?(C=2,y>2.25&&(C=2.5)):y<7.5?C=5:C=10,C*=x;const P=Math.max(0,-Math.floor(Math.log(a)/Math.LN10)+1),D=P-Math.floor(Math.log(C)/Math.LN10);return{tickDecimals:P,scaledDecimals:D}}function f(r,u,d){if(u&&d&&r){const g=d-u,p=g/r/1e3,E=864e5,h=31536e6;return p<=45?"HH:mm:ss":p<=7200||g<=E?"HH:mm":p<=8e4?"MM/DD HH:mm":p<=2419200||g<=h?"MM/DD":"YYYY-MM"}return"HH:mm"}function c(r,u){return Math.log(r)/Math.log(u)}function o(r){const u=r.toString();return m(u)}function m(r){if(isNaN(r))return 0;const u=r.indexOf(".");return u===-1?0:r.length-u-1}},5242:(Z,O,e)=>{"use strict";e.d(O,{e:()=>n,h:()=>l});var t=e(46519);const n=(s,i)=>{const f={from:(0,t.zh)(i.from),to:(0,t.zh)(i.to)},c=(f.to.valueOf()-f.from.valueOf())/2;let o,m;return s===-1?(o=f.to.valueOf()-c,m=f.from.valueOf()-c):s===1?(o=f.to.valueOf()+c,m=f.from.valueOf()+c,o>Date.now()&&f.to.valueOf()<Date.now()&&(o=Date.now(),m=f.from.valueOf())):(o=f.to.valueOf(),m=f.from.valueOf()),{from:m,to:o}},l=(s,i)=>{const f=s.to.valueOf()-s.from.valueOf(),c=s.to.valueOf()-f/2,o=f===0?3e4:f*i,m=c+o/2;return{from:c-o/2,to:m}}},53747:(Z,O,e)=>{"use strict";e.d(O,{v:()=>n});let t="";const n=()=>{const s=new URLSearchParams(window.location.search).get("auth_token");return s!==null&&s!==""?(t=s,s):t}},65135:(Z,O,e)=>{"use strict";e.d(O,{A:()=>i});var t=e(68404),n=e(74020),l=e(53217);const s=Object.keys(n.B).map(f=>({label:f,value:f}));function i({value:f,onChange:c,"aria-label":o,inputId:m,autoFocus:r,...u}){return t.createElement(l.Ph,{inputId:m,value:f,options:s,onChange:d=>c(d.value),placeholder:"Choose role...","aria-label":o,autoFocus:r,...u})}},37592:(Z,O,e)=>{"use strict";e.d(O,{B9:()=>h,CP:()=>w,Dx:()=>a,Fm:()=>R,IS:()=>K,Jk:()=>P,M6:()=>Y,Nq:()=>p,PK:()=>d,R5:()=>S,V0:()=>F,Xx:()=>x,Y3:()=>A,_1:()=>b,bN:()=>C,b_:()=>I,h8:()=>v,j4:()=>B,oO:()=>Q,tQ:()=>E,uV:()=>D,uh:()=>U});var t=e(82897),n=e.n(t),l=e(38849),s=e(66121),i=e(54899),f=e(37932),c=e(47694),o=e(77582),m=e(95156),r=e(81168),u=e(66114);function d(z){return async G=>{try{G((0,u.UA)(!1)),await G(g(z)),await G(y(z)),await G(M(z)),c.ZP.ldapEnabled&&(0,s.v)("ldapsync")&&await G(B()),G((0,u.UA)(!0))}catch(k){if(console.error(k),(0,i.kW)(k)){const j={title:k.data.message,body:k.data.error};G((0,u.sL)(j))}}}}function g(z){return async G=>{const k=await(0,i.i)().get(`/api/users/${z}`,(0,m.y)());G((0,u.pm)(k))}}function p(z){return async G=>{await(0,i.i)().put(`/api/users/${z.id}`,z),G(d(z.id))}}function E(z,G){return async k=>{const j={password:G};await(0,i.i)().put(`/api/admin/users/${z}/password`,j),k(d(z))}}function h(z){return async G=>{await(0,i.i)().post(`/api/admin/users/${z}/disable`),f.E1.push("/admin/users")}}function a(z){return async G=>{await(0,i.i)().post(`/api/admin/users/${z}/enable`),G(d(z))}}function v(z){return async G=>{await(0,i.i)().delete(`/api/admin/users/${z}`),f.E1.push("/admin/users")}}function x(z,G){return async k=>{const j={isGrafanaAdmin:G};await(0,i.i)().put(`/api/admin/users/${z}/permissions`,j),k(d(z))}}function y(z){return async G=>{const k=await(0,i.i)().get(`/api/users/${z}/orgs`);G((0,u.fm)(k))}}function C(z,G,k){return async j=>{const de={loginOrEmail:z.login,role:k};await(0,i.i)().post(`/api/orgs/${G}/users/`,de),j(d(z.id))}}function P(z,G,k){return async j=>{const de={role:k};await(0,i.i)().patch(`/api/orgs/${G}/users/${z}`,de),j(d(z))}}function D(z,G){return async k=>{await(0,i.i)().delete(`/api/orgs/${G}/users/${z}`),k(d(z))}}function M(z){return async G=>{if(!o.Vt.hasPermission(r.AccessControlAction.UsersAuthTokenList))return;const k=await(0,i.i)().get(`/api/admin/users/${z}/auth-tokens`);k.reverse();const j=k.map(de=>({id:de.id,isActive:de.isActive,seenAt:(0,l.E8)(de.seenAt),createdAt:de.createdAt,clientIp:de.clientIp,browser:de.browser,browserVersion:de.browserVersion,os:de.os,osVersion:de.osVersion,device:de.device}));G((0,u.RC)(j))}}function b(z,G){return async k=>{const j={authTokenId:z};await(0,i.i)().post(`/api/admin/users/${G}/revoke-auth-token`,j),k(M(G))}}function R(z){return async G=>{await(0,i.i)().post(`/api/admin/users/${z}/logout`),G(M(z))}}function B(){return async z=>{const G=o.Vt.hasPermission(r.AccessControlAction.LDAPStatusRead);if((0,s.v)("ldapsync")&&G){const k=await(0,i.i)().get("/api/admin/ldap-sync-status");z((0,u.CY)(k))}}}function w(z){return async G=>{await(0,i.i)().post(`/api/admin/ldap/sync/${z}`),G(d(z))}}function A(){return async z=>{if(o.Vt.hasPermission(r.AccessControlAction.LDAPStatusRead))try{const G=await(0,i.i)().get("/api/admin/ldap/status");z((0,u.Ls)(G))}catch(G){if((0,i.kW)(G)){G.isHandled=!0;const k={title:G.data.message,body:G.data.error};z((0,u.y3)(k))}}}}function I(z){return async G=>{try{const k=await(0,i.i)().get(`/api/admin/ldap/${encodeURIComponent(z)}`),{name:j,surname:de,email:ge,login:re,isGrafanaAdmin:ce,isDisabled:ie,roles:fe,teams:Ce}=k,ee={info:{name:j,surname:de,email:ge,login:re},permissions:{isGrafanaAdmin:ce,isDisabled:ie},roles:fe,teams:Ce};G((0,u.sJ)(ee))}catch(k){if((0,i.kW)(k)){k.isHandled=!0;const j={title:k.data.message,body:k.data.error};G((0,u.eq)()),G((0,u.VB)(j))}}}}function F(){return z=>{z((0,u.WO)())}}function K(){return z=>{z((0,u.WO)()),z((0,u.eq)())}}const W=z=>z.map(G=>Array.isArray(G.value)?G.value.map(k=>`${G.name}=${k.value}`).join("&"):`${G.name}=${G.value}`).join("&");function U(){return async(z,G)=>{try{const{perPage:k,page:j,query:de,filters:ge}=G().userListAdmin,re=await(0,i.i)().get(`/api/users/search?perpage=${k}&page=${j}&query=${de}&${W(ge)}`);z((0,u.xh)(re))}catch(k){(0,u.k7)(),console.error(k)}}}const N=(0,t.debounce)(z=>z(U()),500);function S(z){return async G=>{G((0,u.tZ)()),G((0,u.aj)(z)),N(G)}}function Y(z){return async G=>{G((0,u.tZ)()),G((0,u.qz)(z)),N(G)}}function Q(z){return async G=>{G((0,u.tZ)()),G((0,u.PJ)(z)),G(U())}}},66114:(Z,O,e)=>{"use strict";e.d(O,{CY:()=>o,Ls:()=>f,PJ:()=>R,RC:()=>h,UA:()=>a,VB:()=>m,WO:()=>s,ZP:()=>A,aj:()=>b,eq:()=>i,fm:()=>E,k7:()=>M,pm:()=>p,qz:()=>B,sJ:()=>r,sL:()=>v,tZ:()=>D,xh:()=>P,y3:()=>c});var t=e(62992);const n={connectionInfo:[],syncInfo:void 0,user:void 0,connectionError:void 0,userError:void 0},l=(0,t.oM)({name:"ldap",initialState:n,reducers:{ldapConnectionInfoLoadedAction:(I,F)=>({...I,ldapError:void 0,connectionInfo:F.payload}),ldapFailedAction:(I,F)=>({...I,ldapError:F.payload}),ldapSyncStatusLoadedAction:(I,F)=>({...I,syncInfo:F.payload}),userMappingInfoLoadedAction:(I,F)=>({...I,user:F.payload,userError:void 0}),userMappingInfoFailedAction:(I,F)=>({...I,user:void 0,userError:F.payload}),clearUserMappingInfoAction:(I,F)=>({...I,user:void 0}),clearUserErrorAction:(I,F)=>({...I,userError:void 0})}}),{clearUserErrorAction:s,clearUserMappingInfoAction:i,ldapConnectionInfoLoadedAction:f,ldapFailedAction:c,ldapSyncStatusLoadedAction:o,userMappingInfoFailedAction:m,userMappingInfoLoadedAction:r}=l.actions,u=l.reducer,d={user:void 0,sessions:[],orgs:[],isLoading:!0,error:void 0},g=(0,t.oM)({name:"userAdmin",initialState:d,reducers:{userProfileLoadedAction:(I,F)=>({...I,user:F.payload}),userOrgsLoadedAction:(I,F)=>({...I,orgs:F.payload}),userSessionsLoadedAction:(I,F)=>({...I,sessions:F.payload}),userAdminPageLoadedAction:(I,F)=>({...I,isLoading:!F.payload}),userAdminPageFailedAction:(I,F)=>({...I,error:F.payload,isLoading:!1})}}),{userProfileLoadedAction:p,userOrgsLoadedAction:E,userSessionsLoadedAction:h,userAdminPageLoadedAction:a,userAdminPageFailedAction:v}=g.actions,x=g.reducer,y={users:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,filters:[{name:"activeLast30Days",value:!1}],isLoading:!1},C=(0,t.oM)({name:"userListAdmin",initialState:y,reducers:{usersFetched:(I,F)=>{const{totalCount:K,perPage:W,...U}=F.payload,N=Math.ceil(K/W);return{...I,...U,totalPages:N,perPage:W,showPaging:N>1,isLoading:!1}},usersFetchBegin:I=>({...I,isLoading:!0}),usersFetchEnd:I=>({...I,isLoading:!1}),queryChanged:(I,F)=>({...I,query:F.payload,page:0}),pageChanged:(I,F)=>({...I,page:F.payload}),filterChanged:(I,F)=>{const{name:K,value:W}=F.payload;return I.filters.some(U=>U.name===K)?{...I,page:0,filters:I.filters.map(U=>U.name===K?{...U,value:W}:U)}:{...I,page:0,filters:[...I.filters,F.payload]}}}}),{usersFetched:P,usersFetchBegin:D,usersFetchEnd:M,queryChanged:b,pageChanged:R,filterChanged:B}=C.actions,w=C.reducer,A={ldap:u,userAdmin:x,userListAdmin:w}},67162:(Z,O,e)=>{"use strict";e.d(O,{$:()=>c,Z:()=>v});var t=e(82897),n=e.n(t),l=e(57591);const s=new l.zU({type:"query",params:[{name:"queryRefId",type:"string",dynamicLookup:!0},{name:"from",type:"string",options:["10s","1m","5m","10m","15m","1h","2h","6h","12h","24h","48h"]},{name:"to",type:"string",options:["now","now-1m","now-5m","now-10m","now-1h"]}],defaultParams:["#A","15m","now","avg"]}),i=[{text:"Query",value:"query"}],f={alerting:1,firing:1,no_data:2,pending:3,ok:4,paused:5,inactive:5};var c=(x=>(x.IsAbove="gt",x.IsBelow="lt",x.IsOutsideRange="outside_range",x.IsWithinRange="within_range",x.HasNoValue="no_value",x))(c||{});const o=[{value:"gt",text:"IS ABOVE"},{value:"lt",text:"IS BELOW"},{value:"outside_range",text:"IS OUTSIDE RANGE"},{value:"within_range",text:"IS WITHIN RANGE"},{value:"no_value",text:"HAS NO VALUE"}],m=[{text:"OR",value:"or"},{text:"AND",value:"and"}],r=[{text:"avg()",value:"avg"},{text:"min()",value:"min"},{text:"max()",value:"max"},{text:"sum()",value:"sum"},{text:"count()",value:"count"},{text:"last()",value:"last"},{text:"median()",value:"median"},{text:"diff()",value:"diff"},{text:"diff_abs()",value:"diff_abs"},{text:"percent_diff()",value:"percent_diff"},{text:"percent_diff_abs()",value:"percent_diff_abs"},{text:"count_non_null()",value:"count_non_null"}],u=[{text:"Alerting",value:"alerting"},{text:"No Data",value:"no_data"},{text:"Keep Last State",value:"keep_state"},{text:"Ok",value:"ok"}],d=[{text:"Alerting",value:"alerting"},{text:"Keep Last State",value:"keep_state"}];function g(x){const y=new l.zU({type:x.type,defaultParams:[]});return new l.XN(x,y)}function p(x){return x.toLowerCase().replace(/_/g,"").split(" ")[0]}function E(x){switch(p(x)){case"normal":case"ok":return{text:"OK",iconClass:"heart",stateClass:"alert-state-ok"};case"alerting":return{text:"ALERTING",iconClass:"heart-break",stateClass:"alert-state-critical"};case"nodata":return{text:"NO DATA",iconClass:"question-circle",stateClass:"alert-state-warning"};case"paused":return{text:"PAUSED",iconClass:"pause",stateClass:"alert-state-paused"};case"pending":return{text:"PENDING",iconClass:"hourglass",stateClass:"alert-state-warning"};case"firing":return{text:"FIRING",iconClass:"fire",stateClass:""};case"inactive":return{text:"INACTIVE",iconClass:"check",stateClass:""};case"error":return{text:"ERROR",iconClass:"heart-break",stateClass:"alert-state-critical"};case"unknown":default:return{text:"UNKNOWN",iconClass:"question-circle",stateClass:".alert-state-paused"}}}function h(x,y){return(0,t.reduce)(x,(C,P)=>(P.metric!==void 0&&P.value!==void 0&&C.push(P.metric+"="+P.value),P.Metric!==void 0&&P.Value!==void 0&&C.push(P.Metric+"="+P.Value),C),[]).join(y)}function a(x){return(0,t.isArray)(x.data)?h(x.data,", "):(0,t.isArray)(x.data.evalMatches)?h(x.data.evalMatches,", "):x.data.error?"Error: "+x.data.error:""}const v={alertQueryDef:s,getStateDisplayModel:E,conditionTypes:i,evalFunctions:o,evalOperators:m,noDataModes:u,executionErrorModes:d,reducerTypes:r,createReducerPart:g,getAlertAnnotationInfo:a,alertStateSortScore:f}},57591:(Z,O,e)=>{"use strict";e.d(O,{C7:()=>f,D:()=>i,XN:()=>s,zU:()=>l});var t=e(82897),n=e.n(t);class l{constructor(r){this.type=r.type,this.params=r.params,this.defaultParams=r.defaultParams,this.renderer=r.renderer,this.category=r.category,this.addStrategy=r.addStrategy}}class s{constructor(r,u){if(this.part=r,this.def=u,!this.def)throw{message:"Could not find query part "+r.type};r.params=r.params||(0,t.clone)(this.def.defaultParams),this.params=r.params,this.text="",this.updateText()}render(r){return this.def.renderer(this,r)}hasMultipleParamsInString(r,u){return r.indexOf(",")===-1?!1:this.def.params[u+1]&&this.def.params[u+1].optional}updateParam(r,u){if(this.hasMultipleParamsInString(r,u)){(0,t.each)(r.split(","),(d,g)=>{this.updateParam(d.trim(),g)});return}r===""&&this.def.params[u].optional?this.params.splice(u,1):this.params[u]=r,this.part.params=this.params,this.updateText()}updateText(){if(this.params.length===0){this.text=this.def.type+"()";return}let r=this.def.type+"(";r+=this.params.join(", "),r+=")",this.text=r}}function i(m,r){const u=m.def.type+"(",d=(0,t.map)(m.params,(g,p)=>{const E=m.def.params[p];return E.type==="time"&&g==="auto"&&(g="$__interval"),E.quote==="single"?"'"+g+"'":E.quote==="double"?'"'+g+'"':g});return r&&d.unshift(r),u+d.join(", ")+")"}function f(m,r){return r+" "+m.params[0]}function c(m,r){return m.params[0]}function o(m,r){return'"'+m.params[0]+'"'}},11626:(Z,O,e)=>{"use strict";e.d(O,{ZP:()=>P,Gr:()=>r,gz:()=>p,Oc:()=>E,K:()=>v,J0:()=>x,T2:()=>a,ql:()=>h});var t=e(62992),n=e(46519),l=e(83829),s=e(46818),i=e(72004);const c=(0,l.combineReducers)({dataSources:(0,s.jK)("dataSources",i.nw,({rulesSourceName:b})=>b).reducer,promRules:(0,s.jK)("promRules",i.y6,({rulesSourceName:b})=>b).reducer,rulerRules:(0,s.jK)("rulerRules",i.UR,({rulesSourceName:b})=>b).reducer,amConfigs:(0,s.jK)("amConfigs",i.Yh,b=>b).reducer,silences:(0,s.jK)("silences",i.je,b=>b).reducer,ruleForm:(0,l.combineReducers)({saveRule:(0,s.i6)("saveRule",i.wy).reducer,existingRule:(0,s.i6)("existingRule",i.on).reducer}),grafanaNotifiers:(0,s.i6)("grafanaNotifiers",i.Vj).reducer,saveAMConfig:(0,s.i6)("saveAMConfig",i.mM).reducer,deleteAMConfig:(0,s.i6)("deleteAMConfig",i.Nc).reducer,updateSilence:(0,s.i6)("updateSilence",i.QY).reducer,amAlerts:(0,s.jK)("amAlerts",i.dB,b=>b).reducer,folders:(0,s.jK)("folders",i.vL,b=>b).reducer,amAlertGroups:(0,s.jK)("amAlertGroups",i.mS,b=>b).reducer,testReceivers:(0,s.i6)("testReceivers",i.D8).reducer,updateLotexNamespaceAndGroup:(0,s.i6)("updateLotexNamespaceAndGroup",i.hv).reducer,externalAlertmanagers:(0,l.combineReducers)({alertmanagerConfig:(0,s.i6)("alertmanagerConfig",i.wE).reducer,discoveredAlertmanagers:(0,s.i6)("discoveredAlertmanagers",i.zy).reducer}),managedAlertStateHistory:(0,s.i6)("managedAlertStateHistory",i.Ms).reducer});var o=e(67162);const m={items:[],searchQuery:"",isLoading:!1},r={notificationChannelTypes:[],notificationChannel:{},notifiers:[]};function u(b,R){const B=o.Z.getStateDisplayModel(R),w={...b,stateText:B.text,stateIcon:B.iconClass,stateClass:B.stateClass,stateAge:(0,n.CQ)(b.newStateDate).fromNow(!0)};return w.state!=="paused"&&(w.executionError&&(w.info="Execution Error: "+w.executionError),w.evalData&&w.evalData.noData&&(w.info="Query returned no data")),w}const d=(0,t.oM)({name:"alertRules",initialState:m,reducers:{loadAlertRules:b=>({...b,isLoading:!0}),loadedAlertRules:(b,R)=>{const w=R.payload.map(A=>u(A,A.state));return{...b,items:w,isLoading:!1}},setSearchQuery:(b,R)=>({...b,searchQuery:R.payload})}}),g=(0,t.oM)({name:"notificationChannel",initialState:r,reducers:{setNotificationChannels:(b,R)=>({...b,notificationChannelTypes:M(R.payload),notifiers:R.payload}),notificationChannelLoaded:(b,R)=>{const B=R.payload,A=b.notifiers.find(I=>I.type===B.type).options.filter(I=>I.secure);return A.length>0&&A.some(I=>B.settings[I.propertyName]!=="")?D(b,R.payload,A):{...b,notificationChannel:B}},resetSecureField:(b,R)=>({...b,notificationChannel:{...b.notificationChannel,secureFields:{...b.notificationChannel.secureFields,[R.payload]:!1}}})}}),{loadAlertRules:p,loadedAlertRules:E,setSearchQuery:h}=d.actions,{setNotificationChannels:a,notificationChannelLoaded:v,resetSecureField:x}=g.actions,y=d.reducer,C=g.reducer,P={alertRules:y,notificationChannel:C,unifiedAlerting:c};function D(b,R,B){const w={},A={};return B.forEach(I=>{A[I.propertyName]=R.settings[I.propertyName],w[I.propertyName]=""}),{...b,notificationChannel:{...R,settings:{...R.settings,...w},secureSettings:{...A}}}}function M(b){return b.map(R=>({value:R.type,label:R.name,...R,typeName:R.type})).sort((R,B)=>R.name>B.name?1:-1)}},41904:(Z,O,e)=>{"use strict";e.d(O,{Hc:()=>g,I5:()=>d,PN:()=>m,Z0:()=>p,pM:()=>r,z7:()=>o});var t=e(46519),n=e(53843),l=e(56986),s=e(54899),i=e(35645),f=e(41818);const c=15,o={filterByLabel:"filtering alert instances by label",loadedList:"loaded Alert Rules list",leavingRuleGroupEdit:"leaving rule group edit without saving",alertRuleFromPanel:"creating alert rule from panel",alertRuleFromScratch:"creating alert rule from scratch",clickingAlertStateFilters:"clicking alert state filters",cancelSavingAlertRule:"user canceled alert rule creation",successSavingAlertRule:"alert rule saved successfully",unknownMessageFromError:"unknown messageFromError"};function m(E,h={}){i.v.grafanaJavascriptAgent.enabled&&n.s.api.pushLog([E],{level:l.in.INFO,context:{...h,module:"Alerting"}})}function r(E,h,a){return async function(...v){const x=performance.now(),y=await E(...v);return m(h,{loadTimeMs:(performance.now()-x).toFixed(0),...a}),y}}async function u(){try{const{createdAt:E}=await(0,s.i)().get("/api/user"),h=(0,t.CQ)().subtract(c,"days"),a=(0,t.CQ)(E);return h.isBefore(a)}catch{return!0}}const d=async E=>{await u()||(0,f.ff)("grafana_alerting_rule_creation",E)},g=async E=>{await u()||(0,f.ff)("grafana_alerting_rule_aborted",E)},p=async E=>{await u()||(0,f.ff)("grafana_alerting_rule_form_error",E)}},29427:(Z,O,e)=>{"use strict";e.d(O,{C:()=>f});var t=e(38853),n=e(65583),l=e(54899),s=e(41904);const i=()=>async c=>{try{const o=performance.now(),{data:m,...r}=await(0,n.n)((0,l.i)().fetch(c));return(0,s.PN)("Request finished",{loadTimeMs:(performance.now()-o).toFixed(0),url:c.url,method:c.method??"",responseStatus:r.statusText}),{data:m,meta:r}}catch(o){return{error:o}}},f=(0,t.LC)({reducerPath:"alertingApi",baseQuery:i(),tagTypes:["AlertmanagerChoice"],endpoints:()=>({})})},44737:(Z,O,e)=>{"use strict";e.d(O,{C$:()=>o,SJ:()=>u,WG:()=>m,Zy:()=>r});var t=e(65583),n=e(54899),l=e(46063),s=e(37190),i=e(45849),f=e(95454),c=e(49011);async function o(a){if(a===i.GC)return{features:{rulerApiEnabled:!0}};const v=(0,i.c$)(a);if(!v)throw new Error(`Cannot find data source configuration for ${a}`);const{url:x,name:y,type:C}=v;if(!x)throw new Error("The data source url cannot be empty.");if(C!=="prometheus"&&C!=="loki")throw new Error(`The build info request is not available for ${C}. Only 'prometheus' and 'loki' are supported`);return m({name:y,url:x,type:C})}async function m(a){const{url:v,name:x,type:y}=a,C=y==="loki"?void 0:await g(v);if(!(C!==void 0)){if(!await p(x))throw new Error(`Unable to fetch alert rules. Is the ${x} data source properly configured?`);const b=await E(x);return{application:l.T8.Cortex,features:{rulerApiEnabled:b}}}const{features:D}=C.data;return D?{application:l.T8.Mimir,features:{rulerApiEnabled:D?.ruler_config_api==="true"}}:{application:l.T8.Prometheus,features:{rulerApiEnabled:!1}}}async function r(a){if(a===i.GC)return{lazyConfigInit:!1};const v=d(a),{url:x,type:y}=v;if(!x)throw new Error("The data source url cannot be empty.");if(y!=="alertmanager")throw new Error(`Alertmanager feature discovery is not available for ${y}. Only 'alertmanager' type is supported`);return await u(x)}async function u(a){try{return{lazyConfigInit:(await g(a))?.data?.application==="Grafana Mimir"}}catch{return{lazyConfigInit:!1}}}function d(a){const v=(0,i.c$)(a);if(!v)throw new Error(`Cannot find data source configuration for ${a}`);return v}async function g(a){return(await(0,t.n)((0,n.i)().fetch({url:`${a}/api/v1/status/buildinfo`,showErrorAlert:!1,showSuccessAlert:!1})).catch(x=>{if(!("status"in x&&x.status===404))throw x}))?.data}async function p(a){try{return await(0,f.j)(a),!0}catch{return!1}}async function E(a){try{return await(0,c.jw)(a),!0}catch(v){if(h(v))return!1;throw v}}function h(a){return(0,n.kW)(a)?a.data.message?.includes("GetRuleGroup unsupported in rule local store")||a.data.message?.includes("page not found")||a.data.message?.includes(s.jZ):a instanceof Error&&a.message?.includes("404 from rules config endpoint")}},79572:(Z,O,e)=>{"use strict";e.d(O,{T:()=>l});var t=e(29427),n=e(44737);const l=t.C.injectEndpoints({endpoints:s=>({discoverAmFeatures:s.query({queryFn:async({amSourceName:i})=>{try{return{data:await(0,n.Zy)(i)}}catch(f){return{error:f}}}})})})},644:(Z,O,e)=>{"use strict";e.d(O,{QE:()=>o,i9:()=>s});var t=e(65583),n=e(54899),l=e(45849);function s(){return(0,n.i)().get("/api/alert-notifiers")}const i=m=>{const r=m.match(/^(\w+)(\[\d+\])?$/);return r?{type:r[1],index:r[2]}:{type:m,index:void 0}},f=m=>{const r={receivers:{},errorCount:0};m.forEach(d=>{r.receivers[d.name]={active:d.active,notifiers:{},errorCount:0};const g=r.receivers[d.name];d.integrations.forEach(p=>{Boolean(p?.lastNotifyAttemptError)&&(g.errorCount+=1);const h=c(p.name);h&&(g.notifiers[h]||(g.notifiers[h]=[]),g.notifiers[h].push(p))})});const u=Object.values(r.receivers).reduce((d,g)=>d+g.errorCount,0);return{...r,errorCount:u}},c=m=>i(m)?.type;async function o(m){try{const r=await(0,t.n)((0,n.i)().fetch({url:`/api/alertmanager/${(0,l.gt)(m)}/config/api/v1/receivers`,showErrorAlert:!1,showSuccessAlert:!1}));return f(r.data)}catch{return f([])}}},95454:(Z,O,e)=>{"use strict";e.d(O,{hd:()=>i,j:()=>f});var t=e(65583),n=e(54899),l=e(45849);function s(c){const{dataSourceName:o}=c;return{rules:m=>{const r=new URLSearchParams,u=i(r,m);return{url:`/api/prometheus/${(0,l.gt)(o)}/api/v1/rules`,params:u}}}}function i(c,o){return o?.dashboardUID&&(c.set("dashboard_uid",o.dashboardUID),o?.panelId&&c.set("panel_id",String(o.panelId))),Object.fromEntries(c)}async function f(c,o){if(o?.dashboardUID&&c!==l.GC)throw new Error("Filtering by dashboard UID is only supported for Grafana Managed rules.");const{url:m,params:r}=s({dataSourceName:c}).rules(o),u=await(0,t.n)((0,n.i)().fetch({url:m,params:r,showErrorAlert:!1,showSuccessAlert:!1})).catch(g=>{throw"status"in g&&g.status===404?new Error("404 from rule state endpoint. Perhaps ruler API is not enabled?"):g}),d={};return u.data.data.groups.forEach(g=>{g.rules.forEach(p=>{p.query=p.query||""}),d[g.file]?d[g.file].groups.push(g):d[g.file]={dataSourceName:c,name:g.file,groups:[g]}}),Object.values(d)}},49011:(Z,O,e)=>{"use strict";e.d(O,{BC:()=>d,P4:()=>c,jJ:()=>u,jw:()=>r,m6:()=>o,sz:()=>a});var t=e(65583),n=e(54899),l=e(37190),s=e(45849),i=e(95454);function f(v){const y=`${`/api/ruler/${(0,s.gt)(v.dataSourceName)}`}/api/v1/rules`,C=new URLSearchParams;return C.set("subtype",v.apiVersion==="legacy"?"cortex":"mimir"),{rules:P=>{const D=(0,i.hd)(C,P);return{path:`${y}`,params:D}},namespace:P=>({path:`${y}/${encodeURIComponent(P)}`,params:Object.fromEntries(C)}),namespaceGroup:(P,D)=>({path:`${y}/${encodeURIComponent(P)}/${encodeURIComponent(D)}`,params:Object.fromEntries(C)})}}async function c(v,x,y){const{path:C,params:P}=f(v).namespace(x);await(0,t.n)((0,n.i)().fetch({method:"POST",url:C,data:y,showErrorAlert:!1,showSuccessAlert:!1,params:P}))}async function o(v,x){if(x?.dashboardUID&&v.dataSourceName!==s.GC)throw new Error("Filtering by dashboard UID is only supported by Grafana.");const{path:y,params:C}=f(v).rules(x);return g(y,{},C)}async function m(v,x){const{path:y,params:C}=f(v).namespace(x);return(await g(y,{},C))[x]||[]}async function r(v){return g(`/api/ruler/${(0,s.gt)(v)}/api/v1/rules/test/test`,null)}async function u(v,x,y){const{path:C,params:P}=f(v).namespaceGroup(x,y);return g(C,null,P)}async function d(v,x,y){const{path:C,params:P}=f(v).namespaceGroup(x,y);await(0,t.n)((0,n.i)().fetch({url:C,method:"DELETE",showSuccessAlert:!1,showErrorAlert:!1,params:P}))}async function g(v,x,y){try{return(await(0,t.n)((0,n.i)().fetch({url:v,showErrorAlert:!1,showSuccessAlert:!1,params:y}))).data}catch(C){if(!p(C))throw C;if(h(C))return x;throw E(C)?{...C,data:{...C.data,message:l.jZ}}:C}}function p(v){const x=v.data!=null;return Number.isFinite(v.status)&&x}function E(v){return v.status===404||v.status===500&&v.data.message?.includes("unexpected content type from upstream. expected YAML, got text/html")}function h(v){return v.status===404&&(v.data.message?.includes("group does not exist")||v.data.message?.includes("no rule groups found"))}async function a(v,x){const{path:y,params:C}=f(v).namespace(x);await(0,t.n)((0,n.i)().fetch({method:"DELETE",url:y,showErrorAlert:!1,showSuccessAlert:!1,params:C}))}},24782:(Z,O,e)=>{"use strict";e.d(O,{i:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(8180);const i=({labelKey:c,value:o,operator:m="=",onRemoveLabel:r})=>{const u=(0,l.wW)(f);return n.createElement("div",{className:u.wrapper},c,m,o,!!r&&n.createElement(s.h,{name:"times",size:"xs",onClick:r}))},f=c=>({wrapper:t.css`
    padding: ${c.spacing(.5,1)};
    border-radius: ${c.shape.borderRadius(1)};
    border: solid 1px ${c.colors.border.medium};
    font-size: ${c.typography.bodySmall.fontSize};
    background-color: ${c.colors.background.secondary};
    font-weight: ${c.typography.fontWeightBold};
    color: ${c.colors.text.primary};
    display: inline-block;
    line-height: 1.2;
  `})},52694:(Z,O,e)=>{"use strict";e.d(O,{s:()=>l});var t=e(68404),n=e(34807);const l=({labels:s,className:i})=>{const f=Object.entries(s).filter(([c])=>!(c.startsWith("__")&&c.endsWith("__")));return t.createElement("div",{className:i},t.createElement(n.P,{tags:Object.values(f).map(([c,o])=>`${c}=${o}`),className:i}))}},94984:(Z,O,e)=>{"use strict";e.d(O,{P:()=>o});var t=e(9892),n=e(68404),l=e(72648),s=e(24799),i=e(53217),f=e(45849);function c(r){return r.name===f.GC?"Grafana":r.name.slice(0,37)}const o=({onChange:r,current:u,dataSources:d,disabled:g=!1})=>{const p=(0,l.wW)(m),E=(0,n.useMemo)(()=>d.map(h=>({label:c(h),value:h.name,imgUrl:h.imgUrl,meta:h.meta})),[d]);return n.createElement(s.g,{className:p.field,label:g?"Alertmanager":"Choose Alertmanager",disabled:g||E.length===1,"data-testid":"alertmanager-picker"},n.createElement(i.Ph,{"aria-label":g?"Alertmanager":"Choose Alertmanager",width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:h=>h.value&&r(h.value),options:E,maxMenuHeight:500,noOptionsMessage:"No datasources found",value:u,getOptionLabel:h=>h.label}))},m=r=>({field:t.css`
    margin-bottom: ${r.spacing(4)};
  `})},78543:(Z,O,e)=>{"use strict";e.d(O,{a:()=>u});var t=e(9892),n=e(68404),l=e(8928),s=e(6554),i=e(72648),f=e(37190),c=e(80498),o=e(46587),m=e(94884);const r=["message","description"],u=({annotationKey:p,value:E,valueLink:h})=>{const a=f.vY[p]?n.createElement(s.u,{content:p,placement:"top",theme:"info"},n.createElement("span",null,f.vY[p])):p;return n.createElement(c.C,{label:a,horizontal:!0},n.createElement(d,{annotationKey:p,value:E,valueLink:h}))},d=({annotationKey:p,value:E,valueLink:h})=>{const a=(0,i.wW)(g),v=r.includes(p),x=E&&E.startsWith("http"),y=n.createElement(o.Z,{input:E,delimiter:["{{","}}"]});return h?n.createElement("a",{href:l.QX.sanitizeUrl(h),className:a.link},E):v?n.createElement(m.t,{className:a.well},y):x?n.createElement("a",{href:l.QX.sanitizeUrl(E),target:"__blank",className:a.link},E):n.createElement(n.Fragment,null,y)},g=p=>({well:t.css`
    word-break: break-word;
  `,link:t.css`
    word-break: break-all;
    color: ${p.colors.primary.text};
  `})},33950:(Z,O,e)=>{"use strict";e.d(O,{U:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(31403);const i=({isCollapsed:c,onToggle:o,idControlled:m,className:r,text:u,size:d="xl",...g})=>{const p=(0,l.wW)(f);return n.createElement(s.zx,{type:"button",fill:"text",variant:"secondary","aria-expanded":!c,"aria-controls":m,className:(0,t.cx)(p.expandButton,r),icon:c?"angle-right":"angle-down",onClick:()=>o(!c),...g},u)},f=c=>({expandButton:t.css`
    margin-right: ${c.spacing(1)};
  `})},80498:(Z,O,e)=>{"use strict";e.d(O,{C:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({className:f,label:c,horizontal:o,children:m,childrenWrapperClassName:r})=>{const u=(0,l.wW)(i);return n.createElement("div",{className:(0,t.cx)(u.field,o?u.fieldHorizontal:u.fieldVertical,f)},n.createElement("div",null,c),n.createElement("div",{className:r},m))},i=f=>({fieldHorizontal:t.css`
    flex-direction: row;
    ${f.breakpoints.down("md")} {
      flex-direction: column;
    }
  `,fieldVertical:t.css`
    flex-direction: column;
  `,field:t.css`
    display: flex;
    margin: ${f.spacing(2)} 0;

    & > div:first-child {
      width: 110px;
      padding-right: ${f.spacing(1)};
      font-size: ${f.typography.size.sm};
      font-weight: ${f.typography.fontWeightBold};
      line-height: 1.8;
    }
    & > div:nth-child(2) {
      flex: 1;
      color: ${f.colors.text.secondary};
    }
  `})},53731:(Z,O,e)=>{"use strict";e.d(O,{t:()=>o});var t=e(9892),n=e(68404),l=e(72648),s=e(8180),i=e(78889),f=e(25724),c=e(1562);const o=({cols:r,items:u,isExpandable:d=!1,onCollapse:g,onExpand:p,isExpanded:E,renderExpandedContent:h,testIdGenerator:a,pagination:v,paginationStyles:x,renderPrefixCell:y,renderPrefixHeader:C,footerRow:P})=>{const D=(0,l.wW)(c.Z);if((g||p||E)&&!(g&&p&&E))throw new Error("either all of onCollapse, onExpand, isExpanded must be provided, or none");if((d||h)&&!(d&&h))throw new Error("either both isExpanded and renderExpandedContent must be provided, or neither");const M=(0,l.wW)(m(r,d,!!C)),[b,R]=(0,n.useState)([]),B=W=>{E&&g&&p?E(W)?g(W):p(W):R(b.includes(W.id)?b.filter(U=>U!==W.id):[...b,W.id])},w=v?.itemsPerPage??u.length,{page:A,numberOfPages:I,onPageChange:F,pageItems:K}=(0,f.h)(u,1,w);return n.createElement(n.Fragment,null,n.createElement("div",{className:M.container,"data-testid":"dynamic-table"},n.createElement("div",{className:M.row,"data-testid":"header"},C&&C(),d&&n.createElement("div",{className:M.cell}),r.map(W=>n.createElement("div",{className:M.cell,key:W.id},W.label))),K.map((W,U)=>{const N=E?E(W):b.includes(W.id);return n.createElement("div",{className:M.row,key:`${W.id}-${U}`,"data-testid":a?.(W,U)??"row"},y&&y(W,U,u),d&&n.createElement("div",{className:(0,t.cx)(M.cell,M.expandCell)},n.createElement(s.h,{"aria-label":`${N?"Collapse":"Expand"} row`,size:"xl","data-testid":"collapse-toggle",className:M.expandButton,name:N?"angle-down":"angle-right",onClick:()=>B(W),type:"button"})),r.map(S=>n.createElement("div",{className:(0,t.cx)(M.cell,M.bodyCell),"data-column":S.label,key:`${W.id}-${S.id}`},S.renderCell(W,U))),N&&h&&n.createElement("div",{className:M.expandedContentRow,"data-testid":"expanded-content"},h(W,U,u)))}),P&&n.createElement("div",{className:(0,t.cx)(M.row,M.footerRow)},P)),v&&n.createElement(i.t,{className:(0,t.cx)(D,x),currentPage:A,numberOfPages:I,onNavigate:F,hideWhenSinglePage:!0}))},m=(r,u,d)=>{const g=r.map(p=>p.size?typeof p.size=="number"?`${p.size}fr`:p.size:"auto");return u&&g.unshift("calc(1em + 16px)"),d&&g.unshift("0"),p=>({container:t.css`
      border: 1px solid ${p.colors.border.strong};
      border-radius: ${p.shape.borderRadius()};
      color: ${p.colors.text.secondary};
    `,row:t.css`
      display: grid;
      grid-template-columns: ${g.join(" ")};
      grid-template-rows: 1fr auto;

      &:nth-child(2n + 1) {
        background-color: ${p.colors.background.secondary};
      }

      &:nth-child(2n) {
        background-color: ${p.colors.background.primary};
      }

      ${p.breakpoints.down("sm")} {
        grid-template-columns: auto 1fr;
        grid-template-areas: 'left right';
        padding: 0 ${p.spacing(.5)};

        &:first-child {
          display: none;
        }

        ${d?`
            & > *:first-child {
              display: none;
            }
          `:""}
      }
    `,footerRow:t.css`
      display: flex;
      padding: ${p.spacing(1)};
    `,cell:t.css`
      align-items: center;
      padding: ${p.spacing(1)};

      ${p.breakpoints.down("sm")} {
        padding: ${p.spacing(1)} 0;
        grid-template-columns: 1fr;
      }
    `,bodyCell:t.css`
      overflow: hidden;

      ${p.breakpoints.down("sm")} {
        grid-column-end: right;
        grid-column-start: right;

        &::before {
          content: attr(data-column);
          display: block;
          color: ${p.colors.text.primary};
        }
      }
    `,expandCell:t.css`
      justify-content: center;

      ${p.breakpoints.down("sm")} {
        align-items: start;
        grid-area: left;
      }
    `,expandedContentRow:t.css`
      grid-column-end: ${g.length+1};
      grid-column-start: ${d?3:2};
      grid-row: 2;
      padding: 0 ${p.spacing(3)} 0 ${p.spacing(1)};
      position: relative;

      ${p.breakpoints.down("sm")} {
        grid-column-start: 2;
        border-top: 1px solid ${p.colors.border.strong};
        grid-row: auto;
        padding: ${p.spacing(1)} 0 0 0;
      }
    `,expandButton:t.css`
      margin-right: 0;
      display: block;
    `})}},42042:(Z,O,e)=>{"use strict";e.d(O,{z:()=>m});var t=e(9892),n=e(9085),l=e.n(n),s=e(68404),i=e(26418),f=e(72648),c=e(39604),o=e(56921);const m=({children:u,header:d,content:g,footer:p,arrow:E,showAfter:h=300,wrapperClassName:a,disabled:v=!1,...x})=>{const y=(0,s.useRef)(null),C=(0,f.wW)(r);if(v)return u;const P=s.createElement(i.Stack,{direction:"column",gap:0},d&&s.createElement("div",{className:C.card.header},d),s.createElement("div",{className:C.card.body},g),p&&s.createElement("div",{className:C.card.footer},p));return s.createElement(c.D,{content:P,hideAfter:100},(D,M,b)=>s.createElement(s.Fragment,null,y.current&&s.createElement(o.J,{...b,...x,wrapperClassName:l()(C.popover(E?1.25:0),a),onMouseLeave:M,onMouseEnter:D,referenceElement:y.current,renderArrow:E?({arrowProps:R,placement:B})=>s.createElement("div",{className:C.arrow(B),...R}):()=>s.createElement(s.Fragment,null)}),s.cloneElement(u,{ref:y,onMouseEnter:D,onMouseLeave:M})))},r=u=>({popover:d=>t.css`
    border-radius: ${u.shape.borderRadius()};
    box-shadow: ${u.shadows.z3};
    background: ${u.colors.background.primary};
    border: 1px solid ${u.colors.border.medium};

    margin-bottom: ${u.spacing(d)};
  `,card:{body:t.css`
      padding: ${u.spacing(1)};
    `,header:t.css`
      padding: ${u.spacing(1)};
      background: ${u.colors.background.secondary};
      border-bottom: solid 1px ${u.colors.border.medium};
    `,footer:t.css`
      padding: ${u.spacing(.5)} ${u.spacing(1)};
      background: ${u.colors.background.secondary};
      border-top: solid 1px ${u.colors.border.medium};
    `},arrow:d=>{const g="9px";return t.css`
      width: 0;
      height: 0;

      border-left: ${g} solid transparent;
      border-right: ${g} solid transparent;
      /* using hex colors here because the border colors use alpha transparency */
      border-top: ${g} solid ${u.isLight?"#d2d3d4":"#2d3037"};

      &:after {
        content: '';
        position: absolute;

        border: ${g} solid ${u.colors.background.primary};
        border-bottom: 0;
        border-left-color: transparent;
        border-right-color: transparent;

        margin-top: 1px;
        bottom: 1px;
        left: -${g};
      }
    `}})},63613:(Z,O,e)=>{"use strict";e.d(O,{s:()=>s});var t=e(68404),n=e(6554),l=e(39904);function s({text:i}){return t.createElement(n.u,{placement:"top",content:t.createElement("div",null,i)},t.createElement(l.J,{name:"info-circle",size:"xs"}))}},74542:(Z,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(68404),n=e(35645),l=e(2594),s=e(37190);function i(o){const{value:m,onChange:r,size:u="md"}=o,d=(0,t.useMemo)(()=>f(),[]);return t.createElement(l.S,{options:d,value:m,onChange:r,size:u})}function f(){return Object.values(n.v.panels).reduce((o,m)=>(c(m.id)&&o.push({value:m.id,label:m.name,imgUrl:m.info.logos.small}),o),[])}function c(o){switch(o){case s.GC:case s.Fe:case s.Kd:return!0;default:return!1}}},63029:(Z,O,e)=>{"use strict";e.d(O,{L:()=>l});var t=e(9892),n=e(68404);const l=()=>n.createElement("span",{className:t.css`
      flex: 1;
    `})},79453:(Z,O,e)=>{"use strict";e.d(O,{i:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({children:f,state:c,size:o="md"})=>{const m=(0,l.wW)(i);return n.createElement("span",{className:(0,t.cx)(m.common,m[c],m[o])},f||c)},i=f=>({common:t.css`
    display: inline-block;
    color: white;
    border-radius: ${f.shape.borderRadius()};
    font-size: ${f.typography.size.sm};
    text-transform: capitalize;
    line-height: 1.2;
    text-align: center;
    font-weight: ${f.typography.fontWeightBold};
  `,good:t.css`
    background-color: ${f.colors.success.main};
    border: solid 1px ${f.colors.success.main};
    color: ${f.colors.success.contrastText};
  `,warning:t.css`
    background-color: ${f.colors.warning.main};
    border: solid 1px ${f.colors.warning.main};
    color: ${f.colors.warning.contrastText};
  `,bad:t.css`
    background-color: ${f.colors.error.main};
    border: solid 1px ${f.colors.error.main};
    color: ${f.colors.error.contrastText};
  `,neutral:t.css`
    background-color: ${f.colors.secondary.main};
    border: solid 1px ${f.colors.secondary.main};
    color: ${f.colors.secondary.contrastText};
  `,info:t.css`
    background-color: ${f.colors.primary.main};
    border: solid 1px ${f.colors.primary.main};
    color: ${f.colors.primary.contrastText};
  `,md:t.css`
    padding: ${f.spacing(.5,1)};
    min-width: ${f.spacing(8)};
  `,sm:t.css`
    padding: ${f.spacing(.3,.5)};
    min-width: 52px;
  `})},46587:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(9892),n=e(68404),l=e(72648),s=e(19985),i=e(42042),f=e(86922);const c=["$",".",'"'];function o({input:h,delimiter:a=["{{","}}"]}){const v=(0,l.wW)(E),[x,y]=a,C=new RegExp(`(?<before>.*?)(${x}(?<token>.*?)${y}|$)`,"gm"),P=h.split(`
`),D=[];return P.forEach((M,b)=>{Array.from(M.matchAll(C)).forEach((B,w)=>{const A=B.groups?.before,I=B.groups?.token?.trim();if(A&&D.push(n.createElement("span",{key:`${b}-${w}-before`},A)),I){const F=p(I),K=F===m.Variable?I:"",W=`${x} ${I} ${y}`;D.push(n.createElement(r,{key:`${b}-${w}-token`,content:W,type:F,description:K}))}}),D.push(n.createElement("br",{key:`${b}-newline`}))}),n.createElement("span",{className:v.wrapper},D)}var m=(h=>(h.Variable="variable",h.Function="function",h.Keyword="keyword",h.Unknown="unknown",h))(m||{});function r({content:h,description:a,type:v}){const x=(0,l.wW)(E),y=Boolean(v)===!1;return n.createElement(i.z,{placement:"top-start",disabled:y,content:n.createElement("div",{className:x.hoverTokenItem},n.createElement(s.C,{text:n.createElement(n.Fragment,null,v),color:"blue"})," ",a&&n.createElement("code",null,a))},n.createElement("span",null,n.createElement(s.C,{className:x.token,text:h,color:"blue"})))}function u(h){return c.some(a=>h.startsWith(a))}function d(h){return f.keywords.some(a=>h.startsWith(a))}function g(h){return f.builtinFunctions.some(a=>h.startsWith(a))}function p(h){let a;return u(h)?a="variable":d(h)?a="keyword":g(h)?a="function":a="unknown",a}const E=h=>({wrapper:t.css`
    white-space: pre-wrap;
  `,token:t.css`
    cursor: default;
    font-family: ${h.typography.fontFamilyMonospace};
  `,popover:t.css`
    border-radius: ${h.shape.borderRadius()};
    box-shadow: ${h.shadows.z3};
    background: ${h.colors.background.primary};
    border: 1px solid ${h.colors.border.medium};

    padding: ${h.spacing(1)};
  `,hoverTokenItem:t.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${h.spacing(1)};
  `})},94884:(Z,O,e)=>{"use strict";e.d(O,{t:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({children:f,className:c})=>{const o=(0,l.wW)(i);return n.createElement("div",{className:(0,t.cx)(o.wrapper,c)},f)},i=f=>({wrapper:t.css`
    background-color: ${f.components.panel.background};
    border: solid 1px ${f.components.input.borderColor};
    border-radius: ${f.shape.borderRadius(1)};
    padding: ${f.spacing(.5,1)};
    font-family: ${f.typography.fontFamilyMonospace};
  `})},96308:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>f});var t=e(64681),n=e.n(t),l=e(68404),s=e(72648),i=e(53715);const f=({group:c})=>{const o=(0,s.wW)(i.r),m=c.alerts.length,r=c.alerts.reduce((u,d)=>(u[d.status.state]?u[d.status.state]+=1:u[d.status.state]=1,u),{});return l.createElement("div",null,`${m} ${n()("alert",m)}: `,Object.entries(r).map(([u,d],g)=>l.createElement("span",{key:`${JSON.stringify(c.labels)}-notifications-${g}`,className:o[u]},g>0&&", ",`${d} ${u}`)))}},50362:(Z,O,e)=>{"use strict";e.d(O,{_:()=>f});var t=e(9892),n=e(68404),l=e(72648),s=e(19985),i=e(31403);const f=({enabled:o=!1,error:m,warning:r,onSetCondition:u})=>{const d=(0,l.wW)(c);return o&&m?n.createElement(s.C,{color:"red",icon:"exclamation-circle",text:"Alert condition",tooltip:m.message}):o&&r?n.createElement(s.C,{color:"orange",icon:"exclamation-triangle",text:"Alert condition",tooltip:r.message}):o&&!m&&!r?n.createElement(s.C,{color:"green",icon:"check",text:"Alert condition"}):o?null:n.createElement("button",{type:"button",className:d.actionLink,onClick:()=>u&&u()},"Make this the alert condition")},c=o=>{const m=(0,i.gN)(o);return{actionLink:t.css`
      ${m};
      color: ${o.colors.text.link};
      cursor: pointer;

      &:hover {
        text-decoration: underline;
      }
    `}}},97201:(Z,O,e)=>{"use strict";e.d(O,{A2:()=>F,bw:()=>W});var t=e(9892),n=e(82897),l=e(68404),s=e(49922),i=e(34472),f=e(38849),c=e(26418),o=e(72648),m=e(31403),r=e(68668),u=e(39904),d=e(53217),g=e(8180),p=e(5076),E=e(71263),h=e(75897),a=e(436),v=e(17349),x=e(97573),y=e(46063),C=e(25724),P=e(42042),D=e(63029),M=e(45608),b=e(50362),R=e(43211);const B=z=>{const G=z.fields[0];return G?.config?.displayNameFromDS??z.name??A(G?.labels??{})},w=z=>{const G=z.fields[0]?.values.get(0);return Number.isFinite(G)?(0,R.O)(G,5):G},A=z=>Object.entries(z).map(([G,k])=>G+"="+k).join(", "),I=z=>z.every(k=>k.fields.every(j=>j.values.toArray().every(de=>de==null))),F=({queries:z=[],query:G,data:k,error:j,warning:de,isAlertCondition:ge,onSetCondition:re,onUpdateRefId:ce,onRemoveExpression:ie,onUpdateExpressionType:fe,onChangeQuery:Ce})=>{const ee=(0,o.wW)(Q),ne=G?.type,X=k&&Object.values(k).some(rt=>Boolean(rt)&&rt.state===s.Gu.Loading),te=Array.isArray(k?.series)&&!X,ae=k?.series??[],_=ge??!1,ve=ge&&te,Ve={[y.x_.Firing]:ae.filter(rt=>w(rt)>=1),[y.x_.Inactive]:ae.filter(rt=>w(rt)<1)},it=(0,l.useCallback)(rt=>{const pe=z.filter(Ie=>rt.refId!==Ie.refId).map(Ie=>({value:Ie.refId,label:Ie.refId}));switch(rt.type){case x.Us.math:return l.createElement(E.Z,{onChange:Ce,query:rt,labelWidth:"auto",onRunQuery:()=>{}});case x.Us.reduce:return l.createElement(h.v,{onChange:Ce,refIds:pe,labelWidth:"auto",query:rt});case x.Us.resample:return l.createElement(a.p,{onChange:Ce,query:rt,labelWidth:"auto",refIds:pe});case x.Us.classic:return l.createElement(p.I,{onChange:Ce,query:rt,refIds:pe});case x.Us.threshold:return l.createElement(v.M,{onChange:Ce,query:rt,labelWidth:"auto",refIds:pe});default:return l.createElement(l.Fragment,null,"Expression not supported: ",rt.type)}},[Ce,z]);return l.createElement("div",{className:(0,t.cx)(ee.expression.wrapper,_&&ee.expression.alertCondition)},l.createElement("div",{className:ee.expression.stack},l.createElement(N,{refId:G.refId,queryType:ne,onRemoveExpression:()=>ie(G.refId),onUpdateRefId:rt=>ce(G.refId,rt),onUpdateExpressionType:rt=>fe(G.refId,rt)}),l.createElement("div",{className:ee.expression.body},it(G)),te&&l.createElement(W,{series:ae,isAlertCondition:ge}),l.createElement("div",{className:ee.footer},l.createElement(c.Stack,{direction:"row",alignItems:"center"},l.createElement(b._,{onSetCondition:()=>re(G.refId),enabled:_,error:j,warning:de}),l.createElement(D.L,null),ve&&l.createElement(U,{firing:Ve[y.x_.Firing].length,normal:Ve[y.x_.Inactive].length})))))},K=20,W=({series:z,isAlertCondition:G})=>{const{pageItems:k,previousPage:j,nextPage:de,numberOfPages:ge,pageStart:re,pageEnd:ce}=(0,C.h)(z,1,K),ie=(0,o.wW)(Q),fe=I(z),Ce=!fe&&(0,i.xI)(z),ee=ge>1;return l.createElement("div",{className:ie.expression.results},!fe&&Ce&&l.createElement("div",null,k.map((ne,X)=>l.createElement(Y,{key:(0,n.uniqueId)(),frame:ne,index:re+X,isAlertCondition:G}))),!fe&&!Ce&&k.map((ne,X)=>l.createElement(S,{key:(0,n.uniqueId)(),frame:ne,index:re+X,isAlertCondition:G})),fe&&l.createElement("div",{className:(0,t.cx)(ie.expression.noData,ie.mutedText)},"No data"),ee&&l.createElement("div",{className:ie.pagination.wrapper,"data-testid":"paginate-expression"},l.createElement(c.Stack,null,l.createElement(m.zx,{variant:"secondary",fill:"outline",onClick:j,icon:"angle-left",size:"sm","aria-label":"previous-page"}),l.createElement(D.L,null),l.createElement("span",{className:ie.mutedText},re," - ",ce," of ",z.length),l.createElement(D.L,null),l.createElement(m.zx,{variant:"secondary",fill:"outline",onClick:de,icon:"angle-right",size:"sm","aria-label":"next-page"}))))},U=({firing:z,normal:G})=>{const{mutedText:k}=(0,o.wW)(Q);return l.createElement("span",{className:k},`${z} firing, ${G} normal`)},N=({refId:z,queryType:G,onUpdateRefId:k,onUpdateExpressionType:j,onRemoveExpression:de})=>{const ge=(0,o.wW)(Q),re=(0,o.wW)(m.gN),[ce,ie]=(0,l.useState)(!1),fe=ce!==!1,Ce=fe&&ce==="refId",ee=fe&&ce==="expressionType",ne=x._M.find(X=>X.value===G);return l.createElement("header",{className:ge.header.wrapper},l.createElement(c.Stack,{direction:"row",gap:.5,alignItems:"center"},l.createElement(c.Stack,{direction:"row",gap:1,alignItems:"center",wrap:!1},!Ce&&l.createElement("button",{type:"button",className:(0,t.cx)(re,ge.editable),onClick:()=>ie("refId")},l.createElement("div",{className:ge.expression.refId},z)),Ce&&l.createElement(r.H,{autoFocus:!0,defaultValue:z,minWidth:5,onChange:X=>{k(X.currentTarget.value),ie(!1)},onFocus:X=>X.target.select(),onBlur:X=>{k(X.currentTarget.value),ie(!1)}}),!ee&&l.createElement("button",{type:"button",className:(0,t.cx)(re,ge.editable),onClick:()=>ie("expressionType")},l.createElement("div",{className:ge.mutedText},(0,n.capitalize)(G)),l.createElement(u.J,{size:"xs",name:"pen",className:ge.mutedIcon,onClick:()=>ie("expressionType")})),ee&&l.createElement(d.Ph,{isOpen:!0,autoFocus:!0,onChange:X=>{j(X.value??x.Us.classic),ie(!1)},onBlur:()=>{ie(!1)},options:x._M,value:ne,width:25})),l.createElement(D.L,null),l.createElement(g.h,{type:"button",name:"trash-alt",variant:"secondary",className:ge.mutedIcon,onClick:de})))},S=({frame:z,index:G,isAlertCondition:k})=>{const j=(0,o.wW)(Q),de=B(z)||"Series "+G,ge=w(z),re=k&&ge!==0,ce=k&&ge===0;return l.createElement("div",{className:j.expression.resultsRow},l.createElement(c.Stack,{direction:"row",gap:1,alignItems:"center"},l.createElement("span",{className:(0,t.cx)(j.mutedText,j.expression.resultLabel),title:de},de),l.createElement("div",{className:j.expression.resultValue},ge),re&&l.createElement(M.l,{state:y.x_.Firing,size:"sm"}),ce&&l.createElement(M.l,{state:y.x_.Inactive,size:"sm"})))},Y=({frame:z,index:G})=>{const k=(0,o.wW)(Q),j=z.fields[1],de=j.labels,re=j.config?.displayNameFromDS??(de?A(j.labels??{}):"Series "+G),ce=z.fields[0].values.toArray(),ie=Ce=>z.fields[0].values.get(Ce),fe=Ce=>z.fields[1].values.get(Ce);return l.createElement("div",{className:k.expression.resultsRow},l.createElement(c.Stack,{direction:"row",gap:1,alignItems:"center"},l.createElement("span",{className:(0,t.cx)(k.mutedText,k.expression.resultLabel),title:re},re),l.createElement("div",{className:k.expression.resultValue},l.createElement(P.z,{placement:"right",wrapperClassName:k.timeseriesTableWrapper,content:l.createElement("table",{className:k.timeseriesTable},l.createElement("thead",null,l.createElement("tr",null,l.createElement("th",null,"Timestamp"),l.createElement("th",null,"Value"))),l.createElement("tbody",null,ce.map((Ce,ee)=>l.createElement("tr",{key:ee},l.createElement("td",{className:k.mutedText},(0,f.dq)(ie(ee))),l.createElement("td",{className:k.expression.resultValue},fe(ee))))))},l.createElement("span",null,"Time series data")))))},Q=z=>({expression:{wrapper:t.css`
      display: flex;
      border: solid 1px ${z.colors.border.medium};

      border-radius: ${z.shape.borderRadius()};
      max-width: 640px;
    `,stack:t.css`
      display: flex;
      flex-direction: column;
      flex-wrap: nowrap;
      gap: 0;
      min-width: 0; // this one is important to prevent text overflow
    `,alertCondition:t.css``,body:t.css`
      padding: ${z.spacing(1)};
      flex: 1;
    `,refId:t.css`
      font-weight: ${z.typography.fontWeightBold};
      color: ${z.colors.primary.text};
    `,results:t.css`
      border-top: solid 1px ${z.colors.border.medium};
    `,noResults:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
    `,resultsRow:t.css`
      padding: ${z.spacing(.75)} ${z.spacing(1)};

      &:nth-child(odd) {
        background-color: ${z.colors.background.secondary};
      }

      &:hover {
        background-color: ${z.colors.background.canvas};
      }
    `,resultValue:t.css`
      color: ${z.colors.text.maxContrast};
      text-align: right;
    `,resultLabel:t.css`
      flex: 1;
    `,noData:t.css`
      display: flex;
      align-items: center;
      justify-content: center;
      padding: ${z.spacing()};
    `},mutedText:t.css`
    color: ${z.colors.text.secondary};
    font-size: 0.9em;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,header:{wrapper:t.css`
      background: ${z.colors.background.secondary};
      padding: ${z.spacing(.5)} ${z.spacing(1)};
      border-bottom: solid 1px ${z.colors.border.medium};
    `},footer:t.css`
    background: ${z.colors.background.secondary};
    padding: ${z.spacing(1)};
    border-top: solid 1px ${z.colors.border.medium};
  `,draggableIcon:t.css`
    cursor: grab;
  `,mutedIcon:t.css`
    color: ${z.colors.text.secondary};
  `,editable:t.css`
    padding: ${z.spacing(.5)} ${z.spacing(1)};
    border: solid 1px ${z.colors.border.weak};
    border-radius: ${z.shape.borderRadius()};

    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${z.spacing(1)};

    cursor: pointer;
  `,timeseriesTableWrapper:t.css`
    max-height: 500px;

    overflow-y: scroll;
  `,timeseriesTable:t.css`
    table-layout: auto;

    width: 100%;
    height: 100%;

    td,
    th {
      padding: ${z.spacing(1)};
    }

    td {
      background: ${z.colors.background.primary};
    }

    th {
      background: ${z.colors.background.secondary};
    }

    tr {
      border-bottom: 1px solid ${z.colors.border.medium};

      &:last-of-type {
        border-bottom: none;
      }
    }
  `,pagination:{wrapper:t.css`
      border-top: 1px solid ${z.colors.border.medium};
      padding: ${z.spacing()};
    `}})},86922:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{AlertmanagerTemplateFunction:()=>n,availableAlertManagerFunctions:()=>l,builtinFunctions:()=>i,conf:()=>o,keywords:()=>f,language:()=>c});var t=(m=>(m.Delimiter="delimiter",m.Keyword="keyword",m.Function="type.identifier",m.String="string",m.Variable="variable.name",m.Number="number",m.Comment="comment",m.Operator="operator",m.Identifier="idenfifier",m))(t||{}),n=(m=>(m.toUpper="toUpper",m.toLower="toLower",m.title="title",m.join="join",m.match="match",m.safeHtml="safeHtml",m.reReplaceAll="reReplaceAll",m.stringSlice="stringSlice",m))(n||{});const l=Object.values(n),i=["and","call","html","index","slice","js","len","not","or","print","printf","println","urlquery",...["eq","ne","lt","le","gt","ge"]],f=["define","if","else","end","range","break","continue","template","block","with"],c={defaultToken:"",keywords:f,functions:[...i,...l],operators:["|"],tokenizer:{root:[[/"/,"string","@string"],[/`/,"string","@rawstring"],[/\d*\d+[eE]([\-+]?\d+)?/,"number.float"],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F']*[0-9a-fA-F]/,"number.hex"],[/0[0-7']*[0-7]/,"number.octal"],[/0[bB][0-1']*[0-1]/,"number.binary"],[/\d[\d']*/,"number"],[/\d/,"number"],[/[;,.]/,"delimiter"],[/{{-?/,"delimiter"],[/-?}}/,"delimiter"],[/\.([A-Za-z]+)?/,"variable.name"],[/[a-zA-Z_]\w*/,{cases:{"@keywords":{token:"keyword"},"@functions":{token:"type.identifier"},"@default":"idenfifier"}}],[/\/\*.*\*\//,"comment"]],string:[[/[^\\"]+/,"string"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],rawstring:[[/[^\`]/,"string"],[/`/,"string","@pop"]]}},o={comments:{blockComment:["/*","*/"]},brackets:[["{{","}}"],["(",")"]],autoClosingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{{",close:"}}"},{open:"(",close:")"},{open:"`",close:"`"},{open:'"',close:'"'},{open:"'",close:"'"}]}},6887:(Z,O,e)=>{"use strict";e.d(O,{p:()=>fn,E:()=>Kt});var t=e(9892),n=e(68404),l=e(59052),s=e(16144),i=e(35645),f=e(54408),c=e(72648),o=e(24799),m=e(46967),r=e(52081),u=e(31403),d=e(67487),g=e(68226),p=e(98102),E=e(60499),h=e(77582),a=e(40014),v=e(96044),x=e(81168),y=e(41904),C=e(69945),P=e(72004),D=e(94617),M=e(46818),b=e(21767),R=e(60048),B=e(63619),w=e(53217),A=e(20383),I=e(24015),F=e(30422),K=e(38849),W=e(49922),U=e(86647),N=e(45253),S=e(59980),Y=e(9471),Q=e(59724),z=e(57027),G=e(83849),k=e(70006),j=e(69311),de=e(54899),ge=e(77599);function re(ut){return"expr"in ut}function ce(ut){return"grafana_condition"in ut}var ie=e(45849);function fe(ut){if(re(ut))return Ce(ut,ut.dataSourceUid,D.$.cloudAlerting);if(ce(ut))return Ce(ut,ie.GC,D.$.grafana);throw new Error("unsupported preview rule request")}function Ce(ut,Tt,bt){return(0,G.x)({whileLoading:ee(bt),source:(0,de.i)().fetch({method:"POST",url:`/api/v1/rule/test/${Tt}`,data:ut}).pipe((0,Y.U)(({data:Ht})=>ee(bt,{state:W.Gu.Done,series:Ht.instances.map(k.vP)})),(0,Q.K)(Ht=>(0,S.of)(ee(bt,{state:W.Gu.Error,error:(0,ge.P)(Ht)}))),(0,z.B)())})}function ee(ut,Tt={}){return{ruleType:ut,data:{state:W.Gu.Loading,series:[],timeRange:(0,j.JK)(),...Tt}}}var ne=e(69369),X=e(89050),te=e(85854),ae=e(98825),_=e(40538);function ve(ut){const{preview:Tt}=ut,bt=(0,c.wW)(Ve),Ht={defaults:{},overrides:[{matcher:{id:te.mi.byName,options:"Info"},properties:[{id:"custom.displayMode",value:_.h2.JSONView}]}]};if(!Tt)return null;const{data:en,ruleType:ln}=Tt;return en.state===W.Gu.Loading?n.createElement("div",{className:bt.container},n.createElement("span",null,"Loading preview...")):en.state===W.Gu.Error?n.createElement("div",{className:bt.container},en.error?(0,M.kk)(en.error):"Failed to preview alert rule"):n.createElement("div",{className:bt.container},n.createElement("span",null,"Preview based on the result of running the query, for this moment."," ",ln===D.$.grafana?"Configuration for `no data` and `error handling` is not applied.":null),n.createElement("div",{className:bt.table},n.createElement(X.Z,null,({width:Cn,height:xn})=>n.createElement("div",{style:{width:`${Cn}px`,height:`${xn}px`}},n.createElement(ae.$,{title:"",width:Cn,height:xn,pluginId:"table",data:en,fieldConfig:Ht})))))}function Ve(ut){return{container:t.css`
      margin: ${ut.spacing(2)} 0;
    `,table:t.css`
      flex: 1 1 auto;
      height: 135px;
      margin-top: ${ut.spacing(2)};
      border: 1px solid ${ut.colors.border.medium};
      border-radius: ${ut.shape.borderRadius(1)};
    `}}const it=["type","dataSourceName","condition","queries","expression"];function rt(){const ut=(0,c.wW)(Je),[Tt,bt]=pe(),{watch:Ht}=(0,l.Gc)(),[en,ln,Cn]=Ht(["type","condition","queries"]),{allDataSourcesAvailable:xn}=(0,ne.S)(Cn);if(en===D.$.cloudRecording||en===D.$.cloudAlerting)return null;const Tn=Boolean(ln)&&xn;return n.createElement("div",{className:ut.container},n.createElement(r.Lh,null,xn&&n.createElement(u.zx,{disabled:!Tn,type:"button",variant:"primary",onClick:bt},"Preview alerts"),!xn&&n.createElement(N.b,{title:"Preview is not available",severity:"warning"},"Cannot display the query preview. Some of the data sources used in the queries are not available.")),n.createElement(ve,{preview:Tt}))}function pe(){const[ut,Tt]=(0,n.useState)(),{getValues:bt}=(0,l.Gc)(),Ht=(0,I.Z)(),en=(0,n.useCallback)(()=>{const ln=bt(it),Cn=Ie(ln);fe(Cn).pipe((0,F.o)(xn=>!We(xn),!0)).subscribe(xn=>{Ht()&&Tt(xn)})},[bt,Ht]);return[ut,en]}function Ie(ut){const[Tt,bt,Ht,en,ln]=ut,Cn=(0,U.F)().getInstanceSettings(bt);if(!Cn)throw new Error(`Cannot find data source settings for ${bt}`);switch(Tt){case D.$.cloudAlerting:return{dataSourceUid:Cn.uid,dataSourceName:bt,expr:ln};case D.$.grafana:return{grafana_condition:{condition:Ht,data:en,now:(0,K.lf)(Date.now())}};default:throw new Error(`Alert type ${Tt} not supported by preview.`)}}function We(ut){switch(ut.data.state){case W.Gu.Done:case W.Gu.Error:return!0;default:return!1}}function Je(ut){return{container:t.css`
      margin-top: ${ut.spacing(2)};
      max-width: ${ut.breakpoints.values.xxl}px;
    `}}var He=e(36894);const Ae=()=>{const ut=(0,c.wW)(et),{register:Tt,control:bt,watch:Ht,formState:{errors:en}}=(0,l.Gc)();return Ht("type")===D.$.cloudRecording?null:n.createElement(He.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(o.g,{label:"For",description:"Expression has to be true for this long for the alert to be fired."},n.createElement("div",{className:ut.flexRow},n.createElement(o.g,{invalid:!!en.forTime?.message,error:en.forTime?.message,className:ut.inlineField},n.createElement(m.I,{...Tt("forTime",{pattern:{value:/^\d+$/,message:"Must be a positive integer."}}),width:8})),n.createElement(B.g,{name:"forTimeUnit",render:({field:{onChange:Cn,ref:xn,...Tn}})=>n.createElement(w.Ph,{...Tn,options:A.qr,onChange:Yn=>Cn(Yn?.value),width:15,className:ut.timeUnit}),control:bt}))),n.createElement(rt,null))},et=ut=>({inlineField:t.css`
    margin-bottom: 0;
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-start;
  `,timeUnit:t.css`
    margin-left: ${ut.spacing(.5)};
  `});var _e=e(16808),Se=e(20700);const Fe=({rulesSourceName:ut})=>{const{control:Tt,watch:bt,formState:{errors:Ht},setValue:en}=(0,l.Gc)(),ln=(0,c.wW)(Xe),Cn=(0,C._)(_n=>_n.rulerRules),xn=(0,x.useDispatch)();(0,n.useEffect)(()=>{xn((0,P.UR)({rulesSourceName:ut}))},[ut,xn]);const Tn=Cn[ut]?.result,Yn=bt("namespace"),aa=(0,n.useMemo)(()=>Tn?Object.keys(Tn).map(_n=>({label:_n,value:_n})):[],[Tn]),sa=(0,n.useMemo)(()=>Yn&&Tn?.[Yn]?.map(_n=>({label:_n.name,value:_n.name}))||[],[Yn,Tn]);return n.createElement("div",{className:ln.flexRow},n.createElement(o.g,{"data-testid":"namespace-picker",label:"Namespace",error:Ht.namespace?.message,invalid:!!Ht.namespace?.message},n.createElement(B.g,{render:({field:{onChange:_n,ref:La,...Ta}})=>n.createElement(w.LT,{...Ta,allowCustomValue:!0,className:ln.input,onChange:Ba=>{en("group",""),_n(Ba.value)},options:aa,width:42}),name:"namespace",control:Tt,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:Se.p0}}})),n.createElement(o.g,{"data-testid":"group-picker",label:"Group",error:Ht.group?.message,invalid:!!Ht.group?.message},n.createElement(B.g,{render:({field:{ref:_n,...La}})=>n.createElement(w.LT,{...La,allowCustomValue:!0,options:sa,width:42,onChange:Ta=>{en("group",Ta.value??"")},className:ln.input}),name:"group",control:Tt,rules:{required:{value:!0,message:"Required."},validate:{pathSeparator:Se.p0}}})))},Xe=ut=>({flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;

    & > * + * {
      margin-left: ${ut.spacing(3)};
    }
  `,input:t.css`
    width: 330px !important;
  `});function Qe(ut){if(ut===D.$.cloudRecording)return"Select the Namespace and Group for your recording rule.";const Tt="https://grafana.com/docs/grafana/latest/alerting/fundamentals/annotation-label/variables-label-annotation",bt=()=>n.createElement("span",null,"Click"," ",n.createElement("a",{href:Tt,target:"_blank",rel:"noreferrer"},"here"," "),"for documentation on how to template annotations and labels.");return ut===D.$.grafana?n.createElement("span",null," ","Write a summary to help you better manage your alerts. ",n.createElement(bt,null)):ut===D.$.cloudAlerting?n.createElement("span",null," ","Select the Namespace and evaluation group for your alert. Write a summary to help you better manage your alerts."," "):""}function ct(){const{watch:ut}=(0,l.Gc)(),Tt=ut("type"),bt=ut("dataSourceName"),Ht=ut("type");return n.createElement(He.z,{stepNo:Ht===D.$.cloudRecording?3:4,title:Ht===D.$.cloudRecording?"Folder and group":"Add details for your alert rule",description:Qe(Ht)},(Tt===D.$.cloudRecording||Tt===D.$.cloudAlerting)&&bt&&n.createElement(Fe,{rulesSourceName:bt}),Ht!==D.$.cloudRecording&&n.createElement(_e.Z,null))}var ht=e(56412),ft=e(72948),Re=e(29460),nt=e(19191);const le=()=>{const ut=(0,c.wW)(Oe),{watch:Tt,getValues:bt}=(0,l.Gc)(),Ht=Tt("type"),en=Tt("dataSourceName")??ie.GC,ln=Pe(bt("labels")).length>0;return n.createElement(He.z,{stepNo:Ht===D.$.cloudRecording?4:5,title:Ht===D.$.cloudRecording?"Labels":"Notifications",description:Ht===D.$.cloudRecording?"Add labels to help you better manage your recording rules":"Grafana handles the notifications for alerts by assigning labels to alerts. These labels connect alerts to contact points and silence alert instances that have matching labels."},n.createElement("div",{className:ut.contentWrapper},n.createElement("div",{style:{display:"flex",flexDirection:"column"}},!ln&&Ht!==D.$.cloudRecording&&n.createElement(ft.Z,{className:ut.card},n.createElement(ft.Z.Heading,null,"Root route \u2013 default for all alerts"),n.createElement(ft.Z.Description,null,"Without custom labels, your alert will be routed through the root route. To view and edit the root route, go to ",n.createElement(Re.r,{href:"/alerting/routes"},"notification policies")," or contact your admin in case you are using non-Grafana alert management.")),n.createElement(nt.Z,{dataSourceName:en}))))};function Pe(ut){return ut.filter(Tt=>Tt.key&&Tt.value)}const Oe=ut=>({contentWrapper:t.css`
    display: flex;
    align-items: center;
  `,hideButton:t.css`
    color: ${ut.colors.text.secondary};
    cursor: pointer;
    margin-bottom: ${ut.spacing(1)};
  `,card:t.css`
    max-width: 500px;
  `,flowChart:t.css`
    margin-right: ${ut.spacing(3)};
  `});var Le=e(20091),Ye=e(30979),be=e(72142),Te=e(79841),me=e(6554),he=e(39904),De=e(9405),$e=e(79662);const ke=[{label:"Yaml",value:"yaml"}],tt=({onClose:ut})=>{const[Tt,bt]=(0,n.useState)("yaml"),{setValue:Ht}=(0,l.Gc)(),en=(0,c.wW)(ot),ln=Cn=>{for(const xn in Cn)Ht(xn,Cn[xn]);ut()};return n.createElement(Ye.d,{title:"Inspect Alert rule",subtitle:n.createElement("div",{className:en.subtitle},n.createElement(Ge,{setActiveTab:bt,activeTab:Tt})),onClose:ut},Tt==="yaml"&&n.createElement(dt,{onSubmit:ln}))},Ge=({activeTab:ut,setActiveTab:Tt})=>n.createElement(be.J,null,ke.map((bt,Ht)=>n.createElement(Te.O,{key:`${bt.value}-${Ht}`,label:bt.label,value:bt.value,onChangeTab:()=>Tt(bt.value),active:ut===bt.value}))),dt=({onSubmit:ut})=>{const Tt=(0,c.wW)(je),{getValues:bt}=(0,l.Gc)(),Ht=(0,b.yh)(bt()),[en,ln]=(0,n.useState)((0,Le.$w)(Ht)),Cn=()=>{const xn=(0,Le.zD)(en),Tn=bt(),Yn=Ke(xn);ut({...Tn,...Yn})};return n.createElement(n.Fragment,null,n.createElement("div",{className:Tt.applyButton},n.createElement(u.zx,{type:"button",onClick:Cn},"Apply"),n.createElement(me.u,{content:n.createElement(pt,null),theme:"info",placement:"left-start",interactive:!0},n.createElement(he.J,{name:"exclamation-triangle",size:"xl"}))),n.createElement("div",{className:Tt.content},n.createElement(X.Z,{disableWidth:!0},({height:xn})=>n.createElement(De.p,{width:"100%",height:xn,language:"yaml",value:en,onBlur:ln,monacoOptions:{minimap:{enabled:!1}}}))))};function pt(){return n.createElement("div",null,"The YAML content in the editor only contains alert rule configuration ",n.createElement("br",null),"To configure Prometheus, you need to provide the rest of the"," ",n.createElement("a",{href:"https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/",target:"_blank",rel:"noreferrer"},"configuration file content."))}function Ke(ut){return(0,$e.cG)(ut)?(0,b.WL)(ut):(0,$e.yF)(ut)?(0,b.lN)(ut):{}}const je=ut=>({content:t.css`
    flex-grow: 1;
    height: 100%;
    padding-bottom: 16px;
    margin-bottom: ${ut.spacing(2)};
  `,applyButton:t.css`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    flex-grow: 0;
    margin-bottom: ${ut.spacing(2)};
  `}),ot=()=>({subtitle:t.css`
    display: flex;
    align-items: center;
    justify-content: space-between;
  `});var at=e(68183),xt=e(26418),Dt=e(75e3);function wt(){const ut=(0,C._)(bt=>bt.dataSources);return Object.values(ut).map(bt=>bt.result).filter(bt=>Boolean(bt?.rulerConfig)).map(bt=>(0,ie.c$)(bt.name)).filter(bt=>Boolean(bt))}var sn=e(81001),mn=e(82897),Dn=e(22350),Rn=e(94929),St=e(40400),At=e(34807);function Wt(ut){return Object.entries(ut).map(([Tt,bt])=>`${Tt}=${bt}`).sort()}var Qt=e(45608),jt=e(46063);function Xt({fields:ut}){const Tt=ut.filter(xn=>!["State","Info"].includes(xn.name)),bt=ut.findIndex(xn=>xn.name==="State"),Ht=ut.findIndex(xn=>xn.name==="Info"),en=Tt.map(xn=>ut.indexOf(xn)),ln=ut[bt]?.values.length??0,Cn=[];for(let xn=0;xn<ln;xn++){const Tn=en.map(sa=>[ut[sa].name,ut[sa].values.get(xn)]),Yn=ut[bt]?.values?.get(xn),aa=ut[Ht]?.values?.get(xn);(0,jt.Yb)(Yn)&&Cn.push({state:Yn,info:aa,labels:Object.fromEntries(Tn)})}return{instances:Cn}}function tn({preview:ut}){const Tt=(0,c.wW)(on),bt=Xt(ut);return n.createElement("table",{className:Tt.table},n.createElement("caption",null,n.createElement("div",null,"Alerts preview"),n.createElement("span",null,"Preview based on the result of running the query for this moment.")),n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"State"),n.createElement("th",null,"Labels"),n.createElement("th",null,"Info"))),n.createElement("tbody",null,bt.instances.map(({state:Ht,info:en,labels:ln},Cn)=>{const xn=Wt(ln);return n.createElement("tr",{key:Cn},n.createElement("td",null,n.createElement(Qt.l,{state:Ht})),n.createElement("td",null,n.createElement(At.P,{tags:xn,className:Tt.tagList})),n.createElement("td",null,en&&n.createElement(me.u,{content:en},n.createElement(he.J,{name:"info-circle"}))))})))}const on=ut=>({table:t.css`
    width: 100%;
    margin: ${ut.spacing(2,0)};

    caption {
      caption-side: top;
      color: ${ut.colors.text.primary};

      & > span {
        font-size: ${ut.typography.bodySmall.fontSize};
        color: ${ut.colors.text.secondary};
      }
    }

    td,
    th {
      padding: ${ut.spacing(1,1)};
    }

    td + td,
    th + th {
      padding-left: ${ut.spacing(3)};
    }

    thead th {
      &:nth-child(1) {
        width: 80px;
      }

      &:nth-child(2) {
        width: auto;
      }

      &:nth-child(3) {
        width: 40px;
      }
    }

    td:nth-child(3) {
      text-align: center;
    }

    tbody tr:nth-child(2n + 1) {
      background-color: ${ut.colors.background.secondary};
    }
  `,tagList:t.css`
    justify-content: flex-start;
  `}),dn=({value:ut,onChange:Tt,dataSourceName:bt,showPreviewAlertsButton:Ht=!0})=>{const en=(0,c.wW)($t),{mapToValue:ln,mapToQuery:Cn}=qt(bt),xn=Cn({refId:"A",hide:!1},ut),{error:Tn,loading:Yn,value:aa}=(0,Dn.Z)(()=>(0,U.F)().get(bt),[bt]),sa=(0,n.useCallback)(Ya=>{Tt(ln(Ya))},[Tt,ln]),[_n,La]=pe(),Ta=async()=>{La()};if(Yn||aa?.name!==bt)return null;const Ba=(0,U.F)().getInstanceSettings(bt);if(Tn||!aa||!aa?.components?.QueryEditor||!Ba){const Ya=Tn?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",Ya)}const Ps=_n?.data.state===W.Gu.Done,Na=aa?.components?.QueryEditor,Wa=_n?.data?.series?.find(Ya=>Ya.name==="evaluation results"),hs=Wa&&Wa.fields.some(Ya=>Ya.values.length>0);return n.createElement(n.Fragment,null,n.createElement(Rn.n,{instanceSettings:Ba},n.createElement(Na,{query:xn,queries:[xn],app:St.zj.CloudAlerting,onChange:sa,onRunQuery:mn.noop,datasource:aa})),Ht&&n.createElement("div",{className:en.preview},n.createElement(u.zx,{type:"button",onClick:Ta,disabled:_n?.data.state===W.Gu.Loading},"Preview alerts"),Ps&&!hs&&n.createElement(N.b,{title:"Alerts preview",severity:"info",className:en.previewAlert},"There are no firing alerts for your query."),hs&&n.createElement(tn,{preview:Wa})))},$t=ut=>({preview:t.css`
    padding: ${ut.spacing(2,0)};
    max-width: ${ut.breakpoints.values.xl}px;
  `,previewAlert:t.css`
    margin: ${ut.spacing(1,0)};
  `});function qt(ut){return(0,n.useMemo)(()=>{switch((0,U.F)().getInstanceSettings(ut)?.type){case"loki":case"prometheus":return{mapToValue:bt=>bt.expr,mapToQuery:(bt,Ht)=>({...bt,expr:Ht})};default:throw new Error(`${ut} is not supported as an expression editor`)}},[ut])}var Vt=e(97201);const nn=({condition:ut,onSetCondition:Tt,queries:bt,panelData:Ht,onUpdateRefId:en,onRemoveExpression:ln,onUpdateExpressionType:Cn,onUpdateQueryExpression:xn})=>{const Tn=(0,n.useMemo)(()=>bt.reduce((Yn,aa)=>(0,Dt.j)(aa.model)?Yn.concat(aa.model):Yn,[]),[bt]);return n.createElement(xt.Stack,{direction:"row",alignItems:"stretch"},Tn.map(Yn=>{const aa=Ht[Yn.refId],sa=ut===Yn.refId,_n=sa&&aa?(0,Se.Vp)(aa.series):void 0,La=sa&&aa?(0,Se.Yq)(aa.series):void 0;return n.createElement(Vt.A2,{key:Yn.refId,isAlertCondition:sa,data:aa,error:_n,warning:La,queries:bt,query:Yn,onSetCondition:Tt,onRemoveExpression:ln,onUpdateRefId:en,onUpdateExpressionType:Cn,onChangeQuery:xn})}))};var un=e(19677),En=e(67254),cn=e(91162),wn=e(19115),Gn=e(19426),Nn=e(36584),Wn=e(37190),qn=e(50362),ga=e(60325),ea=e(18271);function ca(ut,Tt,bt){const Ht=(0,c.l4)();if(Tt===Wn.GC||Tt===Wn.Kd||ba(ut))return 200;const en=ut.series[bt].fields[0].values.length,ln=Ht.spacing.gridSize*5,Cn=en*ln+ln;return Cn>=200?200:Cn}function ba(ut){return!ut||!ut.series[0]||!ut.series[0].fields[0]||!ut.series[0].fields[0].values}var zn=e(74542);const $n=({data:ut,currentPanel:Tt,changePanel:bt,thresholds:Ht,thresholdsType:en=_.i3.Line})=>{const[ln,Cn]=(0,n.useState)({frameIndex:0,showHeader:!0}),xn=ca(ut,Tt,ln.frameIndex),Tn=(0,c.wW)(ta(xn)),[Yn,aa]=(0,n.useState)(Ma(ut,Ht));(0,n.useEffect)(()=>{aa(_n=>({..._n,defaults:{..._n.defaults,thresholds:Ht,unit:Fa(ut),custom:{..._n.defaults.custom,thresholdsStyle:{mode:en}}}}))},[Ht,aa,ut,en]);const sa=(0,n.useMemo)(()=>({eventBus:ea.Z,canEditThresholds:!1,showThresholds:!0}),[]);return!ln||!ut?null:n.createElement("div",{className:Tn.wrapper},n.createElement("div",{className:Tn.buttonGroup},n.createElement(zn.j,{onChange:bt,value:Tt})),n.createElement(X.Z,null,({width:_n})=>_n===0?null:n.createElement("div",{style:{height:`${xn}px`,width:`${_n}px`}},n.createElement(ga._w,{value:sa},n.createElement(ae.$,{height:xn,width:_n,data:ut,pluginId:Tt,title:"title",onOptionsChange:Cn,options:ln,fieldConfig:Yn})))))},ta=ut=>Tt=>({wrapper:t.css`
    padding: 0 ${Tt.spacing(2)};
    height: ${ut+Tt.spacing.gridSize*4}px;
  `,buttonGroup:t.css`
    display: flex;
    justify-content: flex-end;
  `});function Fa(ut){return ut.series[0]?.fields.find(Tt=>Tt.type==="number")?.config.unit}function Ma(ut,Tt){return Tt?{defaults:{thresholds:Tt,unit:Fa(ut),custom:{thresholdsStyle:{mode:_.i3.Line}}},overrides:[]}:{defaults:{},overrides:[]}}const Oa=43200,Qa=({data:ut,error:Tt,dsSettings:bt,index:Ht,onChangeDataSource:en,onChangeQuery:ln,onChangeTimeRange:Cn,onRunQueries:xn,onRemoveQuery:Tn,onDuplicateQuery:Yn,query:aa,queries:sa,thresholds:_n,thresholdsType:La,onChangeThreshold:Ta,condition:Ba,onSetCondition:Ps,onChangeQueryOptions:Na})=>{const Wa=(0,c.wW)(ia),hs=(0,Dt.j)(aa.model),[Ya,ls]=(0,n.useState)(hs?Wn.Fe:Wn.GC);function qa(){const ss=(0,c.wW)(ia);return n.createElement("div",{className:ss.dsTooltip},n.createElement(me.u,{content:n.createElement(n.Fragment,null,"Not finding the data source you want? Some data sources are not supported for alerting. Click on the icon for more information.")},n.createElement(he.J,{name:"info-circle",onClick:()=>window.open(" https://grafana.com/docs/grafana/latest/alerting/fundamentals/data-source-alerting/","_blank")})))}function es({query:ss,error:dr,index:us}){const Zs={maxDataPoints:{maxDataPoints:ss.model.maxDataPoints}.maxDataPoints};return(0,Dt.j)(ss.model)?null:n.createElement(xt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(qa,null),Cn&&n.createElement(wn.x,{timeRange:ss.relativeTimeRange??(0,j.Rr)(),onChange:Sa=>Cn(Sa,us)}),n.createElement("div",{className:Wa.queryOptions},n.createElement(Aa,{options:Zs,onChange:Sa=>Na(Sa,us)})),n.createElement(qn._,{onSetCondition:()=>Ps(ss.refId),enabled:Ba===ss.refId,error:dr}))}return n.createElement("div",{className:Wa.wrapper},n.createElement(Nn.x,{alerting:!0,dataSource:bt,onChangeDataSource:hs?void 0:ss=>en(ss,Ht),id:aa.refId,index:Ht,key:aa.refId,data:ut,query:(0,mn.cloneDeep)(aa.model),onChange:ss=>ln(ss,Ht),onRemoveQuery:Tn,onAddQuery:()=>Yn((0,mn.cloneDeep)(aa)),onRunQuery:xn,queries:sa,renderHeaderExtras:()=>n.createElement(es,{query:aa,index:Ht,error:Tt}),app:St.zj.UnifiedAlerting,visualization:ut.state!==W.Gu.NotStarted?n.createElement($n,{data:ut,changePanel:ls,currentPanel:Ya,thresholds:_n,thresholdsType:La,onThresholdsChange:Ta?ss=>Ta(ss,Ht):void 0}):null,hideDisableQuery:!0}))},Qn=({children:ut})=>{const Tt=(0,c.wW)(ia);return n.createElement("div",{className:Tt.wrapper},ut)};function Aa({options:ut,onChange:Tt}){const bt=ut.maxDataPoints??"",Ht=en=>{const ln=parseInt(en.target.value,10),Cn=isNaN(ln)||ln===0?void 0:ln;Cn!==ut.maxDataPoints&&Tt({...ut,maxDataPoints:Cn})};return n.createElement(xt.Stack,{direction:"row",alignItems:"baseline",gap:1},n.createElement(Gn.c,{width:8,tooltip:n.createElement(n.Fragment,null,"The maximum data points per series. Used directly by some data sources and used in calculation of auto interval. With streaming data this value is used for the rolling buffer.")},"Max data points"),n.createElement(m.I,{type:"number",className:"width-6",placeholder:Oa.toLocaleString(),spellCheck:!1,onBlur:Ht,defaultValue:bt}))}const ia=ut=>({wrapper:t.css`
    label: AlertingQueryWrapper;
    margin-bottom: ${ut.spacing(1)};
    border: 1px solid ${ut.colors.border.medium};
    border-radius: ${ut.shape.borderRadius(1)};
  `,queryOptions:t.css`
    margin-bottom: -${ut.spacing(2)};
  `,dsTooltip:t.css`
    display: flex;
    align-items: center;
    &:hover {
      opacity: 0.85;
      cursor: pointer;
    }
  `});class _a extends n.PureComponent{constructor(Tt){super(Tt),this.onRemoveQuery=bt=>{const{queries:Ht,onQueriesChange:en}=this.props;en(Ht.filter(ln=>ln.refId!==bt.refId))},this.onChangeTimeRange=(bt,Ht)=>{const{queries:en,onQueriesChange:ln}=this.props;ln(en.map((Cn,xn)=>xn!==Ht?Cn:{...Cn,relativeTimeRange:bt}))},this.onChangeQueryOptions=(bt,Ht)=>{const{queries:en,onQueriesChange:ln}=this.props;ln(en.map((Cn,xn)=>xn!==Ht?Cn:{...Cn,model:{...Cn.model,maxDataPoints:bt.maxDataPoints}}))},this.onChangeDataSource=(bt,Ht)=>{const{queries:en,onQueriesChange:ln}=this.props,Cn=en.map((xn,Tn)=>{if(Tn!==Ht)return xn;const Yn=this.getDataSourceSettings(xn);return bt.type===Yn?.type?As(xn,bt):va(xn,bt)});ln(Cn)},this.onChangeQuery=(bt,Ht)=>{const{queries:en,onQueriesChange:ln}=this.props;ln(en.map((Cn,xn)=>xn!==Ht?Cn:{...Cn,refId:bt.refId,queryType:Cn.model.queryType??"",model:{...Cn.model,...bt,datasource:bt.datasource}}))},this.onDragEnd=bt=>{const{queries:Ht,onQueriesChange:en}=this.props;if(!bt||!bt.destination)return;const ln=bt.source.index,Cn=bt.destination.index;if(ln===Cn)return;const xn=Array.from(Ht),[Tn]=xn.splice(ln,1);xn.splice(Cn,0,Tn),en(xn)},this.getDataSourceSettings=bt=>(0,U.F)().getInstanceSettings(bt.datasourceUid)}render(){const{queries:Tt,expressions:bt}=this.props,Ht=(0,Se.Fu)([...Tt,...bt]);return n.createElement(un.Z5,{onDragEnd:this.onDragEnd},n.createElement(un.bK,{droppableId:"alerting-queries",direction:"vertical"},en=>n.createElement("div",{ref:en.innerRef,...en.droppableProps},Tt.map((ln,Cn)=>{const xn=this.props.data?.[ln.refId]??{series:[],state:W.Gu.NotStarted},Tn=this.getDataSourceSettings(ln),aa=this.props.condition===ln.refId?(0,Se.Vp)(xn.series):void 0;return Tn?n.createElement(Qa,{index:Cn,key:ln.refId,dsSettings:Tn,data:xn,error:aa,query:ln,onChangeQuery:this.onChangeQuery,onRemoveQuery:this.onRemoveQuery,queries:Tt,onChangeDataSource:this.onChangeDataSource,onDuplicateQuery:this.props.onDuplicateQuery,onChangeTimeRange:this.onChangeTimeRange,onChangeQueryOptions:this.onChangeQueryOptions,thresholds:Ht[ln.refId]?.config,thresholdsType:Ht[ln.refId]?.mode,onRunQueries:this.props.onRunQueries,condition:this.props.condition,onSetCondition:this.props.onSetCondition}):n.createElement(Ga,{key:`${ln.refId}-${Cn}`,index:Cn,model:ln.model,onUpdateDatasource:()=>{const sa=(0,cn.ak)().getInstanceSettings(null);sa&&this.onChangeDataSource(sa,Cn)},onRemoveQuery:()=>{this.onRemoveQuery(ln)}})}),en.placeholder)))}}function As(ut,Tt){return{...ut,model:{...(0,mn.omit)(ut.model,"datasource"),datasource:{type:Tt.type,uid:Tt.uid}},datasourceUid:Tt.uid}}function va(ut,Tt){return{refId:ut.refId,relativeTimeRange:ut.relativeTimeRange,queryType:"",datasourceUid:Tt.uid,model:{refId:ut.refId,hide:!1,datasource:{type:Tt.type,uid:Tt.uid}}}}const Ga=({index:ut,onUpdateDatasource:Tt,onRemoveQuery:bt,model:Ht})=>{const en=Ht.refId,[ln,Cn]=(0,n.useState)(!1),xn=()=>{Cn(Yn=>!Yn)},Tn=()=>{Tt()};return n.createElement(Qn,null,n.createElement(En.t,{title:en,draggable:!0,index:ut,id:en,isOpen:!0},n.createElement(ft.Z,null,n.createElement(ft.Z.Heading,null,"This datasource has been removed"),n.createElement(ft.Z.Description,null,"The datasource for this query was not found, it was either removed or is not installed correctly."),n.createElement(ft.Z.Figure,null,n.createElement(he.J,{name:"question-circle"})),n.createElement(ft.Z.Actions,null,n.createElement(u.zx,{key:"update",variant:"secondary",onClick:Tn},"Update datasource"),n.createElement(u.zx,{key:"remove",variant:"destructive",onClick:bt},"Remove query")),n.createElement(ft.Z.SecondaryActions,null,n.createElement(u.zx,{key:"details",onClick:xn,icon:ln?"angle-up":"angle-down",fill:"text",size:"sm"},"Show details"))),ln&&n.createElement("div",null,n.createElement("pre",null,n.createElement("code",null,JSON.stringify(Ht,null,2))))))},Xa=({queries:ut,expressions:Tt,panelData:bt,onRunQueries:Ht,onChangeQueries:en,onDuplicateQuery:ln,condition:Cn,onSetCondition:xn})=>{const Tn=(0,c.wW)(da);return n.createElement("div",{className:Tn.container},n.createElement(_a,{data:bt,queries:ut,expressions:Tt,onRunQueries:Ht,onQueriesChange:en,onDuplicateQuery:ln,condition:Cn,onSetCondition:xn}))},da=ut=>({container:t.css`
    background-color: ${ut.colors.background.primary};
    height: 100%;
    max-width: ${ut.breakpoints.values.xxl}px;
  `});var as=e(85596),qs=e(19349);const Ys=({queries:ut,onChangeQuery:Tt,runQueries:bt,panelData:Ht,dataSourceName:en})=>{const[ln,Cn]=(0,n.useState)({series:[],state:as.Gu.NotStarted,timeRange:(0,qs.$t)().timeRange()}),xn=(0,c.wW)(sr),Tn=(0,Dt.j)(ut[0]?.model),[Yn,aa]=(0,n.useState)(Tn?Wn.Fe:Wn.GC);(0,n.useEffect)(()=>{Cn(Ht?.[ut[0]?.refId])},[Ht,ut]);const{error:sa,loading:_n,value:La}=(0,Dn.Z)(()=>(0,U.F)().get(en),[en]),Ta=Na=>{const Wa=ut[0],hs=(0,U.F)().getInstanceSettings(en)?.uid;if(!(0,b.tO)(Na)||!hs)return;const Ya=Na.expr,ls={...Wa,refId:Na.refId,queryType:Na.queryType??"",datasourceUid:hs,expr:Ya,model:{refId:Na.refId,expr:Ya,editorMode:"code"}};Tt([ls])};if(_n||La?.name!==en)return null;const Ba=(0,U.F)().getInstanceSettings(en);if(sa||!La||!La?.components?.QueryEditor||!Ba){const Na=sa?.message||"Data source plugin does not export any Query Editor component";return n.createElement("div",null,"Could not load query editor due to: ",Na)}const Ps=La.components.QueryEditor;return n.createElement(n.Fragment,null,ut.length&&n.createElement(Ps,{query:ut[0],queries:ut,app:St.zj.UnifiedAlerting,onChange:Ta,onRunQuery:()=>bt(ut),datasource:La}),ln&&n.createElement("div",{className:xn.vizWrapper},n.createElement($n,{data:ln,currentPanel:Yn,changePanel:aa})))},sr=ut=>({vizWrapper:t.css`
    margin: ${ut.spacing(1,0)};
  `});var er=e(82002),Sr=e(53117),rr=e(3153);function Ms({value:ut,...Tt}){const bt=wt(),{loading:Ht=!0}=(0,Dn.Z)(()=>(0,rr.WI)((0,P.dV)()),[rr.WI]),en=(0,n.useCallback)(ln=>!!bt.find(({id:Cn})=>Cn===ln.id),[bt]);return n.createElement(Sr.q,{disabled:Ht,isLoading:Ht,noDefault:!0,alerting:!0,filter:en,current:ut,...Tt})}const js=ut=>{const{name:Tt,description:bt,image:Ht,selected:en=!1,value:ln,onClick:Cn,disabled:xn=!1}=ut,Tn=(0,c.wW)(Ls),Yn=(0,t.cx)({[Tn.wrapper]:!0,[Tn.disabled]:xn});return n.createElement(ft.Z,{className:Yn,isSelected:en,onClick:()=>Cn(ln),disabled:xn},n.createElement(ft.Z.Figure,null,n.createElement("img",{src:Ht,alt:""})),n.createElement(ft.Z.Heading,null,Tt),n.createElement(ft.Z.Description,null,bt))},Ls=ut=>({wrapper:t.css`
    width: 380px;
    cursor: pointer;
    user-select: none;
  `,disabled:t.css`
    opacity: 0.5;
  `}),Ss=({selected:ut=!1,disabled:Tt,onClick:bt})=>n.createElement(js,{name:"Grafana managed alert",description:n.createElement("span",null,"Supports multiple data sources of any kind.",n.createElement("br",null),"Transform data with expressions."),image:"public/img/grafana_icon.svg",selected:ut,disabled:Tt,value:D.$.grafana,onClick:bt}),Vs=({children:ut,visible:Tt=!1})=>Tt?n.createElement(me.u,{content:"You do not appear to have any compatible datasources.",placement:"top"},n.createElement("div",null,ut)):n.createElement(n.Fragment,null,ut),Va=({selected:ut=!1,disabled:Tt=!1,onClick:bt})=>n.createElement(Vs,{visible:Tt},n.createElement(js,{name:"Mimir or Loki alert",description:n.createElement("span",null,"Use a Mimir, Loki or Cortex datasource.",n.createElement("br",null),"Expressions are not supported."),image:"public/img/alerting/mimir_logo.svg",selected:ut,disabled:Tt,value:D.$.cloudAlerting,onClick:bt})),Or=({selected:ut=!1,disabled:Tt=!1,onClick:bt})=>n.createElement(Vs,{visible:Tt},n.createElement(js,{name:"Mimir or Loki recording rule",description:n.createElement("span",null,"Precompute expressions.",n.createElement("br",null),"Should be combined with an alert rule."),image:"public/img/alerting/mimir_logo_recording.svg",selected:ut,disabled:Tt,value:D.$.cloudRecording,onClick:bt})),hr=({selected:ut,onChange:Tt,enabledTypes:bt})=>{const Ht=wt(),en=!(0,mn.isEmpty)(Ht);(0,n.useEffect)(()=>{(0,rr.WI)((0,P.dV)())},[]);const ln=(0,c.wW)(Us);return n.createElement(n.Fragment,null,n.createElement(xt.Stack,{direction:"row",gap:2},bt.includes(D.$.grafana)&&n.createElement(Ss,{selected:ut===D.$.grafana,onClick:Tt}),bt.includes(D.$.cloudAlerting)&&n.createElement(Va,{selected:ut===D.$.cloudAlerting,onClick:Tt,disabled:!en}),bt.includes(D.$.cloudRecording)&&n.createElement(Or,{selected:ut===D.$.cloudRecording,onClick:Tt,disabled:!en})),bt.includes(D.$.grafana)&&n.createElement("small",{className:ln.meta},"Select \u201CGrafana managed\u201D unless you have a Mimir, Loki or Cortex data source with the Ruler API enabled."))},Us=ut=>({meta:t.css`
    color: ${ut.colors.text.disabled};
  `}),Qs=({editingExistingRule:ut})=>{const{enabledRuleTypes:Tt,defaultRuleType:bt}=vr(),{control:Ht,formState:{errors:en},getValues:ln,setValue:Cn,watch:xn}=(0,l.Gc)(),Tn=(0,c.wW)(or),Yn=xn("type");return n.createElement(n.Fragment,null,!ut&&n.createElement(o.g,{error:en.type?.message,invalid:!!en.type?.message,"data-testid":"alert-type-picker"},n.createElement(B.g,{render:({field:{onChange:aa}})=>n.createElement(hr,{"aria-label":"Rule type",selected:ln("type")??bt,onChange:aa,enabledTypes:Tt}),name:"type",control:Ht,rules:{required:{value:!0,message:"Please select alert type"}}})),n.createElement("div",{className:Tn.flexRow},(Yn===D.$.cloudAlerting||Yn===D.$.cloudRecording)&&n.createElement(o.g,{className:Tn.formInput,label:"Select data source",error:en.dataSourceName?.message,invalid:!!en.dataSourceName?.message,"data-testid":"datasource-picker"},n.createElement(B.g,{render:({field:{onChange:aa,ref:sa,..._n}})=>n.createElement(Ms,{..._n,onChange:La=>{Cn("location",void 0),Cn("expression",""),aa(La?.name??null)}}),name:"dataSourceName",control:Ht,rules:{required:{value:!0,message:"Please select a data source"}}}))))};function vr(){const ut=er.Vt.hasAccess(x.AccessControlAction.AlertingRuleCreate,er.Vt.hasEditPermissionInFolders),Tt=er.Vt.hasAccess(x.AccessControlAction.AlertingRuleExternalWrite,er.Vt.isEditor),bt=ut?D.$.grafana:D.$.cloudAlerting,Ht=[];return ut&&Ht.push(D.$.grafana),Tt&&Ht.push(D.$.cloudAlerting,D.$.cloudRecording),{enabledRuleTypes:Ht,defaultRuleType:bt}}const or=ut=>({formInput:t.css`
    width: 330px;
    & + & {
      margin-left: ${ut.spacing(3)};
    }
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
    align-items: flex-end;
  `});var Ea=e(62992),Er=e(99822),zs=e(97573);const Bs=ut=>{try{return JSON.stringify(ut),!1}catch{return!0}},ir=(ut,Tt)=>{if(Bs(ut))return null;if(Tt.datasourceUid!==zs.Yq)return Tt;{const bt=ut.find(Ht=>Ht.refId===Tt.model.expression);return bt?ir(ut,bt):null}};var lr=e(47471),yr=e(51935);const tr=(ut,Tt)=>{const bt=ut.find(en=>en.refId===Tt);return bt&&ir(ut,bt)},Pr={queries:[]},ws=(0,Ea.PH)("duplicateQuery"),Gt=(0,Ea.PH)("addNewDataQuery"),na=(0,Ea.PH)("setDataQueries"),ps=(0,Ea.PH)("addNewExpression"),cr=(0,Ea.PH)("removeExpression"),Hs=(0,Ea.PH)("updateExpression"),os=(0,Ea.PH)("updateExpressionRefId"),is=(0,Ea.PH)("rewireExpressions"),Za=(0,Ea.PH)("updateExpressionType"),Ze=(0,Ea.PH)("updateExpressionTimeRange"),Et=(0,Ea.PH)("updateMaxDataPoints"),Ct=(0,Ea.PH)("setRecordingRulesQueries"),Be=(0,Ea.Lq)(Pr,ut=>{ut.addCase(ws,(Tt,{payload:bt})=>{Tt.queries=we(Tt.queries,bt)}).addCase(Gt,Tt=>{const bt=(0,ie.P)();bt&&(Tt.queries=we(Tt.queries,{datasourceUid:bt.uid,model:{refId:"",datasource:{type:bt.type,uid:bt.uid}}}))}).addCase(na,(Tt,{payload:bt})=>{const Ht=Tt.queries.filter(en=>(0,Dt.j)(en.model));Tt.queries=[...bt,...Ht]}).addCase(Ct,(Tt,{payload:bt})=>{const Ht=bt.recordingRuleQueries[0],en={...Ht,expr:bt.expression,model:{expr:bt.expression,refId:Ht.model.refId}};Tt.queries=[en]}).addCase(Et,(Tt,bt)=>{Tt.queries=Tt.queries.map(Ht=>Ht.refId===bt.payload.refId?{...Ht,model:{...Ht.model,maxDataPoints:bt.payload.maxDataPoints}}:Ht)}),ut.addCase(ps,Tt=>{Tt.queries=we(Tt.queries,{datasourceUid:zs.Yq,model:lr.mV.newQuery({type:zs.Us.math,conditions:[{...yr.R,query:{params:[]}}],expression:""})})}).addCase(cr,(Tt,{payload:bt})=>{Tt.queries=Tt.queries.filter(Ht=>Ht.refId!==bt)}).addCase(Hs,(Tt,{payload:bt})=>{Tt.queries=Tt.queries.map(Ht=>{const en=tr(Tt.queries,bt.expression),ln=en?en.relativeTimeRange:(0,j.Rr)();return Ht.refId===bt.refId&&(Ht.model=bt,bt.type===zs.Us.resample&&(Ht.relativeTimeRange=ln)),Ht})}).addCase(Ze,Tt=>{const bt=Tt.queries.map(Ht=>{if(Ht.datasourceUid===zs.Yq){const en=tr(Tt.queries,Ht.model.expression),ln=en?en.relativeTimeRange:(0,j.Rr)();Ht.relativeTimeRange=ln}return Ht});Tt.queries=bt}).addCase(os,(Tt,{payload:bt})=>{const{newRefId:Ht,oldRefId:en}=bt;if((0,Se.Dr)(Tt.queries,Ht))return;const Cn=(0,Se.Ry)(Tt.queries,en,Ht);Tt.queries=Cn.map(xn=>xn.refId===en?{...xn,refId:Ht,model:{...xn.model,refId:Ht}}:xn)}).addCase(is,(Tt,{payload:bt})=>{Tt.queries=(0,Se.Ry)(Tt.queries,bt.oldRefId,bt.newRefId)}).addCase(Za,(Tt,bt)=>{Tt.queries=Tt.queries.map(Ht=>Ht.refId===bt.payload.refId?{...Ht,model:{...lr.mV.newQuery({type:bt.payload.type,conditions:[{...yr.R,query:{params:[]}}],expression:""}),refId:bt.payload.refId}}:Ht)})}),we=(ut,Tt)=>{const bt=(0,Er.Hs)(ut),Ht={...Tt,refId:bt,queryType:"",model:{...Tt.model,hide:!1,refId:bt},relativeTimeRange:Tt.relativeTimeRange??xe(Tt.model)};return[...ut,Ht]},xe=ut=>{if(!(0,Dt.j)(ut))return(0,j.Rr)()},yt=({editingExistingRule:ut,onDataChange:Tt})=>{const bt=(0,n.useRef)(new sn.v),{setValue:Ht,getValues:en,watch:ln,formState:{errors:Cn},control:xn}=(0,l.Gc)(),[Tn,Yn]=(0,n.useState)({}),aa={queries:en("queries"),panelData:{}},[{queries:sa},_n]=(0,n.useReducer)(Be,aa),[La,Ta,Ba]=ln(["type","condition","dataSourceName"]),Ps=La===D.$.grafana,Na=La===D.$.cloudRecording,Wa=La===D.$.cloudAlerting,hs=wt(),Ya=(0,n.useCallback)(()=>{bt.current.cancel()},[]),ls=(0,n.useCallback)(()=>{bt.current.run(en("queries"))},[en]);(0,n.useEffect)(()=>{Ht("queries",sa,{shouldValidate:!1})},[sa,ls,Ht]),(0,n.useEffect)(()=>{const ma=bt.current;return bt.current.get().subscribe(ms=>{Yn(ms)}),()=>ma.destroy()},[]);const qa=(0,ie.P)()===void 0,es=(0,n.useMemo)(()=>Object.values(Tn).some(ma=>ma.state===W.Gu.Loading),[Tn]),ss=(0,n.useMemo)(()=>sa.filter(ma=>!(0,Dt.j)(ma.model)),[sa]),dr=(0,n.useMemo)(()=>sa.filter(ma=>(0,Dt.j)(ma.model)),[sa]),us=sa.length===0;(0,n.useEffect)(()=>{const ma=en("condition");if(!ma||D.$.cloudRecording)return;const ms=(0,Se.Vp)(Tn[ma]?.series||[]);Tt(ms?.message||"")},[Tn,en,Tt]);const Ns=(0,n.useCallback)(ma=>{ma&&(ls(),Ht("condition",ma))},[ls,Ht]),Zs=(0,n.useCallback)((ma,ms)=>{(0,Se.Dr)(sa,ms)||(_n(os({oldRefId:ma,newRefId:ms})),Ta===ma&&Ns(ms))},[Ta,sa,Ns]),Sa=(0,n.useCallback)(ma=>{_n(na(ma)),_n(Ze()),ma.forEach((ms,Ir)=>{const Xr=sa[Ir].refId,Wo=ms.refId;Xr!==Wo&&_n(is({oldRefId:Xr,newRefId:Wo}))})},[sa]),_r=(0,n.useCallback)(ma=>{const ms=ma[0],Ir=(0,U.F)().getInstanceSettings(ms.datasourceUid);if(!Ir)throw new Error("The Data source has not been defined.");if(!(0,b.tO)(ms.model))return;const Xr=ms.model.expr;Ht("dataSourceName",Ir.name),Ht("expression",Xr),_n(Ct({recordingRuleQueries:ma,expression:Xr})),ls()},[ls,Ht]),nr=hs[0];(0,n.useEffect)(()=>{if(Yn({}),La===D.$.cloudRecording){const ma=en("expression"),Ir={refId:"A",datasourceUid:ut&&(0,U.F)().getInstanceSettings(Ba)?.uid||nr.uid,queryType:"",relativeTimeRange:(0,j.Rr)(),expr:ma,model:{refId:"A",hide:!1,expr:ma}};_n(Ct({recordingRuleQueries:[Ir],expression:ma}))}},[La,nr,ut,en,Ba]);const Tr=(0,n.useCallback)(ma=>{_n(ws(ma))},[]);return(0,n.useEffect)(()=>{if(!(0,Se.Dr)(sa,Ta)){const ma=sa.at(-1)?.refId??null;Ns(ma)}},[Ta,sa,Ns]),n.createElement(He.z,{stepNo:2,title:"Set a query and alert condition"},n.createElement(Qs,{editingExistingRule:ut}),Na&&Ba&&n.createElement(o.g,{error:Cn.expression?.message,invalid:!!Cn.expression?.message},n.createElement(Ys,{dataSourceName:Ba,queries:sa,runQueries:ls,onChangeQuery:_r,panelData:Tn})),Wa&&Ba&&n.createElement(o.g,{error:Cn.expression?.message,invalid:!!Cn.expression?.message},n.createElement(B.g,{name:"expression",render:({field:{ref:ma,...ms}})=>n.createElement(dn,{...ms,dataSourceName:Ba,showPreviewAlertsButton:!Na}),control:xn,rules:{required:{value:!0,message:"A valid expression is required"}}})),Ps&&n.createElement(xt.Stack,{direction:"column"},n.createElement(Xa,{queries:ss,expressions:dr,onRunQueries:ls,onChangeQueries:Sa,onDuplicateQuery:Tr,panelData:Tn,condition:Ta,onSetCondition:Ns}),n.createElement(nn,{queries:sa,panelData:Tn,condition:Ta,onSetCondition:Ns,onRemoveExpression:ma=>{_n(cr(ma))},onUpdateRefId:Zs,onUpdateExpressionType:(ma,ms)=>{_n(Za({refId:ma,type:ms}))},onUpdateQueryExpression:ma=>{_n(Hs(ma))}}),n.createElement(xt.Stack,{direction:"row"},n.createElement(me.u,{content:"You appear to have no compatible data sources",show:qa},n.createElement(u.zx,{type:"button",icon:"plus",onClick:()=>{_n(Gt())},variant:"secondary","aria-label":at.wl.components.QueryTab.addQuery,disabled:qa},"Add query")),i.v.expressionsEnabled&&n.createElement(u.zx,{type:"button",icon:"plus",onClick:()=>{_n(ps())},variant:"secondary"},"Add expression"),es&&n.createElement(u.zx,{icon:"fa fa-spinner",type:"button",variant:"destructive",onClick:Ya},"Cancel"),!es&&n.createElement(u.zx,{icon:"sync",type:"button",onClick:()=>ls(),disabled:us},"Preview")),us&&n.createElement(N.b,{title:"No queries or expressions have been configured",severity:"warning"},"Create at least one query or expression to be alerted on")))},Rt={message:"Recording rule name must be valid metric name. It may only contain letters, numbers, and colons. It may not contain whitespace.",value:/^[a-zA-Z_:][a-zA-Z0-9_:]*$/},Bt=()=>{const ut=(0,c.wW)(gn),{register:Tt,watch:bt,formState:{errors:Ht}}=(0,l.Gc)(),en=bt("type");return n.createElement(He.z,{stepNo:1,title:"Set an alert rule name"},n.createElement(o.g,{className:ut.formInput,label:"Rule name",description:"Name for the alert rule.",error:Ht?.name?.message,invalid:!!Ht.name?.message},n.createElement(m.I,{id:"name",...Tt("name",{required:{value:!0,message:"Must enter an alert name"},pattern:en===D.$.cloudRecording?Rt:void 0}),placeholder:"Give your alert rule a name."})))},Kt="1m",fn=({existing:ut,prefill:Tt})=>{const bt=(0,c.wW)(gn),Ht=(0,x.useDispatch)(),en=(0,E.iG)(),[ln]=(0,v.K)(),[Cn,xn]=(0,n.useState)(!1),[Tn,Yn]=(0,n.useState)(ut?.group.interval??Kt),aa=ln.returnTo??"/alerting/list",[sa,_n]=(0,n.useState)(!1),La=(0,n.useMemo)(()=>ut?(0,b.DQ)(ut):Tt?{...(0,b.uZ)(),...Tt}:{...(0,b.uZ)(),queries:(0,b.s0)(),condition:"C",...ln.defaults?JSON.parse(ln.defaults):{},type:D.$.grafana,evaluateEvery:Tn},[ut,Tt,ln,Tn]),Ta=(0,l.cI)({mode:"onSubmit",defaultValues:La,shouldFocusError:!0}),{handleSubmit:Ba,watch:Ps}=Ta,Na=Ps("type"),Wa=Ps("dataSourceName"),hs=Boolean(Na&&(Na===D.$.grafana||!!Wa)),Ya=(0,C._)(Sa=>Sa.ruleForm.saveRule)||M.oq;(0,a.x)(Sa=>Sa.unifiedAlerting.ruleForm.saveRule=M.oq);const[ls,qa]=(0,n.useState)(""),es=(Sa="")=>{qa(Sa)},ss=(Sa,_r)=>{if(ls!==""){en.error(ls);return}Ht((0,P.wy)({values:{...La,...Sa,annotations:Sa.annotations?.map(({key:nr,value:Tr})=>({key:nr.trim(),value:Tr.trim()})).filter(({key:nr,value:Tr})=>!!nr&&!!Tr)??[],labels:Sa.labels?.map(({key:nr,value:Tr})=>({key:nr.trim(),value:Tr.trim()})).filter(({key:nr})=>!!nr)??[]},existing:ut,redirectOnSave:_r?aa:void 0,initialAlertRuleName:La.name,evaluateEvery:Tn}))},dr=()=>{if(ut){const Sa=R.Zk(ut.ruleSourceName,ut.namespace,ut.group.name,ut.rule);Ht((0,P.hS)(Sa,{navigateTo:"/alerting/list"}))}},us=Sa=>{ut||(0,y.Z0)({grafana_version:i.v.buildInfo.version,org_id:h.Vt.user.orgId,user_id:h.Vt.user.id,error:Object.keys(Sa).toString()}),en.error("There are errors in the form. Please correct them and try again!")},Ns=()=>{(0,f.PN)(y.z7.cancelSavingAlertRule),ut||(0,y.Hc)({grafana_version:i.v.buildInfo.version,org_id:h.Vt.user.orgId,user_id:h.Vt.user.id})},Zs=Ps("evaluateEvery");return(0,n.useEffect)(()=>Yn(Zs),[Zs]),n.createElement(l.RV,{...Ta},n.createElement("form",{onSubmit:Sa=>Sa.preventDefault(),className:bt.form},n.createElement(r.Lh,{height:"auto",justify:"flex-end"},n.createElement(s.Link,{to:aa},n.createElement(u.zx,{variant:"secondary",disabled:Ya.loading,type:"button",fill:"outline",onClick:Ns},"Cancel")),ut?n.createElement(u.zx,{variant:"destructive",type:"button",onClick:()=>_n(!0)},"Delete"):null,Pn(Ps)&&n.createElement(u.zx,{variant:"secondary",type:"button",onClick:()=>xn(!0),disabled:Ya.loading},"Edit yaml"),n.createElement(u.zx,{variant:"primary",type:"button",onClick:Ba(Sa=>ss(Sa,!1),us),disabled:Ya.loading},Ya.loading&&n.createElement(d.$,{className:bt.buttonSpinner,inline:!0}),"Save"),n.createElement(u.zx,{variant:"primary",type:"button",onClick:Ba(Sa=>ss(Sa,!0),us),disabled:Ya.loading},Ya.loading&&n.createElement(d.$,{className:bt.buttonSpinner,inline:!0}),"Save and exit")),n.createElement("div",{className:bt.contentOuter},n.createElement(g.$,{autoHeightMin:"100%",hideHorizontalTrack:!0},n.createElement("div",{className:bt.contentInner},n.createElement(Bt,null),n.createElement(yt,{editingExistingRule:!!ut,onDataChange:es}),hs&&n.createElement(n.Fragment,null,Na===D.$.grafana?n.createElement(ht.wO,{initialFolder:La.folder,evaluateEvery:Tn,setEvaluateEvery:Yn,existing:Boolean(ut)}):n.createElement(Ae,null),n.createElement(ct,null),n.createElement(le,null)))))),sa?n.createElement(p.s,{isOpen:!0,title:"Delete rule",body:"Deleting this rule will permanently remove it. Are you sure you want to delete this rule?",confirmText:"Yes, delete",icon:"exclamation-triangle",onConfirm:dr,onDismiss:()=>_n(!1)}):null,Cn?n.createElement(tt,{onClose:()=>xn(!1)}):null)},Pn=ut=>{const[Tt,bt]=ut(["type","dataSourceName"]);return(Tt===D.$.cloudAlerting||Tt===D.$.cloudRecording)&&bt!==""},gn=ut=>({buttonSpinner:t.css`
      margin-right: ${ut.spacing(1)};
    `,form:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
    `,contentInner:t.css`
      flex: 1;
      padding: ${ut.spacing(2)};
    `,contentOuter:t.css`
      background: ${ut.colors.background.primary};
      border: 1px solid ${ut.colors.border.weak};
      border-radius: ${ut.shape.borderRadius()};
      overflow: hidden;
      flex: 1;
      margin-top: ${ut.spacing(1)};
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
    `,formInput:t.css`
      width: 275px;

      & + & {
        margin-left: ${ut.spacing(3)};
      }
    `})},16808:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>U});var t=e(9892),n=e(39493),l=e(68404),s=e(59052),i=e(86253),f=e(26418),c=e(72648),o=e(64353),m=e(46967),r=e(97379),u=e(24799),d=e(63619),g=e(31403),p=e(37190),E=e(53217);const h=({value:N,onChange:S,options:Y,className:Q,placeholder:z,width:G,custom:k,onCustomChange:j,disabled:de=!1,addLabel:ge="+ Add new","aria-label":re,getOptionLabel:ce})=>{const[ie,fe]=(0,l.useState)(k);(0,l.useEffect)(()=>{fe(k)},[k]);const Ce=(0,l.useMemo)(()=>[...Y,{value:"__add__",label:ge}],[Y,ge]),ee=(0,l.useRef)(null);return(0,l.useEffect)(()=>{ee.current&&ie&&ee.current.focus()},[ie]),ie?l.createElement(m.I,{"aria-label":re,width:G,autoFocus:!k,value:N||"",placeholder:z,className:Q,disabled:de,ref:ee,onChange:ne=>S(ne.currentTarget.value)}):l.createElement(E.Ph,{"aria-label":re,width:G,options:Ce,value:N,className:Q,placeholder:z,getOptionLabel:ce,disabled:de,onChange:ne=>{const X=ne?.value;X==="__add__"?(fe(!0),j&&j(!0),S("")):S(X)}})},a=({value:N,existingKeys:S,"aria-label":Y,...Q})=>{const z=(0,l.useMemo)(()=>Object.values(p.q6).filter(G=>!S.includes(G)).map(G=>({value:G,label:p.vY[G]})),[S]);return l.createElement(h,{"aria-label":Y,value:N,options:z,custom:!!N&&!Object.values(p.q6).includes(N),...Q})};var v=e(70197),x=e(89050),y=e(75478),C=e(39904),P=e(6554),D=e(35029),M=e(45253),b=e(14747),R=e(61744),B=e(29427);const w=B.C.injectEndpoints({endpoints:N=>({search:N.query({query:({query:S})=>{const Y=new URLSearchParams({type:"dash-db",limit:"1000",page:"1",sort:"name_sort"});return S&&Y.set("query",S),{url:`/api/search?${Y.toString()}`}}}),dashboard:N.query({query:({uid:S})=>({url:`/api/dashboards/uid/${S}`})})})});function A(N,S){return N.title&&S.title?N.title.localeCompare(S.title):N.title&&!S.title?1:!N.title&&S.title?-1:0}const I=({dashboardUid:N,panelId:S,isOpen:Y,onChange:Q,onDismiss:z})=>{const G=(0,c.wW)(F),[k,j]=(0,l.useState)(N),[de,ge]=(0,l.useState)(S),[re,ce]=(0,l.useState)(""),[ie,fe]=(0,l.useState)(""),[Ce,ee]=(0,l.useState)(""),{useSearchQuery:ne,useDashboardQuery:X}=w,{currentData:te=[],isFetching:ae}=ne({query:ie}),{currentData:_,isFetching:ve}=X({uid:k??""},{skip:!k}),Ve=(0,l.useCallback)(et=>{j(et),ge(void 0)},[]),it=_?.dashboard?.panels?.filter(et=>typeof et.id=="number"&&typeof et.type=="string")?.filter(et=>et.title?.toLowerCase().includes(Ce.toLowerCase())).sort(A)??[],rt=_?.dashboard?.panels?.find(et=>et.id.toString()===de),pe=(0,l.useMemo)(()=>te.map(et=>et.uid).indexOf(k??""),[te,k]),Ie=N&&N===k,We=pe>=0,Je=(0,l.useCallback)(et=>{const _e=pe>=0;Ie&&_e&&et?.scrollToItem(pe,"smart")},[Ie,pe]);(0,v.Z)(()=>{fe(re)},500,[re]);const He=({index:et,style:_e})=>{const Se=te[et],Fe=k===Se.uid;return l.createElement("button",{type:"button",title:Se.title,style:_e,className:(0,t.cx)(G.rowButton,{[G.rowOdd]:et%2===1,[G.rowSelected]:Fe}),onClick:()=>Ve(Se.uid)},l.createElement("div",{className:(0,t.cx)(G.dashboardTitle,G.rowButtonTitle)},Se.title),l.createElement("div",{className:G.dashboardFolder},l.createElement(C.J,{name:"folder"})," ",Se.folderTitle??"General"))},Ae=({index:et,style:_e})=>{const Se=it[et],Fe=Se.title||"<No title>",Xe=de===Se.id.toString(),Qe=Se.type==="graph"||Se.type==="timeseries";return l.createElement("button",{type:"button",style:_e,className:(0,t.cx)(G.rowButton,G.panelButton,{[G.rowOdd]:et%2===1,[G.rowSelected]:Xe}),onClick:()=>ge(Se.id.toString())},l.createElement("div",{className:G.rowButtonTitle,title:Fe},Fe),!Qe&&l.createElement(P.u,{content:"Alert tab will be disabled for this panel. It is only supported on graph and timeseries panels"},l.createElement(C.J,{name:"exclamation-triangle",className:G.warnIcon,"data-testid":"warning-icon"})))};return l.createElement(D.u,{title:"Select dashboard and panel",closeOnEscape:!0,isOpen:Y,onDismiss:z,className:G.modal,contentClassName:G.modalContent},!We&&N&&l.createElement(M.b,{title:"Current selection",severity:"info",topSpacing:0,bottomSpacing:1,className:G.modalAlert},l.createElement("div",null,"Dashboard: ",_?.dashboard.title," (",_?.dashboard.uid,") in folder"," ",_?.meta.folderTitle??"General"),Boolean(rt)&&l.createElement("div",null,"Panel: ",rt.title," (",rt.id,")")),l.createElement("div",{className:G.container},l.createElement(b.H,{value:re,onChange:ce,title:"Search dashboard",placeholder:"Search dashboard",autoFocus:!0}),l.createElement(b.H,{value:Ce,onChange:ee,title:"Search panel",placeholder:"Search panel"}),l.createElement("div",{className:G.column},ae&&l.createElement(R.u,{text:"Loading dashboards...",className:G.loadingPlaceholder}),!ae&&l.createElement(x.Z,null,({height:et,width:_e})=>l.createElement(y.t7,{ref:Je,itemSize:50,height:et,width:_e,itemCount:te.length},He))),l.createElement("div",{className:G.column},!k&&!ve&&l.createElement("div",{className:G.selectDashboardPlaceholder},l.createElement("div",null,"Select a dashboard to get a list of available panels")),ve&&l.createElement(R.u,{text:"Loading dashboard...",className:G.loadingPlaceholder}),k&&!ve&&l.createElement(x.Z,null,({width:et,height:_e})=>l.createElement(y.t7,{itemSize:32,height:_e,width:et,itemCount:it.length},Ae)))),l.createElement(D.u.ButtonRow,null,l.createElement(g.zx,{type:"button",variant:"secondary",onClick:z},"Cancel"),l.createElement(g.zx,{type:"button",variant:"primary",disabled:!(k&&de),onClick:()=>{k&&de&&Q(k,de)}},"Confirm")))},F=N=>{const S=(0,g.gN)(N);return{container:t.css`
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: min-content auto;
      gap: ${N.spacing(2)};
      flex: 1;
    `,column:t.css`
      flex: 1 1 auto;
    `,dashboardTitle:t.css`
      height: 22px;
      font-weight: ${N.typography.fontWeightBold};
    `,dashboardFolder:t.css`
      height: 20px;
      font-size: ${N.typography.bodySmall.fontSize};
      color: ${N.colors.text.secondary};
      display: flex;
      flex-direction: row;
      justify-content: flex-start;
      column-gap: ${N.spacing(1)};
      align-items: center;
    `,rowButton:t.css`
      ${S};
      padding: ${N.spacing(.5)};
      overflow: hidden;
      text-overflow: ellipsis;
      text-align: left;
      white-space: nowrap;
      cursor: pointer;
      border: 2px solid transparent;

      &:disabled {
        cursor: not-allowed;
        color: ${N.colors.text.disabled};
      }
    `,rowButtonTitle:t.css`
      text-overflow: ellipsis;
      overflow: hidden;
    `,rowSelected:t.css`
      border-color: ${N.colors.primary.border};
    `,rowOdd:t.css`
      background-color: ${N.colors.background.secondary};
    `,panelButton:t.css`
      display: flex;
      gap: ${N.spacing(1)};
      justify-content: space-between;
      align-items: center;
    `,loadingPlaceholder:t.css`
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    `,selectDashboardPlaceholder:t.css`
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      text-align: center;
      font-weight: ${N.typography.fontWeightBold};
    `,modal:t.css`
      height: 100%;
    `,modalContent:t.css`
      flex: 1;
      display: flex;
      flex-direction: column;
    `,modalAlert:t.css`
      flex-grow: 0;
    `,warnIcon:t.css`
      fill: ${N.colors.warning.main};
    `}},K=()=>{const N=(0,c.wW)(W),[S,Y]=(0,i.Z)(!1),{control:Q,register:z,watch:G,formState:{errors:k},setValue:j}=(0,s.Gc)(),de=G("annotations"),ge=(0,l.useCallback)(ne=>de.filter((X,te)=>te!==ne).map(({key:X})=>X),[de]),{fields:re,append:ce,remove:ie}=(0,s.Dq)({control:Q,name:"annotations"}),fe=de.find(ne=>ne.key===p.q6.dashboardUID)?.value,Ce=de.find(ne=>ne.key===p.q6.panelID)?.value,ee=(ne,X)=>{const te=(0,n.ZP)(de,ae=>{const _=ae.find(Ve=>Ve.key===p.q6.dashboardUID),ve=ae.find(Ve=>Ve.key===p.q6.panelID);_?_.value=ne:ae.push({key:p.q6.dashboardUID,value:ne}),ve?ve.value=X:ae.push({key:p.q6.panelID,value:X})});j("annotations",te),Y(!1)};return l.createElement(l.Fragment,null,l.createElement(o._,null,"Summary and annotations"),l.createElement("div",{className:N.flexColumn},re.map((ne,X)=>{const te=de[X]?.key?.toLocaleLowerCase().endsWith("url"),ae=te?m.I:r.K;return l.createElement("div",{key:ne.id,className:N.flexRow},l.createElement(u.g,{className:N.field,invalid:!!k.annotations?.[X]?.key?.message,error:k.annotations?.[X]?.key?.message,"data-testid":`annotation-key-${X}`},l.createElement(d.g,{name:`annotations.${X}.key`,defaultValue:ne.key,render:({field:{ref:_,...ve}})=>l.createElement(a,{...ve,"aria-label":`Annotation detail ${X+1}`,existingKeys:ge(X),width:18}),control:Q,rules:{required:{value:!!de[X]?.value,message:"Required."}}})),l.createElement(u.g,{className:(0,t.cx)(N.flexRowItemMargin,N.field),invalid:!!k.annotations?.[X]?.value?.message,error:k.annotations?.[X]?.value?.message},l.createElement(ae,{"data-testid":`annotation-value-${X}`,className:(0,t.cx)(N.annotationValueInput,{[N.textarea]:!te}),...z(`annotations.${X}.value`),placeholder:te?"https://":"Text",defaultValue:ne.value})),l.createElement(g.zx,{type:"button",className:N.flexRowItemMargin,"aria-label":"delete annotation",icon:"trash-alt",variant:"secondary",onClick:()=>ie(X)}))}),l.createElement(f.Stack,{direction:"row",gap:1},l.createElement(g.zx,{className:N.addAnnotationsButton,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{ce({key:"",value:""})}},"Add annotation"),l.createElement(g.zx,{type:"button",variant:"secondary",icon:"dashboard",onClick:()=>Y(!0)},"Set dashboard and panel")),S&&l.createElement(I,{isOpen:!0,dashboardUid:fe,panelId:Ce,onChange:ee,onDismiss:()=>Y(!1)})))},W=N=>({annotationValueInput:t.css`
    width: 394px;
  `,textarea:t.css`
    height: 76px;
  `,addAnnotationsButton:t.css`
    flex-grow: 0;
    align-self: flex-start;
    margin-left: 148px;
  `,flexColumn:t.css`
    display: flex;
    flex-direction: column;
  `,field:t.css`
    margin-bottom: ${N.spacing(.5)};
  `,flexRow:t.css`
    display: flex;
    flex-direction: row;
    justify-content: flex-start;
  `,flexRowItemMargin:t.css`
    margin-left: ${N.spacing(.5)};
  `}),U=K},56412:(Z,O,e)=>{"use strict";e.d(O,{wO:()=>X,Xr:()=>ce});var t=e(9892),n=e(68404),l=e(59052),s=e(26418),i=e(72648),f=e(24799),c=e(77117),o=e(46967),m=e(31403),r=e(63619),u=e(8944),d=e(6554),g=e(39904),p=e(41904),E=e(61627),h=e(69945),a=e(45849),v=e(20383),x=e(33950),y=e(61068),C=e(6887),P=e(82897),D=e(64353),M=e(61744),b=e(53217),R=e(77582),B=e(81168),w=e(72004),A=e(79662),I=e(63613),F=e(79658);const K=()=>{const ae=(0,i.wW)(N),_=()=>window.open("https://github.com/grafana/grafana/issues/42947","_blank");return n.createElement(s.Stack,{gap:.5},n.createElement("div",{className:ae.slashNotAllowed},"Folders with '/' character are not allowed."),n.createElement(d.u,{placement:"top",content:"Link to the Github issue",theme:"info"},n.createElement(g.J,{name:"info-circle",size:"xs",className:ae.infoIcon,onClick:_})))},W=ae=>ae.indexOf("/")!==-1;function U(ae){const{value:_}=ae,Ve={warningCondition:rt=>W(rt),warningComponent:K},it={disallowValues:!0,isAllowedValue:rt=>!W(rt)};return n.createElement(F.Es,{showRoot:!1,rootName:"",allowEmpty:!0,initialTitle:_?.title,initialFolderUid:_?.uid,accessControlMetadata:!0,...ae,permissionLevel:B.PermissionLevelString.View,customAdd:it,folderWarning:Ve})}const N=ae=>({slashNotAllowed:t.css`
    color: ${ae.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
  `,infoIcon:t.css`
    color: ${ae.colors.warning.main};
    font-size: 12px;
    margin-bottom: 2px;
    cursor: pointer;
  `});var S=e(20700);const Y=1e3,Q=ae=>{const ve=(0,h._)(Ie=>Ie.rulerRules)[a.GC];return{groupOptions:((0,E.Zo)(a.GC).find(Ie=>Ie.name===ae)?.groups??[]).filter(Ie=>Ie.rules.every(We=>(0,A.Pc)(We.rulerRule)&&Boolean(We.rulerRule.grafana_alert.provenance)===!1)).map(Ie=>({label:Ie.name,value:Ie.name,description:Ie.interval??C.E})),loading:ve?.loading}},z=ae=>{const _=(0,n.useCallback)(ve=>{const Ve=R.Vt.hasEditPermissionInFolders,it=R.Vt.hasAccessInMetadata(B.AccessControlAction.AlertingRuleCreate,ve,Ve),rt=ae&&ve.folderId===ae.id&&R.Vt.hasAccessInMetadata(B.AccessControlAction.AlertingRuleUpdate,ve,Ve);return it||rt},[ae]);return(0,n.useCallback)(ve=>ve.filter(_).filter(Ve=>!W(Ve.title??"")),[_])};function G({initialFolder:ae}){const{formState:{errors:_},watch:ve,control:Ve}=(0,l.Gc)(),it=(0,i.wW)(k),rt=(0,B.useDispatch)(),pe=z(ae),Ie=ve("folder"),We=ve("group"),[Je,He]=(0,n.useState)({label:We,title:We}),Ae=(0,n.useRef)(!0),{groupOptions:et,loading:_e}=Q(Ie?.title??"");(0,n.useEffect)(()=>He({label:We,title:We}),[We,He]),(0,n.useEffect)(()=>{rt((0,w.IA)(a.GC))},[rt]);const Se=(0,n.useCallback)(()=>{We&&!Ae.current&&Ie?.title&&He({label:"",title:""}),Ae.current=!1},[We,Ie?.title]),Fe=(0,n.useCallback)(ht=>et.includes(ft=>ft.label===ht),[et]),Xe=ht=>ht.slice(0,Y),Qe=(0,n.useCallback)(async ht=>Xe(ht?et.filter(Re=>(Re.label??"").toLowerCase().includes(ht.toLowerCase())):et),[et]),ct=(0,n.useMemo)(()=>(0,P.debounce)(Qe,300,{leading:!0}),[Qe]);return n.createElement("div",{className:it.container},n.createElement(f.g,{label:n.createElement(D._,{htmlFor:"folder",description:"Select a folder for your rule."},n.createElement(s.Stack,{gap:.5},"Folder",n.createElement(I.s,{text:"Each folder has unique folder permission. When you store multiple rules in a folder, the folder access permissions are assigned to the rules."}))),className:it.formInput,error:_.folder?.message,invalid:!!_.folder?.message,"data-testid":"folder-picker"},n.createElement(r.g,{render:({field:{ref:ht,...ft}})=>n.createElement(U,{inputId:"folder",...ft,enableCreateNew:R.Vt.hasPermission(B.AccessControlAction.FoldersCreate),enableReset:!0,filter:pe,onChange:({title:Re,uid:nt})=>{ft.onChange({title:Re,uid:nt}),Fe(Je.value??"")||Se()}}),name:"folder",rules:{required:{value:!0,message:"Select a folder"},validate:{pathSeparator:ht=>(0,S.p0)(ht.title)}}})),n.createElement(f.g,{label:"Evaluation group (interval)","data-testid":"group-picker",description:"Select a group to evaluate all rules in the same group over the same time interval.",className:it.formInput,error:_.group?.message,invalid:!!_.group?.message},n.createElement(r.g,{render:({field:{ref:ht,...ft}})=>_e?n.createElement(M.u,{text:"Loading..."}):n.createElement(b.qb,{disabled:!Ie,inputId:"group",key:`my_unique_select_key__${Je?.title??""}`,...ft,loadOptions:ct,loadingMessage:"Loading groups...",defaultOptions:et,defaultValue:Je,getOptionLabel:Re=>`${Re.label}`,placeholder:"Evaluation group name",onChange:Re=>{ft.onChange(Re.label??"")},value:Je,allowCustomValue:!0,formatCreateLabel:Re=>"+ Add new ",noOptionsMessage:"Start typing to create evaluation group"}),name:"group",control:Ve,rules:{required:{value:!0,message:"Must enter a group name"},validate:{pathSeparator:ht=>(0,S.p0)(ht)}}})))}const k=ae=>({container:t.css`
    display: flex;
    flex-direction: row;
    align-items: baseline;
    max-width: ${ae.breakpoints.values.sm}px;
    justify-content: space-between;
  `,formInput:t.css`
    width: 275px;
    & + & {
      margin-left: ${ae.spacing(3)};
    }
  `});var j=e(46063);const de=[{value:j.g0.Alerting,label:"Alerting"},{value:j.g0.NoData,label:"No Data"},{value:j.g0.OK,label:"OK"},{value:j.g0.Error,label:"Error"}],ge=({includeNoData:ae,includeError:_,...ve})=>{const Ve=(0,n.useMemo)(()=>ae?_?de:de.filter(it=>it.value!==j.g0.Error):de.filter(it=>it.value!==j.g0.NoData),[ae,_]);return n.createElement(b.Ph,{options:Ve,...ve})};var re=e(36894);const ce=10,ie=ae=>({required:{value:!0,message:"Required."},validate:_=>{if(_==="0")return!0;try{const ve=(0,v.nd)(_);if(ve===0)return!0;try{const Ve=(0,v.nd)(ae);return ve>=Ve?!0:"For duration must be greater than or equal to the evaluation interval."}catch{return!0}}catch(ve){return ve instanceof Error?ve.message:"Failed to parse duration"}}}),fe=(ae,_)=>{const{groupOptions:ve}=Q(ae);return!(0,n.useCallback)(it=>ve.some(rt=>rt.label===it),[ve])(_)},Ce=({rules:ae})=>{const{watch:_,register:ve,formState:{errors:Ve}}=(0,l.Gc)(),it=(0,i.wW)(te),rt="eval-every-input",[pe,Ie]=_(["group","folder.title"]),We=(ae&&ae[Ie]?.find(Je=>Je.name===pe)?.rules)??[];return n.createElement(f.g,{label:"Evaluation interval",description:"Applies to every rule within a group. It can overwrite the interval of an existing alert rule."},n.createElement("div",{className:it.alignInterval},n.createElement(s.Stack,{direction:"row","justify-content":"left","align-items":"baseline",gap:0},n.createElement(c.W,{htmlFor:rt,width:16,tooltip:"How often the alert will be evaluated to see if it fires"},"Evaluate every"),n.createElement(f.g,{className:it.inlineField,error:Ve.evaluateEvery?.message,invalid:!!Ve.evaluateEvery,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:rt,width:8,...ve("evaluateEvery",(0,y.MD)(We))})))))};function ee({initialFolder:ae,evaluateEvery:_,setEvaluateEvery:ve}){const Ve=(0,i.wW)(te),{watch:it,setValue:rt}=(0,l.Gc)(),[pe,Ie]=(0,n.useState)(!1),[We,Je]=it(["group","folder.title"]),Ae=(0,h._)(Re=>Re.rulerRules)[a.GC],_e=(0,E.Zo)(a.GC).find(Re=>Re.name===Je),Se=_e?.groups.find(Re=>Re.name===We),Fe=fe(Je??"",We);(0,n.useEffect)(()=>{!Fe&&Se?.interval?ve(Se.interval):(ve(C.E),rt("evaluateEvery",C.E))},[ve,Fe,rt,Se]);const Xe=(Re=!1)=>{Re||(0,p.PN)(p.z7.leavingRuleGroupEdit),Ie(!1)},Qe=()=>Ie(!0),ct=Ae?.loading||Fe||!Je||!We,ht={name:Je,rulesSource:a.GC,groups:[]},ft={name:We,interval:_,rules:[]};return n.createElement("div",null,n.createElement(G,{initialFolder:ae}),Je&&pe&&n.createElement(y.vq,{namespace:_e??ht,group:Se??ft,onClose:()=>Xe(),intervalEditOnly:!0}),Je&&We&&n.createElement("div",{className:Ve.evaluationContainer},n.createElement(s.Stack,{direction:"column",gap:0},n.createElement("div",{className:Ve.marginTop},Fe&&We?n.createElement(Ce,{rules:Ae?.result}):n.createElement(s.Stack,{direction:"column",gap:1},n.createElement("div",{className:Ve.evaluateLabel},"Alert rules in the "," ",n.createElement("span",{className:Ve.bold},We)," group are evaluated every"," ",n.createElement("span",{className:Ve.bold},_),"."),!Fe&&n.createElement("div",null,"Evaluation group interval applies to every rule within a group. It overwrites intervals defined for existing alert rules."))),n.createElement(s.Stack,{direction:"row","justify-content":"right","align-items":"center"},!Fe&&n.createElement("div",{className:Ve.marginTop},n.createElement(m.zx,{icon:"edit",type:"button",variant:"secondary",disabled:ct,onClick:Qe},n.createElement("span",null,"Edit evaluation group")))))))}function ne({evaluateEvery:ae}){const _=(0,i.wW)(te),{register:ve,formState:{errors:Ve}}=(0,l.Gc)(),it="eval-for-input";return n.createElement(s.Stack,{direction:"row","justify-content":"flex-start","align-items":"flex-start"},n.createElement(c.W,{htmlFor:it,width:7,tooltip:'Once the condition is breached, the alert goes into pending state. If the alert is pending longer than the "for" value, it becomes a firing alert.'},"for"),n.createElement(f.g,{className:_.inlineField,error:Ve.evaluateFor?.message,invalid:!!Ve.evaluateFor?.message,validationMessageHorizontalOverflow:!0},n.createElement(o.I,{id:it,width:8,...ve("evaluateFor",ie(ae))})))}function X({initialFolder:ae,evaluateEvery:_,setEvaluateEvery:ve,existing:Ve}){const it=(0,i.wW)(te),[rt,pe]=(0,n.useState)(!1),{watch:Ie,setValue:We}=(0,l.Gc)(),Je=Ie("isPaused");return n.createElement(re.z,{stepNo:3,title:"Alert evaluation behavior"},n.createElement(s.Stack,{direction:"column","justify-content":"flex-start","align-items":"flex-start"},n.createElement(ee,{initialFolder:ae,setEvaluateEvery:ve,evaluateEvery:_}),n.createElement(ne,{evaluateEvery:_}),Ve&&n.createElement(f.g,{htmlFor:"pause-alert-switch"},n.createElement(r.g,{render:()=>n.createElement(s.Stack,{gap:1,direction:"row",alignItems:"center"},n.createElement(u.r,{id:"pause-alert",onChange:He=>{We("isPaused",He.currentTarget.checked)},value:Boolean(Je)}),n.createElement("label",{htmlFor:"pause-alert",className:it.switchLabel},"Pause evaluation",n.createElement(d.u,{placement:"top",content:"Turn on to pause evaluation for this alert rule.",theme:"info"},n.createElement(g.J,{tabIndex:0,name:"info-circle",size:"sm",className:it.infoIcon})))),name:"isPaused"}))),n.createElement(x.U,{isCollapsed:!rt,onToggle:He=>pe(!He),text:"Configure no data and error handling",className:it.collapseToggle}),rt&&n.createElement(n.Fragment,null,n.createElement(f.g,{htmlFor:"no-data-state-input",label:"Alert state if no data or all values are null"},n.createElement(r.g,{render:({field:{onChange:He,ref:Ae,...et}})=>n.createElement(ge,{...et,inputId:"no-data-state-input",width:42,includeNoData:!0,includeError:!1,onChange:_e=>He(_e?.value)}),name:"noDataState"})),n.createElement(f.g,{htmlFor:"exec-err-state-input",label:"Alert state if execution error or timeout"},n.createElement(r.g,{render:({field:{onChange:He,ref:Ae,...et}})=>n.createElement(ge,{...et,inputId:"exec-err-state-input",width:42,includeNoData:!1,includeError:!0,onChange:_e=>He(_e?.value)}),name:"execErrState"}))))}const te=ae=>({inlineField:t.css`
    margin-bottom: 0;
  `,collapseToggle:t.css`
    margin: ${ae.spacing(2,0,2,-1)};
  `,evaluateLabel:t.css`
    margin-right: ${ae.spacing(1)};
  `,evaluationContainer:t.css`
    background-color: ${ae.colors.background.secondary};
    padding: ${ae.spacing(2)};
    max-width: ${ae.breakpoints.values.sm}px;
    font-size: ${ae.typography.size.sm};
  `,intervalChangedLabel:t.css`
    margin-bottom: ${ae.spacing(1)};
  `,warningIcon:t.css`
    justify-self: center;
    margin-right: ${ae.spacing(1)};
    color: ${ae.colors.warning.text};
  `,infoIcon:t.css`
    margin-left: 10px;
  `,warningMessage:t.css`
    color: ${ae.colors.warning.text};
  `,bold:t.css`
    font-weight: bold;
  `,alignInterval:t.css`
    margin-top: ${ae.spacing(1)};
    margin-left: -${ae.spacing(1)};
  `,marginTop:t.css`
    margin-top: ${ae.spacing(1)};
  `,switchLabel:(0,t.css)(`
    color: ${ae.colors.text.primary},
    cursor: 'pointer',
    fontSize: ${ae.typography.bodySmall.fontSize},
  `)})},19191:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>W});var t=e(9892),n=e(82897),l=e(68404),s=e(59052),i=e(26418),f=e(31403),c=e(72648),o=e(61744),m=e(24799),r=e(77117),u=e(46967),d=e(64353),g=e(6554),p=e(39904),E=e(81168),h=e(69945),a=e(72004),v=e(14736),x=e(53217);const y=(0,v.c)({ignoreCase:!1});function C(U,N){return y({label:U.label??"",value:U.value??"",data:{}},N)}const P=(U,N,S)=>{const Y=S.some(z=>z.label===U),Q=U.trim().length;return!Boolean(Y)&&Boolean(Q)},M=l.forwardRef(function({onChange:N,options:S,defaultValue:Y,type:Q,onOpenMenu:z=()=>{}},G){return l.createElement("div",{ref:G},l.createElement(m.g,{disabled:!1,"data-testid":`alertlabel-${Q}-picker`},l.createElement(x.Ph,{placeholder:`Choose ${Q}`,width:29,className:"ds-picker select-container",backspaceRemovesValue:!1,onChange:N,onOpenMenu:z,filterOption:C,isValidNewOption:P,options:S,maxMenuHeight:500,noOptionsMessage:"No labels found",defaultValue:Y,allowCustomValue:!0})))}),b=U=>{const N=(0,E.useDispatch)();(0,l.useEffect)(()=>{N((0,a.IA)(U))},[N,U]);const Y=(0,h._)(k=>k.rulerRules)[U],Q=Y?.result||{},z=(0,n.compact)((0,n.flattenDeep)(Object.keys(Q).map(k=>Q[k].map(j=>j.rules.map(de=>de.labels))))),G={};return z.forEach(k=>{Object.entries(k).forEach(([j,de])=>{G[j]=[...new Set([...G[j]||[],de])]})}),{loading:Y?.loading,labelsByKey:G}};function R(U=[]){return U.map(N=>({label:N,value:N}))}const B=({remove:U,className:N,index:S})=>l.createElement(f.zx,{className:N,"aria-label":"delete label",icon:"trash-alt","data-testid":`delete-label-${S}`,variant:"secondary",onClick:()=>{U(S)}}),w=({append:U,className:N})=>l.createElement(f.zx,{className:N,icon:"plus-circle",type:"button",variant:"secondary",onClick:()=>{U({key:"",value:""})}},"Add label"),A=({dataSourceName:U})=>{const N=(0,c.wW)(K),{register:S,control:Y,watch:Q,formState:{errors:z},setValue:G}=(0,s.Gc)(),k=Q("labels"),{fields:j,remove:de,append:ge}=(0,s.Dq)({control:Y,name:"labels"}),{loading:re,labelsByKey:ce}=b(U),[ie,fe]=(0,l.useState)(""),Ce=(0,l.useMemo)(()=>R(Object.keys(ce)),[ce]),ee=(0,l.useCallback)(X=>R(ce[X]),[ce]),ne=(0,l.useMemo)(()=>ee(ie),[ie,ee]);return l.createElement(l.Fragment,null,re&&l.createElement(o.u,{text:"Loading"}),!re&&l.createElement(l.Fragment,null,j.map((X,te)=>l.createElement("div",{key:X.id},l.createElement("div",{className:(0,t.cx)(N.flexRow,N.centerAlignRow)},l.createElement(m.g,{className:N.labelInput,invalid:Boolean(z.labels?.[te]?.key?.message),error:z.labels?.[te]?.key?.message,"data-testid":`label-key-${te}`},l.createElement(M,{...S(`labels.${te}.key`,{required:{value:Boolean(k[te]?.value),message:"Required."}}),defaultValue:X.key?{label:X.key,value:X.key}:void 0,options:Ce,onChange:ae=>{G(`labels.${te}.key`,ae.value),fe(ae.value)},type:"key"})),l.createElement(r.W,{className:N.equalSign},"="),l.createElement(m.g,{className:N.labelInput,invalid:Boolean(z.labels?.[te]?.value?.message),error:z.labels?.[te]?.value?.message,"data-testid":`label-value-${te}`},l.createElement(M,{...S(`labels.${te}.value`,{required:{value:Boolean(k[te]?.key),message:"Required."}}),defaultValue:X.value?{label:X.value,value:X.value}:void 0,options:ne,onChange:ae=>{G(`labels.${te}.value`,ae.value)},onOpenMenu:()=>{fe(k[te].key)},type:"value"})),l.createElement(B,{className:N.deleteLabelButton,index:te,remove:de})))),l.createElement(w,{className:N.addLabelButton,append:ge})))},I=()=>{const U=(0,c.wW)(K),{register:N,control:S,watch:Y,formState:{errors:Q}}=(0,s.Gc)(),z=Y("labels"),{fields:G,remove:k,append:j}=(0,s.Dq)({control:S,name:"labels"});return l.createElement(l.Fragment,null,G.map((de,ge)=>l.createElement("div",{key:de.id},l.createElement("div",{className:(0,t.cx)(U.flexRow,U.centerAlignRow),"data-testid":"alertlabel-input-wrapper"},l.createElement(m.g,{className:U.labelInput,invalid:!!Q.labels?.[ge]?.key?.message,error:Q.labels?.[ge]?.key?.message},l.createElement(u.I,{...N(`labels.${ge}.key`,{required:{value:!!z[ge]?.value,message:"Required."}}),placeholder:"key","data-testid":`label-key-${ge}`,defaultValue:de.key})),l.createElement(r.W,{className:U.equalSign},"="),l.createElement(m.g,{className:U.labelInput,invalid:!!Q.labels?.[ge]?.value?.message,error:Q.labels?.[ge]?.value?.message},l.createElement(u.I,{...N(`labels.${ge}.value`,{required:{value:!!z[ge]?.key,message:"Required."}}),placeholder:"value","data-testid":`label-value-${ge}`,defaultValue:de.value})),l.createElement(B,{className:U.deleteLabelButton,index:ge,remove:k})))),l.createElement(w,{className:U.addLabelButton,append:j}))},F=({className:U,dataSourceName:N})=>{const S=(0,c.wW)(K);return l.createElement("div",{className:(0,t.cx)(U,S.wrapper)},l.createElement(d._,null,l.createElement(i.Stack,{gap:.5},l.createElement("span",null,"Custom Labels"),l.createElement(g.u,{content:l.createElement("div",null,"The dropdown only displays labels that you have previously used for alerts. Select a label from the dropdown or type in a new one.")},l.createElement(p.J,{className:S.icon,name:"info-circle",size:"sm"})))),l.createElement(l.Fragment,null,l.createElement("div",{className:S.flexRow},l.createElement(r.W,{width:18},"Labels"),l.createElement("div",{className:S.flexColumn},N&&l.createElement(A,{dataSourceName:N}),!N&&l.createElement(I,null)))))},K=U=>({icon:t.css`
      margin-right: ${U.spacing(.5)};
    `,wrapper:t.css`
      margin-bottom: ${U.spacing(4)};
    `,flexColumn:t.css`
      display: flex;
      flex-direction: column;
    `,flexRow:t.css`
      display: flex;
      flex-direction: row;
      justify-content: flex-start;

      & + button {
        margin-left: ${U.spacing(.5)};
      }
    `,deleteLabelButton:t.css`
      margin-left: ${U.spacing(.5)};
      align-self: flex-start;
    `,addLabelButton:t.css`
      flex-grow: 0;
      align-self: flex-start;
    `,centerAlignRow:t.css`
      align-items: baseline;
    `,equalSign:t.css`
      align-self: flex-start;
      width: 28px;
      justify-content: center;
      margin-left: ${U.spacing(.5)};
    `,labelInput:t.css`
      width: 175px;
      margin-bottom: ${U.spacing(1)};
      & + & {
        margin-left: ${U.spacing(1)};
      }
    `}),W=F},36894:(Z,O,e)=>{"use strict";e.d(O,{z:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(13393);const i=({title:c,stepNo:o,children:m,description:r})=>{const u=(0,l.wW)(f);return n.createElement("div",{className:u.parent},n.createElement("div",null,n.createElement("span",{className:u.stepNo},o)),n.createElement("div",{className:u.content},n.createElement(s.C,{label:c,className:u.fieldset},r&&n.createElement("p",{className:u.description},r),m)))},f=c=>({fieldset:t.css`
    legend {
      font-size: 16px;
      padding-top: ${c.spacing(.5)};
    }
  `,parent:t.css`
    display: flex;
    flex-direction: row;
    max-width: ${c.breakpoints.values.xl};
    & + & {
      margin-top: ${c.spacing(4)};
    }
  `,description:t.css`
    margin-top: -${c.spacing(2)};
    color: ${c.colors.text.secondary};
  `,stepNo:t.css`
    display: inline-block;
    width: ${c.spacing(4)};
    height: ${c.spacing(4)};
    line-height: ${c.spacing(4)};
    border-radius: 100%;
    text-align: center;
    color: ${c.colors.text.maxContrast};
    background-color: ${c.colors.background.canvas};
    font-size: ${c.typography.size.lg};
    margin-right: ${c.spacing(2)};
  `,content:t.css`
    flex: 1;
  `})},20700:(Z,O,e)=>{"use strict";e.d(O,{p0:()=>C,Vp:()=>P,Fu:()=>M,Ry:()=>v,Dr:()=>y,Yq:()=>D});var t=e(34472),n=e(24177),l=e(40538),s=e(47694),i=e(67162),f=e(75e3),c=e(97573),o=e(82897),m=e(58635),r=e(28630);const u=(0,m.Z)(d,(R,B)=>a(R[0])===a(B[0]));function d(R){const B=new r.kJ,w=R.map(A=>A.refId);return B.createNodes(w),R.forEach(A=>{const I=A.refId;((0,f.j)(A.model)&&A.model.type==="math"?g(A.model.expression??""):[A.model.expression]).forEach(W=>{I&&W&&!(I===W)&&B.link(W,I)})}),B}function g(R){const B=new RegExp(/\$\{(?<var>[a-zA-Z0-9_ ]+?)\}/gm),w=new RegExp(/\$(?<var>[a-zA-Z0-9_]+)/gm),A=Array.from(R.matchAll(B)).map(F=>F.groups?.var),I=Array.from(R.matchAll(w)).map(F=>F.groups?.var);return(0,o.compact)((0,o.uniq)([...A,...I]))}const p=(0,o.memoize)(E,(R,B)=>R+h(B));function E(R,B){const w=B.getNode(R);let A=[];function I(F){const K=F.inputEdges;K.length>0?K.forEach(W=>{W.inputNode&&I(W.inputNode)}):A?.push(F)}return I(w),A.map(F=>F.name)}function h(R){return Object.keys(R.nodes).map(B=>{const w=R.nodes[B];let A=w.outputEdges.map(F=>F.outputNode?.name).join(", "),I=w.inputEdges.map(F=>F.inputNode?.name).join(", ");return`${w.name}:${A}:${I}`}).join(" ")}function a(R){return R.map(B=>{const w=(0,f.j)(B.model)?B.model.type:B.queryType;return B.refId+(B.model.expression??"")+w}).join()}function v(R,B,w){return R.map(A=>{if(B===w||!(0,f.j)(A.model))return A;const I=A.model.type==="math",F=A.model.type==="reduce",K=A.model.type==="resample",W=A.model.type==="classic_conditions",U=A.model.type==="threshold";if(I)return{...A,model:{...A.model,expression:x(A.model.expression??"",B,w)}};if(K||F||U){const N=A.model.expression===B;return{...A,model:{...A.model,expression:N?w:A.model.expression}}}if(W){const N=A.model.conditions?.map(S=>({...S,query:{...S.query,params:S.query.params.map(Y=>Y===B?w:Y)}}));return{...A,model:{...A.model,conditions:N}}}return A})}function x(R,B,w){const A=new RegExp("(\\$"+B+"\\b)|(\\${"+B+"})","gm"),I="${"+w+"}";return R.replace(A,I)}function y(R,B){return R.find(w=>w.refId===B)!==void 0}function C(R){return R.includes("/")||R.includes("\\")?'Cannot contain "/" or "\\" characters':!0}function P(R){if(R.length===0)return;const B=(0,t.xI)(R);let w;return B&&(w=new Error("You cannot use time series data as an alert condition, consider adding a reduce expression.")),w}function D(R){const w=(R[0]?.meta?.notices??[]).find(A=>A.severity==="warning")?.text;return w?new Error(w):void 0}function M(R){const B={},w=[c.Us.threshold,c.Us.classic];for(const F of R){if(!(0,f.j)(F.model)||!w.includes(F.model.type)||!Array.isArray(F.model.conditions))continue;const K=F.model.conditions.some(b);F.model.conditions.forEach((W,U)=>{const N=W.evaluator.params,S=W.query.params[0]??F.model.expression,Y=b(W);try{const Q=u(R),z=p(S,Q);R.filter(k=>z.includes(k.refId)).forEach(k=>{const j=k.refId,de=!(0,f.j)(k?.model),ge=Boolean(de&&j);j&&!B[j]&&(B[j]={config:{mode:n.H.Absolute,steps:[]},mode:l.i3.Line}),j&&ge&&!Y&&!K?A(j,N[0]):j&&ge&&Y&&(I(j,N,W.evaluator.type),B[j].mode=l.i3.LineAndArea)})}catch(Q){console.error("Failed to parse thresholds",Q);return}})}function A(F,K){B[F].config.steps.push({value:-1/0,color:"transparent"},{value:K,color:s.vc.theme2.colors.error.main})}function I(F,K,W){W===i.$.IsWithinRange&&B[F].config.steps.push({value:-1/0,color:"transparent"},{value:K[0],color:s.vc.theme2.colors.error.main},{value:K[1],color:s.vc.theme2.colors.error.main},{value:K[1],color:"transparent"}),W===i.$.IsOutsideRange&&B[F].config.steps.push({value:-1/0,color:s.vc.theme2.colors.error.main},{value:K[0],color:s.vc.theme2.colors.error.main},{value:K[0],color:"transparent"},{value:K[1],color:s.vc.theme2.colors.error.main}),B[F].config.steps.sort((U,N)=>U.value-N.value)}return B}function b(R){return R.evaluator.type===i.$.IsWithinRange||R.evaluator.type===i.$.IsOutsideRange}},48563:(Z,O,e)=>{"use strict";e.d(O,{o:()=>u});var t=e(68404),n=e(46519),l=e(79662),s=e(52694),i=e(53731),f=e(99085),c=e(78543),o=e(80498);const m=({instance:g})=>{const p=(0,f.$9)(g.annotations),E=(0,f.XW)(p);return t.createElement("div",null,g.value&&t.createElement(o.C,{label:"Value",horizontal:!0},g.value),p.map(([h,a])=>t.createElement(c.a,{key:h,annotationKey:h,value:a,valueLink:E.get(h)})))};var r=e(45608);const u=({instances:g,pagination:p,footerRow:E})=>{const h=(0,t.useMemo)(()=>g.map(a=>({data:a,id:(0,l.pB)(a)})),[g]);return t.createElement(i.t,{cols:d,isExpandable:!0,items:h,renderExpandedContent:({data:a})=>t.createElement(m,{instance:a}),pagination:p,footerRow:E})},d=[{id:"state",label:"State",renderCell:({data:{state:g}})=>t.createElement(r.l,{state:g}),size:"80px"},{id:"labels",label:"Labels",renderCell:({data:{labels:g}})=>t.createElement(s.s,{labels:g})},{id:"created",label:"Created",renderCell:({data:{activeAt:g}})=>t.createElement(t.Fragment,null,g.startsWith("0001")?"-":(0,n.CQ)(g).format("YYYY-MM-DD HH:mm:ss")),size:"150px"}]},45608:(Z,O,e)=>{"use strict";e.d(O,{l:()=>s});var t=e(68404),n=e(79662),l=e(79453);const s=({state:i,isPaused:f=!1,size:c="md"})=>t.createElement(l.i,{state:(0,n.Aq)(i),size:c},(0,n.SS)(i)," ",f?" (Paused)":"")},61068:(Z,O,e)=>{"use strict";e.d(O,{vq:()=>Q,MD:()=>Y,qd:()=>K,Bg:()=>N});var t=e(9892),n=e(82897),l=e(68404),s=e(59052),i=e(26418),f=e(19985),c=e(72648),o=e(35029),m=e(24799),r=e(64353),u=e(46967),d=e(31403),g=e(60499),p=e(40014),E=e(81168),h=e(69945),a=e(72004),v=e(82963),x=e(45849),y=e(46818),C=e(79662),P=e(20383),D=e(53731),M=e(63613),b=e(35645),R=e(45253);const B=()=>l.createElement(R.b,{severity:"warning",title:"Global evalutation interval limit exceeded"},"A minimum evaluation interval of ",l.createElement("strong",null,b.v.unifiedAlerting.minInterval)," has been configured in Grafana.",l.createElement("br",null),"Please contact the administrator to configure a lower interval.");var w=e(56412);const A=10;function I({message:G,error:k}){return k?l.createElement(f.C,{color:"red",icon:"exclamation-circle",text:"Error",tooltip:G}):l.createElement(f.C,{color:"orange",icon:"exclamation-triangle",text:"Unknown",tooltip:G})}const F=(G,k)=>{const j=N(k),de=N(G);return de===0&&j!==0?1:j===0||de/j<1?0:Math.ceil(de/j)+1},K=(G,k)=>{const j={alertName:"",forDuration:"0s",evaluationsToFire:0};return(0,C.Pc)(G)?{alertName:G.grafana_alert.title,forDuration:G.for,evaluationsToFire:F(G.for,k)}:(0,C.cG)(G)?{alertName:G.alert,forDuration:G.for??"1m",evaluationsToFire:F(G.for??"1m",k)}:j},W=G=>{try{const k=(0,P.nd)(G);return!(k<w.Xr*1e3||k%(w.Xr*1e3)!==0)}catch{return!1}},U=(G,k,j)=>(G?G[j]:[])?.find(ge=>ge.name===k),N=G=>{try{return(0,P.nd)(G)}catch{return 0}},S=({rulesWithoutRecordingRules:G})=>{const k=(0,c.wW)(z),{watch:j}=(0,s.Gc)(),de=j("groupInterval"),ge=!Boolean(de),re=G.slice().map((ie,fe)=>({id:fe,data:K(ie,de)})).sort((ie,fe)=>N(ie.data.forDuration)-N(fe.data.forDuration)),ce=(0,l.useMemo)(()=>[{id:"alertName",label:"Alert",renderCell:({data:{alertName:ie}})=>l.createElement(l.Fragment,null,ie),size:"330px"},{id:"for",label:"For",renderCell:({data:{forDuration:ie}})=>l.createElement(l.Fragment,null,ie),size:.5},{id:"numberEvaluations",label:"#Eval",renderCell:({data:{evaluationsToFire:ie}})=>ge?l.createElement(I,{message:"#Evaluations not available."}):W(de)?ie===0?l.createElement(I,{message:"Invalid 'For' value: it should be greater or equal to evaluation interval.",error:!0}):l.createElement(l.Fragment,null,ie):l.createElement(I,{message:"Invalid evaluation interval format",error:!0}),size:.4}],[de,ge]);return l.createElement("div",{className:k.tableWrapper},l.createElement(D.t,{items:re,cols:ce,pagination:{itemsPerPage:A}}))},Y=G=>({required:{value:!0,message:"Required."},validate:k=>{try{const j=(0,P.nd)(k);return j<w.Xr*1e3?`Cannot be less than ${w.Xr} seconds.`:j%(w.Xr*1e3)!==0?`Must be a multiple of ${w.Xr} seconds.`:(0,a.iH)(G,k).length===0?!0:"Invalid evaluation interval. Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."}catch(j){return j instanceof Error?j.message:"Failed to parse duration"}}});function Q(G){const{namespace:k,group:j,onClose:de,intervalEditOnly:ge}=G,re=(0,c.wW)(z),ce=(0,E.useDispatch)(),{loading:ie,error:fe,dispatched:Ce}=(0,h._)(et=>et.updateLotexNamespaceAndGroup)??y.oq,ee=(0,g.iG)(),ne=(0,l.useMemo)(()=>({namespaceName:k.name,groupName:j.name,groupInterval:j.interval??""}),[k,j]),X=(0,x.EG)(k.rulesSource),te=X===x.GC,ae=te?"Folder":"Namespace";(0,l.useEffect)(()=>{Ce&&!ie&&!fe&&de(!0)},[Ce,ie,de,fe]),(0,p.x)(et=>et.unifiedAlerting.updateLotexNamespaceAndGroup=y.oq);const _=et=>{ce((0,a.hv)({rulesSourceName:X,groupName:j.name,newGroupName:et.groupName,namespaceName:k.name,newNamespaceName:et.namespaceName,groupInterval:et.groupInterval||void 0}))},ve=(0,s.cI)({mode:"onBlur",defaultValues:ne,shouldFocusError:!0}),{handleSubmit:Ve,register:it,watch:rt,formState:{isDirty:pe,errors:Ie}}=ve,We=()=>{ee.error("There are errors in the form. Correct the errors and retry.")},Je=(0,n.compact)(j.rules.map(et=>et.rulerRule).filter(et=>!(0,C.yF)(et))),He=Je.length>0,Ae=ge||te?"Edit evaluation group":"Edit namespace or evaluation group";return l.createElement(o.u,{className:re.modal,isOpen:!0,title:Ae,onDismiss:de,onClickBackdrop:de},l.createElement(s.RV,{...ve},l.createElement("form",{onSubmit:et=>et.preventDefault(),key:JSON.stringify(ne)},l.createElement(l.Fragment,null,l.createElement(m.g,{label:l.createElement(r._,{htmlFor:"namespaceName",description:!te&&"Change the current namespace name. Moving groups between namespaces is not supported"},ae),invalid:!!Ie.namespaceName,error:Ie.namespaceName?.message},l.createElement(i.Stack,{gap:1,direction:"row"},l.createElement(u.I,{id:"namespaceName",readOnly:ge||te,...it("namespaceName",{required:"Namespace name is required."}),className:re.formInput}),te&&G.folderUrl&&l.createElement(d.Qj,{href:G.folderUrl,title:"Go to folder",variant:"secondary",icon:"folder-open",target:"_blank"}))),l.createElement(m.g,{label:l.createElement(r._,{htmlFor:"groupName",description:`Evaluation group name needs to be unique within a ${ae.toLocaleLowerCase()}`},"Evaluation group name"),invalid:!!Ie.groupName,error:Ie.groupName?.message},l.createElement(u.I,{id:"groupName",readOnly:ge,...it("groupName",{required:"Evaluation group name is required."})})),l.createElement(m.g,{label:l.createElement(r._,{htmlFor:"groupInterval",description:"Evaluation interval should be smaller or equal to 'For' values for existing rules in this group."},l.createElement(i.Stack,{gap:.5},"Rule group evaluation interval",l.createElement(M.s,{text:"How frequently to evaluate rules."}))),invalid:!!Ie.groupInterval,error:Ie.groupInterval?.message},l.createElement(u.I,{id:"groupInterval",placeholder:"1m",...it("groupInterval",Y(Je))})),(0,v.f)(rt("groupInterval")).exceedsLimit&&l.createElement(B,null),l.createElement("div",{className:re.modalButtons},l.createElement(o.u.ButtonRow,null,l.createElement(d.zx,{variant:"secondary",type:"button",disabled:ie,onClick:()=>de(!1),fill:"outline"},"Close"),l.createElement(d.zx,{type:"button",disabled:!pe||ie,onClick:Ve(et=>_(et),We)},ie?"Saving...":"Save changes"))),!He&&l.createElement("div",null,"This group does not contain alert rules."),He&&l.createElement(l.Fragment,null,l.createElement("div",null,"List of rules that belong to this group"),l.createElement("div",{className:re.evalRequiredLabel},"#Eval column represents the number of evaluations needed before alert starts firing."),l.createElement(S,{rulesWithoutRecordingRules:Je}))))))}const z=G=>({modal:t.css`
    max-width: 560px;
  `,modalButtons:t.css`
    top: -24px;
    position: relative;
  `,formInput:t.css`
    flex: 1;
  `,tableWrapper:t.css`
    margin-top: ${G.spacing(2)};
    margin-bottom: ${G.spacing(2)};
    height: 100%;
  `,evalRequiredLabel:t.css`
    font-size: ${G.typography.bodySmall.fontSize};
  `})},69369:(Z,O,e)=>{"use strict";e.d(O,{S:()=>s});var t=e(68404),n=e(86647),l=e(22069);function s(i){return{allDataSourcesAvailable:(0,t.useMemo)(()=>i.filter(c=>!(0,l.Pr)(c.datasourceUid)).every(c=>{const o=(0,n.F)().getInstanceSettings(c.datasourceUid);return Boolean(o)}),[i])}}},61627:(Z,O,e)=>{"use strict";e.d(O,{Kd:()=>o,Zo:()=>c});var t=e(82897),n=e.n(t),l=e(68404),s=e(45849),i=e(79662),f=e(69945);function c(a){const v=(0,f._)(P=>P.promRules),x=(0,f._)(P=>P.rulerRules),y=(0,l.useRef)({}),C=(0,l.useMemo)(()=>{if(a){const P=(0,s.o_)(a);if(!P)throw new Error(`Unknown rules source: ${a}`);return[P]}return(0,s.h_)()},[a]);return(0,l.useMemo)(()=>C.map(P=>{const D=(0,s.jq)(P)?P.name:P,M=v[D]?.result,b=x[D]?.result,R=y.current[D];if(R&&R.promRules===M&&R.rulerRules===b)return R.result;const B={};Object.entries(b||{}).forEach(([A,I])=>{const F={rulesSource:P,name:A,groups:[]};B[A]=F,r(F,I)}),M?.forEach(({name:A,groups:I})=>{const F=B[A]=B[A]||{rulesSource:P,name:A,groups:[]};u(F,I)});const w=Object.values(B);return y.current[D]={promRules:M,rulerRules:b,result:w},w}).flat(),[v,x,C])}function o(a){return a.map(v=>{const x={...v,groups:[]};return x.groups.push({name:"default",rules:m(v.groups.flatMap(y=>y.rules))}),x})}function m(a){return a.sort((v,x)=>v.name.localeCompare(x.name))}function r(a,v=[]){a.groups=v.map(x=>{const y={name:x.name,interval:x.interval,source_tenants:x.source_tenants,rules:[]};return y.rules=x.rules.map(C=>g(C,a,y)),y})}function u(a,v){const x=new Map;a.groups.forEach(y=>x.set(y.name,y)),v.forEach(y=>{let C=x.get(y.name);C||(C={name:y.name,rules:[]},a.groups.push(C),x.set(y.name,C));const P=new Map;C.rules.forEach(D=>{const M=P.get(D.name);M?M.push(D):P.set(D.name,[D])}),(y.rules??[]).forEach(D=>{const M=p(D,P,a.rulesSource);M?M.promRule=D:C.rules.push(d(D,a,C))})})}function d(a,v,x){return{name:a.name,query:a.query,labels:a.labels||{},annotations:(0,i.x_)(a)?a.annotations||{}:{},promRule:a,namespace:v,group:x}}function g(a,v,x){return(0,i.cG)(a)?{name:a.alert,query:a.expr,labels:a.labels||{},annotations:a.annotations||{},rulerRule:a,namespace:v,group:x}:(0,i.yF)(a)?{name:a.record,query:a.expr,labels:a.labels||{},annotations:{},rulerRule:a,namespace:v,group:x}:{name:a.grafana_alert.title,query:"",labels:a.labels||{},annotations:a.annotations||{},rulerRule:a,namespace:v,group:x}}function p(a,v,x){const y=v.get(a.name);if(!y)return;if((0,s.HY)(x))return y[0];const C=y.find(D=>!D.promRule&&E(D,a,!0));if(C)return C;const P=y.find(D=>!D.promRule&&E(D,a,!1));if(P)return P}function E(a,v,x=!0){return a.name===v.name?(0,t.isEqual)([x?h(a.query):"",a.labels,a.annotations],[x?h(v.query):"",v.labels||{},(0,i.x_)(v)?v.annotations||{}:{}]):!1}function h(a){return a.length>1&&a[0]==="("&&a[a.length-1]===")"&&(a=a.slice(1,-1)),a=a.replace(/\s|\n/g,""),a.split("").sort().join("")}},25724:(Z,O,e)=>{"use strict";e.d(O,{h:()=>s});var t=e(82897),n=e.n(t),l=e(68404);function s(i,f=1,c){const[o,m]=(0,l.useState)(f),r=(0,l.useMemo)(()=>(0,t.chunk)(i,c),[i,c]),u=r.length,d=r[o-1]??[],g=(o-1)*c+1,p=(0,t.clamp)(o*c,i.length),E=(0,l.useCallback)(v=>{m((0,t.clamp)(v,1,r.length))},[m,r]),h=(0,l.useCallback)(()=>E(o+1),[o,E]),a=(0,l.useCallback)(()=>E(o-1),[o,E]);return(0,l.useEffect)(()=>m(1),[u]),{page:o,onPageChange:E,numberOfPages:u,pageItems:d,pageStart:g,pageEnd:p,nextPage:h,previousPage:a}}},69945:(Z,O,e)=>{"use strict";e.d(O,{_:()=>n});var t=e(81168);function n(l,s){return(0,t.useSelector)(i=>l(i.unifiedAlerting),s)}},734:(Z,O,e)=>{"use strict";e.d(O,{VG:()=>N,HY:()=>Y,ug:()=>S});var t=e(46063),n=e(79662);const l=1,s=2,i=3,f=4,c=5,o=6,m=7,r=8,u=9,d=10,g=11,p=12,E=0,h=1,a=2,v=3,x=4,y=5,C=6,P=7;var D=e(82897),M=e(25181);const b=M.WQ.deserialize({version:14,states:"!vOQOPOOOrOPO'#ChOOOO'#Ch'#ChOQOPO'#ClOOOO'#Ci'#CiQQOPOOO!gOQO'#C^O!lOPO'#CjO!qOPO,59SOOOO,59W,59WOOOO-E6g-E6gOOOO,58x,58xOOOO,59U,59UOOOO-E6h-E6h",stateData:"$O~ORUOTUOUUOVUOWUOXUOYUOZUOaPOcQO~ObVOR[XT[XU[XV[XW[XX[XY[XZ[Xa[Xc[X~OSZO~Oa[O~ObVOR[aT[aU[aV[aW[aX[aY[aZ[aa[ac[a~OR~T~U~V~W~Y~Z~RZYXWVUTa~",goto:"zaPPbPPPPPPPPPbgmPsVRORTQTORYTQWPR]WSSOTRXR",nodeNames:"\u26A0 AlertRuleSearch FilterExpression DataSourceToken FilterValue NameSpaceToken LabelToken GroupToken RuleToken StateToken TypeToken HealthToken FreeFormExpression",maxTerm:19,skippedNodes:[0],repeatNodeCount:2,tokenData:"#$QRRqqr#Yrs&fst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]+h!]#W#Y#W#X,z#X#Z#Y#Z#[=b#[#]F[#]#`#Y#`#a!!n#a#b#Y#b#c!+h#c#f#Y#f#g!:f#g#h!Av#h#i!Jp#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#acSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YQ$qcSQqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lQ&PP;=`<%l$lQ&VP;=`;NQ$lR&]P;=`<%l#YR&cP;=`;NQ#YR&irX^(spq(sqr(sst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR(vsX^(spq(sqr(srs+Tst(stu(suv(svw(swx(sxy(syz(sz{(s{|(s|!P(s!P!Q(s!Q![(s![!](s!]#y(s#y#z(s#z$f(s$f$g(s$g#BY(s#BY#BZ(s#BZ$Ch(s$IS$I_(s$I|$JO(s$JT$JU(s$JU$KV(s$KV$KW(s$KW&FU(s&FU&FV(s&FV;'S(s;'S;(d+[;(d;(e+b<%lO(sR+[OSQcPR+_P;=`<%l(sR+eP;=`;NQ(sR+ocSQbPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR-ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U.d#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR.keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i/|#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR0TeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U1f#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR1meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h3O#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR3VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d4h#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR4oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j6Q#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR6XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g7j#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR7qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W9S#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR9ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y:l#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR:scSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]<O!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR<VcSQRPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR=ieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#f#Y#f#g>z#g$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR?ReSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#c#Y#c#d@d#d$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR@keSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#jA|#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRBTeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#eCf#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRCmcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]Dx!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YREPcSQVPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lRFceSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#YGt#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRG{eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#UI^#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRIeeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#aJv#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRJ}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#iL`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRLgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#[#Y#[#]Mx#]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YRNPcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]! [!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR! ccSQZPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!!ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!$W#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!$_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#U#Y#U#V!%p#V$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!%weSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!'Y#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!'aeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!(r#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!(ycSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!*U!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!*]cSQUPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!+oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!-Q#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!-XeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#a#Y#a#b!.j#b$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!.qeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!0S#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!0ZeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#g#Y#g#h!1l#h$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!1seSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!3U#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!3]eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!4n#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!4ueSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#V#Y#V#W!6W#W$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!6_eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!7p#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!7wcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!9S!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!9ZcSQTPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!:meSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#i#Y#i#j!<O#j$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!<VeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#`#Y#`#a!=h#a$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!=oeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!?Q#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!?XcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!@d!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!@kcSQWPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!A}eSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!C`#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!CgeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#T#Y#T#U!Dx#U$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!EPeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#h#Y#h#i!Fb#i$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!FieSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y!Gz#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!HRcSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]!I^!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!IecSQXPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$lR!JweSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#m#Y#m#n!LY#n$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!LaeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#d#Y#d#e!Mr#e$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR!MyeSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]$l!]#X#Y#X#Y# [#Y$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR# ccSQaPqr#Yst#Ytu#Yuv#Yvw#Ywx#Yxy#Yyz#Yz{#Y{|#Y|!P#Y!P!Q#Y!Q![#Y![!]#!n!]$Ch#Y$JU;'S#Y;'S;(d&Y;(d;(e&`<%lO#YR#!ucSQYPqr$lst$ltu$luv$lvw$lwx$lxy$lyz$lz{$l{|$l|!P$l!P!Q$l!Q![$l![!]$l!]$Ch$l$JU;'S$l;'S;(d%|;(d;(e&S<%lO$l",tokenizers:[0,1],topRules:{AlertRuleSearch:[0,1]},dialects:{dataSourceFilter:114,nameSpaceFilter:116,labelFilter:118,groupFilter:120,ruleFilter:122,stateFilter:66,typeFilter:124,healthFilter:126},tokenPrec:128}),R={[i]:"datasource",[c]:"namespace",[o]:"label",[r]:"rule",[m]:"group",[u]:"state",[d]:"type",[g]:"health"};var B=(z=>(z.dataSource="dataSourceFilter",z.nameSpace="nameSpaceFilter",z.label="labelFilter",z.group="groupFilter",z.rule="ruleFilter",z.state="stateFilter",z.type="typeFilter",z.health="healthFilter",z))(B||{});function w(z,G,k){K(z,G,j=>{if(j.type.id===s){const de=A(z,j);if(de.type&&de.value){const ge=k[de.type];ge&&ge(de.value)}}else if(j.type.id===p){const de=k[p];de&&de(I(z,j))}})}function A(z,G){if(G.type.id!==s)throw new Error("Invalid node provided. Only FilterExpression nodes are supported");const k=G.firstChild;if(!k)return{type:void 0,value:void 0};const j=G.getChild(f),de=j?(0,D.trim)(I(z,j),'"'):void 0;return{type:k.type.id,value:de}}function I(z,G){return z.slice(G.from,G.to).trim().replace(/\"/g,"")}function F(z,G,k){const j=[];K(z,G,ge=>{ge.type.id===s&&ge.firstChild&&j.push(ge.firstChild),ge.type.id===p&&j.push(ge)});let de=[];return j.forEach(ge=>{const re=k.findIndex(ce=>ce.type===ge.type.id);if(re!==-1){if(ge.parent?.type.is(s)){const ce=R[ge.type.id],ie=k.splice(re,1)[0];de.push(`${ce}:${W(ie.value)}`)}if(ge.type.is(p)){const ce=k.splice(re,1)[0];de.push(ce.value)}}}),k.forEach(ge=>{ge.type===p?de.push(ge.value):de.push(`${R[ge.type]}:${W(ge.value)}`)}),de.join(" ")}function K(z,G,k){const j=G.join(" ");let ge=b.configure({dialect:j}).parse(z).cursor();do k(ge.node);while(ge.next())}function W(z){return/\s/.test(z)?`"${z}"`:z}const U=[B.dataSource,B.nameSpace,B.label,B.group,B.rule,B.state,B.type,B.health];var N=(z=>(z.Ok="ok",z.Error="error",z.NoData="nodata",z.Unknown="unknown",z))(N||{});function S(z){const G={labels:[],freeFormWords:[],dataSourceNames:[]},k={[i]:j=>G.dataSourceNames.push(j),[c]:j=>G.namespace=j,[m]:j=>G.groupName=j,[r]:j=>G.ruleName=j,[o]:j=>G.labels.push(j),[u]:j=>G.ruleState=Q(j),[d]:j=>(0,n.Wd)(j)?G.ruleType=j:void 0,[g]:j=>G.ruleHealth=(0,n.vU)(j),[p]:j=>G.freeFormWords.push(j)};return w(z,U,k),G}function Y(z,G){const k=[];return G.dataSourceNames&&k.push(...G.dataSourceNames.map(j=>({type:i,value:j}))),G.namespace&&k.push({type:c,value:G.namespace}),G.groupName&&k.push({type:m,value:G.groupName}),G.ruleName&&k.push({type:r,value:G.ruleName}),G.ruleState&&k.push({type:u,value:G.ruleState}),G.ruleType&&k.push({type:d,value:G.ruleType}),G.ruleHealth&&k.push({type:g,value:G.ruleHealth}),G.labels&&k.push(...G.labels.map(j=>({type:o,value:j}))),G.freeFormWords&&k.push(...G.freeFormWords.map(j=>({type:p,value:j}))),F(z,U,k)}function Q(z){if(z==="normal")return t.x_.Inactive;if((0,t.I9)(z))return z}},81001:(Z,O,e)=>{"use strict";e.d(O,{v:()=>B});var t=e(46528),n=e(59980),l=e(59724),s=e(57027),i=e(9471),f=e(44288),c=e(49922),o=e(16911),m=e(83849),r=e(33180),u=e(69311),d=e(70006),g=e(86647),p=e(77599),E=e(29930),h=e(75e3),a=e(88039),v=e(59584),x=e(97573);const y={from:21600,to:0},C=(U,N)=>{const S=P(U,N);if(!S)return y;const{from:Y,to:Q}=M(S,N);return!Y.length&&!Q.length?y:{from:Math.max(...Y),to:Math.min(...Q)}},P=(U,N)=>{switch(U.type){case x.Us.classic:return D(U);case x.Us.math:return b(U,N);case x.Us.resample:case x.Us.reduce:case x.Us.threshold:return R(U)}},D=U=>U.conditions?.map(N=>N.query.params[0]),M=(U,N)=>{let S=[],Y=[y.to];for(const Q of U){const z=N.find(G=>G.refId===Q);!z||!z.relativeTimeRange||(S.push(z.relativeTimeRange.from),Y.push(z.relativeTimeRange.to))}return{from:S,to:Y}},b=(U,N)=>N.filter(S=>S.queryType==="query"&&U.expression?.includes(S.refId)).map(S=>S.refId),R=U=>U.expression?[U.expression]:void 0;class B{constructor(N=(0,E.i)(),S=(0,g.F)()){this.backendSrv=N,this.dataSourceSrv=S,this.subject=new t.t(1),this.lastResult={}}get(){return this.subject.asObservable()}async run(N){if(N.length===0){const S=A(N,c.Gu.Done);return this.subject.next(S)}for(const S of N)if(!(0,h.j)(S.model)){const Y=await this.dataSourceSrv.get(S.datasourceUid);if(Y.filterQuery&&!Y.filterQuery(S.model)){const Q=A(N,c.Gu.Done);return this.subject.next(Q)}}this.subscription=w(this.backendSrv,N).subscribe({next:S=>{const Y=W(S,(Q,z)=>{const G=this.lastResult[Q],k=(0,o.zR)(z,G);return(0,v.C)(k,G)});this.lastResult=Y,this.subject.next(this.lastResult)},error:S=>{this.lastResult=K(this.lastResult,S),this.subject.next(this.lastResult)}})}cancel(){if(!this.subscription)return;this.subscription.unsubscribe();let N=!1;const S=W(this.lastResult,(Y,Q)=>(Q.state===c.Gu.Loading&&(N=!0),{...Q,state:c.Gu.Done}));N&&this.subject.next(S)}destroy(){this.subject&&this.subject.complete(),this.cancel()}}const w=(U,N)=>{const S=A(N,c.Gu.Loading),Y={data:{data:N},url:"/api/v1/eval",method:"POST",requestId:(0,f.Z)()};return(0,m.x)({whileLoading:S,source:U.fetch(Y).pipe(F(S),(0,l.K)(Q=>(0,n.of)(K(S,Q))),(0,a.V)(U,Y.requestId),(0,s.B)())})},A=(U,N)=>U.reduce((S,Y)=>(S[Y.refId]={state:N,series:[],timeRange:I(Y,U)},S),{}),I=(U,N)=>{if((0,h.j)(U.model)){const S=C(U.model,N);return r.relativeToTimeRange(S)}return U.relativeTimeRange?r.relativeToTimeRange(U.relativeTimeRange):(console.warn(`Query with refId: ${U.refId} did not have any relative time range, using default.`),(0,u.JK)())},F=U=>(0,i.U)(N=>{const{data:S}=N,Y={};for(const[Q,z]of Object.entries(S.results))Y[Q]={timeRange:U[Q].timeRange,state:c.Gu.Done,series:z.frames.map(d.vP)};return Y}),K=(U,N)=>{const S=(0,p.P)(N);return W(U,(Y,Q)=>({...Q,state:c.Gu.Error,error:S}))},W=(U,N)=>{const S={};for(const[Y,Q]of Object.entries(U))S[Y]=N(Y,Q);return S}},72004:(Z,O,e)=>{"use strict";e.d(O,{QY:()=>Qe,Nc:()=>le,r0:()=>Pe,X4:()=>ct,hS:()=>He,oE:()=>Je,S6:()=>ht,yO:()=>Xe,mS:()=>nt,Yh:()=>ne,ei:()=>pe,dV:()=>it,lB:()=>Ie,dB:()=>Fe,on:()=>We,zy:()=>X,wE:()=>te,vL:()=>ft,sw:()=>Re,Ms:()=>_e,Vj:()=>et,dn:()=>_,y6:()=>ee,UR:()=>ae,IA:()=>Ve,nw:()=>rt,je:()=>ve,iH:()=>Le,wy:()=>Ae,D8:()=>Oe,mM:()=>Se,hv:()=>Ye,tg:()=>be});var t=e(62992),n=e(82897),l=e(37932),s=e(35645),i=e(46063),f=e(77582),c=e(29930),o=e(41904),m=e(65583),r=e(27677),u=e(54899),d=e(45849);async function g(me){try{const he=await(0,m.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(me)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}));return{template_files:he.data.template_files??{},template_file_provenances:he.data.template_file_provenances??{},alertmanager_config:he.data.alertmanager_config??{}}}catch(he){if(me===d.GC&&(0,u.kW)(he)&&he.data?.message?.includes("could not find an Alertmanager configuration"))return{template_files:{},alertmanager_config:{}};throw he}}async function p(me,he){await(0,m.n)((0,u.i)().fetch({method:"POST",url:`/api/alertmanager/${(0,d.gt)(me)}/config/api/v1/alerts`,data:he,showErrorAlert:!1,showSuccessAlert:!1}))}async function E(me){await(0,m.n)((0,u.i)().fetch({method:"DELETE",url:`/api/alertmanager/${(0,d.gt)(me)}/config/api/v1/alerts`,showErrorAlert:!1,showSuccessAlert:!1}))}async function h(me){return(await(0,m.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(me)}/api/v2/silences`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function a(me,he){return(await(0,m.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(me)}/api/v2/silences`,data:he,showErrorAlert:!1,showSuccessAlert:!1,method:"POST"}))).data}async function v(me,he){await(0,u.i)().delete(`/api/alertmanager/${(0,d.gt)(me)}/api/v2/silence/${encodeURIComponent(he)}`)}async function x(me,he,De=!0,$e=!0,ke=!0){const tt=r.Cj.toUrlParams({silenced:De,active:$e,inhibited:ke})+he?.map(dt=>`filter=${encodeURIComponent(`${A(dt.name)}=${dt.isRegex?"~":""}"${A(dt.value)}"`)}`).join("&")||"";return(await(0,m.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(me)}/api/v2/alerts`+(tt?"?"+tt:""),showErrorAlert:!1,showSuccessAlert:!1}))).data}async function y(me){return(await(0,m.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(me)}/api/v2/alerts/groups`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function C(me){return(await(0,m.n)((0,u.i)().fetch({url:`/api/alertmanager/${(0,d.gt)(me)}/api/v2/status`,showErrorAlert:!1,showSuccessAlert:!1}))).data}async function P(me,he,De){const $e={receivers:he,alert:De};try{const ke=await(0,m.n)((0,u.i)().fetch({method:"POST",data:$e,url:`/api/alertmanager/${(0,d.gt)(me)}/config/api/v1/receivers/test`,showErrorAlert:!1,showSuccessAlert:!1}));if(D(ke.data))throw new Error(b(ke.data))}catch(ke){throw(0,u.kW)(ke)&&M(ke.data)&&D(ke.data)?new Error(b(ke.data)):ke}}function D(me){return me.receivers.some(he=>he.grafana_managed_receiver_configs.some(De=>De.status==="failed"))}function M(me){const he=me?.receivers;return Array.isArray(he)?he.every(De=>typeof De.name=="string"&&Array.isArray(De.grafana_managed_receiver_configs)):!1}function b(me){return me.receivers.flatMap(he=>he.grafana_managed_receiver_configs.filter(De=>De.status==="failed").map(De=>De.error??"Unknown error.")).join("; ")}async function R(me){await(0,m.n)((0,u.i)().fetch({method:"POST",data:me,url:"/api/v1/ngalert/admin_config",showErrorAlert:!1,showSuccessAlert:!1})).then(()=>{w()})}async function B(){return(await(0,m.n)((0,u.i)().fetch({method:"GET",url:"/api/v1/ngalert/alertmanagers"}))).data}async function w(){return(await(0,m.n)((0,u.i)().fetch({method:"GET",url:"/api/v1/ngalert/admin_config",showErrorAlert:!1}))).data}function A(me){return me.replace(/"/g,'\\"')}function I(me){return(0,u.i)().get("/api/annotations",{alertId:me}).then(he=>he?.sort(F))}function F(me,he){const De=(tt,Ge)=>tt>Ge?-1:Ge>tt?1:0,$e=De(me.timeEnd,he.timeEnd);if($e)return $e;const ke=De(me.time,he.time);return ke||De(me.id,he.id)}var K=e(44737),W=e(79572),U=e(644),N=e(95454),S=e(49011),Y=e(61068),Q=e(94617),z=e(20194),G=e(10505),k=e(46818),j=e(60048),de=e(21767),ge=e(79662);function re(me){const he=async pt=>{if((0,ge.Kl)(pt)){const Ke=await(0,S.m6)(me);for(const[je,ot]of Object.entries(Ke))for(const at of ot){const xt=at.rules.find(Dt=>(0,ge.Pc)(Dt)&&Dt.grafana_alert?.uid===pt.uid);if(xt)return{group:at,ruleSourceName:d.GC,namespace:je,rule:xt}}}if((0,ge.E4)(pt)){const{ruleSourceName:Ke,namespace:je,groupName:ot}=pt,at=await(0,S.jJ)(me,je,ot);if(!at)return null;const xt=at.rules.find(Dt=>{const wt=j.Zk(Ke,je,at.name,Dt);return j.Dg(wt,pt)});return xt?{group:at,ruleSourceName:Ke,namespace:je,rule:xt}:null}if((0,ge.qE)(pt))throw new Error("Native prometheus rules can not be edited in grafana.");return null},De=async pt=>{const{namespace:Ke,group:je,rule:ot}=pt;if(je.rules.length===1){await(0,S.BC)(me,Ke,je.name);return}await(0,S.P4)(me,Ke,{...je,rules:je.rules.filter(at=>at!==ot)})},$e=async(pt,Ke,je)=>{const{dataSourceName:ot,group:at,namespace:xt}=pt,Dt=(0,de.yh)(pt);if(ot&&at&&xt){if(je){const mn=await he(j.CK(je));if(!mn)throw new Error("Rule not found.");if(mn.namespace!==xt||mn.group.name!==at)await De(mn);else{const Dn={...mn.group,rules:mn.group.rules.map(Rn=>Rn===mn.rule?Dt:Rn),evaluateEvery:Ke};return await(0,S.P4)(me,xt,Dn),j.Zk(ot,xt,at,Dt)}}const wt=await(0,S.jJ)(me,xt,at),sn=wt?{...wt,rules:[...wt.rules,Dt]}:{name:at,rules:[Dt]};return await(0,S.P4)(me,xt,sn),j.Zk(ot,xt,at,Dt)}else throw new Error("Data source and location must be specified")},ke=async(pt,Ke,je)=>{const{folder:ot,group:at}=pt;if(!ot)throw new Error("Folder must be specified");const xt=(0,de.mI)(pt),Dt=ot.title,wt={name:at,interval:Ke};if(!je)return tt(Dt,wt,xt);const sn=await he(j.CK(je));if(!sn)throw new Error("Rule not found.");const mn=sn.namespace===Dt,Dn=sn.group.name===pt.group;return mn&&Dn?dt(sn,xt,Ke):Ge(Dt,wt,sn,xt)},tt=async(pt,Ke,je)=>{const ot=await(0,S.jJ)(me,pt,Ke.name);if(!ot)throw new Error(`No group found with name "${Ke.name}"`);const at={name:Ke.name,interval:Ke.interval,rules:(ot.rules??[]).concat(je)};return await(0,S.P4)(me,pt,at),{uid:je.grafana_alert.uid??"",ruleSourceName:d.GC}},Ge=async(pt,Ke,je,ot)=>(ce(je,ot),await tt(pt,Ke,ot)),dt=async(pt,Ke,je)=>{ce(pt,Ke);const ot=pt.group.rules.map(at=>(0,ge.Pc)(at)&&at.grafana_alert.uid===pt.rule.grafana_alert.uid?Ke:at);return await(0,S.P4)(me,pt.namespace,{name:pt.group.name,interval:je,rules:ot}),{uid:pt.rule.grafana_alert.uid,ruleSourceName:d.GC}};return{findEditableRule:he,deleteRule:De,saveLotexRule:$e,saveGrafanaRule:ke}}function ce(me,he){if(!(0,ge.Pc)(me.rule))throw new Error("The rule is not a Grafana managed rule");const De=me.rule.grafana_alert.uid;he.grafana_alert.uid=De}const ie=30*1e3;function fe(me,he){const $e=me().unifiedAlerting.dataSources[he]?.result;if(!$e)throw new Error(`Data source configuration is not available for "${he}" data source`);return $e}function Ce(me,he){const De=fe(me,he);if(!De.rulerConfig)throw new Error(`Ruler API is not available for ${he}`);return De.rulerConfig}const ee=(0,t.hg)("unifiedalerting/fetchPromRules",async({rulesSourceName:me,filter:he},De)=>{await De.dispatch(rt({rulesSourceName:me}));const $e=(0,o.pM)(N.j,`[${me}] Prometheus rules loaded`,{dataSourceName:me,thunk:"unifiedalerting/fetchPromRules"});return await(0,k.$b)($e(me,he))}),ne=(0,t.hg)("unifiedalerting/fetchAmConfig",(me,he)=>(0,k.$b)((async()=>{if((0,d.RY)(me))return C(me).then(tt=>({alertmanager_config:tt.config,template_files:{}}));const{data:De}=await he.dispatch(W.T.endpoints.discoverAmFeatures.initiate({amSourceName:me})),$e=De?.lazyConfigInit??!1,ke=(0,o.pM)(g,`[${me}] Alertmanager config loaded`,{dataSourceName:me,thunk:"unifiedalerting/fetchAmConfig"});return(0,G.fm)(()=>ke(me),tt=>!!(0,k.kk)(tt)?.includes("alertmanager storage object not found")&&!$e,ie).then(tt=>(0,n.isEmpty)(tt.alertmanager_config)&&(0,n.isEmpty)(tt.template_files)&&me!==d.GC?C(me).then(Ge=>({alertmanager_config:Ge.config,template_files:{},template_file_provenances:tt.template_file_provenances})):tt).catch(tt=>{if($e&&(0,k.kk)(tt)?.includes("alertmanager storage object not found"))return Promise.resolve({alertmanager_config:{},template_files:{},template_file_provenances:{}});throw tt})})())),X=(0,t.hg)("unifiedAlerting/fetchExternalAlertmanagers",()=>(0,k.$b)(B())),te=(0,t.hg)("unifiedAlerting/fetchExternAlertmanagersConfig",()=>(0,k.$b)(w())),ae=(0,t.hg)("unifiedalerting/fetchRulerRules",async({rulesSourceName:me,filter:he},{dispatch:De,getState:$e})=>{await De(rt({rulesSourceName:me}));const ke=Ce($e,me),tt=(0,o.pM)(S.m6,`[${me}] Ruler rules loaded`,{dataSourceName:me,thunk:"unifiedalerting/fetchRulerRules"});return await(0,k.$b)(tt(ke,he))});function _({rulesSourceName:me}){return async(he,De)=>{await he(rt({rulesSourceName:me}));const $e=fe(De,me);await he(ee({rulesSourceName:me})),$e.rulerConfig&&await he(ae({rulesSourceName:me}))}}const ve=(0,t.hg)("unifiedalerting/fetchSilences",me=>{const he=(0,o.pM)(h,`[${me}] Silences loaded`,{dataSourceName:me,thunk:"unifiedalerting/fetchSilences"});return(0,k.$b)(he(me))});function Ve(me){return(he,De)=>{const{rulerRules:$e}=De().unifiedAlerting,ke=$e[me];(0,n.isEmpty)(ke?.result)&&!(ke&&(0,ge.m$)(ke))&&!ke?.loading&&he(ae({rulesSourceName:me}))}}function it(){return async me=>{const he=(0,d.mA)().map(De=>me(rt({rulesSourceName:De})));await Promise.allSettled(he)}}const rt=(0,t.hg)("unifiedalerting/fetchPromBuildinfo",async({rulesSourceName:me})=>(0,k.$b)((async()=>{if(me===d.GC)return{name:d.GC,id:d.GC,rulerConfig:{dataSourceName:d.GC,apiVersion:"legacy"}};const he=(0,d.VX)(me);if(!he)throw new Error(`Missing data source configuration for ${me}`);const{id:De,name:$e}=he,tt=await(0,o.pM)(K.C$,`[${me}] Rules source features discovered`,{dataSourceName:me,thunk:"unifiedalerting/fetchPromBuildinfo"})($e),Ge=tt.features.rulerApiEnabled?{dataSourceName:$e,apiVersion:tt.application===i.T8.Cortex?"legacy":"config"}:void 0;return{name:$e,id:De,rulerConfig:Ge}})()),{condition:({rulesSourceName:me},{getState:he})=>{const De=he().unifiedAlerting.dataSources,$e=Boolean(De[me]?.result),ke=Boolean(De[me]?.error);return!($e||ke)}});function pe(me=!1){return async(he,De)=>{const $e=performance.now();await Promise.allSettled((0,d.mA)().map(async ke=>{await he(rt({rulesSourceName:ke}));const{promRules:tt,rulerRules:Ge,dataSources:dt}=De().unifiedAlerting,pt=dt[ke].result;if(!pt)return;const Ke=me||!tt[ke]?.loading,je=(me||!Ge[ke]?.loading)&&Boolean(pt.rulerConfig);await Promise.allSettled([Ke&&he(ee({rulesSourceName:ke})),je&&he(ae({rulesSourceName:ke}))])})),(0,o.PN)("All Prom and Ruler rules loaded",{loadTimeMs:(performance.now()-$e).toFixed(0)})}}function Ie(me=!1){return async(he,De)=>{const{promRules:$e}=De().unifiedAlerting;(0,d.mA)().map(ke=>{(me||!$e[ke]?.loading)&&he(ee({rulesSourceName:ke}))})}}const We=(0,t.hg)("unifiedalerting/fetchEditableRule",(me,he)=>{const De=Ce(he.getState,me.ruleSourceName);return(0,k.$b)(re(De).findEditableRule(me))});function Je(me,he){return async(De,$e)=>{(0,k.Ez)((async()=>{const ke=(0,d.EG)(me.rulesSource),tt=Ce($e,ke);await(0,S.BC)(tt,me.name,he.name),await De(_({rulesSourceName:ke}))})(),{successMessage:"Group deleted"})}}function He(me,he={}){return async(De,$e)=>{(0,k.Ez)((async()=>{const ke=Ce($e,me.ruleSourceName),tt=re(ke),Ge=await tt.findEditableRule(me);if(!Ge)throw new Error("Rule not found.");await tt.deleteRule(Ge),await De(_({rulesSourceName:Ge.ruleSourceName})),he.navigateTo&&l.E1.replace(he.navigateTo)})(),{successMessage:"Rule deleted."})}}const Ae=(0,t.hg)("unifiedalerting/saveRuleForm",({values:me,existing:he,redirectOnSave:De,evaluateEvery:$e},ke)=>(0,k.Ez)((0,k.$b)((async()=>{const{type:tt}=me;let Ge;if(tt===Q.$.cloudAlerting||tt===Q.$.cloudRecording){if(!me.dataSourceName)throw new Error("The Data source has not been defined.");const dt=Ce(ke.getState,me.dataSourceName);Ge=await re(dt).saveLotexRule(me,$e,he),await ke.dispatch(ae({rulesSourceName:me.dataSourceName}))}else if(tt===Q.$.grafana){const dt=Ce(ke.getState,d.GC);Ge=await re(dt).saveGrafanaRule(me,$e,he),await ke.dispatch(ae({rulesSourceName:d.GC}))}else throw new Error("Unexpected rule form type");if((0,o.PN)(o.z7.successSavingAlertRule,{type:tt,isNew:(!he).toString()}),he||(0,o.I5)({grafana_version:s.v.buildInfo.version,org_id:f.Vt.user.orgId,user_id:f.Vt.user.id}),De)l.E1.push(De);else{const dt=j.$V(Ge);if(!dt){l.E1.push("/alerting/list");return}const pt=`/alerting/${encodeURIComponent(dt)}/edit`;l.E1.getLocation().pathname!==pt?l.E1.replace(pt):ke.dispatch(We(Ge))}})()),{successMessage:he?`Rule "${me.name}" updated.`:`Rule "${me.name}" saved.`,errorMessage:"Failed to save rule"})),et=(0,t.hg)("unifiedalerting/fetchGrafanaNotifiers",()=>(0,k.$b)((0,U.i9)())),_e=(0,t.hg)("unifiedalerting/fetchGrafanaAnnotations",me=>(0,k.$b)(I(me))),Se=(0,t.hg)("unifiedalerting/updateAMConfig",({alertManagerSourceName:me,oldConfig:he,newConfig:De,successMessage:$e,redirectPath:ke,refetch:tt},Ge)=>(0,k.Ez)((0,k.$b)((async()=>{const dt=await Ge.dispatch(ne(me)).unwrap();if(!((0,n.isEmpty)(dt.alertmanager_config)&&(0,n.isEmpty)(dt.template_files))&&JSON.stringify(dt)!==JSON.stringify(he))throw new Error("It seems configuration has been recently updated. Please reload page and try again to make sure that recent changes are not overwritten.");await p(me,(0,z.X4)(De)),tt&&await Ge.dispatch(ne(me)),ke&&l.E1.push((0,G.eQ)(ke,me))})()),{successMessage:$e})),Fe=(0,t.hg)("unifiedalerting/fetchAmAlerts",me=>(0,k.$b)(x(me,[],!0,!0,!0))),Xe=(me,he)=>async De=>{await(0,k.Ez)(v(me,he),{successMessage:"Silence expired."}),De(ve(me)),De(Fe(me))},Qe=(0,t.hg)("unifiedalerting/updateSilence",({alertManagerSourceName:me,payload:he,exitOnSave:De,successMessage:$e})=>(0,k.Ez)((0,k.$b)((async()=>{await a(me,he),De&&l.E1.push("/alerting/silences")})()),{successMessage:$e})),ct=(me,he)=>(De,$e)=>{const ke=$e().unifiedAlerting.amConfigs?.[he]?.result;if(!ke)throw new Error(`Config for ${he} not found`);if(!ke.alertmanager_config.receivers?.find(Ge=>Ge.name===me))throw new Error(`Cannot delete receiver ${me}: not found in config.`);const tt={...ke,alertmanager_config:{...ke.alertmanager_config,receivers:ke.alertmanager_config.receivers.filter(Ge=>Ge.name!==me)}};return De(Se({newConfig:tt,oldConfig:ke,alertManagerSourceName:he,successMessage:"Contact point deleted.",refetch:!0}))},ht=(me,he)=>(De,$e)=>{const ke=$e().unifiedAlerting.amConfigs?.[he]?.result;if(!ke)throw new Error(`Config for ${he} not found`);if(typeof ke.template_files?.[me]!="string")throw new Error(`Cannot delete template ${me}: not found in config.`);const tt={...ke.template_files};delete tt[me];const Ge={...ke,alertmanager_config:{...ke.alertmanager_config,templates:ke.alertmanager_config.templates?.filter(dt=>dt!==me)},template_files:tt};return De(Se({newConfig:Ge,oldConfig:ke,alertManagerSourceName:he,successMessage:"Template deleted.",refetch:!0}))},ft=(0,t.hg)("unifiedalerting/fetchFolder",me=>(0,k.$b)(c.ae.getFolderByUid(me,{withAccessControl:!0}))),Re=me=>(he,De)=>{De().unifiedAlerting.folders[me]?.dispatched||he(ft(me))},nt=(0,t.hg)("unifiedalerting/fetchAlertGroups",me=>(0,k.$b)(y(me))),le=(0,t.hg)("unifiedalerting/deleteAlertManagerConfig",async(me,he)=>(0,k.Ez)((0,k.$b)((async()=>{await E(me),await he.dispatch(ne(me))})()),{errorMessage:"Failed to reset Alertmanager configuration",successMessage:"Alertmanager configuration reset."})),Pe=(me,he)=>async(De,$e)=>{const ke=$e().unifiedAlerting.amConfigs[me].result,tt=ke?.alertmanager_config?.mute_time_intervals?.filter(({name:Ge})=>Ge!==he)??[];ke&&(0,k.Ez)(De(Se({alertManagerSourceName:me,oldConfig:ke,newConfig:{...ke,alertmanager_config:{...ke.alertmanager_config,route:ke.alertmanager_config.route?(0,z.rU)(he,ke.alertmanager_config?.route):void 0,mute_time_intervals:tt}},refetch:!0})),{successMessage:`Deleted "${he}" from Alertmanager configuration`,errorMessage:"Failed to delete mute timing"})},Oe=(0,t.hg)("unifiedalerting/testReceivers",({alertManagerSourceName:me,receivers:he,alert:De})=>(0,k.Ez)((0,k.$b)(P(me,he,De)),{errorMessage:"Failed to send test alert.",successMessage:"Test alert sent."})),Le=(me,he)=>me.filter(De=>{const{forDuration:$e}=(0,Y.qd)(De,he),ke=(0,Y.Bg)($e),tt=(0,Y.Bg)(he);return ke!==0&&ke<tt}),Ye=(0,t.hg)("unifiedalerting/updateLotexNamespaceAndGroup",async(me,he)=>(0,k.Ez)((0,k.$b)((async()=>{const{rulesSourceName:De,namespaceName:$e,groupName:ke,newNamespaceName:tt,newGroupName:Ge,groupInterval:dt}=me,pt=Ce(he.getState,De),Ke=await(0,S.m6)(pt);if(!Boolean(Ke[$e]))throw new Error(`Namespace "${$e}" not found.`);const ot=Ke[$e].find(Dt=>Dt.name===ke);if(!ot)throw new Error(`Group "${ke}" not found.`);const at=Boolean(Ke[$e].find(Dt=>Dt.name===Ge));if(Ge!==ke&&at)throw new Error(`Group "${Ge}" already exists in namespace "${$e}".`);const xt=Boolean(Ke[tt]);if(tt!==$e&&xt)throw new Error(`Namespace "${tt}" already exists.`);if(tt===$e&&ke===Ge&&dt===ot.interval)throw new Error("Nothing changed.");if(dt!==ot.interval){const Dt=Le(ot.rules,dt??"1m");if(Dt.length>0)throw new Error(`These alerts belonging to this group will have an invalid 'For' value: ${Dt.map(wt=>{const{alertName:sn}=(0,Y.qd)(wt,dt??"");return sn}).join(",")}`)}if(tt!==$e){for(const Dt of Ke[$e])await(0,S.P4)(pt,tt,Dt.name===ke?{...Dt,name:Ge,interval:dt}:Dt);await(0,S.sz)(pt,$e)}else await(0,S.P4)(pt,$e,{...ot,name:Ge,interval:dt}),Ge!==ke&&await(0,S.BC)(pt,$e,ke);await he.dispatch(ae({rulesSourceName:De}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),be=(0,t.hg)("unifiedalerting/updateRulesOrderForGroup",async(me,he)=>(0,k.Ez)((0,k.$b)((async()=>{const{rulesSourceName:De,namespaceName:$e,groupName:ke,newRules:tt}=me,Ge=Ce(he.getState,De),pt=(await(0,S.m6)(Ge))[$e].find(je=>je.name===ke);if(!pt)throw new Error(`Group "${ke}" not found.`);const Ke={name:pt.name,interval:pt.interval,rules:tt};await(0,S.P4)(Ge,$e,Ke),await he.dispatch(ae({rulesSourceName:De}))})()),{errorMessage:"Failed to update namespace / group",successMessage:"Update successful"})),Te=(0,t.hg)("unifiedAlerting/addExternalAlertmanagers",async(me,he)=>(0,k.Ez)((0,k.$b)((async()=>{await R(me),he.dispatch(te())})()),{errorMessage:"Failed adding alertmanagers",successMessage:"Alertmanagers updated"}))},53715:(Z,O,e)=>{"use strict";e.d(O,{r:()=>l});var t=e(9892),n=e(39031);const l=s=>({[n.Z9.Active]:t.css`
    color: ${s.colors.error.text};
  `,[n.Z9.Suppressed]:t.css`
    color: ${s.colors.primary.text};
  `,[n.Z9.Unprocessed]:t.css`
    color: ${s.colors.secondary.text};
  `})},1562:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>n});var t=e(9892);const n=l=>t.css`
    float: none;
    display: flex;
    justify-content: flex-start;
    margin: ${l.spacing(2,0)};
  `},94617:(Z,O,e)=>{"use strict";e.d(O,{$:()=>t});var t=(n=>(n.grafana="grafana",n.cloudAlerting="cloud-alerting",n.cloudRecording="cloud-recording",n))(t||{})},4528:(Z,O,e)=>{"use strict";e.d(O,{t:()=>t});var t=(n=>(n.seconds="s",n.minutes="m",n.hours="h",n.days="d",n.weeks="w",n))(t||{})},97953:(Z,O,e)=>{"use strict";e.d(O,{Bz:()=>u,Fo:()=>f,Ko:()=>r,Ob:()=>i,QX:()=>m,Rv:()=>g,ql:()=>d});var t=e(82002),n=e(81168),l=e(45849);function s(p){return(0,l.HY)(p)?"grafana":"external"}const i={read:{grafana:n.AccessControlAction.AlertingInstanceRead,external:n.AccessControlAction.AlertingInstancesExternalRead},create:{grafana:n.AccessControlAction.AlertingInstanceCreate,external:n.AccessControlAction.AlertingInstancesExternalWrite},update:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite},delete:{grafana:n.AccessControlAction.AlertingInstanceUpdate,external:n.AccessControlAction.AlertingInstancesExternalWrite}},f={read:{grafana:n.AccessControlAction.AlertingNotificationsRead,external:n.AccessControlAction.AlertingNotificationsExternalRead},create:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},update:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite},delete:{grafana:n.AccessControlAction.AlertingNotificationsWrite,external:n.AccessControlAction.AlertingNotificationsExternalWrite}},c={read:n.AccessControlAction.AlertingProvisioningRead,write:n.AccessControlAction.AlertingProvisioningWrite},o={read:{grafana:n.AccessControlAction.AlertingRuleRead,external:n.AccessControlAction.AlertingRuleExternalRead},create:{grafana:n.AccessControlAction.AlertingRuleCreate,external:n.AccessControlAction.AlertingRuleExternalWrite},update:{grafana:n.AccessControlAction.AlertingRuleUpdate,external:n.AccessControlAction.AlertingRuleExternalWrite},delete:{grafana:n.AccessControlAction.AlertingRuleDelete,external:n.AccessControlAction.AlertingRuleExternalWrite}};function m(p){const E=s(p);return{read:i.read[E],create:i.create[E],update:i.update[E],delete:i.delete[E]}}function r(p){const E=s(p);return{read:f.read[E],create:f.create[E],update:f.update[E],delete:f.delete[E]}}function u(p){const E=s(p);return{read:o.read[E],create:o.create[E],update:o.update[E],delete:o.delete[E]}}function d(p,E){return()=>t.Vt.evaluatePermission(()=>E,p)}function g(){return{canCreateGrafanaRules:t.Vt.hasAccess(n.AccessControlAction.FoldersRead,t.Vt.hasEditPermissionInFolders)&&t.Vt.hasAccess(o.create.grafana,t.Vt.hasEditPermissionInFolders),canCreateCloudRules:t.Vt.hasAccess(n.AccessControlAction.DataSourcesRead,t.Vt.isEditor)&&t.Vt.hasAccess(o.create.external,t.Vt.isEditor),canEditRules:p=>{const E=p===l.GC?t.Vt.hasEditPermissionInFolders:t.Vt.isEditor;return t.Vt.hasAccess(u(p).update,E)},canReadProvisioning:t.Vt.hasAccess(c.read,t.Vt.isGrafanaAdmin)}}},20194:(Z,O,e)=>{"use strict";e.d(O,{FM:()=>f,J8:()=>b,X4:()=>s,Xy:()=>C,Zh:()=>v,_J:()=>d,cm:()=>u,eD:()=>x,m8:()=>R,nv:()=>o,oI:()=>g,qw:()=>B,rU:()=>i,tA:()=>p,tC:()=>h,u6:()=>D,uK:()=>P,v7:()=>M,xz:()=>a,zy:()=>m});var t=e(39031),n=e(82963),l=e(45849);function s(w){return w.alertmanager_config.receivers||(w.alertmanager_config.receivers=[{name:"default "}]),w.alertmanager_config.route||(w.alertmanager_config.route={receiver:w.alertmanager_config.receivers[0].name}),w.template_files||(w.template_files={}),w}function i(w,A){return{...A,mute_time_intervals:A.mute_time_intervals?.filter(F=>F!==w)??[],routes:A.routes?.map(F=>i(w,F))}}function f(w,A,I){return{...I,mute_time_intervals:I.mute_time_intervals?.map(F=>F===A?w:F),routes:I.routes?.map(F=>f(w,A,F))}}function c(w,A){return(A.receiver===w||A.routes?.some(I=>c(w,I)))??!1}function o(w,A){return(A.alertmanager_config.route&&c(w,A.alertmanager_config.route))??!1}function m(w){return w.isEqual?w.isRegex?t._M.regex:t._M.equal:w.isRegex?t._M.notRegex:t._M.notEqual}function r(w){switch(w){case t._M.equal:return{isEqual:!0,isRegex:!1};case t._M.notEqual:return{isEqual:!1,isRegex:!1};case t._M.regex:return{isEqual:!0,isRegex:!0};case t._M.notRegex:return{isEqual:!1,isRegex:!0}}}function u(w){return{name:w.name,value:w.value,operator:m(w)}}function d(w){return{name:w.name,value:w.value,...r(w.operator)}}function g(w){return`{${w.map(u).reduce((F,K)=>{const W=`${K.name}${K.operator}"${K.value}"`;return F?`${F},${W}`:W},"")}}`}const p=[{label:t._M.equal,description:"Equals",value:t._M.equal},{label:t._M.notEqual,description:"Does not equal",value:t._M.notEqual},{label:t._M.regex,description:"Matches regex",value:t._M.regex},{label:t._M.notRegex,description:"Does not match regex",value:t._M.notRegex}],E=[t._M.regex,t._M.notRegex,t._M.notEqual,t._M.equal];function h(w){const A=w.trim();if(A.startsWith("{")&&A.endsWith("}"))throw new Error(`PromQL matchers not supported yet, sorry! PromQL matcher found: ${A}`);const I=E.map(N=>[N,A.indexOf(N)]).filter(([N,S])=>S>-1).sort((N,S)=>N[1]-S[1]);if(!I.length)throw new Error(`Invalid matcher: ${A}`);const[F,K]=I[0],W=A.slice(0,K).trim(),U=A.slice(K+F.length).trim();if(!W)throw new Error(`Invalid matcher: ${A}`);return{name:W,value:U,isRegex:F===t._M.regex||F===t._M.notRegex,isEqual:F===t._M.equal||F===t._M.regex}}function a(w){const A=m(w);return[w.name,A,w.value]}function v(w){const A=/\b([\w.-]+)(=~|!=|!~|=(?="?\w))"?([^"\n,} ]*)"?/g,I=[];return w.replace(A,(F,K,W,U)=>{const N=W===t._M.equal||W===t._M.regex,S=W===t._M.regex||W===t._M.notRegex;return I.push({name:K,value:U.trim(),isEqual:N,isRegex:S}),""}),I}function x(w,A){return A.every(({name:I,value:F,isRegex:K,isEqual:W})=>Object.entries(w).some(([U,N])=>{const S=I===U;let Y;return W&&!K&&(Y=F===N),!W&&!K&&(Y=F!==N),W&&K&&(Y=new RegExp(F).test(N)),!W&&K&&(Y=!new RegExp(F).test(N)),S&&Y}))}function y(){return(0,n.x)().filter(w=>w.type===l.ye.Alertmanager)}function C(w){return y().find(A=>w===A.uid)}function P(w){const{times:A,weekdays:I,days_of_month:F,months:K,years:W}=w,U=D(A),N=M(I),S=b(F),Y=R(K),Q=B(W);return[U,N,S,Y,Q].join(", ")}function D(w){return"Times: "+(w?w?.map(({start_time:A,end_time:I})=>`${A} - ${I} UTC`).join(" and "):"All")}function M(w){return"Weekdays: "+(w?.map(A=>{if(A.includes(":"))return A.split(":").map(I=>{const F=I.slice(0,3);return F[0].toLocaleUpperCase()+F.slice(1)}).join("-");{const I=A.slice(0,3);return I[0].toLocaleUpperCase()+I.slice(1)}}).join(", ")??"All")}function b(w){return"Days of the month: "+(w?.join(", ")??"All")}function R(w){return"Months: "+(w?.join(", ")??"All")}function B(w){return"Years: "+(w?.join(", ")??"All")}},99085:(Z,O,e)=>{"use strict";e.d(O,{$9:()=>i,XW:()=>f});var t=e(68404),n=e(37190),l=e(10505);function s(c){return{dashboardUID:c.find(([o])=>o===n.q6.dashboardUID)?.[1],panelId:c.find(([o])=>o===n.q6.panelID)?.[1]}}function i(c){return(0,t.useMemo)(()=>Object.entries(c||{}).filter(([o,m])=>!!m.trim()),[c])}function f(c){const o=new Map,{panelId:m,dashboardUID:r}=s(c);return r&&o.set(n.q6.dashboardUID,(0,l.RQ)(r)),r&&m&&o.set(n.q6.panelID,(0,l.yM)(r,m)),o}},82963:(Z,O,e)=>{"use strict";e.d(O,{f:()=>s,x:()=>l});var t=e(35645),n=e(20383);function l(){return Object.values(t.v.datasources)}function s(i){if(!(0,n.wd)(t.v.unifiedAlerting.minInterval))return{globalLimit:0,exceedsLimit:!1};const f=(0,n.nd)(t.v.unifiedAlerting.minInterval);if(!i||!(0,n.wd)(i))return{globalLimit:f,exceedsLimit:!1};const c=(0,n.nd)(i),o=f>c&&c>0;return{globalLimit:f,exceedsLimit:o}}},37190:(Z,O,e)=>{"use strict";e.d(O,{Fe:()=>m,GC:()=>o,Kd:()=>r,c4:()=>l,cm:()=>i,de:()=>s,iF:()=>f,jZ:()=>t,m4:()=>c,p4:()=>n,q6:()=>u,vY:()=>d});const t="ruler not supported",n=2e4,l="alertmanager",s="alerting-alertmanager",i=2e4,f=2e4,c=2e4,o="timeseries",m="table",r="stat";var u=(g=>(g.description="description",g.summary="summary",g.runbookURL="runbook_url",g.alertId="__alertId__",g.dashboardUID="__dashboardUid__",g.panelID="__panelId__",g))(u||{});const d={description:"Description",summary:"Summary",runbook_url:"Runbook URL",__dashboardUid__:"Dashboard UID",__panelId__:"Panel ID",__alertId__:"Alert ID"}},45849:(Z,O,e)=>{"use strict";e.d(O,{EG:()=>y,Eu:()=>u,GC:()=>c,G_:()=>F,HY:()=>M,JY:()=>o,LE:()=>h,P:()=>I,RY:()=>D,VX:()=>d,aM:()=>g,c$:()=>b,gt:()=>w,h_:()=>x,jq:()=>P,mA:()=>v,o_:()=>R,v_:()=>C,ye:()=>m,z3:()=>E});var t=e(86647),n=e(82002),l=e(39031),s=e(81168),i=e(97953),f=e(82963);const c="grafana",o="-- Grafana --";var m=(K=>(K.Alertmanager="alertmanager",K.Loki="loki",K.Prometheus="prometheus",K))(m||{});const r=["loki","prometheus"];function u(){return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleExternalRead)?(0,f.x)().filter(K=>r.includes(K.type)&&K.jsonData.manageAlerts!==!1).sort((K,W)=>K.name.localeCompare(W.name)):[]}function d(K){return u().find(W=>W.name===K)}function g(){return(0,f.x)().filter(K=>K.type==="alertmanager").sort((K,W)=>K.name.localeCompare(W.name))}const p={name:c,imgUrl:"public/img/grafana_icon.svg"};function E(){return[p,...g().map(K=>({name:K.name,displayName:K.name,imgUrl:K.meta.info.logos.small,meta:K.meta}))]}function h(K){const W=[],U={instance:i.Ob.read,notification:i.Fo.read};if(n.Vt.hasPermission(U[K].grafana)&&W.push(p),n.Vt.hasPermission(U[K].external)){const N=g().map(S=>({name:S.name,displayName:S.name,imgUrl:S.meta.info.logos.small,meta:S.meta}));W.push(...N)}return W}function a(K){const W=b(K);if(!W)throw new Error(`Data source ${K} not found`);if(W.type!=="loki"&&W.type!=="prometheus")throw new Error(`Unexpected data source type ${W.type}`);return W}function v(){const K=u().map(W=>W.name);return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&K.push(c),K}function x(){const K=u();return n.Vt.hasPermission(s.AccessControlAction.AlertingRuleRead)&&K.push(c),K}function y(K){return P(K)?K.name:K}function C(K){return P(K)?K.uid:c}function P(K){return K!==c}function D(K){return K!==c&&b(K)?.jsonData?.implementation===l.sK.prometheus}function M(K){return K===c}function b(K){return(0,f.x)().find(W=>W.name===K)}function R(K){return K===c?c:b(K)}function B(K){if(K===c)return c;const W=b(K);if(!W)throw new Error(`Datasource "${K}" not found`);return String(W.id)}function w(K){if(K===c)return c;const W=b(K);if(!W)throw new Error(`Datasource "${K}" not found`);return W.uid}function A(){return(0,t.F)().getList({alerting:!0})[0]}function I(){const K=(0,t.F)().getInstanceSettings("default");return K?.meta.alerting??!1?K:A()}function F(K){return K.jsonData.manageAlerts!==!1}},66367:(Z,O,e)=>{"use strict";e.d(O,{RT:()=>i,TZ:()=>c,rz:()=>f});var t=e(82897),n=e.n(t),l=e(39031),s=e(20194);function i(o){const m=o.filter(r=>!!r.trim()).map(r=>(0,s.tC)(r.trim()));return(0,t.uniqBy)(m,r=>r.name)}const f=o=>{const m=Object.entries(o).filter(([u])=>!(u.startsWith("__")&&u.endsWith("__"))),r=new URLSearchParams;return m.forEach(([u,d])=>r.append("matcher",`${u}=${d}`)),r},c=(o,m)=>{const r=p=>(p.startsWith("^")||(p="^"+p),p.endsWith("$")||(p=p+"$"),new RegExp(p)),u=(p,E)=>Object.entries(p.labels).some(([h,a])=>{if(!E.name||!E.value||E.name!==h)return!1;switch(E.operator){case l._M.equal:return E.value===a;case l._M.notEqual:return E.value!==a;case l._M.regex:return r(E.value).test(a);case l._M.notRegex:return!r(E.value).test(a);default:return!1}});return o.filter(p=>m.every(E=>u(p,E))).map(p=>({id:`${p.activeAt}-${p.value}`,data:{matchedInstance:p}}))}},10505:(Z,O,e)=>{"use strict";e.d(O,{ET:()=>p,GV:()=>g,HV:()=>b,J8:()=>y,RQ:()=>B,S0:()=>h,V2:()=>u,VN:()=>D,Vv:()=>P,Zl:()=>F,__:()=>M,aH:()=>R,eQ:()=>C,fm:()=>A,lC:()=>a,mH:()=>d,pF:()=>x,t6:()=>E,yM:()=>w});var t=e(82897),n=e.n(t),l=e(79662),s=e(40286),i=e(46063),f=e(37190),c=e(45849),o=e(66367),m=e(60048),r=e(93411);function u(K,W,U){const N=(0,c.EG)(K),S=m.Yd(N,W),Y=encodeURIComponent(m.$V(S)),Q=encodeURIComponent(N);return(0,r.u)(`/alerting/${Q}/${Y}/view`,{returnTo:U})}function d(K,W){return(0,r.u)("/explore",{left:JSON.stringify({datasource:K,queries:[{refId:"A",datasource:K,expr:W}],range:{from:"now-1h",to:"now"}})})}function g(K,W=""){return(0,r.u)(`/alerting/notifications/receivers/${encodeURIComponent(K)}/edit`,{alertmanager:W})}function p(K,W=""){return(0,r.u)("/alerting/routes/mute-timing/edit",{muteName:K,alertmanager:W})}function E(K,W){return(0,c.jq)(K)?(0,r._)(`/alerting/${encodeURIComponent(K.name)}/${encodeURIComponent(W.name)}/find`):window.location.href.split("?")[0]}function h(K){return K.reduce((W,{key:U,value:N})=>(W[U]=N,W),{})}const a=K=>{const W=K.queryString===void 0?void 0:String(K.queryString),U=K.alertState===void 0?void 0:String(K.alertState),N=K.dataSource===void 0?void 0:String(K.dataSource),S=K.ruleType===void 0?void 0:String(K.ruleType),Y=K.groupBy===void 0?void 0:String(K.groupBy).split(",");return{queryString:W,alertState:U,dataSource:N,groupBy:Y,ruleType:S}},v=K=>({queryString:K.get("queryString")??void 0,contactPoint:K.get("contactPoint")??void 0}),x=K=>{const W=K.queryString===void 0?void 0:String(K.queryString),U=K.silenceState===void 0?void 0:String(K.silenceState);return{queryString:W,silenceState:U}};function y(K){return Object.entries(K).map(([W,U])=>({key:W,value:U}))}function C(K,W,U){const N=new URLSearchParams(U);return W&&N.append(f.c4,W),`${K}?${N.toString()}`}function P(K,W){const U={alertname:W.name,...W.labels};return D(K,U)}function D(K,W){const U=new URLSearchParams;return U.append("alertmanager",K),(0,o.rz)(W).forEach((S,Y)=>U.append(Y,S)),(0,r.u)("/alerting/silence/new",U)}function M(K){return(0,r.u)(`/datasources/edit/${K.uid}`)}function b(K){return(0,r.u)(`/dashboards/f/${K}`)}function R(K){return(0,r.u)(`/dashboards/f/${K.uid}/${K.title}/settings`)}function B(K){return(0,r.u)(`/d/${encodeURIComponent(K)}`)}function w(K,W){return(0,r.u)(`/d/${encodeURIComponent(K)}`,{viewPanel:W})}function A(K,W,U,N=1e3){const S=new Date().getTime(),Y=()=>K().catch(Q=>{if(W(Q)&&new Date().getTime()-S<U)return new Promise(z=>setTimeout(z,N)).then(Y);throw Q});return Y()}const I={[i.bj.Alerting]:1,[i.x_.Firing]:1,[i.bj.Error]:1,[i.bj.Pending]:2,[i.x_.Pending]:2,[i.x_.Inactive]:2,[i.bj.NoData]:3,[i.bj.Normal]:4};function F(K,W){if(K===s.As.Importance)return(0,t.sortBy)(W,N=>[I[(0,i.ED)(N.state)],(0,l.pB)(N).toLocaleLowerCase()]);if(K===s.As.TimeAsc)return(0,t.sortBy)(W,N=>[new Date(N.activeAt)||new Date,(0,l.pB)(N).toLocaleLowerCase()]);if(K===s.As.TimeDesc)return(0,t.sortBy)(W,N=>[new Date(N.activeAt)||new Date,(0,l.pB)(N).toLocaleLowerCase()]).reverse();const U=(0,t.sortBy)(W,N=>(0,l.pB)(N).toLocaleLowerCase());return K===s.As.AlphaDesc&&U.reverse(),U}},46818:(Z,O,e)=>{"use strict";e.d(O,{$b:()=>r,Ez:()=>u,PE:()=>p,i6:()=>o,jK:()=>m,kk:()=>g,op:()=>x,oq:()=>f,yR:()=>v});var t=e(62992),n=e(25318),l=e(54899),s=e(77582),i=e(41904);const f=Object.freeze({loading:!1,result:void 0,error:void 0,dispatched:!1});function c(y,C=f,P){if(y.pending.match(P))return{result:C.result,loading:!0,error:C.error,dispatched:!0,requestId:P.meta.requestId};if(y.fulfilled.match(P)){if(C.requestId===void 0||C.requestId===P.meta.requestId)return{...C,result:P.payload,loading:!1,error:void 0}}else if(y.rejected.match(P)&&C.requestId===P.meta.requestId)return{...C,loading:!1,error:P.error};return C}function o(y,C){return(0,t.oM)({name:y,initialState:f,reducers:{},extraReducers:P=>P.addDefaultCase((D,M)=>c(C,D,M))})}function m(y,C,P){return(0,t.oM)({name:y,initialState:{},reducers:{},extraReducers:D=>D.addDefaultCase((M,b)=>{if((0,t.Gx)(C)(b)){const R=b,B=P(R.meta.arg);return{...M,[B]:c(C,M[B],R)}}return M})})}function r(y){return y.catch(C=>{throw{message:g(C),code:C.statusCode}})}function u(y,C){return y.then(P=>(C.successMessage&&s.h$.emit(n.SI.alertSuccess,[C.successMessage]),P)).catch(P=>{const D=g(P);throw s.h$.emit(n.SI.alertError,[`${C.errorMessage??"Error"}: ${D}`]),P})}const d="Unknown Error";function g(y){if((0,l.kW)(y))if(y.data?.message){let P=y.data?.message;return typeof y.data?.error=="string"&&(P+=`; ${y.data.error}`),P}else{if(Array.isArray(y.data)&&y.data.length&&y.data[0]?.message)return y.data.map(P=>P?.message).filter(P=>!!P).join(" ");if(y.statusText)return y.statusText}const C=y?.message;return C||((0,i.PN)(i.z7.unknownMessageFromError,{error:JSON.stringify(y)}),d)}function p(y){return Object.values(y).every(E)}function E(y){return y.dispatched&&!y.loading}function h(y){return Object.values(y).every(a)}function a(y){return y.dispatched&&!y.loading&&!y.error}function v(y){return Object.values(y).some(x)}function x(y){return y?y.dispatched&&y.loading:!1}},21767:(Z,O,e)=>{"use strict";e.d(O,{DQ:()=>C,WL:()=>P,aR:()=>w,lN:()=>D,mI:()=>y,s0:()=>M,tO:()=>K,uZ:()=>a,yh:()=>v});var t=e(69311),n=e(33180),l=e(86647),s=e(22069),i=e(99822),f=e(97573),c=e(46063),o=e(67162),m=e(6887),r=e(94617),u=e(97953),d=e(37190),g=e(45849),p=e(10505),E=e(79662),h=e(20383);const a=()=>{const{canCreateGrafanaRules:W,canCreateCloudRules:U}=(0,u.Rv)();return Object.freeze({name:"",labels:[{key:"",value:""}],annotations:[{key:d.q6.summary,value:""},{key:d.q6.description,value:""},{key:d.q6.runbookURL,value:""}],dataSourceName:null,type:W?r.$.grafana:U?r.$.cloudAlerting:void 0,group:"",folder:null,queries:[],recordingRulesQueries:[],condition:"",noDataState:c.g0.NoData,execErrState:c.g0.Error,evaluateFor:"5m",evaluateEvery:m.E,namespace:"",expression:"",forTime:1,forTimeUnit:"m"})};function v(W){const{name:U,expression:N,forTime:S,forTimeUnit:Y,type:Q}=W;if(Q===r.$.cloudAlerting)return{alert:U,for:`${S}${Y}`,annotations:(0,p.S0)(W.annotations||[]),labels:(0,p.S0)(W.labels||[]),expr:N};if(Q===r.$.cloudRecording)return{record:U,labels:(0,p.S0)(W.labels||[]),expr:N};throw new Error(`unexpected rule type: ${Q}`)}function x(W){return[...(0,p.J8)(W||{}),{key:"",value:""}]}function y(W){const{name:U,condition:N,noDataState:S,execErrState:Y,evaluateFor:Q,queries:z,isPaused:G}=W;if(N)return{grafana_alert:{title:U,condition:N,no_data_state:S,exec_err_state:Y,data:z.map(I),is_paused:Boolean(G)},for:Q,annotations:(0,p.S0)(W.annotations||[]),labels:(0,p.S0)(W.labels||[])};throw new Error("Cannot create rule without specifying alert condition")}function C(W){const{ruleSourceName:U,namespace:N,group:S,rule:Y}=W,Q=a();if((0,g.HY)(U))if((0,E.Pc)(Y)){const z=Y.grafana_alert;return{...Q,name:z.title,type:r.$.grafana,group:S.name,evaluateEvery:S.interval||Q.evaluateEvery,evaluateFor:Y.for||"0",noDataState:z.no_data_state,execErrState:z.exec_err_state,queries:z.data,condition:z.condition,annotations:x(Y.annotations),labels:x(Y.labels),folder:{title:N,id:z.namespace_id},isPaused:z.is_paused}}else throw new Error("Unexpected type of rule for grafana rules source");else if((0,E.cG)(Y)){const z=P(Y);return{...Q,...z,type:r.$.cloudAlerting,dataSourceName:U,namespace:N,group:S.name}}else if((0,E.yF)(Y)){const z=D(Y);return{...Q,...z,type:r.$.cloudRecording,dataSourceName:U,namespace:N,group:S.name}}else throw new Error("Unexpected type of rule for cloud rules source")}function P(W){const U=a(),[N,S]=W.for?(0,h.bG)(W.for):[U.forTime,U.forTimeUnit];return{name:W.alert,expression:W.expr,forTime:N,forTimeUnit:S,annotations:x(W.annotations),labels:x(W.labels)}}function D(W){return{name:W.record,expression:W.expr,labels:x(W.labels)}}const M=()=>{const W=(0,g.P)();if(!W)return[...R("A","B")];const U=(0,t.Rr)();return[{refId:"A",datasourceUid:W.uid,queryType:"",relativeTimeRange:U,model:{refId:"A",hide:!1}},...R("B","C")]},b=W=>{const U=getDefaultRelativeTimeRange();return[{refId:"A",datasourceUid:W[0]?.uid||"",queryType:"",relativeTimeRange:U,model:{refId:"A",hide:!1}}]},R=(...W)=>{const U=W[0],N=W[1],S={refId:W[0],hide:!1,type:f.Us.reduce,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[],type:o.$.IsAbove},operator:{type:"and"},query:{params:[U]},reducer:{params:[],type:"last"}}],reducer:"last",expression:"A"},Y={refId:N,hide:!1,type:f.Us.threshold,datasource:{uid:f.Yq,type:s.hr.type},conditions:[{type:"query",evaluator:{params:[0],type:o.$.IsAbove},operator:{type:"and"},query:{params:[N]},reducer:{params:[],type:"last"}}],expression:U};return[{refId:U,datasourceUid:f.Yq,queryType:"",model:S},{refId:N,datasourceUid:f.Yq,queryType:"",model:Y}]},B=async(W,U,N,S,Y,Q)=>{const z=[];for(const G of W){const k=await(0,l.F)().get(G.datasource?.uid?G.datasource:S),j={uid:k.uid,type:k.type},de=n.relativeToTimeRange(U),{interval:ge,intervalMs:re}=A(de,Q??k.interval,Y),ce={__interval:{text:ge,value:ge},__interval_ms:{text:re,value:re},...N},ie=k.interpolateVariablesInQueries?await k.interpolateVariablesInQueries([G],ce)[0]:G;if(j.uid===f.Yq){const fe={refId:ie.refId,queryType:"",relativeTimeRange:U,datasourceUid:f.Yq,model:ie};z.push(fe)}else{const fe=(0,l.F)().getInstanceSettings(j);if(fe&&fe.meta.alerting){const Ce={refId:ie.refId,queryType:ie.queryType??"",relativeTimeRange:U,datasourceUid:fe.uid,model:{...ie,maxDataPoints:Y,intervalMs:re}};z.push(Ce)}}}return z},w=async(W,U)=>{const{targets:N}=W;if(!W.id||!U.uid)return;const S=n.timeRangeToRelative(n.convertRawToRange(U.time)),Y=await B(N,S,W.scopedVars||{},W.datasource??void 0,W.maxDataPoints??void 0,W.interval??void 0);if(!Y.length||!Y.find(k=>k.datasourceUid!==f.Yq))return;if(!Y.find(k=>k.datasourceUid===f.Yq)){const[k,j]=R((0,i.Hs)(Y),"-");Y.push(k);const[de,ge]=R(k.refId,(0,i.Hs)(Y));Y.push(ge)}const{folderId:Q,folderTitle:z}=U.meta;return{type:r.$.grafana,folder:Q&&z?{id:Q,title:z}:void 0,queries:Y,name:W.title,condition:Y[Y.length-1].refId,annotations:[{key:d.q6.dashboardUID,value:U.uid},{key:d.q6.panelID,value:String(W.id)}]}};function A(W,U,N){return N?n.calculateInterval(W,N,U):U&&n.intervalToMs(U)>1e3?{interval:U,intervalMs:n.intervalToMs(U)}:{interval:"1s",intervalMs:1e3}}function I(W){const U=W.model;return F(U)&&U.instant&&U.range?{...W,model:{...U,range:!0,instant:!1}}:W}function F(W){return"expr"in W&&"instant"in W&&"range"in W}function K(W){return"expr"in W}},60048:(Z,O,e)=>{"use strict";e.d(O,{$V:()=>h,CK:()=>f,Dg:()=>c,OA:()=>E,Om:()=>v,Yd:()=>i,Zk:()=>l,s0:()=>C});var t=e(45849),n=e(79662);function l(P,D,M,b){return(0,n.Pc)(b)?{uid:b.grafana_alert.uid,ruleSourceName:"grafana"}:{ruleSourceName:P,namespace:D,groupName:M,rulerRuleHash:v(b)}}function s(P,D,M,b){return{ruleSourceName:P,namespace:D,groupName:M,ruleHash:x(b)}}function i(P,D){const M=D.namespace.name,b=D.group.name;if(D.rulerRule)return l(P,M,b,D.rulerRule);if(D.promRule)return s(P,M,b,D.promRule);throw new Error("Could not create an id for a rule that is missing both `rulerRule` and `promRule`.")}function f(P){return l(P.ruleSourceName,P.namespace,P.group.name,P.rule)}function c(P,D){return(0,n.Kl)(P)&&(0,n.Kl)(D)?P.uid===D.uid:(0,n.E4)(P)&&(0,n.E4)(D)?P.groupName===D.groupName&&P.namespace===D.namespace&&P.rulerRuleHash===D.rulerRuleHash&&P.ruleSourceName===D.ruleSourceName:(0,n.qE)(P)&&(0,n.qE)(D)?P.groupName===D.groupName&&P.namespace===D.namespace&&P.ruleHash===D.ruleHash&&P.ruleSourceName===D.ruleSourceName:!1}const o="cri",m="pri";function r(P){return P.replace(/\$/g,"_DOLLAR_")}function u(P){return P.replace(/\_DOLLAR\_/g,"$")}function d(P){return P.replace(/\//g,"").replace(/\\/g,"")}function g(P){return P.replace(/\x1f/g,"/").replace(/\x1e/g,"\\")}function p(P,D=!1){const b=(D?decodeURIComponent(P):P).split("$");if(b.length===1)return{uid:P,ruleSourceName:"grafana"};if(b.length===5){const[R,B,w,A,I]=b.map(u).map(g);if(R===o)return{ruleSourceName:B,namespace:w,groupName:A,rulerRuleHash:I};if(R===m)return{ruleSourceName:B,namespace:w,groupName:A,ruleHash:I}}throw new Error(`Failed to parse rule location: ${P}`)}function E(P,D=!1){if(P)try{return p(P,D)}catch{return}}function h(P){return(0,n.Kl)(P)?P.uid:(0,n.E4)(P)?[o,P.ruleSourceName,P.namespace,P.groupName,P.rulerRuleHash].map(String).map(r).map(d).join("$"):[m,P.ruleSourceName,P.namespace,P.groupName,P.ruleHash].map(String).map(r).map(d).join("$")}function a(P){let D=0;if(P.length===0)return D;for(let M=0;M<P.length;M++){const b=P.charCodeAt(M);D=(D<<5)-D+b,D=D&D}return D}function v(P){if((0,n.yF)(P))return a(JSON.stringify([P.record,P.expr,y(P.labels)])).toString();if((0,n.cG)(P))return a(JSON.stringify([P.alert,P.expr,y(P.annotations),y(P.labels)])).toString();if((0,n.Pc)(P))return P.grafana_alert.uid;throw new Error("only recording and alerting ruler rules can be hashed")}function x(P){if((0,n.OP)(P))return a(JSON.stringify([P.type,P.query,y(P.labels)])).toString();if((0,n.x_)(P))return a(JSON.stringify([P.type,P.query,y(P.annotations),y(P.labels)])).toString();throw new Error("only recording and alerting rules can be hashed")}function y(P){return JSON.stringify(Object.entries(P||{}).sort((D,M)=>D[0].localeCompare(M[0])))}function C(P){return(0,n.Kl)(P)?t.GC:P.ruleSourceName}},79662:(Z,O,e)=>{"use strict";e.d(O,{Aq:()=>b,C7:()=>M,E:()=>g,E4:()=>a,Jq:()=>w,Kl:()=>h,OP:()=>m,PW:()=>A,Pc:()=>d,Re:()=>D,SS:()=>C,Wd:()=>v,cG:()=>r,m$:()=>E,pB:()=>p,qE:()=>x,ub:()=>B,vU:()=>y,x_:()=>o,yF:()=>u});var t=e(82897),n=e.n(t),l=e(23309),s=e(46063),i=e(734),f=e(37190),c=e(45849);function o(I){return typeof I=="object"&&I.type===s.pz.Alerting}function m(I){return typeof I=="object"&&I.type===s.pz.Recording}function r(I){return typeof I=="object"&&"alert"in I}function u(I){return typeof I=="object"&&"record"in I}function d(I){return typeof I=="object"&&"grafana_alert"in I}function g(I){return I.rulerRule&&d(I.rulerRule)&&Boolean(I.rulerRule.grafana_alert.is_paused)}function p(I){return JSON.stringify(I.labels)}function E(I){return I.error&&I.error?.message?.includes(f.jZ)}function h(I){return"uid"in I}function a(I){return"rulerRuleHash"in I}function v(I){return Object.values(s.pz).includes(I)}function x(I){return"ruleHash"in I}function y(I){switch(I){case"ok":return i.VG.Ok;case"nodata":return i.VG.NoData;case"error":case"err":return i.VG.Error;case"unknown":return i.VG.Unknown;default:return}}function C(I){return I===s.x_.Inactive?"Normal":(0,t.capitalize)(I)}const P=I=>I.reduce((F,{dataSourceName:K,name:W,groups:U})=>(U.forEach(({name:N,rules:S})=>{S.forEach(Y=>{o(Y)&&F.push({dataSourceName:K,namespaceName:W,groupName:N,rule:Y})})}),F),[]),D=I=>o(I.promRule)?I.promRule:null,M=I=>I.reduce((F,{rulesSource:K,name:W,groups:U})=>(U.forEach(({name:N,rules:S})=>{S.forEach(Y=>{Y.promRule&&o(Y.promRule)&&F.push({dataSourceName:(0,c.EG)(K),namespaceName:W,groupName:N,...Y})})}),F),[]);function b(I){let F;return Object.values(l.Z).includes(I)?F=I:F=(0,s.ED)(I),R[F]}const R={[s.x_.Inactive]:"good",[s.x_.Firing]:"bad",[s.x_.Pending]:"warning",[s.bj.Alerting]:"bad",[s.bj.Error]:"bad",[s.bj.NoData]:"info",[s.bj.Normal]:"good",[s.bj.Pending]:"warning",[l.Z.NoData]:"info",[l.Z.Paused]:"warning",[l.Z.Alerting]:"bad",[l.Z.OK]:"good",[l.Z.Pending]:"warning",[l.Z.Unknown]:"info"};function B(I){return I?.alerts?I.alerts.reduce((F,K)=>{const W=(0,s.ED)(K.state)!==s.bj.Normal;if(K.activeAt&&W){const U=new Date(K.activeAt);if(F===null||F.getTime()>U.getTime())return U}return F},null):null}function w(I){return Array.isArray(I.source_tenants)}function A(I){return d(I)?I.grafana_alert.title:r(I)?I.alert:u(I)?I.record:""}},20383:(Z,O,e)=>{"use strict";e.d(O,{bG:()=>n,gV:()=>r,nd:()=>m,qr:()=>s,wd:()=>i});var t=e(4528);function n(u){const d=u.match(/(\d+)(\w+)/);if(d)return[Number(d[1]),d[2]];throw new Error(`Invalid interval description: ${u}`)}function l(u){const{sec:d,count:g}=describeInterval(u);return d*g}const s=Object.entries(t.t).map(([u,d])=>({label:u[0].toUpperCase()+u.slice(1),value:d}));function i(u){try{return m(u),!0}catch{return!1}}const f={ms:1,s:1e3,m:60*1e3,h:60*60*1e3,d:24*60*60*1e3,w:7*24*60*60*1e3,y:365*24*60*60*1e3},c=new RegExp(/^(?:(?<value>\d+)(?<type>ms|s|m|h|d|w|y))|0$/),o=new Error(`Must be of format "(number)(unit)", for example "1m", or just "0". Available units: ${Object.values(t.t).join(", ")}`);function m(u){let d=u,g=[];function p(h){const a=c.exec(h),v=a?.groups?.value&&a?.groups?.type;if(!a||!v)throw o;a&&a.groups?.value&&a.groups?.type&&(d=d.replace(a[0],""),g.push([Number(a.groups.value),a.groups.type])),d&&p(d)}if(p(u),!g.length)throw o;return g.reduce((h,[a,v])=>{const x=a*f[v];return h+x},0)}const r=u=>u.includes("0001-01-01T00")},93411:(Z,O,e)=>{"use strict";e.d(O,{_:()=>l,u:()=>n});var t=e(35645);function n(s,i){const c=new URLSearchParams(i).toString();return`${t.v.appSubUrl}${s}${c?`?${c}`:""}`}function l(s,i){const c=new URLSearchParams(i).toString();try{const o=new URL(t.v.appSubUrl,t.v.appUrl);return o.pathname=s,`${o.href}${c?`?${c}`:""}`}catch{return n(s,i)}}},70659:(Z,O,e)=>{"use strict";e.d(O,{Dl:()=>s,_E:()=>l,lK:()=>i,xD:()=>n});var t=e(54899);function n(f){return(0,t.i)().post("/api/annotations",f)}function l(f){return(0,t.i)().put(`/api/annotations/${f.id}`,f)}function s(f){return(0,t.i)().delete(`/api/annotations/${f.id}`)}async function i(){return(await(0,t.i)().get("/api/annotations/tags")).result.tags.map(({tag:c,count:o})=>({term:c,count:o}))}},86953:(Z,O,e)=>{"use strict";e.d(O,{r:()=>r});var t=e(59980),n=e(39859),l=e(9471),s=e(33180),i=e(40400),f=e(75434),c=e(573);let o=100;function m(){return"AQ"+o++}function r(u,d,g){const p={...c.yA,...d.annotations},E={...p.getDefaultQuery?.(),...g},h=p.prepareAnnotation(E);if(!h)return(0,t.of)({});const a=p.prepareQuery(h);if(!a)return(0,t.of)({});const v=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,x=s.calculateInterval(u.range,v,d.interval),y={__interval:{text:x.interval,value:x.interval},__interval_ms:{text:x.intervalMs.toString(),value:x.intervalMs},__annotation:{text:h.name,value:h}},C={startTime:Date.now(),requestId:m(),range:u.range,maxDataPoints:v,scopedVars:y,...x,app:i.zj.Dashboard,publicDashboardAccessToken:u.dashboard.meta.publicDashboardAccessToken,timezone:u.dashboard.timezone,targets:[{...a,refId:"Anno"}]};return(0,f.v7)(d,C).pipe((0,n.z)(P=>P.series?p.processEvents(h,P.series).pipe((0,l.U)(D=>({panelData:P,events:D}))):(0,t.of)({panelData:P,events:[]})))}},573:(Z,O,e)=>{"use strict";e.d(O,{$w:()=>v,r0:()=>g,yA:()=>u,yr:()=>x});var t=e(82897),n=e.n(t),l=e(59980),s=e(39859),i=e(9471),f=e(74940),c=e(14582),o=e(89890),m=e(20442),r=e(47694);const u={prepareAnnotation:y=>{if((0,t.isString)(y?.query)){const{query:C,...P}=y;return{...P,target:{refId:"annotation_query",query:C},mappings:{}}}return y},prepareQuery:y=>y.target,processEvents:(y,C)=>h(C,y.mappings)};function d(){return y=>y.pipe((0,s.z)(C=>{if(!C?.length)return(0,l.of)(void 0);if(C.length===1)return(0,l.of)(C[0]);const P={interpolate:D=>D};return(0,l.of)(C).pipe(f.Y.mergeTransformer.operator({},P),(0,i.U)(D=>D[0]))}))}const g=[{key:"time",field:y=>y.fields.find(C=>C.type===c.fS.time),placeholder:"time, or the first time field"},{key:"timeEnd",help:"When this field is defined, the annotation will be treated as a range"},{key:"title"},{key:"text",field:y=>y.fields.find(C=>C.type===c.fS.string),placeholder:"text, or the first text field"},{key:"tags",split:",",help:"The results will be split on comma (,)"},{key:"id"}],p=[{key:"color"},{key:"isRegion"},{key:"source"}],E=[...r.vc.isPublicDashboardView?p:[],...g,{key:"userId"},{key:"login"},{key:"email"},{key:"prevState"},{key:"newState"},{key:"data"},{key:"panelId"},{key:"alertId"},{key:"dashboardId"},{key:"dashboardUID"}];function h(y,C){return(0,l.of)(y).pipe(d(),(0,i.U)(P=>{if(!P?.length)return[];let D=!1,M=!1;const b={};for(const w of P.fields){const A=(0,o.C)(w,P);b[A.toLowerCase()]=w}C||(C={});const R=[];for(const w of E){const A=C[w.key]||{};if(A.source===m.L.Skip)continue;const I={key:w.key,split:w.split};if(A.source===m.L.Text)I.text=A.value;else{const F=(A.value||w.key).toLowerCase();I.field=b[F],!I.field&&w.field&&(I.field=w.field(P))}(I.field||I.text)&&(R.push(I),I.key==="time"?D=!0:I.key==="text"&&(M=!0))}if(!D||!M)return console.error("Cannot process annotation fields. No time or text present."),[];const B=[];for(let w=0;w<P.length;w++){const A={type:"default",color:"red"};for(const I of R){let F;if(I.text)F=I.text;else if(I.field&&(F=I.field.values.get(w),F!==void 0&&I.regex)){const K=I.regex.exec(F);K&&(F=K[1]?K[1]:K[0])}F!=null&&(I.split&&typeof F=="string"&&(F=F.split(",")),A[I.key]=F)}B.push(A)}return B}))}const a=["prometheus","loki","elasticsearch","grafana-opensearch-datasource"];function v(y){const{type:C}=y;return!(C==="datasource"||a.includes(C))}function x(y){const{type:C}=y;return a.includes(C)}},56777:(Z,O,e)=>{"use strict";e.d(O,{ZP:()=>m,dF:()=>f,iK:()=>s,j4:()=>i,ql:()=>c});var t=e(62992);const n={hasFetched:!1,includeExpired:!1,keys:[],keysIncludingExpired:[],searchQuery:""},l=(0,t.oM)({name:"apiKeys",initialState:n,reducers:{apiKeysLoaded:(r,u)=>{const{keys:d,keysIncludingExpired:g}=u.payload,p=u.payload.keys.length===0&&u.payload.keysIncludingExpired.length>0?!0:r.includeExpired;return{...r,hasFetched:!0,keys:d,keysIncludingExpired:g,includeExpired:p}},setSearchQuery:(r,u)=>({...r,searchQuery:u.payload}),includeExpiredToggled:r=>({...r,includeExpired:!r.includeExpired}),isFetching:r=>({...r,hasFetched:!1})}}),{apiKeysLoaded:s,includeExpiredToggled:i,isFetching:f,setSearchQuery:c}=l.actions,m={apiKeys:l.reducer}},86475:(Z,O,e)=>{"use strict";e.d(O,{D:()=>t,Z:()=>n});const t="connections",n={Base:`/${t}`,YourConnections:`/${t}/your-connections`,DataSources:`/${t}/your-connections/datasources`,DataSourcesNew:`/${t}/your-connections/datasources/new`,DataSourcesEdit:`/${t}/your-connections/datasources/edit/:uid`,DataSourcesDashboards:`/${t}/your-connections/datasources/edit/:uid/dashboards`,ConnectData:`/${t}/connect-data`,DataSourcesDetails:`/${t}/datasources/:id`}},10655:(Z,O,e)=>{"use strict";e.d(O,{FJ:()=>E,Mi:()=>d,RS:()=>a,Rh:()=>m,WJ:()=>p,Ym:()=>r,bS:()=>g,r5:()=>h,zZ:()=>u});var t=e(38853),n=e(65583),l=e(54899),s=e(659),i=e(60499);function f(v){return typeof v=="object"&&v!=null&&"error"in v}const c=({baseUrl:v})=>async x=>{try{const{data:y,...C}=await(0,n.n)((0,l.i)().fetch({...x,url:v+x.url,showErrorAlert:x.showErrorAlert}));return{data:y,meta:C}}catch(y){return x.manageError?x.manageError(y):{error:y}}},o=v=>({error:(0,l.kW)(v)&&v.status!==404?v:null}),m=(0,t.LC)({reducerPath:"publicDashboardApi",baseQuery:c({baseUrl:"/api"}),tagTypes:["PublicDashboard","AuditTablePublicDashboard"],refetchOnMountOrArgChange:!0,endpoints:v=>({getPublicDashboard:v.query({query:x=>({url:`/dashboards/uid/${x}/public-dashboards`,manageError:o,showErrorAlert:!1}),async onQueryStarted(x,{dispatch:y,queryFulfilled:C}){try{await C}catch(P){f(P)&&(0,l.kW)(P.error)&&y((0,s.$l)((0,i.t_)(P.error.data.message)))}},providesTags:(x,y,C)=>[{type:"PublicDashboard",id:C}]}),createPublicDashboard:v.mutation({query:x=>({url:`/dashboards/uid/${x.dashboard.uid}/public-dashboards`,method:"POST",data:x.payload}),async onQueryStarted({dashboard:x,payload:y},{dispatch:C,queryFulfilled:P}){const{data:D}=await P;C((0,s.$l)((0,i.AT)("Dashboard is public!"))),x.updateMeta({publicDashboardUid:D.uid,publicDashboardEnabled:D.isEnabled})},invalidatesTags:(x,y,{dashboard:C})=>[{type:"PublicDashboard",id:C.uid}]}),updatePublicDashboard:v.mutation({query:x=>({url:`/dashboards/uid/${x.dashboard.uid}/public-dashboards/${x.payload.uid}`,method:"PUT",data:x.payload}),async onQueryStarted({dashboard:x,payload:y},{dispatch:C,queryFulfilled:P}){const{data:D}=await P;C((0,s.$l)((0,i.AT)("Public dashboard updated!"))),x.updateMeta({publicDashboardUid:D.uid,publicDashboardEnabled:D.isEnabled})},invalidatesTags:(x,y,{payload:C})=>[{type:"PublicDashboard",id:C.dashboardUid}]}),addRecipient:v.mutation({query:()=>({url:""})}),deleteRecipient:v.mutation({query:()=>({url:""})}),reshareAccessToRecipient:v.mutation({query:()=>({url:""})}),listPublicDashboards:v.query({query:()=>({url:"/dashboards/public-dashboards"}),providesTags:["AuditTablePublicDashboard"]}),deletePublicDashboard:v.mutation({query:x=>({url:`/dashboards/uid/${x.dashboardUid}/public-dashboards/${x.uid}`,method:"DELETE"}),async onQueryStarted({dashboard:x,uid:y},{dispatch:C,queryFulfilled:P}){await P,C((0,s.$l)((0,i.AT)("Public dashboard deleted!"))),x?.updateMeta({publicDashboardUid:y,publicDashboardEnabled:!1})},invalidatesTags:(x,y,{dashboardUid:C})=>[{type:"PublicDashboard",id:C},"AuditTablePublicDashboard"]})})}),{useGetPublicDashboardQuery:r,useCreatePublicDashboardMutation:u,useUpdatePublicDashboardMutation:d,useDeletePublicDashboardMutation:g,useListPublicDashboardsQuery:p,useAddRecipientMutation:E,useDeleteRecipientMutation:h,useReshareAccessToRecipientMutation:a}=m},134:(Z,O,e)=>{"use strict";e.d(O,{E:()=>r});var t=e(82897),n=e(86647),l=e(47694),s=e(86648),i=e(6297),f=e(59096),c=e(15546),o=e(10672);function m(u){return u.libraryPanel&&typeof u.libraryPanel.name=="string"&&typeof u.libraryPanel.uid=="string"}class r{async makeExportable(d){d.cleanUpRepeats();const g=d.getSaveModelClone();g.id=null,d.processRepeats();const p=[],E={},h={},a={},v=new Map;for(const P of g.getVariables())a[P.name]=P;const x=(P,D)=>{if(P.datasource===void 0){P.datasource=D;return}let M=P.datasource,b=null;const R=M?.uid;return R&&R.indexOf("$")===0&&(b=a[R.substring(1)],b&&b.current&&(M=b.current.value)),(0,n.F)().get(M).then(B=>{if(B.meta?.builtIn||(E["datasource"+B.meta?.id]={type:"datasource",id:B.meta.id,name:B.meta.name,version:B.meta.info.version||"1.0.0"},b))return;const w="DS_"+B.name.replace(" ","_").toUpperCase();h[w]={name:w,label:B.name,description:"",type:"datasource",pluginId:B.meta?.id,pluginName:B.meta?.name},P.datasource={type:B.meta.id,uid:"${"+w+"}"}})},y=async P=>{if(P.type!=="row"){if(await x(P),P.targets)for(const M of P.targets)await x(M,P.datasource);const D=l.ZP.panels[P.type];D&&(E["panel"+D.id]={type:"panel",id:D.id,name:D.name,version:D.info.version})}},C=async P=>{if((0,i.V)(P)){const{name:D,uid:M}=P.libraryPanel;let b=P.libraryPanel.model;b||(b=(await(0,s.Mh)(M,!0)).model);const{gridPos:R,id:B,...w}=b;v.has(M)||v.set(M,{name:D,uid:M,kind:f.V.Panel,model:w})}};try{for(const M of g.panels)if(await y(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const b of M.panels)await y(b);for(const M of g.getVariables())(0,c.Xh)(M)&&(await x(M),M.options=[],M.current={},M.refresh=M.refresh!==o.Bd.never?M.refresh:o.Bd.onDashboardLoad);for(const M of g.annotations.list)await x(M);E.grafana={type:"grafana",id:"grafana",name:"Grafana",version:l.ZP.buildInfo.version},(0,t.each)(h,M=>{p.push(M)});for(const M of d.panels)if(await C(M),M.collapsed!==void 0&&M.collapsed===!0&&M.panels)for(const b of M.panels)await C(b);for(const M of g.getVariables())if((0,c.VC)(M)){const b="VAR_"+M.name.replace(" ","_").toUpperCase();p.push({name:b,type:"constant",label:M.label||M.name,value:M.query,description:""}),M.query="${"+b+"}",M.current={value:M.query,text:M.query,selected:!1},M.options=[M.current]}const P=[...v.entries()].reduce((M,[b,R])=>(M[b]=R,M),{}),D=(0,t.defaults)({__inputs:p,__elements:P,__requires:(0,t.sortBy)(E,["id"])},g);for(let M=0;M<D.panels.length;M++){const b=D.panels[M];m(b)&&(D.panels[M]={gridPos:b.gridPos,id:b.id,libraryPanel:{uid:b.libraryPanel.uid,name:b.libraryPanel.name}})}return D}catch(P){return console.error("Export failed:",P),{error:P}}}}},64503:(Z,O,e)=>{"use strict";e.d(O,{u:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(8180);const i=({icon:c,iconType:o,iconSize:m,tooltip:r,onClick:u,children:d})=>{const g=(0,l.wW)(f);return n.createElement("div",{className:g.noBorderContainer},c&&n.createElement(s.h,{name:c,size:m,iconType:o,tooltip:r,tooltipPlacement:"bottom",onClick:u}),d)},f=c=>({noBorderContainer:t.css`
    padding: 0 ${c.spacing(.5)};
    display: flex;
  `})},37877:(Z,O,e)=>{"use strict";e.d(O,{C:()=>r});var t=e(68404),n=e(21053),l=e(82378),s=e(5562),i=e(32873),f=e(77582),c=e(35287),o=e(19349),m=e(45984);class r extends t.Component{constructor(){super(...arguments),this.onChangeRefreshInterval=d=>{(0,o.$t)().setAutoRefresh(d),this.forceUpdate()},this.onRefresh=()=>((0,o.$t)().refreshTimeModel(),Promise.resolve()),this.onMoveBack=()=>{f.h$.publish(new m.Qt({direction:m.Im.Left}))},this.onMoveForward=()=>{f.h$.publish(new m.Qt({direction:m.Im.Right}))},this.onChangeTimePicker=d=>{const{dashboard:g}=this.props,p=g.timepicker,E=p.nowDelay&&d.raw.to==="now",h=n.isMathString(d.raw.from)?d.raw.from:d.from,a=n.isMathString(d.raw.to)?d.raw.to:d.to,v={from:h,to:E?"now-"+p.nowDelay:a};(0,o.$t)().setTime(v)},this.onChangeTimeZone=d=>{this.props.dashboard.timezone=d,this.props.onChangeTimeZone(d),this.onRefresh()},this.onChangeFiscalYearStartMonth=d=>{this.props.dashboard.fiscalYearStartMonth=d,this.onRefresh()},this.onZoom=()=>{f.h$.publish(new m.p8({scale:2}))}}componentDidMount(){this.sub=this.props.dashboard.events.subscribe(l.md,()=>this.forceUpdate())}componentWillUnmount(){this.sub?.unsubscribe()}render(){const{dashboard:d,isOnCanvas:g}=this.props,{refresh_intervals:p}=d.timepicker,E=(0,o.$t)().getValidIntervals(p||s.o5),h=(0,o.$t)().timeRange(),a=d.getTimezone(),v=d.fiscalYearStartMonth,x=d.panelInEdit?.isEditing;return t.createElement(t.Fragment,null,t.createElement(i.a,{value:h,onChange:this.onChangeTimePicker,timeZone:a,fiscalYearStartMonth:v,onMoveBackward:this.onMoveBack,onMoveForward:this.onMoveForward,onZoom:this.onZoom,onChangeTimeZone:this.onChangeTimeZone,onChangeFiscalYearStartMonth:this.onChangeFiscalYearStartMonth,isOnCanvas:g}),t.createElement(s.dP,{onIntervalChanged:this.onChangeRefreshInterval,onRefresh:this.onRefresh,value:d.refresh,intervals:E,isOnCanvas:g,tooltip:(0,c.t)("dashboard.toolbar.refresh","Refresh dashboard"),noIntervalPicker:x}))}}},30014:(Z,O,e)=>{"use strict";e.d(O,{t:()=>ae});var t=e(9892),n=e(68404),l=e(36635),s=e(70356),i=e(8928),f=e(83383),c=e(68183),o=e(37932),m=e(32434),r=e(5191),u=e(98102),d=e(34719),g=e(26202),p=e(64319),E=e(8125),h=e(35224),a=e(95379),v=e(89097),x=e(47694),y=e(34177),C=e(60499),P=e(77582);function D(ve,Ve){const[it,rt]=(0,n.useState)();return(0,n.useEffect)(()=>{const pe=ve.subscribe(Ve,rt);return()=>pe.unsubscribe()},[ve,Ve]),it}var M=e(35287),b=e(61962),R=e(72648),B=e(71698),w=e(31403),A=e(39904),I=e(41818),F=e(38484),K=e(663),W=e(81168),U=e(58790);const N=({dashboard:ve})=>{const Ve=(0,n.useMemo)(()=>(0,K.uZ)(),[]),it=(0,W.useDispatch)(),rt=(0,W.useSelector)(pe=>pe.dashboard.initialDatasource);return n.createElement(F.v,null,n.createElement(F.v.Item,{key:"add-visualisation",label:(0,M.t)("dashboard.add-menu.visualization","Visualization"),testId:c.wl.components.PageToolbar.itemButton("Add new visualization menu item"),onClick:()=>{const pe=(0,K.LU)(ve,rt);(0,I.ff)("dashboards_toolbar_add_clicked",{item:"add_visualization"}),o.E1.partial({editPanel:pe}),it((0,U.Rd)(void 0))}}),n.createElement(F.v.Item,{key:"add-row",label:(0,M.t)("dashboard.add-menu.row","Row"),testId:c.wl.components.PageToolbar.itemButton("Add new row menu item"),onClick:()=>{(0,I.ff)("dashboards_toolbar_add_clicked",{item:"add_row"}),(0,K.L_)(ve)}}),n.createElement(F.v.Item,{key:"add-panel-lib",label:(0,M.t)("dashboard.add-menu.import","Import from library"),testId:c.wl.components.PageToolbar.itemButton("Add new panel from panel library menu item"),onClick:()=>{(0,I.ff)("dashboards_toolbar_add_clicked",{item:"import_from_library"}),(0,K.RB)(ve)}}),n.createElement(F.v.Item,{key:"add-panel-clipboard",label:(0,M.t)("dashboard.add-menu.paste-panel","Paste panel"),testId:c.wl.components.PageToolbar.itemButton("Add new panel from clipboard menu item"),onClick:()=>{(0,I.ff)("dashboards_toolbar_add_clicked",{item:"paste_panel"}),(0,K.Dh)(ve,Ve)},disabled:!Ve}))},S=({dashboard:ve})=>{const Ve=Y((0,R.l4)()),[it,rt]=(0,n.useState)(!1);return n.createElement(B.L,{overlay:()=>n.createElement(N,{dashboard:ve}),placement:"bottom",offset:[0,6],onVisibleChange:rt},n.createElement(w.zx,{icon:"panel-add",size:"lg",fill:"outline",className:(0,t.cx)(Ve.button,Ve.buttonIcon,Ve.buttonText),"data-testid":c.wl.components.PageToolbar.itemButton("Add panel button")},n.createElement(M.cC,{i18nKey:"dashboard.toolbar.add"},"Add"),n.createElement(A.J,{name:it?"angle-up":"angle-down",size:"lg"})))};function Y(ve){return{button:(0,t.css)({label:"add-panel-button",padding:ve.spacing(.5,.5,.5,.75),height:ve.spacing((ve.components.height.sm+ve.components.height.md)/2),borderRadius:ve.shape.radius.default}),buttonIcon:(0,t.css)({svg:{margin:0}}),buttonText:(0,t.css)({label:"add-panel-button-text",fontSize:ve.typography.body.fontSize,span:{marginLeft:ve.spacing(.67)}})}}var Q=e(63205),z=e(51917),G=e(9398),k=e(10079),j=e(54294),de=e(45984),ge=e(64503),re=e(37877);const ce={setStarred:b.OQ,updateTimeZoneForSession:j.YT},ie=(0,l.connect)(null,ce),fe=c.wl.pages.Dashboard.DashNav,Ce=[],ee=[];function ne(ve){Ce.push(ve)}function X(ve){ee.push(ve)}const te=n.memo(ve=>{const Ve=(0,m.N)(),{chrome:it}=(0,y.p)(),{showModal:rt,hideModal:pe}=(0,n.useContext)(r.kr);D(ve.dashboard.events,de.hS);const Ie=ve.dashboard.snapshot?.originalUrl??"",We=()=>{window.location.href=i.QX.sanitizeUrl(ve.dashboard.snapshot.originalUrl)},Je=(0,C.iG)(),He=()=>{try{const he=new URL(i.QX.sanitizeUrl(Ie),x.ZP.appUrl),De=new URL(x.ZP.appUrl);he.host!==De.host?P.h$.publish(new de.Dn({component:u.s,props:{title:"Proceed to external site?",modalClass:_,body:n.createElement(n.Fragment,null,n.createElement("p",null,"This link connects to an external website at"," ",n.createElement("code",null,Ie)),n.createElement("p",null,"Are you sure you'd like to proceed?")),confirmVariant:"primary",confirmText:"Proceed",onConfirm:We}})):We()}catch(he){Je.error("Invalid URL",he instanceof Error?he.message:void 0)}},Ae=()=>{const he=(0,G.h4)(),{dashboard:De,setStarred:$e}=ve;he.starDashboard(De.uid,Boolean(De.meta.isStarred)).then(ke=>{$e({id:De.uid,title:De.title,url:De.meta.url??"",isStarred:ke}),De.meta.isStarred=ke,Ve()})},et=()=>{o.E1.partial({viewPanel:null})},_e=()=>{it.onToggleKioskMode()},Se=()=>{o.E1.partial({editview:"settings"})},Fe=()=>{k.r0.prev()},Xe=()=>{k.r0.next()},Qe=()=>{k.r0.stop(),Ve()},ct=(he,De)=>{he.map(($e,ke)=>{const tt=$e.component,Ge=n.createElement(tt,{...ve,key:`button-custom-${ke}`});typeof $e.index=="number"?De.splice($e.index,0,Ge):De.push(Ge)})},ht=()=>k.r0.isPlaying;(0,n.useEffect)(()=>{const he=ve.dashboard,De=ve.shareModalActiveTab,{canShare:$e}=he.meta;return $e&&De&&rt(z.ShareModal,{dashboard:he,onDismiss:pe,activeTab:De}),()=>{pe()}},[rt,pe,ve.dashboard,ve.shareModalActiveTab]);const ft=()=>{const{dashboard:he,kioskMode:De}=ve,{canStar:$e,canShare:ke,isStarred:tt}=he.meta,Ge=[];if(De||ht())return[];if($e){let dt=tt?(0,M.t)("dashboard.toolbar.unmark-favorite","Unmark as favorite"):(0,M.t)("dashboard.toolbar.mark-favorite","Mark as favorite");Ge.push(n.createElement(ge.u,{tooltip:dt,icon:tt?"favorite":"star",iconType:tt?"mono":"default",iconSize:"lg",onClick:Ae,key:"button-star"}))}return ke&&Ge.push(n.createElement(r.JY,{key:"button-share"},({showModal:dt,hideModal:pt})=>n.createElement(ge.u,{tooltip:(0,M.t)("dashboard.toolbar.share","Share dashboard or panel"),icon:"share-alt",iconSize:"lg",onClick:()=>{dt(z.ShareModal,{dashboard:he,onDismiss:pt})}}))),he.meta.publicDashboardEnabled&&Ge.push(n.createElement(d.V,{key:"public-dashboard",name:"Public",colorIndex:5,"data-testid":fe.publicDashboardTag})),ct(Ce,Ge),Ge},Re=()=>n.createElement(g.h,{key:"playlist-buttons"},n.createElement(p.h,{tooltip:(0,M.t)("dashboard.toolbar.playlist-previous","Go to previous dashboard"),icon:"backward",onClick:Fe,narrow:!0}),n.createElement(p.h,{onClick:Qe},n.createElement(M.cC,{i18nKey:"dashboard.toolbar.playlist-stop"},"Stop playlist")),n.createElement(p.h,{tooltip:(0,M.t)("dashboard.toolbar.playlist-next","Go to next dashboard"),icon:"forward",onClick:Xe,narrow:!0})),nt=()=>{const{dashboard:he,updateTimeZoneForSession:De,hideTimePicker:$e}=ve;return $e?null:n.createElement(re.C,{dashboard:he,onChangeTimeZone:De,key:"time-controls"})},le=()=>{const{dashboard:he,onAddPanel:De,isFullscreen:$e,kioskMode:ke}=ve,{canSave:tt,canEdit:Ge,showSettings:dt}=he.meta,{snapshot:pt}=he,Ke=pt&&pt.originalUrl,je=[],ot=x.ZP.featureToggles.topnav?null:n.createElement(p.h,{tooltip:(0,M.t)("dashboard.toolbar.tv-button","Cycle view mode"),icon:"monitor",onClick:_e,key:"tv-button"});return ht()?[Re(),nt()]:ke===W.KioskMode.TV?[nt(),ot]:(Ge&&!$e&&(x.ZP.featureToggles.emptyDashboardPage?je.push(n.createElement(S,{dashboard:he,key:"panel-add-dropdown"})):je.push(n.createElement(p.h,{tooltip:(0,M.t)("dashboard.toolbar.add-panel","Add panel"),icon:"panel-add",iconSize:"xl",onClick:De,key:"button-panel-add"}))),tt&&!$e&&je.push(n.createElement(r.JY,{key:"button-save"},({showModal:at,hideModal:xt})=>n.createElement(p.h,{tooltip:(0,M.t)("dashboard.toolbar.save","Save dashboard"),icon:"save",onClick:()=>{at(Q.d,{dashboard:he,onDismiss:xt})}}))),Ke&&je.push(n.createElement(p.h,{tooltip:(0,M.t)("dashboard.toolbar.open-original","Open original dashboard"),onClick:He,icon:"link",key:"button-snapshot"})),dt&&je.push(n.createElement(p.h,{tooltip:(0,M.t)("dashboard.toolbar.settings","Dashboard settings"),icon:"cog",onClick:Se,key:"button-settings"})),ct(ee,je),je.push(nt()),je.push(ot),x.ZP.featureToggles.scenes&&je.push(n.createElement(p.h,{key:"button-scenes",tooltip:"View as Scene",icon:"apps",onClick:()=>o.E1.push(`/scenes/dashboard/${he.uid}`)})),je)},{isFullscreen:Pe,title:Oe,folderTitle:Le}=ve,Ye=(0,s.TH)(),be=f.u.getUrlForPartial(Ye,{search:"open"}),Te=f.u.getUrlForPartial(Ye,{search:"open",query:"folder:current"}),me=Pe?et:void 0;return x.ZP.featureToggles.topnav?n.createElement(a.A,{actions:n.createElement(n.Fragment,null,ft(),n.createElement(v.M,{leftActionsSeparator:!0}),n.createElement(E.R,{alignment:"right"},le()))}):n.createElement(h.X,{pageIcon:Pe?void 0:"apps",title:Oe,parent:Le,titleHref:be,parentHref:Te,onGoBack:me,leftItems:ft()},le())});te.displayName="DashNav";const ae=ie(te),_=(0,t.css)({width:"max-content",maxWidth:"80vw"})},42557:(Z,O,e)=>{"use strict";e.d(O,{P:()=>h});var t=e(82897),n=e(68404),l=e(33180),s=e(68183),i=e(20941),f=e(24799),c=e(52566),o=e(80124),m=e(46967),r=e(8944),u=e(5562),d=e(19349);const g=({refreshIntervals:a,onRefreshIntervalChange:v,getIntervalsFunc:x=E,validateIntervalsFunc:y=p})=>{const[C,P]=(0,n.useState)(x(a??u.o5)),[D,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{const w=x(a??u.o5);P(w)},[x,a]);const b=(0,n.useMemo)(()=>Array.isArray(C)?C.join(","):"",[C]),R=(0,n.useCallback)(w=>{const A=w.currentTarget.value?w.currentTarget.value.split(","):[];P(A)},[P]),B=(0,n.useCallback)(w=>{const A=y(C);A===null&&v(x(C)),M(A)},[x,C,v,y]);return n.createElement(f.g,{label:"Auto refresh",description:"Define the auto refresh intervals that should be available in the auto refresh list.",error:D,invalid:!!D},n.createElement(m.I,{id:"auto-refresh-input",invalid:!!D,value:b,onChange:R,onBlur:B}))},p=(a,v={getTimeSrv:d.$t})=>{try{return E(a,v),null}catch(x){return x instanceof Error?x.message:"Invalid intervals"}},E=(a,v={getTimeSrv:d.$t})=>{const x=a.filter(y=>y.trim()!=="").map(y=>y.replace(/\s+/g,""));return[...new Set(v.getTimeSrv().getValidIntervals(x))]};class h extends n.PureComponent{constructor(){super(...arguments),this.state={isNowDelayValid:!0},this.onNowDelayChange=v=>{const x=v.currentTarget.value;if((0,t.isEmpty)(x))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(x);if(l.isValidTimeSpan(x))return this.setState({isNowDelayValid:!0}),this.props.onNowDelayChange(x);this.setState({isNowDelayValid:!1})},this.onHideTimePickerChange=()=>{this.props.onHideTimePickerChange(!this.props.timePickerHidden)},this.onLiveNowChange=()=>{this.props.onLiveNowChange(!this.props.liveNow)},this.onTimeZoneChange=v=>{typeof v=="string"&&this.props.onTimeZoneChange(v)},this.onWeekStartChange=v=>{this.props.onWeekStartChange(v)}}render(){return n.createElement(i.s,{label:"Time options",isOpen:!0},n.createElement(f.g,{label:"Time zone","data-testid":s.wl.components.TimeZonePicker.containerV2},n.createElement(c.O,{inputId:"time-options-input",includeInternal:!0,value:this.props.timezone,onChange:this.onTimeZoneChange,width:40})),n.createElement(f.g,{label:"Week start","data-testid":s.wl.components.WeekStartPicker.containerV2},n.createElement(o.z,{inputId:"week-start-input",width:40,value:this.props.weekStart,onChange:this.onWeekStartChange})),n.createElement(g,{refreshIntervals:this.props.refreshIntervals,onRefreshIntervalChange:this.props.onRefreshIntervalChange}),n.createElement(f.g,{label:"Now delay",description:"Exclude recent data that may be incomplete."},n.createElement(m.I,{id:"now-delay-input",invalid:!this.state.isNowDelayValid,placeholder:"0m",onChange:this.onNowDelayChange,defaultValue:this.props.nowDelay})),n.createElement(f.g,{label:"Hide time picker"},n.createElement(r.r,{id:"hide-time-picker-toggle",value:!!this.props.timePickerHidden,onChange:this.onHideTimePickerChange})),n.createElement(f.g,{label:"Refresh live dashboards",description:"Continuously re-draw panels where the time range references 'now'"},n.createElement(r.r,{id:"refresh-live-dashboards-toggle",value:!!this.props.liveNow,onChange:this.onLiveNowChange})))}}},82557:(Z,O,e)=>{"use strict";e.d(O,{D:()=>is});var t=e(68404),n=e(70356),l=e(83383),s=e(68183),i=e(37932),f=e(31403),c=e(35224),o=e(8125),m=e(95379),r=e(79008),u=e(47694),d=e(82002),g=e(81168),p=e(45984),E=e(36635),h=e(83829),a=e(9892),v=e(22350),x=e(41818),y=e(72648),C=e(20941),P=e(52081),D=e(67487),M=e(6554),b=e(39904),R=e(8180),B=e(35029);const w=({nodes:Be,edges:we,direction:xe,width:yt,height:Rt,onDoubleClick:Bt})=>{const Kt=(0,t.useRef)(null),fn=(0,t.useRef)(null),Pn=(0,t.useCallback)(gn=>{Bt&&Bt(gn.nodes[0])},[Bt]);return(0,t.useEffect)(()=>((async()=>{const ut=await e.e(8271).then(e.t.bind(e,47137,23)),Tt={nodes:A(ut,Be),edges:I(ut,we)},bt={width:"100%",height:"100%",autoResize:!0,layout:{improvedLayout:!0,hierarchical:{enabled:!0,direction:xe??"DU",sortMethod:"directed"}},interaction:{navigationButtons:!0,dragNodes:!1}};Kt.current=new ut.Network(fn.current,Tt,bt),Kt.current?.on("doubleClick",Pn)})(),()=>{Kt.current&&Kt.current.off("doubleClick")}),[xe,we,Be,Pn]),t.createElement("div",null,t.createElement("div",{ref:fn,style:{width:yt??"100%",height:Rt??"60vh"}}))};function A(Be,we){const xe=we.map(yt=>({...yt,shape:"box"}));return new Be.DataSet(xe)}function I(Be,we){const xe=we.map(yt=>({...yt,arrows:"to",dashes:!0}));return new Be.DataSet(xe)}function F({edges:Be,nodes:we,show:xe,title:yt,children:Rt}){const[Bt,Kt]=(0,t.useState)(xe),fn=(0,t.useCallback)(()=>Kt(!0),[Kt]),Pn=(0,t.useCallback)(()=>Kt(!1),[Kt]);return t.createElement(t.Fragment,null,t.createElement(B.u,{isOpen:Bt,title:yt,icon:"info-circle",iconTooltip:"The graph can be moved, zoomed in, and zoomed out.",onClickBackdrop:Pn,onDismiss:Pn},t.createElement(w,{nodes:we,edges:Be})),Rt({showModal:fn}))}const K=({id:Be,usages:we})=>{const xe=(0,t.useMemo)(()=>we.find(Rt=>Rt.variable.id===Be),[Be,we]);if(!xe)return null;const yt=xe.nodes.map(Rt=>Rt.label.includes(`$${Be}`)?{...Rt,color:"#FB7E81"}:Rt);return t.createElement(F,{show:!1,title:`Showing usages for: $${Be}`,nodes:yt,edges:xe.edges},({showModal:Rt})=>t.createElement(R.h,{onClick:()=>Rt(),name:"code-branch",title:"Show usages","data-testid":"VariablesUnknownButton"}))};var W=e(19248);const U=1e3;function N({variables:Be,dashboard:we}){const[xe,yt]=(0,t.useState)(!1),[Rt,Bt]=(0,t.useState)(0),[Kt,fn]=(0,t.useState)([]),Pn=(0,y.wW)(z);(0,t.useEffect)(()=>Bt(Tt=>Tt+1),[Be,we]);const{loading:gn}=(0,v.Z)(async()=>{if(xe&&Rt>0){const Tt=Date.now(),bt=await(0,W.Yg)(Be,we),en=Date.now()-Tt;return en>=U&&(0,x.ff)("Slow unknown variables expansion",{elapsed:en}),Bt(0),fn(bt),bt}return[]},[Be,we,xe,Rt]),ut=Tt=>{Tt&&(0,x.ff)("Unknown variables section expanded"),yt(Tt)};return t.createElement("div",{className:Pn.container},t.createElement(C.s,{label:t.createElement(S,null),isOpen:xe,onToggle:ut},gn&&t.createElement(P.wc,{justify:"center"},t.createElement(P.Lh,{justify:"center"},t.createElement("span",null,"Loading..."),t.createElement(D.$,{size:16}))),!gn&&Kt&&t.createElement(t.Fragment,null,Kt.length===0&&t.createElement(Y,null),Kt.length>0&&t.createElement(Q,{usages:Kt}))))}function S(){const Be=(0,y.wW)(z);return t.createElement("h5",null,"Renamed or missing variables",t.createElement(M.u,{content:"Click to expand a list with all variable references that have been renamed or are missing from the dashboard."},t.createElement(b.J,{name:"info-circle",className:Be.infoIcon})))}function Y(){return t.createElement("span",null,"No renamed or missing variables found.")}function Q({usages:Be}){const we=(0,y.wW)(z);return t.createElement("table",{className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",{colSpan:5}))),t.createElement("tbody",null,Be.map(xe=>{const{variable:yt}=xe,{id:Rt,name:Bt}=yt;return t.createElement("tr",{key:Rt},t.createElement("td",{className:we.firstColumn},t.createElement("span",null,Bt)),t.createElement("td",{className:we.defaultColumn}),t.createElement("td",{className:we.defaultColumn}),t.createElement("td",{className:we.defaultColumn}),t.createElement("td",{className:we.lastColumn},t.createElement(K,{id:yt.id,usages:Be})))})))}const z=Be=>({container:a.css`
    margin-top: ${Be.spacing(4)};
    padding-top: ${Be.spacing(4)};
  `,infoIcon:a.css`
    margin-left: ${Be.spacing(1)};
  `,defaultColumn:a.css`
    width: 1%;
  `,firstColumn:a.css`
    width: 1%;
    vertical-align: top;
    color: ${Be.colors.text.maxContrast};
  `,lastColumn:a.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    width: 100%;
    text-align: right;
  `});var G=e(7240),k=e(87095),j=e(92990),de=e(92624),ge=e(98102);function re({varName:Be,isOpen:we=!1,onConfirm:xe,onDismiss:yt}){return t.createElement(ge.s,{title:"Delete variable",isOpen:we,onConfirm:xe,onDismiss:yt,body:`
      Are you sure you want to delete variable "${Be}"?
    `,modalClass:ce.modal,confirmText:"Delete"})}const ce={modal:(0,a.css)({width:"max-content",maxWidth:"80vw"})};var ie=e(49922),fe=e(22323),Ce=e(15546),ee=e(85803),ne=e(22107),X=e(24799),te=e(2594);const ae=[{label:"Label and value",value:ne.bU.dontHide},{label:"Value",value:ne.bU.hideLabel},{label:"Nothing",value:ne.bU.hideVariable}];function _({onChange:Be,hide:we,type:xe}){const yt=(0,t.useMemo)(()=>ae.find(Rt=>Rt.value===we)?.value??ae[0].value,[we]);return xe==="constant"?null:t.createElement(X.g,{label:"Show on dashboard"},t.createElement(te.S,{options:ae,onChange:Be,value:yt}))}var ve=e(41624),Ve=e(49993),it=e(57052),rt=e(83704);function pe({onChange:Be,type:we}){const xe=(0,t.useMemo)(()=>(0,de.bi)(),[]),yt=(0,t.useMemo)(()=>xe.find(Rt=>Rt.value===we)??xe[0],[xe,we]);return t.createElement(rt.u,{name:"Select variable type",value:yt,options:xe,onChange:Be,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalTypeSelectV2})}var Ie=e(11543),We=e(77117);const Je=({variable:{options:Be}})=>{const[we,xe]=(0,t.useState)(20),[yt,Rt]=(0,t.useState)([]),Bt=(0,t.useCallback)(fn=>{fn.preventDefault(),xe(we+20)},[we,xe]),Kt=(0,y.wW)(He);return(0,t.useEffect)(()=>Rt(Be.slice(0,we)),[we,Be]),yt.length?t.createElement("div",{style:{display:"flex",flexDirection:"column",marginTop:"16px"}},t.createElement("h5",null,"Preview of values"),t.createElement(Ie.Z,null,yt.map((fn,Pn)=>t.createElement(Ie.Z,{key:`${fn.value}-${Pn}`,className:Kt.optionContainer},t.createElement(We.W,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.previewOfValuesOption},t.createElement("div",{className:Kt.label},fn.text))))),Be.length>we&&t.createElement(Ie.Z,{className:Kt.optionContainer},t.createElement(f.zx,{onClick:Bt,variant:"secondary",size:"sm","aria-label":"Variable editor Preview of Values Show More link"},"Show more"))):null};Je.displayName="VariableValuesPreview";function He(Be){return{wrapper:(0,a.css)({display:"flex",flexDirection:"column",marginTop:Be.spacing(2)}),optionContainer:(0,a.css)({marginLeft:Be.spacing(.5),marginBottom:Be.spacing(.5)}),label:(0,a.css)({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"50vw"})}}var Ae=e(82897),et=e(37737),_e=e(50678);const Se=Be=>async we=>{const{rootStateKey:xe}=Be;we((0,G.mb)(xe,(0,_e.wJ)({name:(0,k.E0)(Be).name,id:Be.id})))},Fe=Be=>async(we,xe)=>{const{rootStateKey:yt}=Be;we((0,G.mb)(yt,(0,_e.qe)((0,de.Y6)(Be))))},Xe=(Be,we)=>(xe,yt)=>{const{id:Rt,rootStateKey:Bt}=Be;let Kt=null;if(we.match(/^(?!__).*$/)||(Kt="Template names cannot begin with '__', that's reserved for Grafana's global variables"),we.match(/^\w+$/)||(Kt="Only word and digit characters are allowed in variable names"),(0,k.gt)(Bt,yt()).filter(gn=>gn.name===we&&gn.id!==Rt).length&&(Kt="Variable with the same name already exists"),Kt){xe((0,G.mb)(Bt,(0,_e.y8)({newName:we,errorText:Kt})));return}xe(Qe(Be,we))},Qe=(Be,we)=>(xe,yt)=>{const{rootStateKey:Rt}=Be,Bt=(0,k.E0)(Be,yt());if(Bt.name===we){xe((0,G.mb)(Rt,(0,_e.Yo)((0,de.Y6)(Be,{newName:we}))));return}const Kt={...(0,Ae.cloneDeep)(Bt),name:we,id:we},fn=Bt.global,Pn=Bt.index,gn=(0,de.yQ)(Kt);xe((0,G.mb)(Rt,(0,j.VN)((0,de.Y6)(gn,{global:fn,index:Pn,model:Kt})))),xe((0,G.mb)(Rt,(0,_e.Yo)((0,de.Y6)(gn,{newName:we})))),xe((0,G.mb)(Rt,(0,j.mZ)((0,de.Y6)(Be,{reIndex:!1}))))},ct=(Be,we="query")=>(xe,yt)=>{const Rt=(0,de.mn)(Be),Bt=(0,k.gt)(Rt,yt()),Kt=ft(we,Bt),fn={type:we,id:Kt},Pn=!1,gn=(0,k.Eo)(Rt,yt()),ut=(0,Ae.cloneDeep)(fe.z.get(we).initialState);ut.id=Kt,ut.name=Kt,ut.rootStateKey=Rt,xe((0,G.mb)(Rt,(0,j.VN)((0,de.Y6)(fn,{global:Pn,model:ut,index:gn})))),i.E1.partial({editIndex:Bt.length})},ht=Be=>(we,xe)=>{const yt=(0,de.mn)(Be),Rt=xe(),Bt=(0,k.xD)(yt,Rt),Kt=Rt.dashboard.getModel(),{usages:fn}=(0,W.V)(Bt,Kt),Pn=(0,W.vI)(fn);we((0,G.mb)(yt,(0,et.j4)({usages:fn,usagesNetwork:Pn})))};function ft(Be,we){let xe=0,yt=`${Be}${xe}`;for(;we.find(Rt=>Rt.id===yt);)yt=`${Be}${++xe}`;return yt}var Re=(Be=>(Be[Be.MaxSize=50]="MaxSize",Be))(Re||{});const nt=(Be,we)=>({editor:(0,k.AE)(we.identifier.rootStateKey,Be).editor,variable:(0,k.E0)(we.identifier,Be)}),le=Be=>({...(0,h.bindActionCreators)({variableEditorMount:Se,variableEditorUnMount:Fe,changeVariableName:Xe,updateOptions:ee.Rk},Be),changeVariableProp:(we,xe,yt)=>Be((0,G.mb)(we.rootStateKey,(0,j.Pl)((0,de.Y6)(we,{propName:xe,propValue:yt})))),changeVariableType:(we,xe)=>Be((0,G.mb)(we.rootStateKey,(0,j.Be)((0,de.Y6)(we,{newType:xe})))),removeVariable:we=>{Be((0,G.mb)(we.rootStateKey,(0,j.mZ)((0,de.Y6)(we,{reIndex:!0}))))}}),Pe=(0,E.connect)(nt,le);class Oe extends t.PureComponent{constructor(){super(...arguments),this.state={showDeleteModal:!1},this.onNameChange=we=>{we.preventDefault(),this.props.changeVariableName(this.props.identifier,we.currentTarget.value)},this.onTypeChange=we=>{we.value&&this.props.changeVariableType(this.props.identifier,we.value)},this.onLabelChange=we=>{we.preventDefault(),this.props.changeVariableProp(this.props.identifier,"label",we.currentTarget.value)},this.onDescriptionChange=we=>{this.props.changeVariableProp(this.props.identifier,"description",we.currentTarget.value)},this.onHideChange=we=>{this.props.changeVariableProp(this.props.identifier,"hide",we)},this.onPropChanged=({propName:we,propValue:xe,updateOptions:yt=!1})=>{this.props.changeVariableProp(this.props.identifier,we,xe),yt&&this.props.updateOptions((0,de.yQ)(this.props.variable))},this.onHandleSubmit=async we=>{we.preventDefault(),this.props.editor.isValid&&this.props.updateOptions((0,de.yQ)(this.props.variable))},this.onModalOpen=()=>{this.setState({showDeleteModal:!0})},this.onModalClose=()=>{this.setState({showDeleteModal:!1})},this.onDelete=()=>{this.props.removeVariable(this.props.identifier),this.onModalClose(),i.E1.partial({editIndex:null})},this.onApply=()=>{i.E1.partial({editIndex:null})}}componentDidMount(){this.props.variableEditorMount(this.props.identifier)}componentWillUnmount(){this.props.variableEditorUnMount(this.props.identifier)}render(){const{variable:we}=this.props,xe=fe.z.get(this.props.variable.type).editor;if(!xe)return null;const yt=we.state===ie.Gu.Loading;return t.createElement(t.Fragment,null,t.createElement("form",{"aria-label":"Variable editor Form",onSubmit:this.onHandleSubmit},t.createElement(pe,{onChange:this.onTypeChange,type:this.props.variable.type}),t.createElement(ve.e,null,"General"),t.createElement(it.V,{value:this.props.editor.name,onChange:this.onNameChange,name:"Name",placeholder:"Variable name",description:"The name of the template variable. (Max. 50 characters)",invalid:!!this.props.editor.errors.name,error:this.props.editor.errors.name,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalNameInputV2,maxLength:Re.MaxSize,required:!0}),t.createElement(it.V,{name:"Label",description:"Optional display name",value:this.props.variable.label??"",placeholder:"Label name",onChange:this.onLabelChange,testId:s.wl.pages.Dashboard.Settings.Variables.Edit.General.generalLabelInputV2}),t.createElement(Ve.W,{name:"Description",value:we.description??"",placeholder:"Descriptive text",onChange:this.onDescriptionChange,width:52}),t.createElement(_,{onChange:this.onHideChange,hide:this.props.variable.hide,type:this.props.variable.type}),xe&&t.createElement(xe,{variable:this.props.variable,onPropChange:this.onPropChanged}),(0,Ce.eL)(this.props.variable)?t.createElement(Je,{variable:this.props.variable}):null,t.createElement("div",{style:{marginTop:"16px"}},t.createElement(P.Lh,{spacing:"md",height:"inherit"},t.createElement(f.zx,{variant:"destructive",fill:"outline",onClick:this.onModalOpen},"Delete"),t.createElement(f.zx,{type:"submit","aria-label":s.wl.pages.Dashboard.Settings.Variables.Edit.General.submitButton,disabled:yt,variant:"secondary"},"Run query",yt&&t.createElement(b.J,{className:"spin-clockwise",name:"sync",size:"sm",style:{marginLeft:"2px"}})),t.createElement(f.zx,{variant:"primary",onClick:this.onApply,"data-testid":s.wl.pages.Dashboard.Settings.Variables.Edit.General.applyButton},"Apply")))),t.createElement(re,{isOpen:this.state.showDeleteModal,varName:this.props.editor.name,onConfirm:this.onDelete,onDismiss:this.onModalClose}))}}const Le=Pe(Oe);var Ye=e(19677),be=e(26418),Te=e(69142),me=e(3153);const he=({variables:Be})=>{const we=(0,t.useMemo)(()=>(0,W.GQ)(Be),[Be]),xe=(0,t.useMemo)(()=>(0,W.MJ)(Be),[Be]);return xe.length?t.createElement(F,{show:!1,title:"Dependencies",nodes:(0,W.Of)(we,xe),edges:xe},({showModal:yt})=>t.createElement(f.zx,{onClick:()=>{(0,x.ff)("Show variable dependencies"),yt()},icon:"channel-add",variant:"secondary"},"Show dependencies")):null},De=Be=>t.createElement(E.Provider,{store:me.h},t.createElement(he,{...Be})),$e=({id:Be,usages:we,isAdhoc:xe})=>{const yt=(0,t.useMemo)(()=>we.find(Bt=>Bt.variable.id===Be),[we,Be]);if(we.length===0||xe||!yt)return null;const Rt=yt.nodes.map(Bt=>Bt.label.includes(`$${Be}`)?{...Bt,color:"#FB7E81"}:Bt);return t.createElement(F,{show:!1,title:`Showing usages for: $${Be}`,nodes:Rt,edges:yt.edges},({showModal:Bt})=>t.createElement(R.h,{onClick:()=>{(0,x.ff)("Show variable usages"),Bt()},name:"code-branch",title:"Show usages"}))};function ke({index:Be,variable:we,usageTree:xe,usagesNetwork:yt,onEdit:Rt,onDuplicate:Bt,onDelete:Kt}){const fn=(0,y.l4)(),Pn=(0,y.wW)(dt),gn=tt(we),Tt=(0,W.Rv)(we.id,xe)>0||(0,Ce.Kn)(we),bt=(0,de.yQ)(we);return t.createElement(Ye._l,{draggableId:JSON.stringify(bt),index:Be},(Ht,en)=>t.createElement("tr",{ref:Ht.innerRef,...Ht.draggableProps,style:{userSelect:en.isDragging?"none":"auto",background:en.isDragging?fn.colors.background.secondary:void 0,...Ht.draggableProps.style}},t.createElement("td",{role:"gridcell",className:Pn.column},t.createElement(f.zx,{size:"xs",fill:"text",onClick:ln=>{ln.preventDefault(),Rt(bt)},className:Pn.nameLink,"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowNameFields(we.name)},we.name)),t.createElement("td",{role:"gridcell",className:Pn.definitionColumn,onClick:ln=>{ln.preventDefault(),Rt(bt)},"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDefinitionFields(we.name)},gn),t.createElement("td",{role:"gridcell",className:Pn.column},t.createElement(Ge,{passed:Tt})),t.createElement("td",{role:"gridcell",className:Pn.column},t.createElement($e,{id:we.id,isAdhoc:(0,Ce.Kn)(we),usages:yt})),t.createElement("td",{role:"gridcell",className:Pn.column},t.createElement(R.h,{onClick:ln=>{ln.preventDefault(),(0,x.ff)("Duplicate variable"),Bt(bt)},name:"copy",title:"Duplicate variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowDuplicateButtons(we.name)})),t.createElement("td",{role:"gridcell",className:Pn.column},t.createElement(R.h,{onClick:ln=>{ln.preventDefault(),(0,x.ff)("Delete variable"),Kt(bt)},name:"trash-alt",title:"Remove variable","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.tableRowRemoveButtons(we.name)})),t.createElement("td",{role:"gridcell",className:Pn.column},t.createElement("div",{...Ht.dragHandleProps,className:Pn.dragHandle},t.createElement(b.J,{name:"draggabledots",size:"lg"})))))}function tt(Be){let we="";return(0,Ce.Xh)(Be)?Be.definition?we=Be.definition:typeof Be.query=="string"&&(we=Be.query):(0,Ce.eL)(Be)&&(we=Be.query),we}function Ge({passed:Be}){const we=(0,y.wW)(dt);return Be?t.createElement(b.J,{name:"check",className:we.iconPassed,title:"This variable is referenced by other variables or dashboard."}):t.createElement(b.J,{name:"exclamation-triangle",className:we.iconFailed,title:"This variable is not referenced by any variable or dashboard."})}function dt(Be){return{dragHandle:a.css`
      cursor: grab;
    `,column:a.css`
      width: 1%;
    `,nameLink:a.css`
      cursor: pointer;
      color: ${Be.colors.primary.text};
    `,definitionColumn:a.css`
      width: 100%;
      max-width: 200px;
      cursor: pointer;
      overflow: hidden;
      text-overflow: ellipsis;
      -o-text-overflow: ellipsis;
      white-space: nowrap;
    `,iconPassed:a.css`
      color: ${Be.v1.palette.greenBase};
    `,iconFailed:a.css`
      color: ${Be.v1.palette.orange};
    `}}function pt({variables:Be,usages:we,usagesNetwork:xe,onChangeOrder:yt,onAdd:Rt,onEdit:Bt,onDelete:Kt,onDuplicate:fn}){const Pn=gn=>{if(!gn.destination||!gn.source)return;(0,x.ff)("Variable drag and drop");const ut=JSON.parse(gn.draggableId);yt(ut,Be[gn.source.index].index,Be[gn.destination.index].index)};return t.createElement("div",null,t.createElement("div",null,Be.length===0&&t.createElement(Ke,{onAdd:Rt}),Be.length>0&&t.createElement(be.Stack,{direction:"column",gap:4},t.createElement("table",{className:"filter-table filter-table--hover","aria-label":s.wl.pages.Dashboard.Settings.Variables.List.table,role:"grid"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Variable"),t.createElement("th",null,"Definition"),t.createElement("th",{colSpan:5}))),t.createElement(Ye.Z5,{onDragEnd:Pn},t.createElement(Ye.bK,{droppableId:"variables-list",direction:"vertical"},gn=>t.createElement("tbody",{ref:gn.innerRef,...gn.droppableProps},Be.map((ut,Tt)=>t.createElement(ke,{index:Tt,key:`${ut.name}-${Tt}`,variable:ut,usageTree:we,usagesNetwork:xe,onDelete:Kt,onDuplicate:fn,onEdit:Bt})),gn.placeholder)))),t.createElement(be.Stack,null,t.createElement(De,{variables:Be}),t.createElement(f.zx,{"aria-label":s.wl.pages.Dashboard.Settings.Variables.List.newButton,onClick:Rt,icon:"plus"},"New variable")))))}function Ke({onAdd:Be}){return t.createElement("div",null,t.createElement(Te.Z,{title:"There are no variables yet",buttonIcon:"calculator-alt",buttonTitle:"Add variable",infoBox:{__html:` <p>
                    Variables enable more interactive and dynamic dashboards. Instead of hard-coding things like server
                    or sensor names in your metric queries you can use variables in their place. Variables are shown as
                    list boxes at the top of the dashboard. These drop-down lists make it easy to change the data
                    being displayed in your dashboard. Check out the
                    <a class="external-link" href="https://grafana.com/docs/grafana/latest/variables/" target="_blank">
                      Templates and variables documentation
                    </a>
                    for more information.
                  </p>`},infoBoxTitle:"What do variables do?",onClick:we=>{we.preventDefault(),Be()}}))}const je=(Be,we)=>{const{uid:xe}=we.dashboard,yt=(0,k.AE)(xe,Be);return{variables:(0,k.xD)(xe,Be),idInEditor:yt.editor.id,usagesNetwork:yt.inspect.usagesNetwork,usages:yt.inspect.usages}},ot=Be=>({...(0,h.bindActionCreators)({createNewVariable:ct,initListMode:ht},Be),changeVariableOrder:(we,xe,yt)=>Be((0,G.mb)(we.rootStateKey,(0,j.gE)((0,de.Y6)(we,{fromIndex:xe,toIndex:yt})))),duplicateVariable:we=>Be((0,G.mb)(we.rootStateKey,(0,j.Y9)((0,de.Y6)(we,{newId:void 0})))),removeVariable:we=>{Be((0,G.mb)(we.rootStateKey,(0,j.mZ)((0,de.Y6)(we,{reIndex:!0}))))}}),at=(0,E.connect)(je,ot);class xt extends t.PureComponent{constructor(){super(...arguments),this.state={variableId:void 0},this.onEditVariable=we=>{const xe=this.props.variables.findIndex(yt=>yt.id===we.id);i.E1.partial({editIndex:xe})},this.onNewVariable=()=>{this.props.createNewVariable(this.props.dashboard.uid)},this.onChangeVariableOrder=(we,xe,yt)=>{this.props.changeVariableOrder(we,xe,yt)},this.onDuplicateVariable=we=>{this.props.duplicateVariable(we)},this.onModalOpen=we=>{this.setState({variableId:we})},this.onModalClose=()=>{this.setState({variableId:void 0})},this.onRemoveVariable=()=>{this.props.removeVariable(this.state.variableId),this.onModalClose()}}componentDidMount(){this.props.initListMode(this.props.dashboard.uid)}render(){const{editIndex:we,variables:xe}=this.props,yt=we!=null?xe[we]:void 0,Rt=yt?{text:yt.name}:void 0;return t.createElement(r.T,{navModel:this.props.sectionNav,pageNav:Rt},!yt&&t.createElement(pt,{variables:this.props.variables,onAdd:this.onNewVariable,onEdit:this.onEditVariable,onChangeOrder:this.onChangeVariableOrder,onDuplicate:this.onDuplicateVariable,onDelete:this.onModalOpen,usages:this.props.usages,usagesNetwork:this.props.usagesNetwork}),!yt&&this.props.variables.length>0&&t.createElement(N,{variables:this.props.variables,dashboard:this.props.dashboard}),yt&&t.createElement(Le,{identifier:(0,de.yQ)(yt)}),t.createElement(re,{isOpen:this.state.variableId!==void 0,varName:this.state.variableId?.id??"",onConfirm:this.onRemoveVariable,onDismiss:this.onModalClose}))}}const Dt=at(xt);var wt=e(73546),sn=e(77582);const mn=({dashboard:Be,sectionNav:we})=>{const xe=sn.Vt.hasPermission(g.AccessControlAction.DashboardsPermissionsWrite);return t.createElement(r.T,{navModel:we},t.createElement(wt.P,{resource:"dashboards",resourceId:Be.uid,canSetPermissions:xe}))};var Dn=e(1108),Rn=e(6645),St=e(92158),At=e(54630),Wt=e(61986),Qt=e(86977);const jt=Be=>({permissions:Be.dashboard.permissions,canViewFolderPermissions:Be.folder.canViewFolderPermissions}),Xt={getDashboardPermissions:Qt.qm,addDashboardPermission:Qt.Yq,removeDashboardPermission:Qt.Qk,updateDashboardPermission:Qt.RF,checkFolderPermissions:Wt.J6},tn=(0,E.connect)(jt,Xt);class on extends t.PureComponent{constructor(we){super(we),this.onOpenAddPermissions=()=>{this.setState({isAdding:!0})},this.onRemoveItem=xe=>{this.props.removeDashboardPermission(this.props.dashboard.id,xe)},this.onPermissionChanged=(xe,yt)=>{this.props.updateDashboardPermission(this.props.dashboard.id,xe,yt)},this.onAddPermission=xe=>this.props.addDashboardPermission(this.props.dashboard.id,xe),this.onCancelAddPermission=()=>{this.setState({isAdding:!1})},this.state={isAdding:!1}}componentDidMount(){this.props.getDashboardPermissions(this.props.dashboard.id),this.props.dashboard.meta.folderUid&&this.props.checkFolderPermissions(this.props.dashboard.meta.folderUid)}getFolder(){const{dashboard:we,canViewFolderPermissions:xe}=this.props;return{id:we.meta.folderId,title:we.meta.folderTitle,url:we.meta.folderUrl,canViewFolderPermissions:xe}}render(){const{permissions:we,dashboard:xe,sectionNav:yt}=this.props,{isAdding:Rt}=this.state;return xe.meta.hasUnsavedFolderChange?t.createElement(r.T,{navModel:yt},t.createElement("h5",null,"You have changed a folder, please save to view permissions.")):t.createElement(r.T,{navModel:yt},t.createElement("div",{className:"page-action-bar"},t.createElement(M.u,{placement:"auto",content:t.createElement(At.Z,null)},t.createElement(b.J,{className:"icon--has-hover page-sub-heading-icon",name:"question-circle"})),t.createElement("div",{className:"page-action-bar__spacer"}),t.createElement(f.zx,{className:"pull-right",onClick:this.onOpenAddPermissions,disabled:Rt},"Add permission")),t.createElement(Dn.s,{in:Rt},t.createElement(Rn.Z,{onAddPermission:this.onAddPermission,onCancel:this.onCancelAddPermission})),t.createElement(St.Z,{items:we,onRemoveItem:this.onRemoveItem,onPermissionChanged:this.onPermissionChanged,isFetching:!1,folderInfo:this.getFolder()}))}}const dn=tn(on);var $t=e(84135),qt=e(5916),Vt=e(86647),nn=e(53117),un=e(13393),En=e(46967),cn=e(58255),wn=e(13355),Gn=e(65583),Nn=e(94929),Wn=e(9398),qn=e(19349),ga=e(86899),ea=e(86953),ca=e(573),ba=e(89890),zn=e(20442),$n=e(20112),ta=e(53217);class Fa extends t.PureComponent{constructor(we){super(we),this.updateFields=()=>{const xe=this.props.response?.panelData?.series[0];if(xe&&xe.fields){const yt=xe.fields.map(Rt=>{const Bt=(0,ba.C)(Rt,xe);let Kt="";for(let fn=0;fn<xe.length;fn++){if(fn>0&&(Kt+=", "),fn>2){Kt+="...";break}Kt+=Rt.values.get(fn)}return Kt.length>50&&(Kt=Kt.substring(0,50)+"..."),{label:`${Bt} (${Rt.type})`,value:Bt,description:Kt}});this.setState({fieldNames:yt})}},this.onFieldSourceChange=(xe,yt)=>{const Rt=this.props.mappings||{},Bt=Rt[xe]||{};this.props.change({...Rt,[xe]:{...Bt,source:yt.value||zn.L.Field}})},this.onFieldNameChange=(xe,yt)=>{const Rt=this.props.mappings||{},Bt=Rt[xe]||{};this.props.change({...Rt,[xe]:{...Bt,value:yt.value,source:zn.L.Field}})},this.state={fieldNames:[]}}componentDidMount(){this.updateFields()}componentDidUpdate(we){we.response!==this.props.response&&this.updateFields()}renderRow(we,xe,yt){const{fieldNames:Rt}=this.state;let Bt=Rt;const Kt=xe.value;let fn=Rt.find(gn=>Kt===gn.value);Kt&&(Bt=[...Rt],fn||Bt.push({label:Kt,value:Kt}));let Pn=yt?yt[we.key]:"";if(Pn&&we.key.startsWith("time")){const gn=(0,$n.Cf)("dateTimeAsIso");Pn=(0,$n.zc)(gn(Pn))}return Pn==null&&(Pn=""),t.createElement("tr",{key:we.key},t.createElement("td",null,we.key," ",we.help&&t.createElement(M.u,{content:we.help},t.createElement(b.J,{name:"info-circle"}))),t.createElement("td",null,t.createElement(ta.Ph,{value:fn,options:Bt,placeholder:we.placeholder||we.key,onChange:gn=>{this.onFieldNameChange(we.key,gn)},noOptionsMessage:"Unknown field names",allowCustomValue:!0})),t.createElement("td",null,`${Pn}`))}render(){const we=this.props.response?.events?.[0],xe=this.props.mappings||{};return t.createElement("table",{className:"filter-table"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Annotation"),t.createElement("th",null,"From"),t.createElement("th",null,"First Value"))),t.createElement("tbody",null,ca.r0.map(yt=>this.renderRow(yt,xe[yt.key]||{},we))))}}class Ma extends t.PureComponent{constructor(){super(...arguments),this.state={},this.onRunQuery=async()=>{const{datasource:we,annotation:xe}=this.props;if((0,ca.yr)(we))return;const yt=(0,Wn.h4)().getCurrent();if(!yt)return;this.setState({running:!0});const Rt=await(0,Gn.n)((0,ea.r)({range:(0,qn.$t)().timeRange(),panel:new ga.r({}),dashboard:yt},we,xe));this.setState({running:!1,response:Rt})},this.onQueryChange=we=>{this.props.onChange({...this.props.annotation,target:we})},this.onMappingChange=we=>{this.props.onChange({...this.props.annotation,mappings:we})},this.onAnnotationChange=we=>{this.props.onChange(we)}}componentDidMount(){this.verifyDataSource()}componentDidUpdate(we){this.props.annotation!==we.annotation&&!(0,ca.yr)(this.props.datasource)&&this.verifyDataSource()}verifyDataSource(){const{datasource:we,annotation:xe}=this.props,Rt={...ca.yA,...we.annotations}.prepareAnnotation(xe);Rt!==xe?this.props.onChange(Rt):this.onRunQuery()}renderStatus(){const{response:we,running:xe}=this.state;let yt="alert-info",Rt="...",Bt;if(xe||we?.panelData?.state===ie.Gu.Loading||!we)Rt="loading...";else{const{events:Kt,panelData:fn}=we;if(fn?.error)yt="alert-error",Bt="exclamation-triangle",Rt=fn.error.message??"error";else if(!Kt?.length)yt="alert-warning",Bt="exclamation-triangle",Rt="No events found";else{const Pn=fn?.series[0];Rt=`${Kt.length} events (from ${Pn?.fields.length} fields)`}}return t.createElement("div",{className:(0,a.cx)(yt,a.css`
            margin: 4px 0px;
            padding: 4px;
            display: flex;
            justify-content: space-between;
            align-items: center;
          `)},t.createElement("div",null,Bt&&t.createElement(t.Fragment,null,t.createElement(b.J,{name:Bt}),"\xA0"),Rt),t.createElement("div",null,xe?t.createElement(D.$,null):t.createElement(f.zx,{variant:"secondary",size:"xs",onClick:this.onRunQuery},"TEST")))}render(){const{datasource:we,annotation:xe,datasourceInstanceSettings:yt}=this.props,{response:Rt}=this.state;let Bt=we.annotations?.QueryEditor||we.components?.QueryEditor;if(!Bt)return t.createElement("div",null,"Annotations are not supported. This datasource needs to export a QueryEditor");const Kt={...we.annotations?.getDefaultQuery?.(),...xe.target??{refId:"Anno"}};return t.createElement(t.Fragment,null,t.createElement(Nn.n,{instanceSettings:yt},t.createElement(Bt,{key:we?.name,query:Kt,datasource:we,onChange:this.onQueryChange,onRunQuery:this.onRunQuery,data:Rt?.panelData,range:(0,qn.$t)().timeRange(),annotation:xe,onAnnotationChange:this.onAnnotationChange})),(0,ca.$w)(we)&&t.createElement(t.Fragment,null,this.renderStatus(),t.createElement(Fa,{response:Rt,mappings:xe.mappings,change:this.onMappingChange})))}}var Oa=e(11484);class Qa extends t.PureComponent{constructor(){super(...arguments),this.ref=null}componentWillUnmount(){this.angularComponent&&this.angularComponent.destroy()}componentDidMount(){this.ref&&this.loadAngular()}componentDidUpdate(we){we.datasource!==this.props.datasource&&this.loadAngular(),this.scopeProps&&this.scopeProps.ctrl.currentAnnotation!==this.props.annotation&&(this.scopeProps.ctrl.ignoreNextWatcherFiring=!0,this.scopeProps.ctrl.currentAnnotation=this.props.annotation,this.angularComponent?.digest())}loadAngular(){this.angularComponent&&(this.angularComponent.destroy(),this.scopeProps=void 0);const we=(0,Oa.w)(),xe='<plugin-component type="annotations-query-ctrl"> </plugin-component>',yt={ctrl:{currentDatasource:this.props.datasource,currentAnnotation:this.props.annotation,ignoreNextWatcherFiring:!1}};this.angularComponent=we.load(this.ref,yt,xe),this.angularComponent.digest(),this.angularComponent.getScope().$watch(()=>{if(yt.ctrl.ignoreNextWatcherFiring){yt.ctrl.ignoreNextWatcherFiring=!1;return}this.props.onChange(yt.ctrl.currentAnnotation)}),this.scopeProps=yt}render(){return t.createElement("div",{ref:we=>this.ref=we})}}const Qn="New annotation",Aa=({editIdx:Be,dashboard:we})=>{const[xe,yt]=(0,t.useState)(we.annotations.list[Be]),{value:Rt}=(0,v.Z)(()=>(0,Vt.F)().get(xe.datasource),[xe.datasource]),Bt=(0,Vt.F)().getInstanceSettings(xe.datasource),Kt=ln=>{const Cn=[...we.annotations.list];Cn.splice(Be,1,ln),yt(ln),we.annotations.list=Cn},fn=ln=>{Kt({...xe,name:ln.currentTarget.value})},Pn=ln=>{Kt({...xe,datasource:(0,qt.iU)(ln)})},gn=ln=>{const Cn=ln.currentTarget;Kt({...xe,[Cn.name]:Cn.type==="checkbox"?Cn.checked:Cn.value})},ut=ln=>{Kt({...xe,iconColor:ln})},Tt=ia,bt=()=>{i.E1.partial({editview:null,editIndex:null})},Ht=()=>{const ln=we.annotations.list;we.annotations.list=[...ln.slice(0,Be),...ln.slice(Be+1)],ia()},en=xe.name===Qn;return t.createElement("div",null,t.createElement(un.C,null,t.createElement(X.g,{label:"Name"},t.createElement(En.I,{"aria-label":s.wl.pages.Dashboard.Settings.Annotations.Settings.name,name:"name",id:"name",autoFocus:en,value:xe.name,onChange:fn,width:50})),t.createElement(X.g,{label:"Data source",htmlFor:"data-source-picker"},t.createElement(nn.q,{width:50,annotations:!0,variables:!0,current:xe.datasource,onChange:Pn})),t.createElement(X.g,{label:"Enabled",description:"When enabled the annotation query is issued every dashboard refresh"},t.createElement(cn.X,{name:"enable",id:"enable",value:xe.enable,onChange:gn})),t.createElement(X.g,{label:"Hidden",description:"Annotation queries can be toggled on or off at the top of the dashboard. With this option checked this toggle will be hidden."},t.createElement(cn.X,{name:"hide",id:"hide",value:xe.hide,onChange:gn})),t.createElement(X.g,{label:"Color",description:"Color to use for the annotation event markers"},t.createElement(P.Lh,null,t.createElement(wn.B,{value:xe?.iconColor,onChange:ut}))),t.createElement("h3",{className:"page-heading"},"Query"),Rt?.annotations&&Bt&&t.createElement(Ma,{datasource:Rt,datasourceInstanceSettings:Bt,annotation:xe,onChange:Kt}),Rt&&!Rt.annotations&&t.createElement(Qa,{datasource:Rt,annotation:xe,onChange:Kt})),t.createElement(be.Stack,null,!xe.builtIn&&t.createElement(f.zx,{variant:"destructive",onClick:Ht},"Delete"),t.createElement(f.zx,{variant:"secondary",onClick:bt},"Preview in dashboard"),t.createElement(f.zx,{variant:"primary",onClick:Tt},"Apply")))};Aa.displayName="AnnotationSettingsEdit";function ia(){i.E1.partial({editIndex:null})}var _a=e(76553),As=e(13626);const va=({children:Be,...we})=>{const xe=(0,y.wW)(Ga);return t.createElement("div",{className:xe.buttonWrapper},t.createElement(f.zx,{icon:"plus",variant:"secondary",...we},Be))},Ga=Be=>({buttonWrapper:a.css`
    padding: ${Be.spacing(3)} 0;
  `}),Xa=({dashboard:Be,onNew:we,onEdit:xe})=>{const[yt,Rt]=(0,t.useState)(Be.annotations.list),Bt=(ut,Tt)=>{Be.annotations.list=_a.moveItemImmutably(yt,ut,ut+Tt),Rt(Be.annotations.list)},Kt=ut=>{Be.annotations.list=[...yt.slice(0,ut),...yt.slice(ut+1)],Rt(Be.annotations.list)},fn=yt.length===0||yt.length===1&&yt[0].builtIn,Pn=ut=>ut.enable===!1?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},"(Disabled) \xA0 ",ut.name)):ut.builtIn?t.createElement(t.Fragment,null,t.createElement("em",{className:"muted"},ut.name," \xA0 (Built-in)")):t.createElement(t.Fragment,null,ut.name),gn=(0,Vt.F)();return t.createElement(P.wc,null,yt.length>0&&t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Query name"),t.createElement("th",null,"Data source"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,Be.annotations.list.map((ut,Tt)=>t.createElement("tr",{key:`${ut.name}-${Tt}`},ut.builtIn?t.createElement("td",{role:"gridcell",style:{width:"90%"},className:"pointer",onClick:()=>xe(Tt)},t.createElement(f.zx,{size:"sm",fill:"text",variant:"secondary"},Pn(ut))):t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>xe(Tt)},t.createElement(f.zx,{size:"sm",fill:"text",variant:"secondary"},Pn(ut))),t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>xe(Tt)},gn.getInstanceSettings(ut.datasource)?.name||ut.datasource?.uid),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Tt!==0&&t.createElement(R.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>Bt(Tt,-1)})),t.createElement("td",{role:"gridcell",style:{width:"1%"}},Be.annotations.list.length>1&&Tt!==Be.annotations.list.length-1?t.createElement(R.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>Bt(Tt,1)}):null),t.createElement("td",{role:"gridcell",style:{width:"1%"}},!ut.builtIn&&t.createElement(As.m,{size:"sm",onConfirm:()=>Kt(Tt),"aria-label":`Delete query with title "${ut.name}"`})))))),fn&&t.createElement(Te.Z,{onClick:we,title:"There are no custom annotation queries added yet",buttonIcon:"comment-alt",buttonTitle:"Add annotation query",infoBoxTitle:"What are annotation queries?",infoBox:{__html:`<p>Annotations provide a way to integrate event data into your graphs. They are visualized as vertical lines
          and icons on all graph panels. When you hover over an annotation icon you can get event text &amp; tags for
          the event. You can add annotation events directly from grafana by holding CTRL or CMD + click on graph (or
          drag region). These will be stored in Grafana's annotation database.
        </p>
        Checkout the
        <a class='external-link' target='_blank' href='http://docs.grafana.org/reference/annotations/'
          >Annotations documentation</a
        >
        for more information.`}}),!fn&&t.createElement(va,{onClick:we},"New query"))};function da({dashboard:Be,editIndex:we,sectionNav:xe}){const yt=()=>{const Kt={name:Qn,enable:!0,datasource:(0,qt.iU)((0,Vt.F)().getInstanceSettings(null)),iconColor:"red"};Be.annotations.list=[...Be.annotations.list,{...Kt}],i.E1.partial({editIndex:Be.annotations.list.length-1})},Rt=Kt=>{i.E1.partial({editIndex:Kt})},Bt=we!=null&&we<Be.annotations.list.length;return t.createElement(r.T,{navModel:xe,pageNav:as(Be,we)},!Bt&&t.createElement(Xa,{dashboard:Be,onNew:yt,onEdit:Rt}),Bt&&t.createElement(Aa,{dashboard:Be,editIdx:we}))}function as(Be,we){if(we==null)return;const xe=Be.annotations.list[we];if(xe)return{text:xe.name}}var qs=e(43339),Ys=e(79658),sr=e(5191),er=e(53787),Sr=e(671),rr=e(60499),Ms=e(50946);const js=(Be,we)=>{const[xe,yt]=(0,Sr.Z)(()=>(0,Ms.iM)(Be,!1),[]),Rt=(0,rr.iG)();return(0,t.useEffect)(()=>{xe.value&&(we(),i.E1.replace("/"),Rt.success("Dashboard Deleted",`${xe.value.title} has been deleted`))},[xe,Rt,we]),{state:xe,onDeleteDashboard:yt}},Ls={cleanUpDashboardAndVariables:Qt.lw},Ss=(0,E.connect)(null,Ls),Vs=({hideModal:Be,cleanUpDashboardAndVariables:we,dashboard:xe})=>{const yt=xe.meta.provisioned,{onDeleteDashboard:Rt}=js(xe.uid,we),[,Bt]=(0,er.default)(async()=>{await Rt(),Be()},[Be]),Kt=Va(xe.panels,xe.title);return yt?t.createElement(Or,{hideModal:Be,provisionedId:xe.meta.provisionedExternalId}):t.createElement(ge.s,{isOpen:!0,body:Kt,onConfirm:Bt,onDismiss:Be,title:"Delete",icon:"trash-alt",confirmText:"Delete"})},Va=(Be,we)=>{const xe=(0,Ae.sumBy)(Be,yt=>yt.alert?1:0);return xe>0&&!u.vc.unifiedAlertingEnabled?t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,"This dashboard contains ",xe," alert",xe>1?"s":"",". Deleting this dashboard also deletes those alerts.")):t.createElement(t.Fragment,null,t.createElement("p",null,"Do you want to delete this dashboard?"),t.createElement("p",null,we))},Or=({hideModal:Be,provisionedId:we})=>t.createElement(B.u,{isOpen:!0,title:"Cannot delete provisioned dashboard",icon:"trash-alt",onDismiss:Be,className:a.css`
      width: 500px;
    `},t.createElement("p",null,"This dashboard is managed by Grafana provisioning and cannot be deleted. Remove the dashboard from the config file to delete it."),t.createElement("p",null,t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null),"File path: ",we),t.createElement(B.u.ButtonRow,null,t.createElement(f.zx,{variant:"primary",onClick:Be},"OK"))),hr=Ss(Vs),Us=({dashboard:Be})=>t.createElement(sr.JY,null,({showModal:we,hideModal:xe})=>t.createElement(f.zx,{variant:"destructive",onClick:()=>{we(hr,{dashboard:Be,hideModal:xe})},"aria-label":"Dashboard settings page delete dashboard button"},"Delete Dashboard"));var Qs=e(42557);const vr=[{value:0,label:"Default"},{value:1,label:"Shared crosshair"},{value:2,label:"Shared Tooltip"}];function or({dashboard:Be,updateTimeZone:we,updateWeekStart:xe,sectionNav:yt}){const[Rt,Bt]=(0,t.useState)(0),Kt=Tn=>{Be.meta.folderUid=Tn.uid,Be.meta.folderTitle=Tn.title,Be.meta.hasUnsavedFolderChange=!0},fn=Tn=>{(Tn.currentTarget.name==="title"||Tn.currentTarget.name==="description")&&(Be[Tn.currentTarget.name]=Tn.currentTarget.value)},Pn=Tn=>{Be.graphTooltip=Tn,Bt(Rt+1)},gn=Tn=>{Be.timepicker.refresh_intervals=Tn.filter(Yn=>Yn.trim()!=="")},ut=Tn=>{Be.timepicker.nowDelay=Tn},Tt=Tn=>{Be.timepicker.hidden=Tn,Bt(Rt+1)},bt=Tn=>{Be.liveNow=Tn,Bt(Rt+1)},Ht=Tn=>{Be.timezone=Tn,Bt(Rt+1),we(Tn)},en=Tn=>{Be.weekStart=Tn,Bt(Rt+1),xe(Tn)},ln=Tn=>{Be.tags=Tn,Bt(Rt+1)},Cn=Tn=>{Be.editable=Tn,Bt(Rt+1)},xn=[{label:"Editable",value:!0},{label:"Read-only",value:!1}];return t.createElement(r.T,{navModel:yt},t.createElement("div",{style:{maxWidth:"600px"}},t.createElement("div",{className:"gf-form-group"},t.createElement(X.g,{label:"Name"},t.createElement(En.I,{id:"title-input",name:"title",onBlur:fn,defaultValue:Be.title})),t.createElement(X.g,{label:"Description"},t.createElement(En.I,{id:"description-input",name:"description",onBlur:fn,defaultValue:Be.description})),t.createElement(X.g,{label:"Tags"},t.createElement(qs.B,{id:"tags-input",tags:Be.tags,onChange:ln,width:40})),t.createElement(X.g,{label:"Folder"},t.createElement(Ys.Es,{inputId:"dashboard-folder-input",initialTitle:Be.meta.folderTitle,initialFolderUid:Be.meta.folderUid,onChange:Kt,enableCreateNew:!0,dashboardId:Be.id,skipInitialLoad:!0})),t.createElement(X.g,{label:"Editable",description:"Set to read-only to disable all editing. Reload the dashboard for changes to take effect"},t.createElement(te.S,{value:Be.editable,options:xn,onChange:Cn}))),t.createElement(Qs.P,{onTimeZoneChange:Ht,onWeekStartChange:en,onRefreshIntervalChange:gn,onNowDelayChange:ut,onHideTimePickerChange:Tt,onLiveNowChange:bt,refreshIntervals:Be.timepicker.refresh_intervals,timePickerHidden:Be.timepicker.hidden,nowDelay:Be.timepicker.nowDelay,timezone:Be.timezone,weekStart:Be.weekStart,liveNow:Be.liveNow}),t.createElement(C.s,{label:"Panel options",isOpen:!0},t.createElement(X.g,{label:"Graph tooltip",description:"Controls tooltip and hover highlight behavior across different panels. Reload the dashboard for changes to take effect"},t.createElement(te.S,{onChange:Pn,options:vr,value:Be.graphTooltip}))),t.createElement("div",{className:"gf-form-button-row"},Be.meta.canDelete&&t.createElement(Us,{dashboard:Be}))))}const Ea={updateTimeZone:Qt.tM,updateWeekStart:Qt.f4},zs=(0,E.connect)(null,Ea)(or);var Bs=e(9405),ir=e(30992);function lr({dashboard:Be,sectionNav:we}){const[xe,yt]=(0,t.useState)(JSON.stringify(Be.getSaveModelClone(),null,2)),Rt=async()=>{await(0,Wn.h4)().saveJSONDashboard(xe),ir.H.reloadPage()},Bt=(0,y.wW)(yr),Kt="The JSON model below is the data structure that defines the dashboard. This includes dashboard settings, panel settings, layout, queries, and so on";return t.createElement(r.T,{navModel:we,subTitle:Kt},t.createElement("div",{className:Bt.wrapper},t.createElement(Bs.p,{value:xe,language:"json",showMiniMap:!0,showLineNumbers:!0,onBlur:yt,containerStyles:Bt.codeEditor}),Be.meta.canSave&&t.createElement("div",null,t.createElement(f.zx,{type:"submit",onClick:Rt},"Save changes"))))}const yr=Be=>({wrapper:(0,a.css)({display:"flex",height:"100%",flexDirection:"column",gap:Be.spacing(2)}),codeEditor:(0,a.css)({flexGrow:1})});var tr=e(18428),Pr=e(34807);const ws=({dashboard:Be,onNew:we,onEdit:xe})=>{const[yt,Rt]=(0,t.useState)(Be.links),Bt=(gn,ut)=>{Be.links=_a.moveItemImmutably(yt,gn,gn+ut),Rt(Be.links)},Kt=(gn,ut)=>{Be.links=[...yt,{...gn}],Rt(Be.links)},fn=gn=>{Be.links=[...yt.slice(0,gn),...yt.slice(gn+1)],Rt(Be.links)};return Be.links.length===0?t.createElement("div",null,t.createElement(Te.Z,{onClick:we,title:"There are no dashboard links added yet",buttonIcon:"link",buttonTitle:"Add dashboard link",infoBoxTitle:"What are dashboard links?",infoBox:{__html:"<p>Dashboard Links allow you to place links to other dashboards and web sites directly below the dashboard header.</p>"}})):t.createElement(t.Fragment,null,t.createElement("table",{role:"grid",className:"filter-table filter-table--hover"},t.createElement("thead",null,t.createElement("tr",null,t.createElement("th",null,"Type"),t.createElement("th",null,"Info"),t.createElement("th",{colSpan:3}))),t.createElement("tbody",null,yt.map((gn,ut)=>t.createElement("tr",{key:`${gn.title}-${ut}`},t.createElement("td",{role:"gridcell",className:"pointer",onClick:()=>xe(ut)},t.createElement(b.J,{name:"external-link-alt"})," \xA0 ",gn.type),t.createElement("td",{role:"gridcell"},t.createElement(P.Lh,null,gn.title&&t.createElement("span",null,gn.title),gn.type==="link"&&t.createElement("span",null,gn.url),gn.type==="dashboards"&&t.createElement(Pr.P,{tags:gn.tags??[]}))),t.createElement("td",{style:{width:"1%"},role:"gridcell"},ut!==0&&t.createElement(R.h,{name:"arrow-up","aria-label":"arrow-up",onClick:()=>Bt(ut,-1)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},yt.length>1&&ut!==yt.length-1?t.createElement(R.h,{name:"arrow-down","aria-label":"arrow-down",onClick:()=>Bt(ut,1)}):null),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(R.h,{"aria-label":"copy",name:"copy",onClick:()=>Kt(gn,ut)})),t.createElement("td",{style:{width:"1%"},role:"gridcell"},t.createElement(As.m,{"aria-label":`Delete link with title "${gn.title}"`,size:"sm",onConfirm:()=>fn(ut)})))))),t.createElement(va,{onClick:we},"New link"))};function Gt({dashboard:Be,sectionNav:we,editIndex:xe}){const[yt,Rt]=(0,t.useState)(!1),Bt=()=>{Rt(!1),i.E1.partial({editIndex:void 0})},Kt=()=>{Be.links=[...Be.links,{...tr.zA}],Rt(!0),i.E1.partial({editIndex:Be.links.length-1})},fn=ut=>{Rt(!1),i.E1.partial({editIndex:ut})},Pn=xe!==void 0;let gn;return Pn&&(gn={text:yt?"New link":"Edit link",subTitle:yt?"Create a new link on your dashboard":"Edit a specific link of your dashboard"}),t.createElement(r.T,{navModel:we,pageNav:gn},!Pn&&t.createElement(ws,{dashboard:Be,onNew:Kt,onEdit:fn}),Pn&&t.createElement(tr.fD,{dashboard:Be,editLinkIdx:xe,onGoBack:Bt}))}var na=e(99714);const ps=10;class cr extends t.PureComponent{constructor(we){super(we),this.getVersions=(xe=!1)=>{this.setState({isAppending:xe}),na.K8.getHistoryList(this.props.dashboard,{limit:this.limit,start:this.start}).then(yt=>{this.setState({isLoading:!1,versions:[...this.state.versions,...this.decorateVersions(yt)]}),this.start+=this.limit}).catch(yt=>console.log(yt)).finally(()=>this.setState({isAppending:!1}))},this.getDiff=async()=>{const xe=this.state.versions.filter(Pn=>Pn.checked),[yt,Rt]=xe,Bt=yt.version===this.props.dashboard.version;this.setState({isLoading:!0});const Kt=await na.K8.getDashboardVersion(this.props.dashboard.uid,Rt.version),fn=await na.K8.getDashboardVersion(this.props.dashboard.uid,yt.version);this.setState({baseInfo:Rt,isLoading:!1,isNewLatest:Bt,newInfo:yt,viewMode:"compare",diffData:{lhs:Kt.data,rhs:fn.data}})},this.decorateVersions=xe=>xe.map(yt=>({...yt,createdDateString:this.props.dashboard.formatDate(yt.created),ageString:this.props.dashboard.getRelativeTime(yt.created),checked:!1})),this.onCheck=(xe,yt)=>{this.setState({versions:this.state.versions.map(Rt=>Rt.id===yt?{...Rt,checked:xe.currentTarget.checked}:Rt)})},this.reset=()=>{this.setState({baseInfo:void 0,diffData:{lhs:{},rhs:{}},isNewLatest:!1,newInfo:void 0,versions:this.state.versions.map(xe=>({...xe,checked:!1})),viewMode:"list"})},this.limit=ps,this.start=0,this.state={isAppending:!0,isLoading:!0,versions:[],viewMode:"list",isNewLatest:!1,diffData:{lhs:{},rhs:{}}}}componentDidMount(){this.getVersions()}isLastPage(){return this.state.versions.find(we=>we.version===1)}render(){const{versions:we,viewMode:xe,baseInfo:yt,newInfo:Rt,isNewLatest:Bt,isLoading:Kt,diffData:fn}=this.state,Pn=we.filter(Tt=>Tt.checked).length===2,gn=we.length>1,ut=we.length>=this.limit;return xe==="compare"?t.createElement(r.T,{navModel:this.props.sectionNav},t.createElement(na.Cs,{onClick:this.reset,baseVersion:yt?.version,newVersion:Rt?.version,isNewLatest:Bt}),Kt?t.createElement(Hs,{msg:"Fetching changes\u2026"}):t.createElement(na.U$,{newInfo:Rt,baseInfo:yt,isNewLatest:Bt,diffData:fn})):t.createElement(r.T,{navModel:this.props.sectionNav},Kt?t.createElement(Hs,{msg:"Fetching history list\u2026"}):t.createElement(na.Sd,{versions:we,onCheck:this.onCheck,canCompare:Pn}),this.state.isAppending&&t.createElement(Hs,{msg:"Fetching more entries\u2026"}),gn&&t.createElement(na.R1,{hasMore:ut,canCompare:Pn,getVersions:this.getVersions,getDiff:this.getDiff,isLastPage:!!this.isLastPage()}))}}const Hs=({msg:Be})=>t.createElement(P.Lh,null,t.createElement(D.$,null),t.createElement("em",null,Be)),os=()=>i.E1.partial({editview:null,editIndex:null});function is({dashboard:Be,editview:we,pageNav:xe,sectionNav:yt}){const[Rt,Bt]=(0,t.useState)(0);(0,t.useEffect)(()=>{Be.events.subscribe(p.hS,()=>Bt(xn=>xn+1))},[Be]);const Kt=(0,t.useMemo)(()=>Za(Be),[Be,Rt]),fn=()=>{Be.meta.hasUnsavedFolderChange=!1},Pn=Be.meta.folderTitle,gn=Kt.find(xn=>xn.id===we)??Kt[0],ut=d.Vt.hasEditPermissionInFolders,Tt=Be.meta.canSave,bt=(0,n.TH)(),Ht=Ct(bt),en=Ze(xe,yt,Kt,gn,bt),ln=u.ZP.featureToggles.topnav?"sm":"md",Cn=[u.ZP.featureToggles.topnav&&t.createElement(f.zx,{"data-testid":s.wl.pages.Dashboard.Settings.Actions.close,variant:"secondary",key:"close",fill:"outline",size:ln,onClick:os},"Close"),ut&&t.createElement($t.t,{dashboard:Be,onSaveSuccess:fn,variant:"secondary",key:"save as",size:ln}),Tt&&t.createElement($t.i,{dashboard:Be,onSaveSuccess:fn,key:"Save",size:ln})];return t.createElement(t.Fragment,null,u.ZP.featureToggles.topnav?t.createElement(m.A,{actions:t.createElement(o.R,{alignment:"right"},Cn)}):t.createElement(c.X,{title:`${Be.title} / Settings`,parent:Pn,onGoBack:os},Cn),t.createElement(gn.component,{sectionNav:en,dashboard:Be,editIndex:Ht}))}function Za(Be){const we=[];return Be.meta.canEdit&&(we.push({title:"General",id:"settings",icon:"sliders-v-alt",component:zs}),we.push({title:"Annotations",id:"annotations",icon:"comment-alt",component:da,subTitle:"Annotation queries return events that can be visualized as event markers in graphs across the dashboard."}),we.push({title:"Variables",id:"templating",icon:"calculator-alt",component:Dt,subTitle:"Variables can make your dashboard more dynamic and act as global filters."}),we.push({title:"Links",id:"links",icon:"link",component:Gt})),Be.meta.canMakeEditable&&we.push({title:"General",icon:"sliders-v-alt",id:"settings",component:Et}),Be.id&&Be.meta.canSave&&we.push({title:"Versions",id:"versions",icon:"history",component:cr}),Be.id&&Be.meta.canAdmin&&(u.ZP.rbacEnabled?d.Vt.hasPermission(g.AccessControlAction.DashboardsPermissionsRead)&&we.push({title:"Permissions",id:"permissions",icon:"lock",component:mn}):we.push({title:"Permissions",id:"permissions",icon:"lock",component:dn})),we.push({title:"JSON Model",id:"dashboard_json",icon:"arrow",component:lr}),we}function Ze(Be,we,xe,yt,Rt){const Bt={text:"Settings",children:[],icon:"apps",hideFromBreadcrumbs:!0};return Bt.children=xe.map(Kt=>({text:Kt.title,icon:Kt.icon,id:Kt.id,url:l.u.getUrlForPartial(Rt,{editview:Kt.id,editIndex:null}),active:Kt===yt,parentItem:Bt,subTitle:Kt.subTitle})),Be.parentItem?Be={...Be,parentItem:{...Be.parentItem,parentItem:we.node}}:Be={...Be,parentItem:we.node},Bt.parentItem=Be,{main:Bt,node:Bt.children.find(Kt=>Kt.active)}}function Et({dashboard:Be,sectionNav:we}){return t.createElement(r.T,{navModel:we},t.createElement("div",{className:"dashboard-settings__header"},"Dashboard not editable"),t.createElement(f.zx,{type:"submit",onClick:()=>Be.makeEditable()},"Make editable"))}function Ct(Be){const we=new URLSearchParams(Be.search).get("editIndex");if(we!=null)return parseInt(we,10)}},18428:(Z,O,e)=>{"use strict";e.d(O,{fD:()=>g,xy:()=>u,zA:()=>m});var t=e(68404),n=e(24799),l=e(46967),s=e(53217),i=e(43339),f=e(20941),c=e(58255),o=e(31403);const m={icon:"external link",title:"New link",tooltip:"",type:"dashboards",url:"",asDropdown:!1,tags:[],targetBlank:!1,keepTime:!1,includeVars:!1},r=[{value:"dashboards",label:"Dashboards"},{value:"link",label:"Link"}],u={"external link":"external-link-alt",dashboard:"apps",question:"question-circle",info:"info-circle",bolt:"bolt",doc:"file-alt",cloud:"cloud"},d=Object.keys(u).map(p=>({label:p,value:p})),g=({editLinkIdx:p,dashboard:E,onGoBack:h})=>{const[a,v]=(0,t.useState)(p!==null?E.links[p]:m),x=b=>{const R=[...E.links];R.splice(p,1,b),E.links=R,v(b)},y=b=>{x({...a,tags:b})},C=b=>{const R={...a,type:b.value};R.type==="dashboards"?(R.url="",R.tooltip=""):R.tags=[],x(R)},P=b=>{x({...a,icon:b.value})},D=b=>{const R=b.currentTarget;x({...a,[R.name]:R.type==="checkbox"?R.checked:R.value})},M=a.title===m.title;return t.createElement("div",{style:{maxWidth:"600px"}},t.createElement(n.g,{label:"Title"},t.createElement(l.I,{name:"title",id:"title",value:a.title,onChange:D,autoFocus:M})),t.createElement(n.g,{label:"Type"},t.createElement(s.Ph,{inputId:"link-type-input",value:a.type,options:r,onChange:C})),a.type==="dashboards"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"With tags"},t.createElement(i.B,{tags:a.tags,onChange:y}))),a.type==="link"&&t.createElement(t.Fragment,null,t.createElement(n.g,{label:"URL"},t.createElement(l.I,{name:"url",value:a.url,onChange:D})),t.createElement(n.g,{label:"Tooltip"},t.createElement(l.I,{name:"tooltip",value:a.tooltip,onChange:D,placeholder:"Open dashboard"})),t.createElement(n.g,{label:"Icon"},t.createElement(s.Ph,{value:a.icon,options:d,onChange:P}))),t.createElement(f.s,{label:"Options",isOpen:!0},a.type==="dashboards"&&t.createElement(n.g,null,t.createElement(c.X,{label:"Show as dropdown",name:"asDropdown",value:a.asDropdown,onChange:D})),t.createElement(n.g,null,t.createElement(c.X,{label:"Include current time range",name:"keepTime",value:a.keepTime,onChange:D})),t.createElement(n.g,null,t.createElement(c.X,{label:"Include current template variable values",name:"includeVars",value:a.includeVars,onChange:D})),t.createElement(n.g,null,t.createElement(c.X,{label:"Open link in new tab",name:"targetBlank",value:a.targetBlank,onChange:D}))),t.createElement(o.zx,{onClick:h},"Apply"))}},91183:(Z,O,e)=>{"use strict";e.d(O,{u:()=>u});var t=e(9892),n=e(68404),l=e(24664),s=e(68183),i=e(72648),f=e(51275),c=e(31403),o=e(96044),m=e(36281);const r="showCategory",u=n.memo(({id:p,title:E,children:h,forceOpen:a,isOpenDefault:v,renderTitle:x,className:y,itemsCount:C,isNested:P=!1})=>{const D=v!==!1,[M,b]=(0,l.Z)(g(p),{isExpanded:D}),R=(0,i.wW)(d),[B,w]=(0,o.K)(),[A,I]=(0,n.useState)(M?.isExpanded??D),F=(0,n.useRef)(0),K=(0,n.useRef)(null),W=B[r]===p;(0,n.useEffect)(()=>{F.current&&Date.now()-F.current<200||(W||a)&&(A||I(!0),W&&K.current?.scrollIntoView())},[a,A,W]);const U=(0,n.useCallback)(()=>{F.current=Date.now(),w({[r]:A?void 0:p},!0),b({isExpanded:!A}),I(!A)},[b,I,w,A,p]);x||(x=function(z){return z||C===void 0||C===0?E:n.createElement("span",null,E," ",n.createElement(f.A,{value:C}))});const N=(0,t.cx)({[R.box]:!0,[R.boxNestedExpanded]:P&&A},y,"options-group"),S=(0,t.cx)(R.header,{[R.headerExpanded]:A,[R.headerNested]:P}),Y=(0,t.cx)(R.body,{[R.bodyNested]:P});return n.createElement("div",{className:N,"data-testid":"options-category","aria-label":s.wl.components.OptionsGroup.group(p),ref:K},n.createElement("div",{className:S,onClick:U},n.createElement(c.zx,{"aria-label":s.wl.components.OptionsGroup.toggle(p),type:"button",fill:"text",size:"sm",variant:"secondary","aria-expanded":A,className:R.toggleButton,icon:A?"angle-down":"angle-right",onClick:U}),n.createElement("h6",{id:`button-${p}`,className:R.title},x(A))),A&&n.createElement("div",{className:Y,id:p,"aria-labelledby":`button-${p}`},h))});u.displayName="OptionsPaneCategory";const d=p=>({box:t.css`
      border-top: 1px solid ${p.colors.border.weak};
    `,boxNestedExpanded:t.css`
      margin-bottom: ${p.spacing(2)};
    `,title:t.css`
      flex-grow: 1;
      overflow: hidden;
      line-height: 1.5;
      font-size: 1rem;
      padding-left: 6px;
      font-weight: ${p.typography.fontWeightMedium};
      margin: 0;
    `,header:t.css`
      display: flex;
      cursor: pointer;
      align-items: center;
      padding: ${p.spacing(.5)};
      color: ${p.colors.text.primary};
      font-weight: ${p.typography.fontWeightMedium};

      &:hover {
        background: ${p.colors.emphasize(p.colors.background.primary,.03)};
      }
    `,toggleButton:t.css`
      align-self: baseline;
    `,headerExpanded:t.css`
      color: ${p.colors.text.primary};
    `,headerNested:t.css`
      padding: ${p.spacing(.5,0,.5,0)};
    `,body:t.css`
      padding: ${p.spacing(1,2,1,4)};
    `,bodyNested:t.css`
      position: relative;
      padding-right: 0;
      &:before {
        content: '';
        position: absolute;
        top: 0;
        left: 8px;
        width: 1px;
        height: 100%;
        background: ${p.colors.border.weak};
      }
    `}),g=p=>`${m.jy}.optionGroup[${p}]`},91752:(Z,O,e)=>{"use strict";e.d(O,{j:()=>l});var t=e(68404),n=e(91183);class l{constructor(i){this.props=i,this.items=[],this.categories=[]}addItem(i){return i.parent=this,this.items.push(i),this}addCategory(i){return i.props.isNested=!0,i.parent=this,this.categories.push(i),this}getCategory(i){let f=this.categories.find(c=>c.props.id===i);return f||(f=new l({title:i,id:i}),this.addCategory(f),f)}render(i){return this.props.customRender?this.props.customRender():t.createElement(n.u,{key:this.props.title,...this.props},this.items.map(f=>f.render(i)),this.categories.map(f=>f.render(i)))}}},66352:(Z,O,e)=>{"use strict";e.d(O,{a:()=>d});var t=e(68404),n=e(14677),l=e.n(n),s=e(68183),i=e(64353),f=e(24799),c=e(9892),o=e(72648),m=e(6554);function r({overrides:g}){const p=(0,o.wW)(u);return t.createElement("div",{className:p.wrapper},g.map((E,h)=>t.createElement(m.u,{content:E.tooltip,key:h.toString(),placement:"top"},t.createElement("div",{"aria-label":E.description,className:p[E.type]}))))}const u=g=>{const p={width:8,height:8,borderRadius:"50%",marginLeft:g.spacing(1),position:"relative",top:"-1px"};return{wrapper:(0,c.css)({display:"flex"}),rule:(0,c.css)({...p,backgroundColor:g.colors.primary.main}),data:(0,c.css)({...p,backgroundColor:g.colors.warning.main})}};class d{constructor(p){this.props=p}getLabel(p){const{title:E,description:h,overrides:a}=this.props;if(!p)return this.parent.props.title===E&&!a?.length?null:t.createElement(i._,{description:h},E,a&&a.length>0&&t.createElement(r,{overrides:a}));const v=[];return this.parent.parent&&v.push(this.highlightWord(this.parent.parent.props.title,p)),this.parent.props.title!==E&&v.push(this.highlightWord(this.parent.props.title,p)),t.createElement(i._,{description:h&&this.highlightWord(h,p),category:v},this.highlightWord(E,p),a&&a.length>0&&t.createElement(r,{overrides:a}))}highlightWord(p,E){return t.createElement(l(),{textToHighlight:p,searchWords:[E],highlightClassName:"search-fragment-highlight"})}renderOverrides(){const{overrides:p}=this.props;!p||p.length}render(p){const{title:E,description:h,render:a,showIf:v,skipField:x}=this.props,y=`${this.parent.props.id} ${E}`;return v&&!v()?null:x?a():t.createElement(f.g,{label:this.getLabel(p),description:h,key:y,"aria-label":s.wl.components.PanelEditor.OptionsPane.fieldLabel(y)},a())}}},57054:(Z,O,e)=>{"use strict";e.d(O,{HZ:()=>g,AL:()=>d});var t=e(82897),n=e(68404),l=e(91171),s=e(64703),i=e(91752),f=e(66352);const c="Some data fields have this option pre-configured. Add a field override rule to override the pre-configured value.",o="An override rule exists for this property";function m(p,E,h){const a=[];if(h){for(const x of h)for(const y of x.fields)if((0,t.get)(y.config,p.path)!=null){a.push({type:"data",description:c,tooltip:c});break}}return E.overrides.some(x=>x.properties.some(y=>y.id===p.id))&&a.push({type:"rule",description:o,tooltip:o}),a}var r=e(13505);function u({data:p,replaceVariables:E,options:h,eventBus:a,instanceState:v}){const x=p?.series??[];return{data:x,replaceVariables:E,options:h,eventBus:a,getSuggestions:C=>(0,s.PW)(x,C),instanceState:v}}function d(p){const{plugin:E,panel:h,onPanelOptionsChanged:a,onFieldConfigsChange:v,data:x,dashboard:y,instanceState:C}=p,P=h.getOptions(),D=h.fieldConfig,M={},b=u({data:x,replaceVariables:h.replaceVariables,options:P,eventBus:y.events,instanceState:C}),R=w=>{const A=(w&&w[0])??`${E.meta.name}`,I=M[A];return I||(M[A]=new i.j({title:A,id:A}))},B={getValue:w=>(0,t.get)(P,w),onChange:(w,A)=>{const I=(0,r.hs)(P,w,A);a(I)}};g(E.getPanelOptionsSupplier(),B,R,b);for(const w of E.fieldConfigRegistry.list()){if(w.isCustom&&w.showIf&&!w.showIf(D.defaults.custom,x?.series)||w.hideFromDefaults)continue;const A=R(w.category),I=w.editor,F=D.defaults,K=w.isCustom?F.custom?(0,t.get)(F.custom,w.path):void 0:(0,t.get)(F,w.path);w.getItemsCount&&(A.props.itemsCount=w.getItemsCount(K)),A.addItem(new f.a({title:w.name,description:w.description,overrides:m(w,D,x?.series),render:function(){const U=N=>{v((0,r.uJ)(D,w.path,N,w.isCustom))};return n.createElement(I,{value:K,onChange:U,item:w,context:b,id:w.id})}}))}return Object.values(M)}function g(p,E,h,a,v){const x=new l.rt;p(x,a);for(const y of x.getItems()){if(y.showIf&&!y.showIf(a.options,a.data))continue;let C=v;if(C?y.category?.[0]?.length&&(C=C.getCategory(y.category[0])):C=h(y.category),(0,l.j)(y)){const D=y.getNestedValueAccess(E),M=D.getContext?D.getContext(a):{...a,options:E.getValue(y.path)};g(y.getBuilder(),D,h,M,C);continue}const P=y.editor;C.addItem(new f.a({title:y.name,description:y.description,render:function(){return n.createElement(P,{value:E.getValue(y.path),onChange:M=>{E.onChange(y.path,M)},item:y,context:a,id:y.id})}}))}}},36281:(Z,O,e)=>{"use strict";e.d(O,{Hl:()=>u,K9:()=>E,OT:()=>a,ZP:()=>x,g_:()=>h,jy:()=>c,my:()=>p,yi:()=>g});var t=e(62992),n=e(49922),l=e(69311),s=e(58379),i=e(96161),f=e(16200);const c="grafana.dashboard.editor.ui",o={isPanelOptionsVisible:!0,rightPaneSize:400,topPaneSize:.45,mode:f.d1.Fill},m=()=>{const y=s.Z.getObject(c,o);let C={...y};return typeof y.topPaneSize=="string"&&(C={...y,topPaneSize:parseFloat(y.topPaneSize)/100}),{getPanel:()=>new i.rY({}),getSourcePanel:()=>new i.rY({}),getData:()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,l.JK)()}),initDone:!1,shouldDiscardChanges:!1,isOpen:!1,isVizPickerOpen:!1,tableViewEnabled:!1,ui:{...o,...C}}},r=(0,t.oM)({name:"panelEditor",initialState:m(),reducers:{updateEditorInitState:(y,C)=>{y.getPanel=()=>C.payload.panel,y.getSourcePanel=()=>C.payload.sourcePanel,y.initDone=!0,y.isOpen=!0,y.shouldDiscardChanges=!1},setEditorPanelData:(y,C)=>{y.getData=()=>C.payload},setDiscardChanges:(y,C)=>{y.shouldDiscardChanges=C.payload},setPanelEditorUIState:(y,C)=>{y.ui={...y.ui,...C.payload},!y.ui.isPanelOptionsVisible&&y.isVizPickerOpen&&(y.isVizPickerOpen=!1)},toggleVizPicker:(y,C)=>{y.isVizPickerOpen=C.payload,y.isVizPickerOpen&&(y.ui.isPanelOptionsVisible=!0)},toggleTableView(y){y.tableViewEnabled=!y.tableViewEnabled},closeEditor:y=>{y.getPanel=()=>new i.rY({}),y.getSourcePanel=()=>new i.rY({}),y.isOpen=!1,y.initDone=!1,y.isVizPickerOpen=!1,y.tableViewEnabled=!1}}}),{updateEditorInitState:u,setEditorPanelData:d,setDiscardChanges:g,closeEditor:p,setPanelEditorUIState:E,toggleVizPicker:h,toggleTableView:a}=r.actions,x={panelEditor:r.reducer}},16200:(Z,O,e)=>{"use strict";e.d(O,{Ip:()=>t,Ok:()=>f,d1:()=>n,d7:()=>s});var t=(c=>(c.Query="query",c.Transform="transform",c.Visualize="visualize",c.Alert="alert",c))(t||{}),n=(c=>(c[c.Fill=0]="Fill",c[c.Fit=1]="Fit",c[c.Exact=2]="Exact",c))(n||{}),l=(c=>(c[c.Off=0]="Off",c[c.Table=1]="Table",c))(l||{});const s=[{value:0,label:"Fill",description:"Use all available space"},{value:2,label:"Actual",description:"Make same size as on the dashboard"}],i=[{value:0,label:"Visualization",description:"Show using selected visualization"},{value:1,label:"Table",description:"Show raw data in table form"}];var f=(c=>(c[c.Visualizations=0]="Visualizations",c[c.LibraryPanels=1]="LibraryPanels",c[c.Suggestions=2]="Suggestions",c))(f||{})},13505:(Z,O,e)=>{"use strict";e.d(O,{hs:()=>o,jF:()=>i,sY:()=>f,uJ:()=>c});var t=e(82897),n=e.n(t),l=e(84952),s=e(16200);function i(m,r,u,d){if(m===s.d1.Fill)return{width:r,height:u};const g=8*6,p=60,h=(window.innerWidth-p-l.hD*4)/l.cz*d.gridPos.w,a=l.K3*d.gridPos.h+g,v=Math.min(r/h,u/a);return h<=r&&a<=u?{width:h,height:a}:{width:h*v,height:a*v}}function f(m){return m?.meta.skipDataQuery===!1}const c=(m,r,u,d)=>{let g={...m.defaults};const p=u==null||u==="";return d?g.custom?p?g.custom=(0,t.omit)(g.custom,r):g.custom=o(g.custom,r,u):p||(g.custom=o(g.custom,r,u)):p?g=(0,t.omit)(g,r):g=o(g,r,u),{...m,defaults:g}};function o(m,r,u){const d=Array.isArray(r)?r:r.split("."),g=d.shift();if(g.endsWith("]")){const E=g.lastIndexOf("["),h=+g.substring(E+1,g.length-1),a=g.substring(0,E);let v=m[a];const x=Array.isArray(v)?[...v]:[];return d.length&&(v=x[h],(v==null||typeof v!="object")&&(v={}),u=o(v,d,u)),x[h]=u,{...m,[a]:x}}if(!d.length)return{...m,[g]:u};let p=m[g];return(p==null||typeof p!="object")&&(p={}),{...m,[g]:o(p,d,u)}}},84135:(Z,O,e)=>{"use strict";e.d(O,{i:()=>c,t:()=>o});var t=e(68404),n=e(68183),l=e(41818),s=e(5191),i=e(31403),f=e(63205);const c=({dashboard:m,onSaveSuccess:r,size:u})=>t.createElement(s.JY,null,({showModal:d,hideModal:g})=>t.createElement(i.zx,{size:u,onClick:()=>{d(f.d,{dashboard:m,onSaveSuccess:r,onDismiss:g})},"aria-label":n.wl.pages.Dashboard.Settings.General.saveDashBoard},"Save dashboard")),o=({dashboard:m,onSaveSuccess:r,variant:u,size:d})=>t.createElement(s.JY,null,({showModal:g,hideModal:p})=>t.createElement(i.zx,{size:d,onClick:()=>{(0,l.ff)("grafana_dashboard_save_as_clicked"),g(f.d,{dashboard:m,onSaveSuccess:r,onDismiss:p,isCopy:!0})},variant:u,"aria-label":n.wl.pages.Dashboard.Settings.General.saveAsDashBoard},"Save as"))},63205:(Z,O,e)=>{"use strict";e.d(O,{d:()=>Ie});var t=e(68404),n=e(22350),l=e(54899),s=e(35645),i=e(67487),f=e(30979),c=e(72142),o=e(79841),m=e(29930),r=e(15092),u=e(9892),d=e(72648),g=e(45253);function p({dashboard:We}){const Je=(0,d.wW)(E),{loading:He,value:Ae,error:et}=(0,n.Z)(async()=>{const Se=We.getSaveModelClone();return m.ae.validateDashboard(Se).catch(Xe=>{if(Xe.status>=500)throw Xe;return Xe.data})},[We]);let _e;if(He)_e=t.createElement(g.b,{severity:"info",title:"Checking dashboard validity"});else if(Ae)Ae.isValid||(_e=t.createElement(g.b,{severity:"warning",title:"Dashboard failed schema validation"},t.createElement("p",null,"Validation is provided for development purposes and should be safe to ignore. If you are a Grafana developer, consider checking and updating the dashboard schema"),t.createElement("div",{className:Je.error},Ae.message)));else{const Se=et?.message??"Unknown error";_e=t.createElement(g.b,{severity:"info",title:"Error checking dashboard validity"},t.createElement("p",{className:Je.error},Se))}return _e?t.createElement("div",{className:Je.root},_e):null}const E=We=>({root:(0,u.css)({marginTop:We.spacing(1)}),error:(0,u.css)({fontFamily:We.typography.fontFamilyMonospace,whiteSpace:"pre-wrap",overflowX:"auto",maxWidth:"100%"})}),h=p;var a=e(64687),v=e(61017);const x=({diff:We,oldValue:Je,newValue:He})=>{const Ae=(0,d.wW)(y),et=(0,n.Z)(async()=>{const Se=JSON.stringify(Je??{},null,2),Fe=JSON.stringify(He??{},null,2);let Xe;const Qe=[];let ct=0;if(We)for(const[ht,ft]of Object.entries(We)){const Re=t.createElement(a.B,{diffs:ft,key:ht,title:ht});ht==="schemaVersion"?Xe=Re:Qe.push(Re),ct+=ft.length}return{schemaChange:Xe,diffs:Qe,count:ct,showDiffs:ct<15,jsonView:t.createElement(v.Z,{oldValue:Se,newValue:Fe})}},[We,Je,He]),{value:_e}=et;return!_e||!Je?t.createElement(i.$,null):_e.count<1?t.createElement("div",null,"No changes in this dashboard"):t.createElement("div",null,_e.schemaChange&&t.createElement("div",{className:Ae.spacer},_e.schemaChange),_e.showDiffs&&t.createElement("div",{className:Ae.spacer},_e.diffs),t.createElement("h4",null,"JSON Model"),_e.jsonView)},y=We=>({spacer:u.css`
    margin-bottom: ${We.v1.spacing.xl};
  `});var C=e(98102),P=e(35029),D=e(31403),M=e(84135),b=e(53787),R=e(83383),B=e(41818),w=e(37932),A=e(18271),I=e(60499),F=e(77582),K=e(61962),W=e(50946),U=e(81168),N=e(45984);const S=async(We,Je,He)=>{let Ae=Je.folderUid;Ae===void 0&&(Ae=He.meta.folderUid??We.folderUid);const et=await(0,W.uC)({...Je,folderUid:Ae,dashboard:We});return await F.Vt.fetchUserPermissions(),et},Y=(We,Je=!1)=>{const[He,Ae]=(0,b.default)(async(Se,Fe,Xe)=>await S(Se,Fe,Xe),[]),et=(0,U.useDispatch)(),_e=(0,I.iG)();return(0,t.useEffect)(()=>{if(He.error&&!He.loading&&_e.error(He.error.message??"Error saving dashboard"),He.value){We.version=He.value.version,We.clearUnsavedChanges(),A.Z.publish(new N.Jd),_e.success("Dashboard saved"),Je?(0,B.ff)("grafana_dashboard_copied",{name:We.title,url:He.value.url}):(0,B.ff)(`grafana_dashboard_${We.id?"saved":"created"}`,{name:We.title,url:He.value.url});const Se=w.E1.getLocation().pathname,Fe=R.u.stripBaseFromUrl(He.value.url);Fe!==Se&&setTimeout(()=>w.E1.replace(Fe)),We.meta.isStarred&&et((0,K.gd)({id:We.uid,title:We.title,url:Fe}))}},[We,Je,He,_e,et]),{state:He,onDashboardSave:Ae}},Q=({dashboard:We,dashboardSaveModel:Je,error:He,onDismiss:Ae})=>{const{onDashboardSave:et}=Y(We);return(0,t.useEffect)(()=>{He.data&&G(He.data.status)&&(He.isHandled=!0)},[He]),t.createElement(t.Fragment,null,He.data&&He.data.status==="version-mismatch"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"Someone else has updated this dashboard ",t.createElement("br",null)," ",t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await et(Je,{overwrite:!0},We),Ae()},onDismiss:Ae}),He.data&&He.data.status==="name-exists"&&t.createElement(C.s,{isOpen:!0,title:"Conflict",body:t.createElement("div",null,"A dashboard with the same name in selected folder already exists. ",t.createElement("br",null),t.createElement("small",null,"Would you still like to save this dashboard?")),confirmText:"Save and overwrite",onConfirm:async()=>{await et(Je,{overwrite:!0},We),Ae()},onDismiss:Ae}),He.data&&He.data.status==="plugin-dashboard"&&t.createElement(z,{dashboard:We,onDismiss:Ae}))},z=({onDismiss:We,dashboard:Je})=>{const{onDashboardSave:He}=Y(Je),Ae=(0,d.wW)(k);return t.createElement(P.u,{className:Ae.modal,title:"Plugin dashboard",icon:"copy",isOpen:!0,onDismiss:We},t.createElement("div",{className:Ae.modalText},"Your changes will be lost when you update the plugin.",t.createElement("br",null),t.createElement("small",null,"Use ",t.createElement("strong",null,"Save As")," to create custom version.")),t.createElement(P.u.ButtonRow,null,t.createElement(D.zx,{variant:"secondary",onClick:We,fill:"outline"},"Cancel"),t.createElement(M.t,{dashboard:Je,onSaveSuccess:We}),t.createElement(D.zx,{variant:"destructive",onClick:async()=>{await He(Je.getSaveModelClone(),{overwrite:!0},Je),We()}},"Overwrite")))},G=We=>{switch(We){case"version-mismatch":case"name-exists":case"plugin-dashboard":return!0;default:return!1}},k=We=>({modal:u.css`
    width: 500px;
  `,modalText:u.css`
    font-size: ${We.typography.h4.fontSize};
    color: ${We.colors.text.primary};
    margin-bottom: ${We.spacing(4)}
    padding-top: ${We.spacing(2)};
  `,modalButtonRow:u.css`
    margin-bottom: 14px;
    a,
    button {
      margin-right: ${We.spacing(2)};
    }
  `});var j=e(94270),de=e(24799),ge=e(46967),re=e(63619),ce=e(8944),ie=e(52081),fe=e(79658),Ce=e(85385);const ee=We=>{const Je=We.getSaveModelClone();return Je.id=null,Je.uid="",Je.title+=" Copy",Je.editable=!0,We.id>0&&Je.panels.forEach(He=>{He.type==="graph"&&He.alert&&delete He.thresholds,delete He.alert}),Je},ne=({dashboard:We,isNew:Je,onSubmit:He,onCancel:Ae,onSuccess:et})=>{const _e={title:Je?We.title:`${We.title} Copy`,$folder:{uid:We.meta.folderUid,title:We.meta.folderTitle},copyTags:!1},Se=Fe=>async Xe=>{if(Xe&&Xe===Fe().$folder.title?.trim())return"Dashboard name cannot be the same as folder name";try{return await Ce.t.validateNewDashboardName(Fe().$folder.uid,Xe),!0}catch(Qe){return Qe instanceof Error?Qe.message:"Dashboard name is invalid"}};return t.createElement(j.l,{defaultValues:_e,onSubmit:async Fe=>{if(!He)return;const Xe=ee(We);Xe.title=Fe.title,Fe.copyTags||(Xe.tags=[]),(await He(Xe,{folderUid:Fe.$folder.uid},We)).status==="success"&&et()}},({register:Fe,control:Xe,errors:Qe,getValues:ct})=>t.createElement(t.Fragment,null,t.createElement(de.g,{label:"Dashboard name",invalid:!!Qe.title,error:Qe.title?.message},t.createElement(ge.I,{...Fe("title",{validate:Se(ct)}),"aria-label":"Save dashboard title field",autoFocus:!0})),t.createElement(de.g,{label:"Folder"},t.createElement(re.g,{render:({field:{ref:ht,...ft}})=>t.createElement(fe.Es,{...ft,dashboardId:We.id,initialFolderUid:We.meta.folderUid,initialTitle:We.meta.folderTitle,enableCreateNew:!0}),control:Xe,name:"$folder"})),!Je&&t.createElement(de.g,{label:"Copy tags"},t.createElement(ce.r,{...Fe("copyTags")})),t.createElement(ie.Lh,null,t.createElement(D.zx,{type:"button",variant:"secondary",onClick:Ae,fill:"outline"},"Cancel"),t.createElement(D.zx,{type:"submit","aria-label":"Save dashboard button"},"Save"))))};var X=e(68183),te=e(26418),ae=e(58255),_=e(97379);const ve=({dashboard:We,saveModel:Je,options:He,onSubmit:Ae,onCancel:et,onSuccess:_e,onOptionsChange:Se})=>{const Fe=(0,t.useMemo)(()=>We.hasTimeChanged(),[We]),Xe=(0,t.useMemo)(()=>We.hasVariableValuesChanged(),[We]),[Qe,ct]=(0,t.useState)(!1);return t.createElement(j.l,{onSubmit:async ht=>{if(!Ae)return;ct(!0),He={...He,message:ht.message},(await Ae(Je.clone,He,We)).status==="success"?(He.saveVariables&&We.resetOriginalVariables(),He.saveTimerange&&We.resetOriginalTime(),_e()):ct(!1)}},({register:ht,errors:ft})=>{const Re=ht("message");return t.createElement(te.Stack,{direction:"column",gap:2},Fe&&t.createElement(ae.X,{checked:!!He.saveTimerange,onChange:()=>Se({...He,saveTimerange:!He.saveTimerange}),label:"Save current time range as dashboard default","aria-label":X.wl.pages.SaveDashboardModal.saveTimerange}),Xe&&t.createElement(ae.X,{checked:!!He.saveVariables,onChange:()=>Se({...He,saveVariables:!He.saveVariables}),label:"Save current variable values as dashboard default","aria-label":X.wl.pages.SaveDashboardModal.saveVariables}),t.createElement(_.K,{...Re,"aria-label":"message",value:He.message,onChange:nt=>{Se({...He,message:nt.currentTarget.value}),Re.onChange(nt)},placeholder:"Add a note to describe your changes.",autoFocus:!0,rows:5}),t.createElement(te.Stack,{alignItems:"center"},t.createElement(D.zx,{variant:"secondary",onClick:et,fill:"outline"},"Cancel"),t.createElement(D.zx,{type:"submit",disabled:!Je.hasChanges,icon:Qe?"fa fa-spinner":void 0,"aria-label":X.wl.pages.SaveDashboardModal.save},"Save"),!Je.hasChanges&&t.createElement("div",null,"No changes to save")))})};var Ve=e(3574),it=e(94599);const rt=({dashboard:We,onCancel:Je})=>{const[He,Ae]=(0,t.useState)(()=>{const _e=We.getSaveModelClone();return delete _e.id,JSON.stringify(_e,null,2)}),et=(0,t.useCallback)(()=>{const _e=new Blob([He],{type:"application/json;charset=utf-8"});(0,Ve.saveAs)(_e,We.title+"-"+new Date().getTime()+".json")},[We.title,He]);return t.createElement(t.Fragment,null,t.createElement(te.Stack,{direction:"column",gap:2},t.createElement("div",null,"This dashboard cannot be saved from the Grafana UI because it has been provisioned from another source. Copy the JSON or save it to a file below, then you can update your dashboard in the provisioning source.",t.createElement("br",null),t.createElement("i",null,"See"," ",t.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/administration/provisioning/#dashboards",target:"_blank",rel:"noreferrer"},"documentation")," ","for more information about provisioning."),t.createElement("br",null)," ",t.createElement("br",null),t.createElement("strong",null,"File path: ")," ",We.meta.provisionedExternalId),t.createElement(_.K,{spellCheck:!1,value:He,onChange:_e=>{Ae(_e.currentTarget.value)},className:pe.json}),t.createElement(ie.Lh,null,t.createElement(D.zx,{variant:"secondary",onClick:Je,fill:"outline"},"Cancel"),t.createElement(it.m,{icon:"copy",getText:()=>He},"Copy JSON to clipboard"),t.createElement(D.zx,{type:"submit",onClick:et},"Save JSON to file"))))},pe={json:u.css`
    height: 400px;
    width: 100%;
    overflow: auto;
    resize: none;
    font-family: monospace;
  `},Ie=({dashboard:We,onDismiss:Je,onSaveSuccess:He,isCopy:Ae})=>{const[et,_e]=(0,t.useState)({}),Se=We.meta.provisioned,Fe=We.version===0,Xe=(0,n.Z)(async()=>Fe?void 0:(await m.ae.getDashboardByUid(We.uid)).dashboard,[We,Fe]),Qe=(0,t.useMemo)(()=>{const Oe=We.getSaveModelClone({saveTimerange:Boolean(et.saveTimerange),saveVariables:Boolean(et.saveVariables)});if(!Xe.value)return{clone:Oe,diff:{},diffCount:0,hasChanges:!1};const Le=JSON.stringify(Oe,null,2),Ye=JSON.parse(Le),be=(0,r.Q$)(Xe.value,Ye);let Te=0;for(const me of Object.values(be))Te+=me.length;return{clone:Oe,diff:be,diffCount:Te,hasChanges:Te>0&&!Fe}},[We,Xe.value,et,Fe]),[ct,ht]=(0,t.useState)(!1),{state:ft,onDashboardSave:Re}=Y(We,Ae),nt=He?()=>{Je(),He()}:Je,le=()=>ct?t.createElement(x,{diff:Qe.diff,oldValue:Xe.value,newValue:Qe.clone}):ft.loading?t.createElement("div",null,t.createElement(i.$,null)):Fe||Ae?t.createElement(ne,{dashboard:We,onCancel:Je,onSuccess:nt,onSubmit:Re,isNew:Fe}):Se?t.createElement(rt,{dashboard:We,onCancel:Je,onSuccess:nt}):t.createElement(ve,{dashboard:We,saveModel:Qe,onCancel:Je,onSuccess:nt,onSubmit:Re,options:et,onOptionsChange:_e});if(ft.error&&(0,l.kW)(ft.error)&&!ft.error.isHandled)return t.createElement(Q,{error:ft.error,dashboard:We,dashboardSaveModel:Qe.clone,onDismiss:Je});let Pe="Save dashboard";return Ae?Pe="Save dashboard copy":Se&&(Pe="Provisioned dashboard"),t.createElement(f.d,{title:Pe,onClose:Je,width:"40%",subtitle:We.title,tabs:t.createElement(c.J,null,t.createElement(o.O,{label:"Details",active:!ct,onChangeTab:()=>ht(!1)}),Qe.hasChanges&&t.createElement(o.O,{label:"Changes",active:ct,onChangeTab:()=>ht(!0),counter:Qe.diffCount})),expandable:!0,scrollableContent:!0},le(),s.v.featureToggles.showDashboardValidationWarnings&&t.createElement(h,{dashboard:We}))}},51917:(Z,O,e)=>{"use strict";e.d(O,{ShareModal:()=>dn});var t=e(68404),n=e(41818),l=e(88683),s=e(35029),i=e(94893),f=e(47694),c=e(77582),o=e(35287),m=e(9892),r=e(72648),u=e(67487),d=e(10655);const g=new Set(["__expr__","aquaqanalytics-kdbbackend-datasource","cloudwatch","datasource","dlopes7-appdynamics-datasource","doitintl-bigquery-datasource","elasticsearch","frser-sqlite-datasource","grafadruid-druid-datasource","grafana-athena-datasource","grafana-azure-data-explorer-datasource","grafana-azure-monitor-datasource","grafana-bigquery-datasource","grafana-clickhouse-datasource","grafana-databricks-datasource","grafana-datadog-datasource","grafana-db2-datasource","grafana-dynatrace-datasource","grafana-es-open-distro-datasource","grafana-github-datasource","grafana-gitlab-datasource","grafana-honeycomb-datasource","grafana-iot-sitewise-datasource","grafana-jira-datasource","grafana-mock-datasource","grafana-mongodb-datasource","grafana-newrelic-datasource","grafana-odbc-datasource","grafana-opcua-datasource","grafana-opensearch-datasource","grafana-oracle-datasource","grafana-orbit-datasource","grafana-redshift-datasource","grafana-salesforce-datasource","grafana-saphana-datasource","grafana-sentry-datasource","grafana-servicenow-datasource","grafana-snowflake-datasource","grafana-splunk-datasource","grafana-splunk-monitoring-datasource","grafana-timestream-datasource","grafana-wavefront-datasource","grafana-x-ray-datasource","graphite","hadesarchitect-cassandra-datasource","influxdb","innius-grpc-datasource","kniepdennis-neo4j-datasource","loki","marcusolsson-csv-datasource","marcusolsson-ynab-datasource","mssql","mysql","nagasudhirpulla-api-datasource","opentsdb","postgres","prometheus","redis-datasource","sentinelone-dataset-datasource","tdengine-datasource","vertamedia-clickhouse-datasource","vertica-grafana-datasource","yesoreyeram-infinity-datasource"]);var p=($t=>($t.PUBLIC="public",$t.EMAIL="email",$t))(p||{});const E=$t=>$t.length>0,h=$t=>$t?.uid!==""&&$t?.uid!==void 0,a=$t=>{let qt=new Set;for(const Vt of $t)for(const nn of Vt.targets){let un=nn?.datasource?.type;un&&!g.has(un)&&qt.add(un)}return Array.from(qt).sort()},v=$t=>`${(0,f.iE)().appUrl}public-dashboards/${$t.accessToken}`,x=/^[A-Z\d._%+-]+@[A-Z\d.-]+\.[A-Z]{2,}$/i;var y=e(21048),C=e(9085),P=e.n(C),D=e(59052),M=e(68183),b=e(35645),R=e(66121),B=e(5191),w=e(52081),A=e(24799),I=e(46967),F=e(94599),K=e(8944),W=e(64353),U=e(82002),N=e(81168),S=e(80600),Y=e(84532),Q=e(98101);const z=()=>{const{width:$t}=(0,Q.Z)();return $t>1024};var G=e(45253);const k=M.wl.pages.ShareDashboardModal.PublicDashboard,j=({mode:$t})=>t.createElement(G.b,{severity:"info",title:`You don\u2019t have permission to ${$t} a public dashboard`,"data-testid":k.NoUpsertPermissionsWarningAlert},"Contact your admin to get permission to ",$t," create public dashboards"),de=()=>t.createElement(G.b,{title:"Please save your dashboard changes before updating the public configuration",severity:"warning"}),ge=M.wl.pages.ShareDashboardModal.PublicDashboard,re=({unsupportedDataSources:$t})=>{const qt=(0,r.wW)(ce);return t.createElement(G.b,{severity:"warning",title:"Unsupported data sources","data-testid":ge.UnsupportedDataSourcesWarningAlert},t.createElement("p",{className:qt.unsupportedDataSourceDescription},"There are data sources in this dashboard that are unsupported for public dashboards. Panels that use these data sources may not function properly: ",$t,"."),t.createElement("a",{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",className:P()("text-link",qt.unsupportedDataSourceDescription)},"Read more about supported data sources"))},ce=$t=>({unsupportedDataSourceDescription:m.css`
    color: ${$t.colors.text.secondary};
    margin-bottom: ${$t.spacing(1)};
  `}),ie=M.wl.pages.ShareDashboardModal.PublicDashboard,fe=()=>t.createElement(G.b,{severity:"warning",title:"Template variables are not supported","data-testid":ie.TemplateVariablesWarningAlert},"This public dashboard may not work since it uses template variables");var Ce=e(13393),ee=e(95794),ne=e(74124);const X=M.wl.pages.ShareDashboardModal.PublicDashboard,te=({disabled:$t,onChange:qt,register:Vt})=>{const nn=(0,r.wW)(ae),En=(0,N.useSelector)(wn=>wn.dashboard).getModel(),cn=(0,ne.O)(En.getDefaultTime(),En);return t.createElement(t.Fragment,null,t.createElement(Ce.C,{disabled:$t,className:nn.dashboardConfig},t.createElement(w.wc,{spacing:"md"},t.createElement(w.Ar,{orientation:1,spacing:"xs",justify:"space-between"},t.createElement(W._,{description:"The public dashboard uses the default time range settings of the dashboard"},"Default time range"),t.createElement(ee.K,{value:cn,disabled:!0,onChange:()=>{}})),t.createElement(w.Ar,{orientation:0,spacing:"sm"},t.createElement(K.r,{...Vt("isTimeSelectionEnabled"),"data-testid":X.EnableTimeRangeSwitch,onChange:wn=>{(0,n.ff)("grafana_dashboards_public_time_selection_clicked",{action:wn.currentTarget.checked?"enable":"disable"}),qt("isTimeSelectionEnabled",wn.currentTarget.checked)}}),t.createElement(W._,{description:"Allow viewers to change time range"},"Time range picker enabled")),t.createElement(w.Ar,{orientation:0,spacing:"sm"},t.createElement(K.r,{...Vt("isAnnotationsEnabled"),onChange:wn=>{(0,n.ff)("grafana_dashboards_public_annotations_clicked",{action:wn.currentTarget.checked?"enable":"disable"}),qt("isAnnotationsEnabled",wn.currentTarget.checked)},"data-testid":X.EnableAnnotationsSwitch}),t.createElement(W._,{description:"Show annotations on public dashboard"},"Show annotations")))))},ae=$t=>({dashboardConfig:m.css`
    margin: ${$t.spacing(0,0,3,0)};
  `});var _=e(26202),ve=e(31403),Ve=e(63619),it=e(2594);const rt=[{label:"Anyone with a link",value:p.PUBLIC},{label:"Only specified people",value:p.EMAIL}],pe=M.wl.pages.ShareDashboardModal.PublicDashboard.EmailSharingConfiguration,Ie=({recipients:$t,dashboardUid:qt,publicDashboardUid:Vt})=>{const nn=(0,r.wW)(Je),[un,{isLoading:En}]=(0,d.r5)(),[cn,{isLoading:wn}]=(0,d.RS)(),Gn=En||wn,Nn=qn=>{(0,n.ff)("grafana_dashboards_public_delete_sharing_email_clicked"),un({recipientUid:qn,dashboardUid:qt,uid:Vt})},Wn=qn=>{(0,n.ff)("grafana_dashboards_public_reshare_email_clicked"),cn({recipientUid:qn,uid:Vt})};return t.createElement("table",{className:nn.table,"data-testid":pe.EmailSharingList},t.createElement("tbody",null,$t.map((qn,ga)=>t.createElement("tr",{key:qn.uid},t.createElement("td",null,qn.recipient),t.createElement("td",null,t.createElement(_.h,{className:nn.tableButtonsContainer},t.createElement(ve.zx,{type:"button",variant:"destructive",fill:"text","aria-label":"Revoke",title:"Revoke",size:"sm",disabled:Gn,onClick:()=>Nn(qn.uid),"data-testid":`${pe.DeleteEmail}-${ga}`},"Revoke"),t.createElement(ve.zx,{type:"button",variant:"primary",fill:"text","aria-label":"Resend",title:"Resend",size:"sm",disabled:Gn,onClick:()=>Wn(qn.uid),"data-testid":`${pe.ReshareLink}-${ga}`},"Resend")))))))},We=()=>{const $t=(0,r.wW)(Je),Vt=(0,N.useSelector)(zn=>zn.dashboard).getModel(),{data:nn}=(0,d.Ym)(Vt.uid),[un]=(0,d.Mi)(),[En,{isLoading:cn}]=(0,d.FJ)(),{register:wn,setValue:Gn,control:Nn,watch:Wn,handleSubmit:qn,formState:{errors:ga},reset:ea}=(0,D.cI)({defaultValues:{shareType:nn?.share||p.PUBLIC,email:""},mode:"onSubmit"}),ca=zn=>{const $n={dashboard:Vt,payload:{...nn,share:zn}};un($n)},ba=async zn=>{(0,n.ff)("grafana_dashboards_public_add_share_email_clicked"),await En({recipient:zn.email,uid:nn.uid,dashboardUid:Vt.uid}).unwrap(),ea({email:"",shareType:p.EMAIL})};return t.createElement("form",{"data-testid":pe.Container,className:$t.container,onSubmit:qn(ba)},t.createElement(A.g,{label:"Can view dashboard"},t.createElement(Ve.g,{name:"shareType",control:Nn,render:({field:zn})=>{const{ref:$n,...ta}=zn;return t.createElement(it.S,{...ta,options:rt,onChange:Fa=>{(0,n.ff)("grafana_dashboards_public_share_type_clicked",{type:Fa}),Gn("shareType",Fa),ca(Fa)}})}})),Wn("shareType")===p.EMAIL&&t.createElement(t.Fragment,null,t.createElement(A.g,{label:"Invite",description:"Invite people by email",error:ga.email?.message,invalid:!!ga.email?.message||void 0},t.createElement("div",{className:$t.emailContainer},t.createElement(I.I,{className:$t.emailInput,placeholder:"email",autoCapitalize:"none",...wn("email",{required:"Email is required",pattern:{value:x,message:"Invalid email"}}),"data-testid":pe.EmailSharingInput}),t.createElement(ve.zx,{type:"submit",variant:"primary",disabled:cn,"data-testid":pe.EmailSharingInviteButton},"Invite ",cn&&t.createElement(u.$,null)))),!!nn?.recipients?.length&&t.createElement(Ie,{recipients:nn.recipients,dashboardUid:Vt.uid,publicDashboardUid:nn.uid})))},Je=$t=>({container:m.css`
    margin-bottom: ${$t.spacing(2)};
  `,emailContainer:m.css`
    display: flex;
    gap: ${$t.spacing(1)};
  `,emailInput:m.css`
    flex-grow: 1;
  `,table:m.css`
    display: flex;
    max-height: 220px;
    overflow-y: scroll;
    margin-bottom: ${$t.spacing(1)};

    & tbody {
      display: flex;
      flex-direction: column;
      flex-grow: 1;
    }

    & tr {
      min-height: 40px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: ${$t.spacing(.5,1)};

      :nth-child(odd) {
        background: ${$t.colors.background.secondary};
      }
    }
  `,tableButtonsContainer:m.css`
    display: flex;
    justify-content: end;
  `}),He=M.wl.pages.ShareDashboardModal.PublicDashboard,Ae=()=>{const $t=(0,r.wW)(et),{showModal:qt,hideModal:Vt}=(0,t.useContext)(B.kr),nn=z(),un=U.Vt.hasAccess(N.AccessControlAction.DashboardsPublicWrite,(0,Y.RN)()),En=!!b.v.featureToggles.publicDashboardsEmailSharing&&(0,R.v)("publicDashboardsEmailSharing"),wn=(0,N.useSelector)(Oa=>Oa.dashboard).getModel(),Gn=wn.getVariables(),Nn=a(wn.panels),{data:Wn,isFetching:qn}=(0,d.Ym)(wn.uid),[ga,{isLoading:ea}]=(0,d.Mi)(),ca=!un||ea||qn,{handleSubmit:ba,setValue:zn,register:$n}=(0,D.cI)({defaultValues:{isAnnotationsEnabled:Wn?.annotationsEnabled,isTimeSelectionEnabled:Wn?.timeSelectionEnabled,isPaused:!Wn?.isEnabled}}),ta=async Oa=>{const{isAnnotationsEnabled:Qa,isTimeSelectionEnabled:Qn,isPaused:Aa}=Oa,ia={dashboard:wn,payload:{...Wn,annotationsEnabled:Qa,timeSelectionEnabled:Qn,isEnabled:!Aa}};ga(ia)},Fa=async(Oa,Qa)=>{zn(Oa,Qa),await ba(Qn=>ta(Qn))()},Ma=()=>{qt(dn,{dashboard:wn,onDismiss:Vt,activeTab:"share"})};return t.createElement("div",null,un&&wn.hasUnsavedChanges()&&t.createElement(de,null),!un&&t.createElement(j,{mode:"edit"}),E(Gn)&&t.createElement(fe,null),!!Nn.length&&t.createElement(re,{unsupportedDataSources:Nn.join(", ")}),t.createElement("div",{className:$t.titleContainer},t.createElement(w.Lh,{spacing:"sm",align:"center"},t.createElement("h4",{className:$t.title},"Settings"),(ea||qn)&&t.createElement(u.$,{size:14}))),t.createElement(te,{disabled:ca,onChange:Fa,register:$n}),t.createElement("hr",null),En&&t.createElement(We,null),t.createElement(A.g,{label:"Dashboard URL",className:$t.publicUrl},t.createElement(I.I,{value:v(Wn),readOnly:!0,disabled:!Wn?.isEnabled,"data-testid":He.CopyUrlInput,addonAfter:t.createElement(F.m,{"data-testid":He.CopyUrlButton,variant:"primary",disabled:!Wn?.isEnabled,getText:()=>v(Wn)},"Copy")})),t.createElement(w.Ar,{orientation:nn?0:1,justify:nn?"flex-end":"flex-start",align:nn?"center":"normal"},t.createElement(w.Lh,{spacing:"sm"},t.createElement(K.r,{...$n("isPaused"),disabled:ca,onChange:Oa=>{(0,n.ff)("grafana_dashboards_public_enable_clicked",{action:Oa.currentTarget.checked?"disable":"enable"}),Fa("isPaused",Oa.currentTarget.checked)},"data-testid":He.PauseSwitch}),t.createElement(W._,{className:m.css`
              margin-bottom: 0;
            `},"Pause sharing dashboard")),t.createElement(w.Lh,{justify:"flex-end"},t.createElement(S.H,{className:P()($t.deleteButton,{[$t.deleteButtonMobile]:!nn}),type:"button",disabled:ca,"data-testid":He.DeleteButton,onDismiss:Ma,variant:"destructive",fill:"outline",dashboard:wn,publicDashboard:{uid:Wn.uid,dashboardUid:wn.uid,title:wn.title}},"Revoke public URL"))))},et=$t=>({titleContainer:m.css`
    margin-bottom: ${$t.spacing(2)};
  `,title:m.css`
    margin: 0;
  `,publicUrl:m.css`
    width: 100%;
    padding-top: ${$t.spacing(1)};
    margin-bottom: ${$t.spacing(3)};
  `,deleteButton:m.css`
    margin-left: ${$t.spacing(3)};
  `,deleteButtonMobile:m.css`
    margin-top: ${$t.spacing(2)};
  `}),_e=Ae;var Se=e(94270),Fe=e(58255);const Xe=M.wl.pages.ShareDashboardModal.PublicDashboard,Qe=[{type:"publicAcknowledgment",description:"Your entire dashboard will be public*",testId:Xe.WillBePublicCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/dashboards/dashboard-public/",tooltip:"Learn more about public dashboards"}},{type:"dataSourcesAcknowledgment",description:"Publishing currently only works with a subset of data sources*",testId:Xe.LimitedDSCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/datasources/",tooltip:"Learn more about public datasources"}},{type:"usageAcknowledgment",description:"Making a dashboard public will cause queries to run each time is viewed, which may increase costs*",testId:Xe.CostIncreaseCheckbox,info:{href:"https://grafana.com/docs/grafana/latest/enterprise/query-caching/",tooltip:"Learn more about query caching"}}],ct=({disabled:$t,register:qt})=>{const Vt=(0,r.wW)(ht);return t.createElement(t.Fragment,null,t.createElement("p",{className:Vt.title},"Before you make the dashboard public, acknowledge the following:"),t.createElement(Ce.C,{disabled:$t},t.createElement(w.wc,{spacing:"md"},Qe.map(nn=>t.createElement(w.Lh,{key:nn.type,spacing:"none",align:"center"},t.createElement(Fe.X,{...qt(nn.type,{required:!0}),label:nn.description,"data-testid":nn.testId}),t.createElement(ve.Qj,{variant:"primary",href:nn.info.href,target:"_blank",fill:"text",icon:"info-circle",rel:"noopener noreferrer",tooltip:nn.info.tooltip}))))))},ht=$t=>({title:m.css`
    font-weight: ${$t.typography.fontWeightBold};
  `}),ft=()=>{const $t=(0,r.wW)(Re);return t.createElement("div",{className:$t.container},t.createElement("p",{className:$t.description},"Currently, we don\u2019t support template variables or frontend data sources"),t.createElement("p",{className:$t.description},"We'd love your feedback. To share, please comment on this"," ",t.createElement("a",{href:"https://github.com/grafana/grafana/discussions/49253",target:"_blank",rel:"noreferrer",className:P()("text-link",$t.description)},"GitHub discussion"),"."))},Re=$t=>({container:m.css`
    margin-bottom: ${$t.spacing(3)};
  `,description:m.css`
    color: ${$t.colors.text.secondary};
    margin-bottom: ${$t.spacing(1)};
  `}),nt=M.wl.pages.ShareDashboardModal.PublicDashboard,le=({isError:$t})=>{const qt=(0,r.wW)(Pe),Vt=U.Vt.hasAccess(N.AccessControlAction.DashboardsPublicWrite,(0,Y.RN)()),un=(0,N.useSelector)(Wn=>Wn.dashboard).getModel(),En=a(un.panels),[cn,{isLoading:wn}]=(0,d.zZ)(),Gn=!Vt||wn||$t,Nn=async()=>{(0,n.ff)("grafana_dashboards_public_create_clicked"),cn({dashboard:un,payload:{isEnabled:!0}})};return t.createElement("div",null,t.createElement("p",{className:qt.title},"Welcome to public dashboards alpha!"),t.createElement(ft,null),!Vt&&t.createElement(j,{mode:"create"}),E(un.getVariables())&&t.createElement(fe,null),!!En.length&&t.createElement(re,{unsupportedDataSources:En.join(", ")}),t.createElement(Se.l,{onSubmit:Nn,validateOn:"onChange",maxWidth:"none"},({register:Wn,formState:{isValid:qn}})=>t.createElement(t.Fragment,null,t.createElement("div",{className:qt.checkboxes},t.createElement(ct,{disabled:Gn,register:Wn})),t.createElement("div",{className:qt.buttonContainer},t.createElement(ve.zx,{type:"submit",disabled:Gn||!qn,"data-testid":nt.CreateButton},"Generate public URL ",wn&&t.createElement(u.$,{className:qt.loadingSpinner}))))))},Pe=$t=>({title:m.css`
    font-size: ${$t.typography.h4.fontSize};
    margin: ${$t.spacing(0,0,2)};
  `,checkboxes:m.css`
    margin: ${$t.spacing(0,0,4)};
  `,buttonContainer:m.css`
    display: flex;
    justify-content: end;
  `,loadingSpinner:m.css`
    margin-left: ${$t.spacing(1)};
  `}),Oe=le,Le=()=>{const $t=(0,r.wW)(be);return t.createElement(y.L,{className:$t.loadingContainer},t.createElement(t.Fragment,null,"Loading configuration",t.createElement(u.$,{size:20,className:$t.spinner})))},Ye=$t=>{const{data:qt,isLoading:Vt,isError:nn}=(0,d.Ym)($t.dashboard.uid);return(0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_public_share_viewed")},[]),t.createElement(t.Fragment,null,Vt?t.createElement(Le,null):h(qt)?t.createElement(_e,null):t.createElement(Oe,{isError:nn}))},be=$t=>({loadingContainer:m.css`
    height: 280px;
    align-items: center;
    justify-content: center;
    gap: ${$t.spacing(1)};
  `,spinner:m.css`
    margin-bottom: ${$t.spacing(0)};
  `});var Te=e(6297),me=e(97379);const he=({selectedTheme:$t="current",onChange:qt})=>{const Vt=[{label:(0,o.t)("share-modal.theme-picker.current","Current"),value:"current"},{label:(0,o.t)("share-modal.theme-picker.dark","Dark"),value:"dark"},{label:(0,o.t)("share-modal.theme-picker.light","Light"),value:"light"}];return t.createElement(A.g,{label:(0,o.t)("share-modal.theme-picker.field-name","Theme")},t.createElement(it.S,{options:Vt,value:$t,onChange:qt}))};var De=e(89346);class $e extends t.PureComponent{constructor(qt){super(qt),this.buildIframeHtml=()=>{const{panel:Vt,dashboard:nn}=this.props,{useCurrentTimeRange:un,selectedTheme:En}=this.state,cn=(0,De.S_)(un,nn.uid,En,Vt);this.setState({iframeHtml:cn})},this.onIframeHtmlChange=Vt=>{this.setState({iframeHtml:Vt.currentTarget.value})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange},this.buildIframeHtml)},this.onThemeChange=Vt=>{this.setState({selectedTheme:Vt},this.buildIframeHtml)},this.getIframeHtml=()=>this.state.iframeHtml,this.state={useCurrentTimeRange:!0,selectedTheme:"current",iframeHtml:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_embed_share_viewed"),this.buildIframeHtml()}render(){const{useCurrentTimeRange:qt,selectedTheme:Vt,iframeHtml:nn}=this.state,En=(this.props.dashboard?this.props.dashboard.time.to==="now":!1)?(0,o.t)("share-modal.embed.time-range-description","Transforms the current relative time range to an absolute time range"):"";return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.embed.info"},"Generate HTML for embedding an iframe with this panel.")),t.createElement(A.g,{label:(0,o.t)("share-modal.embed.time-range","Current time range"),description:En},t.createElement(K.r,{id:"share-current-time-range",value:qt,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(he,{selectedTheme:Vt,onChange:this.onThemeChange}),t.createElement(A.g,{label:(0,o.t)("share-modal.embed.html","Embed HTML"),description:(0,o.t)("share-modal.embed.html-description","The HTML code below can be pasted and included in another web page. Unless anonymous access is enabled, the user viewing that page need to be signed into Grafana for the graph to load.")},t.createElement(me.K,{"data-testid":"share-embed-html",id:"share-panel-embed-embed-html-textarea",rows:5,value:nn,onChange:this.onIframeHtmlChange})),t.createElement(s.u.ButtonRow,null,t.createElement(F.m,{icon:"copy",variant:"primary",getText:this.getIframeHtml},t.createElement(o.cC,{i18nKey:"share-modal.embed.copy"},"Copy to clipboard"))))}}var ke=e(3574),tt=e(29930),Ge=e(134),dt=e(45984),pt=e(89050),Ke=e(9405);function je({json:$t,onDismiss:qt}){const Vt=(0,t.useCallback)(()=>$t,[$t]);return t.createElement(s.u,{title:"JSON",onDismiss:qt,onClickBackdrop:qt,isOpen:!0},t.createElement(pt.Z,{disableHeight:!0},({width:nn})=>t.createElement(Ke.p,{value:$t,language:"json",showMiniMap:!1,height:"500px",width:nn})),t.createElement(s.u.ButtonRow,null,t.createElement(F.m,{icon:"copy",getText:Vt},t.createElement(o.cC,{i18nKey:"share-modal.view-json.copy-button"},"Copy to Clipboard"))))}class ot extends t.PureComponent{constructor(qt){super(qt),this.onShareExternallyChange=()=>{this.setState({shareExternally:!this.state.shareExternally})},this.onTrimDefaultsChange=()=>{this.setState({trimDefaults:!this.state.trimDefaults})},this.onSaveAsFile=()=>{const{dashboard:Vt}=this.props,{shareExternally:nn}=this.state,{trimDefaults:un}=this.state;nn?this.exporter.makeExportable(Vt).then(En=>{un?(0,tt.i)().post("/api/dashboards/trim",{dashboard:En}).then(cn=>{this.openSaveAsDialog(cn.dashboard)}):this.openSaveAsDialog(En)}):un?(0,tt.i)().post("/api/dashboards/trim",{dashboard:Vt.getSaveModelClone()}).then(En=>{this.openSaveAsDialog(En.dashboard)}):this.openSaveAsDialog(Vt.getSaveModelClone())},this.onViewJson=()=>{const{dashboard:Vt}=this.props,{shareExternally:nn}=this.state,{trimDefaults:un}=this.state;nn?this.exporter.makeExportable(Vt).then(En=>{un?(0,tt.i)().post("/api/dashboards/trim",{dashboard:En}).then(cn=>{this.openJsonModal(cn.dashboard)}):this.openJsonModal(En)}):un?(0,tt.i)().post("/api/dashboards/trim",{dashboard:Vt.getSaveModelClone()}).then(En=>{this.openJsonModal(En.dashboard)}):this.openJsonModal(Vt.getSaveModelClone())},this.openSaveAsDialog=Vt=>{const nn=JSON.stringify(Vt,null,2),un=new Blob([nn],{type:"application/json;charset=utf-8"}),En=new Date().getTime();(0,ke.saveAs)(un,`${Vt.title}-${En}.json`)},this.openJsonModal=Vt=>{c.h$.publish(new dt.Dn({props:{json:JSON.stringify(Vt,null,2)},component:je})),this.props.onDismiss?.()},this.state={shareExternally:!1,trimDefaults:!1},this.exporter=new Ge.E}componentDidMount(){(0,n.ff)("grafana_dashboards_export_share_viewed")}render(){const{onDismiss:qt}=this.props,{shareExternally:Vt}=this.state,{trimDefaults:nn}=this.state,un=(0,o.t)("share-modal.export.share-externally-label","Export for sharing externally"),En=(0,o.t)("share-modal.export.share-default-label","Export with default values removed");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.export.info-text"},"Export this dashboard.")),t.createElement(A.g,{label:un},t.createElement(K.r,{id:"share-externally-toggle",value:Vt,onChange:this.onShareExternallyChange})),b.v.featureToggles.trimDefaults&&t.createElement(A.g,{label:En},t.createElement(K.r,{id:"trim-defaults-toggle",value:nn,onChange:this.onTrimDefaultsChange})),t.createElement(s.u.ButtonRow,null,t.createElement(ve.zx,{variant:"secondary",onClick:qt,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.export.cancel-button"},"Cancel")),t.createElement(ve.zx,{variant:"secondary",onClick:this.onViewJson},t.createElement(o.cC,{i18nKey:"share-modal.export.view-button"},"View JSON")),t.createElement(ve.zx,{variant:"primary",onClick:this.onSaveAsFile},t.createElement(o.cC,{i18nKey:"share-modal.export.save-button"},"Save to file"))))}}var at=e(76647);const xt=({panel:$t,initialFolderUid:qt,onDismiss:Vt})=>((0,t.useEffect)(()=>{(0,n.ff)("grafana_dashboards_library_panel_share_viewed")},[]),$t?t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.library.info"},"Create library panel.")),t.createElement(at.T,{panel:$t,initialFolderUid:qt,onDismiss:Vt})):null);var Dt=e(39904);class wt extends t.PureComponent{constructor(qt){super(qt),this.buildUrl=async()=>{const{panel:Vt,dashboard:nn}=this.props,{useCurrentTimeRange:un,useShortUrl:En,selectedTheme:cn}=this.state,wn=await(0,De.bl)(un,cn,Vt,En),Gn=(0,De.Sc)(un,nn.uid,cn,Vt);this.setState({shareUrl:wn,imageUrl:Gn})},this.onUseCurrentTimeRangeChange=()=>{this.setState({useCurrentTimeRange:!this.state.useCurrentTimeRange})},this.onUrlShorten=()=>{this.setState({useShortUrl:!this.state.useShortUrl})},this.onThemeChange=Vt=>{this.setState({selectedTheme:Vt})},this.getShareUrl=()=>this.state.shareUrl,this.state={useCurrentTimeRange:!0,useShortUrl:!1,selectedTheme:"current",shareUrl:"",imageUrl:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_link_share_viewed"),this.buildUrl()}componentDidUpdate(qt,Vt){const{useCurrentTimeRange:nn,useShortUrl:un,selectedTheme:En}=this.state;(Vt.useCurrentTimeRange!==nn||Vt.selectedTheme!==En||Vt.useShortUrl!==un)&&this.buildUrl()}render(){const{panel:qt,dashboard:Vt}=this.props,nn=Vt?Vt.time.to==="now":!1,{useCurrentTimeRange:un,useShortUrl:En,selectedTheme:cn,shareUrl:wn,imageUrl:Gn}=this.state,Nn=M.wl.pages.SharePanelModal,Wn=Boolean(Vt.id),qn=(0,o.t)("share-modal.link.time-range-label","Lock time range"),ga=(0,o.t)("share-modal.link.time-range-description","Transforms the current relative time range to an absolute time range"),ea=(0,o.t)("share-modal.link.shorten-url","Shorten URL"),ca=(0,o.t)("share-modal.link.link-url","Link URL");return t.createElement(t.Fragment,null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.link.info-text"},"Create a direct link to this dashboard or panel, customized with the options below.")),t.createElement(Ce.C,null,t.createElement(A.g,{label:qn,description:nn?ga:""},t.createElement(K.r,{id:"share-current-time-range",value:un,onChange:this.onUseCurrentTimeRangeChange})),t.createElement(he,{selectedTheme:cn,onChange:this.onThemeChange}),t.createElement(A.g,{label:ea},t.createElement(K.r,{id:"share-shorten-url",value:En,onChange:this.onUrlShorten})),t.createElement(A.g,{label:ca},t.createElement(I.I,{id:"link-url-input",value:wn,readOnly:!0,addonAfter:t.createElement(F.m,{icon:"copy",variant:"primary",getText:this.getShareUrl},t.createElement(o.cC,{i18nKey:"share-modal.link.copy-link-button"},"Copy"))}))),qt&&f.ZP.rendererAvailable&&t.createElement(t.Fragment,null,Wn&&t.createElement("div",{className:"gf-form"},t.createElement("a",{href:Gn,target:"_blank",rel:"noreferrer","aria-label":Nn.linkToRenderedImage},t.createElement(Dt.J,{name:"camera"}),"\xA0",t.createElement(o.cC,{i18nKey:"share-modal.link.rendered-image"},"Direct link rendered image"))),!Wn&&t.createElement(G.b,{severity:"info",title:(0,o.t)("share-modal.link.save-alert","Dashboard is not saved"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.save-dashboard"},"To render a panel image, you must save the dashboard first."))),qt&&!f.ZP.rendererAvailable&&t.createElement(G.b,{severity:"info",title:(0,o.t)("share-modal.link.render-alert","Image renderer plugin not installed"),bottomSpacing:0},t.createElement(o.cC,{i18nKey:"share-modal.link.render-instructions"},"To render a panel image, you must install the\xA0",t.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},"Grafana image renderer plugin"),". Please contact your Grafana administrator to install the plugin.")))}}var sn=e(54899),mn=e(53217),Dn=e(19349),Rn=e(10672);const St="/api/snapshots";class At extends t.PureComponent{constructor(qt){super(qt),this.createSnapshot=Vt=>()=>{const{timeoutSeconds:nn}=this.state;this.dashboard.snapshot={timestamp:new Date},this.setState({isLoading:!0}),this.dashboard.startRefresh(),setTimeout(()=>{this.saveSnapshot(this.dashboard,Vt)},nn*1e3)},this.saveSnapshot=async(Vt,nn)=>{const{snapshotExpires:un}=this.state,En=this.dashboard.getSaveModelClone();this.scrubDashboard(En);const cn={dashboard:En,name:En.title,expires:un,external:nn};try{const wn=await(0,sn.i)().post(St,cn);this.setState({deleteUrl:wn.deleteUrl,snapshotUrl:wn.url,step:2})}finally{(0,n.ff)("grafana_dashboards_snapshot_created",{location:nn?"raintank":"local"}),this.setState({isLoading:!1})}},this.scrubDashboard=Vt=>{const{panel:nn}=this.props,{snapshotName:un}=this.state;Vt.title=un,Vt.time=(0,Dn.$t)().timeRange(),Vt.links=[],Vt.panels.forEach(cn=>{cn.targets=[],cn.links=[],cn.datasource=null});const En=Vt.annotations.list.filter(cn=>cn.enable);if(Vt.annotations.list=En.map(cn=>({name:cn.name,enable:cn.enable,iconColor:cn.iconColor,snapshotData:cn.snapshotData,type:cn.type,builtIn:cn.builtIn,hide:cn.hide})),Vt.getVariables().forEach(cn=>{cn.query="",cn.options=cn.current?[cn.current]:[],cn.refresh=Rn.Bd.never}),nn){const cn=nn.getSaveModel();cn.gridPos.w=24,cn.gridPos.x=0,cn.gridPos.y=0,cn.gridPos.h=20,Vt.panels=[cn]}delete this.dashboard.snapshot,this.dashboard.forEachPanel(cn=>{delete cn.snapshotData}),this.dashboard.annotations.list.forEach(cn=>{delete cn.snapshotData})},this.deleteSnapshot=async()=>{const{deleteUrl:Vt}=this.state;await(0,sn.i)().get(Vt),this.setState({step:3})},this.getSnapshotUrl=()=>this.state.snapshotUrl,this.onSnapshotNameChange=Vt=>{this.setState({snapshotName:Vt.target.value})},this.onTimeoutChange=Vt=>{this.setState({timeoutSeconds:Number(Vt.target.value)})},this.onExpireChange=Vt=>{this.setState({selectedExpireOption:Vt,snapshotExpires:Vt.value})},this.dashboard=qt.dashboard,this.expireOptions=[{label:(0,o.t)("share-modal.snapshot.expire-never","Never"),value:0},{label:(0,o.t)("share-modal.snapshot.expire-hour","1 Hour"),value:60*60},{label:(0,o.t)("share-modal.snapshot.expire-day","1 Day"),value:60*60*24},{label:(0,o.t)("share-modal.snapshot.expire-week","7 Days"),value:60*60*24*7}],this.state={isLoading:!1,step:1,selectedExpireOption:this.expireOptions[0],snapshotExpires:this.expireOptions[0].value,snapshotName:qt.dashboard.title,timeoutSeconds:4,snapshotUrl:"",deleteUrl:"",externalEnabled:!1,sharingButtonText:""}}componentDidMount(){(0,n.ff)("grafana_dashboards_snapshot_share_viewed"),this.getSnaphotShareOptions()}async getSnaphotShareOptions(){const qt=await(0,sn.i)().get("/api/snapshot/shared-options");this.setState({sharingButtonText:qt.externalSnapshotName,externalEnabled:qt.externalEnabled})}renderStep1(){const{onDismiss:qt}=this.props,{snapshotName:Vt,selectedExpireOption:nn,timeoutSeconds:un,isLoading:En,sharingButtonText:cn,externalEnabled:wn}=this.state,Gn=(0,o.t)("share-modal.snapshot.name","Snapshot name"),Nn=(0,o.t)("share-modal.snapshot.expire","Expire"),Wn=(0,o.t)("share-modal.snapshot.timeout","Timeout (seconds)"),qn=(0,o.t)("share-modal.snapshot.timeout-description","You might need to configure the timeout value if it takes a long time to collect your dashboard metrics.");return t.createElement(t.Fragment,null,t.createElement("div",null,t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-1"},"A snapshot is an instant way to share an interactive dashboard publicly. When created, we strip sensitive data like queries (metric, template, and annotation) and panel links, leaving only the visible metric data and series names embedded in your dashboard.")),t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.info-text-2"},"Keep in mind, your snapshot ",t.createElement("em",null,"can be viewed by anyone")," that has the link and can access the URL. Share wisely."))),t.createElement(A.g,{label:Gn},t.createElement(I.I,{id:"snapshot-name-input",width:30,value:Vt,onChange:this.onSnapshotNameChange})),t.createElement(A.g,{label:Nn},t.createElement(mn.Ph,{inputId:"expire-select-input",width:30,options:this.expireOptions,value:nn,onChange:this.onExpireChange})),t.createElement(A.g,{label:Wn,description:qn},t.createElement(I.I,{id:"timeout-input",type:"number",width:21,value:un,onChange:this.onTimeoutChange})),t.createElement(s.u.ButtonRow,null,t.createElement(ve.zx,{variant:"secondary",onClick:qt,fill:"outline"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.cancel-button"},"Cancel")),wn&&t.createElement(ve.zx,{variant:"secondary",disabled:En,onClick:this.createSnapshot(!0)},cn),t.createElement(ve.zx,{variant:"primary",disabled:En,onClick:this.createSnapshot()},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.local-button"},"Local Snapshot"))))}renderStep2(){const{snapshotUrl:qt}=this.state;return t.createElement(t.Fragment,null,t.createElement(A.g,{label:(0,o.t)("share-modal.snapshot.url-label","Snapshot URL")},t.createElement(I.I,{id:"snapshot-url-input",value:qt,readOnly:!0,addonAfter:t.createElement(F.m,{icon:"copy",variant:"primary",getText:this.getSnapshotUrl},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.copy-link-button"},"Copy"))})),t.createElement("div",{className:"pull-right",style:{padding:"5px"}},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.mistake-message"},"Did you make a mistake? "),"\xA0",t.createElement(ve.Qj,{fill:"text",target:"_blank",onClick:this.deleteSnapshot},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.delete-button"},"Delete snapshot."))))}renderStep3(){return t.createElement("div",{className:"share-modal-header"},t.createElement("p",{className:"share-modal-info-text"},t.createElement(o.cC,{i18nKey:"share-modal.snapshot.deleted-message"},"The snapshot has been deleted. If you have already accessed it once, then it might take up to an hour before before it is removed from browser caches or CDN caches.")))}render(){const{isLoading:qt,step:Vt}=this.state;return t.createElement(t.Fragment,null,Vt===1&&this.renderStep1(),Vt===2&&this.renderStep2(),Vt===3&&this.renderStep3(),qt&&t.createElement(u.$,{inline:!0}))}}const Wt=[],Qt=[];function jt($t){Wt.push($t)}function Xt($t){Qt.push($t)}function tn($t,qt){const nn=[{label:(0,o.t)("share-modal.tab-title.link","Link"),value:"link",component:wt}];if(c.Vt.isSignedIn&&f.vc.snapshotEnabled){const En=(0,o.t)("share-modal.tab-title.snapshot","Snapshot");nn.push({label:En,value:"snapshot",component:At})}if($t){const En=(0,o.t)("share-modal.tab-title.embed","Embed");if(nn.push({label:En,value:"embed",component:$e}),!(0,Te.V)($t)){const cn=(0,o.t)("share-modal.tab-title.library-panel","Library panel");nn.push({label:cn,value:"library_panel",component:xt})}nn.push(...Qt)}else{const En=(0,o.t)("share-modal.tab-title.export","Export");nn.push({label:En,value:"export",component:ot}),nn.push(...Wt)}Boolean(f.vc.featureToggles.publicDashboards)&&nn.push({label:"Public dashboard",value:"share",component:Ye});const un=nn.find(En=>En.value===qt);return{tabs:nn,activeTab:un?.value??nn[0].value}}function on($t){const{tabs:qt,activeTab:Vt}=tn($t.panel,$t.activeTab);return{tabs:qt,activeTab:Vt}}class dn extends t.Component{constructor(qt){super(qt),this.onSelectTab=Vt=>{this.setState(nn=>({...nn,activeTab:Vt.value}))},this.state=on(qt)}componentDidMount(){(0,n.ff)("grafana_dashboards_share_modal_viewed")}getActiveTab(){const{tabs:qt,activeTab:Vt}=this.state;return qt.find(nn=>nn.value===Vt)}renderTitle(){const{panel:qt}=this.props,{activeTab:Vt}=this.state,nn=qt?(0,o.t)("share-modal.panel.title","Share Panel"):(0,o.t)("share-modal.dashboard.title","Share"),un=tn(this.props.panel,this.state.activeTab).tabs;return t.createElement(l.H,{title:nn,icon:"share-alt",tabs:un,activeTab:Vt,onChangeTab:this.onSelectTab})}render(){const{dashboard:qt,panel:Vt}=this.props,un=this.getActiveTab().component;return t.createElement(s.u,{isOpen:!0,title:this.renderTitle(),onDismiss:this.props.onDismiss},t.createElement(i.I,null,t.createElement(un,{dashboard:qt,panel:Vt,onDismiss:this.props.onDismiss})))}}},89346:(Z,O,e)=>{"use strict";e.d(O,{OS:()=>o,S_:()=>d,Sc:()=>u,bl:()=>m});var t=e(27677),n=e(83383),l=e(46519),s=e(35645),i=e(57465),f=e(19349);function c({useCurrentTimeRange:p,selectedTheme:E,panel:h,search:a=window.location.search,range:v=(0,f.$t)().timeRange(),orgId:x=s.v.bootData.user.orgId}){const y=new URLSearchParams(a);return y.set("from",String(v.from.valueOf())),y.set("to",String(v.to.valueOf())),y.set("orgId",String(x)),p||(y.delete("from"),y.delete("to")),E!=="current"&&y.set("theme",E),h&&!y.has("editPanel")&&y.set("viewPanel",String(h.id)),y}function o(){let p=window.location.href;const E=p.indexOf("?");return E!==-1&&(p=p.substring(0,E)),p}async function m(p,E,h,a){const v=o(),x=c({useCurrentTimeRange:p,selectedTheme:E,panel:h}),y=t.Cj.appendQueryToUrl(v,x.toString());return a?await(0,i.D)(y):y}function r(p,E,h,a){const v=o(),x=c({useCurrentTimeRange:p,selectedTheme:h,panel:a});let y=v.replace(s.v.appSubUrl+"/dashboard/",s.v.appSubUrl+"/dashboard-solo/");y=y.replace(s.v.appSubUrl+"/d/",s.v.appSubUrl+"/d-solo/"),n.u.stripBaseFromUrl(v)==="/"&&(y=`${s.v.appUrl}d-solo/${E}`);const P=x.get("editPanel")??x.get("viewPanel")??"";return x.set("panelId",P),x.delete("editPanel"),x.delete("viewPanel"),t.Cj.appendQueryToUrl(y,x.toString())}function u(p,E,h,a){let x=r(p,E,h,a).replace(s.v.appSubUrl+"/dashboard-solo/",s.v.appSubUrl+"/render/dashboard-solo/");return x=x.replace(s.v.appSubUrl+"/d-solo/",s.v.appSubUrl+"/render/d-solo/"),x+="&width=1000&height=500"+g(),x}function d(p,E,h,a){return'<iframe src="'+r(p,E,h,a)+'" width="450" height="200" frameborder="0"></iframe>'}function g(){const p="&tz=UTC"+encodeURIComponent((0,l.CQ)().format("Z"));if(!window.Intl)return p;const E=window.Intl.DateTimeFormat();if(!E.resolvedOptions)return p;const h=E.resolvedOptions();return h.timeZone?"&tz="+encodeURIComponent(h.timeZone):p}},64687:(Z,O,e)=>{"use strict";e.d(O,{B:()=>d});var t=e(9892),n=e(82897),l=e(68404),s=e(72648),i=e(39904);const f=({diff:p})=>{const E=(0,s.wW)(c),h=!(0,n.isUndefined)(p.originalValue)&&!(0,n.isArray)(p.originalValue)&&!(0,n.isObject)(p.originalValue),a=!(0,n.isUndefined)(p.value)&&!(0,n.isArray)(p.value)&&!(0,n.isObject)(p.value);return l.createElement(l.Fragment,null,h&&l.createElement("span",{className:E},String(p.originalValue)),h&&a?l.createElement(i.J,{name:"arrow-right"}):null,a&&l.createElement("span",{className:E},String(p.value)))},c=p=>t.css`
  background-color: ${p.colors.action.hover};
  border-radius: ${p.shape.borderRadius()};
  color: ${p.colors.text.primary};
  font-size: ${p.typography.body.fontSize};
  margin: 0 ${p.spacing(.5)};
  padding: ${p.spacing(.5,1)};
`;var o=e(15092);const m={op:"replace",originalValue:void 0,path:[""],value:void 0,startLineNumber:0},r=({diff:p,title:E})=>{const h=(0,s.wW)(u);return p?l.createElement(l.Fragment,null,l.createElement(i.J,{type:"mono",name:"circle",className:h[p.op]})," ",l.createElement("span",{className:h.embolden},E)," ",l.createElement("span",null,(0,o.dW)(p,p.path.length>1))," ",l.createElement(f,{diff:p})):l.createElement("div",{className:h.withoutDiff},l.createElement(i.J,{type:"mono",name:"circle",className:h.replace})," ",l.createElement("span",{className:h.embolden},E)," ",l.createElement("span",null,(0,o.dW)(m,!1)))},u=p=>({embolden:t.css`
    font-weight: ${p.typography.fontWeightBold};
  `,add:t.css`
    color: ${p.colors.success.main};
  `,replace:t.css`
    color: ${p.colors.success.main};
  `,move:t.css`
    color: ${p.colors.success.main};
  `,copy:t.css`
    color: ${p.colors.success.main};
  `,_get:t.css`
    color: ${p.colors.success.main};
  `,test:t.css`
    color: ${p.colors.success.main};
  `,remove:t.css`
    color: ${p.colors.success.main};
  `,withoutDiff:t.css`
    margin-bottom: ${p.spacing(2)};
  `}),d=({diffs:p,title:E})=>{const h=(0,s.wW)(g);return p.length===1?l.createElement("div",{className:h.container,"data-testid":"diffGroup"},l.createElement(r,{title:E,diff:p[0]})):l.createElement("div",{className:h.container,"data-testid":"diffGroup"},l.createElement(r,{title:E}),l.createElement("ul",{className:h.list},p.map((a,v)=>l.createElement("li",{className:h.listItem,key:`${(0,n.last)(a.path)}__${v}`},l.createElement("span",null,(0,o.dW)(a))," ",l.createElement(f,{diff:a})))))},g=p=>({container:t.css`
    background-color: ${p.colors.background.secondary};
    font-size: ${p.typography.h6.fontSize};
    margin-bottom: ${p.spacing(2)};
    padding: ${p.spacing(2)};
  `,list:t.css`
    margin-left: ${p.spacing(4)};
  `,listItem:t.css`
    margin-bottom: ${p.spacing(1)};
  `})},61017:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>c});var t=e(9892),n=e(68404),l=e(28072),s=e.n(l),i=e(28550),f=e(72648);const c=({oldValue:o,newValue:m})=>{const r=(0,f.l4)(),u={variables:{dark:{diffViewerBackground:r.colors.background.canvas,diffViewerColor:r.colors.text.primary,addedBackground:(0,i.Z)(r.v1.palette.greenShade).setAlpha(.3).toString(),addedColor:"white",removedBackground:(0,i.Z)(r.v1.palette.redShade).setAlpha(.3).toString(),removedColor:"white",wordAddedBackground:(0,i.Z)(r.v1.palette.greenBase).setAlpha(.4).toString(),wordRemovedBackground:(0,i.Z)(r.v1.palette.redBase).setAlpha(.4).toString(),addedGutterBackground:(0,i.Z)(r.v1.palette.greenShade).setAlpha(.2).toString(),removedGutterBackground:(0,i.Z)(r.v1.palette.redShade).setAlpha(.2).toString(),gutterBackground:r.colors.background.primary,gutterBackgroundDark:r.colors.background.primary,highlightBackground:(0,i.Z)(r.colors.primary.main).setAlpha(.4).toString(),highlightGutterBackground:(0,i.Z)(r.colors.primary.shade).setAlpha(.2).toString(),codeFoldGutterBackground:r.colors.background.secondary,codeFoldBackground:r.colors.background.secondary,emptyLineBackground:r.colors.background.secondary,gutterColor:r.colors.text.disabled,addedGutterColor:r.colors.text.primary,removedGutterColor:r.colors.text.primary,codeFoldContentColor:r.colors.text.disabled,diffViewerTitleBackground:r.colors.background.secondary,diffViewerTitleColor:r.colors.text.disabled,diffViewerTitleBorderColor:r.colors.border.strong}},codeFold:{fontSize:r.typography.bodySmall.fontSize},gutter:`
      pre {
        color: ${(0,i.Z)(r.colors.text.disabled).setAlpha(1).toString()};
        opacity: 0.61;
      }
    `};return n.createElement("div",{className:t.css`
        font-size: ${r.typography.bodySmall.fontSize};
        // prevent global styles interfering with diff viewer
        pre {
          all: revert;
        }
      `},n.createElement(s(),{styles:u,oldValue:o,newValue:m,splitView:!1,compareMethod:l.DiffMethod.CSS,useDarkTheme:r.isDark}))}},99714:(Z,O,e)=>{"use strict";e.d(O,{U$:()=>U,Cs:()=>M,Sd:()=>y,R1:()=>w,K8:()=>s});var t=e(82897),n=e(54899);class l{getHistoryList(Y,Q){const z=Y&&Y.uid?Y.uid:void 0;return z?(0,n.i)().get(`api/dashboards/uid/${z}/versions`,Q):Promise.resolve([])}getDashboardVersion(Y,Q){return(0,n.i)().get(`api/dashboards/uid/${Y}/versions/${Q}`)}restoreDashboard(Y,Q){const z=Y&&Y.uid?Y.uid:void 0,G=`api/dashboards/uid/${z}/restore`;return z&&(0,t.isNumber)(Q)?(0,n.i)().post(G,{version:Q}):Promise.resolve({})}}const s=new l;var i=e(9892),f=e(68404),c=e(58255),o=e(34719),m=e(5191),r=e(31403),u=e(98102),d=e(671),g=e(83383),p=e(37932),E=e(60499),h=e(81168);const a=async(S,Y)=>await s.restoreDashboard(Y,S),v=S=>{const Y=(0,h.useSelector)(k=>k.dashboard.getModel()),[Q,z]=(0,d.Z)(async()=>await a(S,Y),[]),G=(0,E.iG)();return(0,f.useEffect)(()=>{if(Q.value){const k=p.E1.getLocation(),j=g.u.stripBaseFromUrl(Q.value.url),de=k.state?.routeReloadCounter;p.E1.replace({...k,pathname:j,state:{routeReloadCounter:de?de+1:1}}),G.success("Dashboard restored",`Restored from version ${S}`)}},[Q,S,G]),{state:Q,onRestoreDashboard:z}},x=({hideModal:S,version:Y})=>{const{state:Q,onRestoreDashboard:z}=v(Y);return(0,f.useEffect)(()=>{Q.loading===!1&&Q.value&&S()},[Q,S]),f.createElement(u.s,{isOpen:!0,title:"Restore Version",icon:"history",onDismiss:S,onConfirm:z,body:f.createElement("p",null,"Are you sure you want to restore the dashboard to version ",Y,"? All unsaved changes will be lost."),confirmText:`Yes, restore to version ${Y}`})},y=({versions:S,canCompare:Y,onCheck:Q})=>f.createElement("table",{className:"filter-table gf-form-group"},f.createElement("thead",null,f.createElement("tr",null,f.createElement("th",{className:"width-4"}),f.createElement("th",{className:"width-4"},"Version"),f.createElement("th",{className:"width-14"},"Date"),f.createElement("th",{className:"width-10"},"Updated by"),f.createElement("th",null,"Notes"),f.createElement("th",null))),f.createElement("tbody",null,S.map((z,G)=>f.createElement("tr",{key:z.id},f.createElement("td",null,f.createElement(c.X,{"aria-label":`Toggle selection of version ${z.version}`,className:i.css`
                display: inline;
              `,checked:z.checked,onChange:k=>Q(k,z.id),disabled:!z.checked&&Y})),f.createElement("td",null,z.version),f.createElement("td",null,z.createdDateString),f.createElement("td",null,z.createdBy),f.createElement("td",null,z.message),f.createElement("td",{className:"text-right"},G===0?f.createElement(o.V,{name:"Latest",colorIndex:17}):f.createElement(m.JY,null,({showModal:k,hideModal:j})=>f.createElement(r.zx,{variant:"secondary",size:"sm",icon:"history",onClick:()=>{k(x,{version:z.version,hideModal:j})}},"Restore")))))));var C=e(72648),P=e(8180),D=e(39904);const M=({onClick:S=t.noop,baseVersion:Y=0,newVersion:Q=0,isNewLatest:z=!1})=>{const G=(0,C.wW)(b);return f.createElement("h3",{className:G.header},f.createElement(P.h,{name:"arrow-left",size:"xl",onClick:S}),f.createElement("span",null,"Comparing ",Y," ",f.createElement(D.J,{name:"arrows-h"})," ",Q," ",z&&f.createElement("cite",{className:"muted"},"(Latest)")))},b=S=>({header:i.css`
    font-size: ${S.typography.h3.fontSize};
    display: flex;
    gap: ${S.spacing(2)};
    margin-bottom: ${S.spacing(3)};
  `});var R=e(26418),B=e(6554);const w=({hasMore:S,canCompare:Y,getVersions:Q,getDiff:z,isLastPage:G})=>f.createElement(R.Stack,null,S&&f.createElement(r.zx,{type:"button",onClick:()=>Q(!0),variant:"secondary",disabled:G},"Show more versions"),f.createElement(B.u,{content:"Select two versions to start comparing",placement:"bottom"},f.createElement(r.zx,{type:"button",disabled:!Y,onClick:z,icon:"code-branch"},"Compare versions")));var A=e(52081),I=e(20941),F=e(64687),K=e(61017),W=e(15092);const U=({baseInfo:S,newInfo:Y,diffData:Q,isNewLatest:z})=>{const G=(0,W.Q$)(Q.lhs,Q.rhs),k=(0,C.wW)(N);return f.createElement("div",null,f.createElement("div",{className:k.spacer},f.createElement(A.Lh,{justify:"space-between",align:"center"},f.createElement("div",null,f.createElement("p",{className:k.versionInfo},f.createElement("strong",null,"Version ",Y.version)," updated by ",Y.createdBy," ",Y.ageString," -"," ",Y.message),f.createElement("p",{className:(0,i.cx)(k.versionInfo,k.noMarginBottom)},f.createElement("strong",null,"Version ",S.version)," updated by ",S.createdBy," ",S.ageString," -"," ",S.message)),z&&f.createElement(m.JY,null,({showModal:j,hideModal:de})=>f.createElement(r.zx,{variant:"destructive",icon:"history",onClick:()=>{j(x,{version:S.version,hideModal:de})}},"Restore to version ",S.version)))),f.createElement("div",{className:k.spacer},Object.entries(G).map(([j,de])=>f.createElement(F.B,{diffs:de,key:j,title:j}))),f.createElement(I.s,{isOpen:!1,label:"View JSON Diff"},f.createElement(K.Z,{oldValue:JSON.stringify(Q.lhs,null,2),newValue:JSON.stringify(Q.rhs,null,2)})))},N=S=>({spacer:i.css`
    margin-bottom: ${S.spacing(4)};
  `,versionInfo:i.css`
    color: ${S.colors.text.secondary};
    font-size: ${S.typography.bodySmall.fontSize};
  `,noMarginBottom:i.css`
    margin-bottom: 0;
  `})},15092:(Z,O,e)=>{"use strict";e.d(O,{Q$:()=>i,dW:()=>f});var t=e(92497),n=e(56070),l=e(82897),s=e.n(l);const i=(m,r)=>{const u=(0,t.qu)(m,r),d=n.stringify(m,null,2),g=n.stringify(r,null,2),p=a=>a.map(v=>{let x,y,C=0;const P=(0,l.tail)(v.path.split("/"));return v.op==="replace"&&(x=(0,l.get)(m,P),y=v.value,C=g.pointers[v.path].value.line),v.op==="add"&&(y=v.value,C=g.pointers[v.path].value.line),v.op==="remove"&&(x=(0,l.get)(m,P),C=d.pointers[v.path].value.line),{op:v.op,value:y,path:P,originalValue:x,startLineNumber:C}}),E=a=>(0,l.sortBy)(a,"startLineNumber"),h=a=>a.reduce((v,x)=>{const y=x.path[0];return v[y]||(v[y]=[]),v[y].push(x),v},{});return(0,l.flow)([p,E,h])(u)},f=(m,r=!0)=>{const u=(0,l.last)(m.path),d=c(u),g=m.op==="remove"?m.originalValue:m.value;let p=o(m.op);return r&&(d?p+=` item ${u}`:(0,l.isArray)(g)&&!(0,l.isEmpty)(g)?p+=` ${g.length} ${u}`:p+=` ${u}`),p},c=m=>!(0,l.isNaN)((0,l.toNumber)(m)),o=m=>m==="add"?"added":m==="remove"?"deleted":"changed"},79860:(Z,O,e)=>{"use strict";e.d(O,{u:()=>c});var t=e(9892),n=e(68404),l=e(68183),s=e(72648),i=e(40419),f=e(39904);const c=r=>{const[u,d]=(0,n.useState)(null),g=r.type==="submenu",p=r.type==="divider",E=(0,s.wW)(m),h=r.iconClassName?(0,i.toIconName)(r.iconClassName):void 0;return p?n.createElement("li",{className:"divider"}):n.createElement("li",{className:g?`dropdown-submenu ${o(u)}`:void 0,ref:d,"data-testid":l.wl.components.Panels.Panel.menuItems(r.text)},n.createElement("a",{onClick:r.onClick,href:r.href,role:"menuitem"},h&&n.createElement(f.J,{name:h,className:E.menuIconClassName}),n.createElement("span",{className:"dropdown-item-text","aria-label":l.wl.components.Panels.Panel.headerItems(r.text)},r.text,g&&n.createElement(f.J,{name:"angle-right",className:E.shortcutIconClassName})),r.shortcut&&n.createElement("span",{className:"dropdown-menu-item-shortcut"},n.createElement(f.J,{name:"keyboard",className:E.menuIconClassName})," ",r.shortcut)),r.children)};function o(r){if(!r)return"invisible";const u=r.parentElement.getBoundingClientRect(),d=r.getBoundingClientRect();return d.width===0?"invisible":u.right+d.width+10>window.innerWidth?"pull-left":"pull-right"}function m(r){return{menuIconClassName:(0,t.css)({marginRight:r.spacing(1),"a::after":{display:"none"}}),shortcutIconClassName:(0,t.css)({position:"absolute",top:"7px",right:r.spacing(.5),color:r.colors.text.secondary})}}},87449:(Z,O,e)=>{"use strict";e.d(O,{Bg:()=>a,pD:()=>v});var t=e(24259),n=e.n(t),l=e(82897),s=e.n(l),i=e(36365),f=e.n(i),c=e(25318),o=e(21053),m=e(54899),r=e(37932),u=e(29930),d=e(13019),g=e(24816),p=e(91162),E=e(77582),h=e(9398);class a{constructor(){}_dashboardLoadFailed(C,P){return P=P||!1,{meta:{canStar:!1,isSnapshot:P,canDelete:!1,canSave:!1,canEdit:!1,dashboardNotFound:!0},dashboard:{title:C}}}loadDashboard(C,P,D){let M;return C==="script"?M=this._loadScriptedDashboard(P):C==="snapshot"?M=u.ae.get("/api/snapshots/"+P).catch(()=>this._dashboardLoadFailed("Snapshot not found",!0)):C==="ds"?M=this._loadFromDatasource(P):C==="public"?M=u.ae.getPublicDashboardByUid(D).then(b=>b).catch(b=>{const R=b.data.statusCode===403&&b.data.messageId==="publicdashboards.notEnabled",B=b.data.statusCode===404&&b.data.messageId==="publicdashboards.notFound",w=this._dashboardLoadFailed(R?"Public Dashboard paused":"Public Dashboard Not found",!0);return{...w,meta:{...w.meta,publicDashboardEnabled:B?void 0:!R,dashboardNotFound:B}}}):M=u.ae.getDashboardByUid(D).then(b=>{if(b.meta.isFolder)throw E.h$.emit(c.SI.alertError,["Dashboard not found"]),new Error("Dashboard not found");return b}).catch(()=>this._dashboardLoadFailed("Not found",!0)),M.then(b=>(b.meta.dashboardNotFound!==!0&&d.Z.addDashboardImpression(b.dashboard.uid),b)),M}_loadScriptedDashboard(C){const P="public/dashboards/"+C.replace(/\.(?!js)/,"/")+"?"+new Date().getTime();return(0,m.i)().get(P).then(this._executeScript.bind(this)).then(D=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:D.data}),D=>(console.error("Script dashboard error "+D),E.h$.emit(c.SI.alertError,["Script Error","Please make sure it exists and returns a valid dashboard"]),this._dashboardLoadFailed("Scripted dashboard")))}async _loadFromDatasource(C){const P=await(0,p.ak)().get(C);if(!P)return Promise.reject("can not find datasource: "+C);const D=new URLSearchParams(window.location.search),M=D.get("path");if(!M)return Promise.reject("expecting path parameter");const b={};return D.forEach((R,B)=>{b[B]=R}),(0,m.i)().get(`/api/datasources/uid/${P.uid}/resources/${M}`,b).then(R=>({meta:{fromScript:!0,canDelete:!1,canSave:!1,canStar:!1},dashboard:R}))}_executeScript(C){const P={dashboardSrv:(0,h.h4)(),datasourceSrv:(0,p.ak)()},M=new Function("ARGS","kbn","dateMath","_","moment","window","document","$","jQuery","services",C)(r.E1.getSearchObject(),g.Z,o,s(),f(),window,document,n(),n(),P);return(0,l.isFunction)(M)?new Promise(b=>{M(R=>{b({data:R})})}):{data:M}}}let v=new a;const x=y=>{throw new Error("dashboardLoaderSrv can be only overriden in test environment")}},9398:(Z,O,e)=>{"use strict";e.d(O,{h4:()=>g});var t=e(65583),n=e(25318),l=e(18271),s=e(35287),i=e(29930),f=e(50946),c=e(45984),o=e(82302),m=e(2476);class r{constructor(){this.onRemovePanel=E=>{const h=this.getCurrent();h&&(0,m.WJ)(h,h.getPanelById(E),!0)},l.h.subscribe(c.Eb,E=>this.onRemovePanel(E.payload))}create(E,h){return new o.f(E,h)}setCurrent(E){this.dashboard=E}getCurrent(){return this.dashboard||console.warn("Calling getDashboardSrv().getCurrent() without calling getDashboardSrv().setCurrent() first."),this.dashboard}saveJSONDashboard(E){const h=JSON.parse(E);return(0,f.uC)({dashboard:h,folderUid:this.dashboard?.meta.folderUid||h.folderUid})}saveDashboard(E,h){return(0,t.n)((0,i.i)().fetch({url:"/api/dashboards/db/",method:"POST",data:{...E,dashboard:E.dashboard.getSaveModelClone()},...h}))}starDashboard(E,h){const a=(0,i.i)(),v={showSuccessAlert:!1,url:"/api/user/stars/dashboard/uid/"+E,method:h?"DELETE":"POST"};return a.request(v).then(()=>{const x=!h;this.dashboard?.uid===E&&(this.dashboard.meta.isStarred=x);const y=x?(0,s.t)("notifications.starred-dashboard","Dashboard starred"):(0,s.t)("notifications.unstarred-dashboard","Dashboard unstarred");return l.h.emit(n.SI.alertSuccess,[y]),x})}}let u;function d(p){u=p}function g(){return u||(u=new r),u}},17424:(Z,O,e)=>{"use strict";e.d(O,{Qi:()=>d,lh:()=>p});var t=e(59980),n=e(49372),l=e(53704),s=e(59724),i=e(7238),f=e(16911),c=e(54899),o=e(32689),m=e(7832),r=e(63496),u=e(45849);const d="-- Public --",g="1min";class p extends i.MF{constructor(h){let a={};p.isMixedDatasource(h)&&(a.mixed=!0),super({name:"public-ds",id:0,type:"public-ds",meta:a,uid:p.resolveUid(h),jsonData:{},access:"proxy",readOnly:!0}),this.interval=p.resolveInterval(h),this.annotations={prepareQuery(v){return{...v,queryType:m.hR.Annotations,refId:"anno"}}}}static resolveUid(h){return typeof h=="string"?h:h?.uid??d}static isMixedDatasource(h){return typeof h=="string"||h==null?!1:h?.uid===r.D}static resolveInterval(h){return typeof h=="string"||h==null?g:("interval"in h?h.interval:void 0)??g}query(h){const{intervalMs:a,maxDataPoints:v,requestId:x,publicDashboardAccessToken:y,panelId:C,queryCachingTTL:P,range:{from:D,to:M}}=h;let b;if(!h.targets.length)return(0,t.of)({data:[]});const R=h.targets[0];if(R.queryType===m.hR.Annotations)return R?.datasource?.uid===u.JY?(0,n.D)(this.getAnnotations(h)):(0,t.of)({data:[]});{const B={intervalMs:a,maxDataPoints:v,queryCachingTTL:P,timeRange:{from:D.valueOf().toString(),to:M.valueOf().toString()}};return(0,c.i)().fetch({url:`/api/public/dashboards/${y}/panels/${C}/query`,method:"POST",data:B,requestId:x}).pipe((0,l.w)(w=>(0,t.of)((0,o.z1)(w,b))),(0,s.K)(w=>(0,t.of)((0,o.z1)(w))))}}async getAnnotations(h){const{publicDashboardAccessToken:a,range:{to:v,from:x}}=h,y={from:x.valueOf(),to:v.valueOf()},C=a?await(0,c.i)().get(`/api/public/dashboards/${a}/annotations`,y):[];return{data:[(0,f.g0)(C)]}}testDatasource(){return Promise.resolve(null)}}},19349:(Z,O,e)=>{"use strict";e.d(O,{$t:()=>v});var t=e(82897),n=e(46519),l=e(69311),s=e(33180),i=e(21053),f=e(37932),c=e(18271),o=e(47694),m=e(82002),r=e(5242),u=e(74124),d=e(45984),g=e(5562);function p({urlRefresh:x,currentRefresh:y,isAllowedIntervalFn:C,minRefreshInterval:P,refreshIntervals:D=g.o5}){if(!x)return y;const M=C(x),b=D.find(R=>R===x);if(!M||!b){const R=P?D.find(w=>w===P):void 0,B=D?.length?D[0]:void 0;return R??B??y}return x||y}class E{constructor(y){this.contextSrv=y,this.autoRefreshPaused=!1,this.timeRangeForUrl=()=>{const C=this.timeRange().raw;return(0,n.v9)(C.from)&&(C.from=C.from.valueOf().toString()),(0,n.v9)(C.to)&&(C.to=C.to.valueOf().toString()),C},this.time=(0,l.JK)().raw,this.refreshTimeModel=this.refreshTimeModel.bind(this),c.Z.subscribe(d.p8,C=>{this.zoomOut(C.payload.scale,C.payload.updateUrl)}),c.Z.subscribe(d.Qt,C=>{this.shiftTime(C.payload.direction,C.payload.updateUrl)}),c.Z.subscribe(d.QI,()=>{this.makeAbsoluteTime()}),document.addEventListener("visibilitychange",()=>{this.autoRefreshBlocked&&document.visibilityState==="visible"&&(this.autoRefreshBlocked=!1,this.refreshTimeModel())})}init(y){this.timeModel=y,this.time=y.time,this.refresh=y.refresh,this.initTimeFromUrl(),this.parseTime(),this.timeAtLoad=(0,t.cloneDeep)(this.time);const C=s.convertRawToRange(this.time,this.timeModel?.getTimezone(),this.timeModel?.fiscalYearStartMonth);C.to.isBefore(C.from)&&this.setTime({from:C.raw.to,to:C.raw.from},!1),this.refresh&&this.setAutoRefresh(this.refresh)}getValidIntervals(y){return this.contextSrv.minRefreshInterval?y.filter(C=>C!=="").filter(this.contextSrv.isAllowedInterval):y}parseTime(){(0,t.isString)(this.time.from)&&this.time.from.indexOf("Z")>=0&&(this.time.from=(0,n.CQ)(this.time.from).utc()),(0,t.isString)(this.time.to)&&this.time.to.indexOf("Z")>=0&&(this.time.to=(0,n.CQ)(this.time.to).utc())}parseUrlParam(y){if(y.indexOf("now")!==-1)return y;if(y.length===8){const C=(0,n.zh)(y,"YYYYMMDD");if(C.isValid())return C}else if(y.length===15){const C=(0,n.zh)(y,"YYYYMMDDTHHmmss");if(C.isValid())return C}if(!isNaN(y)){const C=parseInt(y,10);return(0,n.zh)(C)}return null}getTimeWindow(y,C){const P=parseInt(y,10);let D;return C.match(/^\d+$/)&&parseInt(C,10)?D=parseInt(C,10):D=s.intervalToMs(C),{from:(0,n.zh)(P-D/2),to:(0,n.zh)(P+D/2)}}initTimeFromUrl(){if(o.vc.isPublicDashboardView&&this.timeModel?.timepicker?.hidden)return;const y=f.E1.getSearch();y.get("time")&&y.get("time.window")&&(this.time=this.getTimeWindow(y.get("time"),y.get("time.window"))),y.get("from")&&(this.time.from=this.parseUrlParam(y.get("from"))||this.time.from),y.get("to")&&(this.time.to=this.parseUrlParam(y.get("to"))||this.time.to),y.get("to")&&y.get("to").indexOf("now")===-1&&(this.refresh=!1,this.timeModel&&(this.timeModel.refresh=!1)),this.refresh=p({urlRefresh:y.get("refresh"),currentRefresh:this.refresh,refreshIntervals:Array.isArray(this.timeModel?.timepicker?.refresh_intervals)?this.timeModel?.timepicker?.refresh_intervals:void 0,isAllowedIntervalFn:this.contextSrv.isAllowedInterval,minRefreshInterval:o.vc.minRefreshInterval})}updateTimeRangeFromUrl(){const y=f.E1.getSearch();if(y.get("left"))return;const C=this.timeRangeForUrl(),P=y.get("from"),D=y.get("to");P&&D?(P!==C.from||D!==C.to)&&(this.initTimeFromUrl(),this.setTime(this.time,!1)):this.timeHasChangedSinceLoad()&&this.setTime(this.timeAtLoad,!0)}timeHasChangedSinceLoad(){return this.timeAtLoad&&(this.timeAtLoad.from!==this.time.from||this.timeAtLoad.to!==this.time.to)}setAutoRefresh(y){this.timeModel&&(this.timeModel.refresh=y),this.stopAutoRefresh();const C=f.E1.getSearchObject();if(!y){C.refresh&&f.E1.partial({refresh:null},!0);return}const P=this.contextSrv.getValidInterval(y),D=s.intervalToMs(P);this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(D),!this.autoRefreshPaused&&this.refreshTimeModel()},D);const M=this.contextSrv.getValidInterval(y);C.refresh!==M&&f.E1.partial({refresh:M},!0)}refreshTimeModel(){this.timeModel?.timeRangeUpdated(this.timeRange())}startNextRefreshTimer(y){this.refreshTimer=setTimeout(()=>{this.startNextRefreshTimer(y),this.contextSrv.isGrafanaVisible()?!this.autoRefreshPaused&&this.refreshTimeModel():this.autoRefreshBlocked=!0},y)}stopAutoRefresh(){clearTimeout(this.refreshTimer)}pauseAutoRefresh(){this.autoRefreshPaused=!0}resumeAutoRefresh(){this.autoRefreshPaused=!1,this.refreshTimeModel()}setTime(y,C=!0){if((0,t.extend)(this.time,y),(0,n.v9)(y.to)?(this.oldRefresh=this.timeModel?.refresh||this.oldRefresh,this.setAutoRefresh(!1)):this.oldRefresh&&this.oldRefresh!==this.timeModel?.refresh&&(this.setAutoRefresh(this.oldRefresh),this.oldRefresh=null),C===!0){const P=this.timeRangeForUrl(),D=f.E1.getSearchObject();if(D.from===P.from.toString()&&D.to===P.to.toString())return;D.from=P.from.toString(),D.to=P.to.toString(),f.E1.partial(D)}this.refreshTimeModel()}timeRange(){return(0,u.O)(this.time,this.timeModel)}zoomOut(y,C=!0){const P=this.timeRange(),{from:D,to:M}=(0,r.h)(P,y);this.setTime({from:(0,n.zh)(D),to:(0,n.zh)(M)},C)}shiftTime(y,C=!0){const P=this.timeRange(),{from:D,to:M}=(0,r.e)(y,P);this.setTime({from:(0,n.zh)(D),to:(0,n.zh)(M)},C)}makeAbsoluteTime(){if(f.E1.getSearch().get("left"))return;const{from:C,to:P}=this.timeRange();this.setTime({from:C,to:P},!0)}isRefreshOutsideThreshold(y,C=.05){const P=this.timeRange();if(i.isMathString(P.raw.from)){const D=P.to.diff(P.from),M=Date.now()-y,b=D*C;return M>=b}return!1}}let h;function a(x){h=x}function v(){return h||(h=new E(m.Vt)),h}},7592:(Z,O,e)=>{"use strict";e.d(O,{o:()=>W,p:()=>z});var t=e(82897),n=e(35363),l=e(5916),s=e(27677),i=e(89029),f=e(26031),c=e(58230),o=e(85854),m=e(14582),r=e(1052),u=e(10158),d=e(86647),g=e(40538),p=e(48010),E=e(52974),h=e(47694),a=e(84952);function v(ie){return Array.from(new Array(ie+1),(fe,Ce)=>Ce).filter(fe=>ie%fe===0)}var x=e(24816),y=e(91162),C=e(15546),P=e(96188),D=e(63496),M=e(7149),b=e(98967),R=e(99822),B=e(2868);function w(ie,fe){const Ce=[];if(ie?.statistics&&ie?.statistics.length){ie.statistic=ie.statistics[0];for(const ee of ie.statistics.splice(1))Ce.push({...ie,statistic:ee})}for(const ee of Ce)ee.refId=(0,R.Hs)(fe),delete ee.statistics,fe.push(ee);return delete ie.statistics,Ce}function A(ie){const fe=[];if(ie&&"statistics"in ie&&ie?.statistics?.length){for(const Ce of ie.statistics.splice(1)){const{statistics:ee,name:ne,...X}=ie;fe.push({...X,statistic:Ce,name:`${ne} - ${Ce}`})}ie.statistic=ie.statistics[0],fe.length!==0&&(ie.name=`${ie.name} - ${ie.statistic}`),delete ie.statistics}return fe}function I(ie){ie.hasOwnProperty("metricQueryType")||(ie.metricQueryType=B.$5.Search),ie.hasOwnProperty("metricEditorMode")||(ie.metricQueryType===B.$5.Query?ie.metricEditorMode=B.MQ.Code:ie.metricEditorMode=ie.expression?B.MQ.Code:B.MQ.Builder)}var F=e(10672),K=e(96161);n.S.setInit(E.u),n.N.setInit(E.l);class W{constructor(fe){this.dashboard=fe,(0,d.F)()||(0,d.w)(new y.ND)}updateSchema(fe){let Ce,ee,ne,X;const te=this.dashboard.schemaVersion,ae=[];if(this.dashboard.schemaVersion=38,te!==this.dashboard.schemaVersion){if(te<2&&(fe.services&&fe.services.filter&&(this.dashboard.time=fe.services.filter.time,this.dashboard.templating.list=fe.services.filter.list||[]),ae.push(_=>(_.type==="graphite"&&(_.type="graph"),_.type!=="graph"||((0,t.isBoolean)(_.legend)&&(_.legend={show:_.legend}),_.grid&&(_.grid.min&&(_.grid.leftMin=_.grid.min,delete _.grid.min),_.grid.max&&(_.grid.leftMax=_.grid.max,delete _.grid.max)),_.y_format&&(_.y_formats||(_.y_formats=[]),_.y_formats[0]=_.y_format,delete _.y_format),_.y2_format&&(_.y_formats||(_.y_formats=[]),_.y_formats[1]=_.y2_format,delete _.y2_format)),_))),te<3){let _=this.dashboard.getNextPanelId();ae.push(ve=>(ve.id||(ve.id=_,_+=1),ve))}if(te<4&&ae.push(_=>(_.type!=="graph"||((0,t.each)(_.aliasYAxis,(ve,Ve)=>{_.seriesOverrides=[{alias:Ve,yaxis:ve}]}),delete _.aliasYAxis),_)),te<6){const _=(0,t.find)(fe.pulldowns,{type:"annotations"});for(_&&(this.dashboard.annotations={list:_.annotations||[]}),Ce=0;Ce<this.dashboard.templating.list.length;Ce++){const ve=this.dashboard.templating.list[Ce];ve.datasource===void 0&&(ve.datasource=null),ve.type==="filter"&&(ve.type="query"),ve.type===void 0&&(ve.type="query"),ve.allFormat===void 0&&(ve.allFormat="glob")}}if(te<7&&(fe.nav&&fe.nav.length&&(this.dashboard.timepicker=fe.nav[0]),ae.push(_=>((0,t.each)(_.targets,ve=>{ve.refId||(ve.refId=_.getNextQueryLetter&&_.getNextQueryLetter())}),_))),te<8&&ae.push(_=>((0,t.each)(_.targets,ve=>{ve.fields&&ve.tags&&ve.groupBy&&(ve.rawQuery?(delete ve.fields,delete ve.fill):(ve.select=(0,t.map)(ve.fields,Ve=>{const it=[];return it.push({type:"field",params:[Ve.name]}),it.push({type:Ve.func,params:[]}),Ve.mathExpr&&it.push({type:"math",params:[Ve.mathExpr]}),Ve.asExpr&&it.push({type:"alias",params:[Ve.asExpr]}),it}),delete ve.fields,(0,t.each)(ve.groupBy,Ve=>{Ve.type==="time"&&Ve.interval&&(Ve.params=[Ve.interval],delete Ve.interval),Ve.type==="tag"&&Ve.key&&(Ve.params=[Ve.key],delete Ve.key)}),ve.fill&&(ve.groupBy.push({type:"fill",params:[ve.fill]}),delete ve.fill)))}),_)),te<9&&ae.push(_=>{if(_.type!=="singlestat"&&_.thresholds!=="")return _;if(_.thresholds){const ve=_.thresholds.split(",");ve.length>=3&&(ve.shift(),_.thresholds=ve.join(","))}return _}),te<10&&ae.push(_=>(_.type!=="table"||(0,t.each)(_.styles,ve=>{if(ve.thresholds&&ve.thresholds.length>=3){const Ve=ve.thresholds;Ve.shift(),ve.thresholds=Ve}}),_)),te<12&&(0,t.each)(this.dashboard.getVariables(),_=>{_.refresh&&(_.refresh=1),_.refresh||(_.refresh=0),_.hideVariable?_.hide=2:_.hideLabel&&(_.hide=1)}),te<12&&ae.push(_=>(_.type!=="graph"||!_.grid||_.yaxes||(_.yaxes=[{show:_["y-axis"],min:_.grid.leftMin,max:_.grid.leftMax,logBase:_.grid.leftLogBase,format:_.y_formats[0],label:_.leftYAxisLabel},{show:_["y-axis"],min:_.grid.rightMin,max:_.grid.rightMax,logBase:_.grid.rightLogBase,format:_.y_formats[1],label:_.rightYAxisLabel}],_.xaxis={show:_["x-axis"]},delete _.grid.leftMin,delete _.grid.leftMax,delete _.grid.leftLogBase,delete _.grid.rightMin,delete _.grid.rightMax,delete _.grid.rightLogBase,delete _.y_formats,delete _.leftYAxisLabel,delete _.rightYAxisLabel,delete _["y-axis"],delete _["x-axis"]),_)),te<13&&ae.push(_=>{if(_.type!=="graph"||!_.grid)return _;_.thresholds||(_.thresholds=[]);const ve={},Ve={};return _.grid.threshold1!==null&&(ve.value=_.grid.threshold1,_.grid.thresholdLine?(ve.line=!0,ve.lineColor=_.grid.threshold1Color,ve.colorMode="custom"):(ve.fill=!0,ve.fillColor=_.grid.threshold1Color,ve.colorMode="custom")),_.grid.threshold2!==null&&(Ve.value=_.grid.threshold2,_.grid.thresholdLine?(Ve.line=!0,Ve.lineColor=_.grid.threshold2Color,Ve.colorMode="custom"):(Ve.fill=!0,Ve.fillColor=_.grid.threshold2Color,Ve.colorMode="custom")),(0,t.isNumber)(ve.value)&&((0,t.isNumber)(Ve.value)?ve.value>Ve.value?(ve.op=Ve.op="lt",_.thresholds.push(ve),_.thresholds.push(Ve)):(ve.op=Ve.op="gt",_.thresholds.push(ve),_.thresholds.push(Ve)):(ve.op="gt",_.thresholds.push(ve))),delete _.grid.threshold1,delete _.grid.threshold1Color,delete _.grid.threshold2,delete _.grid.threshold2Color,delete _.grid.thresholdLine,_}),te<14&&(this.dashboard.graphTooltip=fe.sharedCrosshair?1:0),te<16&&this.upgradeToGridLayout(fe),te<17&&ae.push(_=>{if(_.minSpan){const ve=a.cz/_.minSpan,Ve=v(a.cz);_.maxPerRow=Ve[(0,t.findIndex)(Ve,it=>it>ve)-1]}return delete _.minSpan,_}),te<18&&ae.push(_=>(_["options-gauge"]&&(_.options=_["options-gauge"],_.options.valueOptions={unit:_.options.unit,stat:_.options.stat,decimals:_.options.decimals,prefix:_.options.prefix,suffix:_.options.suffix},_.options.thresholds&&_.options.thresholds.reverse(),delete _.options.options,delete _.options.unit,delete _.options.stat,delete _.options.decimals,delete _.options.prefix,delete _.options.suffix,delete _["options-gauge"]),_)),te<19&&ae.push(_=>(_.links&&(0,t.isArray)(_.links)&&(_.links=_.links.map(S)),_)),te<20){const _=ve=>({...ve,url:Y(ve.url)});ae.push(ve=>(ve.options&&ve.options.dataLinks&&(0,t.isArray)(ve.options.dataLinks)&&(ve.options.dataLinks=ve.options.dataLinks.map(_)),ve.options&&ve.options.fieldOptions&&ve.options.fieldOptions.defaults&&(ve.options.fieldOptions.defaults.links&&(0,t.isArray)(ve.options.fieldOptions.defaults.links)&&(ve.options.fieldOptions.defaults.links=ve.options.fieldOptions.defaults.links.map(_)),ve.options.fieldOptions.defaults.title&&(ve.options.fieldOptions.defaults.title=Y(ve.options.fieldOptions.defaults.title))),ve))}if(te<21){const _=ve=>({...ve,url:ve.url.replace(/__series.labels/g,"__field.labels")});ae.push(ve=>(ve.options&&ve.options.dataLinks&&(0,t.isArray)(ve.options.dataLinks)&&(ve.options.dataLinks=ve.options.dataLinks.map(_)),ve.options&&ve.options.fieldOptions&&ve.options.fieldOptions.defaults&&ve.options.fieldOptions.defaults.links&&(0,t.isArray)(ve.options.fieldOptions.defaults.links)&&(ve.options.fieldOptions.defaults.links=ve.options.fieldOptions.defaults.links.map(_)),ve))}if(te<22&&ae.push(_=>(_.type!=="table"||(0,t.each)(_.styles,ve=>{ve.align="auto"}),_)),te<23)for(const _ of this.dashboard.templating.list){if(!(0,C.U4)(_))continue;const{multi:ve,current:Ve}=_;_.current=(0,P.x)(Ve,ve)}if(te<24&&ae.push(_=>{const ve=_.type==="table";if(ve&&!_.styles)return _;const Ve=_.table==="table2";return!ve||Ve||(_.type=ve?"table-old":"table"),_}),te<25,te<26&&ae.push(_=>(_.type==="text2"&&(_.type="text",delete _.options.angular),_)),te<27&&(this.dashboard.templating.list=this.dashboard.templating.list.map(_=>{if(!(0,C.VC)(_))return _;const ve={..._};return ve.current={selected:!0,text:ve.query??"",value:ve.query??""},ve.options=[ve.current],ve.hide===F.bU.dontHide||ve.hide===F.bU.hideLabel?{...ve,type:"textbox"}:ve})),te<28){ae.push(_=>_.type==="singlestat"?Q(_):_);for(const _ of this.dashboard.templating.list)_.tags&&delete _.tags,_.tagsQuery&&delete _.tagsQuery,_.tagValuesQuery&&delete _.tagValuesQuery,_.useTags&&delete _.useTags}if(te<29)for(const _ of this.dashboard.templating.list)_.type==="query"&&(_.refresh!==1&&_.refresh!==2&&(_.refresh=1),_.options?.length&&(_.options=[]));if(te<30&&(ae.push(k),ae.push(re)),te<31&&ae.push(_=>{if(_.transformations){for(const ve of _.transformations)if(ve.id===r.r.id)return G(_,r.r.id,{id:u.R.id,options:{}})}return _}),te<32,te<33&&ae.push(_=>{if(_.datasource=z(_.datasource,{returnDefaultAsNull:!0}),!_.targets)return _;for(const ve of _.targets){const Ve=z(ve.datasource,{returnDefaultAsNull:!0});Ve!=null&&(ve.datasource=Ve)}return _}),te<34&&(ae.push(_=>(this.migrateCloudWatchQueries(_),_)),this.migrateCloudWatchAnnotationQuery()),te<35&&ae.push(ce),te<36){for(const ve of this.dashboard.annotations.list)ve.datasource=z(ve.datasource,{returnDefaultAsNull:!1});const _=(0,d.F)().getInstanceSettings(null);if(_){for(const ve of this.dashboard.templating.list)ve.type==="query"&&ve.datasource===null&&(ve.datasource=(0,l.iU)(_));ae.push(ve=>{if(ve.targets){let Ve=!1;ve.datasource==null&&ve.targets.length>0&&(ve.datasource=(0,l.iU)(_),Ve=!0);for(const it of ve.targets)(it.datasource==null||it.datasource.uid==null)&&(ve.datasource?.uid!==D.D?it.datasource={...ve.datasource}:it.datasource=z(it.datasource,{returnDefaultAsNull:!1})),Ve&&it.datasource?.uid!=="__expr__"&&(ve.datasource=it.datasource)}return ve})}}if(te<37&&ae.push(_=>(_.options?.legend&&(_.options.legend.displayMode==="hidden"||_.options.legend.showLegend===!1)?(_.options.legend.displayMode="list",_.options.legend.showLegend=!1):_.options?.legend&&(_.options.legend={..._.options?.legend,showLegend:!0}),_)),te<38&&ae.push(_=>{if(_.type==="table"&&_.fieldConfig!==void 0){const ve=_.fieldConfig.defaults?.custom?.displayMode;if(ve!==void 0&&(_.fieldConfig.defaults.custom.cellOptions=(0,p.q7)(ve),delete _.fieldConfig.defaults.custom.displayMode),_.fieldConfig?.overrides)for(const Ve of _.fieldConfig.overrides)for(let it=0;it<Ve.properties?.length;it++){let rt=Ve.properties[it].value;Ve.properties[it].id==="custom.displayMode"&&(Ve.properties[it].id="custom.cellOptions",Ve.properties[it].value=(0,p.q7)(rt))}}return _}),ae.length!==0)for(ee=0;ee<this.dashboard.panels.length;ee++)for(ne=0;ne<ae.length;ne++){this.dashboard.panels[ee]=ae[ne].call(this,this.dashboard.panels[ee]);const _=this.dashboard.panels[ee].panels;if(_)for(X=0;X<_.length;X++)_[X]=ae[ne].call(this,_[X])}}}migrateCloudWatchQueries(fe){for(const Ce of fe.targets||[])if(j(Ce)&&(I(Ce),Ce.hasOwnProperty("statistics"))){const ee=w(Ce,[...fe.targets]);for(const ne of ee)fe.targets.push(ne)}}migrateCloudWatchAnnotationQuery(){for(const fe of this.dashboard.annotations.list)if(de(fe)){const Ce=A(fe);for(const ee of Ce)this.dashboard.annotations.list.push(ee)}}upgradeToGridLayout(fe){let Ce=0;const ee=a.cz/12;let X=(0,t.max)((0,t.flattenDeep)((0,t.map)(fe.rows,ae=>(0,t.map)(ae.panels,"id"))))+1;if(!fe.rows)return;const te=(0,t.some)(fe.rows,ae=>ae.collapse||ae.showTitle||ae.repeat);for(const ae of fe.rows){if(ae.repeatIteration)continue;const _=ae.height||a.b0,ve=U(_),Ve={};let it;te&&(Ve.id=X,Ve.type="row",Ve.title=ae.title,Ve.collapsed=ae.collapse,Ve.repeat=ae.repeat,Ve.panels=[],Ve.gridPos={x:0,y:Ce,w:a.cz,h:ve},it=new K.rY(Ve),X++,Ce++);const rt=new N(ve,a.cz,Ce);for(const pe of ae.panels){pe.span=pe.span||a.kh,pe.minSpan&&(pe.minSpan=Math.min(a.cz,a.cz/12*pe.minSpan));const Ie=Math.floor(pe.span)*ee,We=pe.height?U(pe.height):ve,Je=rt.getPanelPosition(We,Ie);Ce=rt.yPos,pe.gridPos={x:Je.x,y:Ce+Je.y,w:Ie,h:We},rt.addPanel(pe.gridPos),delete pe.span,it&&Ve.collapsed?it.panels?.push(pe):this.dashboard.panels.push(new K.rY(pe))}it&&this.dashboard.panels.push(it),it&&Ve.collapsed||(Ce+=ve)}}}function U(ie){return(0,t.isString)(ie)&&(ie=parseInt(ie.replace("px",""),10)),ie<a.AV&&(ie=a.AV),Math.ceil(ie/(a.K3+a.hD))}class N{constructor(fe,Ce=a.cz,ee=0){this.area=new Array(Ce).fill(0),this.yPos=ee,this.height=fe}reset(){this.area.fill(0)}addPanel(fe){for(let Ce=fe.x;Ce<fe.x+fe.w;Ce++)(!this.area[Ce]||fe.y+fe.h-this.yPos>this.area[Ce])&&(this.area[Ce]=fe.y+fe.h-this.yPos);return this.area}getPanelPosition(fe,Ce,ee=!1){let ne,X,te;for(let ae=this.area.length-1;ae>=0&&this.height-this.area[ae]>0;ae--)if(X===void 0)X=ae;else if(ae<this.area.length-1&&this.area[ae]<=this.area[ae+1])ne=ae;else break;if(ne!==void 0&&X!==void 0&&X-ne>=Ce-1){const ae=(0,t.max)(this.area.slice(ne));te={x:ne,y:ae}}else return ee?null:(this.yPos+=this.height,this.reset(),this.getPanelPosition(fe,Ce,!0));return te}}function S(ie){let fe=ie.url;return!fe&&ie.dashboard&&(fe=`dashboard/db/${x.Z.slugifyForUrl(ie.dashboard)}`),!fe&&ie.dashUri&&(fe=`dashboard/${ie.dashUri}`),fe||(fe="/"),ie.keepTime&&(fe=s.Cj.appendQueryToUrl(fe,`$${i.W.keepTime}`)),ie.includeVars&&(fe=s.Cj.appendQueryToUrl(fe,`$${i.W.includeVars}`)),ie.params&&(fe=s.Cj.appendQueryToUrl(fe,ie.params)),{url:fe,title:ie.title,targetBlank:ie.targetBlank}}function Y(ie){const fe=/(__series_name)|(\$__series_name)|(__value_time)|(__field_name)|(\$__field_name)/g;return ie.replace(fe,(Ce,ee,ne,X,te,ae)=>ee?"__series.name":ne?"${__series.name}":X?"__value.time":te?"__field.name":ae?"${__field.name}":Ce)}function Q(ie){if(h.vc.panels["grafana-singlestat-panel"])return ie.type="grafana-singlestat-panel",ie;let fe=!1;return ie.changePlugin||(fe=!0,ie=new K.rY(ie)),ie.plugin={angularPanelCtrl:{}},ie.gauge?.show?(M.plugin.meta=h.vc.panels.gauge,ie.changePlugin(M.plugin)):(b.plugin.meta=h.vc.panels.stat,ie.changePlugin(b.plugin)),fe?ie.getSaveModel():ie}function z(ie,fe){if(fe.returnDefaultAsNull&&(ie==null||ie==="default"))return null;if((0,l.cv)(ie))return ie;const Ce=(0,d.F)().getInstanceSettings(ie);return Ce?(0,l.iU)(Ce):{uid:ie}}function G(ie,fe,Ce){if(ie.transformations){const ee=[];for(const ne of ie.transformations)ee.push(ne),ne.id===fe&&ee.push({...Ce});ie.transformations=ee}return ie}function k(ie){const fe=ie.fieldConfig;if(!fe)return ie;if(fe.defaults&&fe.defaults.mappings&&(fe.defaults.mappings=ge(fe.defaults.mappings,fe.defaults.thresholds)),Array.isArray(fe.overrides))for(const Ce of fe.overrides)for(const ee of Ce.properties)ee.id==="mappings"&&(ee.value=ge(ee.value));return ie}function j(ie){return ie.hasOwnProperty("dimensions")&&ie.hasOwnProperty("namespace")&&ie.hasOwnProperty("region")&&ie.hasOwnProperty("metricName")}function de(ie){return ie.hasOwnProperty("dimensions")&&ie.hasOwnProperty("namespace")&&ie.hasOwnProperty("region")&&ie.hasOwnProperty("prefixMatching")&&ie.hasOwnProperty("statistics")}function ge(ie,fe){if(!ie)return;const Ce={type:f.H.ValueToText,options:{}},ee=[];for(const ne of ie){if(ne.type&&ne.options){ne.type===f.H.ValueToText?Ce.options={...Ce.options,...ne.options}:ee.push(ne);continue}let X;const te=parseFloat(ne.text);if(fe&&!isNaN(te)){const ae=(0,c.m1)(te,fe.steps);ae&&ae.color&&(X=ae.color)}switch(ne.type){case 1:ne.value!=null&&(ne.value==="null"?ee.push({type:f.H.SpecialValue,options:{match:f.e.Null,result:{text:ne.text,color:X}}}):Ce.options[String(ne.value)]={text:ne.text,color:X});break;case 2:ee.push({type:f.H.RangeToText,options:{from:+ne.from,to:+ne.to,result:{text:ne.text,color:X}}});break}}return Object.keys(Ce.options).length>0&&ee.unshift(Ce),ee}function re(ie){return(ie.type==="timeseries"||ie.type==="xychart")&&ie.options.tooltipOptions&&(ie.options={...ie.options,tooltip:ie.options.tooltipOptions},delete ie.options.tooltipOptions),ie}function ce(ie){return ie.type==="timeseries"&&ie.fieldConfig?.defaults.custom?.axisPlacement===g.LB.Hidden&&(ie.fieldConfig={...ie.fieldConfig,overrides:[...ie.fieldConfig.overrides,{matcher:{id:o.mi.byType,options:m.fS.time},properties:[{id:"custom.axisPlacement",value:g.LB.Auto}]}]}),ie}},82302:(Z,O,e)=>{"use strict";e.d(O,{f:()=>K});var t=e(82897),n=e(53376),l=e(85081),s=e(38849),i=e(46519),f=e(35645),c=e(82378),o=e(16514),m=e(84952),r=e(82002);function u(U){return(0,t.isArray)(U)?U.map(u):(0,t.isPlainObject)(U)?Object.keys(U).sort().reduce((N,S)=>{const Y=U[S];return Y!=null&&(N[S]=u(Y)),N},{}):U}var d=e(22323),g=e(85803),p=e(87095),E=e(81168),h=e(45984),a=e(77582),v=e(3153),x=e(10672),y=e(92624),C=e(19349),P=e(86899);const D=new Set(["gridPos","title","description","transparent"]);function M(U,N){const S=[],Y={changed:!1,actions:{add:[],remove:[],replace:[],update:[],noop:[]},panels:S};let Q=0;const z=new Map;for(let G of N){let{id:k}=G;k||(Q||(Q=R([U,N])),k=Q++,G={...G,id:k}),z.set(k,G)}for(const G of U){const k=z.get(G.id);if(!k){Y.changed=!0,Y.actions.remove.push(G.id),G.destroy();continue}if(z.delete(G.id),k===G){S.push(G),Y.actions.noop.push(G.id);continue}if(G.type===k.type){const de=G.getSaveModel();let ge=!0,re=!1;for(const[ce,ie]of Object.entries(k))if(!(0,t.isEqualWith)(ie,de[ce],b))if(Y.changed=!0,ge=!1,D.has(ce))G[ce]=ie,re=!0;else{re=!1;break}if(ge){S.push(G),Y.actions.noop.push(G.id);continue}if(re){S.push(G),Y.actions.update.push(G.id);continue}}G.destroy();const j=new P.r(k);j.key=`${j.id}-update-${Date.now()}`,S.push(j),Y.changed=!0,Y.actions.replace.push(G.id)}for(const G of z.values())S.push(new P.r(G)),Y.changed=!0,Y.actions.add.push(G.id);return Y}function b(U,N){if(U==null&&(N===1/0||N===-1/0||N==null)||N==null&&(U===1/0||U===-1/0||U==null))return!0}function R(U){let N=0;for(const S of U)for(const Y of S)Y.id>N&&(N=Y.id);return N+1}var B=e(7592),w=e(96161);function A(U,N){return U.repeatDirection===m.yM?!1:N.gridPos.x>=U.gridPos.x+U.gridPos.w&&N.gridPos.y===U.gridPos.y}function I(U){for(const N of U)if(delete N.scopedVars,N.panels?.length)for(const S of N.panels)delete S.scopedVars}const F=class{constructor(U,N,S){this.getVariablesFromState=S?.getVariablesFromState??p.gt,this.events=new l.F,this.id=U.id||null,this.uid=U.uid||null,this.revision=U.revision??void 0,this.title=U.title??"No Title",this.description=U.description,this.tags=U.tags??[],this.style=U.style??"dark",this.timezone=U.timezone??"",this.weekStart=U.weekStart??"",this.editable=U.editable!==!1,this.graphTooltip=U.graphTooltip||0,this.time=U.time??{from:"now-6h",to:"now"},this.timepicker=U.timepicker??{},this.liveNow=Boolean(U.liveNow),this.templating=this.ensureListExist(U.templating),this.annotations=this.ensureListExist(U.annotations),this.refresh=U.refresh||"",this.snapshot=U.snapshot,this.schemaVersion=U.schemaVersion??0,this.fiscalYearStartMonth=U.fiscalYearStartMonth??0,this.version=U.version??0,this.links=U.links??[],this.gnetId=U.gnetId||null,this.panels=(0,t.map)(U.panels??[],Y=>new w.rY(Y)),this.ensurePanelsHaveUniqueIds(),this.formatDate=this.formatDate.bind(this),this.resetOriginalVariables(!0),this.resetOriginalTime(),this.initMeta(N),this.updateSchema(U),(S?.autoMigrateOldPanels||!f.v.angularSupportEnabled||f.v.featureToggles.autoMigrateOldPanels)&&this.panels.forEach(Y=>{const Q=w.G7[Y.type];!Y.autoMigrateFrom&&Q&&(Y.autoMigrateFrom=Y.type,Y.type=Q)}),this.addBuiltInAnnotationQuery(),this.sortPanelsByGridPos(),this.panelsAffectedByVariableChange=null,this.appEventsSubscription=new n.w0,this.lastRefresh=Date.now(),this.appEventsSubscription.add(a.h$.subscribe(x.x9,this.variablesChangedHandler.bind(this))),this.appEventsSubscription.add(a.h$.subscribe(x.eq,this.variablesTimeRangeProcessDoneHandler.bind(this))),this.appEventsSubscription.add(a.h$.subscribe(x.Wy,this.variablesChangedInUrlHandler.bind(this)))}addBuiltInAnnotationQuery(){this.annotations.list.some(N=>N.builtIn===1)||this.annotations.list.unshift({datasource:{uid:"-- Grafana --",type:"grafana"},name:"Annotations & Alerts",type:"dashboard",iconColor:o.Jx,enable:!0,hide:!0,builtIn:1})}initMeta(U){U=U||{},U.canShare=U.canShare!==!1,U.canSave=U.canSave!==!1,U.canStar=U.canStar!==!1,U.canEdit=U.canEdit!==!1,U.canDelete=U.canDelete!==!1,U.showSettings=U.canEdit,U.canMakeEditable=U.canSave&&!this.editable,U.hasUnsavedFolderChange=!1,this.editable||(U.canEdit=!1,U.canDelete=!1,U.canSave=!1),this.meta=U}getSaveModelClone(U){const N=(0,t.defaults)(U||{},{saveVariables:!0,saveTimerange:!0});let S={};for(const Y in this)F.nonPersistedProperties[Y]||!this.hasOwnProperty(Y)||(S[Y]=(0,t.cloneDeep)(this[Y]));return this.updateTemplatingSaveModelClone(S,N),N.saveTimerange||(S.time=this.originalTime),S.panels=this.getPanelSaveModels(),S=u(S),S.getVariables=()=>S.templating.list,S}updatePanels(U){const N=M(this.panels,U??[]);return N.changed&&(this.panels=N.panels??[],this.sortPanelsByGridPos(),this.events.publish(new h._B)),N}getPanelSaveModels(){return this.panels.filter(U=>this.isSnapshotTruthy()||!(U.type==="add-panel"||U.repeatPanelId||U.repeatedByRow)).map(U=>{if(U.libraryPanel){const{id:N,title:S,libraryPanel:Y,gridPos:Q}=U;return{id:N,title:S,gridPos:Q,libraryPanel:{uid:Y.uid,name:Y.name}}}return this.panelInEdit&&this.panelInEdit.id===U.id?this.panelInEdit.getSaveModel():U.getSaveModel()}).map(U=>(this.isSnapshotTruthy()||(delete U.scopedVars,U.type==="row"&&U.panels&&U.panels.length>0&&(U.panels=U.panels.filter(N=>!N.repeatPanelId).map(N=>(delete N.scopedVars,N)))),U))}updateTemplatingSaveModelClone(U,N){const S=this.originalTemplating,Y=this.getVariablesFromState(this.uid);if(U.templating={list:Y.map(Q=>d.z.get(Q.type).getSaveModel(Q,N.saveVariables))},!N.saveVariables)for(const Q of U.templating.list){const z=S.find(({name:G,type:k})=>G===Q.name&&k===Q.type);z&&(Q.type==="adhoc"?Q.filters=z.filters:Q.current=z.current)}}timeRangeUpdated(U){this.events.publish(new c.md(U)),(0,v.WI)((0,g.DU)(this.uid,U))}startRefresh(U={refreshAll:!0,panelIds:[]}){if(this.events.publish(new c.U5),this.lastRefresh=Date.now(),this.panelInEdit&&(U.refreshAll||U.panelIds.includes(this.panelInEdit.id))){this.panelInEdit.refresh();return}for(const N of this.panels)!this.otherPanelInFullscreen(N)&&(U.refreshAll||U.panelIds.includes(N.id))&&N.refresh()}render(){this.events.publish(new h._z);for(const U of this.panels)U.render()}panelInitialized(U){const N=U.getQueryRunner().getLastResult();!this.otherPanelInFullscreen(U)&&!N&&U.refresh()}otherPanelInFullscreen(U){return(this.panelInEdit||this.panelInView)&&!(U.isViewing||U.isEditing)}initEditPanel(U){return(0,C.$t)().pauseAutoRefresh(),this.panelInEdit=U.getEditClone(),this.panelInEdit}initViewPanel(U){this.panelInView=U,U.setIsViewing(!0)}exitViewPanel(U){this.panelInView=void 0,U.setIsViewing(!1),this.refreshIfPanelsAffectedByVariableChange()}exitPanelEditor(){this.panelInEdit.destroy(),this.panelInEdit=void 0,(0,C.$t)().resumeAutoRefresh(),this.refreshIfPanelsAffectedByVariableChange()}refreshIfPanelsAffectedByVariableChange(){this.panelsAffectedByVariableChange&&(this.startRefresh({panelIds:this.panelsAffectedByVariableChange,refreshAll:!1}),this.panelsAffectedByVariableChange=null)}ensurePanelsHaveUniqueIds(){const U=new Set;let N=this.getNextPanelId();for(const S of this.panelIterator())(!S.id||U.has(S.id))&&(S.id=N++),U.add(S.id)}ensureListExist(U={}){return U.list??=[],U}getNextPanelId(){let U=0;for(const N of this.panelIterator())N.id>U&&(U=N.id);return U+1}*panelIterator(){for(const U of this.panels){yield U;const N=U.panels??[];for(const S of N)yield S}}forEachPanel(U){for(let N=0;N<this.panels.length;N++)U(this.panels[N],N)}getPanelById(U){return this.panelInEdit&&this.panelInEdit.id===U?this.panelInEdit:this.panels.find(N=>N.id===U)??null}canEditPanel(U){return Boolean(this.meta.canEdit&&U&&!U.repeatPanelId&&U.type!=="row")}canEditPanelById(U){return this.canEditPanel(this.getPanelById(U))}addPanel(U){U.id=this.getNextPanelId(),this.panels.unshift(new w.rY(U)),this.sortPanelsByGridPos(),this.events.publish(new h._B)}updateMeta(U){this.meta={...this.meta,...U},this.events.publish(new h.hS)}makeEditable(){this.editable=!0,this.updateMeta({canMakeEditable:!1,canEdit:!0,canSave:!0})}sortPanelsByGridPos(){this.panels.sort((U,N)=>U.gridPos.y===N.gridPos.y?U.gridPos.x-N.gridPos.x:U.gridPos.y-N.gridPos.y)}clearUnsavedChanges(){for(const U of this.panels)U.configRev=0;this.panelInEdit&&(this.panelInEdit.hasSavedPanelEditChange=this.panelInEdit.configRev>0,this.panelInEdit.configRev=0)}hasUnsavedChanges(){const U=this.panels.find(N=>N.hasChanged);return Boolean(U)}cleanUpRepeats(){if(this.isSnapshotTruthy()||!this.hasVariables())return;I(this.panels);const U=this.panels.filter(N=>(!N.repeat||N.repeatedByRow)&&N.repeatPanelId);(0,t.pull)(this.panels,...U),U.map(N=>N.destroy()),this.sortPanelsByGridPos()}processRepeats(){if(!(this.isSnapshotTruthy()||!this.hasVariables())){this.cleanUpRepeats();for(let U=0;U<this.panels.length;U++){const N=this.panels[U];N.repeat&&this.repeatPanel(N,U)}this.sortPanelsByGridPos(),this.events.publish(new h._B)}}cleanUpRowRepeats(U){const N=U.map(Y=>Y.id),S=U.filter(Y=>!Y.repeat&&Y.repeatPanelId&&N.includes(Y.repeatPanelId));(0,t.pull)(U,...S),(0,t.pull)(this.panels,...S)}processRowRepeats(U){if(this.isSnapshotTruthy()||!this.hasVariables())return;let N=U.panels??[];if(!U.collapsed){const S=this.panels.findIndex(Y=>Y.id===U.id);N=this.getRowPanels(S)}this.cleanUpRowRepeats(N);for(const S of N)if(S.repeat){const Y=this.panels.findIndex(Q=>Q.id===S.id);this.repeatPanel(S,Y)}}getPanelRepeatClone(U,N,S){if(N===0)return U;const Y=U.getSaveModel();Y.id=this.getNextPanelId();const Q=new w.rY(Y);return this.panels.splice(S+N,0,Q),Q.repeatPanelId=U.id,Q.repeat=void 0,this.panelInView?.id===Q.id&&(Q.setIsViewing(!0),this.panelInView=Q),Q}getRowRepeatClone(U,N,S){if(N===0){if(!U.collapsed){const G=this.getRowPanels(S);U.panels=G}return U}const Y=new w.rY(U.getSaveModel());let Q,z;return U.collapsed?(Q=(0,t.cloneDeep)(U.panels)??[],Y.panels=Q,z=S+N):(Q=this.getRowPanels(S),Y.panels=Q.map(G=>G.getSaveModel()),z=S+(Q.length+1)*N),this.panels.splice(z,0,Y),this.updateRepeatedPanelIds(Y),Y}repeatPanel(U,N){const S=this.getPanelRepeatVariable(U);if(!S)return;if(U.type==="row"){this.repeatRow(U,N,S);return}const Y=this.getSelectedVariableOptions(S),Q=U.maxPerRow||4;let z=0,G=U.gridPos.y;for(let j=0;j<Y.length;j++){const de=Y[j];let ge;ge=this.getPanelRepeatClone(U,j,N),ge.scopedVars??={},ge.scopedVars[S.name]=de,U.repeatDirection===m.OA?(j>0&&(G+=ge.gridPos.h),ge.gridPos.y=G):(ge.gridPos.w=Math.max(m.cz/Y.length,m.cz/Q),ge.gridPos.x=z,ge.gridPos.y=G,z+=ge.gridPos.w,z+ge.gridPos.w>m.cz&&(z=0,G+=ge.gridPos.h))}const k=G-U.gridPos.y;if(k>0){const j=N+Y.length;for(const de of this.panels.slice(j))A(U,de)||(de.gridPos.y+=k)}}repeatRow(U,N,S){const Y=this.getSelectedVariableOptions(S);let Q=U.gridPos.y;function z(G,k){G.scopedVars??={},G.scopedVars[S.name]=k}for(let G=0;G<Y.length;G++){const k=Y[G],j=this.getRowRepeatClone(U,G,N);z(j,k);const de=this.getRowHeight(j),ge=j.panels||[];let re;if(U.collapsed){for(const ce of ge)z(ce,k),G>0&&this.updateRepeatedPanelIds(ce,!0);j.gridPos.y+=G,Q+=G,re=N+G+1}else{const ce=N+(ge.length+1)*G+1;ge.forEach((ie,fe)=>{if(z(ie,k),G>0){const Ce=new w.rY(ie);this.updateRepeatedPanelIds(Ce,!0),Ce.gridPos.y+=de*G,this.panels.splice(ce+fe,0,Ce)}}),j.panels=[],j.gridPos.y+=de*G,Q+=de,re=ce+ge.length}if(Y.length>1)for(const ce of this.panels.slice(re))ce.gridPos.y+=Q}}updateRepeatedPanelIds(U,N){return U.repeatPanelId=U.id,U.id=this.getNextPanelId(),N?U.repeatedByRow=!0:U.repeat=void 0,U}getSelectedVariableOptions(U){let N;return(0,y.HY)(U)?N=U.options.slice(1,U.options.length):N=(0,t.filter)(U.options,{selected:!0}),N}getRowHeight(U){if(!U.panels||U.panels.length===0)return 0;const N=U.gridPos.y,S=(0,t.map)(U.panels,"gridPos"),Y=(0,t.maxBy)(S,Q=>Q.y+Q.h);return Y.y+Y.h-N}removePanel(U){this.panels=this.panels.filter(N=>N!==U),this.events.publish(new h._B)}removeRow(U,N){(!N&&U.collapsed||N&&!U.collapsed)&&this.toggleRow(U),this.removePanel(U)}expandRows(){const U=this.panels.filter(N=>N.type==="row"&&N.collapsed);for(const N of U)this.toggleRow(N)}collapseRows(){const U=this.panels.filter(N=>N.type==="row"&&!N.collapsed);for(const N of U)this.toggleRow(N)}isSubMenuVisible(){return this.links.length>0||this.getVariables().some(U=>U.hide!==2)||this.annotations.list.some(U=>!U.hide)}getPanelInfoById(U){const N=this.panels.findIndex(S=>S.id===U);return N>=0?{panel:this.panels[N],index:N}:null}duplicatePanel(U){const N=U.getSaveModel();return N.id=this.getNextPanelId(),delete N.repeat,delete N.repeatIteration,delete N.repeatPanelId,delete N.scopedVars,N.alert&&delete N.thresholds,delete N.alert,U.gridPos.x+U.gridPos.w*2<=m.cz?N.gridPos.x+=U.gridPos.w:N.gridPos.y+=U.gridPos.h,this.addPanel(N),N}formatDate(U,N){return(0,s.dq)(U,{format:N,timeZone:this.getTimezone()})}destroy(){this.appEventsSubscription.unsubscribe(),this.events.removeAllListeners();for(const U of this.panels)U.destroy()}toggleRow(U){const N=(0,t.indexOf)(this.panels,U);if(!U.collapsed){const Q=this.getRowPanels(N);(0,t.pull)(this.panels,...Q),U.panels=Q.map(z=>z.getSaveModel()),U.collapsed=!0,Q.some(z=>z.hasChanged)&&U.configRev++,this.events.publish(new h._B);return}U.collapsed=!1;const S=U.panels??[],Y=S.some(Q=>Q.repeat);if(S.length>0){const z=(S[0].gridPos.y??U.gridPos.y)-(U.gridPos.y+U.gridPos.h);let G=N+1,k=U.gridPos.y;for(const de of S)de.gridPos.y??(de.gridPos.y=U.gridPos.y),de.gridPos.y-=z,this.panels.splice(G,0,new w.rY(de)),G+=1,k=Math.max(k,de.gridPos.y+de.gridPos.h);const j=k-U.gridPos.y-1;for(const de of this.panels.slice(G))de.gridPos.y+=j;U.panels=[],Y&&this.processRowRepeats(U)}this.sortPanelsByGridPos(),this.events.publish(new h._B)}getRowPanels(U){const N=this.panels.slice(U+1),S=N.findIndex(Q=>Q.type==="row");return N.slice(0,S>=0?S:this.panels.length)}on(U,N){console.log("DashboardModel.on is deprecated use events.subscribe"),this.events.on(U,N)}off(U,N){console.log("DashboardModel.off is deprecated"),this.events.off(U,N)}cycleGraphTooltip(){this.graphTooltip=(this.graphTooltip+1)%3}sharedTooltipModeEnabled(){return this.graphTooltip>0}sharedCrosshairModeOnly(){return this.graphTooltip===1}getRelativeTime(U){return(0,s.E8)(U,{timeZone:this.getTimezone()})}isSnapshot(){return this.snapshot!==void 0}getTimezone(){return this.timezone?this.timezone:r.Vt?.user?.timezone}updateSchema(U){new B.o(this).updateSchema(U)}resetOriginalTime(){this.originalTime=(0,t.cloneDeep)(this.time)}hasTimeChanged(){const{time:U,originalTime:N}=this;return!((0,t.isEqual)(U,N)||(0,t.isEqual)((0,i.CQ)(U?.from),(0,i.CQ)(N?.from))&&(0,t.isEqual)((0,i.CQ)(U?.to),(0,i.CQ)(N?.to)))}resetOriginalVariables(U=!1){if(U){this.originalTemplating=this.cloneVariablesFrom(this.templating.list);return}this.originalTemplating=this.cloneVariablesFrom(this.getVariablesFromState(this.uid))}hasVariableValuesChanged(){return this.hasVariablesChanged(this.originalTemplating,this.getVariablesFromState(this.uid))}autoFitPanels(U,N){const S=Math.max(...this.panels.map(j=>j.gridPos.h+j.gridPos.y)),Y=55,Q=20;let z=U-Y-Q;N&&N!==E.KioskMode.TV&&(z+=Y);const G=Math.floor(z/(m.K3+m.hD)),k=S/G;for(const j of this.panels)j.gridPos.y=Math.round(j.gridPos.y/k)||1,j.gridPos.h=Math.round(j.gridPos.h/k)||1}templateVariableValueUpdated(){this.processRepeats(),this.events.emit(E.CoreEvents.nq)}getPanelByUrlId(U){const N=parseInt(U??"0",10),S=this.panels.filter(Y=>Y.collapsed);for(const Y of S)Y.panels?.some(z=>z.id===N)&&this.toggleRow(Y);return this.getPanelById(N)}toggleLegendsForAll(){const U=this.panels.filter(W),N=U.filter(Q=>Q.legend.show).length,S=U.length-N,Y=N>=S;for(const Q of U)Q.legend.show=!Y,Q.render()}getVariables(){return this.getVariablesFromState(this.uid)}canEditAnnotations(U){let N=!0;return r.Vt.accessControlEnabled()&&(U?N=!!this.meta.annotationsPermissions?.dashboard.canEdit:N=!!this.meta.annotationsPermissions?.organization.canEdit),this.canEditDashboard()&&N}canDeleteAnnotations(U){let N=!0;return r.Vt.accessControlEnabled()&&(U?N=!!this.meta.annotationsPermissions?.dashboard.canDelete:N=!!this.meta.annotationsPermissions?.organization.canDelete),N&&this.canEditDashboard()}canAddAnnotations(){return this.annotations.list.find(N=>N.builtIn===1)?.enable===!1||!this.canEditDashboard()?!1:!r.Vt.accessControlEnabled()||Boolean(this.meta.annotationsPermissions?.dashboard.canAdd)}canEditDashboard(){return Boolean(this.meta.canEdit||this.meta.canMakeEditable)}shouldUpdateDashboardPanelFromJSON(U,N){!(0,t.isEqual)(U?.gridPos,N?.gridPos)&&this.events.publish(new h._B)}getDefaultTime(){return this.originalTime}getPanelRepeatVariable(U){return this.getVariablesFromState(this.uid).find(N=>N.name===U.repeat)}isSnapshotTruthy(){return this.snapshot}hasVariables(){return this.getVariablesFromState(this.uid).length>0}hasVariablesChanged(U,N){if(U.length!==N.length)return!1;const S=N.map(Y=>({name:Y.name,type:Y.type,current:(0,t.cloneDeep)(Y.current),filters:(0,t.cloneDeep)(Y.filters)}));return!(0,t.isEqual)(S,U)}cloneVariablesFrom(U){return U.map(N=>({name:N.name,type:N.type,current:(0,t.cloneDeep)(N.current),filters:(0,t.cloneDeep)(N.filters)}))}variablesTimeRangeProcessDoneHandler(U){const N=U.payload.variableIds.length>0;this.variablesChangedHandler(new x.x9({panelIds:[],refreshAll:!0}),N)}variablesChangedHandler(U,N=!0){if(N&&this.processRepeats(),U.payload.refreshAll||(0,C.$t)().isRefreshOutsideThreshold(this.lastRefresh)){this.startRefresh({refreshAll:!0,panelIds:[]});return}(this.panelInEdit||this.panelInView)&&(this.panelsAffectedByVariableChange=U.payload.panelIds.filter(S=>S!==(this.panelInEdit?.id??this.panelInView?.id))),this.startRefresh(U.payload)}variablesChangedInUrlHandler(U){this.templateVariableValueUpdated(),this.startRefresh(U.payload)}};let K=F;K.nonPersistedProperties={events:!0,meta:!0,panels:!0,templating:!0,originalTime:!0,originalTemplating:!0,originalLibraryPanels:!0,panelInEdit:!0,panelInView:!0,getVariablesFromState:!0,formatDate:!0,appEventsSubscription:!0,panelsAffectedByVariableChange:!0,lastRefresh:!0};function W(U){return Boolean(U.legend)}},96161:(Z,O,e)=>{"use strict";e.d(O,{G7:()=>a,Jg:()=>C,rY:()=>x});var t=e(82897),n=e.n(t),l=e(44288),s=e(85081),i=e(40400),f=e(2118),c=e(82378),o=e(20308),m=e(47694),r=e(55935),u=e(99822),d=e(45984),g=e(49003);const p={events:!0,isViewing:!0,isEditing:!0,isInView:!0,hasRefreshed:!0,cachedPluginOptions:!0,plugin:!0,queryRunner:!0,replaceVariables:!0,configRev:!0,hasSavedPanelEditChange:!0,getDisplayTitle:!0,dataSupport:!0,key:!0},E={id:!0,gridPos:!0,type:!0,title:!0,scopedVars:!0,repeat:!0,repeatPanelId:!0,repeatDirection:!0,repeatedByRow:!0,minSpan:!0,collapsed:!0,panels:!0,targets:!0,datasource:!0,timeFrom:!0,timeShift:!0,hideTimeOverride:!0,description:!0,links:!0,fullscreen:!0,isEditing:!0,hasRefreshed:!0,events:!0,cacheTimeout:!0,queryCachingTTL:!0,cachedPluginOptions:!0,transparent:!0,pluginVersion:!0,queryRunner:!0,transformations:!0,fieldConfig:!0,maxDataPoints:!0,interval:!0,replaceVariables:!0,libraryPanel:!0,getDisplayTitle:!0,configRev:!0,key:!0},h={gridPos:{x:0,y:0,h:3,w:6},targets:[{refId:"A"}],cachedPluginOptions:{},transparent:!1,options:{},fieldConfig:{defaults:{},overrides:[]},title:""},a={graph:"timeseries","table-old":"table",singlestat:"stat","grafana-singlestat-panel":"stat","grafana-piechart-panel":"piechart","grafana-worldmap-panel":"geomap"},v={"heatmap-new":"heatmap"};class x{constructor(D){this.datasource=null,this.isViewing=!1,this.isEditing=!1,this.isInView=!1,this.configRev=0,this.cachedPluginOptions={},this.events=new s.F,this.restoreModel(D),this.replaceVariables=this.replaceVariables.bind(this),this.key=(0,l.Z)()}restoreModel(D){for(const b in this)p[b]||!this.hasOwnProperty(b)||D[b]||typeof this[b]!="function"&&typeof this[b]!="symbol"&&delete this[b];for(const b in D)this[b]=D[b];const M=v[this.type];M&&(this.autoMigrateFrom=this.type,this.type=M),(0,t.defaultsDeep)(this,(0,t.cloneDeep)(h)),this.ensureQueryIds()}generateNewKey(){this.key=(0,l.Z)()}ensureQueryIds(){if(this.targets&&(0,t.isArray)(this.targets))for(const D of this.targets)D.refId||(D.refId=(0,u.Hs)(this.targets))}getOptions(){return this.options}get hasChanged(){return this.configRev>0}updateOptions(D){this.options=D,this.configRev++,this.events.publish(new d.Wj),this.render()}updateFieldConfig(D){this.fieldConfig=D,this.configRev++,this.events.publish(new d.Wj),this.resendLastResult(),this.render()}getSaveModel(){const D={};for(const M in this)p[M]||!this.hasOwnProperty(M)||(0,t.isEqual)(this[M],h[M])||(D[M]=(0,t.cloneDeep)(this[M]));return D}setIsViewing(D){this.isViewing=D}updateGridPos(D,M=!0){D.x===this.gridPos.x&&D.y===this.gridPos.y&&D.h===this.gridPos.h&&D.w===this.gridPos.w||(this.gridPos.x=D.x,this.gridPos.y=D.y,this.gridPos.w=D.w,this.gridPos.h=D.h,M&&this.configRev++,this.render())}runAllPanelQueries({dashboardId:D,dashboardUID:M,dashboardTimezone:b,timeData:R,width:B,publicDashboardAccessToken:w}){this.getQueryRunner().run({datasource:this.datasource,queries:this.targets,panelId:this.id,dashboardId:D,dashboardUID:M,publicDashboardAccessToken:w,timezone:b,timeRange:R.timeRange,timeInfo:R.timeInfo,maxDataPoints:this.maxDataPoints||Math.floor(B),minInterval:this.interval,scopedVars:this.scopedVars,cacheTimeout:this.cacheTimeout,queryCachingTTL:this.queryCachingTTL,transformations:this.transformations,app:this.isEditing?i.zj.PanelEditor:this.isViewing?i.zj.PanelViewer:i.zj.Dashboard})}refresh(){this.hasRefreshed=!0,this.events.publish(new c.U5)}render(){this.hasRefreshed?this.events.publish(new d._z):this.refresh()}getOptionsToRemember(){return Object.keys(this).reduce((D,M)=>p[M]||E[M]?D:{...D,[M]:this[M]},{})}restorePanelOptions(D){const M=this.cachedPluginOptions[D];M&&(Object.keys(M.properties).map(b=>{this[b]=M.properties[b]}),this.fieldConfig=(0,f.__)(this.fieldConfig,M.fieldConfig))}applyPluginOptionDefaults(D,M){const b=(0,f.d4)({plugin:D,currentOptions:this.options,currentFieldConfig:this.fieldConfig,isAfterPluginChange:M});this.fieldConfig=b.fieldConfig,this.options=b.options}pluginLoaded(D){this.plugin=D;const M=y(D);if(this.autoMigrateFrom){const b=a[this.autoMigrateFrom]!=null;this.callPanelTypeChangeHandler(D,this.autoMigrateFrom,this.getOptionsToRemember(),b),delete this.autoMigrateFrom}D.onPanelMigration&&M!==this.pluginVersion&&(this.options=D.onPanelMigration(this),this.pluginVersion=M),this.applyPluginOptionDefaults(D,!1),this.resendLastResult()}clearPropertiesBeforePluginChange(){for(const D of(0,t.keys)(this))E[D]||delete this[D];this.options={},this.fieldConfig={defaults:{...this.fieldConfig.defaults,custom:{}},overrides:(0,f.aS)(this.fieldConfig.overrides,f._k)}}callPanelTypeChangeHandler(D,M,b,R){if(D.onPanelTypeChanged){const B=R?{angular:b}:b.options;Object.assign(this.options,D.onPanelTypeChanged(this,M,B,this.fieldConfig))}}changePlugin(D){const M=D.meta.id,b=this.getOptionsToRemember(),R=this.fieldConfig,B=this.type,w=this.isAngularPlugin();this.cachedPluginOptions[B]={properties:b,fieldConfig:R},this.clearPropertiesBeforePluginChange(),this.restorePanelOptions(M),this.callPanelTypeChangeHandler(D,B,b,w),this.type=M,this.plugin=D,this.configRev++,this.applyPluginOptionDefaults(D,!0),D.onPanelMigration&&(this.pluginVersion=y(D))}updateQueries(D){const{dataSource:M}=D;this.datasource={uid:M.uid,type:M.type},this.cacheTimeout=D.cacheTimeout,this.queryCachingTTL=D.queryCachingTTL,this.timeFrom=D.timeRange?.from,this.timeShift=D.timeRange?.shift,this.hideTimeOverride=D.timeRange?.hide,this.interval=D.minInterval,this.maxDataPoints=D.maxDataPoints,this.targets=D.queries,this.configRev++,this.events.publish(new d.pO)}addQuery(D){D=D||{refId:"A"},D.refId=(0,u.Hs)(this.targets),this.targets.push(D),this.configRev++}changeQuery(D,M){D.refId=this.targets[M].refId,this.configRev++,this.targets=this.targets.map((b,R)=>R===M?D:b)}getEditClone(){const D=this.getSaveModel(),M=new x(D);M.isEditing=!0,M.plugin=this.plugin;const b=this.getQueryRunner();return M.getQueryRunner().useLastResultFrom(b),M}getTransformations(){return this.transformations}getFieldOverrideOptions(){if(this.plugin)return{fieldConfig:this.fieldConfig,replaceVariables:this.replaceVariables,fieldConfigRegistry:this.plugin.fieldConfigRegistry,theme:m.ZP.theme2}}getDataSupport(){return this.plugin?.dataSupport??{annotations:!1,alertStates:!1}}getQueryRunner(){return this.queryRunner||(this.queryRunner=new g.o(this)),this.queryRunner}hasTitle(){return this.title&&this.title.length>0}isAngularPlugin(){return(this.plugin&&this.plugin.angularPanelCtrl)!==void 0}destroy(){this.events.removeAllListeners(),this.queryRunner&&this.queryRunner.destroy()}setTransformations(D){this.transformations=D,this.resendLastResult(),this.configRev++,this.events.publish(new d.Xw)}setProperty(D,M){this[D]=M,this.configRev++,D==="repeat"&&(this.repeat&&!this.repeatDirection?this.repeatDirection="h":this.repeat||(delete this.repeatDirection,delete this.maxPerRow))}replaceVariables(D,M,b){const R=this.getQueryRunner().getLastRequest(),B=Object.assign({},this.scopedVars,R?.scopedVars,M);return(0,o.J)().replace(D,B,b)}resendLastResult(){this.plugin&&this.getQueryRunner().resendLastResult()}getDisplayTitle(){return this.replaceVariables(this.title,void 0,"text")}initLibraryPanel(D){for(const[M,b]of Object.entries(D.model)){switch(M){case"id":case"gridPos":case"libraryPanel":continue}this[M]=b}this.libraryPanel=D}unlinkLibraryPanel(){delete this.libraryPanel,this.configRev++,this.render()}}function y(P){return P&&P.meta.info.version?P.meta.info.version:m.ZP.buildInfo.version}function C(P){const D={};return Object.entries(P).filter(([M,b])=>!p[M]&&P.hasOwnProperty(M)&&!(0,t.isEqual)(b,h[M])).forEach(([M,b])=>{D[M]=b}),(0,r.Xh)(D)}},86977:(Z,O,e)=>{"use strict";e.d(O,{$j:()=>h,Qk:()=>p,RF:()=>g,Yq:()=>E,f4:()=>y,fG:()=>a,lw:()=>v,qm:()=>u,tM:()=>x});var t=e(54899),n=e(659),l=e(60499),s=e(30992),i=e(46732),f=e(54294),c=e(85805),o=e(85803),m=e(19349),r=e(58790);function u(C){return async P=>{const D=await(0,t.i)().get(`/api/dashboards/id/${C}/permissions`);P((0,r.O0)(D))}}function d(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function g(C,P,D){return async(M,b)=>{const{dashboard:R}=b(),B=[];for(const w of R.permissions){if(w.inherited)continue;const A=d(w);P===w&&(A.permission=D),B.push(A)}await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:B}),await M(u(C))}}function p(C,P){return async(D,M)=>{const b=M().dashboard,R=[];for(const B of b.permissions)B.inherited||B===P||R.push(d(B));await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:R}),await D(u(C))}}function E(C,P){return async(D,M)=>{const{dashboard:b}=M(),R=[];for(const B of b.permissions)B.inherited||R.push(d(B));R.push({userId:P.userId,teamId:P.teamId,role:P.role,permission:P.permission}),await(0,t.i)().post(`/api/dashboards/id/${C}/permissions`,{items:R}),await D(u(C))}}function h(C,P){return async D=>{await(0,t.i)().post("/api/dashboards/import",C),D((0,n.$l)((0,l.AT)("Dashboard Imported",P))),D((0,c.m3)())}}function a(C){return async P=>{await(0,t.i)().delete(`/api/dashboards/uid/${C}`),P((0,c.m3)())}}const v=()=>(C,P)=>{const M=P().dashboard.getModel();M&&(M.destroy(),C((0,o.wX)(M.uid))),(0,m.$t)().stopAutoRefresh(),C((0,r.sG)()),C((0,i.Vl)()),s.H.leave()},x=C=>P=>{P((0,f.YT)(C)),(0,m.$t)().refreshTimeModel()},y=C=>P=>{P((0,f.zW)(C)),(0,m.$t)().refreshTimeModel()}},86899:(Z,O,e)=>{"use strict";e.d(O,{f:()=>t.f,r:()=>n.rY});var t=e(82302),n=e(96161)},58790:(Z,O,e)=>{"use strict";e.d(O,{Nv:()=>d,O0:()=>o,Rd:()=>E,ZP:()=>a,dS:()=>u,jA:()=>r,sG:()=>g,sf:()=>m,tq:()=>p});var t=e(62992),n=e(30670),l=e(2024),s=e(81168),i=e(82302);const f={initPhase:s.DashboardInitPhase.NotStarted,getModel:()=>null,permissions:[],initError:null,initialDatasource:void 0},c=(0,t.oM)({name:"dashboard",initialState:f,reducers:{loadDashboardPermissions:(v,x)=>{v.permissions=(0,l.A)(x.payload)},dashboardInitFetching:v=>{v.initPhase=s.DashboardInitPhase.Fetching},dashboardInitServices:v=>{v.initPhase=s.DashboardInitPhase.Services},dashboardInitCompleted:(v,x)=>{v.getModel=()=>x.payload,v.initPhase=s.DashboardInitPhase.Completed},dashboardInitFailed:(v,x)=>{v.initPhase=s.DashboardInitPhase.Failed,v.initError=x.payload,v.getModel=()=>new i.f({...n.Ql,title:"Dashboard init failed"},{canSave:!1,canEdit:!1})},cleanUpDashboard:v=>{v.initPhase=s.DashboardInitPhase.NotStarted,v.initError=null,v.getModel=()=>null},addPanel:(v,x)=>{},setInitialDatasource:(v,x)=>{v.initialDatasource=x.payload}}}),{loadDashboardPermissions:o,dashboardInitFetching:m,dashboardInitFailed:r,dashboardInitCompleted:u,dashboardInitServices:d,cleanUpDashboard:g,addPanel:p,setInitialDatasource:E}=c.actions,a={dashboard:c.reducer}},663:(Z,O,e)=>{"use strict";e.d(O,{Dh:()=>r,LU:()=>c,L_:()=>o,RB:()=>m,uZ:()=>u});var t=e(82897),n=e.n(t),l=e(47694),s=e(84952),i=e(58379),f=e(2476);function c(d,g){const p={type:"timeseries",title:"Panel Title",gridPos:(0,f.lg)(d),datasource:g?{uid:g}:null};return d.addPanel(p),p.id}function o(d){const g={type:"row",title:"Row title",gridPos:{x:0,y:0}};d.addPanel(g)}function m(d){const g={type:"add-library-panel",gridPos:(0,f.lg)(d)};d.addPanel(g)}function r(d,g){if(!g)return;const p=(0,f.lg)(d),E={type:g.id,title:"Panel Title",gridPos:{x:p.x,y:p.y,w:g.defaults.gridPos.w,h:g.defaults.gridPos.h}};g.defaults&&((0,t.defaults)(E,g.defaults),E.title=g.defaults.title,i.Z.delete(s.zF)),d.addPanel(E)}function u(){const d=(0,t.chain)(l.ZP.panels).filter({hideFromList:!1}).map(p=>p).value(),g=i.Z.get(s.zF);if(g){const p=JSON.parse(g),E=(0,t.find)(d,{id:p.type});if(E){const h=(0,t.cloneDeep)(E);return h.name=p.title,h.sort=-1,{...h,defaults:{...p}}}}}},2476:(Z,O,e)=>{"use strict";e.d(O,{Kq:()=>P,Po:()=>C,W1:()=>R,WJ:()=>v,bY:()=>y,jN:()=>x,lg:()=>A,oe:()=>D,qw:()=>b});var t=e(82897),n=e.n(t),l=e(25318),s=e(33180),i=e(21053),f=e(20308),c=e(18271),o=e(47694),m=e(84952),r=e(58379),u=e(51917),d=e(96161),g=e(76647),p=e(81283),E=e(32294),h=e(3153),a=e(45984);const v=(I,F,K)=>{if(K!==!1){const W=F.alert&&!o.ZP.unifiedAlertingEnabled?"Panel includes an alert rule. removing the panel will also remove the alert rule":void 0,U=F.alert?"YES":void 0;c.Z.publish(new a.VJ({title:"Remove panel",text:"Are you sure you want to remove this panel?",text2:W,icon:"trash-alt",confirmText:U,yesText:"Remove",onConfirm:()=>v(I,F,!1)}));return}I.removePanel(F),(0,h.WI)((0,E.qj)(F.key))},x=(I,F)=>{I.duplicatePanel(F)},y=I=>{let F=I;I instanceof d.rY&&(F=I.getSaveModel()),r.Z.set(m.zF,JSON.stringify(F)),c.Z.emit(l.SI.alertSuccess,["Panel copied. Click **Add panel** icon to paste."])},C=(I,F)=>{c.Z.publish(new a.Dn({component:u.ShareModal,props:{dashboard:I,panel:F}}))},P=(I,F)=>{c.Z.publish(new a.Dn({component:g.c,props:{panel:F,initialFolderUid:I.meta.folderUid,isOpen:!0}}))},D=I=>{c.Z.publish(new a.Dn({component:p.i,props:{onConfirm:()=>I.unlinkLibraryPanel(),isOpen:!0}}))},M=I=>{I.refresh()},b=I=>{const F={...I.options};F.legend.showLegend===!0?F.legend.showLegend=!1:F.legend.showLegend=!0,I.updateOptions(F)};function R(I,F){const K={timeInfo:"",timeRange:F};if(I.timeFrom){const W=(0,f.J)().replace(I.timeFrom,I.scopedVars),U=s.describeTextRange(W);if(U.invalid)return K.timeInfo="invalid time override",K;if((0,t.isString)(F.raw.from)){const N=i.parse(U.from);K.timeInfo=U.display,K.timeRange={from:N,to:i.parse(U.to),raw:{from:U.from,to:U.to}}}}if(I.timeShift){const W=(0,f.J)().replace(I.timeShift,I.scopedVars);if(s.describeTextRange(W).invalid)return K.timeInfo="invalid timeshift",K;const N="-"+W;K.timeInfo+=" timeshift "+N;const S=i.parseDateMath(N,K.timeRange.from,!1),Y=i.parseDateMath(N,K.timeRange.to,!0);K.timeRange={from:S,to:Y,raw:{from:S,to:Y}}}return I.hideTimeOverride&&(K.timeInfo=""),K}function B(I){const K=document.getElementsByTagName("html")[0].getBoundingClientRect().width;return I.maxDataPoints?I.maxDataPoints:Math.ceil(K*(I.gridPos.w/24))}function w(I,F){const K=I.plugin&&I.plugin.noPadding?0:config.theme.panelPadding*2,W=I.hasTitle()?config.theme.panelHeaderHeight:0;return F-W-K-PANEL_BORDER}function A(I){for(const K of I.panelIterator())K.gridPos.y+=8;return{x:0,y:0,w:12,h:8}}},74124:(Z,O,e)=>{"use strict";e.d(O,{O:()=>l});var t=e(46519),n=e(21053);const l=(s,i)=>{const f={from:(0,t.v9)(s.from)?(0,t.CQ)(s.from):s.from,to:(0,t.v9)(s.to)?(0,t.CQ)(s.to):s.to},c=i?i.getTimezone():void 0;return{from:n.parse(f.from,!1,c,i?.fiscalYearStartMonth),to:n.parse(f.to,!0,c,i?.fiscalYearStartMonth),raw:f}}},3597:(Z,O,e)=>{"use strict";e.d(O,{n:()=>t});const t={List:"/datasources",Edit:"/datasources/edit/:uid",Dashboards:"/datasources/edit/:uid/dashboards",New:"/datasources/new"}},41632:(Z,O,e)=>{"use strict";e.d(O,{Aq:()=>P,BX:()=>g,CT:()=>x,Ht:()=>d,MP:()=>i,Nu:()=>E,Ww:()=>o,ZP:()=>M,be:()=>f,fk:()=>a,iZ:()=>v,jS:()=>c,j_:()=>y,ng:()=>C,rl:()=>s,wZ:()=>m,yr:()=>p,zT:()=>r});var t=e(62992),n=e(1762);const l={dataSources:[],plugins:[],categories:[],dataSource:{},layoutMode:n.l.List,searchQuery:"",dataSourcesCount:0,dataSourceTypeSearchQuery:"",isLoadingDataSources:!1,isLoadingDataSourcePlugins:!1,dataSourceMeta:{},isSortAscending:!0},s=(0,t.PH)("dataSources/dataSourceLoaded"),i=(0,t.PH)("dataSources/dataSourcesLoad"),f=(0,t.PH)("dataSources/dataSourcesLoaded"),c=(0,t.PH)("dataSources/dataSourceMetaLoaded"),o=(0,t.PH)("dataSources/dataSourcePluginsLoad"),m=(0,t.PH)("dataSources/dataSourcePluginsLoaded"),r=(0,t.PH)("dataSources/setDataSourcesSearchQuery"),u=(0,t.PH)("dataSources/setDataSourcesLayoutMode"),d=(0,t.PH)("dataSources/setDataSourceTypeSearchQuery"),g=(0,t.PH)("dataSources/setDataSourceName"),p=(0,t.PH)("dataSources/setIsDefault"),E=(0,t.PH)("dataSources/setIsSortAscending"),h=(b=l,R)=>i.match(R)?{...b,isLoadingDataSources:!0}:f.match(R)?{...b,isLoadingDataSources:!1,dataSources:R.payload,dataSourcesCount:R.payload.length}:s.match(R)?{...b,dataSource:R.payload}:r.match(R)?{...b,searchQuery:R.payload}:u.match(R)?{...b,layoutMode:R.payload}:o.match(R)?{...b,plugins:[],isLoadingDataSourcePlugins:!0}:m.match(R)?{...b,plugins:R.payload.plugins,categories:R.payload.categories,isLoadingDataSourcePlugins:!1}:d.match(R)?{...b,dataSourceTypeSearchQuery:R.payload}:c.match(R)?{...b,dataSourceMeta:R.payload}:g.match(R)?{...b,dataSource:{...b.dataSource,name:R.payload}}:p.match(R)?{...b,dataSource:{...b.dataSource,isDefault:R.payload}}:E.match(R)?{...b,isSortAscending:R.payload}:b,a={testingStatus:{},loadError:null,loading:!0,plugin:null},v=(0,t.PH)("dataSourceSettings/initDataSourceSettingsSucceeded"),x=(0,t.PH)("dataSourceSettings/initDataSourceSettingsFailed"),y=(0,t.PH)("dataSourceSettings/testDataSourceStarting"),C=(0,t.PH)("dataSourceSettings/testDataSourceSucceeded"),P=(0,t.PH)("dataSourceSettings/testDataSourceFailed"),M={dataSources:h,dataSourceSettings:(b=a,R)=>v.match(R)?{...b,plugin:R.payload,loadError:null,loading:!1}:x.match(R)?{...b,plugin:null,loadError:R.payload.message,loading:!1}:y.match(R)?{...b,testingStatus:{message:"Testing...",status:"info"}}:C.match(R)?{...b,testingStatus:{status:R.payload?.status,message:R.payload?.message,details:R.payload?.details}}:P.match(R)?{...b,testingStatus:{status:"error",message:R.payload?.message,details:R.payload?.details}}:b}},97934:()=>{"use strict"},30785:(Z,O,e)=>{"use strict";e.d(O,{L:()=>o});var t=e(9892),n=e(68404),l=e(72648),s=e(53217),i=e(90208),f=e(80760);const c={label:"Fixed color",value:"_____fixed_____"},o=r=>{const{value:u,context:d,onChange:g}=r,p="dark-green",E=(0,l.wW)(m),h=u?.field,a=Boolean(!h),v=(0,f.IX)(d.data),x=(0,f.nw)(v,h,c),y=(0,n.useCallback)(D=>{const M=D.value;if(M&&M!==c.value)g({...u,field:M});else{const b=u?.fixed??p;g({...u,field:void 0,fixed:b})}},[g,u]),C=(0,n.useCallback)(D=>{g({field:void 0,fixed:D??p})},[g]),P=a?c:x.find(D=>D.value===h);return n.createElement(n.Fragment,null,n.createElement("div",{className:E.container},n.createElement(s.Ph,{value:P,options:x,onChange:y,noOptionsMessage:"No fields found"}),a&&n.createElement("div",{className:E.picker},n.createElement(i.zH,{color:u?.fixed??p,onChange:C,enableNamedColors:!0}))))},m=r=>({container:t.css`
    display: flex;
    flex-wrap: nowrap;
    justify-content: flex-end;
    align-items: center;
  `,picker:t.css`
    padding-left: 8px;
  `})},26786:(Z,O,e)=>{"use strict";e.d(O,{E:()=>E});var t=e(9892),n=e(68404),l=e(72648),s=e(31403),i=e(11543),f=e(81764),c=e(46967),o=e(39604),m=e(56921),r=e(66120),u=e(16964),d=e(59961),g=e(92484),p=e(26260);const E=a=>{const{value:v,src:x,name:y,placeholder:C,onChange:P,onClear:D,mediaType:M,folderName:b,size:R,color:B}=a,w=(0,l.wW)(h),A=(0,l.l4)(),I=(0,n.createRef)(),F=n.createElement(p.Y,{onChange:P,value:v,mediaType:M,folderName:b});let K=x;!K&&v&&(K=(0,d.t)(v));const W=B&&{fill:A.visualization.getColorByName(B)},U=()=>v&&K?n.createElement(u.V,{src:K,className:w.icon,style:{...W}}):n.createElement(s.Qj,{variant:"primary",fill:"text",size:"sm"},"Set icon"),N=()=>n.createElement(i.Z,null,n.createElement(f._,{label:null,grow:!0},n.createElement(c.I,{value:y,placeholder:C,readOnly:!0,prefix:K&&n.createElement(u.V,{src:K,className:w.icon,style:{...W}}),suffix:n.createElement(s.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:D})})));return n.createElement(o.D,{content:F},(S,Y,Q)=>n.createElement(n.Fragment,null,I.current&&n.createElement(m.J,{...Q,referenceElement:I.current,onMouseEnter:S,onKeyDown:z=>{(0,r.i)(z,Y)}}),n.createElement("div",{ref:I,onClick:S,className:w.pointer},R===g.zc.SMALL&&U(),R===g.zc.NORMAL&&N())))},h=a=>({pointer:t.css`
    cursor: pointer;
    input[readonly] {
      cursor: pointer;
    }
  `,icon:t.css`
    vertical-align: middle;
    display: inline-block;
    fill: currentColor;
    width: 25px;
  `})},26260:(Z,O,e)=>{"use strict";e.d(O,{Y:()=>S});var t=e(9892),n=e(99510),l=e(81699),s=e(6665),i=e(68404),f=e(54899),c=e(72648),o=e(26202),m=e(31403),r=e(47694),u=e(92484),d=e(24799),g=e(30784),p=e(16964);function E({secondaryText:Q="Drag and drop here or browse"}){const z=(0,c.wW)(a);return i.createElement("div",{className:z.iconWrapper},i.createElement("small",{className:z.small},Q),i.createElement(m.zx,{type:"button",icon:"upload"},"Upload"))}const h=({mediaType:Q,setFormData:z,setUpload:G,error:k})=>{const j=(0,c.wW)(a),[de,ge]=(0,i.useState)(!1),[re,ce]=(0,i.useState)(""),ie=()=>i.createElement(d.g,{label:"Preview"},i.createElement("div",{className:j.iconPreview},Q===u.DD.Icon&&i.createElement(p.V,{src:re,className:j.img}),Q===u.DD.Image&&i.createElement("img",{src:re,alt:"Preview of the uploaded file",className:j.img}))),fe=ee=>{fetch(`/api/storage/delete/upload/${ee.file.name}`,{method:"DELETE"}).catch(ne=>console.error("cannot delete file",ne))},Ce=Q==="icon"?{"image/*":[".svg",".xml"]}:{"image/*":[".jpeg",".png",".gif",".webp"]};return i.createElement(g.Yo,{readAs:"readAsBinaryString",onFileRemove:fe,options:{accept:Ce,multiple:!1,onDrop:ee=>{let ne=new FormData;ne.append("file",ee[0]),ce(URL.createObjectURL(ee[0])),ge(!0),z(ne),G(!0)}}},k.message!==""&&de?i.createElement("p",null,k.message):de?i.createElement(ie,null):i.createElement(E,null))};function a(Q,z){return{container:t.css`
      display: flex;
      flex-direction: column;
      width: 100%;
    `,dropzone:t.css`
      display: flex;
      flex: 1;
      flex-direction: column;
      align-items: center;
      padding: ${Q.spacing(6)};
      border-radius: 2px;
      border: 2px dashed ${Q.colors.border.medium};
      background-color: ${z?Q.colors.background.secondary:Q.colors.background.primary};
      cursor: pointer;
    `,iconWrapper:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
    `,acceptMargin:t.css`
      margin: ${Q.spacing(2,0,1)};
    `,small:t.css`
      color: ${Q.colors.text.secondary};
      margin-bottom: ${Q.spacing(2)};
    `,iconContainer:t.css`
      display: flex;
      flex-direction: column;
      width: 80%;
      align-items: center;
      align-self: center;
    `,iconPreview:t.css`
      width: 238px;
      height: 198px;
      border: 1px solid ${Q.colors.border.medium};
      display: flex;
      align-items: center;
      justify-content: center;
    `,img:t.css`
      width: 147px;
      height: 147px;
      fill: ${Q.colors.text.primary};
    `}}var v=e(53217),x=e(14747),y=e(91162),C=e(89050),P=e(75478),D=e(7804);function M(Q){const{columnIndex:z,rowIndex:G,style:k,data:j}=Q,{cards:de,columnCount:ge,onChange:re,selected:ce}=j,ie=z+G*ge,fe=de[ie],Ce=(0,c.l4)(),ee=b(Ce);return i.createElement("div",{style:k},fe&&i.createElement("div",{key:fe.value,className:ce===fe.value?(0,t.cx)(ee.card,ee.selected):ee.card,onClick:()=>re(fe.value)},fe.imgUrl.endsWith(".svg")?i.createElement(p.V,{src:fe.imgUrl,className:ee.img}):i.createElement("img",{src:fe.imgUrl,alt:"",className:ee.img}),i.createElement("h6",{className:ee.text},fe.label.slice(0,-4))))}const b=(0,D.B)(Q=>({card:t.css`
      display: inline-block;
      width: 90px;
      height: 90px;
      margin: 0.75rem;
      margin-left: 15px;
      text-align: center;
      cursor: pointer;
      position: relative;
      background-color: transparent;
      border: 1px solid transparent;
      border-radius: 8px;
      padding-top: 6px;
      :hover {
        border-color: ${Q.colors.action.hover};
        box-shadow: ${Q.shadows.z2};
      }
    `,selected:t.css`
      border: 2px solid ${Q.colors.primary.main};
      :hover {
        border-color: ${Q.colors.primary.main};
      }
    `,img:t.css`
      width: 40px;
      height: 40px;
      object-fit: cover;
      vertical-align: middle;
      fill: ${Q.colors.text.primary};
    `,text:t.css`
      color: ${Q.colors.text.primary};
      white-space: nowrap;
      font-size: 12px;
      text-overflow: ellipsis;
      display: block;
      overflow: hidden;
    `,grid:t.css`
      border: 1px solid ${Q.colors.border.medium};
    `})),R=Q=>{const{onChange:z,cards:G,value:k}=Q,j=(0,c.l4)(),de=b(j);return i.createElement(C.Z,{defaultWidth:680},({width:ge,height:re})=>{const fe=Math.floor(ge/90),Ce=Math.ceil(G.length/fe);return i.createElement(P.Ym,{width:ge,height:re,columnCount:fe,columnWidth:90,rowCount:Ce,rowHeight:90,itemData:{cards:G,columnCount:fe,onChange:z,selected:k},className:de.grid},(0,i.memo)(M,P.wy))})},B=Q=>Q===u.DD.Icon?[u.QS.Icon,u.QS.IOT,u.QS.Marker]:[u.QS.BG],w=(Q,z)=>Q.find(G=>z.startsWith(G.value))??Q[0],A=Q=>{const{value:z,mediaType:G,folderName:k,newValue:j,setNewValue:de}=Q,ge=(0,c.wW)(I),re=B(G).map(_=>({label:_,value:_})),[ce,ie]=(0,i.useState)(),[fe,Ce]=(0,i.useState)(w(re,z?.length?z:k)),[ee,ne]=(0,i.useState)([]),[X,te]=(0,i.useState)([]),ae=_=>{_?(_=_.toLowerCase(),te(ee.filter(ve=>ve.search.includes(_)))):te(ee)};return(0,i.useEffect)(()=>{const _=fe?.value;if(_){const ve=G===u.DD.Icon?Ve=>Ve.name.endsWith(".svg"):Ve=>Ve.name.endsWith(".png")||Ve.name.endsWith(".gif");(0,y.ak)().get("-- Grafana --").then(Ve=>{Ve.listFiles(_).subscribe({next:it=>{const rt=[];it.forEach(pe=>{if(ve(pe)){const Ie=pe.name.lastIndexOf(".");rt.push({value:`${_}/${pe.name}`,label:pe.name,search:(Ie?pe.name.substring(0,Ie):pe.name).toLowerCase(),imgUrl:`public/${_}/${pe.name}`})}}),ne(rt),te(rt)}})})}},[G,fe]),i.createElement(i.Fragment,null,i.createElement(d.g,null,i.createElement(v.Ph,{options:re,onChange:Ce,value:fe,menuShouldPortal:!1})),i.createElement(d.g,null,i.createElement(x.H,{value:ce??"",placeholder:"Search",onChange:_=>{ae(_),ie(_)}})),X&&i.createElement("div",{className:ge.cardsWrapper},i.createElement(R,{cards:X,onChange:_=>de(_),value:j})))},I=Q=>({cardsWrapper:t.css`
    height: 30vh;
    min-height: 50px;
    margin-top: 5px;
    max-width: 680px;
  `});var F=e(46967),K=e(64353),W=e(59961);const U=Q=>{const{newValue:z,setNewValue:G,mediaType:k}=Q,j=(0,c.wW)(N),de=(0,W.t)(z);let ge=z?.substring(z.lastIndexOf("/")+1,z.lastIndexOf("."));return ge.length>20&&(ge=ge.substring(0,20)+"..."),i.createElement(i.Fragment,null,i.createElement(d.g,null,i.createElement(F.I,{onChange:re=>G(re.currentTarget.value),value:z})),i.createElement("div",{className:j.iconContainer},i.createElement(d.g,{label:"Preview"},i.createElement("div",{className:j.iconPreview},k===u.DD.Icon&&i.createElement(p.V,{src:de,className:j.img}),k===u.DD.Image&&z&&i.createElement("img",{src:de,alt:"Preview of the selected URL",className:j.img}))),i.createElement(K._,null,ge)))},N=Q=>({iconContainer:t.css`
    display: flex;
    flex-direction: column;
    width: 80%;
    align-items: center;
    align-self: center;
  `,iconPreview:t.css`
    width: 238px;
    height: 198px;
    border: 1px solid ${Q.colors.border.medium};
    display: flex;
    align-items: center;
    justify-content: center;
  `,img:t.css`
    width: 147px;
    height: 147px;
    fill: ${Q.colors.text.primary};
  `}),S=Q=>{const{value:z,onChange:G,mediaType:k,folderName:j}=Q,de=(0,c.wW)(Y),ge=()=>{G(z)},re=(0,i.createRef)(),{dialogProps:ce}=(0,n.R)({},re),{overlayProps:ie}=(0,s.Ir)({onClose:ge,isDismissable:!0,isOpen:!0},re),fe=z&&z.includes("://"),[Ce,ee]=(0,i.useState)(z??""),[ne,X]=(0,i.useState)(fe?u.hQ.URL:u.hQ.Folder),[te,ae]=(0,i.useState)(new FormData),[_,ve]=(0,i.useState)(!1),[Ve,it]=(0,i.useState)({message:""}),rt=He=>`${de.resourcePickerPopoverTab} ${ne===He&&de.resourcePickerPopoverActiveTab}`,pe=()=>i.createElement(A,{value:z,mediaType:k,folderName:j,newValue:Ce,setNewValue:ee}),Ie=()=>i.createElement(U,{newValue:Ce,setNewValue:ee,mediaType:k}),We=()=>i.createElement(h,{mediaType:k,setFormData:ae,setUpload:ve,newValue:Ce,error:Ve}),Je=()=>{switch(ne){case u.hQ.Folder:return pe();case u.hQ.URL:return Ie();case u.hQ.Upload:return We();default:return pe()}};return i.createElement(l.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},i.createElement("section",{ref:re,...ie,...ce},i.createElement("div",{className:de.resourcePickerPopover},i.createElement("div",{className:de.resourcePickerPopoverTabs},i.createElement("button",{className:rt(u.hQ.Folder),onClick:()=>X(u.hQ.Folder)},"Folder"),i.createElement("button",{className:rt(u.hQ.URL),onClick:()=>X(u.hQ.URL)},"URL")),i.createElement("div",{className:de.resourcePickerPopoverContent},Je(),i.createElement(o.h,{className:de.buttonGroup},i.createElement(m.zx,{className:de.button,variant:"secondary",onClick:()=>ge()},"Cancel"),i.createElement(m.zx,{className:de.button,variant:Ce&&Ce!==z?"primary":"secondary",onClick:()=>{_?fetch("/api/storage/upload",{method:"POST",body:te}).then(He=>{if(He.status>=400){He.json().then(Ae=>it(Ae));return}else return He.json()}).then(He=>{(0,f.i)().get(`api/storage/read/${He.path}`).then(()=>ee(`${r.vc.appUrl}api/storage/read/${He.path}`)).then(()=>G(`${r.vc.appUrl}api/storage/read/${He.path}`))}).catch(He=>console.error(He)):G(Ce)}},"Select"))))))},Y=Q=>({resourcePickerPopover:t.css`
    border-radius: ${Q.shape.borderRadius()};
    box-shadow: ${Q.shadows.z3};
    background: ${Q.colors.background.primary};
    border: 1px solid ${Q.colors.border.medium};
  `,resourcePickerPopoverTab:t.css`
    width: 50%;
    text-align: center;
    padding: ${Q.spacing(1,0)};
    background: ${Q.colors.background.secondary};
    color: ${Q.colors.text.secondary};
    font-size: ${Q.typography.bodySmall.fontSize};
    cursor: pointer;
    border: none;

    &:focus:not(:focus-visible) {
      outline: none;
      box-shadow: none;
    }

    :focus-visible {
      position: relative;
    }
  `,resourcePickerPopoverActiveTab:t.css`
    color: ${Q.colors.text.primary};
    font-weight: ${Q.typography.fontWeightMedium};
    background: ${Q.colors.background.primary};
  `,resourcePickerPopoverContent:t.css`
    width: 315px;
    font-size: ${Q.typography.bodySmall.fontSize};
    min-height: 184px;
    padding: ${Q.spacing(1)};
    display: flex;
    flex-direction: column;
  `,resourcePickerPopoverTabs:t.css`
    display: flex;
    width: 100%;
    border-radius: ${Q.shape.borderRadius()} ${Q.shape.borderRadius()} 0 0;
  `,buttonGroup:t.css`
    align-self: center;
    flex-direction: row;
  `,button:t.css`
    margin: 12px 20px 5px;
  `})},38647:(Z,O,e)=>{"use strict";e.d(O,{$:()=>d});var t=e(68404),n=e(11543),l=e(81764),s=e(2594),i=e(31403),f=e(15448),c=e(37565),o=e(92484);const m=[{label:"Fixed",value:o.xy.Fixed,description:"Fixed value"},{label:"Field",value:o.xy.Field,description:"Display field value"}],r={settings:{}},u={settings:{}},d=({value:g,context:p,onChange:E})=>{const a=(0,t.useCallback)(P=>{E({...g,mode:P})},[E,g]),v=(0,t.useCallback)(P=>{E({...g,field:P})},[E,g]),x=(0,t.useCallback)((P="")=>{E({...g,fixed:P})},[E,g]),y=()=>{x("")},C=g?.mode??o.xy.Fixed;return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(l._,{label:"Source",labelWidth:9,grow:!0},t.createElement(s.S,{value:C,options:m,onChange:a,fullWidth:!0}))),C!==o.xy.Fixed&&t.createElement(n.Z,null,t.createElement(l._,{label:"Field",labelWidth:9,grow:!0},t.createElement(f.b,{context:p,value:g.field??"",onChange:v,item:r}))),C===o.xy.Fixed&&t.createElement(n.Z,{key:g?.fixed},t.createElement(l._,{label:"Value",labelWidth:9,grow:!0},t.createElement(c.A,{context:p,value:g?.fixed,onChange:x,item:u,suffix:g?.fixed&&t.createElement(i.zx,{icon:"times",variant:"secondary",fill:"text",size:"sm",onClick:y})}))),C===o.xy.Template&&t.createElement(n.Z,null,t.createElement(l._,{label:"Template",labelWidth:9,grow:!0},t.createElement(c.A,{context:p,value:g?.fixed,onChange:x,item:u}))))}},54643:(Z,O,e)=>{"use strict";e.d(O,{Lm:()=>t.L,Lv:()=>p,k9:()=>w,cL:()=>D,$2:()=>I.$});var t=e(30785),n=e(68404);const l=({value:F,onChange:K})=>{const[W,U]=useState(F?[{value:F,label:F}]:[]),[N,S]=useState(),Y=window.__grafana_public_path__+"img/icons/unicons/",Q=z=>{K(z),S(z)};return useEffect(()=>{getBackendSrv().get(`${Y}/index.json`).then(z=>{U(z.files.map(G=>({value:G,label:G})))})},[Y]),React.createElement(Select,{options:W,value:N,onChange:z=>{Q(z.value)}})},s=null;var i=e(11543),f=e(81764),c=e(2594),o=e(15448),m=e(25532),r=e(92484),u=e(26786);const d=[{label:"Fixed",value:r.Q8.Fixed,description:"Fixed value"},{label:"Field",value:r.Q8.Field,description:"Use a string field result"}],g={settings:{}},p=F=>{const{value:K,context:W,onChange:U,item:N}=F,S=9,Y=(0,n.useCallback)(ce=>{U({...K,mode:ce})},[U,K]),Q=(0,n.useCallback)((ce="")=>{U({...K,field:ce})},[U,K]),z=(0,n.useCallback)(ce=>{U({...K,fixed:ce??""})},[U,K]),G=ce=>{ce.stopPropagation(),U({mode:r.Q8.Fixed,fixed:"",field:""})},k=K?.mode??r.Q8.Fixed,j=N.settings?.showSourceRadio??!0,de=N.settings?.resourceType??r.DD.Icon,ge=N.settings?.folderName??m.ResourceFolderName.Icon;let re="";return de===r.DD.Icon&&(K?.fixed?re=(0,m.getPublicOrAbsoluteUrl)(K.fixed):N.settings?.placeholderValue&&(re=(0,m.getPublicOrAbsoluteUrl)(N.settings.placeholderValue))),n.createElement(n.Fragment,null,j&&n.createElement(i.Z,null,n.createElement(f._,{label:"Source",labelWidth:S,grow:!0},n.createElement(c.S,{value:k,options:d,onChange:Y,fullWidth:!0}))),k!==r.Q8.Fixed&&n.createElement(i.Z,null,n.createElement(f._,{label:"Field",labelWidth:S,grow:!0},n.createElement(o.b,{context:W,value:K.field??"",onChange:Q,item:g}))),k===r.Q8.Fixed&&n.createElement(u.E,{onChange:z,onClear:G,value:K?.fixed,src:re,placeholder:N.settings?.placeholderText??"Select a value",name:E(K?.fixed)??"",mediaType:de,folderName:ge,size:r.zc.NORMAL}),k===r.Q8.Mapping&&n.createElement(i.Z,null,n.createElement(f._,{label:"Mappings",labelWidth:S,grow:!0},n.createElement("div",null,"TODO mappings editor!"))))};function E(F){if(!F)return;const K=F.lastIndexOf("/");return K>0?F.substring(K+1):F}var h=e(9892),a=e(72648),v=e(53217),x=e(80760),y=e(45458),C=e(33048);const P={label:"Fixed value",value:"_____fixed_____"},D=F=>{const{value:K,context:W,onChange:U,item:N}=F,{settings:S}=N,Y=(0,a.wW)(M),Q=K?.field,z=Boolean(!Q),G=(0,x.IX)(W.data),k=(0,x.nw)(G,Q,P),j=(0,n.useMemo)(()=>(0,C.x5)(S),[S]),de=(0,n.useCallback)(ee=>{U((0,C.C)(ee,j))},[U,j]),ge=(0,n.useCallback)(ee=>{const ne=ee.value;ne&&ne!==P.value?de({...K,field:ne}):de({...K,field:void 0})},[de,K]),re=(0,n.useCallback)(ee=>{ee!==void 0&&de({...K,min:ee})},[de,K]),ce=(0,n.useCallback)(ee=>{ee!==void 0&&de({...K,max:ee})},[de,K]),ie=(0,n.useCallback)(ee=>{ee!==void 0&&de({...K,fixed:ee})},[de,K]),fe=K??{},Ce=z?P:k.find(ee=>ee.value===Q);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(v.Ph,{value:Ce,options:k,onChange:ge,noOptionsMessage:"No fields found"})),n.createElement("div",{className:Y.range},z&&n.createElement(i.Z,null,n.createElement(f._,{label:"Value",labelWidth:8,grow:!0},n.createElement(y.Y,{value:fe.fixed,...j,onChange:ie}))),!z&&!j.hideRange&&n.createElement(n.Fragment,null,n.createElement(i.Z,null,n.createElement(f._,{label:"Min",labelWidth:8,grow:!0},n.createElement(y.Y,{value:fe.min,...j,onChange:re}))),n.createElement(i.Z,null,n.createElement(f._,{label:"Max",labelWidth:8,grow:!0},n.createElement(y.Y,{value:fe.max,...j,onChange:ce}))))))},M=F=>({range:h.css`
    padding-top: 8px;
  `});var b=e(14582);const R={label:"Fixed value",value:"_____fixed_____"},B=[{label:"Mod",value:r.eK.Mod,description:"Use field values, mod from max"},{label:"Clamped",value:r.eK.Clamped,description:"Use field values, clamped to max and min"}],w=({value:F,context:K,onChange:W,item:U})=>{const{settings:N}=U,S=0,Y=F?.field,Q=Boolean(!Y),z=(0,x.IX)(K.data),G=(0,x.nw)(z,Y,R,b.fS.number),k=(0,a.wW)(A),j=(0,n.useCallback)(fe=>{const Ce=fe.value;if(Ce&&Ce!==R.value)W({...F,field:Ce});else{const ee=F.fixed??S;W({...F,field:void 0,fixed:ee})}},[W,F]),de=(0,n.useCallback)(fe=>{W({...F,mode:fe})},[W,F]),ge=(0,n.useCallback)(fe=>{W({...F,field:void 0,fixed:fe??S})},[W,F]),re=F??{},ce=F?.mode??r.eK.Mod,ie=Q?R:G.find(fe=>fe.value===Y);return n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement(i.Z,null,n.createElement(f._,{label:"Limit",labelWidth:8,grow:!0},n.createElement(c.S,{value:ce,options:B,onChange:de,fullWidth:!0}))),n.createElement(v.Ph,{value:ie,options:G,onChange:j,noOptionsMessage:"No fields found"})),n.createElement("div",{className:k.range},Q&&n.createElement(i.Z,null,n.createElement(f._,{label:"Value",labelWidth:8,grow:!0},n.createElement(y.Y,{value:re?.fixed??S,onChange:ge,max:N?.max,min:N?.min})))))},A=F=>({range:h.css`
    padding-top: 8px;
  `});var I=e(38647)},25532:(Z,O,e)=>{"use strict";e.d(O,{MediaType:()=>t.DD,ResourceDimensionMode:()=>t.Q8,ResourceFolderName:()=>t.QS,ScalarDimensionMode:()=>t.eK,ScaleDimensionMode:()=>t.B5,TextDimensionMode:()=>t.xy,findField:()=>i.PI,findFieldIndex:()=>i.rj,getColorDimension:()=>f,getColorDimensionFromData:()=>i.FP,getPublicOrAbsoluteUrl:()=>g.t,getResourceDimension:()=>g.I,getResourceDimensionFromData:()=>i.Qz,getScalarDimension:()=>E.y,getScalarDimensionFromData:()=>i.z2,getScaleDimensionFromData:()=>i.pb,getScaledDimension:()=>o.W8,getScaledDimensionForField:()=>o.A,getTextDimension:()=>u,getTextDimensionFromData:()=>i.WO});var t=e(92484),n=e(425),l=e(59309),s=e(36512),i=e(20927);function f(h,a,v){return c((0,i.PI)(h,a.field),a,v)}function c(h,a,v){if(!h){const C=v.visualization.getColorByName(a.fixed??"grey");return{isAssumed:Boolean(a.field?.length)||!a.fixed,fixed:C,value:()=>C,get:P=>C}}const x=(0,n.fD)(h);if(x.isByValue||h.config.mappings?.length){const C=(0,l.xD)(h,!0);C!==h.config&&(h={...h,config:C},h.state=void 0);const P=(0,s.U_)({field:h,theme:v}),D=M=>P(M).color??"#ccc";return{field:h,get:M=>D(h.values.get(M)),value:()=>D((0,i.cR)(h))}}const y=x.getCalculator(h,v)(0,0);return{fixed:y,value:()=>y,get:C=>y,field:h}}var o=e(33048),m=e(14582),r=e(20112);function u(h,a){const v=a.field?(0,i.PI)(h,a.field):h?.fields.find(x=>x.type===m.fS.string);return d(v,a)}function d(h,a){let v=a.fixed;const x=a.mode??t.xy.Fixed;if(x===t.xy.Fixed)return{isAssumed:!Boolean(v),fixed:v,value:()=>v,get:C=>v};if(x===t.xy.Template){const C=P=>`TEMPLATE[${a.fixed} // ${P}]`;return h?{field:h,get:P=>C(h.values.get(P)),value:()=>C((0,i.cR)(h))}:(v=C(""),{isAssumed:!0,fixed:v,value:()=>v,get:P=>v})}if(!h)return{isAssumed:!0,fixed:v,value:()=>v,get:C=>v};let y=C=>(0,r.zc)(h.display(C));return{field:h,get:C=>y(h.values.get(C)),value:()=>y((0,i.cR)(h))}}var g=e(59961),p=e(97934),E=e(86682)},59961:(Z,O,e)=>{"use strict";e.d(O,{I:()=>s,t:()=>l});var t=e(92484),n=e(20927);function l(i){return i?i.indexOf(":/")>0?i:window.__grafana_public_path__+i:""}function s(i,f){const c=f.mode??t.Q8.Fixed;if(c===t.Q8.Fixed){const r=l(f.fixed);return{isAssumed:!Boolean(r),fixed:r,value:()=>r,get:u=>r}}const o=(0,n.PI)(i,f.field);if(!o){const r="";return{isAssumed:!0,fixed:r,value:()=>r,get:u=>r}}if(c===t.Q8.Mapping){const r=u=>l(`${u}`);return{field:o,get:u=>r(o.values.get(u)),value:()=>r((0,n.cR)(o))}}const m=r=>{if(o&&o.display){const u=o.display(r).icon;return l(u??"")}return""};return{field:o,get:r=>m(o.values.get(r)),value:()=>m((0,n.cR)(o))}}},86682:(Z,O,e)=>{"use strict";e.d(O,{y:()=>l});var t=e(92484),n=e(20927);function l(i,f){return s((0,n.PI)(i,f?.field),f)}function s(i,f){if(!i){const m=f.fixed??0;return{isAssumed:Boolean(f.field?.length)||!f.fixed,fixed:m,value:()=>m,get:()=>m}}let c=m=>m%f.max;return f.mode===t.eK.Clamped&&(c=m=>m<f.min?f.min:m>f.max?f.max:m),{field:i,get:m=>{const r=i.values.get(m);return r===null||typeof r!="number"?0:c(r)},value:()=>(0,n.cR)(i)}}},33048:(Z,O,e)=>{"use strict";e.d(O,{A:()=>i,C:()=>c,W8:()=>s,x5:()=>f});var t=e(59309),n=e(20927),l=e(25532);function s(o,m){return i((0,n.PI)(o,m?.field),m)}function i(o,m,r){if(!o){const h=m.fixed??0;return{isAssumed:Boolean(m.field?.length)||!m.fixed,fixed:h,value:()=>h,get:()=>h}}const u=(0,t.dz)(o),d=m.max-m.min;if(o.values.length<1||d<=0||u.delta<=0)return{fixed:m.min,value:()=>m.min,get:()=>m.min};let p=h=>m.min+h*d;if(r===l.ScaleDimensionMode.Quadratic){const h=Math.PI*(m.max/2)**2,a=Math.PI*(m.min/2)**2,v=h-a;p=x=>{let y=a+v*x;return Math.sqrt(y/Math.PI)*2}}const E=h=>{const a=o.values.get(h);let v=0;return a!==-1/0&&(v=(a-u.min)/u.delta),v>1?v=1:v<0&&(v=0),p(v)};return{get:E,value:()=>E((0,n.cR)(o)),field:o}}function f(o){return o||(o={min:0,max:1}),o.min==null&&(o.min=0),o.max==null&&(o.max=1),o}function c(o,m){let{min:r,max:u}=f(m);if(o||(o={}),o.max==null&&(o.max=u),o.min==null&&(o.min=r),o.min>o.max){const d=o.max;o.max=o.min,o.min=d}return o.min<r&&(o.min=r),o.max>u&&(o.max=u),o.fixed==null&&(o.fixed=o.min+(o.max-o.min)/2),o.field||(o.fixed>u?o.fixed=u:o.fixed<r&&(o.fixed=r)),o}},92484:(Z,O,e)=>{"use strict";e.d(O,{B5:()=>t,DD:()=>c,Q8:()=>i,QS:()=>f,eK:()=>n,hQ:()=>o,qj:()=>s,xy:()=>l,zc:()=>m});var t=(r=>(r.Linear="linear",r.Quadratic="quad",r))(t||{}),n=(r=>(r.Mod="mod",r.Clamped="clamped",r))(n||{}),l=(r=>(r.Fixed="fixed",r.Field="field",r.Template="template",r))(l||{});const s=Object.freeze({fixed:"",mode:"field",field:""});var i=(r=>(r.Fixed="fixed",r.Field="field",r.Mapping="mapping",r))(i||{}),f=(r=>(r.Icon="img/icons/unicons",r.IOT="img/icons/iot",r.Marker="img/icons/marker",r.BG="img/bg",r))(f||{}),c=(r=>(r.Icon="icon",r.Image="image",r))(c||{}),o=(r=>(r.Folder="folder",r.URL="url",r.Upload="upload",r))(o||{}),m=(r=>(r.SMALL="small",r.NORMAL="normal",r))(m||{})},20927:(Z,O,e)=>{"use strict";e.d(O,{FP:()=>f,PI:()=>u,Qz:()=>m,WO:()=>r,cR:()=>g,pb:()=>c,rj:()=>d,z2:()=>o});var t=e(89890),n=e(21760),l=e(35645),s=e(25532),i=e(86682);function f(p,E){if(p?.series&&E.field)for(const h of p.series){const a=(0,s.getColorDimension)(h,E,l.v.theme2);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getColorDimension)(void 0,E,l.v.theme2)}function c(p,E){if(p?.series&&E.field)for(const h of p.series){const a=(0,s.getScaledDimension)(h,E);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getScaledDimension)(void 0,E)}function o(p,E){if(p?.series&&E.field)for(const h of p.series){const a=(0,i.y)(h,E);if(!a.isAssumed||p.series.length===1)return a}return(0,i.y)(void 0,E)}function m(p,E){if(p?.series&&E.field)for(const h of p.series){const a=(0,s.getResourceDimension)(h,E);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getResourceDimension)(void 0,E)}function r(p,E){if(p?.series&&E.field)for(const h of p.series){const a=(0,s.getTextDimension)(h,E);if(!a.isAssumed||p.series.length===1)return a}return(0,s.getTextDimension)(void 0,E)}function u(p,E){if(!(!p||!E?.length))for(const h of p.fields){if(E===h.name)return h;const a=(0,t.C)(h,p);if(E===a)return h}}function d(p,E){if(!(!p||!E?.length))for(let h=0;h<p.fields.length;h++){const a=p.fields[h];if(E===a.name)return h;const v=(0,t.C)(a,p);if(E===v)return h}}function g(p){const E=p.state?.calcs;if(E){const v=E[n.gz.lastNotNull];if(v!=null)return v}const h=p.values;let a=h.length-1;for(;a>=0;){const v=h.get(a--);if(v!=null)return v}}},94619:(Z,O,e)=>{"use strict";e.d(O,{m:()=>Y});var t=e(9892),n=e(68404),l=e(89029),s=e(35645),i=e(20308),f=e(72648),c=e(83437),o=e(91162),m=e(25405),r=e(81168),u=e(93713),d=e(61966),g=e(33180),p=e(46519),E=e(39904),h=e(41611);function a({splitOpenFn:z,traceToLogsOptions:G,traceToMetricsOptions:k,dataFrame:j,createFocusSpanLink:de,trace:ge}){if(!j)return;let re=B(ge);const ce=j.fields.some(fe=>Boolean(fe.config.links?.length));if(j.fields.length===1||!ce)return x(z,j.fields[0],G,k,de,re);if(ce)return function(Ce){re={...re,...w(Ce)};const ee=j.fields.find(ne=>Boolean(ne.config.links?.length));try{const ne=(0,h.a_)({field:ee,rowIndex:Ce.dataFrameRowIndex,splitOpenFn:z,range:b(Ce),dataFrame:j,vars:re});return{logLinks:[{href:ne[0].href,onClick:ne[0].onClick,content:n.createElement(E.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:ne[0].origin}]}}catch(ne){console.error(ne);return}}}const v=["cluster","hostname","namespace","pod"].map(z=>({key:z}));function x(z,G,k,j,de,ge){let re;k?.datasourceUid&&(re=(0,o.ak)().getInstanceSettings(k.datasourceUid));const ce=re?.type==="grafana-splunk-datasource";let ie;return j?.datasourceUid&&(ie=(0,o.ak)().getInstanceSettings(j.datasourceUid)),function(Ce){ge={...ge,...w(Ce)};const ee={traceLinks:[]};let ne,X="";if(re&&k){const te=k.customQuery?k.query:void 0,ae=k.tags||v;switch(re?.type){case"loki":X=M(Ce,ae),ne=y(Ce,k,X,te);break;case"grafana-splunk-datasource":X=M(Ce,ae,{joinBy:" "}),ne=P(Ce,k,X,te);break;case"elasticsearch":case"grafana-opensearch-datasource":X=M(Ce,ae,{labelValueSign:":",joinBy:" AND "}),ne=C(Ce,k,X,te);break;case"grafana-falconlogscale-datasource":X=M(Ce,ae,{joinBy:" OR "}),ne=D(Ce,k,X,te)}if(ne){const _={title:re.name,url:"",internal:{datasourceUid:re.uid,datasourceName:re.name,query:ne}};if(ge={...ge,__tags:{text:"Tags",value:X}},(0,h.lt)(_.internal.query,ge).allVariablesDefined){const ve=(0,l._)({link:_,internalLink:_.internal,scopedVars:ge,range:b(Ce,{startMs:k.spanStartTimeShift?g.intervalToMs(k.spanStartTimeShift):0,endMs:k.spanEndTimeShift?g.intervalToMs(k.spanEndTimeShift):0},ce),field:{},onClickFn:z,replaceVariables:(0,i.J)().replace.bind((0,i.J)())});ee.logLinks=[{href:ve.href,onClick:ve.onClick,content:n.createElement(E.J,{name:"gf-logs",title:"Explore the logs for this in split view"}),field:G}]}}}if(ie&&j?.queries){ee.metricLinks=[];for(const te of j.queries){const ae=R(te,j?.tags||[],Ce),_={title:ie.name,url:"",internal:{datasourceUid:ie.uid,datasourceName:ie.name,query:{expr:ae,refId:"A"}}},ve=(0,l._)({link:_,internalLink:_.internal,scopedVars:{},range:b(Ce,{startMs:j.spanStartTimeShift?g.intervalToMs(j.spanStartTimeShift):0,endMs:j.spanEndTimeShift?g.intervalToMs(j.spanEndTimeShift):0}),field:{},onClickFn:z,replaceVariables:(0,i.J)().replace.bind((0,i.J)())});ee.metricLinks.push({title:te?.name,href:ve.href,onClick:ve.onClick,content:n.createElement(E.J,{name:"chart-line",title:"Explore metrics for this span"}),field:G})}}if(Ce.references&&de)for(const te of Ce.references){if(te.refType==="CHILD_OF")continue;const ae=de(te.traceID,te.spanID);ee.traceLinks.push({href:ae.href,title:te.span?te.span.operationName:"View linked span",content:n.createElement(E.J,{name:"link",title:"View linked span"}),onClick:ae.onClick,field:ae.origin})}if(Ce.subsidiarilyReferencedBy&&de)for(const te of Ce.subsidiarilyReferencedBy){const ae=de(te.traceID,te.spanID);ee.traceLinks.push({href:ae.href,title:te.span?te.span.operationName:"View linked span",content:n.createElement(E.J,{name:"link",title:"View linked span"}),onClick:ae.onClick,field:ae.origin})}return ee}}function y(z,G,k,j){const{filterByTraceID:de,filterBySpanID:ge}=G;if(j)return{expr:j,refId:""};if(!k)return;let re="{${__tags}}";return de&&z.traceID&&(re+=' |="${__span.traceId}"'),ge&&z.spanID&&(re+=' |="${__span.spanId}"'),{expr:re,refId:""}}function C(z,G,k,j){const{filterByTraceID:de,filterBySpanID:ge}=G;if(j)return{query:j,refId:"",metrics:[{id:"1",type:"logs"}]};let re=[];return ge&&z.spanID&&re.push('"${__span.spanId}"'),de&&z.traceID&&re.push('"${__span.traceId}"'),k&&re.push("${__tags}"),{query:re.join(" AND "),refId:"",metrics:[{id:"1",type:"logs"}]}}function P(z,G,k,j){const{filterByTraceID:de,filterBySpanID:ge}=G;if(j)return{query:j,refId:""};let re="";return k&&(re+="${__tags}"),de&&z.traceID&&(re+=' "${__span.traceId}"'),ge&&z.spanID&&(re+=' "${__span.spanId}"'),{query:re,refId:""}}function D(z,G,k,j){const{filterByTraceID:de,filterBySpanID:ge}=G;if(j)return{lsql:j,refId:""};if(!k)return;let re="${__tags}";return de&&z.traceID&&(re+=' or "${__span.traceId}"'),ge&&z.spanID&&(re+=' or "${__span.spanId}"'),{lsql:re,refId:""}}function M(z,G,{labelValueSign:k="=",joinBy:j=", "}={}){return[...z.process.tags,...z.tags,{key:"spanId",value:z.spanID},{key:"traceId",value:z.traceID},{key:"name",value:z.operationName},{key:"duration",value:z.duration}].map(de=>{const ge=G.find(re=>re.key===de.key);if(ge)return`${ge.value?ge.value:ge.key}${k}"${de.value}"`}).filter(de=>Boolean(de)).join(j)}function b(z,G={startMs:0,endMs:0},k=!1){const j=Math.floor(z.startTime/1e3+G.startMs),de=(0,p.CQ)(j),ge=(z.startTime+z.duration)/1e3;let re=Math.floor(ge+G.endMs);k&&re-j<1e3?re=j+1e3:j===re&&re++;const ce=(0,p.CQ)(re);return{from:de,to:ce,raw:{from:de,to:ce}}}function R(z,G=[],k){if(!z.query)return`histogram_quantile(0.5, sum(rate(traces_spanmetrics_latency_bucket{service="${k.process.serviceName}"}[5m])) by (le))`;let j=z.query;if(G.length&&j.indexOf("$__tags")!==-1){const de=[...k.process.tags,...k.tags],re=G.reduce((ce,ie)=>{const fe=de.find(Ce=>Ce.key===ie.key)?.value;return fe&&ce.push(`${ie.value?ie.value:ie.key}="${fe}"`),ce},[])?.join(", ");j=j.replace(/\$__tags/g,re)}return j}function B(z){return{__trace:{text:"Trace",value:{duration:z.duration,name:z.traceName,traceId:z.traceID}}}}function w(z){const G={};for(const k of z.process.tags)G[k.key]=k.value;for(const k of z.tags)G[k.key]=k.value;return{__span:{text:"Span",value:{spanId:z.spanID,traceId:z.traceID,duration:z.duration,name:z.operationName,tags:G}}}}function A(){const[z,G]=(0,n.useState)(new Set),k=(0,n.useCallback)(function(ie){if(z.size===0)return;let fe=-1,Ce=!0;const ee=ie.reduce((ne,X)=>(X.depth<=fe&&(Ce=!0),Ce&&ne.has(X.spanID)&&(ne.delete(X.spanID),Ce=!1,fe=X.depth),ne),new Set(z));G(ee)},[z]),j=(0,n.useCallback)(function(ie){if(I(ie,z))return;let fe;const Ce=ie.reduce((ee,ne)=>(fe&&ne.depth<=fe.depth?(ee.add(fe.spanID),ne.hasChildren&&(fe=ne)):ne.hasChildren&&!ee.has(ne.spanID)&&(fe=ne),ee),new Set(z));fe&&Ce.add(fe.spanID),G(Ce)},[z]),de=(0,n.useCallback)(function(){G(new Set)},[]),ge=(0,n.useCallback)(function(ie){if(I(ie,z))return;const fe=ie.reduce((Ce,ee)=>(ee.hasChildren&&Ce.add(ee.spanID),Ce),new Set);G(fe)},[z]),re=(0,n.useCallback)(function(ie){const fe=new Set(z);z.has(ie)?fe.delete(ie):fe.add(ie),G(fe)},[z]);return{childrenHiddenIDs:z,expandOne:k,collapseOne:j,expandAll:de,collapseAll:ge,childrenToggle:re}}function I(z,G){return z.filter(j=>j.hasChildren).length===G.size}function F(z){const[G,k]=(0,n.useState)(new Map);(0,n.useEffect)(()=>{k(new Map)},[z,k]);const j=(0,n.useCallback)(function(ce){const ie=new Map(G);ie.has(ce)?ie.delete(ce):ie.set(ce,new d.DetailState),k(ie)},[G]),de=(0,n.useCallback)(function(ce,ie){const fe=G.get(ce);if(!fe)return;const Ce=fe.toggleLogItem(ie),ee=new Map(G);return ee.set(ce,Ce),k(ee)},[G]),ge=(0,n.useCallback)(function(ce,ie){const fe=G.get(ce);if(!fe)return;const Ce=fe.toggleReferenceItem(ie),ee=new Map(G);return ee.set(ce,Ce),k(ee)},[G]);return{detailStates:G,toggleDetail:j,detailLogItemToggle:de,detailLogsToggle:(0,n.useCallback)(re=>K("logs",G,k)(re),[G]),detailWarningsToggle:(0,n.useCallback)(re=>K("warnings",G,k)(re),[G]),detailStackTracesToggle:(0,n.useCallback)(re=>K("stackTraces",G,k)(re),[G]),detailReferenceItemToggle:ge,detailReferencesToggle:(0,n.useCallback)(re=>K("references",G,k)(re),[G]),detailProcessToggle:(0,n.useCallback)(re=>K("process",G,k)(re),[G]),detailTagsToggle:(0,n.useCallback)(re=>K("tags",G,k)(re),[G])}}function K(z,G,k){return j=>{const de=G.get(j);if(!de)return;let ge;z==="tags"?ge=de.toggleTags():z==="process"?ge=de.toggleProcess():z==="warnings"?ge=de.toggleWarnings():z==="references"?ge=de.toggleReferences():z==="stackTraces"?ge=de.toggleStackTraces():ge=de.toggleLogs();const re=new Map(G);re.set(j,ge),k(re)}}function W(){const[z,G]=(0,n.useState)(new Set),k=(0,n.useCallback)(function(ge){G(re=>{const ce=new Set(re);return ce.add(ge),ce})},[]),j=(0,n.useCallback)(function(ge){G(re=>{const ce=new Set(re);return ce.delete(ge),ce})},[]);return{hoverIndentGuideIds:z,addHoverIndentGuideId:k,removeHoverIndentGuideId:j}}function U(){const[z,G]=(0,n.useState)({time:{current:[0,1]}}),k=(0,n.useCallback)(function(ge){G(re=>{const ce={...re.time,...ge};return{...re,time:ce}})},[]),j=(0,n.useCallback)(function(ge,re){const ie={current:[ge,re]};G(fe=>({...fe,time:ie}))},[]);return{viewRange:z,updateViewRangeTime:j,updateNextViewRangeTime:k}}const N=z=>({noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${z.typography.h4.fontSize};
    color: ${z.colors.text.secondary};
  `});function S(){return{}}function Y(z){const{spanFindMatches:G,traceProp:k,datasource:j,topOfViewRef:de,topOfViewRefType:ge}=z,{detailStates:re,toggleDetail:ce,detailLogItemToggle:ie,detailLogsToggle:fe,detailProcessToggle:Ce,detailReferencesToggle:ee,detailReferenceItemToggle:ne,detailTagsToggle:X,detailWarningsToggle:te,detailStackTracesToggle:ae}=F(z.dataFrames[0]),{removeHoverIndentGuideId:_,addHoverIndentGuideId:ve,hoverIndentGuideIds:Ve}=W(),{viewRange:it,updateViewRangeTime:rt,updateNextViewRangeTime:pe}=U(),{expandOne:Ie,collapseOne:We,childrenToggle:Je,collapseAll:He,childrenHiddenIDs:Ae,expandAll:et}=A(),_e=(0,f.wW)(N),[Se,Fe]=(0,n.useState)(.25),[Xe,Qe]=Q({refId:z.dataFrames[0]?.refId,exploreId:z.exploreId,datasource:j,splitOpenFn:z.splitOpenFn}),ct=(0,n.useMemo)(()=>({childrenHiddenIDs:Ae,detailStates:re,hoverIndentGuideIds:Ve,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:Se,traceID:z.traceProp?.traceID}),[Ae,re,Ve,Se,z.traceProp?.traceID]),ht=(0,o.ak)().getInstanceSettings(j?.name),ft=(0,c.p)(ht?.jsonData),Re=ht?.jsonData?.tracesToMetrics,nt=ht?.jsonData,le=(0,n.useMemo)(()=>a({splitOpenFn:z.splitOpenFn,traceToLogsOptions:ft,traceToMetricsOptions:Re,dataFrame:z.dataFrames[0],createFocusSpanLink:Qe,trace:k}),[z.splitOpenFn,ft,Re,z.dataFrames,Qe,k]),Pe=(0,r.useSelector)(Le=>(0,m.Z)(Le.user)),Oe=j?j?.type:"unknown";return n.createElement(n.Fragment,null,z.dataFrames?.length&&k?n.createElement(n.Fragment,null,s.v.featureToggles.newTraceView?n.createElement(d.NewTracePageHeader,{trace:k,updateNextViewRangeTime:pe,updateViewRangeTime:rt,viewRange:it,timeZone:Pe}):n.createElement(d.TracePageHeader,{trace:k,updateNextViewRangeTime:pe,updateViewRangeTime:rt,viewRange:it,timeZone:Pe}),n.createElement(d.TraceTimelineViewer,{registerAccessors:S,scrollToFirstVisibleSpan:S,findMatchesIDs:G,trace:k,datasourceType:Oe,spanBarOptions:nt?.spanBar,traceTimeline:ct,updateNextViewRangeTime:pe,updateViewRangeTime:rt,viewRange:it,timeZone:Pe,setSpanNameColumnWidth:Fe,collapseAll:He,collapseOne:We,expandAll:et,expandOne:Ie,childrenToggle:Je,clearShouldScrollToFirstUiFindMatch:S,detailLogItemToggle:ie,detailLogsToggle:fe,detailWarningsToggle:te,detailStackTracesToggle:ae,detailReferencesToggle:ee,detailReferenceItemToggle:ne,detailProcessToggle:Ce,detailTagsToggle:X,detailToggle:ce,setTrace:S,addHoverIndentGuideId:ve,removeHoverIndentGuideId:_,linksGetter:()=>[],uiFind:z.search,createSpanLink:le,scrollElement:z.scrollElement,focusedSpanId:Xe,focusedSpanIdForSearch:z.focusedSpanIdForSearch,createFocusSpanLink:Qe,topOfViewRef:de,topOfViewRefType:ge})):n.createElement("div",{className:_e.noDataMsg},"No data"))}function Q(z){const G=(0,r.useSelector)(ce=>ce.explore[z.exploreId]?.panelsState.trace),k=G?.spanId,j=(0,r.useDispatch)(),de=ce=>j((0,u.km)(z.exploreId,"trace",{...G,spanId:ce})),ge=(0,r.useSelector)(ce=>ce.explore[z.exploreId]?.queries.find(ie=>ie.refId===z.refId));return[k,(ce,ie)=>{const fe={title:"Deep link to this span",url:"",internal:{datasourceUid:z.datasource?.uid,datasourceName:z.datasource?.name,query:{...ge,query:ce},panelsState:{trace:{spanId:ie}}}},Ce=ge?.queryType==="traceId"&&ge.query===ce;return(0,l._)({link:fe,internalLink:fe.internal,scopedVars:{},range:{},field:{},onClickFn:Ce?()=>de(k===ie?void 0:ie):z.splitOpenFn?()=>z.splitOpenFn({datasourceUid:z.datasource?.uid,query:{...ge,query:ce},panelsState:{trace:{spanId:ie}}}):void 0,replaceVariables:(0,i.J)().replace.bind((0,i.J)())})}]}},99746:(Z,O,e)=>{"use strict";e.d(O,{h:()=>n});var t=e(28550);function n(l,s,i){if(l.isLight)return s;{if(i){const o=(0,t.Z)(s);return t.Z.mostReadable(i,[o.clone().lighten(25),o.clone().lighten(10),o,o.clone().darken(10),o.clone().darken(25)],{includeFallbackColors:!1}).toHex8String()}const f=(0,t.Z)(s).toHsl();f.l=1-f.l;const c=(0,t.Z)(f);return c.isLight()?c.darken(5).toHex8String():c.lighten(5).toHex8String()}}},72169:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>p});var t=e(9892),n=e(9085),l=e.n(n),s=e(68404),i=e(41818),f=e(35645),c=e(72648),o=e(31403),m=e(8180),r=e(46967);class u extends s.PureComponent{constructor(){super(...arguments),this.clearUiFind=()=>{this.props.onChange("")}}render(){const{allowClear:h,inputProps:a,value:v}=this.props,x=s.createElement(s.Fragment,null,a.suffix,h&&v&&v.length&&s.createElement(m.h,{name:"times",onClick:this.clearUiFind}));return s.createElement(r.I,{placeholder:"Find...",...a,onChange:y=>this.props.onChange(y.currentTarget.value),suffix:x,value:v})}}u.defaultProps={inputProps:{},trackFindFunction:void 0,value:void 0};var d=e(42413);const g=E=>({TracePageSearchBar:t.css`
      label: TracePageSearchBar;
      float: right;
      position: absolute;
      top: 0;
      right: 0;
      z-index: ${E.zIndex.navbarFixed};
      background: ${E.colors.background.primary};
      margin-bottom: -48px;
      padding: 8px;
      margin-right: 2px;
      border-radius: ${E.shape.radius.default};
      box-shadow: ${E.shadows.z2};
    `,TracePageSearchBarBar:t.css`
      label: TracePageSearchBarBar;
      max-width: 20rem;
      transition: max-width 0.5s;
      &:focus-within {
        max-width: 100%;
      }
    `,TracePageSearchBarSuffix:t.css`
      label: TracePageSearchBarSuffix;
      opacity: 0.6;
    `,TracePageSearchBarBtn:t.css`
      label: TracePageSearchBarBtn;
      transition: 0.2s;
      margin-left: 8px;
    `,TracePageSearchBarBtnDisabled:t.css`
      label: TracePageSearchBarBtnDisabled;
      opacity: 0.5;
    `,TracePageSearchBarLocateBtn:t.css`
      label: TracePageSearchBarLocateBtn;
      padding: 1px 8px 4px;
    `}),p=(0,s.memo)(function(h){const{navigable:a,setSearch:v,searchValue:x,searchBarSuffix:y,spanFindMatches:C,focusedSpanIdForSearch:P,setSearchBarSuffix:D,setFocusedSpanIdForSearch:M,datasourceType:b}=h,R=(0,c.wW)(g),B=x?s.createElement("span",{className:R.TracePageSearchBarSuffix,"aria-label":"Search bar suffix"},y):null,w=l()(R.TracePageSearchBarBtn,{[R.TracePageSearchBarBtnDisabled]:!x}),A={className:l()(R.TracePageSearchBarBar,d.A4),name:"search",suffix:B},I=U=>{M(""),D(""),v(U)},F=()=>{(0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:b,grafana_version:f.v.buildInfo.version,direction:"next"});const U=Array.from(C),N=U.indexOf(P)?U.indexOf(P):0;if(N===-1||N===U.length-1){M(U[0]),D(W(1));return}M(U[N+1]),D(W(N+2))},K=()=>{(0,i.ff)("grafana_traces_trace_view_find_next_prev_clicked",{datasourceType:b,grafana_version:f.v.buildInfo.version,direction:"prev"});const U=Array.from(C),N=U.indexOf(P)?U.indexOf(P):0;if(N===-1||N===0){M(U[U.length-1]),D(W(U.length));return}M(U[N-1]),D(W(N))},W=U=>C?.size&&C?.size>0?U+" of "+C?.size:"";return s.createElement("div",{className:R.TracePageSearchBar},s.createElement("span",{className:d.NY,style:{display:"flex"}},s.createElement(u,{onChange:I,value:x,inputProps:A,allowClear:!0}),s.createElement(s.Fragment,null,a&&s.createElement(s.Fragment,null,s.createElement(o.zx,{className:w,variant:"secondary",disabled:!x,type:"button",icon:"arrow-down","aria-label":"Next results button",onClick:F}),s.createElement(o.zx,{className:w,variant:"secondary",disabled:!x,type:"button",icon:"arrow-up","aria-label":"Prev results button",onClick:K})))))})},55478:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>m});var t=e(9892),n=e(9085),l=e.n(n),s=e(68404),i=e(72648),f=e(99746),c=e(5861);const o=r=>({Ticks:t.css`
      label: Ticks;
      pointer-events: none;
    `,TicksTick:t.css`
      label: TicksTick;
      position: absolute;
      height: 100%;
      width: 1px;
      background: ${(0,f.h)(r,"#d8d8d8")};
      &:last-child {
        width: 0;
      }
    `,TicksTickLabel:t.css`
      label: TicksTickLabel;
      left: 0.25rem;
      position: absolute;
    `,TicksTickLabelEndAnchor:t.css`
      label: TicksTickLabelEndAnchor;
      left: initial;
      right: 0.25rem;
    `});function m(r){const{endTime:u,numTicks:d,showLabels:g,startTime:p}=r;let E;if(g){E=[];const v=(u||0)-(p||0);for(let x=0;x<d;x++){const y=(p||0)+x/(d-1)*v;E.push((0,c.LU)(y))}}const h=(0,i.wW)(o),a=[];for(let v=0;v<d;v++){const x=v/(d-1);a.push(s.createElement("div",{"data-testid":"TicksID",key:x,className:h.TicksTick,style:{left:`${x*100}%`}},E&&s.createElement("span",{className:l()(h.TicksTickLabel,{[h.TicksTickLabelEndAnchor]:x>=1})},E[v])))}return s.createElement("div",{className:h.Ticks},a)}m.defaultProps={endTime:null,showLabels:null,startTime:null}},93804:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(9892),n=e(9085),l=e.n(n),s=e(68404),i=e(72648),f=e(42413);const c=()=>({flexRow:t.css`
      display: flex;
      flex: 0 1 auto;
      flex-direction: row;
    `});function o(r){const{children:u,className:d="",...g}=r,p=(0,i.wW)(c);return s.createElement("div",{className:l()(p.flexRow,d),...g},u)}o.defaultProps={className:""};function m(r){const{children:u,className:d="",width:g,style:p,...E}=r,h=`${g*100}%`,a={...p,flexBasis:h,maxWidth:h};return s.createElement("div",{className:l()(f.WW,d),style:a,"data-testid":"TimelineRowCell",...E},u)}m.defaultProps={className:"",style:{}},o.Cell=m},93183:(Z,O,e)=>{"use strict";e.d(O,{l4:()=>Ke,ZP:()=>Rn});var t=e(9892),n=e(82897),l=e(58635),s=e(68404),i=e(41818),f=e(35645),c=e(7804),o=e(64319),m=e(72648);const r="peer.service";var u=e(9096);class d{constructor(At){this.ys=[],this.heights=[],this.bufferLen=At,this.dataLen=-1,this.lastI=-1}profileData(At){At!==this.dataLen&&(this.dataLen=At,this.ys.length=At,this.heights.length=At,this.lastI>=At&&(this.lastI=At-1))}calcHeights(At,Wt,Qt){Qt!=null&&(this.lastI=Qt);let jt=At+this.bufferLen;if(jt<=this.lastI)return;jt>=this.heights.length&&(jt=this.heights.length-1);let Xt=this.lastI;for(this.lastI===-1&&(Xt=0,this.ys[0]=0);Xt<=jt;){const tn=this.heights[Xt]=Wt(Xt);this.ys[Xt+1]=this.ys[Xt]+tn,Xt++}this.lastI=jt}calcYs(At,Wt){for(;(this.ys[this.lastI]==null||At>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,Wt)}confirmHeight(At,Wt){let Qt=At;if(Qt>this.lastI){this.calcHeights(Qt,Wt);return}const jt=Wt(Qt);if(jt===this.heights[Qt])return;const Xt=jt-this.heights[Qt];for(this.heights[Qt]=jt;++Qt<=this.lastI;)this.ys[Qt]+=Xt;this.ys[this.lastI+1]!=null&&(this.ys[this.lastI+1]+=Xt)}findFloorIndex(At,Wt){this.calcYs(At,Wt);let Qt=0,jt=this.lastI;if(this.ys.length<2||At<this.ys[1])return 0;if(At>this.ys[jt])return jt;let Xt;for(;Qt<jt;)if(Xt=Qt+.5*(jt-Qt)|0,At>this.ys[Xt]){if(At<=this.ys[Xt+1])return Xt;Qt=Xt}else if(At<this.ys[Xt]){if(At>=this.ys[Xt-1])return Xt-1;jt=Xt}else return Xt;throw new Error(`unable to find floor index for y=${At}`)}getRowPosition(At,Wt){return this.confirmHeight(At,Wt),{height:this.heights[At],y:this.ys[At]}}getEstimatedHeight(){const At=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?At|0:At/(this.lastI+1)*this.heights.length|0}}const g=100;class p extends s.Component{constructor(At){super(At),this.getViewHeight=()=>this._viewHeight,this.getBottomVisibleIndex=()=>{const Wt=this._scrollTop+this._viewHeight;return this._yPositions.findFloorIndex(Wt,this._getHeight)},this.getTopVisibleIndex=()=>this._yPositions.findFloorIndex(this._scrollTop,this._getHeight),this.getRowPosition=Wt=>this._yPositions.getRowPosition(Wt,this._getHeight),this.scrollToIndex=Wt=>{const{scrollElement:Qt}=this.props,jt=Qt?.getBoundingClientRect().top||0,tn=(Qt?.scrollTop||0)+(this._itemHolderElm?.getBoundingClientRect().top||0)-jt,on=this.getRowPosition(Wt).y;this.props.scrollElement?.scrollTo({top:on+tn-80})},this._onScroll=()=>{this._isScrolledOrResized||(this._isScrolledOrResized=!0,window.requestAnimationFrame(this._positionList))},this._positionList=()=>{if(this._isScrolledOrResized=!1,!this._wrapperElm)return;this._calcViewIndexes();const Wt=this.props.viewBufferMin>this._startIndex?0:this._startIndex-this.props.viewBufferMin,Qt=this.props.viewBufferMin<this.props.dataLength-this._endIndex?this._endIndex+this.props.viewBufferMin:this.props.dataLength-1;(Wt<this._startIndexDrawn||Qt>this._endIndexDrawn)&&this.forceUpdate()},this._initWrapper=Wt=>{this.props.windowScroller&&(this._wrapperElm=Wt,Wt&&(this._viewHeight=Wt.clientHeight))},this._initItemHolder=Wt=>{this._itemHolderElm=Wt,this._scanItemHeights()},this._scanItemHeights=()=>{const Wt=this.props.getIndexFromKey;if(!this._itemHolderElm)return;let Qt=null,jt=null,Xt=!1;const tn=this._itemHolderElm.childNodes,on=tn.length;for(let dn=0;dn<on;dn++){const $t=tn[dn],qt=$t.getAttribute("data-item-key");if(!qt){console.warn("itemKey not found");continue}const nn=($t.firstElementChild||$t).clientHeight,un=this._knownHeights.get(qt);nn!==un&&(this._knownHeights.set(qt,nn),Xt?jt=qt:(Xt=!0,Qt=jt=qt))}if(Qt!=null&&jt!=null){const dn=Wt(Qt),$t=jt===Qt?dn:Wt(jt);this._yPositions.calcHeights($t,this._getHeight,dn),this.forceUpdate()}},this._getHeight=Wt=>{const Qt=this.props.getKeyFromIndex(Wt),jt=this._knownHeights.get(Qt);return jt!=null&&jt===jt?jt:this.props.itemHeightGetter(Wt,Qt)},this._yPositions=new d(200),this._knownHeights=new Map,this._startIndexDrawn=2**20,this._endIndexDrawn=-(2**20),this._startIndex=0,this._endIndex=0,this._viewHeight=-1,this._scrollTop=-1,this._isScrolledOrResized=!1,this._htmlTopOffset=-1,this._windowScrollListenerAdded=!1,this._htmlElm=document.documentElement,this._wrapperElm=void 0,this._itemHolderElm=void 0}componentDidMount(){if(this.props.windowScroller){if(this._wrapperElm){const{top:At}=this._wrapperElm.getBoundingClientRect();this._htmlTopOffset=At+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll)}componentDidUpdate(At){this._itemHolderElm&&this._scanItemHeights(),!this.props.windowScroller&&At.scrollElement!==this.props.scrollElement&&(At.scrollElement?.removeEventListener("scroll",this._onScroll),this._wrapperElm=this.props.scrollElement,this._wrapperElm?.addEventListener("scroll",this._onScroll))}componentWillUnmount(){this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):this._wrapperElm?.removeEventListener("scroll",this._onScroll)}_isViewChanged(){if(!this._wrapperElm)return!1;const At=this.props.windowScroller,Wt=At?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,Qt=At?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return Wt!==this._viewHeight||Qt!==this._scrollTop}_calcViewIndexes(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm){this._viewHeight=-1,this._startIndex=0,this._endIndex=0;return}this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}const Wt=this._scrollTop,Qt=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(Wt,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(Qt,this._getHeight)}render(){const{dataLength:At,getKeyFromIndex:Wt,initialDraw:Qt=g,itemRenderer:jt,viewBuffer:Xt,viewBufferMin:tn}=this.props,on=this._getHeight,dn=[];let $t,qt;if(this._yPositions.profileData(At),!this._wrapperElm)$t=0,qt=(Qt<At?Qt:At)-1;else{this._isViewChanged()&&this._calcViewIndexes();const un=tn>this._startIndex?0:this._startIndex-tn,En=tn<At-this._endIndex?this._endIndex+tn:At-1;un<this._startIndexDrawn||En>this._endIndexDrawn?($t=Xt>this._startIndex?0:this._startIndex-Xt,qt=this._endIndex+Xt,qt>=At&&(qt=At-1)):($t=this._startIndexDrawn,qt=this._endIndexDrawn>At-1?At-1:this._endIndexDrawn)}this._yPositions.calcHeights(qt,on,$t||-1),this._startIndexDrawn=$t,this._endIndexDrawn=qt,dn.length=qt-$t+1;for(let un=$t;un<=qt;un++){const{y:En,height:cn}=this._yPositions.getRowPosition(un,on),wn={height:cn,top:En,position:"absolute"},Gn=Wt(un),Nn={"data-item-key":Gn};dn.push(jt(Gn,wn,un,Nn))}const Vt={style:{position:"relative"},ref:this._initWrapper};this.props.windowScroller||(Vt.onScroll=this._onScroll,Vt.style.height="100%",Vt.style.overflowY="auto");const nn={position:"relative",height:this._yPositions.getEstimatedHeight()};return s.createElement("div",{...Vt,"data-testid":"ListView"},s.createElement("div",{style:nn},s.createElement("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder},dn)))}}p.defaultProps={initialDraw:g,itemsWrapperClassName:"",windowScroller:!1};var E=e(9085),h=e.n(E),a=e(39904),v=e(99746),x=e(52541),y=e(68183),C=e(39604),P=e(56921);function D({children:St,content:At,overlayClassName:Wt}){const Qt=(0,s.useRef)(null);return s.createElement(C.D,{content:At,hideAfter:300},(jt,Xt,tn)=>s.createElement(s.Fragment,null,Qt.current&&s.createElement(P.J,{...tn,referenceElement:Qt.current,wrapperClassName:Wt,onMouseLeave:Xt,onMouseEnter:jt}),s.cloneElement(St,{ref:Qt,onMouseEnter:jt,onMouseLeave:Xt})))}var M=e(42413),b=e(5861);const R="label";var B=e(6554),w=e(31403);const A=()=>({CopyIcon:t.css`
      background-color: transparent;
      border: none;
      color: inherit;
      height: 100%;
      overflow: hidden;
      &:focus {
        background-color: rgba(255, 255, 255, 0.25);
        color: inherit;
      }
    `});function I(St){const At=(0,m.wW)(A),[Wt,Qt]=(0,s.useState)(!1),jt=()=>{navigator.clipboard.writeText(St.copyText),Qt(!0)};return s.createElement(B.u,{content:Wt?"Copied":St.tooltipTitle},s.createElement(w.zx,{className:h()(At.CopyIcon),type:"button",icon:St.icon,onClick:jt}))}I.defaultProps={icon:"copy",className:void 0};var F=e(23932),K=e.n(F);const W="copyIcon",U=St=>({KeyValueTable:t.css`
      label: KeyValueTable;
      background: ${(0,v.h)(St,"#fff")};
      border: 1px solid ${(0,v.h)(St,"#ddd")};
      margin-bottom: 0.5rem;
      max-height: 450px;
      overflow: auto;
    `,body:t.css`
      label: body;
      vertical-align: baseline;
    `,row:t.css`
      label: row;
      & > td {
        padding: 0rem 0.5rem;
        height: 30px;
      }
      &:nth-child(2n) > td {
        background: ${(0,v.h)(St,"#f5f5f5")};
      }
      &:not(:hover) .${W} {
        visibility: hidden;
      }
    `,keyColumn:t.css`
      label: keyColumn;
      color: ${(0,v.h)(St,"#888")};
      white-space: pre;
      width: 125px;
    `,copyColumn:t.css`
      label: copyColumn;
      text-align: right;
    `,linkIcon:t.css`
      label: linkIcon;
      vertical-align: middle;
      font-weight: bold;
    `}),N=/^(\[|\{)/;function S(St){if(typeof St=="string"&&N.test(St))try{return JSON.parse(St)}catch{}return St}const Y=St=>s.createElement("a",{href:St.href,title:St.title,target:"_blank",rel:"noopener noreferrer"},St.children," ",s.createElement(a.J,{name:"external-link-alt"}));Y.defaultProps={title:""};function Q(St){const{data:At,linksGetter:Wt}=St,Qt=(0,m.wW)(U);return s.createElement("div",{className:h()(Qt.KeyValueTable),"data-testid":"KeyValueTable"},s.createElement("table",{className:M.K9},s.createElement("tbody",{className:Qt.body},At.map((jt,Xt)=>{const tn={__html:K()(S(jt.value))},on=s.createElement("div",{className:M.b$,dangerouslySetInnerHTML:tn}),dn=Wt?Wt(At,Xt):null;let $t;return dn&&dn.length?$t=s.createElement("div",null,s.createElement(Y,{href:dn[0].url,title:dn[0].text},on)):$t=on,s.createElement("tr",{className:Qt.row,key:`${jt.key}-${Xt}`},s.createElement("td",{className:Qt.keyColumn,"data-testid":"KeyValueTable--keyColumn"},jt.key),s.createElement("td",null,$t),s.createElement("td",{className:Qt.copyColumn},s.createElement(I,{className:W,copyText:JSON.stringify(jt,null,2),tooltipTitle:"Copy JSON"})))}))))}const z=St=>({header:t.css`
      label: header;
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,v.h)(St,"#e8e8e8")};
      }
    `,headerEmpty:t.css`
      label: headerEmpty;
      background: none;
      cursor: initial;
    `,headerHighContrast:t.css`
      label: headerHighContrast;
      &:hover {
        background: ${(0,v.h)(St,"#ddd")};
      }
    `,emptyIcon:t.css`
      label: emptyIcon;
      color: ${(0,v.h)(St,"#aaa")};
    `,summary:t.css`
      label: summary;
      display: inline;
      list-style: none;
      padding: 0;
    `,summaryItem:t.css`
      label: summaryItem;
      display: inline;
      margin-left: 0.7em;
      padding-right: 0.5rem;
      border-right: 1px solid ${(0,v.h)(St,"#ddd")};
      &:last-child {
        padding-right: 0;
        border-right: none;
      }
    `,summaryLabel:t.css`
      label: summaryLabel;
      color: ${(0,v.h)(St,"#777")};
    `,summaryDelim:t.css`
      label: summaryDelim;
      color: ${(0,v.h)(St,"#bbb")};
      padding: 0 0.2em;
    `});function G(St){const{data:At}=St,Wt=(0,m.wW)(z);return!Array.isArray(At)||!At.length?null:s.createElement("ul",{className:Wt.summary},At.map((Qt,jt)=>s.createElement("li",{className:Wt.summaryItem,key:`${Qt.key}-${jt}`},s.createElement("span",{className:Wt.summaryLabel},Qt.key),s.createElement("span",{className:Wt.summaryDelim},"="),String(Qt.value))))}G.defaultProps={data:null};function k(St){const{className:At,data:Wt,highContrast:Qt,interactive:jt,isOpen:Xt,label:tn,linksGetter:on,onToggle:dn}=St,$t=!Array.isArray(Wt)||!Wt.length,qt=(0,m.wW)(z),Vt=h()(M.Im,{[qt.emptyIcon]:$t});let nn=null,un=null;return jt&&(nn=Xt?s.createElement(a.J,{name:"angle-down",className:Vt}):s.createElement(a.J,{name:"angle-right",className:Vt}),un={"aria-checked":Xt,onClick:$t?null:dn,role:"switch"}),s.createElement("div",{className:h()(At,M.ty)},s.createElement("div",{className:h()(qt.header,{[qt.headerEmpty]:$t,[qt.headerHighContrast]:Qt&&!$t}),...un,"data-testid":"AccordianKeyValues--header"},nn,s.createElement("strong",{"data-test":R},tn,Xt||":"),!Xt&&s.createElement(G,{data:Wt})),Xt&&s.createElement(Q,{data:Wt,linksGetter:on}))}k.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const j=St=>({AccordianLogs:t.css`
      label: AccordianLogs;
      border: 1px solid ${(0,v.h)(St,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianLogsHeader:t.css`
      label: AccordianLogsHeader;
      background: ${(0,v.h)(St,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(St,"#dadada")};
      }
    `,AccordianLogsContent:t.css`
      label: AccordianLogsContent;
      background: ${(0,v.h)(St,"#f0f0f0")};
      border-top: 1px solid ${(0,v.h)(St,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianLogsFooter:t.css`
      label: AccordianLogsFooter;
      color: ${(0,v.h)(St,"#999")};
    `});function de(St){const{interactive:At,isOpen:Wt,linksGetter:Qt,logs:jt,openedItems:Xt,onItemToggle:tn,onToggle:on,timestamp:dn}=St;let $t=null,qt="span",Vt=null;At&&($t=Wt?s.createElement(a.J,{name:"angle-down",className:M.Im}):s.createElement(a.J,{name:"angle-right",className:"u-align-icon"}),qt="a",Vt={"aria-checked":Wt,onClick:on,role:"switch"});const nn=(0,m.wW)(j);return s.createElement("div",{className:nn.AccordianLogs},s.createElement(qt,{className:nn.AccordianLogsHeader,...Vt},$t," ",s.createElement("strong",null,"Events")," (",jt.length,")"),Wt&&s.createElement("div",{className:nn.AccordianLogsContent},(0,n.sortBy)(jt,"timestamp").map((un,En)=>s.createElement(k,{key:`${un.timestamp}-${En}`,className:En<jt.length-1?M.bi:null,data:un.fields||[],highContrast:!0,interactive:At,isOpen:Xt?Xt.has(un):!1,label:`${(0,b.LU)(un.timestamp-dn)}`,linksGetter:Qt,onToggle:At&&tn?()=>tn(un):null})),s.createElement("small",{className:nn.AccordianLogsFooter},"Log timestamps are relative to the start time of the full trace.")))}de.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};const ge=St=>({wrapper:t.css`
      label: wrapper;
      bottom: 0;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      overflow: hidden;
      z-index: 0;
    `,bar:t.css`
      label: bar;
      border-radius: 3px;
      min-width: 2px;
      position: absolute;
      height: 36%;
      top: 32%;
    `,rpc:t.css`
      label: rpc;
      position: absolute;
      top: 35%;
      bottom: 35%;
      z-index: 1;
    `,label:t.css`
      label: label;
      color: #aaa;
      font-size: 12px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      line-height: 1em;
      white-space: nowrap;
      padding: 0 0.5em;
      position: absolute;
    `,logMarker:t.css`
      label: logMarker;
      background-color: ${(0,v.h)(St,"#2c3235")};
      cursor: pointer;
      height: 60%;
      min-width: 1px;
      position: absolute;
      top: 20%;
      &:hover {
        background-color: ${(0,v.h)(St,"#464c54")};
      }
      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 0;
        bottom: 0;
        right: 0;
        border: 1px solid transparent;
      }
      &::after {
        left: 0;
      }
    `});function re(St){return`${(St*100).toFixed(1)}%`}function ce({viewEnd:St,viewStart:At,getViewedBounds:Wt,color:Qt,shortLabel:jt,longLabel:Xt,onClick:tn,rpc:on,traceStartTime:dn,span:$t,className:qt,labelClassName:Vt}){const[nn,un]=(0,s.useState)(jt),En=()=>un(jt),cn=()=>un(Xt),wn=(0,n.groupBy)($t.logs,Nn=>{const Wn=Wt(Nn.timestamp,Nn.timestamp).start;return re(Math.round(Wn*500)/500)}),Gn=(0,m.wW)(ge);return s.createElement("div",{className:h()(Gn.wrapper,qt),onBlur:En,onClick:tn,onFocus:cn,onMouseOut:En,onMouseOver:cn,"aria-hidden":!0,"data-testid":y.wl.components.TraceViewer.spanBar},s.createElement("div",{"aria-label":nn,className:Gn.bar,style:{background:Qt,left:re(At),width:re(St-At)}},s.createElement("div",{className:h()(Gn.label,Vt),"data-testid":"SpanBar--label"},nn)),s.createElement("div",null,Object.keys(wn).map(Nn=>s.createElement(D,{key:Nn,content:s.createElement(de,{interactive:!1,isOpen:!0,logs:wn[Nn],timestamp:dn})},s.createElement("div",{"data-testid":"SpanBar--logMarker",className:Gn.logMarker,style:{left:Nn}})))),on&&s.createElement("div",{className:Gn.rpc,style:{background:on.color,left:re(on.viewStart),width:re(on.viewEnd-on.viewStart)}}))}const ie=s.memo(ce);var fe=e(14391),Ce=e(42044),ee=e(30909);const ne=(St,At,Wt,Qt)=>s.createElement(s.Fragment,null,St.logLinks?.length?s.createElement(fe.k,{label:"Logs"},St.logLinks.map((jt,Xt)=>s.createElement(Ce.s,{key:Xt,label:"Logs for this span",onClick:jt.onClick?tn=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Qt,grafana_version:f.v.buildInfo.version,type:"log",location:"menu"}),tn?.preventDefault(),jt.onClick(tn),Wt()}:void 0,url:jt.href,className:At.menuItem}))):null,St.metricLinks?.length?s.createElement(fe.k,{label:"Metrics"},St.metricLinks.map((jt,Xt)=>s.createElement(Ce.s,{key:Xt,label:jt.title??"Metrics for this span",onClick:jt.onClick?tn=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Qt,grafana_version:f.v.buildInfo.version,type:"metric",location:"menu"}),tn?.preventDefault(),jt.onClick(tn),Wt()}:void 0,url:jt.href,className:At.menuItem}))):null,St.traceLinks?.length?s.createElement(fe.k,{label:"Traces"},St.traceLinks.map((jt,Xt)=>s.createElement(Ce.s,{key:Xt,label:jt.title??"View linked span",onClick:jt.onClick?tn=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:Qt,grafana_version:f.v.buildInfo.version,type:"trace",location:"menu"}),tn?.preventDefault(),jt.onClick(tn),Wt()}:void 0,url:jt.href,className:At.menuItem}))):null),X=({links:St,datasourceType:At})=>{const Wt=(0,m.wW)(te),[Qt,jt]=(0,s.useState)(!1),[Xt,tn]=(0,s.useState)({x:0,y:0}),on=()=>jt(!1);return s.createElement("div",{"data-testid":"SpanLinksMenu"},s.createElement("button",{onClick:dn=>{jt(!0),tn({x:dn.pageX,y:dn.pageY})},className:Wt.button},s.createElement(a.J,{name:"link",className:Wt.button})),Qt?s.createElement(ee.x,{onClose:()=>jt(!1),renderMenuItems:()=>ne(St,Wt,on,At),focusOnOpen:!0,x:Xt.x,y:Xt.y}):null)},te=()=>({button:t.css`
      background: transparent;
      border: none;
      padding: 0;
      margin: 0 3px 0 0;
    `,menuItem:t.css`
      max-width: 60ch;
      overflow: hidden;
    `});function ae(St){return(0,n.get)((0,n.find)(St.references,({span:At,refType:Wt})=>At&&At.spanID&&(Wt==="CHILD_OF"||Wt==="FOLLOWS_FROM")),"span")}function _(St){const At=[];if(!St)return At;let Wt=ae(St);for(;Wt;)At.push(Wt.spanID),Wt=ae(Wt);return At}const ve=(0,c.B)(St=>({SpanTreeOffset:t.css`
      label: SpanTreeOffset;
      color: ${(0,v.h)(St,"#000")};
      position: relative;
    `,SpanTreeOffsetParent:t.css`
      label: SpanTreeOffsetParent;
      &:hover {
        cursor: pointer;
      }
    `,indentGuide:t.css`
      label: indentGuide;
      /* The size of the indentGuide is based off of the iconWrapper */
      padding-right: calc(0.5rem + 12px);
      height: 100%;
      border-left: 3px solid transparent;
      display: inline-flex;
      &::before {
        content: '';
        padding-left: 1px;
        background-color: ${(0,v.h)(St,"lightgrey")};
      }
    `,indentGuideActive:t.css`
      label: indentGuideActive;
      border-color: ${(0,v.h)(St,"darkgrey")};
      &::before {
        background-color: transparent;
      }
    `,iconWrapper:t.css`
      label: iconWrapper;
      position: absolute;
      right: 0.25rem;
    `}));class Ve extends s.PureComponent{constructor(At){super(At),this.handleMouseLeave=(Wt,Qt)=>{(!(Wt.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Wt,"relatedTarget.dataset.ancestorId")!==Qt)&&this.props.removeHoverIndentGuideId(Qt)},this.handleMouseEnter=(Wt,Qt)=>{(!(Wt.relatedTarget instanceof HTMLSpanElement)||(0,n.get)(Wt,"relatedTarget.dataset.ancestorId")!==Qt)&&this.props.addHoverIndentGuideId(Qt)},this.ancestorIds=_(At.span),this.ancestorIds.push("root"),this.ancestorIds.reverse()}render(){const{childrenVisible:At,onClick:Wt,showChildrenIcon:Qt,span:jt,theme:Xt}=this.props,{hasChildren:tn,spanID:on}=jt,dn=tn?{onClick:Wt,role:"switch","aria-checked":At}:null,$t=Qt&&tn&&(At?s.createElement(a.J,{name:"angle-down","data-testid":"icon-arrow-down"}):s.createElement(a.J,{name:"angle-right","data-testid":"icon-arrow-right"})),qt=ve(Xt);return s.createElement("span",{className:h()(qt.SpanTreeOffset,{[qt.SpanTreeOffsetParent]:tn}),...dn},this.ancestorIds.map(Vt=>s.createElement("span",{key:Vt,className:h()(qt.indentGuide,{[qt.indentGuideActive]:this.props.hoverIndentGuideIds.has(Vt)}),"data-ancestor-id":Vt,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:nn=>this.handleMouseEnter(nn,Vt),onMouseLeave:nn=>this.handleMouseLeave(nn,Vt)})),$t&&s.createElement("span",{className:qt.iconWrapper,onMouseEnter:Vt=>this.handleMouseEnter(Vt,on),onMouseLeave:Vt=>this.handleMouseLeave(Vt,on),"data-testid":"icon-wrapper"},$t))}}Ve.displayName="UnthemedSpanTreeOffset",Ve.defaultProps={childrenVisible:!1,showChildrenIcon:!0};const it=(0,m.HE)(Ve);var rt=e(55478),pe=e(93804);const Ie="spanBar",We="spanBarLabel",Je="nameWrapper",He="nameWrapperMatchingFilter",Ae="jaegerView",et="nameColumn",_e=(0,c.B)(St=>{const At={label:"flash",flash:t.keyframes`
    from {
      background-color: ${(0,v.h)(St,"#68b9ff")};
    }
    to {
      background-color: 'default';
    }
  `};return{nameWrapper:t.css`
      label: nameWrapper;
      line-height: 27px;
      overflow: hidden;
      display: flex;
    `,nameWrapperMatchingFilter:t.css`
      label: nameWrapperMatchingFilter;
      background-color: ${(0,v.h)(St,"#fffce4")};
    `,nameColumn:t.css`
      label: nameColumn;
      position: relative;
      white-space: nowrap;
      z-index: 1;
      &:hover {
        z-index: 1;
      }
    `,endpointName:t.css`
      label: endpointName;
      color: ${(0,v.h)(St,"#808080")};
    `,view:t.css`
      label: view;
      position: relative;
    `,viewExpanded:t.css`
      label: viewExpanded;
      background: ${(0,v.h)(St,"#f8f8f8")};
      outline: 1px solid ${(0,v.h)(St,"#ddd")};
    `,viewExpandedAndMatchingFilter:t.css`
      label: viewExpandedAndMatchingFilter;
      background: ${(0,v.h)(St,"#fff3d7")};
      outline: 1px solid ${(0,v.h)(St,"#ddd")};
    `,row:t.css`
      label: row;
      &:hover .${Ie} {
        opacity: 1;
      }
      &:hover .${We} {
        color: ${(0,v.h)(St,"#000")};
      }
      &:hover .${Je} {
        background: #f8f8f8;
        background: linear-gradient(
          90deg,
          ${(0,v.h)(St,"#fafafa")},
          ${(0,v.h)(St,"#f8f8f8")} 75%,
          ${(0,v.h)(St,"#eee")}
        );
      }
      &:hover .${Ae} {
        background-color: ${(0,v.h)(St,"#f5f5f5")};
        outline: 1px solid ${(0,v.h)(St,"#ddd")};
      }
    `,rowClippingLeft:t.css`
      label: rowClippingLeft;
      & .${et}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to right,
          ${(0,v.h)(St,"rgba(25, 25, 25, 0.25)")},
          ${(0,v.h)(St,"rgba(32, 32, 32, 0)")}
        );
        left: 100%;
        z-index: -1;
      }
    `,rowClippingRight:t.css`
      label: rowClippingRight;
      & .${Ae}::before {
        content: ' ';
        height: 100%;
        position: absolute;
        width: 6px;
        background-image: linear-gradient(
          to left,
          ${(0,v.h)(St,"rgba(25, 25, 25, 0.25)")},
          ${(0,v.h)(St,"rgba(25, 25, 25, 0.25)")}
        );
        right: 0%;
        z-index: 1;
      }
    `,rowExpanded:t.css`
      label: rowExpanded;
      & .${Ie} {
        opacity: 1;
      }
      & .${We} {
        color: ${(0,v.h)(St,"#000")};
      }
      & .${Je}, &:hover .${Je} {
        background: ${(0,v.h)(St,"#f0f0f0")};
        box-shadow: 0 1px 0 ${(0,v.h)(St,"#ddd")};
      }
      & .${He} {
        background: ${(0,v.h)(St,"#fff3d7")};
      }
      &:hover .${Ae} {
        background: ${(0,v.h)(St,"#eee")};
      }
    `,rowMatchingFilter:t.css`
      label: rowMatchingFilter;
      background-color: ${(0,v.h)(St,"#fffbde")};
      &:hover .${Je} {
        background: linear-gradient(
          90deg,
          ${(0,v.h)(St,"#fffbde")},
          ${(0,v.h)(St,"#fffbde")} 75%,
          ${(0,v.h)(St,"#f7f1c6")}
        );
      }
      &:hover .${Ae} {
        background-color: ${(0,v.h)(St,"#f7f1c6")};
        outline: 1px solid ${(0,v.h)(St,"#ddd")};
      }
    `,rowFocused:t.css`
      label: rowFocused;
      background-color: ${(0,v.h)(St,"#cbe7ff")};
      animation: ${At.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      & .${Je}, .${Ae}, .${He} {
        background-color: ${(0,v.h)(St,"#cbe7ff")};
        animation: ${At.flash} 1s cubic-bezier(0.12, 0, 0.39, 0);
      }
      & .${Ie} {
        opacity: 1;
      }
      & .${We} {
        color: ${(0,v.h)(St,"#000")};
      }
      &:hover .${Je}, :hover .${Ae} {
        background: ${(0,v.h)(St,"#d5ebff")};
        box-shadow: 0 1px 0 ${(0,v.h)(St,"#ddd")};
      }
    `,rowExpandedAndMatchingFilter:t.css`
      label: rowExpandedAndMatchingFilter;
      &:hover .${Ae} {
        background: ${(0,v.h)(St,"#ffeccf")};
      }
    `,name:t.css`
      label: name;
      color: ${(0,v.h)(St,"#000")};
      cursor: pointer;
      flex: 1 1 auto;
      outline: none;
      overflow-y: hidden;
      overflow-x: auto;
      margin-right: 8px;
      padding-left: 4px;
      padding-right: 0.25em;
      position: relative;
      -ms-overflow-style: none;
      scrollbar-width: none;
      &::-webkit-scrollbar {
        display: none;
      }
      &::before {
        content: ' ';
        position: absolute;
        top: 4px;
        bottom: 4px;
        left: 0;
        border-left: 4px solid;
        border-left-color: inherit;
      }
      &:focus {
        text-decoration: none;
      }
      &:hover > small {
        color: ${(0,v.h)(St,"#000")};
      }
      text-align: left;
      background: transparent;
      border: none;
    `,nameDetailExpanded:t.css`
      label: nameDetailExpanded;
      &::before {
        bottom: 0;
      }
    `,svcName:t.css`
      label: svcName;
      padding: 0 0.25rem 0 0.5rem;
      font-size: 1.05em;
    `,svcNameChildrenCollapsed:t.css`
      label: svcNameChildrenCollapsed;
      font-weight: bold;
      font-style: italic;
    `,errorIcon:t.css`
      label: errorIcon;
      border-radius: 6.5px;
      color: ${(0,v.h)(St,"#fff")};
      font-size: 0.85em;
      margin-right: 0.25rem;
      padding: 1px;
    `,rpcColorMarker:t.css`
      label: rpcColorMarker;
      border-radius: 6.5px;
      display: inline-block;
      font-size: 0.85em;
      height: 1em;
      margin-right: 0.25rem;
      padding: 1px;
      width: 1em;
      vertical-align: middle;
    `,labelRight:t.css`
      label: labelRight;
      left: 100%;
    `,labelLeft:t.css`
      label: labelLeft;
      right: 100%;
    `}});class Se extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._childrenToggle=()=>{this.props.onChildrenToggled(this.props.span.spanID)},this.getSpanBarLabel=(At,Wt,Qt)=>{const jt=Wt?.type??"";if(jt===x.Hn)return"";if(jt===""||jt===x.th)return`(${Qt})`;if(jt===x.Kg){const Xt=Wt?.tag?.trim()??"";if(Xt!==""&&At.tags){const tn=At.tags?.find(dn=>dn.key===Xt),on=At.process?.tags?.find(dn=>dn.key===Xt);if(tn)return`(${tn.value})`;if(on)return`(${on.value})`}}return""}}render(){const{className:At,color:Wt,spanBarOptions:Qt,columnDivision:jt,isChildrenExpanded:Xt,isDetailExpanded:tn,isMatchingFilter:on,isFocused:dn,numTicks:$t,rpc:qt,noInstrumentedServer:Vt,showErrorIcon:nn,getViewedBounds:un,traceStartTime:En,span:cn,hoverIndentGuideIds:wn,addHoverIndentGuideId:Gn,removeHoverIndentGuideId:Nn,clippingLeft:Wn,clippingRight:qn,theme:ga,createSpanLink:ea,datasourceType:ca}=this.props,{duration:ba,hasChildren:zn,operationName:$n,process:{serviceName:ta}}=cn,Fa=(0,b.LU)(ba),Ma=un(cn.startTime,cn.startTime+cn.duration),Oa=Ma.start,Qa=Ma.end,Qn=_e(ga),Aa=`${ta}::${$n}`;let ia,_a;Oa>1-Qa?(ia=`${Aa} | ${Fa}`,_a=Qn.labelLeft):(ia=`${Fa} | ${Aa}`,_a=Qn.labelRight);const As=va=>va?Object.values(va).reduce((Ga,Xa)=>Ga+Xa.length,0):0;return s.createElement(pe.Z,{className:h()(Qn.row,{[Qn.rowExpanded]:tn,[Qn.rowMatchingFilter]:on,[Qn.rowExpandedAndMatchingFilter]:on&&tn,[Qn.rowFocused]:dn,[Qn.rowClippingLeft]:Wn,[Qn.rowClippingRight]:qn},At)},s.createElement(pe.Z.Cell,{className:h()(Qn.nameColumn,et),width:jt},s.createElement("div",{className:h()(Qn.nameWrapper,Je,{[Qn.nameWrapperMatchingFilter]:on,nameWrapperMatchingFilter:on})},s.createElement(it,{onClick:zn?this._childrenToggle:void 0,childrenVisible:Xt,span:cn,hoverIndentGuideIds:wn,addHoverIndentGuideId:Gn,removeHoverIndentGuideId:Nn}),s.createElement("button",{type:"button",className:h()(Qn.name,{[Qn.nameDetailExpanded]:tn}),"aria-checked":tn,title:Aa,onClick:this._detailToggle,role:"switch",style:{borderColor:Wt},tabIndex:0},s.createElement("span",{className:h()(Qn.svcName,{[Qn.svcNameChildrenCollapsed]:zn&&!Xt})},nn&&s.createElement(a.J,{name:"exclamation-circle",style:{backgroundColor:cn.errorIconColor?(0,v.h)(ga,cn.errorIconColor):(0,v.h)(ga,"#db2828")},className:Qn.errorIcon}),ta," ",qt&&s.createElement("span",null,s.createElement(a.J,{name:"arrow-right"})," ",s.createElement("i",{className:Qn.rpcColorMarker,style:{background:qt.color}}),qt.serviceName),Vt&&s.createElement("span",null,s.createElement(a.J,{name:"arrow-right"})," ",s.createElement("i",{className:Qn.rpcColorMarker,style:{background:Vt.color}}),Vt.serviceName)),s.createElement("small",{className:Qn.endpointName},qt?qt.operationName:$n),s.createElement("small",{className:Qn.endpointName}," ",this.getSpanBarLabel(cn,Qt,Fa))),ea&&(()=>{const va=ea(cn),Ga=As(va);if(va&&Ga===1){const Xa=va.logLinks?.[0]??va.metricLinks?.[0]??va.traceLinks?.[0]??void 0;return Xa?s.createElement("a",{href:Xa.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:Xa.onClick?da=>{!(da.ctrlKey||da.metaKey||da.shiftKey)&&Xa.onClick&&(da.preventDefault(),Xa.onClick(da))}:void 0},Xa.content):null}else return va&&Ga>1?s.createElement(X,{links:va,datasourceType:ca}):null})())),s.createElement(pe.Z.Cell,{className:h()(Qn.view,Ae,{[Qn.viewExpanded]:tn,[Qn.viewExpandedAndMatchingFilter]:on&&tn}),"data-testid":"span-view",style:{cursor:"pointer"},width:1-jt,onClick:this._detailToggle},s.createElement(rt.Z,{numTicks:$t}),s.createElement(ie,{rpc:qt,viewStart:Oa,viewEnd:Qa,getViewedBounds:un,color:Wt,shortLabel:Fa,longLabel:ia,traceStartTime:En,span:cn,labelClassName:`${We} ${_a}`,className:Ie})))}}Se.displayName="UnthemedSpanBarRow",Se.defaultProps={className:"",rpc:null};const Fe=(0,m.HE)(Se);var Xe=e(38849),Qe=e(89719),ct=e(97379);const ht=St=>({Divider:t.css`
      background: ${(0,v.h)(St,"#ddd")};
    `,DividerVertical:t.css`
      label: DividerVertical;
      display: inline-block;
      width: 1px;
      height: 0.9em;
      margin: 0 8px;
      vertical-align: middle;
    `,DividerHorizontal:t.css`
      label: DividerHorizontal;
      display: block;
      height: 1px;
      width: 100%;
      margin: 24px 0;
      clear: both;
      vertical-align: middle;
      position: relative;
      top: -0.06em;
    `});function ft({className:St,style:At,type:Wt}){const Qt=(0,m.wW)(ht);return s.createElement("div",{style:At,className:(0,t.cx)(Qt.Divider,Wt==="horizontal"?Qt.DividerHorizontal:Qt.DividerVertical,St)})}var Re=e(82736);function nt(St){const{reference:At,children:Wt,createFocusSpanLink:Qt}=St,jt=Qt(At.traceID,At.spanID);return s.createElement("a",{href:jt.href,target:jt.target,rel:"noopener noreferrer",onClick:jt.onClick?Xt=>{Xt.preventDefault(),jt.onClick(Xt)}:void 0},Wt)}const le=St=>({AccordianReferenceItem:t.css`
      border-bottom: 1px solid ${(0,v.h)(St,"#d8d8d8")};
    `,AccordianKeyValues:t.css`
      margin-left: 10px;
    `,AccordianReferences:t.css`
      label: AccordianReferences;
      border: 1px solid ${(0,v.h)(St,"#d8d8d8")};
      position: relative;
      margin-bottom: 0.25rem;
    `,AccordianReferencesHeader:t.css`
      label: AccordianReferencesHeader;
      background: ${(0,v.h)(St,"#e4e4e4")};
      color: inherit;
      display: block;
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(St,"#dadada")};
      }
    `,AccordianReferencesContent:t.css`
      label: AccordianReferencesContent;
      background: ${(0,v.h)(St,"#f0f0f0")};
      border-top: 1px solid ${(0,v.h)(St,"#d8d8d8")};
      padding: 0.5rem 0.5rem 0.25rem 0.5rem;
    `,AccordianReferencesFooter:t.css`
      label: AccordianReferencesFooter;
      color: ${(0,v.h)(St,"#999")};
    `,ReferencesList:t.css`
      background: #fff;
      border: 1px solid #ddd;
      margin-bottom: 0.7em;
      max-height: 450px;
      overflow: auto;
    `,list:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
      background: #fff;
    `,itemContent:t.css`
      padding: 0.25rem 0.5rem;
      display: flex;
      width: 100%;
      justify-content: space-between;
    `,item:t.css`
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `,debugInfo:t.css`
      letter-spacing: 0.25px;
      margin: 0.5em 0 0;
      flex-wrap: wrap;
      display: flex;
      justify-content: flex-end;
    `,debugLabel:t.css`
      margin: 0 5px 0 5px;
      &::before {
        color: #bbb;
        content: attr(data-label);
      }
    `,serviceName:t.css`
      margin-right: 8px;
    `,title:t.css`
      display: flex;
      align-items: center;
      gap: 4px;
    `});function Pe(St){const{data:At,createFocusSpanLink:Wt,openedItems:Qt,onItemToggle:jt,interactive:Xt}=St,tn=(0,m.wW)(le);return s.createElement("div",{className:tn.AccordianReferencesContent},At.map((on,dn)=>s.createElement("div",{className:dn<At.length-1?tn.AccordianReferenceItem:void 0,key:dn},s.createElement("div",{className:tn.item,key:`${on.spanID}`},s.createElement(nt,{reference:on,createFocusSpanLink:Wt},s.createElement("span",{className:tn.itemContent},on.span?s.createElement("span",null,s.createElement("span",{className:(0,t.cx)("span-svc-name",tn.serviceName)},on.span.process.serviceName),s.createElement("small",{className:"endpoint-name"},on.span.operationName)):s.createElement("span",{className:(0,t.cx)("span-svc-name",tn.title)},"View Linked Span ",s.createElement(a.J,{name:"external-link-alt"})),s.createElement("small",{className:tn.debugInfo},s.createElement("span",{className:tn.debugLabel,"data-label":"TraceID:"},on.traceID),s.createElement("span",{className:tn.debugLabel,"data-label":"SpanID:"},on.spanID))))),!!on.tags?.length&&s.createElement("div",{className:tn.AccordianKeyValues},s.createElement(k,{className:dn<At.length-1?M.bi:null,data:on.tags||[],highContrast:!0,interactive:Xt,isOpen:Qt?Qt.has(on):!1,label:"attributes",linksGetter:null,onToggle:Xt&&jt?()=>jt(on):null})))))}const Oe=({data:St,interactive:At=!0,isOpen:Wt,onToggle:Qt,onItemToggle:jt,openedItems:Xt,createFocusSpanLink:tn})=>{const on=!Array.isArray(St)||!St.length;let dn=null,$t="span",qt=null;At&&(dn=Wt?s.createElement(a.J,{name:"angle-down",className:M.Im}):s.createElement(a.J,{name:"angle-right",className:M.Im}),$t="a",qt={"aria-checked":Wt,onClick:on?null:Qt,role:"switch"});const Vt=(0,m.wW)(le);return s.createElement("div",{className:Vt.AccordianReferences},s.createElement($t,{className:Vt.AccordianReferencesHeader,...qt},dn,s.createElement("strong",null,s.createElement("span",null,"References"))," ","(",St.length,")"),Wt&&s.createElement(Pe,{data:St,openedItems:Xt,createFocusSpanLink:tn,onItemToggle:jt,interactive:At}))},Le=s.memo(Oe),Ye=()=>({TextList:t.css`
      max-height: 450px;
      overflow: auto;
    `,List:t.css`
      width: 100%;
      list-style: none;
      padding: 0;
      margin: 0;
    `,item:t.css`
      padding: 0.25rem 0.5rem;
      vertical-align: top;
      &:nth-child(2n) {
        background: #f5f5f5;
      }
    `});function be(St){const{data:At}=St,Wt=(0,m.wW)(Ye);return s.createElement("div",{className:h()(Wt.TextList),"data-testid":"TextList"},s.createElement("ul",{className:Wt.List},At.map((Qt,jt)=>s.createElement("li",{className:Wt.item,key:`${jt}`},Qt))))}const Te=St=>({header:t.css`
      cursor: pointer;
      overflow: hidden;
      padding: 0.25em 0.1em;
      text-overflow: ellipsis;
      white-space: nowrap;
      &:hover {
        background: ${(0,v.h)(St,"#e8e8e8")};
      }
    `});function me({data:St}){return s.createElement(be,{data:St})}function he(St){const{className:At,data:Wt,headerClassName:Qt,interactive:jt,isOpen:Xt,label:tn,onToggle:on,TextComponent:dn=me}=St,$t=!Array.isArray(Wt)||!Wt.length,qt=(0,m.wW)(z),Vt=h()(M.Im,{[qt.emptyIcon]:$t});let nn=null,un=null;jt&&(nn=Xt?s.createElement(a.J,{name:"angle-down",className:Vt}):s.createElement(a.J,{name:"angle-right",className:Vt}),un={"aria-checked":Xt,onClick:$t?null:on,role:"switch"});const En=(0,m.wW)(Te);return s.createElement("div",{className:At||""},s.createElement("div",{className:h()(En.header,Qt),...un,"data-testid":"AccordianText--header"},nn,s.createElement("strong",null,tn)," (",Wt.length,")"),Xt&&s.createElement(dn,{data:Wt}))}he.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};const De=St=>({header:t.css`
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 0 1rem;
      margin-bottom: 0.25rem;
    `,listWrapper:t.css`
      overflow: hidden;
    `,debugInfo:t.css`
      label: debugInfo;
      display: block;
      letter-spacing: 0.25px;
      margin: 0.5em 0 -0.75em;
      text-align: right;
    `,debugLabel:t.css`
      label: debugLabel;
      &::before {
        color: ${(0,v.h)(St,"#bbb")};
        content: attr(data-label);
      }
    `,debugValue:t.css`
      label: debugValue;
      background-color: inherit;
      border: none;
      color: ${(0,v.h)(St,"#888")};
      cursor: pointer;
      &:hover {
        color: ${(0,v.h)(St,"#333")};
      }
    `,AccordianWarnings:t.css`
      label: AccordianWarnings;
      background: ${(0,v.h)(St,"#fafafa")};
      border: 1px solid ${(0,v.h)(St,"#e4e4e4")};
      margin-bottom: 0.25rem;
    `,AccordianWarningsHeader:t.css`
      label: AccordianWarningsHeader;
      background: ${(0,v.h)(St,"#fff7e6")};
      padding: 0.25rem 0.5rem;
      &:hover {
        background: ${(0,v.h)(St,"#ffe7ba")};
      }
    `,AccordianWarningsHeaderOpen:t.css`
      label: AccordianWarningsHeaderOpen;
      border-bottom: 1px solid ${(0,v.h)(St,"#e8e8e8")};
    `,AccordianWarningsLabel:t.css`
      label: AccordianWarningsLabel;
      color: ${(0,v.h)(St,"#d36c08")};
    `,Textarea:t.css`
      word-break: break-all;
      white-space: pre;
    `,LinkIcon:t.css`
      font-size: 1.5em;
    `});function $e(St){const{detailState:At,linksGetter:Wt,logItemToggle:Qt,logsToggle:jt,processToggle:Xt,span:tn,tagsToggle:on,traceStartTime:dn,warningsToggle:$t,stackTracesToggle:qt,referencesToggle:Vt,referenceItemToggle:nn,createSpanLink:un,createFocusSpanLink:En,topOfViewRefType:cn,datasourceType:wn}=St,{isTagsOpen:Gn,isProcessOpen:Nn,logs:Wn,isWarningsOpen:qn,references:ga,isStackTracesOpen:ea}=At,{operationName:ca,process:ba,duration:zn,relativeStartTime:$n,startTime:ta,traceID:Fa,spanID:Ma,logs:Oa,tags:Qa,warnings:Qn,references:Aa,stackTraces:ia}=tn,{timeZone:_a}=St,As=[{key:"svc",label:"Service:",value:ba.serviceName},{key:"duration",label:"Duration:",value:(0,b.LU)(zn)},{key:"start",label:"Start Time:",value:(0,b.LU)($n)+ke(ta,_a)},...tn.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:tn.childSpanCount}]:[]],va=(0,m.wW)(De);let Ga;if(un){const da=un(tn);da?.logLinks?Ga=s.createElement(Qe.k,{link:{...da.logLinks[0],title:"Logs for this span",target:"_blank",origin:da.logLinks[0].field,onClick:as=>{(0,i.ff)("grafana_traces_trace_view_span_link_clicked",{datasourceType:wn,grafana_version:f.v.buildInfo.version,type:"log",location:"spanDetails"}),da?.logLinks?.[0].onClick?.(as)}},buttonProps:{icon:"gf-logs"}}):Ga=s.createElement(w.zx,{variant:"primary",size:"sm",icon:"gf-logs",disabled:!0,tooltip:"We did not match any variables between the link and this span. Check your configuration or this span attributes."},"Logs for this span")}const Xa=En(Fa,Ma);return s.createElement("div",{"data-testid":"span-detail-component"},s.createElement("div",{className:va.header},s.createElement("h2",{className:h()(M.h2)},ca),s.createElement("div",{className:va.listWrapper},s.createElement(Re.Z,{className:M.xb,divider:!0,items:As}))),Ga,s.createElement(ft,{className:M.im,type:"horizontal"}),s.createElement("div",null,s.createElement("div",null,s.createElement(k,{data:Qa,label:"Attributes",linksGetter:Wt,isOpen:Gn,onToggle:()=>on(Ma)}),ba.tags&&s.createElement(k,{className:M.bi,data:ba.tags,label:"Resource",linksGetter:Wt,isOpen:Nn,onToggle:()=>Xt(Ma)})),Oa&&Oa.length>0&&s.createElement(de,{linksGetter:Wt,logs:Oa,isOpen:Wn.isOpen,openedItems:Wn.openedItems,onToggle:()=>jt(Ma),onItemToggle:da=>Qt(Ma,da),timestamp:dn}),Qn&&Qn.length>0&&s.createElement(he,{className:va.AccordianWarnings,headerClassName:va.AccordianWarningsHeader,label:s.createElement("span",{className:va.AccordianWarningsLabel},"Warnings"),data:Qn,isOpen:qn,onToggle:()=>$t(Ma)}),ia&&ia.length&&s.createElement(he,{label:"Stack trace",data:ia,isOpen:ea,TextComponent:da=>{let as;return da.data?.length>1?as=da.data.map((qs,Ys)=>`StackTrace ${Ys+1}:
${qs}`).join(`
`):as=da.data?.[0],s.createElement(ct.K,{className:va.Textarea,style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:as})},onToggle:()=>qt(Ma)}),Aa&&Aa.length>0&&(Aa.length>1||Aa[0].refType!=="CHILD_OF")&&s.createElement(Le,{data:Aa,isOpen:ga.isOpen,openedItems:ga.openedItems,onToggle:()=>Vt(Ma),onItemToggle:da=>nn(Ma,da),createFocusSpanLink:En}),cn===Ke.Explore&&s.createElement("small",{className:va.debugInfo},s.createElement("a",{...Xa,onClick:da=>{Xa.onClick&&da.button===0&&(!da.currentTarget.target||da.currentTarget.target==="_self")&&!(da.metaKey||da.altKey||da.ctrlKey||da.shiftKey)&&(da.preventDefault(),Xa.onClick(da))}},s.createElement(a.J,{name:"link",className:h()(M.Im,va.LinkIcon)})),s.createElement("span",{className:va.debugLabel,"data-label":"SpanID:"})," ",Ma)))}const ke=(St,At)=>{const Wt=(0,Xe.dq)(St/1e3,{timeZone:At,defaultWithMS:!0}),Qt=Wt.split(" ");return` (${Qt[1]?Qt[1]:Wt})`},tt=(0,c.B)(St=>({expandedAccent:t.css`
      cursor: pointer;
      height: 100%;
      overflow: hidden;
      position: absolute;
      width: 100%;
      &::before {
        border-left: 4px solid;
        pointer-events: none;
        width: 1000px;
      }
      &::after {
        border-right: 1000px solid;
        border-color: inherit;
        cursor: pointer;
        opacity: 0.2;
      }

      /* border-color inherit must come AFTER other border declarations for accent */
      &::before,
      &::after {
        border-color: inherit;
        content: ' ';
        position: absolute;
        height: 100%;
      }

      &:hover::after {
        opacity: 0.35;
      }
    `,infoWrapper:t.css`
      label: infoWrapper;
      border: 1px solid ${(0,v.h)(St,"#d3d3d3")};
      border-top: 3px solid;
      padding: 0.75rem;
    `}));class Ge extends s.PureComponent{constructor(){super(...arguments),this._detailToggle=()=>{this.props.onDetailToggled(this.props.span.spanID)},this._linksGetter=(At,Wt)=>{const{linksGetter:Qt,span:jt}=this.props;return Qt(jt,At,Wt)}}render(){const{color:At,columnDivision:Wt,detailState:Qt,logItemToggle:jt,logsToggle:Xt,processToggle:tn,referenceItemToggle:on,referencesToggle:dn,warningsToggle:$t,stackTracesToggle:qt,span:Vt,timeZone:nn,tagsToggle:un,traceStartTime:En,hoverIndentGuideIds:cn,addHoverIndentGuideId:wn,removeHoverIndentGuideId:Gn,theme:Nn,createSpanLink:Wn,focusedSpanId:qn,createFocusSpanLink:ga,topOfViewRefType:ea,datasourceType:ca}=this.props,ba=tt(Nn);return s.createElement(pe.Z,null,s.createElement(pe.Z.Cell,{width:Wt,style:{overflow:"hidden"}},s.createElement(it,{span:Vt,showChildrenIcon:!1,hoverIndentGuideIds:cn,addHoverIndentGuideId:wn,removeHoverIndentGuideId:Gn}),s.createElement(w.zx,{fill:"text",onClick:this._detailToggle,className:h()(ba.expandedAccent,(0,w.gN)(Nn)),style:{borderColor:At},"data-testid":"detail-row-expanded-accent"})),s.createElement(pe.Z.Cell,{width:1-Wt},s.createElement("div",{className:ba.infoWrapper,style:{borderTopColor:At}},s.createElement($e,{detailState:Qt,linksGetter:this._linksGetter,logItemToggle:jt,logsToggle:Xt,processToggle:tn,referenceItemToggle:on,referencesToggle:dn,warningsToggle:$t,stackTracesToggle:qt,span:Vt,timeZone:nn,tagsToggle:un,traceStartTime:En,createSpanLink:Wn,focusedSpanId:qn,createFocusSpanLink:ga,topOfViewRefType:ea,datasourceType:ca}))))}}const dt=(0,m.HE)(Ge),pt=(0,c.B)(St=>{const{topOfViewRefType:At}=St,Wt=At===Ke.Explore?"fixed":"absolute";return{rowsWrapper:t.css`
      width: 100%;
    `,row:t.css`
      width: 100%;
    `,scrollToTopButton:t.css`
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 40px;
      height: 40px;
      position: ${Wt};
      bottom: 30px;
      right: 30px;
      z-index: 1;
    `}});var Ke=(St=>(St.Explore="Explore",St.Panel="Panel",St))(Ke||{});const je={bar:28,detail:161,detailWithLogs:197},ot=5;function at(St,At,Wt){if(!St)return[];let Qt=null;const jt=[];for(let Xt=0;Xt<St.length;Xt++){const tn=St[Xt],{spanID:on,depth:dn}=tn;let $t=!1;Qt!=null&&(dn>=Qt?$t=!0:Qt=null),!$t&&(At.has(on)&&(Qt=dn+1),jt.push({span:tn,isDetail:!1,spanIndex:Xt}),Wt.has(on)&&jt.push({span:tn,isDetail:!0,spanIndex:Xt}))}return jt}function xt(St){const[At,Wt]=St;return{left:At>0,right:Wt<1}}function Dt(St,At,Wt){return St?at(St.spans,At,Wt):[]}const wt=(0,l.Z)(Dt),sn=(0,l.Z)(b._h,n.isEqual),mn=(0,l.Z)(xt,n.isEqual);class Dn extends s.Component{constructor(At){super(At),this.getViewRange=()=>this.props.currentViewRangeTime,this.getSearchedSpanIDs=()=>this.props.findMatchesIDs,this.getCollapsedChildren=()=>this.props.childrenHiddenIDs,this.mapRowIndexToSpanIndex=Xt=>this.getRowStates()[Xt].spanIndex,this.mapSpanIndexToRowIndex=Xt=>{const tn=this.getRowStates().length;for(let on=0;on<tn;on++){const{spanIndex:dn}=this.getRowStates()[on];if(dn===Xt)return on}throw new Error(`unable to find row for span index: ${Xt}`)},this.setListView=Xt=>{const tn=this.listView!==Xt;this.listView=Xt,Xt&&tn&&this.props.registerAccessors(this.getAccessors())},this.getKeyFromIndex=Xt=>{const{isDetail:tn,span:on}=this.getRowStates()[Xt];return`${on.traceID}--${on.spanID}--${tn?"detail":"bar"}`},this.getIndexFromKey=Xt=>{const tn=Xt.split("--"),on=tn[0],dn=tn[1],$t=tn[2]==="detail",qt=this.getRowStates().length;for(let Vt=0;Vt<qt;Vt++){const{span:nn,isDetail:un}=this.getRowStates()[Vt];if(nn.spanID===dn&&nn.traceID===on&&un===$t)return Vt}return-1},this.getRowHeight=Xt=>{const{span:tn,isDetail:on}=this.getRowStates()[Xt];return on?Array.isArray(tn.logs)&&tn.logs.length?je.detailWithLogs:je.detail:je.bar},this.renderRow=(Xt,tn,on,dn)=>{const{isDetail:$t,span:qt,spanIndex:Vt}=this.getRowStates()[on];return $t?this.renderSpanDetailRow(qt,Xt,tn,dn):this.renderSpanBarRow(qt,Vt,Xt,tn,dn)},this.scrollToSpan=Xt=>{if(Xt==null)return;const tn=this.getRowStates().findIndex(on=>on.span.spanID===Xt);tn>=0&&this.listView?.scrollToIndex(tn)},this.scrollToTop=()=>{const{topOfViewRef:Xt,datasourceType:tn,trace:on}=this.props;Xt?.current?.scrollIntoView({behavior:"smooth"}),(0,i.ff)("grafana_traces_trace_view_scroll_to_top_clicked",{datasourceType:tn,grafana_version:f.v.buildInfo.version,numServices:on.services.length,numSpans:on.spans.length})};const{setTrace:Wt,trace:Qt,uiFind:jt}=At;Wt(Qt,jt)}componentDidMount(){this.scrollToSpan(this.props.focusedSpanId)}shouldComponentUpdate(At){let Wt;for(Wt in At)if(At[Wt]!==this.props[Wt])if(Wt==="shouldScrollToFirstUiFindMatch"){if(At[Wt])return!0}else return!0;return!1}componentDidUpdate(At){const{registerAccessors:Wt,trace:Qt}=At,{shouldScrollToFirstUiFindMatch:jt,clearShouldScrollToFirstUiFindMatch:Xt,scrollToFirstVisibleSpan:tn,registerAccessors:on,setTrace:dn,trace:$t,uiFind:qt,focusedSpanId:Vt,focusedSpanIdForSearch:nn}=this.props;Qt!==$t&&dn($t,qt),this.listView&&Wt!==on&&on(this.getAccessors()),jt&&(tn(),Xt()),Vt!==At.focusedSpanId&&this.scrollToSpan(Vt),nn!==At.focusedSpanIdForSearch&&this.scrollToSpan(nn)}getRowStates(){const{childrenHiddenIDs:At,detailStates:Wt,trace:Qt}=this.props;return wt(Qt,At,Wt)}getClipping(){const{currentViewRangeTime:At}=this.props;return mn(At)}getViewedBounds(){const{currentViewRangeTime:At,trace:Wt}=this.props,[Qt,jt]=At;return sn({min:Wt.startTime,max:Wt.endTime,viewStart:Qt,viewEnd:jt})}getAccessors(){const At=this.listView;if(!At)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:At.getViewHeight,getBottomRowIndexVisible:At.getBottomVisibleIndex,getTopRowIndexVisible:At.getTopVisibleIndex,getRowPosition:At.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}renderSpanBarRow(At,Wt,Qt,jt,Xt){const{spanID:tn}=At,{serviceName:on}=At.process,{childrenHiddenIDs:dn,childrenToggle:$t,detailStates:qt,detailToggle:Vt,findMatchesIDs:nn,spanNameColumnWidth:un,trace:En,spanBarOptions:cn,hoverIndentGuideIds:wn,addHoverIndentGuideId:Gn,removeHoverIndentGuideId:Nn,createSpanLink:Wn,focusedSpanId:qn,focusedSpanIdForSearch:ga,theme:ea,datasourceType:ca}=this.props;if(!En)return null;const ba=(0,u._K)(on,ea),zn=dn.has(tn),$n=qt.has(tn),ta=nn?nn.has(tn):!1,Fa=tn===qn||tn===ga,Ma=(0,b.yM)(At)||zn&&(0,b.Qx)(En.spans,Wt);let Oa=null;if(zn){const ia=(0,b.s2)(En.spans.slice(Wt));if(ia){const _a=this.getViewedBounds()(ia.startTime,ia.startTime+ia.duration);Oa={color:(0,u._K)(ia.process.serviceName,ea),operationName:ia.operationName,serviceName:ia.process.serviceName,viewEnd:_a.end,viewStart:_a.start}}}const Qa=At.tags.find(ia=>ia.key===r);let Qn=null;!At.hasChildren&&Qa&&(0,b.JE)(At)&&(Qn={serviceName:Qa.value,color:(0,u._K)(Qa.value,ea)});const Aa=pt(this.props);return s.createElement("div",{className:Aa.row,key:Qt,style:jt,...Xt},s.createElement(Fe,{clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:ba,spanBarOptions:cn,columnDivision:un,isChildrenExpanded:!zn,isDetailExpanded:$n,isMatchingFilter:ta,isFocused:Fa,numTicks:ot,onDetailToggled:Vt,onChildrenToggled:$t,rpc:Oa,noInstrumentedServer:Qn,showErrorIcon:Ma,getViewedBounds:this.getViewedBounds(),traceStartTime:En.startTime,span:At,hoverIndentGuideIds:wn,addHoverIndentGuideId:Gn,removeHoverIndentGuideId:Nn,createSpanLink:Wn,datasourceType:ca}))}renderSpanDetailRow(At,Wt,Qt,jt){const{spanID:Xt}=At,{serviceName:tn}=At.process,{detailLogItemToggle:on,detailLogsToggle:dn,detailProcessToggle:$t,detailReferencesToggle:qt,detailReferenceItemToggle:Vt,detailWarningsToggle:nn,detailStackTracesToggle:un,detailStates:En,detailTagsToggle:cn,detailToggle:wn,spanNameColumnWidth:Gn,trace:Nn,timeZone:Wn,hoverIndentGuideIds:qn,addHoverIndentGuideId:ga,removeHoverIndentGuideId:ea,linksGetter:ca,createSpanLink:ba,focusedSpanId:zn,createFocusSpanLink:$n,topOfViewRefType:ta,theme:Fa,datasourceType:Ma}=this.props,Oa=En.get(Xt);if(!Nn||!Oa)return null;const Qa=(0,u._K)(tn,Fa),Qn=pt(this.props);return s.createElement("div",{className:Qn.row,key:Wt,style:{...Qt,zIndex:1},...jt},s.createElement(dt,{color:Qa,columnDivision:Gn,onDetailToggled:wn,detailState:Oa,linksGetter:ca,logItemToggle:on,logsToggle:dn,processToggle:$t,referenceItemToggle:Vt,referencesToggle:qt,warningsToggle:nn,stackTracesToggle:un,span:At,timeZone:Wn,tagsToggle:cn,traceStartTime:Nn.startTime,hoverIndentGuideIds:qn,addHoverIndentGuideId:ga,removeHoverIndentGuideId:ea,createSpanLink:ba,focusedSpanId:zn,createFocusSpanLink:$n,topOfViewRefType:ta,datasourceType:Ma}))}render(){const At=pt(this.props),{scrollElement:Wt}=this.props;return s.createElement(s.Fragment,null,s.createElement(p,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:At.rowsWrapper,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:Wt}),s.createElement(o.h,{className:At.scrollToTopButton,onClick:this.scrollToTop,title:"Scroll to top",icon:"arrow-up"}))}}const Rn=(0,m.HE)(Dn)},88989:()=>{"use strict"},5861:(Z,O,e)=>{"use strict";e.d(O,{JE:()=>u,LU:()=>t.LU,Qx:()=>m,_h:()=>n,s2:()=>r,yM:()=>o});var t=e(320);function n(d){const{min:g,max:p,viewStart:E,viewEnd:h}=d,a=p-g,v=g+E*a,y=p-(1-h)*a-v;return(C,P)=>({start:(C-v)/y,end:(P-v)/y})}function l(d,g,p){return!Array.isArray(p.tags)||!p.tags.length?!1:p.tags.some(E=>E.key===d&&E.value===g)}const s=l.bind(null,"span.kind","client"),i=l.bind(null,"span.kind","server"),f=l.bind(null,"error",!0),c=l.bind(null,"error","true"),o=d=>f(d)||c(d);function m(d,g){const{depth:p}=d[g];let E=g+1;for(;E<d.length&&d[E].depth>p;E++)if(o(d[E]))return!0;return!1}function r(d){if(d.length<=1||!s(d[0]))return!1;const p=d[0].depth+1;let E=1;for(;E<d.length&&d[E].depth===p;){if(i(d[E]))return d[E];E++}return null}const u=d=>d.tags.some(({key:g,value:p})=>g==="span.kind"&&p==="client")},82736:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>o});var t=e(9892),n=e(9085),l=e.n(n),s=e(68404),i=e(72648),f=e(99746);const c=m=>r=>({LabeledList:t.css`
      label: LabeledList;
      list-style: none;
      margin: 0;
      padding: 0;
      ${m&&`
        margin-right: -8px;
        display: flex;
        flex-wrap: wrap;
        justify-content: flex-end;
      `}
    `,LabeledListItem:t.css`
      label: LabeledListItem;
      display: inline-block;
      ${m&&`
        border-right: 1px solid ${(0,f.h)(r,"#ddd")};
        padding: 0 8px;
      `}
    `,LabeledListLabel:t.css`
      label: LabeledListLabel;
      color: ${r.isLight?"#999":"#666"};
      margin-right: 0.25rem;
    `,LabeledListValue:t.css`
      label: LabeledListValue;
      margin-right: 0.55rem;
    `});function o(m){const{className:r,divider:u=!1,items:d}=m,g=(0,i.wW)(c(u));return s.createElement("ul",{className:l()(g.LabeledList,r)},d.map(({key:p,label:E,value:h})=>s.createElement("li",{className:g.LabeledListItem,key:`${p}`},s.createElement("span",{className:g.LabeledListLabel},E),s.createElement("strong",{className:g.LabeledListValue},h))))}},61966:(Z,O,e)=>{"use strict";e.d(O,{DetailState:()=>zn,NewTracePageHeader:()=>ea,SpanBarSettings:()=>ca.ZP,TracePageHeader:()=>En,TraceTimelineViewer:()=>ge,autoColor:()=>c.h,filterSpans:()=>Za,transformTraceData:()=>is});var t=e(9892),n=e(68404),l=e(41818),s=e(35645),i=e(7804),f=e(72648),c=e(99746),o=e(21710),m=e.n(o);const u={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};let d;function g(){if(d)return d;const Ze=new(m())(document.body);return d=Ze,Ze}function p(Ze){const Et=g();Object.keys(Ze).forEach(Ct=>{const Be=Ze[Ct];Be&&Et.bind(u[Ct].binding,Be)})}function E(){g().reset()}var h=e(9085),a=e.n(h),v=e(42413),x=e(55478),y=e(93804),C=e(8180);const P=()=>({TimelineCollapser:t.css`
      align-items: center;
      display: flex;
      flex: none;
      justify-content: center;
      margin-right: 0.5rem;
    `});function D(Ze){const{onExpandAll:Et,onExpandOne:Ct,onCollapseAll:Be,onCollapseOne:we}=Ze,xe=(0,f.wW)(P);return n.createElement("div",{className:xe.TimelineCollapser,"data-testid":"TimelineCollapser"},n.createElement(C.h,{tooltip:"Expand +1",size:"xl",tooltipPlacement:"top",name:"angle-down",onClick:Ct}),n.createElement(C.h,{tooltip:"Collapse +1",size:"xl",tooltipPlacement:"top",name:"angle-right",onClick:we}),n.createElement(C.h,{tooltip:"Expand All",size:"xl",tooltipPlacement:"top",name:"angle-double-down",onClick:Et}),n.createElement(C.h,{tooltip:"Collapse All",size:"xl",tooltipPlacement:"top",name:"angle-double-right",onClick:Be}))}var M=(Ze=>(Ze.DragEnd="DragEnd",Ze.DragMove="DragMove",Ze.DragStart="DragStart",Ze.MouseEnter="MouseEnter",Ze.MouseLeave="MouseLeave",Ze.MouseMove="MouseMove",Ze))(M||{});const b=M;var R=e(82897);const B=0;class w{constructor({getBounds:Et,tag:Ct,resetBoundsOnResize:Be=!0,...we}){this.resetBounds=()=>{this._bounds=void 0},this._handleMinorMouseEvent=xe=>{const{button:yt,clientX:Rt,type:Bt}=xe;if(this._isDragging||yt!==B)return;let Kt=null,fn;if(Bt==="mouseenter")Kt=b.MouseEnter,fn=this._onMouseEnter;else if(Bt==="mouseleave")Kt=b.MouseLeave,fn=this._onMouseLeave;else if(Bt==="mousemove")Kt=b.MouseMove,fn=this._onMouseMove;else throw new Error(`invalid event type: ${Bt}`);if(!fn)return;const{value:Pn,x:gn}=this._getPosition(Rt);fn({event:xe,type:Kt,value:Pn,x:gn,manager:this,tag:this.tag})},this._handleDragEvent=xe=>{const{button:yt,clientX:Rt,type:Bt}=xe;let Kt=null,fn;if(Bt==="mousedown"){if(this._isDragging||yt!==B)return;window.addEventListener("mousemove",this._handleDragEvent),window.addEventListener("mouseup",this._handleDragEvent);const ut=(0,R.get)(document,"body.style");ut&&(ut.userSelect="none"),this._isDragging=!0,Kt=b.DragStart,fn=this._onDragStart}else if(Bt==="mousemove"){if(!this._isDragging)return;Kt=b.DragMove,fn=this._onDragMove}else if(Bt==="mouseup"){if(!this._isDragging)return;this._stopDragging(),Kt=b.DragEnd,fn=this._onDragEnd}else throw new Error(`invalid event type: ${Bt}`);if(!fn)return;const{value:Pn,x:gn}=this._getPosition(Rt);fn({event:xe,type:Kt,value:Pn,x:gn,manager:this,tag:this.tag})},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=Et,this.tag=Ct,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(Be),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=we.onMouseEnter,this._onMouseLeave=we.onMouseLeave,this._onMouseMove=we.onMouseMove,this._onDragStart=we.onDragStart,this._onDragMove=we.onDragMove,this._onDragEnd=we.onDragEnd}_getBounds(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}_getPosition(Et){const{clientXLeft:Ct,maxValue:Be,minValue:we,width:xe}=this._getBounds();let yt=Et-Ct,Rt=yt/xe;return we!=null&&Rt<we?(Rt=we,yt=we*xe):Be!=null&&Rt>Be&&(Rt=Be,yt=Be*xe),{value:Rt,x:yt}}_stopDragging(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);const Et=(0,R.get)(document,"body.style");Et&&(Et.userSelect="auto"),this._isDragging=!1}isDragging(){return this._isDragging}dispose(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}const A=(0,i.B)(()=>({TimelineColumnResizer:t.css`
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,wrapper:t.css`
      bottom: 0;
      position: absolute;
      top: 0;
    `,dragger:t.css`
      border-left: 2px solid transparent;
      cursor: col-resize;
      height: 5000px;
      margin-left: -1px;
      position: absolute;
      top: 0;
      width: 1px;
      z-index: 10;
      &:hover {
        border-left: 2px solid rgba(0, 0, 0, 0.3);
      }
      &::before {
        position: absolute;
        top: 0;
        bottom: 0;
        left: -8px;
        right: 0;
        content: ' ';
      }
    `,draggerDragging:t.css`
      background: rgba(136, 0, 136, 0.05);
      width: unset;
      &::before {
        left: -2000px;
        right: -2000px;
      }
    `,draggerDraggingLeft:t.css`
      border-left: 2px solid #808;
      border-right: 1px solid #999;
    `,draggerDraggingRight:t.css`
      border-left: 1px solid #999;
      border-right: 2px solid #808;
    `,gripIcon:t.css`
      position: absolute;
      top: 0;
      bottom: 0;
      &::before,
      &::after {
        border-right: 1px solid #ccc;
        content: ' ';
        height: 9px;
        position: absolute;
        right: 9px;
        top: 25px;
      }
      &::after {
        right: 5px;
      }
    `,gripIconDragging:t.css`
      &::before,
      &::after {
        border-right: 1px solid rgba(136, 0, 136, 0.5);
      }
    `}));class I extends n.PureComponent{constructor(Et){super(Et),this._setRootElm=Ct=>{this._rootElm=Ct},this._getDraggingBounds=()=>{if(!this._rootElm)throw new Error("invalid state");const{left:Ct,width:Be}=this._rootElm.getBoundingClientRect(),{min:we,max:xe}=this.props;return{clientXLeft:Ct,width:Be,maxValue:xe,minValue:we}},this._handleDragUpdate=({value:Ct})=>{this.setState({dragPosition:Ct})},this._handleDragEnd=({manager:Ct,value:Be})=>{Ct.resetBounds(),this.setState({dragPosition:null}),this.props.onChange(Be)},this._dragManager=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleDragEnd,onDragMove:this._handleDragUpdate,onDragStart:this._handleDragUpdate}),this._rootElm=void 0,this.state={dragPosition:null}}componentWillUnmount(){this._dragManager.dispose()}render(){let Et,Ct;const{position:Be,columnResizeHandleHeight:we}=this.props,{dragPosition:xe}=this.state;Et=`${Be*100}%`;const yt={left:Et};let Rt=!1,Bt=!1;const Kt=A();if(this._dragManager.isDragging()&&this._rootElm&&xe!=null){Rt=xe<Be,Bt=xe>Be;const Pn=`${Math.min(Be,xe)*100}%`,gn=`calc(${(1-Math.max(Be,xe))*100}% - 1px)`;Ct={left:Pn,right:gn}}else Ct=yt;Ct.height=we;const fn=Rt||Bt;return n.createElement("div",{className:Kt.TimelineColumnResizer,ref:this._setRootElm,"data-testid":"TimelineColumnResizer"},n.createElement("div",{className:a()(Kt.gripIcon,fn&&Kt.gripIconDragging),style:yt,"data-testid":"TimelineColumnResizer--gripIcon"}),n.createElement("div",{"aria-hidden":!0,className:a()(Kt.dragger,fn&&Kt.draggerDragging,Bt&&Kt.draggerDraggingRight,Rt&&Kt.draggerDraggingLeft),onMouseDown:this._dragManager.handleMouseDown,style:Ct,"data-testid":"TimelineColumnResizer--dragger"}))}}const F=(0,i.B)(()=>({TimelineViewingLayer:t.css`
      label: TimelineViewingLayer;
      bottom: 0;
      cursor: vertical-text;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
    `,TimelineViewingLayerCursorGuide:t.css`
      label: TimelineViewingLayerCursorGuide;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      width: 1px;
      background-color: red;
    `,TimelineViewingLayerDragged:t.css`
      label: TimelineViewingLayerDragged;
      position: absolute;
      top: 0;
      bottom: 0;
    `,TimelineViewingLayerDraggedDraggingLeft:t.css`
      label: TimelineViewingLayerDraggedDraggingLeft;
      border-left: 1px solid;
    `,TimelineViewingLayerDraggedDraggingRight:t.css`
      label: TimelineViewingLayerDraggedDraggingRight;
      border-right: 1px solid;
    `,TimelineViewingLayerDraggedShiftDrag:t.css`
      label: TimelineViewingLayerDraggedShiftDrag;
      background-color: rgba(68, 68, 255, 0.2);
      border-color: #44f;
    `,TimelineViewingLayerDraggedReframeDrag:t.css`
      label: TimelineViewingLayerDraggedReframeDrag;
      background-color: rgba(255, 68, 68, 0.2);
      border-color: #f44;
    `,TimelineViewingLayerFullOverlay:t.css`
      label: TimelineViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `}));function K(Ze){return Reflect.has(Ze,"isOutOfView")}function W(Ze,Et,Ct){return Ze+Ct*(Et-Ze)}function U(Ze,Et,Ct){return(Ct-Ze)/(Et-Ze)}function N(Ze,Et){let[Ct,Be]=Ze<Et?[Ze,Et]:[Et,Ze];return Ct>=1||Be<=0?{isOutOfView:!0}:(Ct<0&&(Ct=0),Be>1&&(Be=1),{isDraggingLeft:Ze>Et,left:`${Ct*100}%`,width:`${(Be-Ct)*100}%`})}function S(Ze,Et,Ct,Be,we){const xe=U(Ze,Et,Ct),yt=U(Ze,Et,Be),Rt=N(xe,yt);if(K(Rt))return null;const{isDraggingLeft:Bt,left:Kt,width:fn}=Rt,Pn=F(),gn=(0,t.cx)({[Pn.TimelineViewingLayerDraggedDraggingRight]:!Bt,[Pn.TimelineViewingLayerDraggedReframeDrag]:!we,[Pn.TimelineViewingLayerDraggedShiftDrag]:we});return n.createElement("div",{className:(0,t.cx)(Pn.TimelineViewingLayerDragged,Pn.TimelineViewingLayerDraggedDraggingLeft,gn),style:{left:Kt,width:fn},"data-testid":"Dragged"})}class Y extends n.PureComponent{constructor(Et){super(Et),this._setRoot=Ct=>{this._root=Ct},this._getDraggingBounds=()=>{if(!this._root)throw new Error("invalid state");const{left:Ct,width:Be}=this._root.getBoundingClientRect();return{clientXLeft:Ct,width:Be}},this._handleReframeMouseMove=({value:Ct})=>{const[Be,we]=this.props.viewRangeTime.current,xe=W(Be,we,Ct);this.props.updateNextViewRangeTime({cursor:xe})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:void 0})},this._handleReframeDragUpdate=({value:Ct})=>{const{current:Be,reframe:we}=this.props.viewRangeTime,[xe,yt]=Be,Rt=W(xe,yt,Ct),Kt={reframe:{anchor:we?we.anchor:Rt,shift:Rt}};this.props.updateNextViewRangeTime(Kt)},this._handleReframeDragEnd=({manager:Ct,value:Be})=>{const{current:we,reframe:xe}=this.props.viewRangeTime,[yt,Rt]=we,Bt=W(yt,Rt,Be),Kt=xe?xe.anchor:Bt,[fn,Pn]=Bt<Kt?[Bt,Kt]:[Kt,Bt];Ct.resetBounds(),this.props.updateViewRangeTime(fn,Pn,"timeline-header")},this._draggerReframe=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseLeave:this._handleReframeMouseLeave,onMouseMove:this._handleReframeMouseMove}),this._root=void 0}UNSAFE_componentWillReceiveProps(Et){const{boundsInvalidator:Ct}=this.props;Ct!==Et.boundsInvalidator&&this._draggerReframe.resetBounds()}componentWillUnmount(){this._draggerReframe.dispose()}render(){const{viewRangeTime:Et}=this.props,{current:Ct,cursor:Be,reframe:we,shiftEnd:xe,shiftStart:yt}=Et,[Rt,Bt]=Ct,Kt=we!=null||xe!=null||yt!=null;let fn;!Kt&&Be!=null&&Be>=Rt&&Be<=Bt&&(fn=`${U(Rt,Bt,Be)*100}%`);const Pn=F();return n.createElement("div",{"aria-hidden":!0,className:Pn.TimelineViewingLayer,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer"},fn!=null&&n.createElement("div",{className:Pn.TimelineViewingLayerCursorGuide,style:{left:fn},"data-testid":"TimelineViewingLayer--cursorGuide"}),we!=null&&S(Rt,Bt,we.anchor,we.shift,!1),xe!=null&&S(Rt,Bt,Bt,xe,!0),yt!=null&&S(Rt,Bt,Rt,yt,!0))}}const Q=Ze=>({TimelineHeaderRow:t.css`
      label: TimelineHeaderRow;
      background: ${(0,c.h)(Ze,"#ececec")};
      border-bottom: 1px solid ${(0,c.h)(Ze,"#ccc")};
      height: 38px;
      line-height: 38px;
      width: 100%;
      z-index: 4;
      position: relative;
    `,TimelineHeaderRowTitle:t.css`
      label: TimelineHeaderRowTitle;
      flex: 1;
      overflow: hidden;
      margin: 0;
      text-overflow: ellipsis;
      white-space: nowrap;
    `,TimelineHeaderWrapper:t.css`
      label: TimelineHeaderWrapper;
      align-items: center;
    `});function z(Ze){const{duration:Et,nameColumnWidth:Ct,numTicks:Be,onCollapseAll:we,onCollapseOne:xe,onColummWidthChange:yt,onExpandAll:Rt,onExpandOne:Bt,updateViewRangeTime:Kt,updateNextViewRangeTime:fn,viewRangeTime:Pn,columnResizeHandleHeight:gn}=Ze,[ut,Tt]=Pn.current,bt=(0,f.wW)(Q);return n.createElement(y.Z,{className:bt.TimelineHeaderRow,"data-testid":"TimelineHeaderRow"},n.createElement(y.Z.Cell,{className:a()(v.oD,v.H3,bt.TimelineHeaderWrapper),width:Ct},n.createElement("h4",{className:bt.TimelineHeaderRowTitle},"Service & Operation"),n.createElement(D,{onCollapseAll:we,onExpandAll:Rt,onCollapseOne:xe,onExpandOne:Bt})),n.createElement(y.Z.Cell,{width:1-Ct},n.createElement(Y,{boundsInvalidator:Ct,updateNextViewRangeTime:fn,updateViewRangeTime:Kt,viewRangeTime:Pn}),n.createElement(x.Z,{numTicks:Be,startTime:ut*Et,endTime:Tt*Et,showLabels:!0})),n.createElement(I,{columnResizeHandleHeight:gn,position:Ct,onChange:yt,min:.2,max:.85}))}var G=e(93183);const k=(0,i.B)(Ze=>({TraceTimelineViewer:t.css`
      label: TraceTimelineViewer;
      border-bottom: 1px solid ${(0,c.h)(Ze,"#bbb")};

      & .json-markup {
        line-height: 17px;
        font-size: 13px;
        font-family: monospace;
        white-space: pre-wrap;
      }

      & .json-markup-key {
        font-weight: bold;
      }

      & .json-markup-bool {
        color: ${(0,c.h)(Ze,"firebrick")};
      }

      & .json-markup-string {
        color: ${(0,c.h)(Ze,"teal")};
      }

      & .json-markup-null {
        color: ${(0,c.h)(Ze,"teal")};
      }

      & .json-markup-number {
        color: ${(0,c.h)(Ze,"blue","black")};
      }
    `})),j=5;class de extends n.PureComponent{constructor(Et){super(Et),this.collapseAll=()=>{this.props.collapseAll(this.props.trace.spans),(0,l.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseAll"})},this.collapseOne=()=>{this.props.collapseOne(this.props.trace.spans),(0,l.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"collapseOne"})},this.expandAll=()=>{this.props.expandAll(),(0,l.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandAll"})},this.expandOne=()=>{this.props.expandOne(this.props.trace.spans),(0,l.ff)("grafana_traces_traceID_expand_collapse_clicked",{datasourceType:this.props.datasourceType,grafana_version:s.v.buildInfo.version,type:"expandOne"})},this.state={height:0}}componentDidMount(){p({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}render(){const{setSpanNameColumnWidth:Et,updateNextViewRangeTime:Ct,updateViewRangeTime:Be,viewRange:we,traceTimeline:xe,theme:yt,topOfViewRef:Rt,focusedSpanIdForSearch:Bt,...Kt}=this.props,{trace:fn}=Kt,Pn=k(yt);return n.createElement("div",{className:Pn.TraceTimelineViewer,ref:gn=>gn&&this.setState({height:gn.getBoundingClientRect().height})},n.createElement(z,{duration:fn.duration,nameColumnWidth:xe.spanNameColumnWidth,numTicks:j,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:Et,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:we.time,updateNextViewRangeTime:Ct,updateViewRangeTime:Be,columnResizeHandleHeight:this.state.height}),n.createElement(G.ZP,{...Kt,...xe,setSpanNameColumnWidth:Et,currentViewRangeTime:we.time.current,topOfViewRef:Rt,focusedSpanIdForSearch:Bt,datasourceType:this.props.datasourceType}))}}const ge=(0,f.HE)(de);var re=e(38849),ce=e(39904);const ie=()=>({NewWindowIconLarge:t.css`
      label: NewWindowIconLarge;
      font-size: 1.5em;
    `});function fe(Ze){const{isLarge:Et,className:Ct,...Be}=Ze,we=(0,f.wW)(ie),xe=a()({[we.NewWindowIconLarge]:Et},Ct);return n.createElement(ce.J,{className:xe,name:"anchor",...Be})}fe.defaultProps={isLarge:!1};const Ce=Ze=>n.createElement("a",{href:Ze.href,title:Ze.title,target:"_blank",rel:"noopener noreferrer",className:Ze.className},Ze.children," ",n.createElement(fe,null));function ee(Ze){const{links:Et}=Ze;return n.createElement(Ce,{href:Et[0].url,title:Et[0].text,className:Ze.className})}var ne=e(82736);const X=100,te="<trace-without-root-span>",ae=()=>({BreakableText:t.css`
      label: BreakableText;
      display: inline-block;
      white-space: pre;
    `}),_=/\W*\w+\W*/g;function ve(Ze){const{className:Et,text:Ct,wordRegexp:Be=_}=Ze,we=(0,f.wW)(ae);if(!Ct)return null;const xe=[];Be.exec("");let yt=Be.exec(Ct)||[Ct];for(;yt;)xe.push(n.createElement("span",{key:`${Ct}-${xe.length}`,className:Et||we.BreakableText},yt[0])),yt=Be.exec(Ct);return xe}ve.defaultProps={wordRegexp:_};const Ve=Ze=>({TraceName:t.css`
      label: TraceName;
      font-size: ${Ze.typography.size.lg};
    `});function it(Ze){const{className:Et,traceName:Ct}=Ze,Be=(0,f.wW)(Ve),we=String(Ct||te),xe=n.createElement(ve,{text:we});return n.createElement("span",{className:a()(Be.TraceName,Et)},xe)}var rt=e(87855);const pe=Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:X,menuEnabled:!0},linkPatterns:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]});function Ie(){return pe}function We(Ze){return(0,R.get)(Ie(),Ze)}function Je(Ze){const Et=Ze.references?Ze.references.find(Ct=>Ct.refType==="CHILD_OF"):null;return Et?Et.span:null}const He=/#\{([^{}]*)\}/g;function Ae(Ze){const Et=new Set;return Ze.replace(He,(Ct,Be)=>(Et.add(Be),Ct)),Array.from(Et)}function et(Ze,Et,Ct){return Ze.replace(He,(Be,we)=>{const xe=Ct[we];return xe==null?"":Et(xe)})}function _e(Ze,Et){if(typeof Ze!="string")throw new Error("Invalid template");return{parameters:Ae(Ze),template:et.bind(null,Ze,Et)}}function Se(Ze){if(typeof Ze=="string")return Et=>Et===Ze;if(Array.isArray(Ze))return Et=>Ze.indexOf(Et)>-1;if(Ze==null)return()=>!0;throw new Error(`Invalid value: ${Ze}`)}const Fe=Ze=>Ze;function Xe(Ze){try{const Et=_e(Ze.url,encodeURIComponent),Ct=_e(Ze.text,Fe);return{object:Ze,type:Se(Ze.type),key:Se(Ze.key),value:Se(Ze.value),url:Et,text:Ct,parameters:(0,R.uniq)(Et.parameters.concat(Ct.parameters))}}catch(Et){return console.error(`Ignoring invalid link pattern: ${Et}`,Ze),null}}function Qe(Ze,Et){if(Et)return Et.find(Ct=>Ct.key===Ze)}function ct(Ze,Et){let Ct=Et;for(;Ct;){const Be=Qe(Ze,Ct.tags)||Qe(Ze,Ct.process.tags);if(Be)return Be;Ct=Je(Ct)}}function ht(Ze,Et){return Ze.template(Et)}function ft(Ze,Et){const Ct=[],Be=Object.keys(Et).filter(we=>typeof Et[we]=="string"||Et[we]==="number");return Ze?.filter(we=>we?.type("traces")).forEach(we=>{const xe={};we?.parameters.every(Rt=>{const Bt=Rt;return Be.includes(Bt)?(xe[Rt]=Et[Bt],!0):!1})&&Ct.push({url:ht(we.url,xe),text:ht(we.text,xe)})}),Ct}function Re(Ze,Et,Ct,Be){const we=Ct[Be];let xe="logs";const yt=Et.process.tags===Ct;yt&&(xe="process"),Et.tags===Ct&&(xe="tags");const Bt=[];return Ze.forEach(Kt=>{if(Kt.type(xe)&&Kt.key(we.key)&&Kt.value(we.value)){const fn={};Kt.parameters.every(gn=>{let ut=Qe(gn,Ct);return!ut&&!yt&&(ut=ct(gn,Et)),ut?(fn[gn]=ut.value,!0):(console.warn(`Skipping link pattern, missing parameter ${gn} for key ${we.key} in ${xe}.`,Kt.object),!1)})&&Bt.push({url:ht(Kt.url,fn),text:ht(Kt.text,fn)})}}),Bt}function nt(Ze,Et){return(Ct,Be,we)=>{if(Ze.length===0)return[];const xe=Be[we];let yt=Et.get(xe);return yt||(yt=Re(Ze,Ct,Be,we),Et.set(xe,yt)),yt}}const le=(We("linkPatterns")||[]).map(Xe).filter(Ze=>Boolean(Ze)),Pe=(0,rt.Z)(10)(Ze=>{const Et=[];return Ze?ft(le,Ze):Et}),Oe=nt(le,new WeakMap);function Le(Ze){let Et;const Ct=new Set(Ze.map(({spanID:Be})=>Be));for(let Be=0;Be<Ze.length;Be++){if(Ze[Be].references&&Ze[Be].references.some(({traceID:Rt,spanID:Bt})=>Rt===Ze[Be].traceID&&Ct.has(Bt)))continue;if(!Et){Et=Ze[Be];continue}const xe=Ze[Be].references&&Ze[Be].references.length||0,yt=Et.references&&Et.references.length||0;(xe<yt||xe===yt&&Ze[Be].startTime<Et.startTime)&&(Et=Ze[Be])}return Et?`${Et.process.serviceName}: ${Et.operationName}`:""}const Ye=(0,R.memoize)(Le,Ze=>Ze.length?Ze[0].traceID:0);function be(Ze){for(let Et=0;Et<Ze.length;Et++){const Ct=Ze[Et].tags.filter(xe=>xe.key==="http.method"),Be=Ze[Et].tags.filter(xe=>xe.key==="http.status_code"),we=Ze[Et].tags.filter(xe=>xe.key==="http.url"||xe.key==="http.target"||xe.key==="http.path");if(Ct.length>0||Be.length>0||we.length>0)return{method:Ct,status:Be,url:we}}return{}}const Te=(0,R.memoize)(be,Ze=>Ze.length?Ze[0].traceID:0);var me=e(320),he=e(58635),De=e(9096);const $e=.8,ke=2,tt=200,Ge=10,dt=60,pt=6;function Ke(Ze,Et,Ct,Be,we){const xe=new Map,yt=Et.length<dt?dt:Math.min(Et.length,tt),Rt=window.innerWidth*2;Ze.width=Rt,Ze.height=yt;const Bt=Math.min(pt,Math.max(ke,yt/Et.length)),Kt=yt/Et.length,fn=Ze.getContext("2d",{alpha:!1});if(fn){fn.fillStyle=we,fn.fillRect(0,0,Rt,yt);for(let Pn=0;Pn<Et.length;Pn++){const{valueWidth:gn,valueOffset:ut,serviceName:Tt}=Et[Pn],bt=ut/Ct*Rt;let Ht=gn/Ct*Rt;Ht<Ge&&(Ht=Ge);let en=xe.get(Tt);en||(en=`rgba(${Be(Tt).concat($e).join()})`,xe.set(Tt,en)),fn.fillStyle=en,fn.fillRect(bt,Pn*Kt,Ht,Bt)}}}const je=(0,i.B)(Ze=>({CanvasSpanGraph:t.css`
      label: CanvasSpanGraph;
      background: ${(0,c.h)(Ze,"#fafafa")};
      height: 60px;
      position: absolute;
      width: 100%;
    `}));class ot extends n.PureComponent{constructor(Et){super(Et),this.getColor=Ct=>(0,De.e6)(Ct,this.props.theme),this._setCanvasRef=Ct=>{this._canvasElm=Ct},this._canvasElm=void 0}componentDidMount(){this._draw()}componentDidUpdate(){this._draw()}_draw(){if(this._canvasElm){const{valueWidth:Et,items:Ct}=this.props;Ke(this._canvasElm,Ct,Et,this.getColor,(0,c.h)(this.props.theme,"#fff"))}}render(){return n.createElement("canvas",{className:je(this.props.theme).CanvasSpanGraph,ref:this._setCanvasRef,"data-testid":"CanvasSpanGraph"})}}const at=(0,f.HE)(ot),xt=()=>({TickLabels:t.css`
      label: TickLabels;
      height: 1rem;
      position: relative;
    `,TickLabelsLabel:t.css`
      label: TickLabelsLabel;
      color: #717171;
      font-size: 0.7rem;
      position: absolute;
      user-select: none;
    `});function Dt(Ze){const{numTicks:Et,duration:Ct}=Ze,Be=(0,f.wW)(xt),we=[];for(let xe=0;xe<Et+1;xe++){const yt=xe/Et,Rt=yt===1?{right:"0%"}:{left:`${yt*100}%`};we.push(n.createElement("div",{key:yt,className:Be.TickLabelsLabel,style:Rt,"data-testid":"tick"},(0,me.LU)(Ct*yt)))}return n.createElement("div",{className:Be.TickLabels,"data-testid":"TickLabels"},we)}var wt=e(31403);const sn=()=>({GraphTick:t.css`
      label: GraphTick;
      stroke: #aaa;
      stroke-width: 1px;
    `});function mn(Ze){const{numTicks:Et}=Ze,Ct=(0,f.wW)(sn),Be=[];for(let we=1;we<Et;we++){const xe=`${we/Et*100}%`;Be.push(n.createElement("line",{className:Ct.GraphTick,x1:xe,y1:"0%",x2:xe,y2:"100%",key:we/Et}))}return n.createElement("g",{"data-testid":"ticks","aria-hidden":"true"},Be)}const Dn=()=>({ScrubberHandleExpansion:a()(t.css`
        label: ScrubberHandleExpansion;
        cursor: col-resize;
        fill-opacity: 0;
        fill: #44f;
      `,"scrubber-handle-expansion"),ScrubberHandle:a()(t.css`
        label: ScrubberHandle;
        cursor: col-resize;
        fill: #555;
      `,"scrubber-handle"),ScrubberLine:a()(t.css`
        label: ScrubberLine;
        pointer-events: none;
        stroke: #555;
      `,"scrubber-line"),ScrubberDragging:t.css`
      label: ScrubberDragging;
      & .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      & .scrubber-handle {
        fill: #44f;
      }
      & > .scrubber-line {
        stroke: #44f;
      }
    `,ScrubberHandles:t.css`
      label: ScrubberHandles;
      &:hover > .scrubber-handle-expansion {
        fill-opacity: 1;
      }
      &:hover > .scrubber-handle {
        fill: #44f;
      }
      &:hover + .scrubber.line {
        stroke: #44f;
      }
    `});function Rn({isDragging:Ze,onMouseDown:Et,onMouseEnter:Ct,onMouseLeave:Be,position:we}){const xe=`${we*100}%`,yt=(0,f.wW)(Dn),Rt=a()({[yt.ScrubberDragging]:Ze});return n.createElement("g",{className:Rt,"data-testid":"scrubber-component"},n.createElement("g",{"data-testid":"scrubber-component-g",className:yt.ScrubberHandles,onMouseDown:Et,onMouseEnter:Ct,onMouseLeave:Be},n.createElement("rect",{"data-testid":"scrubber-component-rect-1",x:xe,className:yt.ScrubberHandleExpansion,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),n.createElement("rect",{"data-testid":"scrubber-component-rect-2",x:xe,className:yt.ScrubberHandle,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})),n.createElement("line",{className:yt.ScrubberLine,y2:"100%",x1:xe,x2:xe,"data-testid":"scrubber-component-line"}))}const St=(0,i.B)(Ze=>{const Et="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",Ct=t.css`
    label: ViewingLayerResetZoom;
    display: none;
    position: absolute;
    right: 1%;
    top: 10%;
    z-index: 1;
  `;return{ViewingLayer:t.css`
      label: ViewingLayer;
      cursor: vertical-text;
      position: relative;
      z-index: 1;
      &:hover > .${Et} {
        display: unset;
      }
    `,ViewingLayerGraph:t.css`
      label: ViewingLayerGraph;
      border: 1px solid ${(0,c.h)(Ze,"#999")};
      /* need !important here to overcome something from semantic UI */
      overflow: visible !important;
      position: relative;
      transform-origin: 0 0;
      width: 100%;
    `,ViewingLayerInactive:t.css`
      label: ViewingLayerInactive;
      fill: ${(0,c.h)(Ze,"rgba(214, 214, 214, 0.5)")};
    `,ViewingLayerCursorGuide:t.css`
      label: ViewingLayerCursorGuide;
      stroke: ${(0,c.h)(Ze,"#f44")};
      stroke-width: 1;
    `,ViewingLayerDraggedShift:t.css`
      label: ViewingLayerDraggedShift;
      fill-opacity: 0.2;
    `,ViewingLayerDrag:t.css`
      label: ViewingLayerDrag;
      fill: ${(0,c.h)(Ze,"#44f")};
    `,ViewingLayerFullOverlay:t.css`
      label: ViewingLayerFullOverlay;
      bottom: 0;
      cursor: col-resize;
      left: 0;
      position: fixed;
      right: 0;
      top: 0;
      user-select: none;
    `,ViewingLayerResetZoom:Ct,ViewingLayerResetZoomHoverClassName:Et}}),At={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};function Wt(Ze,Et){const[Ct,Be]=Ze<Et?[Ze,Et]:[Et,Ze];return{x:`${Ct*100}%`,width:`${(Be-Ct)*100}%`,leadingX:`${Et*100}%`}}class Qt extends n.PureComponent{constructor(Et){super(Et),this._setRoot=Ct=>{this._root=Ct},this._getDraggingBounds=Ct=>{if(!this._root)throw new Error("invalid state");const{left:Be,width:we}=this._root.getBoundingClientRect(),[xe,yt]=this.props.viewRange.time.current;let Rt=1,Bt=0;return Ct===At.SHIFT_START?Rt=yt:Ct===At.SHIFT_END&&(Bt=xe),{clientXLeft:Be,maxValue:Rt,minValue:Bt,width:we}},this._handleReframeMouseMove=({value:Ct})=>{this.props.updateNextViewRangeTime({cursor:Ct})},this._handleReframeMouseLeave=()=>{this.props.updateNextViewRangeTime({cursor:null})},this._handleReframeDragUpdate=({value:Ct})=>{const Be=Ct,{time:we}=this.props.viewRange,yt={reframe:{anchor:we.reframe?we.reframe.anchor:Be,shift:Be}};this.props.updateNextViewRangeTime(yt)},this._handleReframeDragEnd=({manager:Ct,value:Be})=>{const{time:we}=this.props.viewRange,xe=we.reframe?we.reframe.anchor:Be,[yt,Rt]=Be<xe?[Be,xe]:[xe,Be];Ct.resetBounds(),this.props.updateViewRangeTime(yt,Rt,"minimap")},this._handleScrubberEnterLeave=({type:Ct})=>{const Be=Ct===b.MouseEnter;this.setState({preventCursorLine:Be})},this._handleScrubberDragUpdate=({event:Ct,tag:Be,type:we,value:xe})=>{we===b.DragStart&&Ct.stopPropagation(),Be===At.SHIFT_START?this.props.updateNextViewRangeTime({shiftStart:xe}):Be===At.SHIFT_END&&this.props.updateNextViewRangeTime({shiftEnd:xe})},this._handleScrubberDragEnd=({manager:Ct,tag:Be,value:we})=>{const[xe,yt]=this.props.viewRange.time.current;let Rt;if(Be===At.SHIFT_START)Rt=[we,yt];else if(Be===At.SHIFT_END)Rt=[xe,we];else throw new Error("bad state");Ct.resetBounds(),this.setState({preventCursorLine:!1}),this.props.updateViewRangeTime(Rt[0],Rt[1],"minimap")},this._resetTimeZoomClickHandler=()=>{this.props.updateViewRangeTime(0,1)},this._draggerReframe=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleReframeDragEnd,onDragMove:this._handleReframeDragUpdate,onDragStart:this._handleReframeDragUpdate,onMouseMove:this._handleReframeMouseMove,onMouseLeave:this._handleReframeMouseLeave,tag:At.REFRAME}),this._draggerStart=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:At.SHIFT_START}),this._draggerEnd=new w({getBounds:this._getDraggingBounds,onDragEnd:this._handleScrubberDragEnd,onDragMove:this._handleScrubberDragUpdate,onDragStart:this._handleScrubberDragUpdate,onMouseEnter:this._handleScrubberEnterLeave,onMouseLeave:this._handleScrubberEnterLeave,tag:At.SHIFT_END}),this._root=void 0,this.state={preventCursorLine:!1}}componentWillUnmount(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}_getMarkers(Et,Ct){const Be=St(this.props.theme),we=Wt(Et,Ct);return[n.createElement("rect",{key:"fill",className:a()(Be.ViewingLayerDraggedShift,Be.ViewingLayerDrag),x:we.x,y:"0",width:we.width,height:this.props.height-2}),n.createElement("rect",{key:"edge",className:a()(Be.ViewingLayerDrag),x:we.leadingX,y:"0",width:"1",height:this.props.height-2})]}render(){const{height:Et,viewRange:Ct,numTicks:Be,theme:we}=this.props,{preventCursorLine:xe}=this.state,{current:yt,cursor:Rt,shiftStart:Bt,shiftEnd:Kt,reframe:fn}=Ct.time,Pn=Bt!=null||Kt!=null||fn!=null,[gn,ut]=yt;let Tt=0;gn&&(Tt=gn*100);let bt=100;ut&&(bt=100-ut*100);let Ht;!Pn&&Rt!=null&&!xe&&(Ht=`${Rt*100}%`);const en=St(we);return n.createElement("div",{"aria-hidden":!0,className:en.ViewingLayer,style:{height:Et}},(gn!==0||ut!==1)&&n.createElement(wt.zx,{onClick:this._resetTimeZoomClickHandler,className:a()(en.ViewingLayerResetZoom,en.ViewingLayerResetZoomHoverClassName),type:"button",variant:"secondary"},"Reset Selection"),n.createElement("svg",{height:Et,className:en.ViewingLayerGraph,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove},Tt>0&&n.createElement("rect",{x:0,y:0,height:"100%",width:`${Tt}%`,className:en.ViewingLayerInactive,"data-testid":"left-ViewingLayerInactive"}),bt>0&&n.createElement("rect",{x:`${100-bt}%`,y:0,height:"100%",width:`${bt}%`,className:en.ViewingLayerInactive,"data-testid":"right-ViewingLayerInactive"}),n.createElement(mn,{numTicks:Be}),Ht&&n.createElement("line",{className:en.ViewingLayerCursorGuide,x1:Ht,y1:"0",x2:Ht,y2:Et-2,strokeWidth:"1","data-testid":"ViewingLayerCursorGuide"}),Bt!=null&&this._getMarkers(gn,Bt),Kt!=null&&this._getMarkers(ut,Kt),n.createElement(Rn,{isDragging:Bt!=null,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:gn||0}),n.createElement(Rn,{isDragging:Kt!=null,position:ut||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),fn!=null&&this._getMarkers(fn.anchor,fn.shift)),Pn&&n.createElement("div",{className:en.ViewingLayerFullOverlay}))}}const jt=(0,f.HE)(Qt),Xt=60,tn=4;function on(Ze){return{valueOffset:Ze.relativeStartTime,valueWidth:Ze.duration,serviceName:Ze.process.serviceName}}function dn(Ze){return Ze.spans.map(on)}const $t=(0,he.Z)(dn);class qt extends n.PureComponent{render(){const{height:Et,trace:Ct,viewRange:Be,updateNextViewRangeTime:we,updateViewRangeTime:xe}=this.props;if(!Ct)return n.createElement("div",null);const yt=$t(Ct);return n.createElement("div",{className:a()(v.GL,v.H3)},n.createElement(Dt,{numTicks:tn,duration:Ct.duration}),n.createElement("div",{className:v.WW},n.createElement(at,{valueWidth:Ct.duration,items:yt}),n.createElement(jt,{viewRange:Be,numTicks:tn,height:Et||Xt,updateViewRangeTime:xe,updateNextViewRangeTime:we})))}}qt.defaultProps={height:Xt};const Vt=Ze=>({theme:Ze,TracePageHeader:t.css`
      label: TracePageHeader;
      & > :last-child {
        border-bottom: 1px solid ${(0,c.h)(Ze,"#ccc")};
      }
    `,TracePageHeaderTitleRow:t.css`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
    `,TracePageHeaderBack:t.css`
      label: TracePageHeaderBack;
      align-items: center;
      align-self: stretch;
      background-color: #fafafa;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      color: inherit;
      display: flex;
      font-size: 1.4rem;
      padding: 0 1rem;
      margin-bottom: -1px;
      &:hover {
        background-color: #f0f0f0;
        border-color: #ccc;
      }
    `,TracePageHeaderTitle:t.css`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
      margin: 0 0 0 0.3em;
      padding-bottom: 0.5em;
    `,TracePageHeaderOverviewItems:t.css`
      label: TracePageHeaderOverviewItems;
      background-color: ${(0,c.h)(Ze,"#eee")};
      border-bottom: 1px solid ${(0,c.h)(Ze,"#e4e4e4")};
      padding: 0.25rem 0.5rem !important;
    `,TracePageHeaderOverviewItemValueDetail:a()(t.css`
        label: TracePageHeaderOverviewItemValueDetail;
        color: #aaa;
      `,"trace-item-value-detail"),TracePageHeaderOverviewItemValue:t.css`
      label: TracePageHeaderOverviewItemValue;
      &:hover > .trace-item-value-detail {
        color: unset;
      }
    `,TracePageHeaderArchiveIcon:t.css`
      label: TracePageHeaderArchiveIcon;
      font-size: 1.78em;
      margin-right: 0.15em;
    `,TracePageHeaderTraceId:t.css`
      label: TracePageHeaderTraceId;
      white-space: nowrap;
    `,titleBorderBottom:t.css`
      border-bottom: 1px solid ${(0,c.h)(Ze,"#e8e8e8")};
    `}),nn=(Ze,Et,Ct)=>{const Be=(0,re.dq)(Ze.startTime/1e3,{timeZone:Et,defaultWithMS:!0}),we=Be.match(/^(.+)(:\d\d\.\d+)$/);return we?n.createElement("span",{className:Ct.TracePageHeaderOverviewItemValue},we[1],n.createElement("span",{className:Ct.TracePageHeaderOverviewItemValueDetail},we[2])):Be},un=[{key:"timestamp",label:"Trace Start:",renderer:nn},{key:"duration",label:"Duration:",renderer:Ze=>(0,me.LU)(Ze.duration)},{key:"service-count",label:"Services:",renderer:Ze=>new Set((0,R.values)(Ze.processes).map(Et=>Et.serviceName)).size},{key:"depth",label:"Depth:",renderer:Ze=>(0,R.get)((0,R.maxBy)(Ze.spans,"depth"),"depth",0)+1},{key:"span-count",label:"Total Spans:",renderer:Ze=>Ze.spans.length}];function En(Ze){const{trace:Et,updateNextViewRangeTime:Ct,updateViewRangeTime:Be,viewRange:we,timeZone:xe}=Ze,yt=(0,f.wW)(Vt),Rt=n.useMemo(()=>Et?Pe(Et):[],[Et]);if(!Et)return null;const Bt=un.map(fn=>{const{renderer:Pn,...gn}=fn;return{...gn,value:Pn(Et,xe,yt)}}),Kt=n.createElement("h1",{className:yt.TracePageHeaderTitle},n.createElement(it,{traceName:Ye(Et.spans)})," ",n.createElement("small",{className:a()(yt.TracePageHeaderTraceId,v.pQ)},Et.traceID));return n.createElement("header",{className:yt.TracePageHeader},n.createElement("div",{className:a()(yt.TracePageHeaderTitleRow,yt.titleBorderBottom)},Rt&&Rt.length>0&&n.createElement(ee,{links:Rt,className:yt.TracePageHeaderBack}),Kt),Bt&&n.createElement(ne.Z,{className:yt.TracePageHeaderOverviewItems,items:Bt}),n.createElement(qt,{trace:Et,viewRange:we,updateNextViewRangeTime:Ct,updateViewRangeTime:Be}))}var cn=e(6554),wn=e(19985);const Gn=Ze=>({ActionButton:t.css`
      label: ActionButton;
      overflow: hidden;
      position: relative;
      width: 110px;
      justify-content: center;
      &:after {
        content: '';
        background: ${Ze.colors.primary.main};
        display: block;
        position: absolute;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        transition: all 0.8s;
      }
      &:active:after {
        margin: 0;
        opacity: 0.3;
        transition: 0s;
      }
    `});function Nn(Ze){const{onClick:Et,ariaLabel:Ct,label:Be,icon:we}=Ze,xe=(0,f.wW)(Gn);return n.createElement(wt.zx,{className:xe.ActionButton,variant:"secondary",fill:"outline",type:"button",icon:we,"aria-label":Ct,onClick:Et},Be)}const Wn=()=>({TracePageActions:t.css`
      label: TracePageActions;
      display: flex;
      gap: 4px;
    `});function qn(Ze){const{traceId:Et}=Ze,Ct=(0,f.wW)(Wn),[Be,we]=(0,n.useState)(!1),xe=()=>{navigator.clipboard.writeText(Et),we(!0),setTimeout(()=>{we(!1)},5e3)};return n.createElement("div",{className:Ct.TracePageActions},n.createElement(Nn,{onClick:xe,ariaLabel:"Copy Trace ID",label:Be?"Copied!":"Trace ID",icon:"copy"}),n.createElement(Nn,{onClick:()=>alert("not implemented"),ariaLabel:"Export Trace",label:"Export",icon:"save"}))}const ga=Ze=>({titleRow:t.css`
      label: TracePageHeaderTitleRow;
      align-items: center;
      display: flex;
      padding: 0 0.5em 0 0.5em;
    `,title:t.css`
      label: TracePageHeaderTitle;
      color: inherit;
      flex: 1;
      font-size: 1.7em;
      line-height: 1em;
    `,subtitle:t.css`
      flex: 1;
      line-height: 1em;
      margin: -0.5em 0.5em 1.5em 0.5em;
    `,tag:t.css`
      margin: 0 0.5em 0 0;
    `,url:t.css`
      margin: -2.5px 0.3em;
      overflow: hidden;
      white-space: nowrap;
      text-overflow: ellipsis;
      max-width: 30%;
      display: inline-block;
    `,divider:t.css`
      margin: 0 0.75em;
    `,header:t.css`
      label: TracePageHeader;
      background-color: ${Ze.colors.background.primary};
      position: sticky;
      top: 0;
      z-index: 5;
      padding: 0.5em 0.25em 0 0.25em;
      & > :last-child {
        border-bottom: 1px solid ${(0,c.h)(Ze,"#ccc")};
      }
    `});function ea(Ze){const{trace:Et,updateNextViewRangeTime:Ct,updateViewRangeTime:Be,viewRange:we,timeZone:xe}=Ze,yt={...(0,f.wW)(Vt),...(0,f.wW)(ga)},Rt=n.useMemo(()=>Et?Pe(Et):[],[Et]);if(!Et)return null;const{method:Bt,status:Kt,url:fn}=Te(Et.spans),Pn=n.createElement("h1",{className:a()(yt.title)},n.createElement(it,{traceName:Ye(Et.spans)}),n.createElement("small",null,n.createElement("span",{className:yt.divider},"|"),(0,me.LU)(Et.duration)));let gn="green";return Kt&&Kt.length>0&&(Kt[0].value.toString().charAt(0)==="4"?gn="orange":Kt[0].value.toString().charAt(0)==="5"&&(gn="red")),n.createElement("header",{className:yt.header},n.createElement("div",{className:yt.titleRow},Rt&&Rt.length>0&&n.createElement(ee,{links:Rt,className:yt.TracePageHeaderBack}),Pn,n.createElement(qn,{traceId:Et.traceID})),n.createElement("div",{className:yt.subtitle},nn(Et,xe,yt),Bt||Kt||fn?n.createElement("span",{className:yt.divider},"|"):void 0,Bt&&Bt.length>0&&n.createElement(cn.u,{content:"http.method",interactive:!0},n.createElement("span",{className:yt.tag},n.createElement(wn.C,{text:Bt[0].value,color:"blue"}))),Kt&&Kt.length>0&&n.createElement(cn.u,{content:"http.status_code",interactive:!0},n.createElement("span",{className:yt.tag},n.createElement(wn.C,{text:Kt[0].value,color:gn}))),fn&&fn.length>0&&n.createElement(cn.u,{content:"http.url or http.target or http.path",interactive:!0},n.createElement("span",{className:yt.url},fn[0].value))),n.createElement(qt,{trace:Et,viewRange:we,updateNextViewRangeTime:Ct,updateViewRangeTime:Be}))}var ca=e(52541),ba=e(88989);class zn{constructor(Et){const{isTagsOpen:Ct,isProcessOpen:Be,isReferencesOpen:we,isWarningsOpen:xe,isStackTracesOpen:yt,logs:Rt,references:Bt}=Et||{};this.isTagsOpen=Boolean(Ct),this.isProcessOpen=Boolean(Be),this.isReferencesOpen=Boolean(we),this.isWarningsOpen=Boolean(xe),this.isStackTracesOpen=Boolean(yt),this.logs={isOpen:Boolean(Rt&&Rt.isOpen),openedItems:Rt&&Rt.openedItems?new Set(Rt.openedItems):new Set},this.references={isOpen:Boolean(Bt&&Bt.isOpen),openedItems:Bt&&Bt.openedItems?new Set(Bt.openedItems):new Set}}toggleTags(){const Et=new zn(this);return Et.isTagsOpen=!this.isTagsOpen,Et}toggleProcess(){const Et=new zn(this);return Et.isProcessOpen=!this.isProcessOpen,Et}toggleReferences(){const Et=new zn(this);return Et.references.isOpen=!this.references.isOpen,Et}toggleReferenceItem(Et){const Ct=new zn(this);return Ct.references.openedItems.has(Et)?Ct.references.openedItems.delete(Et):Ct.references.openedItems.add(Et),Ct}toggleWarnings(){const Et=new zn(this);return Et.isWarningsOpen=!this.isWarningsOpen,Et}toggleStackTraces(){const Et=new zn(this);return Et.isStackTracesOpen=!this.isStackTracesOpen,Et}toggleLogs(){const Et=new zn(this);return Et.logs.isOpen=!this.logs.isOpen,Et}toggleLogItem(Et){const Ct=new zn(this);return Ct.logs.openedItems.has(Et)?Ct.logs.openedItems.delete(Et):Ct.logs.openedItems.add(Et),Ct}}var $n=e(90158);class ta{static iterFunction(Et,Ct=0){return Be=>Et(Be.value,Be,Ct)}static searchFunction(Et){return typeof Et=="function"?Et:(Ct,Be)=>Et instanceof ta?Be===Et:Ct===Et}constructor(Et,Ct=[]){this.value=Et,this.children=Ct}get depth(){return this.children?.reduce((Et,Ct)=>Math.max(Ct.depth+1,Et),1)}get size(){let Et=0;return this.walk(()=>Et++),Et}addChild(Et){return this.children?.push(Et instanceof ta?Et:new ta(Et)),this}find(Et){if(ta.iterFunction(ta.searchFunction(Et))(this))return this;for(let Be=0;Be<this.children.length;Be++){const we=this.children[Be].find(Et);if(we)return we}return null}getPath(Et){const Ct=ta.iterFunction(ta.searchFunction(Et)),Be=(we,xe)=>{const yt=xe.concat([we]);if(Ct(we))return yt;for(let Rt=0;Rt<we.children.length;Rt++){const Bt=we.children[Rt],Kt=Be(Bt,yt);if(Kt)return Kt}return null};return Be(this,[])}walk(Et,Ct=0){const Be=[];let we=Ct;for(Be.push({node:this,depth:we});Be.length;){const xe=Be.pop();if(xe){const{node:yt,depth:Rt}=xe;Et(yt.value,yt,Rt),we=(Rt||0)+1;let Bt=yt.children.length-1;for(;Bt>=0;)Be.push({node:yt.children[Bt],depth:we}),Bt--}}}}function Fa(Ze,Et){return Ze.localeCompare(Et)}function Ma(Ze,Et){return Ze-Et}function Oa(Ze){return`sorted ${Ze===1?"ascending":"descending"}`}function Qa(Ze,Et){const{defaultDir:Ct=1}=Et;return{key:Et.name,dir:Ze.key===Et.name?-1*Ze.dir:Ct}}const Qn=Ze=>Ze.serviceName,Aa=Ze=>Ze.tags;var ia=e(27303);const _a=Ze=>Ze.spanID,As=Ze=>Ze.operationName,va=Ze=>Ze.duration,Ga=Ze=>Ze.startTime,Xa=Ze=>Ze.processID,da=Ze=>Ze.references||[],as=(0,$n.P1)((0,$n.P1)(({span:Ze})=>Ze,da),({type:Ze})=>Ze,(Ze,Et)=>Ze.find(Ct=>Ct.refType===Et)),qs=(0,$n.P1)(Ze=>as({span:Ze,type:"CHILD_OF"}),Ze=>Ze?Ze.spanID:null),Ys=Ze=>{if(!Ze.process)throw new Error(`
      you must hydrate the spans with the processes, perhaps
      using hydrateSpansWithProcesses(), before accessing a span's process
    `);return Ze.process},sr=(0,$n.P1)(Ys,Qn),er=(0,$n.P1)(({spans:Ze})=>Ze,({leftBound:Ze})=>Ze,({rightBound:Ze})=>Ze,(Ze,Et,Ct)=>Ze.filter(Be=>Ga(Be)>=Et&&Ga(Be)<=Ct)),Sr=(0,$n.P1)(({spans:Ze})=>Ze,({text:Ze})=>Ze,(Ze,Et)=>Ze.filter(Ct=>Ct?(0,ia.C)(`${sr(Ct)} ${As(Ct)}`,Et).found:!1)),rr=Ze=>Ze.traceID,Ms=Ze=>Ze.spans,js=Ze=>Ze.processes,Ls=(0,$n.P1)(Ze=>Ze.span,Ze=>Ze.processes,(Ze,Et)=>({...Ze,process:Et[Xa(Ze)]})),Ss=(0,$n.P1)(Ms,Ze=>Ze.reduce((Et,Ct)=>Et.set(_a(Ct),Ct),new Map)),Vs="__root__";function Va(Ze){const Et=new Map(Ze.spans.map(xe=>[xe.spanID,new ta(xe.spanID)])),Ct=new Map(Ze.spans.map(xe=>[xe.spanID,xe])),Be=new ta(Vs);Ze.spans.forEach(xe=>{const yt=Et.get(xe.spanID);if(Array.isArray(xe.references)&&xe.references.length){const{refType:Rt,spanID:Bt}=xe.references[0];if(Rt==="CHILD_OF"||Rt==="FOLLOWS_FROM")(Et.get(Bt)||Be).children?.push(yt);else throw new Error(`Unrecognized ref type: ${Rt}`)}else Be.children.push(yt)});const we=(xe,yt)=>{const Rt=xe?.value?Ct.get(xe.value.toString()):void 0,Bt=yt?.value?Ct.get(yt.value.toString()):void 0;return+(Rt?.startTime>Bt?.startTime)||+(Rt?.startTime===Bt?.startTime)-1};return Ze.spans.forEach(xe=>{const yt=Et.get(xe.spanID);yt.children.length>1&&yt?.children.sort(we)}),Be.children.sort(we),Be}const Or=Ze=>{const Et=Ms(Ze),Ct=js(Ze);return{...Ze,spans:Et.map(Be=>Ls({span:Be,processes:Ct}))}},hr=(0,$n.P1)(Ms,Ze=>Ze.length),Us=(0,$n.P1)(Ms,Ze=>Ze.reduce((Et,Ct)=>Et?Math.min(Et,Ga(Ct)):Ga(Ct),0)),Qs=(0,$n.P1)(Ms,Us,(Ze,Et)=>Ze.reduce((Ct,Be)=>Ct?Math.max(Ga(Be)-Et+va(Be),Ct):va(Be),0)),vr=(0,$n.P1)(Va,Ss,(Ze,Et)=>Ze.children.map(Ct=>Et.get(Ct.value)).sort((Ct,Be)=>Ma(Ga(Ct),Ga(Be)))[0]),or=(0,$n.P1)(Va,Ze=>Ze.depth-1),Ea=(0,$n.P1)((0,$n.P1)(Ze=>Ze.trace,Va),(0,$n.P1)(Ze=>Ze.span,_a),(Ze,Et)=>Ze.getPath(Et).length-1),Er=(0,$n.P1)(js,Ze=>Object.keys(Ze).reduce((Et,Ct)=>Et.add(Qn(Ze[Ct])),new Set)),zs=(0,$n.P1)(Er,Ze=>Ze.size),Bs={ms:me.Cz,s:me.Gk},ir=(0,$n.P1)(Qs,Ze=>Ze>=me.WT?Bs.s:Bs.ms),lr=(0,$n.P1)(({duration:Ze})=>Ze,({unit:Ze})=>Bs[Ze],(Ze,Et)=>Et(Ze)),yr=(0,$n.P1)(({duration:Ze})=>Ze,(0,$n.P1)(({trace:Ze})=>Ze,ir),(Ze,Et)=>Et(Ze)),tr=(0,$n.P1)(({trace:Ze})=>Ze,({spans:Ze})=>Ze,({sort:Ze})=>Ze,(Ze,Et,{dir:Ct,comparator:Be,selector:we})=>[...Et].sort((xe,yt)=>Ct*Be(we(xe,Ze),we(yt,Ze)))),Pr=(0,$n.P1)((0,$n.P1)(Ze=>Ze.trace,Va),(0,$n.P1)(Ze=>Ze.span,_a),(Ze,Et)=>{const Ct=Ze.find(Et);return Ct?Ct.size-1:-1}),ws=(0,$n.P1)((0,$n.P1)((0,$n.P1)(Or,vr),(0,$n.zB)({name:As,serviceName:sr})),({name:Ze,serviceName:Et})=>`${Et}: ${Ze}`),Gt=(0,$n.P1)(({spans:Ze})=>Ze,(0,$n.P1)(({trace:Ze})=>Ze,Va),({collapsed:Ze})=>Ze,(Ze,Et,Ct)=>{const Be=Ct.reduce((we,xe)=>(Et.find(xe).walk(yt=>yt!==xe&&we.add(yt)),we),new Set);return Be.size>0?Ze.filter(we=>!Be.has(_a(we))):Ze}),na=4,ps=3,cr=(0,$n.P1)(({trace:Ze})=>Ze,({interval:Ze=na})=>Ze,({width:Ze=ps})=>Ze,(Ze,Et,Ct)=>[...Array(Et+1).keys()].map(Be=>({timestamp:Us(Ze)+Qs(Ze)*(Be/Et),width:Ct})));function Hs(Ze){const Et=new Map,Ct=Ze.reduce((we,xe)=>(we.some(yt=>yt.key===xe.key&&yt.value===xe.value)?Et.set(`${xe.key}:${xe.value}`,`Duplicate tag "${xe.key}:${xe.value}"`):we.push(xe),we),[]),Be=Array.from(Et.values());return{tags:Ct,warnings:Be}}function os(Ze,Et){const Ct=Ze?.slice()??[],Be=(Et||[]).map(we=>we.toLowerCase());return Ct.sort((we,xe)=>{const yt=we.key.toLowerCase(),Rt=xe.key.toLowerCase();for(let Bt=0;Bt<Be.length;Bt++){const Kt=Be[Bt];if(yt.startsWith(Kt)&&!Rt.startsWith(Kt))return-1;if(!yt.startsWith(Kt)&&Rt.startsWith(Kt))return 1}return yt>Rt?1:yt<Rt?-1:0}),Ct}function is(Ze){if(!Ze?.traceID)return null;const Et=Ze.traceID.toLowerCase();let Ct=0,Be=Number.MAX_SAFE_INTEGER;const we=new Map,xe=new Map;Ze.spans=Ze.spans.filter(gn=>Boolean(gn.startTime)),Ze.processes=Object.entries(Ze.processes).reduce((gn,[ut,Tt])=>(gn[ut]={...Tt,tags:os(Tt.tags)},gn),{});const yt=Ze.spans.length;for(let gn=0;gn<yt;gn++){const ut=Ze.spans[gn],{startTime:Tt,duration:bt,processID:Ht}=ut;let en=ut.spanID;Tt<Be&&(Be=Tt),Tt+bt>Ct&&(Ct=Tt+bt);const ln=we.get(en);ln!=null?(console.warn(`Dupe spanID, ${ln+1} x ${en}`,ut,xe.get(en)),(0,R.isEqual)(ut,xe.get(en))&&console.warn("	 two spans with same ID have `isEqual(...) === true`"),we.set(en,ln+1),en=`${en}_${ln}`,ut.spanID=en):we.set(en,1),ut.process=Ze.processes[Ht],xe.set(en,ut)}const Rt=Va(Ze),Bt=[],Kt={};Rt.walk((gn,ut,Tt=0)=>{if(gn==="__root__"||typeof gn!="string")return;const bt=xe.get(gn);if(!bt)return;const{serviceName:Ht}=bt.process;Kt[Ht]=(Kt[Ht]||0)+1,bt.relativeStartTime=bt.startTime-Be,bt.depth=Tt-1,bt.hasChildren=ut.children.length>0,bt.childSpanCount=ut.children.length,bt.warnings=bt.warnings||[],bt.tags=bt.tags||[],bt.references=bt.references||[];const en=Hs(bt.tags);bt.tags=os(en.tags,We("topTagPrefixes")),bt.warnings=bt.warnings.concat(en.warnings),bt.references.forEach((ln,Cn)=>{const xn=xe.get(ln.spanID);xn&&(ln.span=xn,Cn>0&&(xn.subsidiarilyReferencedBy=xn.subsidiarilyReferencedBy||[],xn.subsidiarilyReferencedBy.push({spanID:gn,traceID:Et,span:bt,refType:ln.refType})))}),Bt.push(bt)});const fn=Ye(Bt);return{services:Object.keys(Kt).map(gn=>({name:gn,numberOfSpans:Kt[gn]})),spans:Bt,traceID:Et,traceName:fn,processes:Ze.processes,duration:Ct-Be,startTime:Be,endTime:Ct}}function Za(Ze,Et){if(!Et)return;const Ct=[],Be=[];Ze.split(/\s+/).filter(Boolean).forEach(Bt=>{Bt[0]==="-"?Be.push(Bt.slice(1).toLowerCase()):Ct.push(Bt.toLowerCase())});const we=(Bt,Kt)=>Bt.some(fn=>Kt.toLowerCase().includes(fn)),xe=Bt=>Bt?Bt.some(Kt=>we(Be,Kt.key)?!1:we(Ct,Kt.key)||we(Ct,Kt.value.toString())):!1,yt=Bt=>we(Ct,Bt.operationName)||we(Ct,Bt.process.serviceName)||xe(Bt.tags)||Bt.logs!==null&&Bt.logs.some(Kt=>xe(Kt.fields))||xe(Bt.process.tags)||Ct.some(Kt=>Kt===Bt.spanID);return new Set(Et.filter(yt).map(Bt=>Bt.spanID))}},52541:(Z,O,e)=>{"use strict";e.d(O,{Hn:()=>r,Kg:()=>d,ZP:()=>g,th:()=>u});var t=e(9892),n=e(68404),l=e(63134),s=e(5916),i=e(72648),f=e(11543),c=e(81764),o=e(53217),m=e(46967);const r="None",u="Duration",d="Tag";function g({options:E,onOptionsChange:h}){const a=(0,i.wW)(p),v=[r,u,d].map(l.E);return n.createElement("div",{className:(0,t.css)({width:"100%"})},n.createElement("h3",{className:"page-heading"},"Span bar"),n.createElement("div",{className:a.infoText},"Add additional info next to the service and operation on a span bar row in the trace view."),n.createElement(f.Z,{className:a.row},n.createElement(c._,{label:"Label",labelWidth:26,tooltip:"Default: duration",grow:!0},n.createElement(o.Ph,{inputId:"label",options:v,value:E.jsonData.spanBar?.type||"",onChange:x=>{(0,s.tp)({onOptionsChange:h,options:E},"spanBar",{...E.jsonData.spanBar,type:x?.value??""})},placeholder:"Duration",isClearable:!0,"aria-label":"select-label-name",width:40}))),E.jsonData.spanBar?.type===d&&n.createElement(f.Z,{className:a.row},n.createElement(c._,{label:"Tag key",labelWidth:26,tooltip:"Tag key which will be used to get the tag value. A span's attributes and resources will be searched for the tag key"},n.createElement(m.I,{type:"text",placeholder:"Enter tag key",onChange:x=>(0,s.tp)({onOptionsChange:h,options:E},"spanBar",{...E.jsonData.spanBar,tag:x.currentTarget.value}),value:E.jsonData.spanBar?.tag||"",width:40}))))}const p=E=>({infoText:t.css`
    label: infoText;
    padding-bottom: ${E.spacing(2)};
    color: ${E.colors.text.secondary};
  `,row:t.css`
    label: row;
    align-items: baseline;
  `})},42413:(Z,O,e)=>{"use strict";e.d(O,{A4:()=>u,GL:()=>c,H3:()=>f,Im:()=>p,K9:()=>h,NY:()=>v,WW:()=>n,b$:()=>g,bi:()=>l,h2:()=>i,im:()=>s,oD:()=>o,pQ:()=>a,ty:()=>E,xb:()=>d});var t=e(9892);const n=t.css`
  position: relative;
`,l=t.css`
  margin-bottom: 0.25rem;
`,s=t.css`
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
`,i=t.css`
  margin: 0;
`,f=t.css`
  padding-left: 0.5rem;
  padding-right: 0.5rem;
`,c=t.css`
  padding-bottom: 0.5rem;
`,o=t.css`
  display: flex;
`,m=t.css`
  align-items: center;
`,r=t.css`
  align-items: start;
`,u=t.css`
  flex: 1 1 auto;
  min-width: 0; /* 1 */
  min-height: 0; /* 1 */
`,d=t.css`
  text-align: right;
`,g=t.css`
  display: inline-block;
`,p=t.css`
  margin: -0.2rem 0.25rem 0 0;
`,E=t.css`
  text-overflow: ellipsis;
`,h=t.css`
  width: 100%;
`,a=t.css`
  color: #aaa;
`,v=t.css`
  justify-content: flex-end;
`},9096:(Z,O,e)=>{"use strict";e.d(O,{_K:()=>o,e6:()=>m});var t=e(58635),n=e(28550),l=e(16514);function s(u){if(u.length!==7)return[0,0,0];const d=u.slice(1,3),g=u.slice(3,5),p=u.slice(5);return[parseInt(d,16),parseInt(g,16),parseInt(p,16)]}class i{constructor(d,g){const p=r(d,g);this.colorsHex=p,this.colorsRgb=p.map(s),this.cache=new Map}_getColorIndex(d){let g=this.cache.get(d);if(g==null){const p=this.hashCode(d.toLowerCase());g=Math.abs(p%this.colorsHex.length);const E=Array.from(this.cache).pop();if(E&&E[1]){E[1]===g&&(g=this.getNextIndex(g));const h=this.colorsHex[E[1]];if(n.Z.readability(h,this.colorsHex[g])<1.5){let a=g;for(let v=0;v<this.colorsHex.length;v++)if(a=this.getNextIndex(a),n.Z.readability(h,this.colorsHex[a])>1.5){g=a;break}}}this.cache.set(d,g)}return g}getNextIndex(d){return d+1<this.colorsHex.length?d+1:0}hashCode(d){let g=0,p,E;for(p=0;p<d.length;p++)E=d.charCodeAt(p),g=(g<<5)-g+E;return g}getColorByKey(d){const g=this._getColorIndex(d);return this.colorsHex[g]}getRgbColorByKey(d){const g=this._getColorIndex(d);return this.colorsRgb[g]}clear(){this.cache.clear()}}const f=(0,t.Z)((u,d)=>new i(u,d));function c(u){f([],u)}function o(u,d){return f(l.O9,d).getColorByKey(u)}function m(u,d){return f(l.O9,d).getRgbColorByKey(u)}function r(u,d){const g=u.indexOf("#E24D42");g>-1&&u.splice(g,1);const p=u.indexOf("#BF1B00");p>-1&&u.splice(p,1);let E=[];for(const h of u)n.Z.readability(d.colors.background.primary,h)>=3&&E.push(h);return E}},320:(Z,O,e)=>{"use strict";e.d(O,{WT:()=>o,LU:()=>x,Cz:()=>a,Gk:()=>v});var t=e(82897),n=e(6835),l=e.n(n);function s(y,C){const P=Math.floor(Math.log10(Math.abs(y)))+1,D=C+P;return D<=0?Math.trunc(y):Number(y.toPrecision(D))}const i="YYYY-MM-DD",f="HH:mm",c=1e3,o=1e3*c,m=60*o,r=60*m,u=24*r,d=Math.log10(c),g=[{unit:"d",microseconds:u,ofPrevious:24},{unit:"h",microseconds:r,ofPrevious:60},{unit:"m",microseconds:m,ofPrevious:60},{unit:"s",microseconds:o,ofPrevious:1e3},{unit:"ms",microseconds:c,ofPrevious:1e3},{unit:"\u03BCs",microseconds:1,ofPrevious:1e3}],p=(y,C,P)=>s(y/P,C)*P;function E(y){return moment(y/c).format(i)}function h(y){return moment(y/c).format(f)}function a(y){const C=p(y,d,c);return`${l().duration(C/c).asMilliseconds()}ms`}function v(y){const C=p(y,d,o);return`${l().duration(C/c).asSeconds()}s`}function x(y){const[C,P]=(0,t.dropWhile)(g,({microseconds:B},w)=>w<g.length-1&&B>y);if(C.ofPrevious===1e3)return`${(0,t.round)(y/C.microseconds,2)}${C.unit}`;const M=`${Math.floor(y/C.microseconds)}${C.unit}`,b=Math.round(y/P.microseconds%C.ofPrevious),R=`${b}${P.unit}`;return b===0?M:`${M} ${R}`}},75151:(Z,O,e)=>{"use strict";e.d(O,{R:()=>l});var t=e(68404),n=e(61966);function l(s){const[i,f]=(0,t.useState)(""),c=(0,t.useMemo)(()=>i&&s?(0,n.filterSpans)(i,s):void 0,[i,s]);return{search:i,setSearch:f,spanFindMatches:c}}},335:(Z,O,e)=>{"use strict";e.d(O,{N:()=>l});var t=e(50235),n=e(61966);function l(i){if(!i)return null;let f=i.fields.length===1?i.fields[0].values.get(0):s(i);return(0,n.transformTraceData)(f)}function s(i){const f=new t.U(i),c={};for(let o=0;o<f.length;o++){const m=f.get(o);c[m.spanID]||(c[m.spanID]={serviceName:m.serviceName,tags:m.serviceTags})}return{traceID:f.get(0).traceID,processes:c,spans:f.toArray().map((o,m)=>{const r=[];return o.parentSpanID&&r.push({refType:"CHILD_OF",spanID:o.parentSpanID,traceID:o.traceID}),o.references&&r.push(...o.references.map(u=>({refType:"FOLLOWS_FROM",...u}))),{...o,duration:o.duration*1e3,startTime:o.startTime*1e3,processID:o.spanID,flags:0,references:r,logs:o.logs?.map(u=>({...u,timestamp:u.timestamp*1e3}))||[],dataFrameRowIndex:m}})}}},46526:(Z,O,e)=>{"use strict";e.d(O,{eX:()=>u,zU:()=>r});var t=e(62992),n=e(41818),l=e(5562),s=e(55935),i=e(98589),f=e(73257),c=e(86297),o=e(16983);const m=(0,t.PH)("explore/updateDatasourceInstance");function r(d,g,p){return async(E,h)=>{const a=h().user.orgId,{history:v,instance:x}=await(0,o.r_)(a,{uid:g}),y=h().explore[d].datasourceInstance;if((0,n.ff)("explore_change_ds",{from:(y?.meta?.mixed?"mixed":y?.type)||"unknown",to:x.meta.mixed?"mixed":x.type,exploreId:d}),E(m({exploreId:d,datasourceInstance:x,history:v})),p?.importQueries){const C=h().explore[d].queries;await E((0,f.GJ)(d,C,y,x))}h().explore[d].isLive&&E((0,c.oz)(d,l.dP.offOption.value)),p?.importQueries&&E((0,f.aA)(d))}}const u=(d,g)=>{if(m.match(g)){const{datasourceInstance:p,history:E}=g.payload;return(0,s.RZ)(d.querySubscription),{...d,datasourceInstance:p,graphResult:null,tableResult:null,logsResult:null,supplementaryQueries:(0,i.DK)(),queryResponse:(0,o.lp)(),loading:!1,queryKeys:[],history:E,datasourceMissing:!1}}return d}},93713:(Z,O,e)=>{"use strict";e.d(O,{CK:()=>x,Om:()=>y,iz:()=>C,km:()=>E,qN:()=>v});var t=e(62992),n=e(82897),l=e.n(n),s=e(86647),i=e(55935),f=e(25405),c=e(46526),o=e(13582),m=e(48197),r=e(73257),u=e(86297),d=e(16983);const g=(0,t.PH)("explore/changeSize"),p=(0,t.PH)("explore/changePanels");function E(D,M,b){return async(R,B)=>{const w=B().explore[D];if(w===void 0)return;const{panelsState:A}=w;R(p({exploreId:D,panelsState:{...A,[M]:b}})),R((0,m.og)())}}const h=(0,t.PH)("explore/initializeExplore"),a=(0,t.PH)("explore/setUrlReplaced");function v(D,{height:M,width:b}){return g({exploreId:D,height:M,width:b})}function x(D,M,b,R,B,w,A,I){return async(F,K)=>{const W=(0,s.F)().getList();let U,N=[];if(W.length>=1){const S=K().user.orgId,Y=await(0,d.r_)(S,M);U=Y.instance,N=Y.history}F(h({exploreId:D,containerWidth:B,eventBridge:w,queries:b,range:R,datasourceInstance:U,history:N,isFromCompactUrl:I})),A!==void 0&&F(p({exploreId:D,panelsState:A})),F((0,u.b3)({exploreId:D})),U&&F((0,r.aA)(D,{replaceUrl:!0}))}}function y(D,M){return async(b,R)=>{const B=R().explore[D];if(!B?.initialized)return;const w=(0,i.J5)(M),A=P(w,(0,d.D)(B)),{containerWidth:I,eventBridge:F}=B,{datasource:K,queries:W,range:U,panelsState:N}=w,S=[];for(let G=0;G<W.length;G++){const k=W[G];S.push((0,i.fR)(k,S,G))}const Y=(0,f.Z)(R().user),Q=(0,f.i)(R().user),z=(0,i.vP)(U,Y,Q);if(A.datasource){const G=await(0,i.Z8)(W);await b(x(D,K,G,z,I,F,N));return}A.range&&b((0,u.b3)({exploreId:D,rawRange:z.raw})),A.queries&&b((0,r.SE)({exploreId:D,queries:S})),A.panelsState&&N!==void 0&&b(p({exploreId:D,panelsState:N})),(A.queries||A.range)&&b((0,r.aA)(D))}}const C=(D=(0,d.t5)(),M)=>{if(D=(0,r.Y)(D,M),D=(0,c.eX)(D,M),D=(0,u.ok)(D,M),D=(0,o.Oo)(D,M),m.ZU.match(M)){const{richHistory:b,total:R}=M.payload.richHistoryResults;return{...D,richHistory:b,richHistoryTotal:R}}if(m.Zy.match(M)){const b=M.payload.filters;return{...D,richHistorySearchFilters:b}}if(g.match(M)){const b=M.payload.width;return{...D,containerWidth:b}}if(p.match(M)){const{panelsState:b}=M.payload;return{...D,panelsState:b}}if(h.match(M)){const{containerWidth:b,eventBridge:R,queries:B,range:w,datasourceInstance:A,history:I,isFromCompactUrl:F}=M.payload;return{...D,containerWidth:b,eventBridge:R,range:w,queries:B,initialized:!0,queryKeys:(0,i.$$)(B),datasourceInstance:A,history:I,datasourceMissing:!A,queryResponse:(0,d.lp)(),cache:[],isFromCompactUrl:F||!1}}return D},P=(D,M)=>{const b=!(0,n.isEqual)(M?.datasource,D?.datasource),R=!(0,n.isEqual)(M?.queries,D?.queries),B=!(0,n.isEqual)(M?.range||i.UI,D?.range||i.UI),w=!(0,n.isEqual)(M?.panelsState,D?.panelsState);return{datasource:b,queries:R,range:B,panelsState:w}}},13582:(Z,O,e)=>{"use strict";e.d(O,{Cs:()=>y,Ff:()=>E,KZ:()=>D,NV:()=>h,Oo:()=>M,TV:()=>v,WY:()=>g,ch:()=>P,ev:()=>p,fM:()=>r,ik:()=>a,io:()=>x,sO:()=>C});var t=e(62992),n=e(35645),l=e(54408),s=e(69597),i=e(58379),f=e(51424),c=e(81168),o=e(40967),m=e(48197);const r=(0,t.PH)("explore/historyUpdated"),u=({updatedQuery:b,deletedId:R})=>async(B,w)=>{d(w().explore,(A,I)=>{const F=A.richHistory.map(W=>W.id===b?.id?b:W).filter(W=>W.id!==R),K=A.richHistory.length-F.length;B((0,m.ZU)({richHistoryResults:{richHistory:F,total:A.richHistoryTotal-K},exploreId:I}))})},d=(b,R)=>{R(b.left,c.ExploreId.left),b.right&&R(b.right,c.ExploreId.right)},g=(b,R,B)=>async(w,A)=>{const{richHistoryStorageFull:I,limitExceeded:F}=await(0,f.au)(b,R,B,!1,"",!A().explore.richHistoryStorageFull,!A().explore.richHistoryLimitExceededWarningShown);I&&w((0,m.fm)()),F&&w((0,m.QN)())},p=(b,R)=>async(B,w)=>{const A=await(0,f.VI)(b,R);B(u({updatedQuery:A}))},E=(b,R)=>async B=>{const w=await(0,f.gt)(b,R);B(u({updatedQuery:w}))},h=b=>async R=>{const B=await(0,f.y9)(b);R(u({deletedId:B}))},a=()=>async b=>{await(0,f.HK)(),b((0,m.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:c.ExploreId.left})),b((0,m.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:c.ExploreId.right}))},v=b=>async(R,B)=>{const w=B().explore[b]?.richHistorySearchFilters;if(w){const A=await(0,f.ub)(w);R((0,m.ZU)({richHistoryResults:A,exploreId:b}))}},x=b=>async(R,B)=>{const w=B().explore[b]?.richHistorySearchFilters,A=B().explore[b]?.richHistory;if(w&&A){const I={...w,page:(w?.page||1)+1},F=await(0,f.ub)(I),K=[...A,...F.richHistory];R((0,m.Zy)({filters:I,exploreId:b})),R((0,m.ZU)({richHistoryResults:{richHistory:K,total:F.total},exploreId:b}))}},y=b=>async R=>{R((0,m.Zy)({filters:void 0,exploreId:b})),R((0,m.ZU)({richHistoryResults:{richHistory:[],total:0},exploreId:b}))},C=()=>async(b,R)=>{const B=i.Z.getBool(s.hO.migrated,!1),w=R().explore.richHistoryMigrationFailed;if(n.v.queryHistoryEnabled&&!B&&!w){const I=await(0,f.rq)();I.status===f.rv.Failed?(b((0,m.CR)()),(0,l.H)(I.error,{explore:{event:"QueryHistoryMigrationFailed"}})):i.Z.set(s.hO.migrated,!0)}let A=R().explore.richHistorySettings;A||(A=await(0,f.di)(),b((0,m.e8)(A)))},P=b=>async R=>{R((0,m.e8)(b)),await(0,f.kg)(b)},D=(b,R)=>async(B,w)=>{await B((0,m.Zy)({exploreId:b,filters:{...R}}));const A=w().explore.richHistorySettings;(0,o.X)().lastUsedDataSourcesAvailable&&await B(P({...A,lastUsedDatasourceFilters:R.datasourceFilters}))},M=(b,R)=>r.match(R)?{...b,history:R.payload.history}:b},48197:(Z,O,e)=>{"use strict";e.d(O,{AP:()=>v,CL:()=>E,CR:()=>d,IS:()=>P,QN:()=>u,Sx:()=>h,WK:()=>x,YV:()=>M,ZP:()=>A,ZU:()=>m,Zy:()=>p,bW:()=>D,e8:()=>g,fm:()=>r,m$:()=>b,nL:()=>a,og:()=>C,tl:()=>o});var t=e(62992),n=e(27677),l=e(37932),s=e(55935),i=e(3032),f=e(93713),c=e(16983);const o=(0,t.PH)("explore/syncTimes"),m=(0,t.PH)("explore/richHistoryUpdated"),r=(0,t.PH)("explore/richHistoryStorageFullAction"),u=(0,t.PH)("explore/richHistoryLimitExceededAction"),d=(0,t.PH)("explore/richHistoryMigrationFailedAction"),g=(0,t.PH)("explore/richHistorySettingsUpdated"),p=(0,t.PH)("explore/richHistorySearchFiltersUpdatedAction"),E=(0,t.PH)("explore/saveCorrelationsAction"),h=(0,t.PH)("explore/splitSizeUpdateAction"),a=(0,t.PH)("explore/maximizePaneAction"),v=(0,t.PH)("explore/evenPaneResizeAction"),x=(0,t.PH)("explore/resetExplore"),y=(0,t.PH)("explore/splitClose"),C=I=>(F,K)=>{const{left:W,right:U}=K().explore,S={orgId:K().user.orgId.toString()};S.left=(0,n.S)((0,c.D)(W)),U?S.right=(0,n.S)((0,c.D)(U)):S.right=null,P.right=S.right,P.left=S.left,l.E1.partial({...S},I?.replace)},P={},D=I=>async(F,K)=>{const W=K().explore[i.Kd.left];let N=(0,c.D)(W);if(I){const{query:Y,queries:Q}=I;N={datasource:I.datasourceUid,queries:Q??(Y?[Y]:[]),range:I.range||W.range,panelsState:I.panelsState}}const S=(0,n.S)(N);l.E1.partial({right:S},!0)};function M(I){return(F,K)=>{F(y({itemId:I})),F(C())}}const b=(I,F)=>async K=>{const{getDataSourceSrv:W,getTimeSrv:U,getExploreUrl:N,openInNewWindow:S}=F,Y=W(),Q=await N({panel:I,datasourceSrv:Y,timeSrv:U()});if(S&&Q){S(Q);return}l.E1.push(Q)},R=(0,c.t5)(),B={syncedTimes:!1,left:R,right:void 0,correlations:void 0,richHistoryStorageFull:!1,richHistoryLimitExceededWarningShown:!1,richHistoryMigrationFailed:!1,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0},A={explore:(I=B,F)=>{if(y.match(F)){const{itemId:K}=F.payload,W={left:K===i.Kd.left?I.right:I.left,right:void 0};return{...I,...W,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0,syncedTimes:!1}}if(h.match(F)){const{largerExploreId:K}=F.payload;return{...I,largerExploreId:K,maxedExploreId:void 0,evenSplitPanes:K===void 0}}if(a.match(F)){const{exploreId:K}=F.payload;return{...I,largerExploreId:K,maxedExploreId:K,evenSplitPanes:!1}}if(v.match(F))return{...I,largerExploreId:void 0,maxedExploreId:void 0,evenSplitPanes:!0};if(E.match(F))return{...I,correlations:F.payload};if(o.match(F))return{...I,syncedTimes:F.payload.syncedTimes};if(r.match(F))return{...I,richHistoryStorageFull:!0};if(u.match(F))return{...I,richHistoryLimitExceededWarningShown:!0};if(d.match(F))return{...I,richHistoryMigrationFailed:!0};if(x.match(F)){const K=I[i.Kd.left],W=I[i.Kd.right];return(0,s.RZ)(K.querySubscription),W&&(0,s.RZ)(W.querySubscription),{...B,left:{...R,queries:I.left.queries}}}if(g.match(F)){const K=F.payload;return{...I,richHistorySettings:K}}if(F.payload){const{exploreId:K}=F.payload;if(K!==void 0){const W=I[K];return{...I,[K]:(0,f.iz)(W,F)}}}return I}}},73257:(Z,O,e)=>{"use strict";e.d(O,{CS:()=>ct,K8:()=>De,ci:()=>ht,qV:()=>nt,LK:()=>$e,GJ:()=>le,W1:()=>ke,sK:()=>Pe,Y:()=>Ge,aA:()=>Le,EA:()=>he,P4:()=>Fe,sQ:()=>_e,KO:()=>me,SE:()=>Ae,z0:()=>tt});var t=e(62992),n=e(10322),l=e.n(n),s=e(82897),i=e(23351),f=e(59980),c=e(11572),o=e(84946),m=e(39859),r=e(98803),u=e(49922),d=e(62163),g=e(16642),p=e(90595),E=e(7238),h=e(25318),a=e(16911),v=e(35645),x=e(86647),y=e(41818),C=e(55935),P=e(5242),D=e(25405),M=e(63496),b=e(3153),R=e(81168),B=e(3032),w=e(659),A=e(60499),I=e(75434),F=e(9471),K=e(74940),W=e(36512),U=e(14582),N=e(37959),S=e(28151);const Y=(Ke,je,ot)=>(Ke.forEach(at=>{const xt=at.refId;if(!xt)return;const Dt=ot[xt],wt=je.filter(sn=>sn.source.uid===Dt);Q(at,wt)}),Ke),Q=(Ke,je)=>{Ke.fields.forEach(ot=>{ot.config.links=ot.config.links?.filter(at=>at.origin!==S.n1.Correlations)||[],je.map(at=>{at.config?.field===ot.name&&ot.config.links.push({internal:{query:at.config?.target,datasourceUid:at.target.uid,datasourceName:at.target.name,transformations:at.config?.transformations},url:"",title:at.label||at.target.name,origin:S.n1.Correlations})})})};var z=e(81042);const G=Ke=>{const je=[],ot=[],at=[],xt=[],Dt=[],wt=[],sn=[];for(const mn of Ke.series)switch(mn.meta?.preferredVisualisationType){case"logs":xt.push(mn);break;case"graph":je.push(mn);break;case"trace":Dt.push(mn);break;case"table":ot.push(mn);break;case"rawPrometheus":at.push(mn);break;case"nodeGraph":wt.push(mn);break;case"flamegraph":sn.push(mn);break;default:ie(mn)&&je.push(mn),ot.push(mn)}return{...Ke,graphFrames:je,tableFrames:ot,logsFrames:xt,traceFrames:Dt,nodeGraphFrames:wt,flameGraphFrames:sn,rawPrometheusFrames:at,graphResult:null,tableResult:null,logsResult:null,rawPrometheusResult:null}},k=({queries:Ke,correlations:je})=>ot=>{if(Ke?.length&&je?.length){const at=(0,s.mapValues)((0,s.groupBy)(Ke,"refId"),"0.datasource.uid");Y(ot.series,je,at)}return ot},j=Ke=>Ke.graphFrames.length?{...Ke,graphResult:Ke.graphFrames}:{...Ke,graphResult:null},de=Ke=>{if(Ke.tableFrames.length===0)return(0,f.of)({...Ke,tableResult:null});Ke.tableFrames.sort((xt,Dt)=>{const wt=xt.refId,sn=Dt.refId;return wt>sn?1:wt<sn?-1:0});const je=Ke.tableFrames.every(xt=>ie(xt)),ot={interpolate:xt=>xt};return(je?(0,f.of)(Ke.tableFrames).pipe(K.Y.joinByFieldTransformer.operator({},ot)):(0,f.of)(Ke.tableFrames).pipe(K.Y.mergeTransformer.operator({},ot))).pipe((0,F.U)(xt=>{for(const Dt of xt)for(const wt of Dt.fields)wt.display=wt.display??(0,W.U_)({field:wt,theme:v.v.theme2,timeZone:Ke.request?.timezone??"browser"});return{...Ke,tableResult:xt}}))},ge=Ke=>{const je=Ke.rawPrometheusFrames;if(!je||je.length===0)return(0,f.of)({...Ke,tableResult:null});je.sort((Dt,wt)=>{const sn=Dt.refId,mn=wt.refId;return sn>mn?1:sn<mn?-1:0});const ot=je.every(Dt=>ie(Dt)),at={interpolate:Dt=>Dt};return(ot?(0,f.of)(je).pipe(K.Y.joinByFieldTransformer.operator({},at)):(0,f.of)(je).pipe(K.Y.mergeTransformer.operator({},at))).pipe((0,F.U)(Dt=>{const wt=Dt[0];for(const sn of wt.fields)sn.display=sn.display??(0,W.U_)({field:sn,theme:v.v.theme2,timeZone:Ke.request?.timezone??"browser"});return{...Ke,rawPrometheusResult:wt}}))},re=(Ke={})=>je=>{if(je.logsFrames.length===0)return{...je,logsResult:null};const ot=je.request?.intervalMs,at=(0,N.aB)(je.logsFrames,ot,Ke.absoluteRange,Ke.queries),xt=(0,C.Oy)(Ke.refreshInterval),Dt=(0,z.j0)(at,xt),wt=Dt.rows,sn=Dt.series,mn={...Dt,rows:wt,series:sn};return{...je,logsResult:mn}};function ce(Ke,je,ot,at,xt,Dt){return(0,f.of)(Ke).pipe((0,F.U)(wt=>(0,a.zR)(wt,je)),(0,F.U)(k({queries:xt,correlations:Dt})),(0,F.U)(G),(0,F.U)(j),(0,F.U)(j),(0,F.U)(re({absoluteRange:ot,refreshInterval:at,queries:xt})),(0,m.z)(ge),(0,m.z)(de))}function ie(Ke){const je=(0,s.groupBy)(Ke.fields,ot=>ot.type);return Boolean(Object.keys(je).length===2&&je[U.fS.time]?.length===1&&je[U.fS.number])}var fe=e(98589),Ce=e(13582),ee=e(48197),ne=e(86297),X=e(16983);const te=(0,t.PH)("explore/addQueryRow"),ae=(0,t.PH)("explore/changeQueries"),_=(0,t.PH)("explore/cancelQueries"),ve=(0,t.PH)("explore/queriesImported"),Ve=(0,t.PH)("explore/queryStoreSubscription"),it=(0,t.PH)("explore/setSupplementaryQueryEnabledAction"),rt=(0,t.PH)("explore/storeSupplementaryQueryDataProviderAction"),pe=(0,t.PH)("explore/cleanSupplementaryQueryDataProviderAction"),Ie=(0,t.PH)("explore/cleanSupplementaryQueryAction"),We=(0,t.PH)("explore/storeSupplementaryQueryDataSubscriptionAction"),Je=(0,t.PH)("explore/updateSupplementaryQueryDataAction"),He=(0,t.PH)("explore/queryStreamUpdated"),Ae=(0,t.PH)("explore/setQueries"),et=(0,t.PH)("changeLoadingState"),_e=(0,t.PH)("explore/setPausedState"),Se=(0,t.PH)("explore/scanStart"),Fe=(0,t.PH)("explore/scanStop"),Xe=(0,t.PH)("explore/addResultsToCache"),Qe=(0,t.PH)("explore/clearCache");function ct(Ke,je){return async(ot,at)=>{const xt=at().explore[Ke].queries;let Dt;if(xt.length===0){const sn=at().explore[Ke].datasourceInstance;(!v.v.featureToggles.exploreMixedDatasource||!sn?.meta.mixed)&&(Dt=sn)}const wt=await(0,C.Xk)(xt,je,Dt?.getRef());ot(te({exploreId:Ke,index:je,query:wt}))}}function ht(Ke){return(je,ot)=>{je(Fe({exploreId:Ke})),je(_({exploreId:Ke}));const at=ot().explore[Ke].supplementaryQueries;for(const xt of fe.SY)je(pe({exploreId:Ke,type:xt})),at[xt]?.data?.state!==u.Gu.Done&&je(Ie({exploreId:Ke,type:xt}));je((0,ee.og)())}}const ft=(Ke,je)=>{const ot=Ke.getRef();return je.map(at=>({...at,datasource:ot}))},Re=async(Ke,je,ot)=>{let at=[];if(je.meta?.id===Ke.meta?.id)at=ot;else if((0,d.p)(je)&&(0,d.CZ)(Ke)){const xt=await je.exportToAbstractQueries(ot);at=await Ke.importFromAbstractQueries(xt)}else Ke.importQueries&&(at=await Ke.importQueries(ot,je));return ft(Ke,at)},nt=(0,R.createAsyncThunk)("explore/changeQueries",async({queries:Ke,exploreId:je},{getState:ot,dispatch:at})=>{let xt=!1;const Dt=ot().explore[je].queries;for(const wt of Ke)for(const sn of Dt)if(wt.refId===sn.refId&&wt.datasource?.type!==sn.datasource?.type){const mn=await(0,x.F)().get(sn.datasource),Dn=await(0,x.F)().get({uid:wt.datasource?.uid});await at(le(je,Dt,mn,Dn,wt.refId)),xt=!0}xt||at(ae({queries:Ke,exploreId:je})),Ke.length<Ke.length&&at(Le(je))}),le=(Ke,je,ot,at,xt)=>async Dt=>{if(!ot){Dt(ve({exploreId:Ke,queries:je}));return}let wt=je;if(at.uid===M.D)wt=je.map(mn=>({...mn,datasource:ot.getRef()}));else if(ot.uid===M.D){const mn=(0,s.groupBy)(je,Rn=>Rn.datasource?.uid),Dn=await Promise.all(Object.keys(mn).map(async Rn=>{const St=await(0,x.F)().get({uid:Rn});return await Re(at,St,mn[Rn])}));wt=(0,s.flatten)(Dn.filter(Rn=>Rn.length>0))}else{let mn=je;if(xt!==void 0){const Dn=je.find(Rn=>Rn.refId===xt);Dn&&(mn=[Dn])}wt=await Re(at,ot,mn)}let sn=await(0,C.Z8)(wt,at.getRef());if(xt!==void 0){wt.length===0&&(wt=[await(0,C.Xk)([],void 0,at.getRef())]);const mn=je.findIndex(Rn=>Rn.refId===xt),Dn={...sn[0],refId:je[mn].refId};sn=[...je],sn[mn]=Dn}Dt(ve({exploreId:Ke,queries:sn}))};function Pe(Ke,je,ot){return async(at,xt)=>{const Dt=xt().explore[Ke],{queries:wt}=Dt,mn=(await Promise.all(wt.map(Dn=>ot({...Dn},je)))).map((Dn,Rn)=>(0,C.fR)(Dn,wt,Rn));at(Ae({exploreId:Ke,queries:mn})),je.preventSubmit||at(Le(Ke))}}async function Oe(Ke,je,ot,at,xt,Dt){const wt=at.meta.id,sn=(0,C._Q)(ot,wt,xt);Ke((0,Ce.fM)({exploreId:Dt,history:sn})),Ke((0,Ce.WY)(at.uid,at.name,xt)),await Ke((0,Ce.TV)(B.Kd.left)),await Ke((0,Ce.TV)(B.Kd.right))}const Le=(Ke,je)=>(ot,at)=>{ot((0,ne.b3)({exploreId:Ke}));const xt=dt();je?.preserveCache===!0||ot($e(Ke));const wt=at().explore[Ke],{datasourceInstance:sn,containerWidth:mn,isLive:Dn,range:Rn,scanning:St,queryResponse:At,querySubscription:Wt,refreshInterval:Qt,absoluteRange:jt,cache:Xt,supplementaryQueries:tn}=wt;let on,dn;const $t=wt.queries.map(Vt=>({...Vt,datasource:Vt.datasource||sn?.getRef()}));sn!=null&&Oe(ot,at().explore,wt.history,sn,$t,Ke),ot((0,ee.og)({replace:je?.replaceUrl}));const qt=(0,X.M0)(Xt,jt);if(qt)on=(0,i.a)([(0,f.of)(qt),xt]).pipe((0,m.z)(([Vt,nn])=>ce(Vt,At,jt,Qt,$t,nn))),dn=on.subscribe(Vt=>{Vt.error||ot((0,ee.og)()),ot(He({exploreId:Ke,response:Vt}))});else{if(!(0,C.z_)($t)){ot((0,ee.og)({replace:je?.replaceUrl}));return}if(!sn)return;const Vt=sn?.interval;(0,C.RZ)(Wt);const nn={minInterval:Vt,maxDataPoints:mn,liveStreaming:Dn},un=(0,D.Z)(at().user),En=(0,C.Zf)(Ke,$t,nn,Rn,St,un);if(ot(et({exploreId:Ke,loadingState:u.Gu.Loading})),on=(0,i.a)([(0,I.v7)(sn,En.request).pipe(Dn?(0,r.p)(500):c.y),xt]).pipe((0,m.z)(([cn,wn])=>ce(cn,At,jt,Qt,$t,wn))),dn=on.subscribe({next(cn){if(cn.logsResult!==null&&(0,y.ff)("grafana_explore_logs_result_displayed",{datasourceType:sn.type}),ot(He({exploreId:Ke,response:cn})),at().explore[Ke].scanning)if(cn.state===u.Gu.Done&&cn.series.length===0){const wn=(0,P.e)(-1,at().explore[Ke].range);ot((0,ne.b3)({exploreId:Ke,absoluteRange:wn})),ot(Le(Ke))}else ot(Fe({exploreId:Ke}))},error(cn){ot((0,w.$l)((0,A.t_)("Query processing error",cn))),ot(et({exploreId:Ke,loadingState:u.Gu.Error})),console.error(cn)},complete(){at().explore[Ke].queryResponse.state===u.Gu.Loading&&ot(et({exploreId:Ke,loadingState:u.Gu.Done}))}}),Dn)for(const cn of fe.SY)ot(pe({exploreId:Ke,type:cn})),ot(Ie({exploreId:Ke,type:cn}));else ot(be({exploreId:Ke,datasourceInstance:sn,transaction:En,newQuerySource:on,supplementaryQueries:tn,queries:$t,absoluteRange:jt}))}ot(Ve({exploreId:Ke,querySubscription:dn}))},Ye=async(Ke,je)=>{const ot=Ke.filter(xt=>xt.datasource?.uid!==M.D),at=(0,s.groupBy)(ot,"datasource.uid");return await Promise.all(Object.values(at).map(async xt=>({datasource:await(0,x.F)().get(xt[0].datasource,je),targets:xt})))},be=(0,R.createAsyncThunk)("explore/handleSupplementaryQueries",async({datasourceInstance:Ke,exploreId:je,transaction:ot,newQuerySource:at,supplementaryQueries:xt,queries:Dt,absoluteRange:wt},{dispatch:sn})=>{let mn;Ke.meta.mixed?mn=await Ye(ot.request.targets,ot.request.scopedVars):mn=[{datasource:Ke,targets:ot.request.targets}];for(const Dn of fe.SY){const Rn=(0,fe.Z9)(mn,Dn,{...ot.request,requestId:`${ot.request.requestId}_${(0,s.snakeCase)(Dn)}`},at);if(Rn)sn(rt({exploreId:je,type:Dn,dataProvider:Rn})),Te(xt[Dn].data,Dt,wt)||(sn(Ie({exploreId:je,type:Dn})),xt[Dn].enabled&&sn(ke(je,Dn)));else if((0,g.O)(Ke)&&Dn===p.v8.LogsVolume){const St=Ke.getLogsVolumeDataProvider({...ot.request,requestId:`${ot.request.requestId}_${(0,s.snakeCase)(Dn)}`});sn(rt({exploreId:je,type:Dn,dataProvider:St})),Te(xt[Dn].data,Dt,wt)||(sn(Ie({exploreId:je,type:Dn})),xt[Dn].enabled&&sn(ke(je,Dn)))}else sn(pe({exploreId:je,type:Dn}))}});function Te(Ke,je,ot){if(!Ke)return!1;const at=(0,s.zipObject)((0,s.map)(je,"refId"),je),xt=(0,s.mapValues)((0,s.groupBy)(Ke.data.map(sn=>sn.meta?.custom?.sourceQuery),"refId"),s.head),Dt=l()(at,xt),wt=Ke.data.every(sn=>{const mn=sn.meta?.custom?.absoluteRange;return mn?mn&&mn.from<=ot.from&&ot.to<=mn.to:!0});return Dt&&wt}function me(Ke,je){return(ot,at)=>{const xt=at().explore[Ke].queries,Dt=je.map((wt,sn)=>(0,C.fR)(wt,xt,sn));ot(Ae({exploreId:Ke,queries:Dt})),ot(Le(Ke))}}function he(Ke){return(je,ot)=>{je(Se({exploreId:Ke}));const at=(0,P.e)(-1,ot().explore[Ke].range);je((0,ne.b3)({exploreId:Ke,absoluteRange:at})),je(Le(Ke))}}function De(Ke){return(je,ot)=>{const at=ot().explore[Ke].queryResponse,xt=ot().explore[Ke].absoluteRange,Dt=(0,X.M7)(xt);at.state===u.Gu.Done&&je(Xe({exploreId:Ke,cacheKey:Dt,queryResponse:at}))}}function $e(Ke){return(je,ot)=>{je(Qe({exploreId:Ke}))}}function ke(Ke,je){return(ot,at)=>{const{supplementaryQueries:xt}=at().explore[Ke],Dt=xt[je].dataProvider;if(Dt){const wt=Dt.subscribe({next:sn=>{ot(Je({exploreId:Ke,type:je,data:sn}))}});ot(We({exploreId:Ke,type:je,dataSubscription:wt}))}}}function tt(Ke,je,ot){return(at,xt)=>{at(it({exploreId:Ke,enabled:je,type:ot})),(0,fe.B9)(je,ot),je&&at(ke(Ke,ot))}}const Ge=(Ke,je)=>{if(te.match(je)){const{queries:ot}=Ke,{index:at,query:xt}=je.payload,Dt=[...ot.slice(0,at+1),{...xt},...ot.slice(at+1)];return{...Ke,queries:Dt,queryKeys:(0,C.$$)(Dt)}}if(ae.match(je)){const{queries:ot}=je.payload;return{...Ke,queries:ot}}if(_.match(je))return(0,C.RZ)(Ke.querySubscription),{...Ke,loading:!1};if(Ae.match(je)){const{queries:ot}=je.payload;return{...Ke,queries:ot.slice(),queryKeys:(0,C.$$)(ot)}}if(Ve.match(je)){const{querySubscription:ot}=je.payload;return{...Ke,querySubscription:ot}}if(it.match(je)){const{enabled:ot,type:at}=je.payload,{supplementaryQueries:xt}=Ke,Dt=xt[at].dataSubscription;!ot&&Dt&&Dt.unsubscribe();const wt={...xt,[at]:{...xt[at],enabled:ot,data:void 0}};return{...Ke,supplementaryQueries:wt}}if(rt.match(je)){const{dataProvider:ot,type:at}=je.payload,{supplementaryQueries:xt}=Ke,Dt=xt[at];Dt?.dataSubscription&&Dt.dataSubscription.unsubscribe();const wt={...xt,[at]:{...Dt,dataProvider:ot,dataSubscription:void 0}};return{...Ke,supplementaryQueries:wt}}if(pe.match(je)){const{type:ot}=je.payload,{supplementaryQueries:at}=Ke,xt=at[ot];xt?.dataSubscription&&xt.dataSubscription.unsubscribe();const Dt={...at,[ot]:{...xt,dataProvider:void 0,dataSubscription:void 0}};return{...Ke,supplementaryQueries:Dt}}if(Ie.match(je)){const{type:ot}=je.payload,{supplementaryQueries:at}=Ke,xt={...at,[ot]:{...at[ot],data:void 0}};return{...Ke,supplementaryQueries:xt}}if(We.match(je)){const{dataSubscription:ot,type:at}=je.payload,{supplementaryQueries:xt}=Ke,Dt={...xt,[at]:{...xt[at],dataSubscription:ot}};return{...Ke,supplementaryQueries:Dt}}if(Je.match(je)){let{data:ot,type:at}=je.payload;const{supplementaryQueries:xt}=Ke,Dt={...xt,[at]:{...xt[at],data:ot}};return{...Ke,supplementaryQueries:Dt}}if(He.match(je))return pt(Ke,je);if(ve.match(je)){const{queries:ot}=je.payload;return{...Ke,queries:ot,queryKeys:(0,C.$$)(ot)}}if(et.match(je)){const{loadingState:ot}=je.payload;return{...Ke,queryResponse:{...Ke.queryResponse,state:ot},loading:ot===u.Gu.Loading||ot===u.Gu.Streaming}}if(_e.match(je)){const{isPaused:ot}=je.payload;return{...Ke,isPaused:ot}}if(Se.match(je))return{...Ke,scanning:!0};if(Fe.match(je))return{...Ke,scanning:!1,scanRange:void 0};if(Xe.match(je)){const{cache:at}=Ke,{queryResponse:xt,cacheKey:Dt}=je.payload;let wt=[...at];return wt.some(mn=>mn.key===Dt)||(wt=[{key:Dt,value:xt},...wt].slice(0,5)),{...Ke,cache:wt}}return Qe.match(je)?{...Ke,cache:[]}:Ke},dt=()=>new o.y(Ke=>{const je=b.h.getState().explore.correlations;if(je)Ke.next(je),Ke.complete();else{const ot=b.h.subscribe(()=>{const{correlations:at}=b.h.getState().explore;at&&(ot(),Ke.next(at),Ke.complete())})}}),pt=(Ke,je)=>{const{response:ot}=je.payload,{request:at,state:xt,series:Dt,error:wt,graphResult:sn,logsResult:mn,tableResult:Dn,rawPrometheusResult:Rn,traceFrames:St,nodeGraphFrames:At,flameGraphFrames:Wt,rawPrometheusFrames:Qt}=ot;if(wt){if(wt.type===E.eA.Timeout)return{...Ke,queryResponse:ot,loading:xt===u.Gu.Loading||xt===u.Gu.Streaming};if(wt.type===E.eA.Cancelled)return Ke;v.v.angularSupportEnabled&&Ke.datasourceInstance?.components?.QueryCtrl&&Ke.eventBridge.emit(h.Kh.dataError,wt)}if(!at)return{...Ke};if(v.v.angularSupportEnabled&&Ke.datasourceInstance?.components?.QueryCtrl){const jt=Dt.map(Xt=>(0,a.Zr)(Xt));Ke.eventBridge.emit(h.Kh.dataReceived,jt)}return{...Ke,queryResponse:ot,graphResult:sn,tableResult:Dn,rawPrometheusResult:Rn,logsResult:mn,loading:xt===u.Gu.Loading||xt===u.Gu.Streaming,showLogs:!!mn,showMetrics:!!sn,showTable:!!Dn?.length,showTrace:!!St.length,showNodeGraph:!!At.length,showRawPrometheus:!!Qt.length,showFlameGraph:!!Wt.length}}},86297:(Z,O,e)=>{"use strict";e.d(O,{F9:()=>x,b3:()=>a,cD:()=>E,mG:()=>v,ok:()=>y,oz:()=>h});var t=e(62992),n=e(46519),l=e(49922),s=e(20308),i=e(5562),f=e(55935),c=e(81042),o=e(25405),m=e(3032),r=e(19349),u=e(48197),d=e(73257);const g=(0,t.PH)("explore/changeRange"),p=(0,t.PH)("explore/changeRefreshInterval"),E=C=>(P,D)=>{const{syncedTimes:M}=D().explore;M?(P(a({...C,exploreId:m.Kd.left})),P((0,d.aA)(m.Kd.left,{preserveCache:!0})),P(a({...C,exploreId:m.Kd.right})),P((0,d.aA)(m.Kd.right,{preserveCache:!0}))):(P(a({...C})),P((0,d.aA)(C.exploreId,{preserveCache:!0})))};function h(C,P){return p({exploreId:C,refreshInterval:P})}const a=C=>(P,D)=>{const{exploreId:M,absoluteRange:b,rawRange:R}=C,B=D().explore[M],w=(0,o.Z)(D().user),A=(0,o.i)(D().user),{range:I}=B;let F=I.raw;b&&(F={from:(0,n.GY)(w,b.from),to:(0,n.GY)(w,b.to)}),R&&(F=R);const K=(0,f.OQ)(w,F,A),W={from:K.from.valueOf(),to:K.to.valueOf()},U={time:K.raw,refresh:!1,timepicker:{},getTimezone:()=>w,timeRangeUpdated:N=>{P(E({exploreId:M,rawRange:N}))}};(0,r.$t)().init(U),(0,s.J)().updateTimeRange((0,r.$t)().timeRange()),P(g({exploreId:M,range:K,absoluteRange:W}))};function v(C){return(P,D)=>{if(C===m.Kd.left){const b=D().explore.left;P(E({exploreId:m.Kd.right,rawRange:b.range.raw}))}else{const b=D().explore.right;P(E({exploreId:m.Kd.left,rawRange:b.range.raw}))}const M=D().explore.syncedTimes;P((0,u.tl)({syncedTimes:!M})),P((0,u.og)())}}function x(){return(C,P)=>{const D=(0,o.Z)(P().user),M=(0,o.i)(P().user),b=P().explore.left,R=(0,f.OQ)(D,b.range.raw,M),B={from:R.from.valueOf(),to:R.to.valueOf()};C(a({exploreId:m.Kd.left,absoluteRange:B}));const w=P().explore.right;if(w){const A=(0,f.OQ)(D,w.range.raw,M),I={from:A.from.valueOf(),to:A.to.valueOf()};C(a({exploreId:m.Kd.right,absoluteRange:I}))}C((0,u.og)())}}const y=(C,P)=>{if(p.match(P)){const{refreshInterval:D}=P.payload,M=i.dP.isLive(D),b=(0,f.Oy)(D),R=(0,c.j0)(C.logsResult,b);return i.dP.isLive(C.refreshInterval)&&!M&&(0,f.RZ)(C.querySubscription),{...C,refreshInterval:D,queryResponse:{...C.queryResponse,state:M?l.Gu.Streaming:l.Gu.Done},isLive:M,isPaused:M?!1:C.isPaused,loading:M,logsResult:R}}if(g.match(P)){const{range:D,absoluteRange:M}=P.payload;return{...C,range:D,absoluteRange:M}}return C}},16983:(Z,O,e)=>{"use strict";e.d(O,{M7:()=>v,lp:()=>p,M0:()=>x,D:()=>a,r_:()=>E,t5:()=>g,FG:()=>d});var t=e(82897),n=e(49922),l=e(69311),s=e(58379),i=e(55935),f=e(91162),c=e(98589),o=e(46519);const m=y=>{let C=y.raw.from;(0,o.v9)(C)&&(C=C.valueOf().toString(10));let P=y.raw.to;return(0,o.v9)(P)&&(P=P.valueOf().toString(10)),{from:C,to:P}},r={from:"now-6h",to:"now"},u="grafana.explore.style.graph",d=y=>{s.Z.set(u,y)},g=()=>({containerWidth:0,datasourceInstance:null,datasourceMissing:!1,history:[],queries:[],initialized:!1,range:{from:null,to:null,raw:r},absoluteRange:{from:null,to:null},scanning:!1,loading:!1,queryKeys:[],isLive:!1,isPaused:!1,queryResponse:p(),tableResult:null,graphResult:null,logsResult:null,rawPrometheusResult:null,eventBridge:null,cache:[],richHistory:[],supplementaryQueries:(0,c.DK)(),panelsState:{}}),p=()=>({state:n.Gu.NotStarted,series:[],timeRange:(0,l.JK)(),graphFrames:[],logsFrames:[],traceFrames:[],nodeGraphFrames:[],flameGraphFrames:[],tableFrames:[],rawPrometheusFrames:[],rawPrometheusResult:null,graphResult:null,logsResult:null,tableResult:null});async function E(y,C){let P;try{P=await(0,f.ak)().get(C)}catch{P=await(0,f.ak)().get()}if(P.init)try{P.init()}catch(b){console.error(b)}const D=`grafana.explore.history.${P.meta?.id}`,M=s.Z.getObject(D,[]);return s.Z.set((0,i.I$)(y),P.uid),{history:M,instance:P}}function h(y){let C=(0,t.mapValues)(y,P=>(0,t.isObject)(P)?h(P):P);if(C=(0,t.omitBy)(C,t.isEmpty),!(0,t.isEmpty)(C))return C}function a(y){return{datasource:y.datasourceInstance?.uid||"",queries:y.queries.map(i.uC),range:m(y.range),panelsState:h(y.panelsState)}}function v(y){const C={from:y.from,to:y.to};return Object.entries(C).map(([D,M])=>`${encodeURIComponent(D)}=${encodeURIComponent(M.toString())}`).join("&")}function x(y,C){const P=v(C),D=y.findIndex(b=>b.key===P);return D>=0?y[D].value:void 0}},41611:(Z,O,e)=>{"use strict";e.d(O,{a_:()=>a,lt:()=>y,u8:()=>x});var t=e(68404),n=e(94847),l=e(28151),s=e(40400),i=e(89029),f=e(20308),c=e(41818),o=e(82002),m=e(27854),r=e.n(m),u=e(55935);const d=(P,D,M)=>{let b={},R={};if(P.type===l.Eu.Regex&&P.expression){const B=new RegExp(P.expression,"gi"),w=D.matchAll(B);for(const A of w)A.groups?R=A.groups:R[P.mapValue||M]=A[1]||A[0]}else P.type===l.Eu.Logfmt&&(R=r().parse(D));return Object.keys(R).forEach(B=>{const w=typeof R[B]=="string"?R[B]:(0,u.Xh)(R[B]);b[B]={value:w}}),b};var g=e(64703);const E=[P=>!P.internal||o.Vt.hasAccessToExplore()],h="grafana_data_link_clicked",a=P=>{const{field:D,vars:M,splitOpenFn:b,range:R,rowIndex:B,dataFrame:w}=P,A={...M||{}};A.__value={value:{raw:D.values.get(B)},text:"Raw value"};let I;return w&&(I=(0,n.z)({frame:w,rowIndex:B}),A.__data={value:{name:w.name,refId:w.refId,fields:I},text:"Data"},w.fields.forEach(F=>{I&&I[F.name]&&(A[F.name]={value:I[F.name]})}),A.__targetField={value:I[D.name]}),D.config.links?D.config.links.filter(W=>E.every(U=>U(W,A))).map(W=>{if(W.internal){let U={};W.internal?.transformations&&W.internal?.transformations.forEach(z=>{let G;z.field?G=w?.fields.find(j=>j.name===z.field)?.values.get(B):G=D.values.get(B),U={...U,...d(z,G,D.name)}});const N={...A,...U},S=y(W,N);let Y=[];if(S.variables.length===0){const z=D.name.toString();Y.push({variableName:z,value:"",match:""})}else Y=S.variables;const Q=z=>{(0,c.ff)(h,{origin:W.origin||l.n1.Datasource,app:s.zj.Explore,internal:!0}),b?.(z)};return S.allVariablesDefined?{...(0,i._)({link:W,internalLink:W.internal,scopedVars:N,range:R,field:D,onClickFn:P.splitOpenFn?G=>Q(G):void 0,replaceVariables:(0,f.J)().replace.bind((0,f.J)())}),variables:Y}:void 0}else{const U=(Y,Q)=>(0,f.J)().replace(Y,{...Q,...A}),N=(0,g.Bq)().getDataLinkUIModel(W,U,D);N.title||(N.title=v(N.href));const S=N.onClick;return N.onClick=(...Y)=>{(0,c.ff)(h,{origin:W.origin||l.n1.Datasource,app:s.zj.Explore,internal:!1}),S?S?.apply(...Y):N.target==="_blank"?window.open(N.href):window.location.href=N.href},N}}).filter(W=>!!W):[]};function v(P){P.indexOf("://")<0&&(P=`http://${P}`);let D;try{D=new URL(P).hostname}catch{D=P}return D}function x(P,D){return(0,t.useCallback)((M,b)=>M.fields.flatMap(R=>R.config?.links&&R.config?.links.length?a({field:R,rowIndex:b,range:P,dataFrame:M,splitOpenFn:D}):[]),[P,D])}function y(P,D){const M=[];return(0,f.J)().replace.bind((0,f.J)())(C(P),D,void 0,M),{variables:M,allVariablesDefined:M.every(R=>R.found)}}function C(P){let D="",M;for(M in P)typeof P[M]=="string"?D+=" "+P[M]:typeof P[M]=="object"&&(D+=" "+C(P[M]));return D}},98589:(Z,O,e)=>{"use strict";e.d(O,{B9:()=>g,DK:()=>p,SY:()=>u,Z9:()=>a});var t=e(82897),n=e.n(t),l=e(84946),s=e(12877),i=e(95515),f=e(446),c=e(90595),o=e(49922),m=e(37959),r=e(58379);const u=[c.v8.LogsVolume,c.v8.LogsSample],d=v=>`grafana.explore.logs.enable${v}`,g=(v,x)=>{r.Z.set(d(x),v?"true":"false")},p=()=>{let v={[c.v8.LogsVolume]:{enabled:!0},[c.v8.LogsSample]:{enabled:!1}};for(const x of u){if(x===c.v8.LogsVolume){const C="grafana.explore.logs.enableVolumeHistogram",P=r.Z.get(C);if(P){v[x]={enabled:P==="true"},g(P==="true",c.v8.LogsVolume),localStorage.removeItem(C);continue}}if(x===c.v8.LogsSample)continue;r.Z.get(d(x))==="false"&&(v[x]={enabled:!1})}return v},E=(v,x,y)=>new l.y(C=>{v.subscribe(P=>{if(P.logsResult&&P.logsResult.rows&&P.logsResult.visibleRange&&P.logsResult.bucketSize!==void 0&&P.state===o.Gu.Done){const D=P.logsResult.bucketSize,M=x.map(B=>B.refId),b=(0,t.groupBy)(P.logsResult.rows,"dataFrame.refId");let R=[];M.forEach(B=>{if(b[B]?.length){const w=(0,m.Nw)(b[B],D);R=[...R,...w];const A={logsVolumeType:c.o8.Limited,absoluteRange:P.logsResult?.visibleRange,datasourceName:y,sourceQuery:x.find(I=>I.refId===B)};C.next({data:R.map(I=>{const F=I.meta?.custom||{};return{...I,meta:{custom:{...F,...A}}}}),state:P.state})}}),C.complete()}})}),h=(v,x,y,C)=>{if(v===c.v8.LogsVolume)return E(x,y,C)},a=(v,x,y,C)=>{const D=v.map(({datasource:M,targets:b},R)=>{const B=(0,t.cloneDeep)(y);return B.requestId=`${B.requestId||""}_${R}`,B.targets=b,(0,c.mN)(M,x)?M.getDataProvider(x,B):h(x,C,b,M.name)}).filter(o.fQ);if(D.length!==0)return D.length===1?D[0]:(0,s.T)(...D).pipe((0,f.R)((M,b)=>M.errors&&M.errors.length||b.state===o.Gu.NotStarted?M:b.state===o.Gu.Loading&&M.state===o.Gu.NotStarted?{...M,state:o.Gu.Loading}:b.state&&b.state!==o.Gu.Done?M:{...M,data:[...M.data,...b.data],state:o.Gu.Done},{data:[],state:o.Gu.NotStarted}),(0,i.E)())}},47471:(Z,O,e)=>{"use strict";e.d(O,{mV:()=>P,bE:()=>C});var t=e(49372),n=e(39859),l=e(24699),s=e(22069),i=e(20308),f=e(86647),c=e(68404),o=e(81764),m=e(53217),r=e(5076),u=e(71263),d=e(75897),g=e(436),p=e(17349),E=e(97573),h=e(51935);const a=14;function v(){const D=(0,c.useRef)({}),M=(0,c.useCallback)(R=>{switch(R){case E.Us.math:case E.Us.reduce:case E.Us.resample:case E.Us.threshold:return D.current[R];case E.Us.classic:return}},[]),b=(0,c.useCallback)((R,B)=>{switch(R){case E.Us.math:D.current.math=B;break;case E.Us.reduce:case E.Us.resample:case E.Us.resample:D.current.reduce=B,D.current.resample=B,D.current.threshold=B;break}},[]);return{getCachedExpression:M,setCachedExpression:b}}function x(D){const{query:M,queries:b,onRunQuery:R,onChange:B}=D,{getCachedExpression:w,setCachedExpression:A}=v();(0,c.useEffect)(()=>{A(M.type,M.expression)},[M.expression,M.type,A]);const I=(0,c.useCallback)(W=>{const U=w(W.value),N=(0,h.J)({...M,type:W.value});B({...N,expression:U??N.expression})},[M,B,w]),F=()=>{const W=b.filter(U=>M.refId!==U.refId).map(U=>({value:U.refId,label:U.refId}));switch(M.type){case E.Us.math:return c.createElement(u.Z,{onChange:B,query:M,labelWidth:a,onRunQuery:R});case E.Us.reduce:return c.createElement(d.v,{refIds:W,onChange:B,labelWidth:a,query:M});case E.Us.resample:return c.createElement(g.p,{query:M,labelWidth:a,onChange:B,refIds:W});case E.Us.classic:return c.createElement(r.I,{onChange:B,query:M,refIds:W});case E.Us.threshold:return c.createElement(p.M,{onChange:B,query:M,labelWidth:a,refIds:W})}},K=E._M.find(W=>W.value===M.type);return c.createElement("div",null,c.createElement(o._,{label:"Operation",labelWidth:a},c.createElement(m.Ph,{options:E._M,value:K,onChange:I,width:25})),F())}class y extends s.CK{constructor(M){super(M),this.instanceSettings=M}applyTemplateVariables(M,b){const R=(0,i.J)();return{...M,expression:R.replace(M.expression,b),window:R.replace(M.window,b)}}getCollapsedText(M){return`Expression: ${M.type}`}query(M){let b=M.targets.map(async B=>{const w=await(0,f.F)().get(B.datasource);return w.interpolateVariablesInQueries?w?.interpolateVariablesInQueries([B],M.scopedVars)[0]:B});return(0,t.D)(Promise.all(b)).pipe((0,n.z)(B=>super.query({...M,targets:B})))}newQuery(M){return{refId:"--",datasource:s.hr,type:M?.type??E.Us.math,...M}}}const C={id:-100,uid:E.Yq,name:s.hr.name,type:s.hr.type,access:"proxy",meta:{baseUrl:"",module:"",type:l.zV.datasource,name:s.hr.type,id:s.hr.type,info:{author:{name:"Grafana Labs"},logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"},description:"Adds expression support to Grafana",screenshots:[],links:[],updated:"",version:""}},jsonData:{},readOnly:!0},P=new y(C);P.meta={id:s.hr.type,info:{logos:{small:"public/img/icn-datasource.svg",large:"public/img/icn-datasource.svg"}}},P.components={QueryEditor:x}},5076:(Z,O,e)=>{"use strict";e.d(O,{I:()=>x});var t=e(68404),n=e(11543),l=e(81764),s=e(31403),i=e(39904),f=e(51935),c=e(9892),o=e(26418),m=e(72648),r=e(44342),u=e(53217),d=e(46967),g=e(67162);const p=g.Z.reducerTypes.map(y=>({label:y.text,value:y.value})),E=g.Z.evalOperators.map(y=>({label:y.text,value:y.value})),h=g.Z.evalFunctions.map(y=>({label:y.text,value:y.value})),a=({condition:y,index:C,onChange:P,onRemoveCondition:D,refIds:M})=>{const b=(0,m.wW)(v),R=W=>{P({...y,operator:{type:W.value}})},B=W=>{P({...y,reducer:{type:W.value,params:[]}})},w=W=>{P({...y,query:{params:[W.value]}})},A=W=>{P({...y,evaluator:{params:y.evaluator.params,type:W.value}})},I=(W,U)=>{const N=parseFloat(W.currentTarget.value),S=[...y.evaluator.params];S[U]=N,P({...y,evaluator:{...y.evaluator,params:S}})},F=c.css`
    width: 60px;
  `,K=y.evaluator.type===g.$.IsWithinRange||y.evaluator.type===g.$.IsOutsideRange;return t.createElement(o.Stack,{direction:"row"},t.createElement("div",{style:{flex:1}},t.createElement(n.Z,null,C===0?t.createElement("div",{className:(0,c.cx)(b.button,F)},"WHEN"):t.createElement(r.d,{className:(0,c.cx)(b.buttonSelectText,F),options:E,onChange:R,value:E.find(W=>W.value===y.operator.type)}),t.createElement(u.Ph,{options:p,onChange:B,width:20,value:p.find(W=>W.value===y.reducer.type)}),t.createElement("div",{className:b.button},"OF"),t.createElement(u.Ph,{onChange:w,options:M,width:"auto",value:M.find(W=>W.value===y.query.params[0])})),t.createElement(n.Z,null,t.createElement(r.d,{className:b.buttonSelectText,options:h,onChange:A,value:h.find(W=>W.value===y.evaluator.type)}),K?t.createElement(t.Fragment,null,t.createElement(d.I,{type:"number",width:10,onChange:W=>I(W,0),value:y.evaluator.params[0]}),t.createElement("div",{className:b.button},"TO"),t.createElement(d.I,{type:"number",width:10,onChange:W=>I(W,1),value:y.evaluator.params[1]})):y.evaluator.type!==g.$.HasNoValue?t.createElement(d.I,{type:"number",width:10,onChange:W=>I(W,0),value:y.evaluator.params[0]}):null)),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:()=>D(C)},t.createElement(i.J,{name:"trash-alt"})))},v=y=>{const C=c.css`
    color: ${y.colors.primary.text};
    font-size: ${y.typography.bodySmall.fontSize};
  `;return{buttonSelectText:C,button:(0,c.cx)(c.css`
        display: flex;
        align-items: center;
        border-radius: ${y.shape.borderRadius(1)};
        font-weight: ${y.typography.fontWeightMedium};
        border: 1px solid ${y.colors.border.weak};
        white-space: nowrap;
        padding: 0 ${y.spacing(1)};
        background-color: ${y.colors.background.canvas};
      `,C)}},x=({onChange:y,query:C,refIds:P})=>{const D=(R,B)=>{C.conditions&&y({...C,conditions:[...C.conditions.slice(0,B),R,...C.conditions.slice(B+1)]})},M=()=>{if(C.conditions){const R=C.conditions.at(-1)?.query?.params??[],B={...f.R,query:{params:R}};y({...C,conditions:C.conditions.length>0?[...C.conditions,B]:[B]})}},b=R=>{if(C.conditions){const B=C.conditions[R],w=C.conditions.filter(A=>A!==B).map((A,I)=>I===0?{...A,operator:{type:"when"}}:A);y({...C,conditions:w})}};return t.createElement("div",null,t.createElement(n.Z,null,t.createElement(l._,{label:"Conditions",labelWidth:14},t.createElement("div",null,C.conditions?.map((R,B)=>{if(R)return t.createElement(a,{key:B,index:B,condition:R,onChange:w=>D(w,B),onRemoveCondition:b,refIds:P})})))),t.createElement(s.zx,{variant:"secondary",type:"button",onClick:M},t.createElement(i.J,{name:"plus-circle"})))}},71263:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>u});var t=e(9892),n=e(68404),l=e(26418),s=e(72648),i=e(81764),f=e(77117),c=e(39904),o=e(97379),m=e(42042);const r="Math operations on one or more queries. You reference the query by ${refId} ie. $A, $B, $C etc\nThe sum of two scalar values: $A + $B > 10",u=({labelWidth:E,onChange:h,query:a,onRunQuery:v})=>{const x=P=>{h({...a,expression:P.target.value})},y=(0,s.wW)(g),C=()=>{a.expression&&v()};return n.createElement(l.Stack,{direction:"row"},n.createElement(i._,{label:n.createElement(f.W,{width:"auto"},n.createElement(m.z,{content:n.createElement("div",{className:y.documentationContainer},n.createElement("header",{className:y.documentationHeader},n.createElement(c.J,{name:"book-open"})," Math operator"),n.createElement("div",null,"Run math operations on one or more queries. You reference the query by ","${refId}"," ie. $A, $B, $C etc.",n.createElement("br",null),"Example: ",n.createElement("code",null,"$A + $B")),n.createElement("header",{className:y.documentationHeader},"Available Math functions"),n.createElement("div",{className:y.documentationFunctions},n.createElement(d,{name:"abs",description:"returns the absolute value of its argument which can be a number or a series"}),n.createElement(d,{name:"is_inf",description:"returns 1 for Inf values (negative or positive) and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_nan",description:"returns 1 for NaN values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_null",description:"returns 1 for null values and 0 for other values. It's able to operate on series or scalar values."}),n.createElement(d,{name:"is_number",description:"returns 1 for all real number values and 0 for non-number. It's able to operate on series or scalar values."}),n.createElement(d,{name:"log",description:"returns the natural logarithm of its argument, which can be a number or a series"}),n.createElement(d,{name:"inf, infn, nan, and null",description:"The inf for infinity positive, infn for infinity negative, nan, and null functions all return a single scalar value that matches its name."}),n.createElement(d,{name:"round",description:"returns a rounded integer value. It's able to operate on series or escalar values."}),n.createElement(d,{name:"ceil",description:"rounds the number up to the nearest integer value. It's able to operate on series or escalar values."}),n.createElement(d,{name:"floor",description:"rounds the number down to the nearest integer value. It's able to operate on series or escalar values."})),n.createElement("div",null,"See our additional documentation on"," ",n.createElement("a",{className:y.documentationLink,target:"_blank",href:"https://grafana.com/docs/grafana/latest/panels/query-a-data-source/use-expressions-to-manipulate-data/about-expressions/#math",rel:"noreferrer"},n.createElement(c.J,{size:"xs",name:"external-link-alt"})," Math expressions"),"."))},n.createElement("span",null,"Expression ",n.createElement(c.J,{name:"info-circle"})))),labelWidth:E,grow:!0,shrink:!0},n.createElement(o.K,{value:a.expression,onChange:x,rows:1,placeholder:r,onBlur:C,style:{minWidth:250,lineHeight:"26px",minHeight:32}})))},d=({name:E,description:h})=>{const a=(0,s.wW)(p);return n.createElement(n.Fragment,null,n.createElement("span",{className:a.name},E),n.createElement("span",{className:a.description},h))},g=E=>({documentationHeader:t.css`
    font-size: ${E.typography.h5.fontSize};
    font-weight: ${E.typography.h5.fontWeight};
  `,documentationLink:t.css`
    color: ${E.colors.text.link};
  `,documentationContainer:t.css`
    display: flex;
    flex: 1;
    flex-direction: column;
    gap: ${E.spacing(2)};

    padding: ${E.spacing(1)} ${E.spacing(2)};
  `,documentationFunctions:t.css`
    display: grid;
    grid-template-columns: max-content auto;
    column-gap: ${E.spacing(2)};
  `}),p=E=>({name:t.css`
    font-weight: ${E.typography.fontWeightBold};
  `,description:t.css`
    font-size: ${E.typography.bodySmall.fontSize};
    color: ${E.colors.text.disabled};
  `})},75897:(Z,O,e)=>{"use strict";e.d(O,{v:()=>c});var t=e(68404),n=e(81764),l=e(46967),s=e(11543),i=e(53217),f=e(97573);const c=({labelWidth:o="auto",onChange:m,refIds:r,query:u})=>{const d=f.SQ.find(y=>y.value===u.reducer),g=y=>{m({...u,expression:y.value})},p=y=>{m({...u,reducer:y.value})},E=y=>{m({...u,settings:y})},h=y=>{let C;switch(y.value){case f.kN.ReplaceNonNumbers:let P=0;u.settings?.mode===f.kN.ReplaceNonNumbers&&(P=u.settings?.replaceWithValue??0),C={mode:f.kN.ReplaceNonNumbers,replaceWithValue:P};break;default:C={mode:y.value}}E(C)},a=y=>{const C=y.currentTarget.valueAsNumber;E({mode:f.kN.ReplaceNonNumbers,replaceWithValue:C??0})},v=u.settings?.mode??f.kN.Strict,x=()=>{if(v===f.kN.ReplaceNonNumbers)return t.createElement(n._,{label:"Replace With",labelWidth:o},t.createElement(l.I,{type:"number",width:10,onChange:a,value:u.settings?.replaceWithValue??0}))};return t.createElement(t.Fragment,null,t.createElement(s.Z,null,t.createElement(n._,{label:"Function",labelWidth:o},t.createElement(i.Ph,{options:f.SQ,value:d,onChange:p,width:20})),t.createElement(n._,{label:"Input",labelWidth:o},t.createElement(i.Ph,{onChange:g,options:r,value:u.expression,width:"auto"}))),t.createElement(s.Z,null,t.createElement(n._,{label:"Mode",labelWidth:o},t.createElement(i.Ph,{onChange:h,options:f.YM,value:v,width:25})),x()))}},436:(Z,O,e)=>{"use strict";e.d(O,{p:()=>c});var t=e(68404),n=e(11543),l=e(81764),s=e(53217),i=e(46967),f=e(97573);const c=({labelWidth:o="auto",onChange:m,refIds:r,query:u})=>{const d=f.Fr.find(v=>v.value===u.downsampler),g=f.r8.find(v=>v.value===u.upsampler),p=v=>{m({...u,window:v.target.value})},E=v=>{m({...u,expression:v.value})},h=v=>{m({...u,downsampler:v.value})},a=v=>{m({...u,upsampler:v.value})};return t.createElement(t.Fragment,null,t.createElement(n.Z,null,t.createElement(l._,{label:"Input",labelWidth:o},t.createElement(s.Ph,{onChange:E,options:r,value:u.expression,width:20}))),t.createElement(n.Z,null,t.createElement(l._,{label:"Resample to",labelWidth:o,tooltip:"10s, 1m, 30m, 1h"},t.createElement(i.I,{onChange:p,value:u.window,width:15})),t.createElement(l._,{label:"Downsample"},t.createElement(s.Ph,{options:f.Fr,value:d,onChange:h,width:25})),t.createElement(l._,{label:"Upsample"},t.createElement(s.Ph,{options:f.r8,value:g,onChange:a,width:25}))))}},17349:(Z,O,e)=>{"use strict";e.d(O,{M:()=>d});var t=e(9892),n=e(68404),l=e(72648),s=e(11543),i=e(81764),f=e(53217),c=e(44342),o=e(46967),m=e(67162),r=e(97573);const u=m.$.IsAbove,d=({labelWidth:E,onChange:h,refIds:a,query:v})=>{const x=(0,l.wW)(p),y={type:"query",evaluator:{type:u,params:[0,0]},query:{params:[]},reducer:{params:[],type:"last"}},C=v.conditions?.length?v.conditions:[y],P=C[0],D=r.Mi.find(w=>w.value===C[0].evaluator?.type),M=w=>{h({...v,expression:w.value})},b=w=>{const A=w.value??u;h({...v,conditions:g(C,{type:A})})},R=(w,A)=>{const I=parseFloat(w.currentTarget.value),F=[...P.evaluator.params];F[A]=I,h({...v,conditions:g(C,{params:F})})},B=P.evaluator.type===m.$.IsWithinRange||P.evaluator.type===m.$.IsOutsideRange;return n.createElement(s.Z,null,n.createElement(i._,{label:"Input",labelWidth:E},n.createElement(f.Ph,{onChange:M,options:a,value:v.expression,width:20})),n.createElement(c.d,{className:x.buttonSelectText,options:r.Mi,onChange:b,value:D}),B?n.createElement(n.Fragment,null,n.createElement(o.I,{type:"number",width:10,onChange:w=>R(w,0),defaultValue:P.evaluator.params[0]}),n.createElement("div",{className:x.button},"TO"),n.createElement(o.I,{type:"number",width:10,onChange:w=>R(w,1),defaultValue:P.evaluator.params[1]})):n.createElement(o.I,{type:"number",width:10,onChange:w=>R(w,0),defaultValue:C[0].evaluator.params[0]||0}))};function g(E,h){return[{...E[0],evaluator:{...E[0].evaluator,...h}}]}const p=E=>({buttonSelectText:t.css`
    color: ${E.colors.primary.text};
    font-size: ${E.typography.bodySmall.fontSize};
    text-transform: uppercase;
  `,button:t.css`
    height: 32px;

    color: ${E.colors.primary.text};
    font-size: ${E.typography.bodySmall.fontSize};
    text-transform: uppercase;

    display: flex;
    align-items: center;
    border-radius: ${E.shape.borderRadius(1)};
    font-weight: ${E.typography.fontWeightBold};
    border: 1px solid ${E.colors.border.medium};
    white-space: nowrap;
    padding: 0 ${E.spacing(1)};
    background-color: ${E.colors.background.primary};
  `})},75e3:(Z,O,e)=>{"use strict";e.d(O,{j:()=>l});var t=e(22069),n=e(97573);const l=s=>{if(!s)return!1;if((0,t.Pr)(s.datasource))return!0;const i=s;return typeof i.type!="string"?!1:Object.values(n.Us).includes(i.type)}},97573:(Z,O,e)=>{"use strict";e.d(O,{Fr:()=>m,Mi:()=>u,SQ:()=>f,Us:()=>s,YM:()=>o,Yq:()=>l,_M:()=>i,kN:()=>c,r8:()=>r});var t=e(21760),n=e(67162);const l="__expr__";var s=(d=>(d.math="math",d.reduce="reduce",d.resample="resample",d.classic="classic_conditions",d.threshold="threshold",d))(s||{});const i=[{value:"math",label:"Math",description:"Free-form math formulas on time series or number data."},{value:"reduce",label:"Reduce",description:"Takes one or more time series returned from a query or an expression and turns each series into a single number."},{value:"resample",label:"Resample",description:"Changes the time stamps in each time series to have a consistent time interval."},{value:"classic_conditions",label:"Classic condition",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the condition."},{value:"threshold",label:"Threshold",description:"Takes one or more time series returned from a query or an expression and checks if any of the series match the threshold condition."}],f=[{value:t.gz.min,label:"Min",description:"Get the minimum value"},{value:t.gz.max,label:"Max",description:"Get the maximum value"},{value:t.gz.mean,label:"Mean",description:"Get the average value"},{value:t.gz.sum,label:"Sum",description:"Get the sum of all values"},{value:t.gz.count,label:"Count",description:"Get the number of values"},{value:t.gz.last,label:"Last",description:"Get the last value"}];var c=(d=>(d.Strict="",d.ReplaceNonNumbers="replaceNN",d.DropNonNumbers="dropNN",d))(c||{});const o=[{value:"",label:"Strict",description:"Result can be NaN if series contains non-numeric data"},{value:"dropNN",label:"Drop Non-numeric Values",description:"Drop NaN, +/-Inf and null from input series before reducing"},{value:"replaceNN",label:"Replace Non-numeric Values",description:"Replace NaN, +/-Inf and null with a constant value before reducing"}],m=[{value:t.gz.last,label:"Last",description:"Fill with the last value"},{value:t.gz.min,label:"Min",description:"Fill with the minimum value"},{value:t.gz.max,label:"Max",description:"Fill with the maximum value"},{value:t.gz.mean,label:"Mean",description:"Fill with the average value"},{value:t.gz.sum,label:"Sum",description:"Fill with the sum of all values"}],r=[{value:"pad",label:"pad",description:"fill with the last known value"},{value:"backfilling",label:"backfilling",description:"fill with the next known value"},{value:"fillna",label:"fillna",description:"Fill with NaNs"}],u=[{value:n.$.IsAbove,label:"Is above"},{value:n.$.IsBelow,label:"Is below"},{value:n.$.IsWithinRange,label:"Is within range"},{value:n.$.IsOutsideRange,label:"Is outside range"}]},51935:(Z,O,e)=>{"use strict";e.d(O,{J:()=>s,R:()=>i});var t=e(21760),n=e(67162),l=e(97573);const s=f=>{switch(f.type){case l.Us.reduce:f.reducer||(f.reducer=t.gz.mean);break;case l.Us.resample:f.downsampler||(f.downsampler=t.gz.mean),f.upsampler||(f.upsampler="fillna"),f.reducer=void 0;break;case l.Us.math:f.expression=void 0;break;case l.Us.classic:f.conditions||(f.conditions=[i]);break;default:f.reducer=void 0}return f},i={type:"query",reducer:{params:[],type:"avg"},operator:{type:"and"},query:{params:[]},evaluator:{params:[0,0],type:n.$.IsAbove}}},61986:(Z,O,e)=>{"use strict";e.d(O,{Go:()=>g,J6:()=>E,OD:()=>d,Pb:()=>u,Uk:()=>v,W7:()=>y,a:()=>p,pz:()=>x,v7:()=>a});var t=e(65583),n=e(83383),l=e(37932),s=e(54899),i=e(659),f=e(60499),c=e(77582),o=e(29930),m=e(60492),r=e(15932);function u(C){return async P=>{const D=await o.ae.getFolderByUid(C);P((0,r.G3)(D)),P((0,i.RL)((0,m.B)(D)))}}function d(C){return async P=>{const D=await o.ae.put(`/api/folders/${C.uid}`,{title:C.title,version:C.version});P((0,i.$l)((0,f.AT)("Folder saved"))),P((0,r.G3)(D)),l.E1.push(n.u.stripBaseFromUrl(`${D.url}/settings`))}}function g(C){return async()=>{await o.ae.delete(`/api/folders/${C}?forceDeleteRules=false`),l.E1.push("/dashboards")}}function p(C){return async P=>{const D=await o.ae.get(`/api/folders/${C}/permissions`);P((0,r.R7)(D))}}function E(C){return async P=>{try{await(0,t.n)(o.ae.fetch({method:"GET",showErrorAlert:!1,showSuccessAlert:!1,url:`/api/folders/${C}/permissions`})),P((0,r.$$)(!0))}catch(D){(0,s.kW)(D)&&D.status!==403&&P((0,i.$l)((0,f.ZR)("Error checking folder permissions",D.data?.message))),P((0,r.$$)(!1))}}}function h(C){return{userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}}function a(C,P){return async(D,M)=>{const b=M().folder,R=[];for(const B of b.permissions){if(B.inherited)continue;const w=h(B);C===B&&(w.permission=P),R.push(w)}await o.ae.post(`/api/folders/${b.uid}/permissions`,{items:R}),await D(p(b.uid))}}function v(C){return async(P,D)=>{const M=D().folder,b=[];for(const R of M.permissions)R.inherited||R===C||b.push(h(R));await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:b}),await P(p(M.uid))}}function x(C){return async(P,D)=>{const M=D().folder,b=[];for(const R of M.permissions)R.inherited||b.push(h(R));b.push({userId:C.userId,teamId:C.teamId,role:C.role,permission:C.permission}),await o.ae.post(`/api/folders/${M.uid}/permissions`,{items:b}),await P(p(M.uid))}}function y(C,P){return async D=>{const M=await(0,s.i)().post("/api/folders",{title:C,parentUid:P});await c.Vt.fetchUserPermissions(),D((0,i.$l)((0,f.AT)("Folder Created","OK"))),l.E1.push(n.u.stripBaseFromUrl(M.url))}}},60492:(Z,O,e)=>{"use strict";e.d(O,{B:()=>s,_:()=>i});var t=e(35645),n=e(82002),l=e(81168);function s(f){const c={icon:"folder",id:"manage-folder",subTitle:"Manage folder dashboards and permissions",url:"",text:f.title,breadcrumbs:[{title:"Dashboards",url:"dashboards"}],children:[{active:!1,icon:"apps",id:`folder-dashboards-${f.uid}`,text:"Dashboards",url:f.url}]};return c.children.push({active:!1,icon:"library-panel",id:`folder-library-panels-${f.uid}`,text:"Panels",url:`${f.url}/library-panels`}),n.Vt.hasPermission(l.AccessControlAction.AlertingRuleRead)&&t.v.unifiedAlertingEnabled&&c.children.push({active:!1,icon:"bell",id:`folder-alerting-${f.uid}`,text:"Alert rules",url:`${f.url}/alerting`}),f.canAdmin&&c.children.push({active:!1,icon:"lock",id:`folder-permissions-${f.uid}`,text:"Permissions",url:`${f.url}/permissions`}),f.canSave&&c.children.push({active:!1,icon:"cog",id:`folder-settings-${f.uid}`,text:"Settings",url:`${f.url}/settings`}),c}function i(f){const c=s({id:1,uid:"loading",title:"Loading",url:"url",canSave:!0,canEdit:!0,canAdmin:!0,canDelete:!0,version:0});return c.children[f].active=!0,{main:c,node:c.children[f]}}},15932:(Z,O,e)=>{"use strict";e.d(O,{$$:()=>o,G3:()=>f,R7:()=>i,Ss:()=>c,ZP:()=>r});var t=e(62992),n=e(2024);const l={id:0,uid:"loading",title:"loading",url:"",canSave:!1,canDelete:!1,hasChanged:!1,version:1,permissions:[],canViewFolderPermissions:!1},s=(0,t.oM)({name:"folder",initialState:l,reducers:{loadFolder:(u,d)=>({...u,...d.payload,hasChanged:!1}),setFolderTitle:(u,d)=>({...u,title:d.payload,hasChanged:d.payload.trim().length>0}),loadFolderPermissions:(u,d)=>({...u,permissions:(0,n.A)(d.payload)}),setCanViewFolderPermissions:(u,d)=>(u.canViewFolderPermissions=d.payload,u)}}),{loadFolderPermissions:i,loadFolder:f,setFolderTitle:c,setCanViewFolderPermissions:o}=s.actions,r={folder:s.reducer}},74311:(Z,O,e)=>{"use strict";e.d(O,{Q:()=>m});var t=e(9892),n=e(68404),l=e(72648),s=e(53217),i=e(45253),f=e(7804),c=e(73063);const o=[{label:"Countries",description:"Lookup countries by name, two letter code, or three letter code",value:c.LI},{label:"USA States",description:"Lookup states by name or 2 ",value:"public/gazetteer/usa-states.json"},{label:"Airports",description:"Lookup airports by id or code",value:"public/gazetteer/airports.geojson"}],m=({value:u,onChange:d,context:g,item:p})=>{const E=r((0,l.l4)()),[h,a]=(0,n.useState)(),v=p.settings;(0,n.useEffect)(()=>{async function C(){const P=await(0,c.so)(u);a(P)}C()},[u,a]);const{current:x,options:y}=(0,n.useMemo)(()=>{let C=v?.options?[...v.options]:[...o],P=C?.find(D=>D.value===h?.path);return!P&&h&&(P={label:h.path,value:h.path},C.push(P)),{options:C,current:P}},[h,v?.options]);return n.createElement(n.Fragment,null,n.createElement(s.Ph,{value:x,options:y,onChange:C=>d(C.value),allowCustomValue:!0,formatCreateLabel:C=>`Load from URL: ${C}`}),h&&n.createElement(n.Fragment,null,h.error&&n.createElement(i.b,{title:h.error,severity:"warning"}),h.count&&n.createElement("div",{className:E.keys},n.createElement("b",null,"(",h.count,")"),h.examples(10).map(C=>n.createElement("span",{key:C},C,",")),h.count>10&&" ...")))},r=(0,f.B)(u=>({keys:t.css`
      margin-top: 4px;
      text-overflow: ellipsis;
      overflow: hidden;
      white-space: nowrap;

      > span {
        margin-left: 4px;
      }
    `}))},71575:(Z,O,e)=>{"use strict";e.d(O,{C:()=>a});var t=e(14582),n=e(40538),l=e(74311),s=e(9892),i=e(68404),f=e(68183),c=e(72648),o=e(45253),m=e(39904),r=e(53217),u=e(52081),d=e(43524);const g=[{value:n.q1.Auto,label:"Auto",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.autoOption,description:"Automatically identify location data based on default field names"},{value:n.q1.Coords,label:"Coords",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.coords.option,description:"Specify latitude and longitude fields"},{value:n.q1.Geohash,label:"Geohash",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.geohash.option,description:"Specify geohash field"},{value:n.q1.Lookup,label:"Lookup",ariaLabel:f.wl.components.Transforms.SpatialOperations.location.lookup.option,description:"Specify Gazetteer and lookup field"}],p="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/geomap/#location",E=({value:v,onChange:x,context:y,item:C})=>{const[P,D]=(0,i.useState)();(0,i.useEffect)(()=>{C.settings?.source&&C.settings?.data?.length&&C.settings.data[0]&&(0,d.cJ)(C.settings.source).then(R=>{C.settings&&C.settings.data&&D((0,d.g6)(C.settings.data[0],R))})},[C.settings]);const M=(0,c.wW)(h),b=()=>{if(P){if(P.warning)return i.createElement(o.b,{title:P.warning,severity:"warning",buttonContent:i.createElement(m.J,{name:"question-circle",size:"xl"}),className:M.alert,onRemove:()=>{const R=window.open(p,"_blank","noopener,noreferrer");R&&(R.opener=null)}});if(v===n.q1.Auto&&P.description)return i.createElement("span",null,P.description)}return null};return i.createElement(i.Fragment,null,i.createElement(r.Ph,{options:g,value:v,onChange:R=>{x(R.value)}}),i.createElement(u.Lh,{className:M.hGroup},b()))},h=v=>({alert:s.css`
      & div {
        padding: 4px;
      }
      margin-bottom: 0px;
      margin-top: 5px;
      padding: 2px;
    `,hGroup:s.css`
      & div {
        width: 100%;
      }
    `});function a(v,x,y,C,P){switch(y.addCustomEditor({id:"modeEditor",path:`${x}mode`,name:"Location Mode",editor:E,settings:{data:P,source:C}}),C?.mode){case n.q1.Coords:y.addFieldNamePicker({path:`${x}latitude`,name:"Latitude field",settings:{filter:D=>D.type===t.fS.number,noFieldsMessage:"No numeric fields found"}}).addFieldNamePicker({path:`${x}longitude`,name:"Longitude field",settings:{filter:D=>D.type===t.fS.number,noFieldsMessage:"No numeric fields found"}});break;case n.q1.Geohash:y.addFieldNamePicker({path:`${x}geohash`,name:"Geohash field",settings:{filter:D=>D.type===t.fS.string,noFieldsMessage:"No strings fields found"}});break;case n.q1.Lookup:y.addFieldNamePicker({path:`${x}lookup`,name:"Lookup field",settings:{filter:D=>D.type===t.fS.string,noFieldsMessage:"No strings fields found"}}).addCustomEditor({id:"gazetteer",path:`${x}gazetteer`,name:"Gazetteer",editor:l.Q})}}},50466:(Z,O,e)=>{"use strict";e.d(O,{EK:()=>g,Fh:()=>p,ie:()=>d,uZ:()=>r,zS:()=>u});var t=e(63897),n=e(30292),l=e(17792),s=e(29501),i=e(14582),f=e(19695),c=e(14573);function o(h){if(!h?.length)return;const a=[16,8,4,2,1],v="0123456789bcdefghjkmnpqrstuvwxyz";let x=!0;const y=[],C=[];y[0]=-90,y[1]=90,C[0]=-180,C[1]=180;let P;h.split("").forEach(b=>{P=v.indexOf(b),a.forEach(R=>{m(x?C:y,P,R),x=!x})});const D=(y[0]+y[1])/2;return[(C[0]+C[1])/2,D]}function m(h,a,v){a&v?h[0]=(h[0]+h[1])/2:h[1]=(h[0]+h[1])/2}function r(h){return{name:h.name??"Point",type:i.fS.geo,values:new f.G(h.values.toArray().map(a=>{const v=o(a);if(v)return new t.Z((0,s.mi)(v))})),config:E}}function u(h,a){const v=new Array(h.values.length);for(let x=0;x<h.values.length;x++){const y=h.values.get(x),C=a.values.get(x);y===null||C===null||(v[x]=new t.Z((0,s.mi)([y,C])))}return{name:"Point",type:i.fS.geo,values:new f.G(v),config:E}}function d(h,a){const v=a.values.length,x=new Array(v);for(let y=0;y<v;y++)x[y]=h.find(a.values.get(y))?.geometry();return{name:"Geometry",type:i.fS.geo,values:new f.G(x),config:E}}function g(h,a){const v=h.values.toArray(),x=a.values.toArray();if(!v||!x)throw"missing src/dest";if(v.length!==x.length)throw"Source and destination field lengths do not match";const y=h.values.length,C=new Array(y);for(let P=0;P<y;P++){const D=v[P],M=x[P];D&&M?C[P]=new n.Z([D,M]):D?C[P]=D:M&&(C[P]=M)}return{name:"Geometry",type:i.fS.geo,values:new f.G(C),config:E}}function p(h,a){const v=h.values.toArray(),x=a.values.toArray();if(!v||!x)throw"missing src/dest";if(v.length!==x.length)throw"Source and destination field lengths do not match";const y=h.values.length,C=new Array(y);for(let P=0;P<y;P++){const D=v[P],M=x[P];D&&M&&(C[P]=new l.Z([(0,c.Lb)(D),(0,c.Lb)(M)]))}return{name:"Geometry",type:i.fS.geo,values:new f.G(C),config:E}}const E=Object.freeze({custom:{hideFrom:{tooltip:!0}}})},73063:(Z,O,e)=>{"use strict";e.d(O,{LI:()=>h,so:()=>a});var t=e(55839),n=e(63897),l=e(16911),s=e(14582),i=e(54899),f=e(69396),c=e(19695);function o(v){const x=new f.Z().readFeatures(v,{featureProjection:"EPSG:3857"}),y=x.length,C=new Array(y).fill(null),P=[],D=new Map,M=w=>{let A=D.get(w);return A||(A={types:new Set,values:new Array(y).fill(null),count:0},P.push(w),D.set(w,A)),A},b=(...w)=>{for(const A of w)if(!D.has(A))return A;return"___"+w[0]},R={types:new Set,values:new Array(y).fill(null),count:0};for(let w=0;w<y;w++){const A=x[w];C[w]=A.getGeometry();const I=A.getId();I!=null&&(R.values[w]=I,R.types.add((0,l.DP)(I)),R.count++);for(const F of A.getKeys()){const K=A.get(F);if(K===C[w]||K==null)continue;const W=M(F);W.values[w]=K,W.types.add((0,l.DP)(K)),W.count++}}const B=[];if(R.count>0){const w=m(R);B.push({name:b("id","_id","__id"),type:w,values:new c.G(R.values),config:{}})}B.push({name:b("geo","geometry"),type:s.fS.geo,values:new c.G(C),config:{}});for(const w of P){const A=D.get(w);if(!A)continue;const I=m(A);B.push({name:w,type:I,values:new c.G(A.values),config:{}})}return{fields:B,length:y}}function m(v){return v.count<1?s.fS.other:v.types.size>1?(v.values=v.values.map(x=>x!=null?`${x}`:x),s.fS.string):v.types.values().next().value}var r=e(50466),u=e(29501);function d(v,x){let y=0;const C=new Map;for(const P of x){const D=new n.Z((0,u.mi)([P.longitude,P.latitude])),M={point:()=>D,geometry:()=>D};if(P.name&&(C.set(P.name,M),C.set(P.name.toUpperCase(),M)),P.key&&(C.set(P.key,M),C.set(P.key.toUpperCase(),M)),P.keys)for(const b of P.keys)C.set(b,M),C.set(b.toUpperCase(),M);y++}return{path:v,find:P=>{let D=C.get(P);return!D&&typeof P=="string"&&(D=C.get(P.toUpperCase())),D},count:y,examples:P=>{const D=[];if(C.size<1)D.push("no values found");else for(const M of C.keys())if(D.push(M),D.length>=P)break;return D}}}function g(v,x){let y;if(Array.isArray(x)){const C=x[0];if(C.latitude&&C.longitude&&(C.key||C.keys))return d(v,x)}else Array.isArray(x?.features)&&x?.type==="FeatureCollection"&&(y=o(x));if(!y)try{y=(0,l.g0)(x)}catch(C){return{path:v,error:`${C}`,find:P=>{},examples:P=>[]}}return p(y,{path:v})}function p(v,x){const y=[];let C,P,D,M,b;for(const w of v.fields)if(w.type===s.fS.geo&&(C=w),!b&&w.type===s.fS.string&&(b=w),w.name){x.keys&&x.keys.includes(w.name)&&y.push(w);const A=w.name.toUpperCase();switch(A){case"LAT":case"LATITUTE":P=w;break;case"LON":case"LNG":case"LONG":case"LONGITUE":D=w;break;case"GEOHASH":M=w;break;case"ID":case"UID":case"KEY":case"CODE":x.keys||y.push(w);break;default:x.keys||(A.endsWith("_ID")||A.endsWith("_CODE"))&&y.push(w)}}!y.length&&b&&y.push(b);let R=!1;C?R=C.values.get(0).getType()==="Point":M?(C=(0,r.uZ)(M),R=!0):P&&D&&(C=(0,r.zS)(D,P),R=!0);const B=new Map;return y.forEach(w=>{w.values.toArray().forEach((A,I)=>{const F=`${A}`;B.set(F.toUpperCase(),I),B.set(F,I)})}),{path:x.path,find:w=>{const A=B.get(w);if(A!=null){const I=C?.values.get(A);return{frame:v,index:A,point:()=>!I||R?I:new n.Z((0,t.qg)(I.getExtent())),geometry:()=>I}}},examples:w=>{const A=[];for(let I of B.keys())if(A.push(I),A.length>w)break;return A},frame:()=>v,count:v.length}}const E={},h="public/gazetteer/countries.json";async function a(v){v||(v=h);let x=E[v];if(!x){try{const y=await(0,i.i)().get(v);x=g(v,y)}catch(y){console.warn("Error loading placename lookup",v,y),x={path:v,error:"Error loading URL",find:C=>{},examples:C=>[]}}E[v]=x}return x}},43524:(Z,O,e)=>{"use strict";e.d(O,{cJ:()=>u,g6:()=>g});var t=e(89890),n=e(14582),l=e(3249),s=e(85854),i=e(40538),f=e(50466),c=e(73063);function o(p){return E=>{for(const h of E.fields)if(p(h,E,[]))return h}}function m(p){return E=>{for(const h of E.fields){if(p.has(h.name.toLowerCase()))return h;const a=(0,t.C)(h,E);if(p.has(a))return h}}}const r={mode:i.q1.Auto,geohash:m(new Set(["geohash"])),latitude:m(new Set(["latitude","lat"])),longitude:m(new Set(["longitude","lon","lng"])),h3:m(new Set(["h3"])),wkt:m(new Set(["wkt"])),lookup:m(new Set(["lookup"])),geo:p=>p.fields.find(E=>E.type===n.fS.geo)};async function u(p){const E={...r,mode:p?.mode??i.q1.Auto};switch(E.gazetteer=await(0,c.so)(p?.gazetteer),E.mode){case i.q1.Geohash:p?.geohash?E.geohash=o((0,l.sq)({id:s.mi.byName,options:p.geohash})):E.geohash=()=>{};break;case i.q1.Lookup:p?.lookup?E.lookup=o((0,l.sq)({id:s.mi.byName,options:p.lookup})):E.lookup=()=>{};break;case i.q1.Coords:p?.latitude?E.latitude=o((0,l.sq)({id:s.mi.byName,options:p.latitude})):E.latitude=()=>{},p?.longitude?E.longitude=o((0,l.sq)({id:s.mi.byName,options:p.longitude})):E.longitude=()=>{};break}return E}function d(p,E){const h={mode:E.mode??i.q1.Auto};if(h.mode===i.q1.Auto){if(h.geo=E.geo(p),h.geo)return h;if(h.latitude=E.latitude(p),h.longitude=E.longitude(p),h.latitude&&h.longitude)return h.mode=i.q1.Coords,h;if(h.geohash=E.geohash(p),h.geohash)return h.mode=i.q1.Geohash,h;if(h.lookup=E.lookup(p),h.lookup)return h.mode=i.q1.Lookup,h}switch(h.mode){case i.q1.Coords:h.latitude=E.latitude(p),h.longitude=E.longitude(p);break;case i.q1.Geohash:h.geohash=E.geohash(p);break;case i.q1.Lookup:h.lookup=E.lookup(p);break}return h}function g(p,E){const h=d(p,E);switch(h.mode){case i.q1.Auto:return h.geo?{field:h.geo}:{warning:"Unable to find location fields"};case i.q1.Coords:return h.latitude&&h.longitude?{field:(0,f.zS)(h.longitude,h.latitude),derived:!0,description:`${h.mode}: ${h.latitude.name}, ${h.longitude.name}`}:{warning:"Select latitude/longitude fields"};case i.q1.Geohash:return h.geohash?{field:(0,f.uZ)(h.geohash),derived:!0,description:`${h.mode}`}:{warning:"Select geohash field"};case i.q1.Lookup:return h.lookup?E.gazetteer?{field:(0,f.ie)(E.gazetteer,h.lookup),derived:!0,description:`${h.mode}: ${E.gazetteer.path}`}:{warning:"Gazetteer not found"}:{warning:"Select lookup field"}}return{warning:"unable to find geometry"}}},90336:(Z,O,e)=>{"use strict";e.d(O,{GY:()=>f,MA:()=>i,nW:()=>s});var t=e(54899),n=e(77582),l=e(81168);const s=(0,l.createAsyncThunk)("users/fetchInvitees",async()=>n.Vt.hasPermission(l.AccessControlAction.OrgUsersAdd)?await(0,t.i)().get("/api/org/invites"):[]),i=(0,l.createAsyncThunk)("users/addInvitee",async(c,{dispatch:o})=>{await(0,t.i)().post("/api/org/invites",c),await o(s())}),f=(0,l.createAsyncThunk)("users/revokeInvite",async c=>(await(0,t.i)().patch(`/api/org/invites/${c}/revoke`,{}),c))},75804:(Z,O,e)=>{"use strict";e.d(O,{ZP:()=>o,wl:()=>s});var t=e(62992),n=e(90336);const l=(0,t.HF)({selectId:m=>m.code}),s=l.getSelectors(),i=l.getInitialState({status:"idle"}),o={invites:(0,t.oM)({name:"invites",initialState:i,reducers:{},extraReducers:m=>{m.addCase(n.nW.pending,r=>{r.status="loading"}).addCase(n.nW.fulfilled,(r,{payload:u})=>{l.setAll(r,u),r.status="succeeded"}).addCase(n.nW.rejected,r=>{r.status="failed"}).addCase(n.GY.fulfilled,(r,{payload:u})=>{l.removeOne(r,u),r.status="succeeded"})}}).reducer}},76647:(Z,O,e)=>{"use strict";e.d(O,{T:()=>g,c:()=>p});var t=e(68404),n=e(70197),l=e(22350),s=e(54899),i=e(24799),f=e(46967),c=e(35029),o=e(31403),m=e(79658),r=e(35287),u=e(86648),d=e(2313);const g=({panel:E,initialFolderUid:h,onDismiss:a})=>{const[v,x]=(0,t.useState)(h),[y,C]=(0,t.useState)(E.title),[P,D]=(0,t.useState)(E.title),[M,b]=(0,t.useState)(!1);(0,t.useEffect)(()=>b(!0),[y]),(0,n.Z)(()=>D(y),350,[y]);const{saveLibraryPanel:R}=(0,d.E)(),B=(0,t.useCallback)(()=>{E.libraryPanel={uid:"",name:y},R(E,v).then(I=>{I instanceof Error||a()})},[E,y,v,a,R]),w=(0,l.Z)(async()=>{try{return!(await(0,u.jh)(y)).some(I=>I.folderUid===v)}catch(I){return(0,s.kW)(I)&&(I.isHandled=!0),!0}finally{b(!1)}},[P,v]),A=!w?.value&&w.value!==void 0&&y===P&&!M;return t.createElement(t.Fragment,null,t.createElement(i.g,{label:(0,r.t)("library-panel.add-modal.name","Library panel name"),invalid:A,error:A?(0,r.t)("library-panel.add-modal.error","Library panel with this name already exists"):""},t.createElement(f.I,{id:"share-panel-library-panel-name-input",name:"name",value:y,onChange:I=>C(I.currentTarget.value)})),t.createElement(i.g,{label:(0,r.t)("library-panel.add-modal.folder","Save in folder"),description:(0,r.t)("library-panel.add-modal.folder-description","Library panel permissions are derived from the folder permissions")},t.createElement(m.Es,{onChange:({uid:I})=>x(I),initialFolderUid:h,inputId:"share-panel-library-panel-folder-picker"})),t.createElement(c.u.ButtonRow,null,t.createElement(o.zx,{variant:"secondary",onClick:a,fill:"outline"},t.createElement(r.cC,{i18nKey:"library-panel.add-modal.cancel"},"Cancel")),t.createElement(o.zx,{onClick:B,disabled:A},t.createElement(r.cC,{i18nKey:"library-panel.add-modal.create"},"Create library panel"))))},p=({isOpen:E=!1,panel:h,initialFolderUid:a,...v})=>t.createElement(c.u,{title:"Create library panel",isOpen:E,onDismiss:v.onDismiss},t.createElement(g,{panel:h,initialFolderUid:a,onDismiss:v.onDismiss}))},81283:(Z,O,e)=>{"use strict";e.d(O,{i:()=>l});var t=e(68404),n=e(98102);const l=({isOpen:s,onConfirm:i,onDismiss:f})=>t.createElement(n.s,{title:"Do you really want to unlink this panel?",icon:"question-circle",body:`If you unlink this panel, you will be able to edit it without affecting any other dashboards.
            However, once you make a change you will not be able to revert to its original reusable panel.`,confirmText:"Yes, unlink",onConfirm:()=>{i(),f()},onDismiss:f,isOpen:s})},6297:(Z,O,e)=>{"use strict";e.d(O,{V:()=>t});function t(n){return Boolean(n.libraryPanel?.uid)}},86648:(Z,O,e)=>{"use strict";e.d(O,{E8:()=>g,Ef:()=>d,Kq:()=>m,Mh:()=>c,Ob:()=>r,Pq:()=>f,UO:()=>u,jh:()=>o});var t=e(65583),n=e(30670),l=e(86899),s=e(29930),i=e(59096);async function f({searchString:p="",perPage:E=100,page:h=1,excludeUid:a="",sortDirection:v="",typeFilter:x=[],folderFilterUIDs:y=[]}={}){const C=new URLSearchParams;C.append("searchString",p),C.append("sortDirection",v),C.append("typeFilter",x.join(",")),C.append("folderFilterUIDs",y.join(",")),C.append("excludeUid",a),C.append("perPage",E.toString(10)),C.append("page",h.toString(10)),C.append("kind",i.V.Panel.toString(10));const{result:P}=await(0,s.i)().get(`/api/library-elements?${C.toString()}`);return P}async function c(p,E=!1){const h=await(0,t.n)((0,s.i)().fetch({method:"GET",url:`/api/library-elements/${p}`,showSuccessAlert:!E,showErrorAlert:!E})),{result:a}=h.data,v=new l.f({...n.Ql,schemaVersion:35,panels:[a.model]}),x=v.panels[0].getSaveModel();return v.destroy(),{...a,model:x}}async function o(p){const{result:E}=await(0,s.i)().get(`/api/library-elements/name/${p}`);return E}async function m(p,E){const{result:h}=await(0,s.i)().post("/api/library-elements",{folderUid:E,name:p.libraryPanel.name,model:p,kind:i.V.Panel});return h}async function r(p){const{libraryPanel:E,...h}=p,{uid:a,name:v,version:x,folderUid:y}=E,C=i.V.Panel,{result:P}=await(0,s.i)().patch(`/api/library-elements/${a}`,{folderUid:y,name:v,model:h,version:x,kind:C});return P}function u(p){return(0,s.i)().delete(`/api/library-elements/${p}`)}async function d(p){const{result:E}=await(0,s.i)().get(`/api/library-elements/${p}/connections`);return E}async function g(p){const E=await d(p);return E.length===0?[]:await(0,s.i)().search({dashboardUIDs:E.map(a=>a.connectionUid)})}},59096:(Z,O,e)=>{"use strict";e.d(O,{V:()=>t});var t=(l=>(l[l.Panel=1]="Panel",l))(t||{}),n=(l=>(l[l.Dashboard=1]="Dashboard",l))(n||{})},2313:(Z,O,e)=>{"use strict";e.d(O,{E:()=>E});var t=e(68404),n=e(53787),l=e(54899),s=e(659),i=e(35287),f=e(81168),c=e(60499),o=e(86648);function m(h){return(0,c.t_)(h)}function r(h){return(0,c.AT)(h)}async function u(h,a){const v=d(h),x=await p(v,a);return g(h,x),x}function d(h){let a=h.getSaveModel();return a={libraryPanel:{name:h.title,uid:void 0},...a},a}function g(h,a){h.restoreModel({...a.model,configRev:0,libraryPanel:a,title:h.title}),h.hasSavedPanelEditChange=!0,h.refresh()}function p(h,a){return h.libraryPanel?h.libraryPanel&&h.libraryPanel.uid===""?(0,o.Kq)(h,a):(0,o.Ob)(h):Promise.reject()}const E=()=>{const h=(0,f.useDispatch)(),[a,v]=(0,n.default)(async(x,y)=>{try{return await u(x,y)}catch(C){throw(0,l.kW)(C)?(C.isHandled=!0,new Error(C.data.message)):C}},[]);return(0,t.useEffect)(()=>{if(a.error){const x=a.error.message;h((0,s.$l)(m((0,i.t)("library-panels.save.error",'Error saving library panel: "{{errorMsg}}"',{errorMsg:x}))))}a.value&&h((0,s.$l)(r((0,i.t)("library-panels.save.success","Library panel saved"))))},[h,a]),{state:a,saveLibraryPanel:v}}},30992:(Z,O,e)=>{"use strict";e.d(O,{H:()=>x});var t=e(44288),n=e(62626),l=e(25318),s=e(75118),i=e(37932),f=e(77582),c=e(45984),o=e(9398),m=e(9892),r=e(68404),u=e(35645),d=e(35029),g=e(7804),p=(y=>(y.Saved="saved",y.EditingStarted="editing-started",y.EditingCanceled="editing-cancelled",y.Deleted="deleted",y))(p||{});class E extends r.PureComponent{constructor(){super(...arguments),this.state={},this.discardAndReload={label:"Discard local changes",description:"Load the latest saved version for this dashboard",action:()=>{x.reloadPage(),this.onDismiss()}},this.continueEditing={label:"Continue editing",description:"Keep your local changes and continue editing.  Note: when you save, this will overwrite the most recent changes",action:()=>{this.onDismiss()}},this.acceptDelete={label:"Discard Local changes",description:"view grafana homepage",action:()=>{document.location.href=u.v.appUrl}},this.onDismiss=()=>{this.setState({dismiss:!0})}}render(){const{event:C}=this.props,{dismiss:P}=this.state,D=h(u.v.theme2),M=C?.action===p.Deleted,b=M?[this.continueEditing,this.acceptDelete]:[this.continueEditing,this.discardAndReload];return r.createElement(d.u,{isOpen:!P,title:"Dashboard Changed",icon:"copy",onDismiss:this.onDismiss,onClickBackdrop:()=>{},className:D.modal},r.createElement("div",null,M?r.createElement("div",null,"This dashboard has been deleted by another session"):r.createElement("div",null,"This dashboard has been modifed by another session"),r.createElement("br",null),b.map(R=>r.createElement("div",{key:R.label,onClick:R.action,className:D.radioItem},r.createElement("h3",null,R.label),R.description)),r.createElement("br",null)))}}const h=(0,g.B)(y=>({modal:m.css`
      width: 500px;
    `,radioItem:m.css`
      margin: 0;
      font-size: ${y.typography.size.sm};
      color: ${y.colors.text.secondary};
      padding: 10px;
      cursor: pointer;
      width: 100%;

      &:hover {
        background: ${y.colors.primary.main};
        color: ${y.colors.text};
      }
    `})),a=(0,t.Z)();class v{constructor(){this.editing=!1,this.observer={next:C=>{if((0,n.se)(C)&&this.editing&&C.state===n.yS.Connected&&this.sendEditingState(),(0,n.RL)(C)){if(C.message.sessionId===a)return;const{action:P}=C.message;switch(P){case p.EditingStarted:case p.Saved:{if(this.ignoreSave){this.ignoreSave=!1;return}const D=(0,o.h4)().getCurrent();if(D?.uid!==C.message.uid){console.log("dashboard event for different dashboard?",C,D);return}const M=this.editing||D.hasUnsavedChanges();if(P===p.Saved)M?f.h$.publish(new c.Dn({component:E,props:{event:C}})):(f.h$.emit(l.SI.alertSuccess,["Dashboard updated"]),this.reloadPage());else if(M&&P===p.EditingStarted&&!this.hasSeenNotice){const b=C.message,R=this.getRecentEditingEvent();(!R||R.message!==b.message)&&(this.hasSeenNotice=!0,f.h$.emit(l.SI.alertWarning,["Another session is editing this dashboard",b.message])),this.lastEditing=b}return}}}}}}setEditingState(C){const P=this.editing=C;this.editing=C,this.hasSeenNotice=!1,P&&f.Vt.isEditor&&this.sendEditingState()}sendEditingState(){const{channel:C,uid:P}=this;C&&P&&(0,s.gj)().publish(C,{sessionId:a,uid:P,action:this.editing?p.EditingStarted:p.EditingCanceled,timestamp:Date.now()})}watch(C){const P=(0,s.gj)();P&&C!==this.uid&&(this.channel={scope:n.z.Grafana,namespace:"dashboard",path:`uid/${C}`},this.leave(),C&&(this.subscription=P.getStream(this.channel).subscribe(this.observer)),this.uid=C)}leave(){this.subscription&&this.subscription.unsubscribe(),this.subscription=void 0,this.uid=void 0}ignoreNextSave(){this.ignoreSave=!0}getRecentEditingEvent(){return this.lastEditing&&this.lastEditing.timestamp&&Date.now()-this.lastEditing.timestamp>5e3&&(this.lastEditing=void 0),this.lastEditing}reloadPage(){i.E1.reload()}}const x=new v},28625:(Z,O,e)=>{"use strict";e.d(O,{Av:()=>d,MB:()=>a,_A:()=>g});var t=e(16911),n=e(14582),l=e(19695),s=e(70006),i=e(15355),f=e(98234),c=e(75118),o=e(44332);const m="__name__";var r=(P=>(P[P.wide=0]="wide",P[P.labels=1]="labels",P))(r||{});const u=class{constructor(P){this.options=P,this.meta={},this.fields=[],this.length=0,this.schemaFields=[],this.timeFieldIndex=-1,this.pushMode=0,this.labels=new Set,this.packetInfo={schemaChanged:!0,number:0,action:c.T0.Replace,length:0},this.serialize=(D,M,b)=>{const R=M?Object.assign({},{...this.options,...M}):this.options,B=(0,t.Aw)(this,D),w=y(B.fields.map(I=>I.values),typeof b?.maxLength=="number"?Math.min(b.maxLength,R.maxLength):R.maxLength,this.timeFieldIndex,R.maxDelta);B.fields=B.fields.map(I=>({...I,values:I.values.slice(w)}));const A=B.fields[0]?.values?.length??0;return{...B,labels:this.labels,schemaFields:this.schemaFields,name:this.name,refId:this.refId,meta:this.meta,length:A,timeFieldIndex:this.timeFieldIndex,pushMode:this.pushMode,packetInfo:this.packetInfo,options:R}},this.initFromSerialized=D=>{this.name=D.name,this.refId=D.refId,this.meta=D.meta,this.length=D.length,this.labels=D.labels,this.schemaFields=D.schemaFields,this.timeFieldIndex=D.timeFieldIndex,this.pushMode=D.pushMode,this.packetInfo.length=D.packetInfo.length,this.packetInfo.number=D.packetInfo.number,this.packetInfo.action=c.T0.Replace,this.packetInfo.schemaChanged=!0,this.fields=D.fields.map(M=>({...M,type:M.type??n.fS.other,config:M.config??{},values:Array.isArray(M.values)?new l.G(M.values):new l.G})),x(this.fields.map(M=>M.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)},this.needsResizing=({maxLength:D,maxDelta:M})=>{const b=D&&this.options.maxLength<D,R=M&&this.options.maxDelta<M,B=M&&this.options.maxDelta===1/0;return Boolean(b||R||B)},this.resize=({maxLength:D,maxDelta:M})=>{M&&(this.options.maxDelta===1/0?this.options.maxDelta=M:this.options.maxDelta=Math.max(M,this.options.maxDelta)),this.options.maxLength=Math.max(this.options.maxLength,D??0)},this.pushNewValues=D=>{if(!D?.length)return;this.packetInfo.action=this.options.action,this.packetInfo.number++,this.packetInfo.length=D[0].length,this.packetInfo.schemaChanged=!1,this.options.action===c.T0.Append?v(this.fields.map(b=>b.values.buffer),D,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta):(D.forEach((b,R)=>{this.fields[R]?.values&&(this.fields[R].values.buffer=b)}),x(this.fields.map(b=>b.values.buffer),this.options.maxLength,this.timeFieldIndex,this.options.maxDelta));const M=this.fields?.[0]?.values?.buffer?.length;M!==void 0&&(this.length=M)},this.resetStateCalculations=()=>{this.fields.forEach(D=>{D.state={...D.state??{},calcs:void 0,range:void 0}})},this.getMatchingFieldIndexes=D=>this.fields.map((M,b)=>D(M)?b:void 0).filter(M=>M!==void 0),this.getValuesFromLastPacket=()=>this.fields.map(D=>{const M=D.values.buffer;return M.slice(Math.max(M.length-this.packetInfo.length))}),this.hasAtLeastOnePacket=()=>Boolean(this.packetInfo.length),this.getOptions=()=>this.options,Object.defineProperty(this,"length",{enumerable:!0}),Object.defineProperty(this,"fields",{enumerable:!0})}get alwaysReplace(){return this.options.action===c.T0.Replace}push(P){const{schema:D,data:M}=P;if(this.packetInfo.number++,this.packetInfo.length=0,this.packetInfo.schemaChanged=!1,D){this.pushMode=0,this.timeFieldIndex=D.fields.findIndex(w=>w.type===n.fS.time);const b=D.fields[0];this.timeFieldIndex===1&&b.type===n.fS.string&&(b.name==="labels"||b.name==="Labels")&&(this.pushMode=1,this.timeFieldIndex=0);const R=this.pushMode===1?D.fields.slice(1):D.fields;this.refId=D.refId,D.meta&&(this.meta={...D.meta});const{displayNameFormat:B}=this.options;if(C(this.schemaFields,R)){const w=R.length;this.fields.forEach((A,I)=>{const F=R[I%w];A.config=F.config??{},A.labels=F.labels}),B&&this.fields.forEach(A=>{const I={[m]:A.name,...A.labels};A.config.displayNameFromDS=(0,o.W)(B,I)})}else{this.packetInfo.schemaChanged=!0;const w=this.pushMode===0;this.fields=R.map(A=>{const I=A.config??{};if(B){const F={[m]:A.name,...A.labels};I.displayNameFromDS=(0,o.W)(B,F)}return{config:I,name:A.name,labels:A.labels,type:A.type??n.fS.other,values:w?this.fields.find(F=>F.name===A.name&&A.type===F.type)?.values??new l.G(Array(this.length).fill(void 0)):new l.G}})}this.schemaFields=R}if(M&&M.values.length&&M.values[0].length){let{values:b,entities:R}=M;if(R&&R.forEach((w,A)=>{w&&(0,s.Jy)(w,b[A])}),this.pushMode===1){const w=p(b);for(const F of w.keys())this.labels.has(F)||(this.packetInfo.schemaChanged=!0,this.addLabel(F));let A=Array(this.schemaFields.length).fill([]),I=[];this.labels.forEach(F=>{I.push(w.get(F)??A)}),b=(0,f.v_)(I)}if(b.length!==this.fields.length){if(this.fields.length)throw new Error(`push message mismatch.  Expected: ${this.fields.length}, received: ${b.length} (labels=${this.pushMode===1})`);this.fields=b.map((w,A)=>{let I=`Field ${A}`,F=(0,t.LI)(w[0]);return A===0&&F===n.fS.number&&w[0]>1600016688632&&(F=n.fS.time,I="Time"),{name:I,type:F,config:{},values:new l.G([])}})}let B=b;this.packetInfo.length=b[0].length,this.alwaysReplace||!this.length?this.packetInfo.action=c.T0.Replace:(this.packetInfo.action=c.T0.Append,B=this.fields.map(w=>w.values.buffer),v(B,b,this.options.maxLength,this.timeFieldIndex,this.options.maxDelta)),B.forEach((w,A)=>{const{state:I,values:F}=this.fields[A];F.buffer=w,I&&(I.calcs=void 0)}),this.length=B[0].length}return{...this.packetInfo}}addLabel(P){const{displayNameFormat:D}=this.options,M=this.labels.size,b=h(P);if(M===0)this.fields.forEach((R,B)=>{if(B>0&&(R.labels=b,D)){const w={[m]:R.name,...b};R.config.displayNameFromDS=(0,o.W)(D,w)}});else for(let R=1;R<this.schemaFields.length;R++){let B=this.schemaFields[R];const w=B.config??{};if(D){const A={[m]:B.name,...b};w.displayNameFromDS=(0,o.W)(D,A)}this.fields.push({...B,config:w,labels:b,values:new l.G(Array(this.length).fill(void 0))})}this.labels.add(P)}};let d=u;d.deserialize=P=>{const D=new u(P.options);return D.initFromSerialized(P),D},d.empty=P=>new u(g(P)),d.fromDataFrameJSON=(P,D)=>{const M=new u(g(D));return M.push(P),M};function g(P){return{maxLength:P?.maxLength??1e3,maxDelta:P?.maxDelta??1/0,action:P?.action??c.T0.Append,displayNameFormat:P?.displayNameFormat}}function p(P){let D=new Set(P[0]),M=new Map;D.forEach(b=>{let R=Array(P.length-1).fill(null).map(()=>[]);M.set(b,R)});for(let b=0;b<P[0].length;b++){let R=M.get(P[0][b]);for(let B=1;B<P.length;B++)R[B-1].push(P[B][b])}return M}function E(P,D,M,b){let R;M=M||0,b=b||D.length-1;let B=b<=2147483647;for(;b-M>1;)R=B?M+b>>1:Math.floor((M+b)/2),D[R]<P?M=R:b=R;return P-D[M]<=D[b]-P?M:b}function h(P){if(!P.length)return{};if(P.charAt(0)==="{")return(0,i.J8)(P);const D={};return P.split(",").forEach(M=>{const[b,R]=M.trim().split("=");D[b]=R}),D}function a(P){const D=P.packetInfo;return D?.action?D:void 0}function v(P,D,M=1/0,b=0,R=1/0){for(let B=0;B<P.length;B++)for(let w=0;w<D[B].length;w++)P[B].push(D[B][w]);return x(P,M,b,R)}function x(P,D=1/0,M=0,b=1/0){const R=y(P,D,M,b);if(R)for(let B=0;B<P.length;B++)P[B].splice(0,R);return R}function y(P,D=1/0,M=0,b=1/0){if(!P[0]?.length)return 0;const R=P[0].length;let B=0;if(R>D&&(B=R-D),b!==1/0&&M>=0){const w=P[M],A=w[B],I=w[R-1];I-A>b&&(B=E(I-b,w,B))}return B}function C(P,D){if(P?.length!==D.length)return!1;for(let M=0;M<P.length;M++){const b=P[M],R=D[M];if(b.name!==R.name||b.type!==R.type)return!1}return!0}},14035:(Z,O,e)=>{"use strict";e.d(O,{A1:()=>l,g0:()=>n,iL:()=>f});var t=e(16911),n=(c=>(c.NewValuesSameSchema="NewValuesSameSchema",c.FullFrame="FullFrame",c))(n||{});const l=(c,o)=>"type"in c&&c.type===o,s=Object.values(n),i=c=>"type"in c&&s.includes(c.type),f=c=>(0,t.aY)(c)&&"packetInfo"in c},54972:(Z,O,e)=>{"use strict";e.d(O,{j:()=>i});var t=e(9892),n=e(68404),l=e(72648);const s=["level","lvl","filename"],i=({labels:c})=>{const o=(0,l.wW)(f),m=Object.keys(c).filter(r=>!r.startsWith("_")&&!s.includes(r));return m.length===0?n.createElement("span",{className:(0,t.cx)([o.logsLabels])},n.createElement("span",{className:(0,t.cx)([o.logsLabel])},"(no unique labels)")):n.createElement("span",{className:(0,t.cx)([o.logsLabels])},m.sort().map(r=>{const u=c[r];if(!u)return;const d=`${r}: ${u}`;return n.createElement("span",{key:r,className:(0,t.cx)([o.logsLabel])},n.createElement("span",{className:(0,t.cx)([o.logsLabelValue]),title:d},u))}))},f=c=>({logsLabels:t.css`
      display: flex;
      flex-wrap: wrap;
      font-size: ${c.typography.size.xs};
    `,logsLabel:t.css`
      label: logs-label;
      display: flex;
      padding: ${c.spacing(0,.25)};
      background-color: ${c.colors.background.secondary};
      border-radius: ${c.shape.borderRadius(1)};
      margin: ${c.spacing(.125,.5,0,0)};
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `,logsLabelValue:t.css`
      label: logs-label__value;
      display: inline-block;
      max-width: ${c.spacing(25)};
      text-overflow: ellipsis;
      overflow: hidden;
    `})},25287:(Z,O,e)=>{"use strict";e.d(O,{Q:()=>m});var t=e(2525),n=e(68404),l=e(14677),s=e.n(l),i=e(33399),f=e(72648);function c(r,u){return u.split(/;\s*/).reduce((d,g)=>{if(g==="color:rgba(0,0,0,0.5)")return{color:r.colors.text.secondary};const p=g.match(/([^:\s]+)\s*:\s*(.+)/);if(p&&p[1]&&p[2]){const E=p[1].replace(/-([a-z])/g,(h,a)=>a.toUpperCase());d[E]=p[2]}return d},{})}class o extends n.PureComponent{constructor(){super(...arguments),this.state={chunks:[],prevValue:""}}static getDerivedStateFromProps(u,d){return u.value===d.prevValue?null:{chunks:t.ZP.parse(u.value).spans.map(p=>p.css?{style:c(u.theme,p.css),text:p.text}:{text:p.text}),prevValue:u.value}}render(){const{chunks:u}=this.state;return u.map((d,g)=>{const p=this.props.highlight?.searchWords?n.createElement(s(),{key:g,textToHighlight:d.text,searchWords:this.props.highlight.searchWords,findChunks:i.Xt,highlightClassName:this.props.highlight.highlightClassName}):d.text;return d.style?n.createElement("span",{key:g,style:d.style,"data-testid":"ansiLogLine"},p):p})}}const m=(0,f.HE)(o);m.displayName="LogMessageAnsi"},48955:(Z,O,e)=>{"use strict";e.d(O,{r:()=>w,n:()=>b});var t=e(9892),n=e(58635),l=e(68404),s=e(14677),i=e.n(s),f=e(33399),c=e(6554),o=e(8180),m=e(25287),r=e(64076),u=e(40538),d=e(8928),g=e(35645),p=e(72648),E=e(31403),h=e(68226),a=e(56766),v=e(45253),x=e(94437),y=(A=>(A.Bottom="bottom",A.Top="top",A))(y||{});const C=(A,I,F)=>{(!g.v.featureToggles.logsContextDatasourceUi||!F)&&(F=0);const K=40,W=220,U=F+K+W,N=K+W,S=I?"100%":"75%",Y=I?t.css`
        top: -${U}px;
      `:t.css`
        margin-top: -${U}px;
      `,Q=I?t.css`
        top: 100%;
      `:t.css`
        margin-top: ${A.spacing(2.5)};
      `;return{width:t.css`
      width: ${S};
    `,bottomContext:t.css`
      height: ${N}px;
    `,commonStyles:t.css`
      position: absolute;
      height: ${U}px;
      z-index: ${A.zIndex.dropdown};
      overflow: hidden;
      background: ${A.colors.background.primary};
      box-shadow: 0 0 ${A.spacing(1.25)} ${A.v1.palette.black};
      border: 1px solid ${A.colors.background.secondary};
      border-radius: ${A.shape.radius.default};
      font-family: ${A.typography.fontFamily};
    `,header:t.css`
      height: ${K}px;
      padding: ${A.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${A.colors.background.canvas};
    `,datasourceUi:t.css`
      height: ${F}px;
      padding: ${A.spacing(0,1.25)};
      display: flex;
      align-items: center;
      background: ${A.colors.background.canvas};
    `,top:t.css`
      border-radius: 0 0 ${A.shape.radius.default} ${A.shape.radius.default};
      box-shadow: 0 0 ${A.spacing(1.25)} ${A.v1.palette.black};
      clip-path: inset(0px -${A.spacing(1.25)} -${A.spacing(1.25)} -${A.spacing(1.25)});
    `,title:t.css`
      position: absolute;
      width: ${S};
      margin-top: -${U+K}px;
      z-index: ${A.zIndex.modal};
      height: ${K}px;
      background: ${A.colors.background.secondary};
      border: 1px solid ${A.colors.background.secondary};
      border-radius: ${A.shape.radius.default} ${A.shape.radius.default} 0 0;
      box-shadow: 0 0 ${A.spacing(1.25)} ${A.v1.palette.black};
      clip-path: inset(-${A.spacing(1.25)} -${A.spacing(1.25)} 0px -${A.spacing(1.25)});
      font-family: ${A.typography.fontFamily};

      display: flex;
      flex-direction: row;
      align-items: center;

      padding: ${A.spacing()};

      > h5 {
        margin: 0;
        flex: 1;
      }
    `,actions:t.css`
      align-items: center;
      display: flex;
    `,headerButton:t.css`
      margin-left: ${A.spacing(1)};
    `,logs:t.css`
      height: ${W}px;
      padding: ${A.spacing(1.25)};
      font-family: ${A.typography.fontFamilyMonospace};

      .scrollbar-view {
        overscroll-behavior: contain;
      }
    `,afterContext:Y,beforeContext:Q}},P=({row:A,rows:I,onLoadMoreContext:F,canLoadMoreRows:K,groupPosition:W,logsSortOrder:U,getLogRowContextUi:N,runContextQuery:S,onHeightChange:Y})=>{const[Q,z]=(0,l.useState)(0),G=l.createRef(),k=(0,p.l4)(),{datasourceUi:j,header:de,headerButton:ge}=C(k,void 0,Q);let re="after";if(W==="bottom"?U===u.UV.Descending&&(re="before"):U===u.UV.Ascending&&(re="before"),g.v.featureToggles.logsContextDatasourceUi){const ce=(0,l.useMemo)(()=>new ResizeObserver(ie=>{for(let fe of ie)z(fe.contentRect.height),Y&&Y(fe.contentRect.height)}),[Y]);(0,l.useLayoutEffect)(()=>{const ie=G.current?.children.item(0);return ie&&ce.observe(ie),()=>{ce.disconnect()}},[G,ce])}return l.createElement(l.Fragment,null,g.v.featureToggles.logsContextDatasourceUi&&N&&l.createElement("div",{ref:G,className:j},N(A,S)),l.createElement("div",{className:de},l.createElement("span",{className:t.css`
            opacity: 0.6;
          `},"Showing ",I.length," lines ",re," match."),(I.length>=10||I.length>10&&I.length%10!==0)&&K&&l.createElement(E.zx,{className:ge,variant:"secondary",size:"sm",onClick:F},"Load 10 more lines")))},D=({row:A,rows:I,error:F,className:K,shouldScrollToBottom:W,canLoadMoreRows:U,onLoadMoreContext:N,groupPosition:S,logsSortOrder:Y,getLogRowContextUi:Q,runContextQuery:z,onHeightChange:G})=>{const[k,j]=(0,l.useState)(0),de=(0,p.l4)(),{commonStyles:ge,logs:re,bottomContext:ce,afterContext:ie}=C(de,void 0,k),[fe,Ce]=(0,l.useState)(0),[ee,ne]=(0,l.useState)(0),X=(0,l.useRef)(null),te=(0,r.Z)(I),ae=(0,r.Z)(fe),_=(0,r.Z)(ee);(0,l.useLayoutEffect)(()=>{if(!W||!X.current)return;const rt=te?.length??0,pe=_??0,Ie=ae??0,We=X.current.parentElement;let Je=0;We&&(Je=We.scrollHeight-We.clientHeight,ne(Je)),I.length>rt&&Je>pe&&Ce(Ie+(Je-pe))},[W,I,te,ae,_]);const ve=()=>{X.current?.parentElement&&Ce(X.current?.parentElement.scrollTop)},Ve=rt=>{j(rt),G&&G(rt)},it={row:A,rows:I,onLoadMoreContext:N,canLoadMoreRows:U,groupPosition:S,logsSortOrder:Y,getLogRowContextUi:Q,runContextQuery:z};return l.createElement("div",{className:(0,t.cx)(ge,K,S==="bottom"?ce:ie)},W&&!F&&l.createElement(P,{onHeightChange:Ve,...it}),l.createElement("div",{className:re},l.createElement(h.$,{autoHide:!0,onScroll:ve,scrollTop:fe,autoHeightMin:"210px"},l.createElement("div",{ref:X},!F&&l.createElement(a.a,{items:I,renderItem:rt=>l.createElement("div",{className:t.css`
                        padding: 5px 0;
                      `},typeof rt=="string"&&d.QX.hasAnsiCodes(rt)?l.createElement(m.Q,{value:rt}):rt)}),F&&l.createElement(v.b,{title:F})))),!W&&!F&&l.createElement(P,{...it}))},M=({row:A,context:I,errors:F,onOutsideClick:K,onLoadMoreContext:W,runContextQuery:U,hasMoreContextRows:N,wrapLogMessage:S,logsSortOrder:Y,getLogRowContextUi:Q})=>{(0,l.useEffect)(()=>{const ie=fe=>{(fe.key==="Escape"||fe.key==="Esc")&&K("close_esc")};return document.addEventListener("keydown",ie,!1),()=>{document.removeEventListener("keydown",ie,!1)}},[K,A]);const[z,G]=(0,l.useState)(0),{beforeContext:k,title:j,top:de,actions:ge,width:re}=(0,p.wW)(ie=>C(ie,S,z)),ce=(0,l.useCallback)(()=>K("close_outside_click"),[K]);return l.createElement(x.L,{onClick:ce},l.createElement("div",{onClick:ie=>ie.stopPropagation()},I.after&&l.createElement(D,{rows:I.after,error:F&&F.after,row:A,className:(0,t.cx)(de,re),shouldScrollToBottom:!0,canLoadMoreRows:N?N.after:!1,onLoadMoreContext:W,groupPosition:"top",logsSortOrder:Y,getLogRowContextUi:Q,runContextQuery:U,onHeightChange:G}),I.before&&l.createElement(D,{onLoadMoreContext:W,canLoadMoreRows:N?N.before:!1,row:A,rows:I.before,error:F&&F.before,className:(0,t.cx)(k,re),groupPosition:"bottom",logsSortOrder:Y}),l.createElement("div",{className:(0,t.cx)(j,re)},l.createElement("h5",null,"Log context"),l.createElement("div",{className:ge},l.createElement(o.h,{size:"lg",name:"times",onClick:()=>K("close_button")})))))},b=1e5;function R(A,I,F,K){const W=F&&F.length>0&&F[0]&&F[0].length>0&&I.length<b,U=F??[];if(A){const N=W?{searchWords:U,highlightClassName:K}:void 0;return l.createElement(m.Q,{value:I,highlight:N})}else return W?l.createElement(i(),{textToHighlight:I,searchWords:U,findChunks:f.Xt,highlightClassName:K}):I}const B=(0,n.Z)((A,I)=>{if(I)try{return JSON.stringify(JSON.parse(A),void 0,2)}catch{return A}return A});class w extends l.PureComponent{constructor(){super(...arguments),this.logRowRef=l.createRef(),this.onContextToggle=I=>{I.stopPropagation(),this.props.onToggleContext("open")},this.onShowContextClick=I=>{const{scrollElement:F}=this.props;this.onContextToggle(I),F&&this.logRowRef.current&&F.scroll({behavior:"smooth",top:F.scrollTop+this.logRowRef.current.getBoundingClientRect().top-window.innerHeight/2})}}render(){const{row:I,errors:F,hasMoreContextRows:K,updateLimit:W,runContextQuery:U,context:N,contextIsOpen:S,showRowMenu:Y,wrapLogMessage:Q,prettifyLogMessage:z,onToggleContext:G,logsSortOrder:k,showContextToggle:j,getLogRowContextUi:de,styles:ge}=this.props,{hasAnsi:re,raw:ce}=I,ie=B(ce,z),fe=j?j(I):!1;return l.createElement(l.Fragment,null,l.createElement("td",{ref:this.logRowRef,style:S?{position:"unset"}:void 0,className:ge.logsRowMessage},l.createElement("div",{className:(0,t.cx)({[ge.positionRelative]:Q},{[ge.horizontalScroll]:!Q})},S&&N&&l.createElement(M,{row:I,getLogRowContextUi:de,runContextQuery:U,context:N,errors:F,wrapLogMessage:Q,hasMoreContextRows:K,onOutsideClick:G,logsSortOrder:k,onLoadMoreContext:()=>{W&&W()}}),l.createElement("button",{className:(0,t.cx)(ge.logLine,ge.positionRelative,{[ge.rowWithContext]:S})},R(re,ie,I.searchWords,ge.logsRowMatchHighLight)))),Y&&l.createElement("td",{className:(0,t.cx)("log-row-menu-cell",ge.logRowMenuCell)},l.createElement("span",{className:(0,t.cx)("log-row-menu",ge.rowMenu,{[ge.rowMenuWithContextButton]:fe}),onClick:Ce=>Ce.stopPropagation()},fe&&l.createElement(c.u,{placement:"top",content:"Show context"},l.createElement(o.h,{size:"md",name:"gf-show-context",onClick:this.onShowContextClick})),l.createElement(c.u,{placement:"top",content:"Copy"},l.createElement(o.h,{size:"md",name:"copy",onClick:()=>navigator.clipboard.writeText(ie)})))))}}},28947:(Z,O,e)=>{"use strict";e.d(O,{w:()=>j});var t=e(58635),n=e(68404),l=e(40538),s=e(72648),i=e(81042),f=e(9892),c=e(38849),o=e(41818),m=e(6554),r=e(39904),u=e(82897),d=e(94599),g=e(8180),p=e(89719),E=e(7804);const h=de=>({logsStatsRow:f.css`
    label: logs-stats-row;
    margin: ${parseInt(de.spacing(2),10)/1.75}px 0;
  `,logsStatsRowActive:f.css`
    label: logs-stats-row--active;
    color: ${de.colors.primary.text};
    position: relative;
  `,logsStatsRowLabel:f.css`
    label: logs-stats-row__label;
    display: flex;
    margin-bottom: 1px;
  `,logsStatsRowValue:f.css`
    label: logs-stats-row__value;
    flex: 1;
    text-overflow: ellipsis;
    overflow: hidden;
  `,logsStatsRowCount:f.css`
    label: logs-stats-row__count;
    text-align: right;
    margin-left: ${de.spacing(.75)};
  `,logsStatsRowPercent:f.css`
    label: logs-stats-row__percent;
    text-align: right;
    margin-left: ${de.spacing(.75)};
    width: ${de.spacing(4.5)};
  `,logsStatsRowBar:f.css`
    label: logs-stats-row__bar;
    height: ${de.spacing(.5)};
    overflow: hidden;
    background: ${de.colors.text.disabled};
  `,logsStatsRowInnerBar:f.css`
    label: logs-stats-row__innerbar;
    height: ${de.spacing(.5)};
    overflow: hidden;
    background: ${de.colors.primary.main};
  `}),a=({active:de,count:ge,proportion:re,value:ce})=>{const ie=(0,s.wW)(h),fe=`${Math.round(re*100)}%`,Ce={width:fe},ee=de?(0,f.cx)([ie.logsStatsRow,ie.logsStatsRowActive]):(0,f.cx)([ie.logsStatsRow]);return n.createElement("div",{className:ee},n.createElement("div",{className:(0,f.cx)([ie.logsStatsRowLabel])},n.createElement("div",{className:(0,f.cx)([ie.logsStatsRowValue]),title:ce},ce),n.createElement("div",{className:(0,f.cx)([ie.logsStatsRowCount])},ge),n.createElement("div",{className:(0,f.cx)([ie.logsStatsRowPercent])},fe)),n.createElement("div",{className:(0,f.cx)([ie.logsStatsRowBar])},n.createElement("div",{className:(0,f.cx)([ie.logsStatsRowInnerBar]),style:Ce})))};a.displayName="LogLabelStatsRow";const v=5,x=(0,E.B)(de=>({logsStats:f.css`
      label: logs-stats;
      background: inherit;
      color: ${de.colors.text.primary};
      word-break: break-all;
      width: fit-content;
      max-width: 100%;
    `,logsStatsHeader:f.css`
      label: logs-stats__header;
      border-bottom: 1px solid ${de.colors.border.medium};
      display: flex;
    `,logsStatsTitle:f.css`
      label: logs-stats__title;
      font-weight: ${de.typography.fontWeightMedium};
      padding-right: ${de.spacing(2)};
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,logsStatsClose:f.css`
      label: logs-stats__close;
      cursor: pointer;
    `,logsStatsBody:f.css`
      label: logs-stats__body;
      padding: 5px 0px;
    `}));class y extends n.PureComponent{render(){const{label:ge,rowCount:re,stats:ce,value:ie,theme:fe,isLabel:Ce}=this.props,ee=x(fe),ne=ce.slice(0,v);let X=ne.find(rt=>rt.value===ie),te=ce.slice(v);const ae=!X;ae&&(X=te.find(rt=>rt.value===ie),te=te.filter(rt=>rt.value!==ie));const _=te.reduce((rt,pe)=>rt+pe.count,0),Ve=ne.reduce((rt,pe)=>rt+pe.count,0)+_,it=_/Ve;return n.createElement("div",{className:ee.logsStats,"data-testid":"logLabelStats"},n.createElement("div",{className:ee.logsStatsHeader},n.createElement("div",{className:ee.logsStatsTitle},ge,": ",Ve," of ",re," rows have that ",Ce?"label":"field")),n.createElement("div",{className:ee.logsStatsBody},ne.map(rt=>n.createElement(a,{key:rt.value,...rt,active:rt.value===ie})),ae&&X&&n.createElement(a,{key:X.value,...X,active:!0}),_>0&&n.createElement(a,{key:"__OTHERS__",count:_,value:"Other",proportion:it})))}}const C=(0,s.HE)(y);C.displayName="LogLabelStats";var P=e(34282);const D=(0,t.Z)(de=>({wordBreakAll:f.css`
      label: wordBreakAll;
      word-break: break-all;
    `,copyButton:f.css`
      & > button {
        color: ${de.colors.text.secondary};
        padding: 0;
        justify-content: center;
        border-radius: 50%;
        height: ${de.spacing(de.components.height.sm)};
        width: ${de.spacing(de.components.height.sm)};
        svg {
          margin: 0;
        }

        span > div {
          top: -5px;
          & button {
            color: ${de.colors.success.main};
          }
        }
      }
    `,adjoiningLinkButton:f.css`
      margin-left: ${de.spacing(1)};
    `,wrapLine:f.css`
      label: wrapLine;
      white-space: pre-wrap;
    `,logDetailsStats:f.css`
      padding: 0 ${de.spacing(1)};
    `,logDetailsValue:f.css`
      display: flex;
      align-items: center;
      line-height: 22px;

      .show-on-hover {
        display: inline;
        visibility: hidden;
      }
      &:hover {
        .show-on-hover {
          visibility: visible;
        }
      }
    `,buttonRow:f.css`
      display: flex;
      flex-direction: row;
      gap: ${de.spacing(.5)};
      margin-left: ${de.spacing(.5)};
    `}));class M extends n.PureComponent{constructor(){super(...arguments),this.state={showFieldsStats:!1,fieldCount:0,fieldStats:null},this.showField=()=>{const{onClickShowField:ge,parsedKeys:re,row:ce}=this.props;ge&&ge(re[0]),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ce.datasourceType,logRowUid:ce.uid,type:"enable"})},this.hideField=()=>{const{onClickHideField:ge,parsedKeys:re,row:ce}=this.props;ge&&ge(re[0]),(0,o.ff)("grafana_explore_logs_log_details_replace_line_clicked",{datasourceType:ce.datasourceType,logRowUid:ce.uid,type:"disable"})},this.filterLabel=()=>{const{onClickFilterLabel:ge,parsedKeys:re,parsedValues:ce,row:ie}=this.props;ge&&ge(re[0],ce[0]),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ie.datasourceType,filterType:"include",logRowUid:ie.uid})},this.filterOutLabel=()=>{const{onClickFilterOutLabel:ge,parsedKeys:re,parsedValues:ce,row:ie}=this.props;ge&&ge(re[0],ce[0]),(0,o.ff)("grafana_explore_logs_log_details_filter_clicked",{datasourceType:ie.datasourceType,filterType:"exclude",logRowUid:ie.uid})},this.updateStats=()=>{const{getStats:ge}=this.props,re=ge(),ce=re?re.reduce((ie,fe)=>ie+fe.count,0):0;(!(0,u.isEqual)(this.state.fieldStats,re)||ce!==this.state.fieldCount)&&this.setState({fieldStats:re,fieldCount:ce})},this.showStats=()=>{const{isLabel:ge,row:re,app:ce}=this.props,{showFieldsStats:ie}=this.state;ie||this.updateStats(),this.toggleFieldsStats(),(0,o.ff)("grafana_explore_logs_log_details_stats_clicked",{dataSourceType:re.datasourceType,fieldType:ge?"label":"detectedField",type:ie?"close":"open",logRowUid:re.uid,app:ce})}}componentDidUpdate(){this.state.showFieldsStats&&this.updateStats()}toggleFieldsStats(){this.setState(ge=>({showFieldsStats:!ge.showFieldsStats}))}generateClipboardButton(ge){const{theme:re}=this.props,ce=D(re);return n.createElement("div",{className:(0,f.cx)("show-on-hover",ce.copyButton)},n.createElement(d.m,{getText:()=>ge,title:"Copy value to clipboard",fill:"text",variant:"secondary",icon:"copy",size:"md"}))}generateMultiVal(ge,re){return n.createElement("table",null,n.createElement("tbody",null,ge?.map((ce,ie)=>n.createElement("tr",{key:`${ce}-${ie}`},n.createElement("td",null,ce,re&&ce!==""&&this.generateClipboardButton(ce))))))}render(){const{theme:ge,parsedKeys:re,parsedValues:ce,isLabel:ie,links:fe,displayedFields:Ce,wrapLogMessage:ee,onClickFilterLabel:ne,onClickFilterOutLabel:X,disableActions:te}=this.props,{showFieldsStats:ae,fieldStats:_,fieldCount:ve}=this.state,Ve=D(ge),it=(0,P.h)(ge),rt=re==null?!1:re.length===1,pe=ce==null?!1:ce.length===1,Ie=!te&&ne&&X,We=!pe&&ce!=null&&!ce.every(He=>He===""),Je=Ce&&re!=null&&Ce.includes(re[0])?n.createElement(g.h,{variant:"primary",tooltip:"Hide this field",name:"eye",onClick:this.hideField}):n.createElement(g.h,{tooltip:"Show this field instead of the message",name:"eye",onClick:this.showField});return n.createElement(n.Fragment,null,n.createElement("tr",{className:(0,f.cx)(it.logDetailsValue)},n.createElement("td",{className:it.logsDetailsIcon},n.createElement("div",{className:Ve.buttonRow},Ie&&n.createElement(g.h,{name:"search-plus",tooltip:"Filter for value",onClick:this.filterLabel}),Ie&&n.createElement(g.h,{name:"search-minus",tooltip:"Filter out value",onClick:this.filterOutLabel}),!te&&Ce&&Je,!te&&n.createElement(g.h,{variant:ae?"primary":"secondary",name:"signal",tooltip:"Ad-hoc statistics",className:"stats-button",disabled:!rt,onClick:this.showStats}))),n.createElement("td",{className:it.logDetailsLabel},rt?re[0]:this.generateMultiVal(re)),n.createElement("td",{className:(0,f.cx)(Ve.wordBreakAll,ee&&Ve.wrapLine)},n.createElement("div",{className:Ve.logDetailsValue},pe?ce[0]:this.generateMultiVal(ce,!0),pe&&this.generateClipboardButton(ce[0]),n.createElement("div",{className:(0,f.cx)((pe||We)&&Ve.adjoiningLinkButton)},fe?.map((He,Ae)=>n.createElement("span",{key:`${He.title}-${Ae}`},n.createElement(p.k,{link:He}))))))),ae&&rt&&pe&&n.createElement("tr",null,n.createElement("td",null,n.createElement(g.h,{variant:ae?"primary":"secondary",name:"signal",tooltip:"Hide ad-hoc statistics",onClick:this.showStats})),n.createElement("td",{colSpan:2},n.createElement("div",{className:Ve.logDetailsStats},n.createElement(C,{stats:_,label:re[0],value:ce[0],rowCount:ve,isLabel:ie})))))}}const b=(0,s.HE)(M);b.displayName="LogDetailsRow";var R=e(35160);class B extends n.PureComponent{render(){const{app:ge,row:re,theme:ce,hasError:ie,onClickFilterOutLabel:fe,onClickFilterLabel:Ce,getRows:ee,showDuplicates:ne,className:X,onClickShowField:te,onClickHideField:ae,displayedFields:_,getFieldLinks:ve,wrapLogMessage:Ve,styles:it}=this.props,rt=(0,P.p)(ce,re.logLevel),pe=re.labels?re.labels:{},Ie=Object.keys(pe).length>0,We=(0,R.YD)(re,ve);let Je=We.filter(Qe=>Qe.links?.length);const He=Je.filter(Qe=>Qe.fieldIndex!==re.entryFieldIndex).sort(),Ae=Je.filter(Qe=>Qe.fieldIndex===re.entryFieldIndex).sort(),et=(0,R.DC)(Ae),_e=We.filter(Qe=>Qe.links?.length===0&&Qe.fieldIndex!==re.entryFieldIndex).sort(),Se=_e&&_e.length>0,Fe=He&&He.length>0||et&&et.length>0,Xe=ie?"":`${rt.logsRowLevelColor} ${it.logsRowLevel} ${it.logsRowLevelDetails}`;return n.createElement("tr",{className:(0,f.cx)(X,it.logDetails)},ne&&n.createElement("td",null),n.createElement("td",{className:Xe,"aria-label":"Log level"}),n.createElement("td",{colSpan:4},n.createElement("div",{className:it.logDetailsContainer},n.createElement("table",{className:it.logDetailsTable},n.createElement("tbody",null,(Ie||Se)&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:it.logDetailsHeading,"aria-label":"Fields"},"Fields")),Object.keys(pe).sort().map((Qe,ct)=>{const ht=pe[Qe];return n.createElement(b,{key:`${Qe}=${ht}-${ct}`,parsedKeys:[Qe],parsedValues:[ht],isLabel:!0,getStats:()=>(0,i.lL)(ee(),Qe),onClickFilterOutLabel:fe,onClickFilterLabel:Ce,onClickShowField:te,onClickHideField:ae,row:re,app:ge,wrapLogMessage:Ve,displayedFields:_,disableActions:!1})}),_e.map((Qe,ct)=>{const{keys:ht,values:ft,fieldIndex:Re}=Qe;return n.createElement(b,{key:`${ht[0]}=${ft[0]}-${ct}`,parsedKeys:ht,parsedValues:ft,onClickShowField:te,onClickHideField:ae,onClickFilterOutLabel:fe,onClickFilterLabel:Ce,getStats:()=>(0,i.i6)(re.dataFrame.fields[Re].values.toArray()),displayedFields:_,wrapLogMessage:Ve,row:re,app:ge,disableActions:!1})}),Fe&&n.createElement("tr",null,n.createElement("td",{colSpan:100,className:it.logDetailsHeading,"aria-label":"Data Links"},"Links")),He.map((Qe,ct)=>{const{keys:ht,values:ft,links:Re,fieldIndex:nt}=Qe;return n.createElement(b,{key:`${ht[0]}=${ft[0]}-${ct}`,parsedKeys:ht,parsedValues:ft,links:Re,onClickShowField:te,onClickHideField:ae,getStats:()=>(0,i.i6)(re.dataFrame.fields[nt].values.toArray()),displayedFields:_,wrapLogMessage:Ve,row:re,app:ge,disableActions:!1})}),et?.map((Qe,ct)=>{const{keys:ht,values:ft,links:Re,fieldIndex:nt}=Qe;return n.createElement(b,{key:`${ht[0]}=${ft[0]}-${ct}`,parsedKeys:ht,parsedValues:ft,links:Re,onClickShowField:te,onClickHideField:ae,getStats:()=>(0,i.i6)(re.dataFrame.fields[nt].values.toArray()),displayedFields:_,wrapLogMessage:Ve,row:re,app:ge,disableActions:!0})}),!Se&&!Ie&&!Fe&&n.createElement("tr",null,n.createElement("td",{colSpan:100,"aria-label":"No details"},"No details available")))))))}}const w=(0,s.HE)(B);w.displayName="LogDetails";var A=e(54972),I=e(50700),F=e(16911),K=e(71895);const W=async(de,ge,re,ce)=>{const ie=[de(ge,{limit:re}),de(ge,{limit:re+1,direction:"FORWARD"})],fe=await Promise.all(ie.map(ne=>ne.catch(X=>X))),Ce=fe.map(ne=>{const X=ne;if(!X.data)return[];const te=[];for(let ae=0;ae<X.data.length;ae++){const _=(0,F.g0)(X.data[ae]),ve=new K.N(_),Ve=ve.getFieldByName("ts"),it=ve.getFieldByName("id");for(let rt=0;rt<Ve.values.length;rt++){if(it){if(it.values.get(rt)===ge.uid)continue}else if(parseInt(Ve.values.get(rt),10)===ge.timeEpochMs)continue;const Ie=_.fields.filter(We=>We.name==="line")[0].values.get(rt);te.length<re&&te.push(Ie)}}return ce===l.UV.Ascending?te.reverse():te}),ee=fe.map(ne=>{const X=ne;return X.message?X.message:""});return{data:ce===l.UV.Ascending?Ce.reverse():Ce,errors:ce===l.UV.Ascending?ee.reverse():ee}},U=({getRowContext:de,row:ge,children:re,logsSortOrder:ce})=>{const[ie,fe]=(0,n.useState)(10),[Ce,ee]=(0,n.useState)(null),[ne,X]=(0,n.useState)({before:!0,after:!0}),[te,ae]=(0,n.useState)(),{value:_}=(0,I.Z)(async()=>await W(de,ge,ie,ce),[ie]);(0,n.useEffect)(()=>{ae(_)},[_]),(0,n.useEffect)(()=>{te&&ee(pe=>{if(!te.doNotCheckForMore){let Ie=!0,We=!0;const Je=pe?.data[0],He=pe?.data[1],Ae=te.data[0],et=te.data[1];pe&&(!Ae||Je.length===Ae.length)&&(Ie=!1),pe&&(!et||He.length===et.length)&&(We=!1),X({before:Ie,after:We})}return te})},[te]);const ve=(0,n.useCallback)(()=>{fe(ie+10);const{datasourceType:pe,uid:Ie}=ge;(0,o.ff)("grafana_explore_logs_log_context_load_more_clicked",{datasourceType:pe,logRowUid:Ie,newLimit:ie+10})},[ie,ge]),Ve=(0,n.useCallback)(async()=>{const pe=await W(de,ge,ie,ce);pe.doNotCheckForMore=!0,ae(pe)},[de,ie,ce,ge]),it=(0,n.useMemo)(()=>({before:Ce?Ce.data[0]:[],after:Ce?Ce.data[1]:[]}),[Ce]),rt=(0,n.useMemo)(()=>({before:Ce?Ce.errors[0]:void 0,after:Ce?Ce.errors[1]:void 0}),[Ce]);return re({result:it,errors:rt,hasMoreContextRows:ne,updateLimit:ve,runContextQuery:Ve,limit:ie,logsSortOrder:ce})};var N=e(48955);class S extends n.PureComponent{render(){const{row:ge,showDetectedFields:re,getFieldLinks:ce,wrapLogMessage:ie}=this.props,fe=(0,R.YD)(ge,ce),Ce=ie?"":f.css`
          white-space: nowrap;
        `,ee=re.map(ne=>{const X=fe.find(te=>{const{keys:ae}=te;return ae[0]===ne});return X!=null?`${ne}=${X.values}`:ge.labels[ne]!==void 0&&ge.labels[ne]!==null?`${ne}=${ge.labels[ne]}`:null}).filter(ne=>ne!==null).join(" ");return n.createElement("td",{className:Ce},ee)}}const Y=(0,s.HE)(S);Y.displayName="LogRowMessageDisplayedFields";class Q extends n.PureComponent{constructor(){super(...arguments),this.state={showContext:!1,showDetails:!1},this.toggleContext=ge=>{const{datasourceType:re,uid:ce}=this.props.row;(0,o.ff)("grafana_explore_logs_log_context_clicked",{datasourceType:re,logRowUid:ce,type:ge}),this.props.toggleContextIsOpen?.(),this.setState(ie=>({showContext:!ie.showContext}))},this.toggleDetails=()=>{this.props.enableLogDetails&&((0,o.ff)("grafana_explore_logs_log_details_clicked",{datasourceType:this.props.row.datasourceType,type:this.state.showDetails?"close":"open",logRowUid:this.props.row.uid,app:this.props.app}),this.setState(ge=>({showDetails:!ge.showDetails})))},this.onMouseEnter=()=>{this.props.onLogRowHover&&this.props.onLogRowHover(this.props.row)},this.onMouseLeave=()=>{this.props.onLogRowHover&&this.props.onLogRowHover(void 0)}}renderTimeStamp(ge){return(0,c.dq)(ge,{timeZone:this.props.timeZone,defaultWithMS:!0})}renderLogRow(ge,re,ce,ie,fe,Ce,ee){const{getRows:ne,onClickFilterLabel:X,onClickFilterOutLabel:te,onClickShowField:ae,onClickHideField:_,enableLogDetails:ve,row:Ve,showDuplicates:it,showContextToggle:rt,showRowMenu:pe,showLabels:Ie,showTime:We,displayedFields:Je,wrapLogMessage:He,prettifyLogMessage:Ae,theme:et,getFieldLinks:_e,forceEscape:Se,app:Fe,scrollElement:Xe,styles:Qe}=this.props,{showDetails:ct,showContext:ht}=this.state,ft=(0,P.p)(et,Ve.logLevel),{errorMessage:Re,hasError:nt}=(0,i.Mi)(Ve),le=(0,f.cx)(Qe.logsRow,{[Qe.errorLogRow]:nt,[Qe.contextBackground]:ht}),Pe=Ve.hasUnescapedContent&&Se?{...Ve,entry:(0,i.l3)(Ve.entry),raw:(0,i.l3)(Ve.raw)}:Ve;return n.createElement(n.Fragment,null,n.createElement("tr",{className:le,onClick:this.toggleDetails,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},it&&n.createElement("td",{className:Qe.logsRowDuplicates},Pe.duplicates&&Pe.duplicates>0?`${Pe.duplicates+1}x`:null),n.createElement("td",{className:nt?"":`${ft.logsRowLevelColor} ${Qe.logsRowLevel}`},nt&&n.createElement(m.u,{content:`Error: ${Re}`,placement:"right",theme:"error"},n.createElement(r.J,{className:Qe.logIconError,name:"exclamation-triangle",size:"xs"}))),ve&&n.createElement("td",{title:ct?"Hide log details":"See log details",className:Qe.logsRowToggleDetails},n.createElement(r.J,{className:Qe.topVerticalAlign,name:ct?"angle-down":"angle-right"})),We&&n.createElement("td",{className:Qe.logsRowLocalTime},this.renderTimeStamp(Ve.timeEpochMs)),Ie&&Pe.uniqueLabels&&n.createElement("td",{className:Qe.logsRowLabels},n.createElement(A.j,{labels:Pe.uniqueLabels})),Je&&Je.length>0?n.createElement(Y,{row:Pe,showDetectedFields:Je,getFieldLinks:_e,wrapLogMessage:He}):n.createElement(N.r,{row:Pe,getRows:ne,errors:re,hasMoreContextRows:ce,getLogRowContextUi:Ce,runContextQuery:ee,updateLimit:ie,context:ge,contextIsOpen:ht,showContextToggle:rt,showRowMenu:pe,wrapLogMessage:He,prettifyLogMessage:Ae,onToggleContext:this.toggleContext,app:Fe,scrollElement:Xe,logsSortOrder:fe,styles:Qe})),this.state.showDetails&&n.createElement(w,{className:le,showDuplicates:it,getFieldLinks:_e,onClickFilterLabel:X,onClickFilterOutLabel:te,onClickShowField:ae,onClickHideField:_,getRows:ne,row:Pe,wrapLogMessage:He,hasError:nt,displayedFields:Je,app:Fe,styles:Qe}))}render(){const{showContext:ge}=this.state,{logsSortOrder:re,row:ce,getRowContext:ie,getLogRowContextUi:fe}=this.props;return ge?n.createElement(n.Fragment,null,n.createElement(U,{row:ce,getRowContext:ie,logsSortOrder:re},({result:Ce,errors:ee,hasMoreContextRows:ne,updateLimit:X,runContextQuery:te,logsSortOrder:ae})=>n.createElement(n.Fragment,null,this.renderLogRow(Ce,ee,ne,X,ae,fe,te)))):this.renderLogRow()}}const z=(0,s.HE)(Q);z.displayName="LogRow";const G=100;class k extends n.PureComponent{constructor(){super(...arguments),this.renderAllTimer=null,this.state={renderAll:!1,contextIsOpen:!1},this.toggleContextIsOpen=()=>{this.setState(ge=>({contextIsOpen:!ge.contextIsOpen}))},this.makeGetRows=(0,t.Z)(ge=>()=>ge),this.sortLogs=(0,t.Z)((ge,re)=>(0,i.$u)(ge,re))}componentDidMount(){const{logRows:ge,previewLimit:re}=this.props,ie=(ge?ge.length:0)<=re*2;ie?this.setState({renderAll:ie}):this.renderAllTimer=window.setTimeout(()=>this.setState({renderAll:!0}),2e3)}componentWillUnmount(){this.renderAllTimer&&clearTimeout(this.renderAllTimer)}render(){const{dedupStrategy:ge,showContextToggle:re,showLabels:ce,showTime:ie,wrapLogMessage:fe,prettifyLogMessage:Ce,logRows:ee,deduplicatedRows:ne,timeZone:X,onClickFilterLabel:te,onClickFilterOutLabel:ae,theme:_,enableLogDetails:ve,previewLimit:Ve,getFieldLinks:it,logsSortOrder:rt,displayedFields:pe,onClickShowField:Ie,onClickHideField:We,forceEscape:Je,onLogRowHover:He,app:Ae,scrollElement:et,getLogRowContextUi:_e}=this.props,{renderAll:Se,contextIsOpen:Fe}=this.state,Xe=(0,P.h)(_),Qe=ne||ee,ct=ee&&ee.length>0,ht=Qe?Qe.reduce((Ye,be)=>be.duplicates?Ye+be.duplicates:Ye,0):0,ft=ge!==l.Y4.none&&ht>0,Re=Qe||[],nt=rt?this.sortLogs(Re,rt):Re,le=nt.slice(0,Ve),Pe=nt.slice(Ve,nt.length),Oe=this.makeGetRows(nt),Le=this.props.getRowContext?this.props.getRowContext:()=>Promise.resolve([]);return n.createElement("table",{className:Xe.logsRowsTable},n.createElement("tbody",null,ct&&le.map((Ye,be)=>n.createElement(z,{key:Ye.uid,getRows:Oe,getRowContext:Le,getLogRowContextUi:_e,row:Ye,showContextToggle:re,showRowMenu:!Fe,showDuplicates:ft,showLabels:ce,showTime:ie,displayedFields:pe,wrapLogMessage:fe,prettifyLogMessage:Ce,timeZone:X,enableLogDetails:ve,onClickFilterLabel:te,onClickFilterOutLabel:ae,onClickShowField:Ie,onClickHideField:We,getFieldLinks:it,logsSortOrder:rt,forceEscape:Je,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:He,app:Ae,scrollElement:et,styles:Xe})),ct&&Se&&Pe.map((Ye,be)=>n.createElement(z,{key:Ye.uid,getRows:Oe,getRowContext:Le,getLogRowContextUi:_e,row:Ye,showContextToggle:re,showRowMenu:!Fe,showDuplicates:ft,showLabels:ce,showTime:ie,displayedFields:pe,wrapLogMessage:fe,prettifyLogMessage:Ce,timeZone:X,enableLogDetails:ve,onClickFilterLabel:te,onClickFilterOutLabel:ae,onClickShowField:Ie,onClickHideField:We,getFieldLinks:it,logsSortOrder:rt,forceEscape:Je,toggleContextIsOpen:this.toggleContextIsOpen,onLogRowHover:He,app:Ae,scrollElement:et,styles:Xe})),ct&&!Se&&n.createElement("tr",null,n.createElement("td",{colSpan:5},"Rendering ",nt.length-Ve," rows..."))))}}k.defaultProps={previewLimit:G};const j=(0,s.HE)(k);j.displayName="LogsRows"},34282:(Z,O,e)=>{"use strict";e.d(O,{h:()=>c,p:()=>f});var t=e(9892),n=e(58635),l=e(28550),s=e(90595),i=e(85419);const f=(o,m)=>{let r=o.isLight?o.v1.palette.gray5:o.v1.palette.gray2;switch(m){case s.in.crit:case s.in.critical:r="#705da0";break;case s.in.error:case s.in.err:r="#e24d42";break;case s.in.warning:case s.in.warn:r=o.colors.warning.main;break;case s.in.info:r="#7eb26d";break;case s.in.debug:r="#1f78c1";break;case s.in.trace:r="#6ed0e0";break}return{logsRowLevelColor:t.css`
      &::after {
        background-color: ${r};
      }
    `}},c=(0,n.Z)(o=>{const m=i.hoverColor(o.colors.background.secondary,o),r=(0,l.Z)(o.components.dashboard.background).setAlpha(.7).toRgbString();return{logsRowLevel:t.css`
      label: logs-row__level;
      max-width: ${o.spacing(1.25)};
      cursor: default;
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 1px;
        bottom: 1px;
        width: 3px;
        left: ${o.spacing(.5)};
      }
    `,logsRowMatchHighLight:t.css`
      label: logs-row__match-highlight;
      background: inherit;
      padding: inherit;
      color: ${o.components.textHighlight.text}
      background-color: ${o.components.textHighlight};
    `,logsRowsTable:t.css`
      label: logs-rows;
      font-family: ${o.typography.fontFamilyMonospace};
      font-size: ${o.typography.bodySmall.fontSize};
      width: 100%;
      margin-bottom: ${o.spacing(2.25)}; /* This is to make sure the last row's LogRowMenu is not cut off. */
    `,contextBackground:t.css`
      background: ${m};
    `,logsRow:t.css`
      label: logs-row;
      width: 100%;
      cursor: pointer;
      vertical-align: top;

      &:hover {
        .log-row-menu {
          visibility: visible;
          z-index: 1;
        }

        background: ${m};
      }

      td:not(.log-row-menu-cell):last-child {
        width: 100%;
      }

      > td:not(.log-row-menu-cell) {
        position: relative;
        padding-right: ${o.spacing(1)};
        border-top: 1px solid transparent;
        border-bottom: 1px solid transparent;
        height: 100%;
      }
    `,logsRowDuplicates:t.css`
      label: logs-row__duplicates;
      text-align: right;
      width: 4em;
      cursor: default;
    `,logIconError:t.css`
      color: ${o.colors.warning.main};
    `,logsRowToggleDetails:t.css`
      label: logs-row-toggle-details__level;
      font-size: 9px;
      padding-top: 5px;
      max-width: 15px;
    `,logsRowLocalTime:t.css`
      label: logs-row__localtime;
      white-space: nowrap;
    `,logsRowLabels:t.css`
      label: logs-row__labels;
      white-space: nowrap;
      max-width: 22em;

      /* This is to make the labels vertical align */
      > span {
        margin-top: 0.75px;
      }
    `,logsRowMessage:t.css`
      label: logs-row__message;
      white-space: pre-wrap;
      word-break: break-all;
      overflow-wrap: anywhere;
      width: 100%;
      text-align: left;
    `,logDetailsContainer:t.css`
      label: logs-row-details-table;
      border: 1px solid ${o.colors.border.medium};
      padding: 0 ${o.spacing(1)} ${o.spacing(1)};
      border-radius: ${o.shape.radius.default};
      margin: ${o.spacing(2.5)} ${o.spacing(1)} ${o.spacing(2.5)} ${o.spacing(2)};
      cursor: default;
    `,logDetailsTable:t.css`
      label: logs-row-details-table;
      line-height: 18px;
      width: 100%;
      td:last-child {
        width: 100%;
      }
    `,logsDetailsIcon:t.css`
      label: logs-row-details__icon;
      position: relative;
      color: ${o.v1.palette.gray3};
      padding-top: 1px;
      padding-bottom: 1px;
      padding-right: ${o.spacing(.75)};
    `,logDetailsLabel:t.css`
      label: logs-row-details__label;
      max-width: 30em;
      min-width: 20em;
      padding: 0 ${o.spacing(1)};
      overflow-wrap: break-word;
    `,logDetailsHeading:t.css`
      label: logs-row-details__heading;
      font-weight: ${o.typography.fontWeightBold};
      padding: ${o.spacing(1)} 0 ${o.spacing(.5)};
    `,logDetailsValue:t.css`
      label: logs-row-details__row;
      position: relative;
      vertical-align: middle;
      cursor: default;

      &:hover {
        background-color: ${m};
      }
    `,topVerticalAlign:t.css`
      label: topVerticalAlign;
      margin-top: -${o.spacing(.9)};
      margin-left: -${o.spacing(.25)};
    `,detailsOpen:t.css`
      &:hover {
        background-color: ${i.hoverColor(o.colors.background.primary,o)};
      }
    `,errorLogRow:t.css`
      label: erroredLogRow;
      color: ${o.colors.text.secondary};
    `,positionRelative:t.css`
      label: positionRelative;
      position: relative;
    `,rowWithContext:t.css`
      label: rowWithContext;
      z-index: 1;
      outline: 9999px solid ${r};
      display: inherit;
    `,horizontalScroll:t.css`
      label: horizontalScroll;
      white-space: pre;
    `,contextNewline:t.css`
      display: block;
      margin-left: 0px;
    `,rowMenu:t.css`
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      align-content: flex-end;
      justify-content: space-evenly;
      align-items: center;
      position: absolute;
      top: 0;
      bottom: auto;
      height: ${o.spacing(4.5)};
      background: ${o.colors.background.primary};
      box-shadow: ${o.shadows.z3};
      padding: ${o.spacing(0,0,0,.5)};
      z-index: 100;
      visibility: hidden;
      width: ${o.spacing(5)};
    `,rowMenuWithContextButton:t.css`
      width: ${o.spacing(10)};
    `,logRowMenuCell:t.css`
      position: sticky;
      z-index: ${o.zIndex.dropdown};
      margin-top: -${o.spacing(.125)};
      right: 0px;

      & > span {
        transform: translateX(-100%);
      }
    `,logLine:t.css`
      background-color: transparent;
      border: none;
      diplay: inline;
      font-family: ${o.typography.fontFamilyMonospace};
      font-size: ${o.typography.bodySmall.fontSize};
      letter-spacing: ${o.typography.bodySmall.letterSpacing};
      text-align: left;
      padding: 0;
      user-select: text;
    `,logsRowLevelDetails:t.css`
      label: logs-row__level_details;
      &::after {
        top: -3px;
      }
    `,logDetails:t.css`
      label: logDetailsDefaultCursor;
      cursor: default;

      &:hover {
        background-color: ${o.colors.background.primary};
      }
    `}})},35160:(Z,O,e)=>{"use strict";e.d(O,{B2:()=>i,DC:()=>s,YD:()=>l});var t=e(58635),n=e(14582);const l=(0,t.Z)((c,o)=>{const m=i(c,o);return Object.values(m)}),s=(0,t.Z)(c=>{let o=[];return c.forEach(m=>{m.links?.forEach(r=>{if(r.variables){const u=r.variables.map(g=>{const p=g.variableName,E=g.fieldPath?`.${g.fieldPath}`:"";return`${p}${E}`}),d=r.variables.map(g=>g.found?g.value:"");o.push({keys:u,values:d,links:[r],fieldIndex:m.fieldIndex})}})}),o}),i=(0,t.Z)((c,o)=>c.dataFrame.fields.map((m,r)=>({...m,index:r})).filter((m,r)=>!f(m,r,c)).map(m=>{const r=o?o(m,c.rowIndex,c.dataFrame):[];return{keys:[m.name],values:[m.values.get(c.rowIndex).toString()],links:r,fieldIndex:m.index}}));function f(c,o,m){if(c.name==="labels"&&c.type===n.fS.other||c.name==="id"||c.name==="tsNs")return!0;const r=m.dataFrame.fields.find(u=>u.type===n.fS.time);return!!(c.name===r?.name&&c.type===n.fS.time&&c.values.get(0)===r.values.get(0)||c.config.custom?.hidden||c.values.get(m.rowIndex)==null)}},81042:(Z,O,e)=>{"use strict";e.d(O,{$u:()=>a,DA:()=>p,Di:()=>y,Mi:()=>v,ZO:()=>m,_c:()=>C,i6:()=>d,j0:()=>h,jx:()=>r,l3:()=>x,lL:()=>u});var t=e(82897),n=e.n(t),l=e(90595),s=e(40538),i=e(71895),f=e(14582),c=e(38685),o=e(35160);function m(P){if(!P)return l.in.unknown;let D=l.in.unknown,M;for(const b of Object.keys(l.in)){const B=new RegExp(`\\b${b}\\b`,"i").exec(P);B&&(M===void 0||B.index<M)&&(D=l.in[b],M=B.index)}return D}function r(P){const D=l.in[P.toString().toLowerCase()];return D||l.in.unknown}function u(P,D){const M=P.filter(B=>B.labels[D]!==void 0),b=M.length,R=(0,t.countBy)(M,B=>B.labels[D]);return g(R,b)}function d(P){const D=P.filter(b=>b!=null),M=(0,t.countBy)(D);return g(M,D.length)}const g=(P,D)=>(0,t.chain)(P).map((M,b)=>({count:M,value:b,proportion:M/D})).sortBy("count").reverse().value(),p=(P,D)=>P.timeEpochMs<D.timeEpochMs?-1:P.timeEpochMs>D.timeEpochMs?1:P.timeEpochNs<D.timeEpochNs?-1:P.timeEpochNs>D.timeEpochNs?1:0,E=(P,D)=>P.timeEpochMs>D.timeEpochMs?-1:P.timeEpochMs<D.timeEpochMs?1:P.timeEpochNs>D.timeEpochNs?-1:P.timeEpochNs<D.timeEpochNs?1:0,h=(P,D)=>{const M=P?a(P.rows,D):[];return P?{...P,rows:M}:{hasUniqueLabels:!1,rows:M}},a=(P,D)=>D===s.UV.Ascending?P.sort(p):P.sort(E),v=P=>P.labels.__error__?{hasError:!0,errorMessage:P.labels.__error__}:{hasError:!1},x=P=>P.replace(/\\r\\n|\\n|\\t|\\r/g,D=>D.slice(1)==="t"?"	":`
`);function y(P){return P.map(D=>{const M=(0,o.B2)(D).reduce((b,R)=>{const B=R.keys[0];return b[B]=R.values[0],b},{});return{line:D.entry,timestamp:D.timeEpochNs,fields:{...M,...D.labels}}})}const C=P=>{if(P.length===0)throw new Error("Cannot aggregate data frames: there must be at least one data frame to aggregate");const D={},M={};let b=[];return P.forEach(R=>{const B=new i.N(R),w=B.getFirstFieldOfType(f.fS.time),A=B.getFirstFieldOfType(f.fS.number);if(!w)throw new Error("Missing time field");if(!A)throw new Error("Missing value field");const I=A.config.displayNameFromDS||R.name||"logs",F=A.values.length;M[I]={meta:R.meta,valueFieldConfig:A.config,timeFieldConfig:w.config};for(let K=0;K<F;K++){const W=w.values.get(K),U=A.values.get(K);D[I]??={},D[I][W]=(D[I][W]||0)+U}}),Object.keys(D).forEach(R=>{const B=new c.v,{meta:w,timeFieldConfig:A,valueFieldConfig:I}=M[R];B.name=R,B.meta=w,B.addField({name:"Time",type:f.fS.time,config:A}),B.addField({name:"Value",type:f.fS.number,config:I});for(const F in D[R]){const K=D[R][F];B.add({Time:Number(F),Value:K})}b.push(B)}),b}},80600:(Z,O,e)=>{"use strict";e.d(O,{H:()=>u});var t=e(68404),n=e(5191),l=e(31403),s=e(10655),i=e(9892),f=e(72648),c=e(98102);const o=({title:d})=>{const g=(0,f.wW)(r);return t.createElement("p",{className:g.description},d?"Are you sure you want to revoke this URL? The dashboard will no longer be public.":"Orphaned public dashboard will no longer be public.")},m=({dashboardTitle:d,onConfirm:g,onDismiss:p})=>t.createElement(c.s,{isOpen:!0,body:t.createElement(o,{title:d}),onConfirm:g,onDismiss:p,title:"Revoke public URL",icon:"trash-alt",confirmText:"Revoke public URL"}),r=d=>({title:i.css`
    margin-bottom: ${d.spacing(1)};
  `,description:i.css`
    font-size: ${d.typography.body.fontSize};
  `}),u=({dashboard:d,publicDashboard:g,loader:p,children:E,onDismiss:h,...a})=>{const[v,{isLoading:x}]=(0,s.bS)(),y=(C,P)=>{v({dashboard:d,uid:C.uid,dashboardUid:C.dashboardUid}),P()};return t.createElement(n.JY,null,({showModal:C,hideModal:P})=>t.createElement(l.zx,{"aria-label":"Revoke public URL",title:"Revoke public URL",onClick:()=>C(m,{dashboardTitle:g.title,onConfirm:()=>y(g,P),onDismiss:()=>{h?h():P()}}),...a},x&&p?p:E))}},85385:(Z,O,e)=>{"use strict";e.d(O,{t:()=>i});var t=e(29930);const n={FOLDER:"dash-folder",DASHBOARD:"dash-db"};class l extends Error{constructor(c,o){super(o),this.type=c}}class s{constructor(){this.rootName="general"}validateNewDashboardName(c,o){return this.validate(c,o,"A dashboard or a folder with the same name already exists")}validateNewFolderName(c){return this.validate(0,c,"A folder or dashboard in the general folder with the same name already exists")}async validate(c,o,m){o=(o||"").trim();const r=o.toLowerCase();if(o.length===0)throw new l("REQUIRED","Name is required");if(c===0&&r===this.rootName)throw new l("EXISTING","This is a reserved name and cannot be used for a folder.");const u=[];u.push(t.ae.search({type:n.FOLDER,folderIds:[c],query:o})),u.push(t.ae.search({type:n.DASHBOARD,folderIds:[c],query:o}));const d=await Promise.all(u);let g=[];d.length>0&&d[0].length>0&&(g=d[0]),d.length>1&&d[1].length>0&&(g=g.concat(d[1]));for(const p of g)if(r===p.title.toLowerCase())throw new l("EXISTING",m)}}const i=new s},50946:(Z,O,e)=>{"use strict";e.d(O,{$j:()=>h,EW:()=>I,Fd:()=>P,Jx:()=>v,L6:()=>b,Pb:()=>A,ZL:()=>w,ct:()=>x,iM:()=>F,nQ:()=>d,q_:()=>u,uC:()=>D,ys:()=>E});var t=e(83383),n=e(54899),l=e(37932),s=e(86647),i=e(659),f=e(60499),c=e(30992),o=e(86648),m=e(59096),r=e(24693);function u(W){return async U=>{try{U((0,r.AK)());const N=await(0,n.i)().get(`/api/gnet/dashboards/${W}`);U((0,r.S9)(N)),U(g(N.json)),U(p(N.json))}catch(N){U((0,r.eh)()),(0,n.kW)(N)&&U((0,i.$l)((0,f.t_)(N.data.message||N)))}}}function d(W){return async U=>{U((0,r.Nw)(W)),U(g(W)),U(p(W))}}function g(W){return U=>{if(W&&W.__inputs){const N=[];W.__inputs.forEach(S=>{const Y={name:S.name,label:S.label,info:S.description,value:S.value,type:S.type,pluginId:S.pluginId,options:[]};S.type===r.n$.DataSource?a(S,Y):Y.info||(Y.info="Specify a string constant"),N.push(Y)}),U((0,r.Zc)(N))}}}function p(W){return async function(U){if(!W||!W.__elements)return;const N=[];for(const S of Object.values(W.__elements)){if(S.kind!==m.V.Panel)continue;const Y=S.model,{type:Q,description:z}=Y,{uid:G,name:k}=S,j={model:{model:Y,uid:G,name:k,version:0,type:Q,kind:m.V.Panel,description:z},state:r.KQ.New};try{const de=await(0,o.Mh)(G,!0);j.state=r.KQ.Exists,j.model=de}catch(de){if(de.status!==404)throw de}N.push(j)}U((0,r.C2)(N))}}function E(){return W=>{W((0,r.MO)())}}function h(W){return async(U,N)=>{const S=N().importDashboard.dashboard,Y=N().importDashboard.inputs;let Q=[];W.dataSources?.forEach((k,j)=>{const de=Y.dataSources[j];Q.push({name:de.name,type:de.type,pluginId:de.pluginId,value:k.uid})}),W.constants?.forEach((k,j)=>{const de=Y.constants[j];Q.push({value:k,name:de.name,type:de.type})});const z=await(0,n.i)().post("api/dashboards/import",{dashboard:{...S,title:W.title,uid:W.uid||S.uid},overwrite:!0,inputs:Q,folderUid:W.folder.uid}),G=t.u.stripBaseFromUrl(z.importedUrl);l.E1.push(G)}}const a=(W,U)=>{(0,s.F)().getList({pluginId:W.pluginId}).length===0?U.info="No data sources of type "+W.pluginName+" found":U.info||(U.info="Select a "+W.pluginName+" data source")};async function v(W,U){const N={totalCount:W.length,successCount:0};for(const S of W)try{await R(S,U)!==null&&(N.successCount+=1)}catch(Y){console.error("Failed to move a folder",Y)}return N}function x(W,U){const N=[];for(const S of W)N.push(C(y,!0,S,U));return K(N).then(S=>({totalCount:S.length,successCount:S.filter(Y=>Y.succeeded).length,alreadyInFolderCount:S.filter(Y=>Y.alreadyInFolder).length}))}async function y(W,U){const N=await(0,n.i)().get(`/api/dashboards/uid/${W}`);if((N.meta.folderUid===void 0||N.meta.folderUid===null)&&U.uid===""||N.meta.folderUid===U.uid)return{alreadyInFolder:!0};const S={dashboard:N.dashboard,folderUid:U.uid,overwrite:!1};try{return await D(S),{succeeded:!0}}catch(Y){if((0,n.kW)(Y)){if(Y.data?.status!=="plugin-dashboard")return{succeeded:!1};Y.isHandled=!0}S.overwrite=!0;try{return await D(S),{succeeded:!0}}catch{return{succeeded:!1}}}}function C(W,U,...N){return async S=>{try{const Y=await W(...N);return Array.prototype.concat(S,[Y])}catch(Y){if(U)return S;throw Y}}}function P(W,U){const N=[];for(const S of W)N.push(C(M,!0,S,!0));for(const S of U)N.push(C(F,!0,S,!0));return K(N)}function D(W){return c.H.ignoreNextSave(),(0,n.i)().post("/api/dashboards/db/",{dashboard:W.dashboard,message:W.message??"",overwrite:W.overwrite??!1,folderUid:W.folderUid})}function M(W,U){return(0,n.i)().delete(`/api/folders/${W}?forceDeleteRules=false`,void 0,{showSuccessAlert:U})}function b(W){return(0,n.i)().post("/api/folders",W)}function R(W,U){const N={parentUid:U.uid};return(0,n.i)().post(`/api/folders/${W}/move`,N,{showErrorAlert:!1})}const B=1e3;function w(W,U,N=!1){return(0,n.i)().get("/api/search",{query:W,type:"dash-folder",permission:U,accesscontrol:N,limit:B})}function A(W){return(0,n.i)().get(`/api/folders/${W}`)}function I(W){return(0,n.i)().get(`/api/folders/id/${W}`)}function F(W,U){return(0,n.i)().delete(`/api/dashboards/uid/${W}`,{showSuccessAlert:U})}function K(W){return W.reduce((U,N)=>Promise.resolve(U).then(N),[])}},24693:(Z,O,e)=>{"use strict";e.d(O,{AK:()=>p,C2:()=>d,G7:()=>l,KQ:()=>i,MO:()=>o,Nw:()=>u,S9:()=>r,ZP:()=>h,Zc:()=>m,eh:()=>g,n$:()=>s,wg:()=>f});var t=e(62992),n=e(49922),l=(a=>(a[a.Gcom=0]="Gcom",a[a.Json=1]="Json",a))(l||{}),s=(a=>(a.DataSource="datasource",a.Constant="constant",a.LibraryPanel="libraryPanel",a))(s||{}),i=(a=>(a.New="new",a.Exists="exists",a.Different="different",a))(i||{});const f={meta:{updatedAt:"",orgName:""},dashboard:{},source:1,inputs:{},state:n.Gu.NotStarted},c=(0,t.oM)({name:"manageDashboards",initialState:f,reducers:{setGcomDashboard:(a,v)=>{a.dashboard={...v.payload.json,id:null},a.meta={updatedAt:v.payload.updatedAt,orgName:v.payload.orgName},a.source=0,a.state=n.Gu.Done},setJsonDashboard:(a,v)=>{a.dashboard={...v.payload,id:null},a.meta=f.meta,a.source=1,a.state=n.Gu.Done},clearDashboard:a=>{a.dashboard={},a.state=n.Gu.NotStarted},setInputs:(a,v)=>{a.inputs={dataSources:v.payload.filter(x=>x.type==="datasource"),constants:v.payload.filter(x=>x.type==="constant"),libraryPanels:[]}},setLibraryPanelInputs:(a,v)=>{a.inputs.libraryPanels=v.payload},fetchFailed:a=>{a.dashboard={},a.state=n.Gu.Error},fetchDashboard:a=>{a.state=n.Gu.Loading}}}),{clearDashboard:o,setInputs:m,setGcomDashboard:r,setJsonDashboard:u,setLibraryPanelInputs:d,fetchFailed:g,fetchDashboard:p}=c.actions,h={importDashboard:c.reducer}},2183:(Z,O,e)=>{"use strict";e.d(O,{FV:()=>i,JE:()=>o,Q$:()=>f,RF:()=>s,Yi:()=>c});var t=e(54899),n=e(659),l=e(17283);function s(m={getBackendSrv:t.i}){return async r=>{const u=await m.getBackendSrv().get("/api/org");return r((0,l.jR)(u)),u}}function i(m={getBackendSrv:t.i}){return async(r,u)=>{const d=u().organization.organization;await m.getBackendSrv().put("/api/org",{name:d.name}),r((0,n.H7)(d.name)),r(s(m))}}function f(m,r={getBackendSrv:t.i}){return async u=>{const d=await r.getBackendSrv().post("/api/user/using/"+m);u((0,n.H7)(d.name))}}function c(m,r={getBackendSrv:t.i}){return async u=>{const d=await r.getBackendSrv().post("/api/orgs/",m);u(f(d.orgId))}}function o(m={getBackendSrv:t.i}){return async r=>{const u=await m.getBackendSrv().get("/api/user/orgs");return r((0,l.IM)(u)),u}}},17283:(Z,O,e)=>{"use strict";e.d(O,{IM:()=>f,ZP:()=>o,jR:()=>i,xR:()=>s});var t=e(62992);const n={organization:{},userOrgs:[]},l=(0,t.oM)({name:"organization",initialState:n,reducers:{organizationLoaded:(m,r)=>({...m,organization:r.payload}),setOrganizationName:(m,r)=>({...m,organization:{...m.organization,name:r.payload}}),userOrganizationsLoaded:(m,r)=>({...m,userOrgs:r.payload})}}),{setOrganizationName:s,organizationLoaded:i,userOrganizationsLoaded:f}=l.actions,o={organization:l.reducer}},51927:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>E});var t=e(9892),n=e(68404),l=e(20251),s=e(40400),i=e(72648),f=e(60325),c=e(52822),o=e(84952),m=e(58379),r=e(36281),u=e(16200),d=e(9398),g=e(81168),p=e(32294);function E(v){const x=(0,i.wW)(a),y=(0,f.R9)(),C=new l.mi(v.data),{dataSummary:P}=C,D=h(v,P),M=(0,g.useDispatch)(),b=()=>{m.Z.setObject(o.FL,u.Ok.Suggestions),M((0,r.g_)(!0))},R=()=>{const B=(0,d.h4)().getCurrent()?.getPanelById(v.panelId);B&&M((0,p.Kc)({panel:B,pluginId:"table"}))};return n.createElement("div",{className:x.wrapper},n.createElement("div",{className:x.message},D),y.app===s.zj.PanelEditor&&P.hasData&&n.createElement("div",{className:x.actions},n.createElement(c.x,{icon:"table",onClick:R},"Switch to table"),n.createElement(c.x,{icon:"chart-line",onClick:b},"Open visualization suggestions")))}function h({data:v,fieldConfig:x,message:y,needsNumberField:C,needsTimeField:P,needsStringField:D},M){return y||(!v.series||v.series.length===0||v.series.every(b=>b.length===0)?x?.defaults.noValue??"No data":D&&!M.hasStringField?"Data is missing a string field":C&&!M.hasNumberField?"Data is missing a number field":P&&!M.hasTimeField?"Data is missing a time field":"Cannot visualize data")}const a=v=>({wrapper:(0,t.css)({display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"}),message:(0,t.css)({textAlign:"center",color:v.colors.text.secondary,fontSize:v.typography.size.lg,width:"100%"}),actions:(0,t.css)({marginTop:v.spacing(2),display:"flex",height:"50%",maxHeight:"150px",columnGap:v.spacing(1),rowGap:v.spacing(1),width:"100%",maxWidth:"600px"})})},35974:(Z,O,e)=>{"use strict";e.d(O,{F:()=>c,X:()=>o});var t=e(68404),n=e(48513),l=e(24699),s=e(45253),i=e(81168);class f extends t.PureComponent{constructor(r){super(r)}render(){const r={display:"flex",alignItems:"center",justifyContent:"center",height:"100%"};return t.createElement("div",{style:r},t.createElement(s.b,{severity:i.AppNotificationSeverity.Error,...this.props}))}}function c(m,r){const u=class extends t.PureComponent{render(){const p=t.createElement(t.Fragment,null,"Check the server startup logs for more information. ",t.createElement("br",null),"If this plugin was loaded from Git, then make sure it was compiled.");return t.createElement(f,{title:`Error loading: ${m.id}`,text:p})}},d=new n.c(u);return d.meta=m,d.loadError=!0,d}function o(m,r){const u=class extends t.PureComponent{render(){return t.createElement(f,{title:`Panel plugin not found: ${m}`})}},d=new n.c(r?()=>null:u);return d.meta={id:m,name:m,sort:100,type:l.zV.panel,module:"",baseUrl:"",info:{author:{name:""},description:"",links:[],logos:{large:"",small:"public/img/grafana_icon.svg"},screenshots:[],updated:"",version:""}},d}},98141:(Z,O,e)=>{"use strict";e.d(O,{$:()=>d});var t=e(68404),n=e(99919),l=e(36998),s=e(20231),i=e(2118),f=e(20308),c=e(72648),o=e(53546),m=e(77582),r=e(38490);const u={defaults:{},overrides:[]};function d(p){const{pluginId:E,data:h,timeZone:a=(0,n.Z)(),options:v={},width:x,height:y,title:C,onOptionsChange:P=()=>{},onChangeTimeRange:D=()=>{},onFieldConfigChange:M=()=>{},fieldConfig:b=u}=p,R=(0,c.l4)(),B=(0,f.J)(),w=(0,t.useMemo)(()=>B.replace.bind(B),[B]),[A,I]=(0,t.useState)((0,r.q1)(E)),[F,K]=(0,t.useState)(),W=g(A,v,b),U=(0,l.Cc)(A,W?.fieldConfig,h,a,R,w);if((0,t.useEffect)(()=>{A&&A.hasPluginId(E)||(0,r.Ub)(E).then(S=>I(S)).catch(S=>{K(S.message)})},[E,A]),F)return t.createElement("div",null,"Failed to load plugin: ",F);if(!A||!A.hasPluginId(E))return t.createElement("div",null,"Loading plugin panel...");if(!A.panel)return t.createElement("div",null,"Seems like the plugin you are trying to load does not have a panel component.");if(!U)return t.createElement("div",null,"No panel data");const N=A.panel;return t.createElement(o.z4,{dependencies:[A,h]},t.createElement(s.b,{meta:A.meta},t.createElement(N,{id:1,data:U,title:C,timeRange:U.timeRange,timeZone:a,options:W.options,fieldConfig:b,transparent:!1,width:x,height:y,renderCounter:0,replaceVariables:S=>S,onOptionsChange:P,onFieldConfigChange:M,onChangeTimeRange:D,eventBus:m.h$})))}function g(p,E,h){return(0,t.useMemo)(()=>{if(p)return(0,i.d4)({plugin:p,currentOptions:E,currentFieldConfig:h,isAfterPluginChange:!1})},[p,h,E])}},64703:(Z,O,e)=>{"use strict";e.d(O,{Bq:()=>w,PR:()=>y,PW:()=>D});var t=e(82897),n=e.n(t),l=e(89029),s=e(28151),i=e(89890),f=e(14582),c=e(83383),o=e(8928),m=e(27677),r=e(99227),u=e(20308),d=e(40538),g=e(47694),p=e(19349),E=e(69155);const h=[{value:`${l.W.keepTime}`,label:"Time range",documentation:"Adds current time range",origin:s.L8.BuiltIn},{value:`${l.W.timeRangeFrom}`,label:"Time range: from",documentation:"Adds current time range's from value",origin:s.L8.BuiltIn},{value:`${l.W.timeRangeTo}`,label:"Time range: to",documentation:"Adds current time range's to value",origin:s.L8.BuiltIn}],a=[{value:`${l.W.seriesName}`,label:"Name",documentation:"Name of the series",origin:s.L8.Series}],v=[{value:`${l.W.valueNumeric}`,label:"Numeric",documentation:"Numeric representation of selected value",origin:s.L8.Value},{value:`${l.W.valueText}`,label:"Text",documentation:"Text representation of selected value",origin:s.L8.Value},{value:`${l.W.valueRaw}`,label:"Raw",documentation:"Raw value",origin:s.L8.Value}],x=A=>A.includes(".")||A.trim().includes(" ")?`["${A}"]`:`.${A}`,y=()=>[...(0,u.J)().getVariables().map(A=>({value:A.name,label:A.name,origin:s.L8.Template})),{value:`${l.W.includeVars}`,label:"All variables",documentation:"Adds current variables",origin:s.L8.Template},...h],C=A=>{const I=[];for(const K of A)for(const W of K.fields)if(W.labels)for(const U of Object.keys(W.labels))I.push(U);const F=(0,t.chain)(I).flatten().uniq().value();return[{value:`${l.W.fieldName}`,label:"Name",documentation:"Field name of the clicked datapoint (in ms epoch)",origin:s.L8.Field},...F.map(K=>({value:`__field.labels${x(K)}`,label:`labels.${K}`,documentation:`${K} label value`,origin:s.L8.Field}))]},P=A=>{let I,F;const K=[],W={};if(A.length!==1)return[];const U=A[0];for(const N of U.fields){const S=(0,i.C)(N,U,A);W[S]||(K.push({value:`__data.fields${x(S)}`,label:`${S}`,documentation:`Formatted value for ${S} on the same row`,origin:s.L8.Fields}),W[S]=!0,!I&&N.type===f.fS.number&&(I={...N,name:S}),!F&&N.config.displayName&&N.config.displayName!==N.name&&(F={...N,name:S}))}return K.length&&K.push({value:"__data.fields[0]",label:"Select by index",documentation:"Enter the field order",origin:s.L8.Fields}),I&&(K.push({value:`__data.fields${x(I.name)}.numeric`,label:"Show numeric value",documentation:"the numeric field value",origin:s.L8.Fields}),K.push({value:`__data.fields${x(I.name)}.text`,label:"Show text value",documentation:"the text value",origin:s.L8.Fields})),F&&K.push({value:`__data.fields${x(F.name)}`,label:"Select by title",documentation:"Use the title to pick the field",origin:s.L8.Fields}),K},D=(A,I)=>{const F={value:`${l.W.valueTime}`,label:"Time",documentation:"Time value of the clicked datapoint (in ms epoch)",origin:s.L8.Value};return I===s.o3.Values?[...a,...C(A),...v,F,...P(A),...y()]:[...a,...C(A),...P(A),...y()]},M=A=>{const I=C(A),F={value:`${DataLinkBuiltInVars.valueCalc}`,label:"Calculation name",documentation:"Name of the calculation the value is a result of",origin:VariableOrigin.Value};return[...a,...I,...v,F,...y()]};class b{constructor(){this.getDataLinkUIModel=(I,F,K)=>{let W=I.url;I.onBuildUrl&&(W=I.onBuildUrl({origin:K,replaceVariables:F}));const U={href:c.u.assureBaseUrl(W.replace(/\n/g,"")),title:I.title??"",target:I.targetBlank?"_blank":void 0,origin:K};return F&&(U.href=F(U.href,void 0,d.b8.UriEncode),U.title=F(I.title)),I.onClick&&(U.onClick=N=>{I.onClick({origin:K,replaceVariables:F,e:N})}),U.href=(0,g.iE)().disableSanitizeHtml?U.href:o.QX.sanitizeUrl(U.href),U}}getLinkUrl(I){let F=c.u.assureBaseUrl((0,u.J)().replace(I.url||"")),K={};if(I.keepTime){const W=(0,p.$t)().timeRangeForUrl();K.from=W.from,K.to=W.to}return I.includeVars&&(K={...K,...(0,E.c)()}),F=m.Cj.appendQueryToUrl(F,m.Cj.toUrlParams(K)),(0,g.iE)().disableSanitizeHtml?F:o.QX.sanitizeUrl(F)}getAnchorInfo(I){const F=(0,u.J)(),K={};return K.href=this.getLinkUrl(I),K.title=F.replace(I.title||""),K.tooltip=F.replace(I.tooltip||""),K}getPanelLinkAnchorInfo(I,F){(0,r.d)("link_srv.ts","getPanelLinkAnchorInfo","getDataLinkUIModel");const K=(W,U,N)=>(0,u.J)().replace(W,{...F,...U},N);return this.getDataLinkUIModel(I,K,{})}}let R;function B(A){R=A}function w(){return R||(R=new b),R}},32294:(Z,O,e)=>{"use strict";e.d(O,{JI:()=>c,Kc:()=>m,ih:()=>r,qj:()=>o});var t=e(2118),n=e(86648),l=e(35974),s=e(85805),i=e(45984),f=e(46732);function c(d){return async(g,p)=>{if(d.libraryPanel?.uid&&!("model"in d.libraryPanel)){g(u(d));return}let E=d.type,h=p().plugins.panels[E];if(!h)try{h=await g((0,s.Ro)(E))}catch{h=(0,l.X)(E,E==="row")}d.plugin||d.pluginLoaded(h),g((0,f.bc)({key:d.key,plugin:h}))}}function o(d){return g=>{g((0,f.WJ)({key:d}))}}function m({panel:d,pluginId:g,options:p,fieldConfig:E}){return async(h,a)=>{if(d.type===g&&!p&&!E)return;let x=a().plugins.panels[g];if(x||(x=await h((0,s.Ro)(g))),d.type!==g&&d.changePlugin(x),p||E){const y=(0,t.d4)({plugin:x,currentOptions:p||d.options,currentFieldConfig:E||d.fieldConfig,isAfterPluginChange:!1});d.options=y.options,d.fieldConfig=y.fieldConfig,d.configRev++}d.generateNewKey(),h((0,f.bc)({key:d.key,plugin:x}))}}function r(d,g){return async(p,E)=>{const h=g.model.type,a=d.type;if(d.restoreModel({...g.model,gridPos:d.gridPos,id:d.id,libraryPanel:g}),d.getQueryRunner().clearLastResult(),a!==h){let x=E().plugins.panels[h];x||(x=await p((0,s.Ro)(h))),d.pluginLoaded(x),d.generateNewKey(),await p((0,f.bc)({key:d.key,plugin:x}))}else{const v=d.key;d.generateNewKey(),p((0,f.mr)({oldKey:v,newKey:d.key}))}d.configRev=0,d.hasSavedPanelEditChange=!0,d.refresh(),d.events.publish(i.pO),d.events.publish(i.Wj)}}function u(d){return async g=>{const p=d.libraryPanel.uid;try{const E=await(0,n.Mh)(p,!0);d.initLibraryPanel(E),g(c(d))}catch(E){console.log("ERROR: ",E),g((0,f.bc)({key:d.key,plugin:(0,l.X)("Unable to load library panel: "+p,!1)}))}}}},46732:(Z,O,e)=>{"use strict";e.d(O,{Vl:()=>m,WJ:()=>o,ZP:()=>u,bc:()=>s,mr:()=>c,o8:()=>i,pC:()=>f});var t=e(62992);const n={},l=(0,t.oM)({name:"panels",initialState:n,reducers:{panelModelAndPluginReady:(d,g)=>{d[g.payload.key]={plugin:g.payload.plugin}},changePanelKey:(d,g)=>{d[g.payload.newKey]=d[g.payload.oldKey],delete d[g.payload.oldKey]},removePanel:(d,g)=>{delete d[g.payload.key]},removeAllPanels:d=>{Object.keys(d).forEach(g=>delete d[g])},setPanelInstanceState:(d,g)=>{d[g.payload.key].instanceState=g.payload.value},setPanelAngularComponent:(d,g)=>{const p=d[g.payload.key];p.angularComponent=g.payload.angularComponent}}}),{panelModelAndPluginReady:s,setPanelAngularComponent:i,setPanelInstanceState:f,changePanelKey:c,removePanel:o,removeAllPanels:m}=l.actions,u={panels:l.reducer}},10079:(Z,O,e)=>{"use strict";e.d(O,{r0:()=>r});var t=e(82897),n=e.n(t),l=e(83383),s=e(27677),i=e(33180),f=e(37932),c=e(6129);const o={kiosk:!0,autofitpanels:!0,orgId:!0};class m{constructor(){this.urls=[],this.index=0,this.numberOfLoops=0,this.isPlaying=!1,this.locationUpdated=this.locationUpdated.bind(this)}next(){if(clearTimeout(this.nextTimeoutId),this.index>this.urls.length-1){if(this.numberOfLoops++,this.numberOfLoops>=3){window.location.href=this.startUrl;return}this.index=0}const g=this.urls[this.index],p=f.E1.getSearchObject(),E=(0,t.pickBy)(p,(a,v)=>o[v]),h=l.u.stripBaseFromUrl(g);this.index++,this.validPlaylistUrl=h,this.nextTimeoutId=setTimeout(()=>this.next(),this.interval),f.E1.push(h+"?"+s.Cj.toUrlParams(E))}prev(){this.index=Math.max(this.index-2,0),this.next()}locationUpdated(d){d.pathname!==this.validPlaylistUrl&&this.stop()}async start(d){this.stop(),this.startUrl=window.location.href,this.index=0,this.isPlaying=!0,this.locationListenerUnsub=f.E1.getHistory().listen(this.locationUpdated);const g=[];let p=await(0,c.A5)(d);if(!p.items?.length)return;this.interval=i.intervalToMs(p.interval);const E=await(0,c.jc)(p.items);for(const h of E)if(h.dashboards)for(const a of h.dashboards)g.push(a.url);g.length&&(this.urls=g,this.isPlaying=!0,this.next())}stop(){this.isPlaying&&(this.index=0,this.isPlaying=!1,this.locationListenerUnsub&&this.locationListenerUnsub(),this.nextTimeoutId&&clearTimeout(this.nextTimeoutId),f.E1.getSearchObject().kiosk&&f.E1.partial({kiosk:null}))}}const r=new m},6129:(Z,O,e)=>{"use strict";e.d(O,{A5:()=>p,CE:()=>d,Ds:()=>x,Dv:()=>E,cg:()=>u,d5:()=>v,jc:()=>a,l8:()=>g});var t=e(65583),n=e(50235),l=e(54899),s=e(35645),i=e(659),f=e(60499),c=e(83977),o=e(7832),m=e(3153),r=e(82e3);async function u(y){await h(()=>(0,l.i)().post("/api/playlists",y))}async function d(y,C){await h(()=>(0,l.i)().put(`/api/playlists/${y}`,C))}async function g(y){await h(()=>(0,l.i)().delete(`/api/playlists/${y}`),"Playlist deleted")}async function p(y){const C=await(0,l.i)().get(`/api/playlists/${y}`);if(C.items){for(const P of C.items)if(P.type==="dashboard_by_id"){P.type="dashboard_by_uid";const D=await(0,l.i)().get(`/api/dashboards/ids/${P.value}`);D.length&&(P.value=D[0])}}return C}async function E(){return(0,l.i)().get("/api/playlists/")}async function h(y,C="Playlist saved"){try{await y(),(0,m.WI)((0,i.$l)((0,f.AT)(C)))}catch(P){P instanceof Error&&(0,m.WI)((0,i.$l)((0,f.t_)("Unable to save playlist",P)))}}async function a(y){let C=0;if(!y?.length)return[];const P=[];for(const b of y){const R={query:"*",kind:["dashboard"],limit:1e3};switch(b.type){case"dashboard_by_id":throw new Error("invalid item (with id)");case"dashboard_by_uid":R.uid=[b.value];break;case"dashboard_by_tag":R.tags=[b.value];break}P.push({refId:`${C++}`,queryType:o.hR.Search,search:R})}if(!s.v.featureToggles.panelTitleSearch){const b=(0,r.getGrafanaSearcher)(),R=[];for(let B=0;B<P.length;B++){const w=(await b.search(P[B].search)).view;R.push({...y[B],dashboards:w.map(A=>({...A}))})}return R}const D=await(0,c.e)(),M=await(0,t.n)(D.query({targets:P}));if(M.data.length!==y.length)throw new Error("unexpected result size");return y.map((b,R)=>{const B=new n.U(M.data[R]);return{...b,dashboards:B.map(w=>({...w}))}})}function v(){return{items:[],interval:"5m",name:"",uid:""}}function x(y,C){return C?.length?(C=C.toLowerCase(),y.filter(P=>P.name.toLowerCase().includes(C))):y}},73354:(Z,O,e)=>{"use strict";e.d(O,{$F:()=>c,E1:()=>d,GP:()=>p,GV:()=>f,P6:()=>E,Tk:()=>g,jL:()=>o});var t=e(41959),n=e(54899),l=e(95156),s=e(11212),i=e(59210);async function f(a){const v=await m(a),x=Boolean(v),[y,C,P]=await Promise.all([d(),r(a,x),u(a)]),D=y.find(b=>b.id===a),M=D?.dependencies||v?.json?.dependencies;return{grafanaDependency:M?.grafanaDependency??M?.grafanaVersion??"",pluginDependencies:M?.plugins||[],links:D?.info.links||v?.json?.info.links||[],readme:P||v?.readme,versions:C}}async function c(){const{items:a}=await(0,n.i)().get(`${s.tB}/plugins`);return a.filter(i.wB)}async function o(){try{return await(0,n.i)().get(`${s.O2}/errors`)}catch{return[]}}async function m(a){try{return await(0,n.i)().get(`${s.tB}/plugins/${a}`,{})}catch(v){(0,n.kW)(v)&&(v.isHandled=!0);return}}async function r(a,v){try{return v?((await(0,n.i)().get(`${s.tB}/plugins/${a}/versions`)).items||[]).map(y=>({version:y.version,createdAt:y.createdAt,isCompatible:y.isCompatible,grafanaDependency:y.grafanaDependency})):[]}catch(x){return(0,n.kW)(x)&&(x.isHandled=!0),[]}}async function u(a){try{const v=await(0,n.i)().get(`${s.O2}/${a}/markdown/README`);return v?(0,t.a)(v):""}catch(v){return(0,n.kW)(v)&&(v.isHandled=!0),""}}async function d(){return(await(0,n.i)().get(`${s.O2}`,(0,l.y)({embedded:0}))).filter(i.EP)}async function g(a){return await(0,n.i)().post(`${s.O2}/${a}/install`,void 0,{showErrorAlert:!1})}async function p(a){return await(0,n.i)().post(`${s.O2}/${a}/uninstall`)}async function E(a,v){return(await(0,n.i)().datasourceRequest({url:`/api/plugins/${a}/settings`,method:"POST",data:v}))?.data}const h={getRemotePlugins:c,getInstalledPlugins:d,installPlugin:g,uninstallPlugin:p}},21048:(Z,O,e)=>{"use strict";e.d(O,{L:()=>s});var t=e(9892),n=e(68404),l=e(72648);const s=({children:f,wrap:c,className:o})=>{const m=(0,l.l4)(),r=i(m,c);return n.createElement("div",{className:(0,t.cx)(r.container,o)},f)},i=(f,c)=>({container:t.css`
    display: flex;
    flex-direction: row;
    flex-wrap: ${c?"wrap":"no-wrap"};
    & > * {
      margin-bottom: ${f.spacing()};
      margin-right: ${f.spacing()};
    }
    & > *:last-child {
      margin-right: 0;
    }
  `})},11212:(Z,O,e)=>{"use strict";e.d(O,{O2:()=>t,tB:()=>n,uJ:()=>l});const t="/api/plugins",n="/api/gnet",l="plugins"},59210:(Z,O,e)=>{"use strict";e.d(O,{AA:()=>h,EP:()=>D,HT:()=>P,Nh:()=>E,RU:()=>y,Uj:()=>p,XB:()=>x,ZG:()=>d,fG:()=>C,uR:()=>m,wB:()=>M});var t=e(24699),n=e(85052),l=e(35645),s=e(66121),i=e(77582),f=e(29930),c=e(81168),o=e(84532);function m(w=[],A=[],I){const F=[],K=a(I);return w.forEach(W=>{const U=A.find(S=>S.slug===W.id),N=K[W.id];U||F.push(r(W,void 0,N))}),A.forEach(W=>{const U=w.find(S=>S.id===W.slug),N=K[W.slug];F.push(r(U,W,N))}),F}function r(w,A,I){return!w&&A?u(A,I):w&&!A?d(w,I):g(w,A,I)}function u(w,A){const{name:I,slug:F,description:K,version:W,orgName:U,popularity:N,downloads:S,typeCode:Y,updatedAt:Q,createdAt:z,status:G}=w,k=!!A||R(Y);return{description:K,downloads:S,id:F,info:{logos:{small:`https://grafana.com/api/plugins/${F}/versions/${W}/logos/small`,large:`https://grafana.com/api/plugins/${F}/versions/${W}/logos/large`}},name:I,orgName:U,popularity:N,publishedAt:z,signature:v({remote:w,error:A}),updatedAt:Q,hasUpdate:!1,isPublished:!0,isInstalled:k,isDisabled:k,isCore:w.internal,isDev:!1,isEnterprise:G==="enterprise",type:Y,error:A?.errorCode}}function d(w,A){const{name:I,info:{description:F,version:K,logos:W,updated:U,author:N},id:S,dev:Y,type:Q,signature:z,signatureOrg:G,signatureType:k,hasUpdate:j,accessControl:de}=w,ge=!!A||R(Q);return{description:F,downloads:0,id:S,info:{logos:W},name:I,orgName:N.name,popularity:0,publishedAt:"",signature:v({local:w,error:A}),signatureOrg:G,signatureType:k,updatedAt:U,installedVersion:K,hasUpdate:j,isInstalled:!0,isDisabled:ge,isCore:z==="internal",isPublished:!1,isDev:Boolean(Y),isEnterprise:!1,type:Q,error:A?.errorCode,accessControl:de}}function g(w,A,I){const F=w?.info.version,K=A?.slug||w?.id||"",W=w?.type||A?.typeCode,U=!!I||R(W);let N={small:`/public/img/icn-${W}.svg`,large:`/public/img/icn-${W}.svg`};return A?N={small:`https://grafana.com/api/plugins/${K}/versions/${A.version}/logos/small`,large:`https://grafana.com/api/plugins/${K}/versions/${A.version}/logos/large`}:w&&w.info.logos&&(N=w.info.logos),{description:w?.info.description||A?.description||"",downloads:A?.downloads||0,hasUpdate:w?.hasUpdate||!1,id:K,info:{logos:N},isCore:Boolean(A?.internal||w?.signature===t.Xy.internal),isDev:Boolean(w?.dev),isEnterprise:A?.status==="enterprise",isInstalled:Boolean(w)||U,isDisabled:U,isPublished:!0,name:A?.name||w?.name||"",orgName:A?.orgName||w?.info.author.name||"",popularity:A?.popularity||0,publishedAt:A?.createdAt||"",type:W,signature:v({local:w,remote:A,error:I}),signatureOrg:w?.signatureOrg||A?.versionSignedByOrgName,signatureType:w?.signatureType||A?.versionSignatureType||A?.signatureType||void 0,updatedAt:A?.updatedAt||w?.info.updated||"",installedVersion:F,error:I?.errorCode,accessControl:w?.accessControl}}const p=w=>`${l.v.pluginCatalogURL}${w}`;var E=(w=>(w.nameAsc="nameAsc",w.nameDesc="nameDesc",w.updated="updated",w.published="published",w.downloads="downloads",w))(E||{});const h=(w,A)=>{const I={nameAsc:(F,K)=>F.name.localeCompare(K.name),nameDesc:(F,K)=>K.name.localeCompare(F.name),updated:(F,K)=>(0,n.J)(K.updatedAt).valueOf()-(0,n.J)(F.updatedAt).valueOf(),published:(F,K)=>(0,n.J)(K.publishedAt).valueOf()-(0,n.J)(F.publishedAt).valueOf(),downloads:(F,K)=>K.downloads-F.downloads};return I[A]?w.sort(I[A]):w};function a(w=[]){return w.reduce((A,I)=>(A[I.pluginId]=I,A),{})}function v(w){const{error:A,local:I,remote:F}=w;if(A)switch(A.errorCode){case t.w2.invalidSignature:return t.Xy.invalid;case t.w2.missingSignature:return t.Xy.missing;case t.w2.modifiedSignature:return t.Xy.modified}return I?.signature?I.signature:F?.signatureType||F?.versionSignatureType?t.Xy.valid:t.Xy.missing}const x=()=>(0,f.i)().get("/api/frontend/settings").then(w=>{l.v.panels=w.panels});function y(w){if(!w)return;const[A]=w.filter(I=>Boolean(I.isCompatible));return A}const C=()=>l.v.pluginAdminEnabled,P=(w,A,I)=>{const F=l.v.pluginAdminExternalManageEnabled,K=i.Vt.hasAccess(c.AccessControlAction.PluginsInstall,(0,o.bO)()),W=Boolean(I);return w.type===t.zV.renderer||w.type===t.zV.secretsmanager||w.isEnterprise&&!(0,s.v)("enterprise.plugins")||w.isDev||!K&&!F||!w.isPublished||!W||!A},D=w=>b(w.id),M=w=>b(w.slug);function b(w){const{pluginCatalogHiddenPlugins:A}=l.v;return!A.includes(w)}function R(w){return w===t.zV.secretsmanager&&!l.v.secretsManagerPluginEnabled}function B(w){return Boolean(w?.signature==="internal")}},84532:(Z,O,e)=>{"use strict";e.d(O,{Gg:()=>f,RN:()=>i,bO:()=>s});var t=e(47694),n=e(82002),l=e(81168);function s(){return t.vc.bootData.user.isGrafanaAdmin}function i(){return n.Vt.hasRole("Admin")}function f(){return n.Vt.hasPermission(l.AccessControlAction.DataSourcesCreate)&&n.Vt.hasPermission(l.AccessControlAction.DataSourcesWrite)}},85805:(Z,O,e)=>{"use strict";e.d(O,{DD:()=>u,LP:()=>h,N9:()=>d,Qd:()=>o,Ro:()=>a,Tz:()=>p,bQ:()=>g,bp:()=>m,m3:()=>E,tQ:()=>r});var t=e(62992),n=e(54899),l=e(38490),s=e(82907),i=e(73354),f=e(11212),c=e(59210);const o=(0,t.hg)(`${f.uJ}/fetchAll`,async(v,x)=>{try{const{dispatch:y}=x,[C,P,{payload:D}]=await Promise.all([(0,i.E1)(),(0,i.jL)(),y(r())]);return(0,c.uR)(C,D,P)}catch{return x.rejectWithValue("Unknown error.")}}),m=(0,t.hg)(`${f.uJ}/fetchAllLocal`,async(v,x)=>{try{return(await(0,i.E1)()).map(C=>(0,c.ZG)(C))}catch{return x.rejectWithValue("Unknown error.")}}),r=(0,t.hg)(`${f.uJ}/fetchRemotePlugins`,async(v,x)=>{try{return await(0,i.$F)()}catch(y){return(0,n.kW)(y)&&(y.isHandled=!0),x.rejectWithValue([])}}),u=(0,t.hg)(`${f.uJ}/fetchDetails`,async(v,x)=>{try{const y=await(0,i.GV)(v);return{id:v,changes:{details:y}}}catch{return x.rejectWithValue("Unknown error.")}}),d=(0,t.hg)(`${f.uJ}/install`,async({id:v,version:x,isUpdating:y=!1},C)=>{const P=y?{isInstalled:!0,installedVersion:x,hasUpdate:!1}:{isInstalled:!0,installedVersion:x};try{return await(0,i.Tk)(v),await(0,c.XB)(),y&&(0,s.Hl)(v),{id:v,changes:P}}catch(D){return console.error(D),(0,n.kW)(D)?C.rejectWithValue(D.data):C.rejectWithValue("Unknown error.")}}),g=(0,t.hg)(`${f.uJ}/install`,async()=>({})),p=(0,t.hg)(`${f.uJ}/uninstall`,async(v,x)=>{try{return await(0,i.GP)(v),await(0,c.XB)(),(0,s.Hl)(v),{id:v,changes:{isInstalled:!1,installedVersion:void 0}}}catch(y){return console.error(y),x.rejectWithValue("Unknown error.")}}),E=(0,t.hg)(`${f.uJ}/loadPluginDashboards`,async(v,x)=>{const P=`api/plugins/${x.getState().dataSources.dataSource.type}/dashboards`;return(0,n.i)().get(P)}),h=(0,t.PH)(`${f.uJ}/panelPluginLoaded`),a=v=>async(x,y)=>{let C=y().plugins.panels[v];return C||(C=await(0,l.Ub)(v),y().plugins.panels[v]||x(h(C))),C}},66552:(Z,O,e)=>{"use strict";e.d(O,{CD:()=>i,I6:()=>g,UC:()=>d});var t=e(62992),n=e(11212),l=e(48996),s=e(85805);const i=(0,t.HF)(),f=p=>new RegExp(`${n.uJ}/(.*)/pending`).test(p.type),c=p=>new RegExp(`${n.uJ}/(.*)/fulfilled`).test(p.type),o=p=>new RegExp(`${n.uJ}/(.*)/rejected`).test(p.type),m=p=>{const E=p.lastIndexOf("/");return p.substring(0,E)},r={items:i.getInitialState(),requests:{},settings:{displayMode:l.lL.Grid},plugins:[],errors:[],searchQuery:"",hasFetched:!1,dashboards:[],isLoadingPluginDashboards:!1,panels:{}},u=(0,t.oM)({name:"plugins",initialState:r,reducers:{setDisplayMode(p,E){p.settings.displayMode=E.payload}},extraReducers:p=>p.addCase(s.Qd.fulfilled,(E,h)=>{i.upsertMany(E.items,h.payload)}).addCase(s.bp.fulfilled,(E,h)=>{i.upsertMany(E.items,h.payload)}).addCase(s.DD.fulfilled,(E,h)=>{i.updateOne(E.items,h.payload)}).addCase(s.N9.fulfilled,(E,h)=>{i.updateOne(E.items,h.payload)}).addCase(s.Tz.fulfilled,(E,h)=>{i.updateOne(E.items,h.payload)}).addCase(s.LP,(E,h)=>{E.panels[h.payload.meta.id]=h.payload}).addCase(s.m3.pending,(E,h)=>{E.isLoadingPluginDashboards=!0,E.dashboards=[]}).addCase(s.m3.fulfilled,(E,h)=>{E.isLoadingPluginDashboards=!1,E.dashboards=h.payload}).addMatcher(f,(E,h)=>{E.requests[m(h.type)]={status:l.eE.Pending}}).addMatcher(c,(E,h)=>{E.requests[m(h.type)]={status:l.eE.Fulfilled}}).addMatcher(o,(E,h)=>{E.requests[m(h.type)]={status:l.eE.Rejected,error:h.payload}})}),{setDisplayMode:d}=u.actions,g=u.reducer},48996:(Z,O,e)=>{"use strict";e.d(O,{Co:()=>l,cd:()=>n,eE:()=>c,lL:()=>t,tu:()=>f,vF:()=>s,xc:()=>i});var t=(o=>(o.Grid="grid",o.List="list",o))(t||{}),n=(o=>(o.Home="plugins-home",o.Browse="plugins-browse",o.Details="plugins-details",o))(n||{}),l=(o=>(o.app="apps",o.datasource="database",o.panel="credit-card",o.renderer="capture",o.secretsmanager="key-skeleton-alt",o))(l||{}),s=(o=>(o.INSTALL="INSTALL",o.UNINSTALL="UNINSTALL",o.UPDATE="UPDATE",o.REINSTALL="REINSTALL",o))(s||{}),i=(o=>(o.OVERVIEW="Overview",o.VERSIONS="Version history",o.CONFIG="Config",o.DASHBOARDS="Dashboards",o.USAGE="Usage",o))(i||{}),f=(o=>(o.OVERVIEW="overview",o.VERSIONS="version-history",o.CONFIG="config",o.DASHBOARDS="dashboards",o.USAGE="usage",o))(f||{}),c=(o=>(o.Pending="Pending",o.Fulfilled="Fulfilled",o.Rejected="Rejected",o))(c||{})},52889:(Z,O,e)=>{"use strict";e.d(O,{a:()=>s,v:()=>n});var t=e(68404);const n=t.createContext(l());n.displayName="PluginPageContext";function l(){return{sectionNav:{main:{text:"Plugin page"},node:{text:"Plugin page"}}}}function s(i){return{sectionNav:i??l().sectionNav}}},91162:(Z,O,e)=>{"use strict";e.d(O,{ND:()=>g,ak:()=>h});var t=e(7238),n=e(25318),l=e(20308),s=e(70926),i=e(54899),f=e(86647),c=e(22069),o=e(18271),m=e(47694),r=e(47471),u=e(97573),d=e(66322);class g{constructor(v=(0,l.J)()){this.templateSrv=v,this.datasources={},this.settingsMapByName={},this.settingsMapByUid={},this.settingsMapById={},this.defaultName=""}init(v,x){this.datasources={},this.settingsMapByUid={},this.settingsMapByName=v,this.defaultName=x;for(const y of Object.values(v))y.uid||(y.uid=y.name),this.settingsMapByUid[y.uid]=y,this.settingsMapById[y.id]=y;this.datasources[c.hr.type]=r.mV,this.datasources[u.Yq]=r.mV,this.settingsMapByUid[c.hr.uid]=r.bE,this.settingsMapByUid[u.Yq]=r.bE}getDataSourceSettingsByUid(v){return this.settingsMapByUid[v]}getInstanceSettings(v,x){let y=p(v);if((0,c.Pr)(y))return r.bE;if(y==="default"||y==null)return this.settingsMapByUid[this.defaultName]??this.settingsMapByName[this.defaultName];if(y[0]==="$"){const C=this.templateSrv.replace(y,x,E);let P;return C==="default"?P=this.settingsMapByName[this.defaultName]:P=this.settingsMapByUid[C]??this.settingsMapByName[C],P?{...P,isDefault:!1,name:y,uid:y,rawRef:{type:P.type,uid:P.uid}}:void 0}return this.settingsMapByUid[y]??this.settingsMapByName[y]??this.settingsMapById[y]}get(v,x){let y=p(v);if(!y)return this.get(this.defaultName);if((0,c.Pr)(v))return Promise.resolve(this.datasources[u.Yq]);const C=this.settingsMapByName[y];return C&&(y=C.uid),this.datasources[y]?Promise.resolve(this.datasources[y]):(y=this.templateSrv.replace(y,x,E),y==="default"&&this.defaultName!=="default"?this.get(this.defaultName):this.datasources[y]?Promise.resolve(this.datasources[y]):this.loadDatasource(y))}async loadDatasource(v){if(this.datasources[v])return Promise.resolve(this.datasources[v]);const x=this.getInstanceSettings(v);if(!x)return Promise.reject({message:`Datasource ${v} was not found`});try{const y=await(0,d.nL)(x.meta);if(this.datasources[v])return this.datasources[v];const C=y.DataSourceClass.length!==1;let P;if(C?P=(0,s.V)().instantiate(y.DataSourceClass,{instanceSettings:x}):P=new y.DataSourceClass(x),P.components=y.components,!(P instanceof t.MF)){const D=P;D.name=x.name,D.id=x.id,D.type=x.type,D.meta=x.meta,D.uid=x.uid,P.getRef=t.MF.prototype.getRef}return this.datasources[v]=P,this.datasources[P.uid]=P,P}catch(y){return y instanceof Error&&o.Z.emit(n.SI.alertError,[x.name+" plugin failed",y.toString()]),Promise.reject({message:`Datasource: ${v} was not found`})}}getAll(){return Object.values(this.settingsMapByName)}getList(v={}){const x=Object.values(this.settingsMapByName).filter(C=>!(C.meta.id==="grafana"||C.meta.id==="mixed"||C.meta.id==="dashboard"||v.metrics&&!C.meta.metrics||v.tracing&&!C.meta.tracing||v.logs&&C.meta.category!=="logging"&&!C.meta.logs||v.annotations&&!C.meta.annotations||v.alerting&&!C.meta.alerting||v.pluginId&&C.meta.id!==v.pluginId||v.filter&&!v.filter(C)||v.type&&(Array.isArray(v.type)?!v.type.includes(C.type):v.type!==C.type)||!v.all&&C.meta.metrics!==!0&&C.meta.annotations!==!0&&C.meta.tracing!==!0&&C.meta.logs!==!0&&C.meta.alerting!==!0));if(v.variables)for(const C of this.templateSrv.getVariables()){if(C.type!=="datasource")continue;let P=C.current.value==="default"?this.defaultName:C.current.value;Array.isArray(P)&&P.length===1&&(P=P[0]);const D=!Array.isArray(P)&&this.settingsMapByName[P];if(D){const M=`\${${C.name}}`;x.push({...D,name:M,uid:M})}}const y=x.sort((C,P)=>C.name.toLowerCase()>P.name.toLowerCase()?1:C.name.toLowerCase()<P.name.toLowerCase()?-1:0);if(!v.pluginId&&!v.alerting){if(v.mixed){const C=this.getInstanceSettings("-- Mixed --");C&&x.push(C)}if(v.dashboard){const C=this.getInstanceSettings("-- Dashboard --");C&&x.push(C)}if(!v.tracing){const C=this.getInstanceSettings("-- Grafana --");C&&x.push(C)}}return y}getExternal(){return this.getList()}getAnnotationSources(){return this.getList({annotations:!0,variables:!0}).map(v=>({name:v.name,value:v.name,meta:v.meta}))}getMetricSources(v){return this.getList({metrics:!0,variables:!v?.skipVariables}).map(x=>({name:x.name,value:x.name,meta:x.meta}))}async reload(){const v=await(0,i.i)().get("/api/frontend/settings");m.ZP.datasources=v.datasources,m.ZP.defaultDatasource=v.defaultDatasource,this.init(v.datasources,v.defaultDatasource)}}function p(a){return(0,c.Pr)(a)?c.hr.uid:typeof a=="string"?a:a?.uid}function E(a){return Array.isArray(a)?a[0]:a}const h=()=>(0,f.F)()},38490:(Z,O,e)=>{"use strict";e.d(O,{Ub:()=>c,_2:()=>o,q1:()=>m});var t=e(48513),n=e(47694),l=e(35974),s=e(66322);const i={},f={};function c(u){const d=i[u];if(d)return d;const g=n.ZP.panels[u];if(!g)throw new Error(`Plugin ${u} not found`);return i[u]=r(g),i[u]}function o(u){return r(u)}function m(u){return f[u]}function r(u){return(0,s.N$)(u.module,u.info?.version).then(d=>{if(d.plugin)return d.plugin;if(d.PanelCtrl){const g=new t.c(null);return g.angularPanelCtrl=d.PanelCtrl,g}throw new Error("missing export: plugin or PanelCtrl")}).then(d=>(d.meta=u,f[u.id]=d,d)).catch(d=>(console.warn("Error loading panel plugin: "+u.id,d),(0,l.F)(u,d)))}},13011:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>s,a:()=>l});var t=e(54899);const n={};function l(i,f){const c=n[i];return c?Promise.resolve(c):(0,t.i)().get(`/api/plugins/${i}/settings`,void 0,void 0,f).then(o=>(n[i]=o,o)).catch(o=>Promise.reject(new Error("Unknown Plugin")))}const s=i=>i?delete n[i]:Object.keys(n).forEach(f=>delete n[f])},66322:(Z,O,e)=>{"use strict";e.d(O,{kY:()=>xa,Av:()=>Zr,nL:()=>qc,N$:()=>Cl});var t={};e.r(t),e.d(t,{plugin:()=>De});var n={};e.r(n),e.d(n,{plugin:()=>Us});var l={};e.r(l),e.d(l,{plugin:()=>is});var s={};e.r(s),e.d(s,{plugin:()=>gd});var i={};e.r(i),e.d(i,{plugin:()=>Di});var f={};e.r(f),e.d(f,{plugin:()=>If});var c={};e.r(c),e.d(c,{plugin:()=>Xd});var o={};e.r(o),e.d(o,{plugin:()=>$l});var m={};e.r(m),e.d(m,{plugin:()=>ru});var r={};e.r(r),e.d(r,{plugin:()=>$a});var u={};e.r(u),e.d(u,{plugin:()=>So});var d={};e.r(d),e.d(d,{plugin:()=>Du});var g={};e.r(g),e.d(g,{plugin:()=>Su});var p={};e.r(p),e.d(p,{plugin:()=>rc});var E={};e.r(E),e.d(E,{plugin:()=>ic});var h={};e.r(h),e.d(h,{plugin:()=>li});var a={};e.r(a),e.d(a,{plugin:()=>Yu});var v={};e.r(v),e.d(v,{plugin:()=>Qu});var x={};e.r(x),e.d(x,{plugin:()=>um});var y={};e.r(y),e.d(y,{plugin:()=>Em});var C={};e.r(C),e.d(C,{plugin:()=>Om});var P={};e.r(P),e.d(P,{plugin:()=>Lm});var D={};e.r(D),e.d(D,{plugin:()=>Um});var M={};e.r(M),e.d(M,{plugin:()=>ef});var b=e(9892),R=e(39341),B=e(47700),w=e(24259),A=e.n(w),I=e(82897),F=e.n(I),K=e(36365),W=e.n(K),U=e(57706),N=e.n(U),S=e(68404),Y=e(97394),Q=e(36635),z=e(16144),G=e(83829),k=e(43031),j=e(20674),de=e(53594),ge=e(40246),re=e(56747),ce=e(48513),ie=e(7238),fe=e(40400),Ce=e(24034),ee=e(21053),ne=e(19920),X=e(35670),te=e(40419),ae=e(37219),_=e(47694),ve=e(77582),Ve=e(29930),it=e(13019),rt=e(4050),pe=e(40229),Ie=e(24816),We=e(97724),Je=e(94984),He=e(45849),Ae=e(35645),et=e(68226),_e=e(69945),Se=e(72004),Fe=e(20194),Xe=e(37190),Qe=e(46818),ct=e(81168),ht=e(37556),ft=e(72648),Re=e(31403),nt=e(52694),le=e(33950),Pe=e(96308),Oe=e(53715),Le=e(10505),Ye=e(39031);const be=({alertManagerSourceName:V,group:q,expandAll:se})=>{const[Ee,Me]=(0,S.useState)(se),Ue=(0,ft.wW)(Te),Ne=(0,ft.wW)(Oe.r);return(0,S.useEffect)(()=>Me(se),[se]),S.createElement("div",{className:Ue.group,"data-testid":"alert-group"},Object.keys(q.labels).length>0?S.createElement(nt.s,{labels:q.labels}):S.createElement("div",{className:Ue.noGroupingText},"No grouping"),S.createElement("div",{className:Ue.row},S.createElement(le.U,{isCollapsed:!Ee,onToggle:()=>Me(!Ee)})," ",S.createElement(Pe.Z,{group:q})),Ee&&S.createElement("div",{className:Ue.alerts},q.alerts.map((st,lt)=>{const vt=st.status.state.toUpperCase(),gt=(0,ht.vT)({start:new Date(st.startsAt),end:Date.now()});return S.createElement("div",{"data-testid":"alert-group-alert",className:Ue.alert,key:`${st.fingerprint}-${lt}`},S.createElement("div",null,S.createElement("span",{className:Ne[st.status.state]},vt," "),"for ",gt),S.createElement("div",null,S.createElement(nt.s,{labels:st.labels})),S.createElement("div",{className:Ue.actionsRow},st.status.state===Ye.Z9.Suppressed&&S.createElement(Re.Qj,{href:`${(0,Le.eQ)("/alerting/silences",V)}&silenceIds=${st.status.silencedBy.join(",")}`,className:Ue.button,icon:"bell",size:"sm"},"Manage silences"),st.status.state===Ye.Z9.Active&&S.createElement(Re.Qj,{href:(0,Le.VN)(V,st.labels),className:Ue.button,icon:"bell-slash",size:"sm"},"Silence"),st.generatorURL&&S.createElement(Re.Qj,{className:Ue.button,href:st.generatorURL,icon:"chart-line",size:"sm"},"See source")))})))},Te=V=>({noGroupingText:b.css`
    height: ${V.spacing(4)};
  `,group:b.css`
    background-color: ${V.colors.background.secondary};
    margin: ${V.spacing(.5,1,.5,1)};
    padding: ${V.spacing(1)};
  `,row:b.css`
    display: flex;
    flex-direction: row;
    align-items: center;
    gap: ${V.spacing(1)};
  `,alerts:b.css`
    margin: ${V.spacing(0,2,0,4)};
  `,alert:b.css`
    padding: ${V.spacing(1,0)};
    & + & {
      border-top: 1px solid ${V.colors.border.medium};
    }
  `,button:b.css`
    & + & {
      margin-left: ${V.spacing(1)};
    }
  `,actionsRow:b.css`
    padding: ${V.spacing(1,0)};
  `}),me=(V,q)=>(0,S.useMemo)(()=>V.filter(se=>(0,Fe.eD)(se.labels,q)||se.alerts.some(Ee=>(0,Fe.eD)(Ee.labels,q))),[V,q]),he=V=>{const q=(0,ct.useDispatch)(),se=Ae.v.unifiedAlertingEnabled,Ee=V.options.expandAll,Me=V.options.alertmanager,Ne=((0,_e._)(gt=>gt.amAlertGroups)||Qe.oq)[Me||""]?.result||[],st=V.options.labels?(0,Fe.Zh)(V.options.labels):[],lt=me(Ne,st);(0,S.useEffect)(()=>{function gt(){Me&&q((0,Se.mS)(Me))}gt();const Mt=setInterval(gt,Xe.iF);return()=>{clearInterval(Mt)}},[q,Me]);const vt=lt.length>0;return S.createElement(et.$,{autoHeightMax:"100%",autoHeightMin:"100%"},se&&S.createElement("div",null,vt&&lt.map(gt=>S.createElement(be,{alertManagerSourceName:Me,key:JSON.stringify(gt.labels),group:gt,expandAll:Ee})),!vt&&"No alerts"))},De=new ce.c(he).setPanelOptions(V=>V.addCustomEditor({name:"Alertmanager",path:"alertmanager",id:"alertmanager",defaultValue:He.GC,category:["Options"],editor:function(se){const Ee=(0,S.useMemo)(He.z3,[]);return S.createElement(Je.P,{current:se.value,onChange:Me=>se.onChange(Me),dataSources:Ee})}}).addBooleanSwitch({name:"Expand all by default",path:"expandAll",defaultValue:!1,category:["Options"]}).addTextInput({description:"Filter results by matching labels, ex: env=production,severity=~critical|warning",name:"Labels",path:"labels",category:["Filter"]}));var $e=e(53117),ke=e(43339),tt=e(79658),Ge=e(99151),dt=e.n(Ge),pt=e(68183),Ke=e(53217),je=e(10216),ot=e(50946);async function at({query:V,permissionLevel:q}){return(await(0,ot.ZL)(V,q)).map(Me=>({id:Me.id,title:Me.title,url:Me.url}))}async function xt({query:V,permissionLevel:q,extraFolders:se}){const Ee=await at({query:V,permissionLevel:q}),Me=se??[],Ue=V?Me.filter(Ne=>Ne.title?.toLowerCase().includes(V.toLowerCase())):Me;return Ee?Ue.concat(Ee):Ue}async function Dt({query:V,permissionLevel:q=ct.PermissionLevelString.View,extraFolders:se=[]}){return(await xt({query:V,permissionLevel:q,extraFolders:se})).map(Me=>({value:Me,label:Me.title}))}function wt(V,q){return V?.find(se=>se.value?.id===q)}async function sn(V){if(V!=null)try{const{id:q,title:se}=await(0,ot.EW)(V);return{value:{id:q,title:se},label:se}}catch{console.error(`Could not find folder with id:${V}`)}}const mn={id:void 0,title:"All"},Dn={id:je.pW,title:je.fy};function Rn({onChange:V,extraFolders:q=[],initialFolderId:se,permissionLevel:Ee=ct.PermissionLevelString.View}){const[Me,Ue]=(0,S.useState)(!1),[Ne,st]=(0,S.useState)(void 0),[lt,vt]=(0,S.useState)(void 0),gt=(0,S.useCallback)(async Yt=>{let Zt=wt(Yt,se);Zt||(Zt=await sn(se)??Yt[0],V(Zt.value)),Ue(!0),vt(Yt),st(Zt)},[se,V]),Mt=(0,S.useCallback)(async Yt=>{const Zt=await Dt({query:Yt,permissionLevel:Ee,extraFolders:q});return Me||await gt(Zt),Zt},[Ee,q,Me,gt]),Lt=dt()(Mt,300,{leading:!0}),It=(0,S.useCallback)(({value:Yt})=>{const Zt=wt(lt,Yt?.id);st(Zt),V(Yt)},[lt,V]);return S.createElement("div",{"data-testid":pt.wl.components.ReadonlyFolderPicker.container},S.createElement(Ke.qb,{loadingMessage:"Loading folders...",defaultOptions:!0,defaultValue:Ne,value:Ne,loadOptions:Lt,onChange:It}))}var St=e(22350),At=e(46519),Wt=e(20308),Qt=e(54899),jt=e(72948),Xt=e(39904),tn=e(67162),on=e(9398),dn=e(40286);function $t(V){const[q,se]=(0,S.useState)(""),Ee=(0,St.Z)(async()=>{if(V.options.showOptions!==dn.kx.Current)return;const Ne={state:Vt(V.options.stateFilter)},st=(0,on.h4)().getCurrent()?.getPanelById(V.id);V.options.alertName&&(Ne.query=(0,Wt.J)().replace(V.options.alertName,st.scopedVars)),V.options.folderId>=0&&(Ne.folderId=V.options.folderId),V.options.dashboardTitle&&(Ne.dashboardQuery=V.options.dashboardTitle),V.options.dashboardAlerts&&(Ne.dashboardId=(0,on.h4)().getCurrent()?.id),V.options.tags&&(Ne.dashboardTag=V.options.tags);const lt=await(0,Qt.i)().get("/api/alerts",Ne,`alert-list-get-current-alert-state-${V.id}`);let vt=qt(V.options.sortOrder,lt.map(gt=>({...gt,stateModel:tn.Z.getStateDisplayModel(gt.state),newStateDateAgo:(0,At.CQ)(gt.newStateDate).locale("en").fromNow(!0)})));return vt.length>V.options.maxItems&&(vt=vt.slice(0,V.options.maxItems)),se(vt.length===0?"No alerts":""),vt},[V.options.showOptions,V.options.stateFilter.alerting,V.options.stateFilter.execution_error,V.options.stateFilter.no_data,V.options.stateFilter.ok,V.options.stateFilter.paused,V.options.stateFilter.pending,V.options.maxItems,V.options.tags,V.options.dashboardAlerts,V.options.dashboardTitle,V.options.folderId,V.options.alertName,V.options.sortOrder,V.timeRange]),Me=(0,St.Z)(async()=>{if(V.options.showOptions!==dn.kx.RecentChanges)return;const Ne={limit:V.options.maxItems,type:"alert",newState:Vt(V.options.stateFilter)},st=(0,on.h4)().getCurrent();V.options.dashboardAlerts&&(Ne.dashboardId=st?.id),Ne.from=ee.parse(st?.time.from).unix()*1e3,Ne.to=ee.parse(st?.time.to).unix()*1e3;const lt=await(0,Qt.i)().get("/api/annotations",Ne,`alert-list-get-state-changes-${V.id}`),vt=qt(V.options.sortOrder,lt.map(gt=>({...gt,time:st?.formatDate(gt.time,"MMM D, YYYY HH:mm:ss"),stateModel:tn.Z.getStateDisplayModel(gt.newState),info:tn.Z.getAlertAnnotationInfo(gt)})));return se(vt.length===0?"No alerts in current time range":""),vt},[V.options.showOptions,V.options.maxItems,V.options.stateFilter.alerting,V.options.stateFilter.execution_error,V.options.stateFilter.no_data,V.options.stateFilter.ok,V.options.stateFilter.paused,V.options.stateFilter.pending,V.options.dashboardAlerts,V.options.sortOrder]),Ue=(0,ft.wW)(nn);return S.createElement(et.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("div",{className:Ue.container},q&&S.createElement("div",{className:Ue.noAlertsMessage},q),S.createElement("section",null,S.createElement("ol",{className:Ue.alertRuleList},V.options.showOptions===dn.kx.Current?!Ee.loading&&Ee.value&&Ee.value.map(Ne=>S.createElement("li",{className:Ue.alertRuleItem,key:`alert-${Ne.id}`},S.createElement(jt.Z,{href:`${Ne.url}?viewPanel=${Ne.panelId}`,className:Ue.cardContainer},S.createElement(jt.Z.Heading,null,Ne.name),S.createElement(jt.Z.Figure,{className:(0,b.cx)(Ue.alertRuleItemIcon,Ne.stateModel.stateClass)},S.createElement(Xt.J,{name:Ne.stateModel.iconClass,size:"xl",className:Ue.alertIcon})),S.createElement(jt.Z.Meta,null,S.createElement("div",{className:Ue.alertRuleItemText},S.createElement("span",{className:Ne.stateModel.stateClass},Ne.stateModel.text),S.createElement("span",{className:Ue.alertRuleItemTime}," for ",Ne.newStateDateAgo)))))):!Me.loading&&Me.value&&Me.value.map(Ne=>S.createElement("li",{className:Ue.alertRuleItem,key:`alert-${Ne.id}`},S.createElement(jt.Z,{className:Ue.cardContainer},S.createElement(jt.Z.Heading,null,Ne.alertName),S.createElement(jt.Z.Figure,{className:(0,b.cx)(Ue.alertRuleItemIcon,Ne.stateModel.stateClass)},S.createElement(Xt.J,{name:Ne.stateModel.iconClass,size:"xl"})),S.createElement(jt.Z.Meta,null,S.createElement("span",{className:(0,b.cx)(Ue.alertRuleItemText,Ne.stateModel.stateClass)},Ne.stateModel.text),S.createElement("span",null,Ne.time),Ne.info&&S.createElement("span",{className:Ue.alertRuleItemInfo},Ne.info)))))))))}function qt(V,q){if(V===dn.As.Importance)return(0,I.sortBy)(q,Ee=>tn.Z.alertStateSortScore[Ee.state||Ee.newState]);if(V===dn.As.TimeAsc)return(0,I.sortBy)(q,Ee=>new Date(Ee.newStateDate||Ee.time));if(V===dn.As.TimeDesc)return(0,I.sortBy)(q,Ee=>new Date(Ee.newStateDate||Ee.time)).reverse();const se=(0,I.sortBy)(q,Ee=>(Ee.name||Ee.alertName).toLowerCase());return V===dn.As.AlphaDesc&&se.reverse(),se}function Vt(V){return Object.entries(V).filter(([q,se])=>se).map(([q,se])=>q)}const nn=V=>({cardContainer:b.css`
    padding: ${V.spacing(.5)} 0 ${V.spacing(.25)} 0;
    line-height: ${V.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:b.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:b.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:b.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${V.colors.background.secondary};
    padding: ${V.spacing(.5)} ${V.spacing(1)};
    border-radius: ${V.shape.borderRadius()};
    margin-bottom: ${V.spacing(.5)};
  `,alertRuleItemIcon:b.css`
    display: flex;
    justify-content: center;
    align-items: center;
    width: ${V.spacing(4)};
    padding: 0 ${V.spacing(.5)} 0 ${V.spacing(.25)};
    margin-right: 0px;
  `,alertRuleItemText:b.css`
    font-weight: ${V.typography.fontWeightBold};
    font-size: ${V.typography.size.sm};
    margin: 0;
  `,alertRuleItemTime:b.css`
    color: ${V.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:b.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:b.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:b.css`
    margin-right: ${V.spacing(.5)};
  `}),un=V=>{const q={showOptions:V.options.showOptions??V.show??dn.kx.Current,maxItems:V.options.maxItems??V.limit??10,sortOrder:V.options.sortOrder??V.sortOrder??dn.As.AlphaAsc,dashboardAlerts:V.options.dashboardAlerts??V.onlyAlertsOnDashboard??!1,alertName:V.options.alertName??V.nameFilter??"",dashboardTitle:V.options.dashboardTitle??V.dashboardFilter??"",folderId:V.options.folderId??V.folderId,tags:V.options.tags??V.dashboardTags??[],stateFilter:V.options.stateFilter??V.stateFilter?.reduce((Ee,Me)=>({...Ee,[Me]:!0}),{})??{}};return parseFloat(V.pluginVersion||"7.4")<7.5&&["show","limit","sortOrder","onlyAlertsOnDashboard","nameFilter","dashboardFilter","folderId","dashboardTags","stateFilter"].forEach(Me=>delete V[Me]),q};var En=e(46063);function cn(V,q){return(0,En.ED)(V.state)===q}function wn(V,q){const se=(0,Fe.Zh)(V);return(0,Fe.eD)(q,se)}function Gn(V,q){const{stateFilter:se,alertInstanceLabelFilter:Ee}=V;return(0,I.isEmpty)(se)?q:q.filter(Me=>(se.firing&&(cn(Me,En.bj.Alerting)||cn(Me,En.x_.Firing))||se.pending&&(cn(Me,En.bj.Pending)||cn(Me,En.x_.Pending))||se.noData&&cn(Me,En.bj.NoData)||se.normal&&cn(Me,En.bj.Normal)||se.error&&cn(Me,En.bj.Error)||se.inactive&&cn(Me,En.x_.Inactive))&&(Ee?wn(V.alertInstanceLabelFilter,Me.labels):!0))}function Nn(V){return!(V.startsWith("__")&&V.endsWith("__"))}const Wn=V=>{const{onChange:q,id:se,defaultValue:Ee}=V,Me=(0,ct.useDispatch)();(0,S.useEffect)(()=>{Me((0,Se.lB)())},[Me]);const Ue=(0,_e._)(vt=>vt.promRules),Ne=(0,Qe.PE)(Ue),st=(0,Qe.yR)(Ue),lt=(0,S.useMemo)(()=>{if((0,I.isEmpty)(Ue))return[];if(!Ne)return[];const vt=Object.keys(Ue).flatMap(gt=>Ue[gt].result??[]).flatMap(gt=>gt.groups).flatMap(gt=>gt.rules.filter(Mt=>Mt.type===En.pz.Alerting)).flatMap(gt=>gt.alerts??[]).map(gt=>Object.keys(gt.labels??{})).flatMap(gt=>gt.filter(Nn));return(0,I.uniq)(vt)},[Ne,Ue]);return S.createElement(Ke.NU,{id:se,isLoading:st,defaultValue:Ee,"aria-label":"group by label keys",placeholder:"Group by",prefix:S.createElement(Xt.J,{name:"tag-alt"}),onChange:vt=>{q(vt.map(gt=>gt.value??""))},options:lt.map(vt=>({label:vt,value:vt}))})};var qn=e(58252),ga=e(82378),ea=e(45253),ca=e(61744),ba=e(57426),zn=e(82002),$n=e(61627),ta=e(79662),Fa=e(24782),Ma=e(64681),Oa=e.n(Ma),Qa=e(48563),Qn=e(84952);const Aa=({alerts:V,options:q})=>{const se=q.groupMode===dn.LM.Custom?!0:q.showInstances,[Ee,Me]=(0,S.useState)(se),Ue=(0,ft.wW)(ia),Ne=(0,ft.wW)(Re.gN),st=(0,S.useCallback)(()=>{Me(Lt=>!Lt)},[]),lt=(0,S.useMemo)(()=>Gn(q,(0,Le.Zl)(q.sortOrder,V))??[],[V,q]),vt=V.length-lt.length,gt=lt.length>0,Mt=gt?st:I.noop;return(0,S.useEffect)(()=>{lt.length===0&&Me(!1)},[lt]),S.createElement("div",null,q.groupMode===dn.LM.Default&&S.createElement("button",{className:(0,b.cx)(Ne,gt?Ue.clickable:""),onClick:()=>Mt()},gt&&S.createElement(Xt.J,{name:Ee?"angle-down":"angle-right",size:"md"}),S.createElement("span",null,`${lt.length} ${Oa()("instance",lt.length)}`),vt>0&&S.createElement("span",null,", ",`${vt} hidden by filters`)),Ee&&S.createElement(Qa.o,{instances:lt,pagination:{itemsPerPage:2*Qn.gN}}))},ia=V=>({clickable:b.css`
    cursor: pointer;
  `}),_a=({rules:V,options:q})=>{const se=(0,ft.wW)(Ss),Ee=q.groupBy,Me=(0,S.useMemo)(()=>{const Ue=new Map,Ne=vt=>Ee?Ga(vt,Ee):!0;return V.filter(Ne).forEach(vt=>{((0,ta.Re)(vt)?.alerts??[]).forEach(Mt=>{const Lt=As(Ee,Mt.labels),It=Ue.get(Lt)??[];Ue.set(Lt,[...It,Mt])})}),Array.from(Ue.entries()).reduce((vt,[gt,Mt])=>{const Lt=Gn(q,Mt);return Lt.length>0&&vt.set(gt,Lt),vt},new Map)},[Ee,V,q]);return S.createElement(S.Fragment,null,Array.from(Me).map(([Ue,Ne])=>S.createElement("li",{className:se.alertRuleItem,key:Ue},S.createElement("div",null,S.createElement("div",{className:se.customGroupDetails},S.createElement("div",{className:se.alertLabels},Ue&&va(Ue).map(([st,lt])=>S.createElement(Fa.i,{key:st,labelKey:st,value:lt})),!Ue&&"No grouping")),S.createElement(Aa,{alerts:Ne,options:q})))))};function As(V,q){return new URLSearchParams(V.map(se=>[se,q[se]])).toString()}function va(V){return[...new URLSearchParams(V)]}function Ga(V,q){const se=(0,ta.Re)(V);return q.every(Ee=>(se?.alerts??[]).some(Me=>Me.labels[Ee]))}const Xa=_a;var da=e(33332),as=e(26418),qs=e(63029),Ys=e(60048),sr=e(93411);const er=({rules:V,options:q})=>{const se=(0,ft.wW)(Ss),Ee=(0,ft.wW)(Sr),{href:Me}=(0,da.Z)(),Ue=V.length<=q.maxItems?V:V.slice(0,q.maxItems);return S.createElement(S.Fragment,null,S.createElement("ol",{className:se.alertRuleList},Ue.map((Ne,st)=>{const{namespaceName:lt,groupName:vt,dataSourceName:gt}=Ne,Mt=(0,ta.x_)(Ne.promRule)?Ne.promRule:void 0,Lt=(0,ta.ub)(Mt),It=(0,Ys.Yd)(Ne.dataSourceName,Ne),Yt=(0,Ys.$V)(It),Zt=(0,sr.u)(`/alerting/${encodeURIComponent(gt)}/${encodeURIComponent(Yt)}/view`,{returnTo:Me??""});return Mt?S.createElement("li",{className:se.alertRuleItem,key:`alert-${lt}-${vt}-${Ne.name}-${st}`},S.createElement("div",{className:Ee.icon},S.createElement(Xt.J,{name:tn.Z.getStateDisplayModel(Mt.state).iconClass,className:Ee[(0,ta.Aq)(Mt.state)],size:"lg"})),S.createElement("div",{className:se.alertNameWrapper},S.createElement("div",{className:se.instanceDetails},S.createElement(as.Stack,{direction:"row",gap:1,wrap:!1},S.createElement("div",{className:se.alertName,title:Ne.name},Ne.name),S.createElement(qs.L,null),Zt&&S.createElement("a",{href:Zt,target:"__blank",className:se.link,rel:"noopener"},S.createElement(as.Stack,{alignItems:"center",gap:1},"View alert rule",S.createElement(Xt.J,{name:"external-link-alt",size:"sm"})))),S.createElement("div",{className:se.alertDuration},S.createElement("span",{className:Ee[(0,ta.Aq)(Mt.state)]},(0,ta.SS)(Mt.state))," ",Lt&&Mt.state!==En.x_.Inactive&&S.createElement(S.Fragment,null,"for"," ",S.createElement("span",null,(0,ht.vT)({start:Lt,end:Date.now()}))))),S.createElement(Aa,{alerts:Mt.alerts??[],options:q}))):null})))},Sr=V=>({common:b.css`
    width: 70px;
    text-align: center;
    align-self: stretch;

    display: inline-block;
    color: white;
    border-radius: ${V.shape.borderRadius()};
    font-size: ${V.typography.bodySmall.fontSize};
    text-transform: capitalize;
    line-height: 1.2;
    flex-shrink: 0;

    display: flex;
    flex-direction: column;
    justify-content: center;
  `,icon:b.css`
    margin-top: ${V.spacing(2.5)};
    align-self: flex-start;
  `,good:b.css`
    color: ${V.colors.success.main};
  `,bad:b.css`
    color: ${V.colors.error.main};
  `,warning:b.css`
    color: ${V.colors.warning.main};
  `,neutral:b.css`
    color: ${V.colors.secondary.main};
  `,info:b.css`
    color: ${V.colors.primary.main};
  `}),rr=er;function Ms(V){const q=(0,ct.useDispatch)(),se=(0,S.useMemo)(He.mA,[]);(0,S.useEffect)(()=>{V.options.stateFilter.inactive===!0&&(V.options.stateFilter.normal=!0),V.options.stateFilter.inactive=void 0},[V.options.stateFilter]);let Ee;(0,qn.Z)(()=>{Ee=(0,on.h4)().getCurrent()}),(0,S.useEffect)(()=>{q((0,Se.ei)());const an=Ee?.events.subscribe(ga.md,()=>q((0,Se.ei)()));return()=>{an?.unsubscribe()}},[q,Ee]);const{prom:Me,ruler:Ue}=(0,_e._)(an=>({prom:an.promRules[He.GC]||Qe.oq,ruler:an.rulerRules[He.GC]||Qe.oq})),Ne=Me.loading||Ue.loading,st=!!Me.result||!!Ue.result,lt=(0,_e._)(an=>an.promRules),vt=(0,_e._)(an=>an.rulerRules),gt=(0,$n.Zo)(),Mt=se.some(an=>lt[an]?.dispatched),Lt=se.some(an=>vt[an]?.dispatched),It=Mt||Lt,Yt=(0,ft.wW)(Ss),Zt=(0,ta.C7)(gt),rn=V.options.sortOrder,Nt=(0,S.useMemo)(()=>Ls(V,js(rn,Zt)),[Zt,rn,V]),kt=Nt.length===0?"No alerts matching filters":void 0;if(!zn.Vt.hasPermission(ct.AccessControlAction.AlertingRuleRead)&&!zn.Vt.hasPermission(ct.AccessControlAction.AlertingRuleExternalRead))return S.createElement(ea.b,{title:"Permission required"},"Sorry, you do not have the required permissions to read alert rules");const{options:Ut,replaceVariables:_t}=V,Mn={...V.options,alertName:_t(Ut.alertName),alertInstanceLabelFilter:_t(Ut.alertInstanceLabelFilter)};return S.createElement(et.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("div",{className:Yt.container},It&&Ne&&!st&&S.createElement(ca.u,{text:"Loading..."}),kt&&S.createElement("div",{className:Yt.noAlertsMessage},kt),S.createElement("section",null,V.options.viewMode===dn.wO.Stat&&st&&S.createElement(ba.w6,{width:V.width,height:V.height,graphMode:ba.IG.None,textMode:ba.jG.Auto,justifyMode:ba.ap.Auto,theme:_.vc.theme2,value:{text:`${Nt.length}`,numeric:Nt.length}}),V.options.viewMode===dn.wO.List&&V.options.groupMode===dn.LM.Custom&&st&&S.createElement(Xa,{rules:Nt,options:Mn}),V.options.viewMode===dn.wO.List&&V.options.groupMode===dn.LM.Default&&st&&S.createElement(rr,{rules:Nt,options:Mn}))))}function js(V,q){if(V===dn.As.Importance)return(0,I.sortBy)(q,Ee=>tn.Z.alertStateSortScore[Ee.state]);if(V===dn.As.TimeAsc)return(0,I.sortBy)(q,Ee=>{const Me=(0,ta.Re)(Ee)??void 0;return(0,ta.ub)(Me)||new Date});if(V===dn.As.TimeDesc)return(0,I.sortBy)(q,Ee=>{const Me=(0,ta.Re)(Ee)??void 0;return(0,ta.ub)(Me)||new Date}).reverse();const se=(0,I.sortBy)(q,Ee=>Ee.name.toLowerCase());return V===dn.As.AlphaDesc&&se.reverse(),se}function Ls(V,q){const{options:se,replaceVariables:Ee}=V;let Me=[...q];if(se.dashboardAlerts){const Ue=(0,on.h4)().getCurrent()?.uid;Me=Me.filter(({annotations:Ne={}})=>Object.entries(Ne).some(([st,lt])=>st===Xe.q6.dashboardUID&&lt===Ue))}if(se.alertName){const Ue=Ee(se.alertName);Me=Me.filter(({name:Ne})=>Ne.toLocaleLowerCase().includes(Ue.toLocaleLowerCase()))}if(Me=Me.filter(Ue=>{const Ne=(0,ta.Re)(Ue);return Ne?se.stateFilter.firing&&Ne.state===En.x_.Firing||se.stateFilter.pending&&Ne.state===En.x_.Pending||se.stateFilter.normal&&Ne.state===En.x_.Inactive:!1}),se.folder&&(Me=Me.filter(Ue=>Ue.namespaceName===se.folder.title)),se.datasource){const Ue=se.datasource===He.JY;Me=Me.filter(Ue?({dataSourceName:Ne})=>Ne===He.GC:({dataSourceName:Ne})=>Ne===se.datasource)}return Me=Me.reduce((Ue,Ne)=>{const st=(0,ta.Re)(Ne);return(st?Gn({stateFilter:se.stateFilter,alertInstanceLabelFilter:Ee(se.alertInstanceLabelFilter)},st.alerts??[]):[]).length&&Ue.push(Ne),Ue},[]),Me}const Ss=V=>({cardContainer:b.css`
    padding: ${V.spacing(.5)} 0 ${V.spacing(.25)} 0;
    line-height: ${V.typography.body.lineHeight};
    margin-bottom: 0px;
  `,container:b.css`
    overflow-y: auto;
    height: 100%;
  `,alertRuleList:b.css`
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    list-style-type: none;
  `,alertRuleItem:b.css`
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;
    background: ${V.colors.background.secondary};
    padding: ${V.spacing(.5)} ${V.spacing(1)};
    border-radius: ${V.shape.borderRadius()};
    margin-bottom: ${V.spacing(.5)};

    gap: ${V.spacing(2)};
  `,alertName:b.css`
    font-size: ${V.typography.h6.fontSize};
    font-weight: ${V.typography.fontWeightBold};

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,alertNameWrapper:b.css`
    display: flex;
    flex: 1;
    flex-wrap: nowrap;
    flex-direction: column;

    min-width: 100px;
  `,alertLabels:b.css`
    > * {
      margin-right: ${V.spacing(.5)};
    }
  `,alertDuration:b.css`
    font-size: ${V.typography.bodySmall.fontSize};
  `,alertRuleItemText:b.css`
    font-weight: ${V.typography.fontWeightBold};
    font-size: ${V.typography.bodySmall.fontSize};
    margin: 0;
  `,alertRuleItemTime:b.css`
    color: ${V.colors.text.secondary};
    font-weight: normal;
    white-space: nowrap;
  `,alertRuleItemInfo:b.css`
    font-weight: normal;
    flex-grow: 2;
    display: flex;
    align-items: flex-end;
  `,noAlertsMessage:b.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
  `,alertIcon:b.css`
    margin-right: ${V.spacing(.5)};
  `,instanceDetails:b.css`
    min-width: 1px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  `,customGroupDetails:b.css`
    margin-bottom: ${V.spacing(.5)};
  `,link:b.css`
    word-break: break-all;
    color: ${V.colors.primary.text};
  `});class Vs{getSuggestionsForData(q){const{dataSummary:se}=q;if(se.hasData)return;q.getListAppender({name:"Dashboard list",pluginId:"dashlist",options:{}}).append({})}}function Va(V){return V.showOptions===dn.kx.Current}const Or=new ce.c($t).setPanelOptions(V=>{V.addSelect({name:"Show",path:"showOptions",settings:{options:[{label:"Current state",value:dn.kx.Current},{label:"Recent state changes",value:dn.kx.RecentChanges}]},defaultValue:dn.kx.Current,category:["Options"]}).addNumberInput({name:"Max items",path:"maxItems",defaultValue:10,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",settings:{options:[{label:"Alphabetical (asc)",value:dn.As.AlphaAsc},{label:"Alphabetical (desc)",value:dn.As.AlphaDesc},{label:"Importance",value:dn.As.Importance},{label:"Time (asc)",value:dn.As.TimeAsc},{label:"Time (desc)",value:dn.As.TimeDesc}]},defaultValue:dn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",defaultValue:"",category:["Filter"],showIf:Va}).addTextInput({path:"dashboardTitle",name:"Dashboard title",defaultValue:"",category:["Filter"],showIf:Va}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:null,editor:function({value:se,onChange:Ee}){return S.createElement(Rn,{initialFolderId:se,onChange:Me=>Ee(Me?.id),extraFolders:[mn,Dn]})},category:["Filter"],showIf:Va}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:[],editor(q){return S.createElement(ke.B,{tags:q.value,onChange:q.onChange})},category:["Filter"],showIf:Va}).addBooleanSwitch({path:"stateFilter.ok",name:"Ok",defaultValue:!1,category:["State filter"],showIf:Va}).addBooleanSwitch({path:"stateFilter.paused",name:"Paused",defaultValue:!1,category:["State filter"],showIf:Va}).addBooleanSwitch({path:"stateFilter.no_data",name:"No data",defaultValue:!1,category:["State filter"],showIf:Va}).addBooleanSwitch({path:"stateFilter.execution_error",name:"Execution error",defaultValue:!1,category:["State filter"],showIf:Va}).addBooleanSwitch({path:"stateFilter.alerting",name:"Alerting",defaultValue:!1,category:["State filter"],showIf:Va}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!1,category:["State filter"],showIf:Va})}).setMigrationHandler(un).setSuggestionsSupplier(new Vs),hr=new ce.c(Ms).setPanelOptions(V=>{V.addRadio({path:"viewMode",name:"View mode",description:"Toggle between list view and stat view",defaultValue:dn.wO.List,settings:{options:[{label:"List",value:dn.wO.List},{label:"Stat",value:dn.wO.Stat}]},category:["Options"]}).addRadio({path:"groupMode",name:"Group mode",description:"How alert instances should be grouped",defaultValue:dn.LM.Default,settings:{options:[{value:dn.LM.Default,label:"Default grouping"},{value:dn.LM.Custom,label:"Custom grouping"}]},category:["Options"]}).addCustomEditor({path:"groupBy",name:"Group by",description:"Filter alerts using label querying",id:"groupBy",defaultValue:[],showIf:q=>q.groupMode===dn.LM.Custom,category:["Options"],editor:q=>S.createElement(Wn,{id:q.id??"groupBy",defaultValue:q.value.map(se=>({label:se,value:se})),onChange:q.onChange})}).addNumberInput({name:"Max items",path:"maxItems",description:"Maximum alerts to display",defaultValue:20,category:["Options"]}).addSelect({name:"Sort order",path:"sortOrder",description:"Sort order of alerts and alert instances",settings:{options:[{label:"Alphabetical (asc)",value:dn.As.AlphaAsc},{label:"Alphabetical (desc)",value:dn.As.AlphaDesc},{label:"Importance",value:dn.As.Importance},{label:"Time (asc)",value:dn.As.TimeAsc},{label:"Time (desc)",value:dn.As.TimeDesc}]},defaultValue:dn.As.AlphaAsc,category:["Options"]}).addBooleanSwitch({path:"dashboardAlerts",name:"Alerts from this dashboard",description:"Show alerts from this dashboard",defaultValue:!1,category:["Options"]}).addTextInput({path:"alertName",name:"Alert name",description:"Filter for alerts containing this text",defaultValue:"",category:["Filter"]}).addTextInput({path:"alertInstanceLabelFilter",name:"Alert instance label",description:'Filter alert instances using label querying, ex: {severity="critical", instance=~"cluster-us-.+"}',defaultValue:"",category:["Filter"]}).addCustomEditor({path:"folder",name:"Folder",description:"Filter for alerts in the selected folder (only for Grafana alerts)",id:"folder",defaultValue:null,editor:function(se){return S.createElement(tt.Es,{enableReset:!0,showRoot:!1,allowEmpty:!0,initialTitle:se.value?.title,initialFolderUid:se.value?.uid,permissionLevel:ct.PermissionLevelString.View,onClear:()=>se.onChange(""),...se})},category:["Filter"]}).addCustomEditor({path:"datasource",name:"Datasource",description:"Filter alerts from selected datasource",id:"datasource",defaultValue:null,editor:function(se){return S.createElement($e.q,{...se,type:["prometheus","loki","grafana"],noDefault:!0,current:se.value,onChange:Ee=>se.onChange(Ee.name),onClear:()=>se.onChange(null)})},category:["Filter"]}).addBooleanSwitch({path:"stateFilter.firing",name:"Alerting / Firing",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.pending",name:"Pending",defaultValue:!0,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.noData",name:"No Data",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.normal",name:"Normal",defaultValue:!1,category:["Alert state filter"]}).addBooleanSwitch({path:"stateFilter.error",name:"Error",defaultValue:!0,category:["Alert state filter"]})}),Us=Ae.v.unifiedAlertingEnabled?hr:Or;var Qs=e(53376),vr=e(83383),or=e(25318),Ea=e(55294),Er=e(37932),zs=e(34807),Bs=e(7804),ir=e(398),lr=e(18271),yr=e(39856),tr=e(6554);const Pr=({options:V,annotation:q,formatDate:se,onClick:Ee,onAvatarClick:Me,onTagClick:Ue})=>{const Ne=(0,ft.wW)(na),{showUser:st,showTags:lt,showTime:vt}=V,{text:gt="",login:Mt,email:Lt,avatarUrl:It,tags:Yt,time:Zt,timeEnd:rn}=q,Nt=()=>{Ee(q)},kt=()=>{Me(q)},Ut=Mt&&st,_t=Zt&&vt,Mn=rn&&rn!==Zt&&vt;return S.createElement(jt.Z,{className:Ne.card,onClick:Nt},S.createElement(jt.Z.Heading,null,S.createElement(yr.D,{className:Ne.heading,onClick:an=>{an.stopPropagation()},content:gt})),_t&&S.createElement(jt.Z.Description,{className:Ne.timestamp},S.createElement(Gt,{formatDate:se,time:Zt}),Mn&&S.createElement(S.Fragment,null,S.createElement("span",{className:Ne.time},"-"),S.createElement(Gt,{formatDate:se,time:rn})," ")),Ut&&S.createElement(jt.Z.Meta,{className:Ne.meta},S.createElement(ws,{email:Lt,login:Mt,avatarUrl:It,onClick:kt})),lt&&Yt&&S.createElement(jt.Z.Tags,null,S.createElement(zs.P,{tags:Yt,onClick:an=>Ue(an,!1)})))},ws=({onClick:V,avatarUrl:q,login:se,email:Ee})=>{const Me=(0,ft.wW)(na),Ue=st=>{st.stopPropagation(),V()},Ne=S.createElement("span",null,"Created by:",S.createElement("br",null)," ",Ee);return S.createElement(tr.u,{content:Ne,theme:"info",placement:"top"},S.createElement("button",{onClick:Ue,className:Me.avatar,"aria-label":`Created by ${Ee}`},S.createElement("img",{src:q,alt:"avatar icon"})))},Gt=({time:V,formatDate:q})=>{const se=(0,ft.wW)(na);return S.createElement("span",{className:se.time},S.createElement("span",null,q(V)))};function na(V){return{card:(0,b.css)({gridTemplateAreas:'"Heading Description Meta Tags"',gridTemplateColumns:"auto 1fr auto auto",padding:V.spacing(1),margin:V.spacing(.5),width:"inherit"}),heading:(0,b.css)({a:{zIndex:1,position:"relative",color:V.colors.text.link,"&:hover":{textDecoration:"underline"}}}),meta:(0,b.css)({margin:0,position:"relative",justifyContent:"end"}),timestamp:(0,b.css)({margin:0,alignSelf:"center"}),time:(0,b.css)({marginLeft:V.spacing(1),marginRight:V.spacing(1),fontSize:V.typography.bodySmall.fontSize,color:V.colors.text.secondary}),avatar:(0,b.css)({border:"none",background:"inherit",margin:0,padding:V.spacing(.5),img:{borderRadius:"50%",width:V.spacing(2),height:V.spacing(2)}})}}class ps extends S.PureComponent{constructor(q){super(q),this.style=cr(Ae.v.theme2),this.subs=new Qs.w0,this.tagListRef=S.createRef(),this.onAnnoClick=async se=>{if(!se.time)return;const{options:Ee}=this.props,Ue=(0,on.h4)().getCurrent(),Ne={from:this._timeOffset(se.time,Ee.navigateBefore,!0),to:this._timeOffset(se.timeEnd??se.time,Ee.navigateAfter,!1)};if(Ee.navigateToPanel&&(Ne.viewPanel=se.panelId),Ue?.uid===se.dashboardUID){Er.E1.partial(Ne);return}const st=await(0,Qt.i)().get("/api/search",{dashboardUIDs:se.dashboardUID});if(st&&st.length&&st[0].uid===se.dashboardUID){const lt=st[0],vt=new URL(lt.url,window.location.origin);vt.searchParams.set("from",Ne.from),vt.searchParams.set("to",Ne.to),Er.E1.push(vr.u.stripBaseFromUrl(vt.toString()));return}lr.Z.emit(or.SI.alertWarning,["Unknown Dashboard: "+se.dashboardUID])},this.onTagClick=(se,Ee)=>{if(!Ee&&this.state.queryTags.includes(se))return;const Me=Ee?this.state.queryTags.filter(Ne=>Ne!==se):[...this.state.queryTags,se];let Ue;if(Ee){const Ne=document.activeElement,st=Ne?.getAttribute("data-tag-id");if(this.tagListRef.current?.contains(Ne)&&st){const lt=Number.parseInt(st,10),vt=this.tagListRef.current.querySelector(`[data-tag-id="${lt+1}"]`)??this.tagListRef.current.querySelector(`[data-tag-id="${lt-1}"]`);vt instanceof HTMLElement&&(Ue=vt)}}this.setState({queryTags:Me},()=>Ue?.focus())},this.onUserClick=se=>{this.setState({queryUser:{id:se.userId,login:se.login,email:se.email}})},this.onClearUser=()=>{this.setState({queryUser:void 0})},this.renderItem=(se,Ee)=>{const{options:Me}=this.props,Ue=(0,on.h4)().getCurrent();return Ue?S.createElement(Pr,{annotation:se,formatDate:Ue.formatDate,onClick:this.onAnnoClick,onAvatarClick:this.onUserClick,onTagClick:this.onTagClick,options:Me}):S.createElement(S.Fragment,null)},this.state={annotations:[],timeInfo:"",loaded:!1,queryTags:[]}}componentDidMount(){this.doSearch(),this.subs.add(this.props.eventBus.getStream(Ea.n1).subscribe({next:()=>{this.doSearch()}}))}componentWillUnmount(){this.subs.unsubscribe()}componentDidUpdate(q,se){const{options:Ee,timeRange:Me}=this.props;(Ee!==q.options||this.state.queryTags!==se.queryTags||this.state.queryUser!==se.queryUser||Ee.onlyInTimeRange&&Me!==q.timeRange)&&this.doSearch()}async doSearch(){const{options:q}=this.props,{queryUser:se,queryTags:Ee}=this.state,Me={tags:q.tags,limit:q.limit,type:"annotation"};q.onlyFromThisDashboard&&(Me.dashboardUID=(0,on.h4)().getCurrent()?.uid);let Ue="";if(q.onlyInTimeRange){const{timeRange:st}=this.props;Me.from=st.from.valueOf(),Me.to=st.to.valueOf()}else Ue="All Time";se&&(Me.userId=se.id),q.tags&&q.tags.length&&(Me.tags=q.tags.map(st=>this.props.replaceVariables(st))),Ee.length&&(Me.tags=Me.tags?[...Me.tags,...Ee]:Ee);const Ne=await(0,Qt.i)().get("/api/annotations",Me,`anno-list-panel-${this.props.id}`);this.setState({annotations:Ne,timeInfo:Ue,loaded:!0})}_timeOffset(q,se,Ee=!1){let Me=5,Ue="m";const Ne=/^(\d+)(\w)/.exec(se);Ne&&Ne.length===3&&(Me=parseInt(Ne[1],10),Ue=Ne[2]);const st=(0,At.CQ)(q);return Ee&&(Me*=-1),st.add(Me,Ue).valueOf()}render(){const{loaded:q,annotations:se,queryUser:Ee,queryTags:Me}=this.state;if(!q)return S.createElement("div",null,"loading...");const Ue=Ee||Me.length>0;return S.createElement(et.$,{autoHeightMin:"100%"},Ue&&S.createElement("div",{className:this.style.filter},S.createElement("b",null,"Filter:"),Ee&&S.createElement(Re.zx,{size:"sm",variant:"secondary",fill:"text",onClick:this.onClearUser,"aria-label":`Remove filter: ${Ee.email}`},Ee.email),Me.length>0&&S.createElement(zs.P,{icon:"times",tags:Me,onClick:Ne=>this.onTagClick(Ne,!0),getAriaLabel:Ne=>`Remove ${Ne} tag`,className:this.style.tagList,ref:this.tagListRef})),se.length<1&&S.createElement("div",{className:this.style.noneFound},"No Annotations Found"),S.createElement(ir.L,{items:se,renderItem:this.renderItem,getItemKey:Ne=>`${Ne.id}`}))}}const cr=(0,Bs.B)(V=>({noneFound:b.css`
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: calc(100% - 30px);
  `,filter:(0,b.css)({alignItems:"center",display:"flex",flexWrap:"wrap",gap:V.spacing(.5),padding:V.spacing(.5)}),tagList:(0,b.css)({justifyContent:"flex-start","li > button":{paddingLeft:"3px"}})})),Hs=Object.freeze([0,0]),os={limit:10,navigateAfter:"10m",navigateBefore:"10m",navigateToPanel:!0,onlyFromThisDashboard:!1,onlyInTimeRange:!1,showTags:!0,showTime:!0,showUser:!0,tags:[]},is=new ce.c(ps).setPanelOptions(V=>{V.addRadio({category:["Annotation query"],path:"onlyFromThisDashboard",name:"Query filter",defaultValue:os.onlyFromThisDashboard,settings:{options:[{value:!1,label:"All dashboards"},{value:!0,label:"This dashboard"}]}}).addRadio({category:["Annotation query"],path:"onlyInTimeRange",name:"Time range",defaultValue:os.onlyInTimeRange,settings:{options:[{value:!1,label:"None"},{value:!0,label:"This dashboard"}]}}).addCustomEditor({category:["Annotation query"],id:"tags",path:"tags",name:"Tags",description:"Match annotation tags",editor(q){return S.createElement(ke.B,{tags:q.value,onChange:q.onChange})}}).addNumberInput({category:["Annotation query"],path:"limit",name:"Limit",defaultValue:os.limit}).addBooleanSwitch({category:["Display"],path:"showUser",name:"Show user",defaultValue:os.showUser}).addBooleanSwitch({category:["Display"],path:"showTime",name:"Show time",defaultValue:os.showTime}).addBooleanSwitch({category:["Display"],path:"showTags",name:"Show tags",defaultValue:os.showTags}).addRadio({category:["Link behavior"],path:"navigateToPanel",name:"Link target",defaultValue:os.navigateToPanel,settings:{options:[{value:!0,label:"Panel"},{value:!1,label:"Dashboard"}]}}).addTextInput({category:["Link behavior"],path:"navigateBefore",name:"Time before",defaultValue:os.navigateBefore,description:""}).addTextInput({category:["Link behavior"],path:"navigateAfter",name:"Time after",defaultValue:os.navigateAfter,description:""})}).setPanelChangeHandler((V,q,se)=>q==="ryantxu-annolist-panel"?se:V.options);var Za=e(68061),Ze=e(66926),Et=e(78798),Ct=e(89890),Be=e(20251),we=e(14582),xe=e(40538),yt=e(26372),Rt=e(34315),Bt=e(91511),Kt=e(77587),fn=e(31911),Pn=e(25272),gn=e(74855),ut=e(38067),Tt=e(87670),bt=e(60325),Ht=e(4176),en=e(23888),ln=e(729),Cn=e(78056),xn=e(68416),Tn=e(72269),Yn=e(85511),aa=e(20888),sa=e(29431),_n=e(1105);const La=({config:V,onUPlotClick:q,setFocusedSeriesIdx:se,setFocusedPointIdx:Ee,setCoords:Me,setHover:Ue,isToolTipOpen:Ne,isActive:st,setIsActive:lt,sync:vt})=>{Ne.current=!1;const gt=()=>{lt&&lt(!0)},Mt=()=>{Ne.current||(Me(null),lt&&lt(!1))};let Lt=null,It=null;V.addHook("init",Nt=>{Lt=Nt.root.parentElement,It=Nt.over,Lt?.addEventListener("click",q),It.addEventListener("mouseleave",Mt),It.addEventListener("mouseenter",gt),vt&&vt()===sa.m.Crosshair&&Nt.root.classList.add("shared-crosshair")});const Yt=()=>{Ne.current&&(Me(null),q())};V.addHook("drawClear",Yt),V.addHook("destroy",()=>{Lt?.removeEventListener("click",q),It?.removeEventListener("mouseleave",Mt),It?.removeEventListener("mouseenter",gt),Yt()});let Zt;V.addHook("syncRect",(Nt,kt)=>{Zt=kt});const rn=V.getTooltipInterpolator();return rn&&V.addHook("setCursor",Nt=>{Ne.current||rn(se,Ee,kt=>{if(kt){Me(null);return}if(!Zt)return;const{x:Ut,y:_t}=(0,_n._)(Nt,Zt);Ut!==void 0&&_t!==void 0&&Me({canvas:{x:Nt.cursor.left,y:Nt.cursor.top},viewport:{x:Ut,y:_t}})},Nt)}),V.addHook("setLegend",Nt=>{if(!Ne.current&&!rn&&Ee(Nt.legend.idx),Nt.cursor.idxs!=null)for(let kt=0;kt<Nt.cursor.idxs.length;kt++){const Ut=Nt.cursor.idxs[kt];if(Ut!=null){const _t={xIndex:Ut,yIndex:0,pageX:Zt.left+Nt.cursor.left,pageY:Zt.top+Nt.cursor.top};(!Ne.current||!_t)&&Ue(_t);return}}}),V.addHook("setSeries",(Nt,kt)=>{Ne.current||se(kt)}),V};var Ta=e(50796),Ba=e(97551),Ps=e(16225),Na=e(75974),Wa=e(20112),hs=e(425),Ya=e(98234),ls=e(19695),qa=e(36512),es=e(21760),ss=e(13347),dr=e(2445),us=e(25532),Ns=e(64724),Zs=e(28586),Sa=e(60892);const _r=Zs.Gj,nr=Zs.Gj,Tr=8,ma=30,ms=.65,Ir=.1,Xr=.15,Wo=5,rd=10,od=.1;function $o(V,q,se,Ee,Me){const Ue=(0,Ht.X1)(V,14),Ne=q/(Ue.width+2)*14,st=se/Ee,lt=Math.min(st,Ne);return{fontSize:Math.min(lt,Me??lt),textMetrics:Ue}}function Ml(V,q){const{xOri:se,xDir:Ee,rawValue:Me,getColor:Ue,formatValue:Ne,formatShortValue:st,fillOpacity:lt=1,showValue:vt,xSpacing:gt=0}=V,Mt=se===xe.wN.Horizontal,Lt=!Boolean(V.text?.valueSize),It=V.stacking!==xe.o0.None,Yt=V.stacking===xe.o0.Percent;let{groupWidth:Zt,barWidth:rn,barRadius:Nt=0}=V;It&&([Zt,rn]=[rn,Zt]);let kt,Ut;const _t=Sn=>Array.from(Sn.data[0].map((vn,Ln)=>Ln)),Mn=gt===0?void 0:(Sn,vn)=>{const Ln=Sn.bbox.width,kn=Ee*(Mt?1:-1);let jn=vn.length,Pa=jn-1,ua=0,Es=Ln/Na.Z.pxRatio,ds=Math.abs(Math.floor(Es/gt));ua=jn<ds?0:Math.ceil(jn/ds);let Dr=vn.map((Ds,Is)=>ua!==0&&(gt>0?Is:Pa-Is)%ua>0?null:Ds);return kn===1?Dr:Dr.reverse()},an=(Sn,vn,Ln,kn,jn)=>{if(V.xTimeAuto){let Pa=Sn.scales.x,ua=Pa.min,Es=Pa.max;Pa.min=Sn.data[0][0],Pa.max=Sn.data[0][Sn.data[0].length-1];let ds=(0,en.mr)(Sn,vn,Ln,kn,jn);return Pa.min=ua,Pa.max=Es,ds}return vn.map(Pa=>Mt?st(0,Pa):Ne(0,Pa))},An=(Sn,vn,Ln)=>{vn=0,Ln=Math.max(1,Sn.data[0].length-1);let kn=0;(0,Zs.Qm)(Sn.data[0].length,Zt,_r,0,(Pa,ua,Es)=>{kn=ua+Es/2});let jn=Ln-vn;if(kn===.5)vn-=jn;else{let ua=(1/(1-kn*2)*jn-jn)/2;vn-=ua,Ln+=ua}return[vn,Ln]};let On=(Sn,vn)=>{let Ln=Array.from({length:vn},()=>({offs:Array(Sn).fill(0),size:Array(Sn).fill(0)}));return(0,Zs.Qm)(Sn,Zt,_r,null,(kn,jn,Pa)=>{(0,Zs.Qm)(vn,rn,nr,null,(ua,Es,ds)=>{Ln[ua].offs[kn]=jn+Pa*Es,Ln[ua].size[kn]=Pa*ds})}),Ln},Un=(Sn,vn)=>{let Ln=Array.from({length:vn},()=>({offs:Array(Sn).fill(0),size:Array(Sn).fill(0)}));return(0,Zs.Qm)(Sn,Zt,_r,null,(kn,jn,Pa)=>{(0,Zs.Qm)(vn,rn,nr,null,(ua,Es,ds)=>{Ln[ua].offs[kn]=jn,Ln[ua].size[kn]=Pa})}),Ln};const Vn=Mt?Ir:Xr,Kn=Mt?Wo:rd;let Jn=[],wa=[],Hn=1,Bn,Xn=V.text?.valueSize??ma,ra=Kn,Ua=1/0,ja=1/0,Ha=Ue!=null,Ja=Ha?{fill:{unit:3,values:(Sn,vn)=>wa[vn].fill},stroke:{unit:3,values:(Sn,vn)=>wa[vn].stroke}}:{},Da=Na.Z.paths.bars({radius:Yt?0:It?(Sn,vn)=>vn===Sn.data.length-1?[Nt,0]:[0,0]:Nt,disp:{x0:{unit:2,values:(Sn,vn)=>Jn[vn].offs},size:{unit:2,values:(Sn,vn)=>Jn[vn].size},...Ja},each:(Sn,vn,Ln,kn,jn,Pa,ua)=>{kn-=Sn.bbox.left,jn-=Sn.bbox.top;let Es=Sn.data[vn][Ln];Mt?(Ua=Math.min(Ua,Es<0?Sn.bbox.height-(jn+ua):jn),ja=Pa):(Ua=ua,ja=Math.min(ja,Es<0?kn:Sn.bbox.width-(kn+Pa)));let ds={x:kn,y:jn,w:Pa,h:ua,sidx:vn,didx:Ln};if(V.fullHighlight&&(V.xOri===xe.wN.Horizontal?(ds.y=0,ds.h=Sn.bbox.height):(ds.x=0,ds.w=Sn.bbox.width)),kt.add(ds),vt!==xe.Jp.Never){const Dr=Me(vn,Ln);let Ds=1;Yt&&ka[vn][Ln]&&(Ds=ka[vn][Ln]);const Is=Ds===0?0:Dr/Ds,Gs=Ne(vn,Is);if(ra=Math.min(ra,Math.round(Vn*(Mt?Pa:ua))),Bn[Ln]===void 0&&(Bn[Ln]={}),Bn[Ln][vn]={text:Gs,value:Me(vn,Ln),hidden:!1},Lt){const{fontSize:pr,textMetrics:br}=$o(Bn[Ln][vn].text,ja*(Mt?ms:1)-(Mt?0:ra),Ua*(Mt?1:ms)-(Mt?ra:0),1);Bn[Ln][vn].textMetrics=br;let $s=Math.round(Math.min(Xn,ma,pr));Hn=$s/Xn*($s/14),Xn=$s}else Bn[Ln][vn].textMetrics=(0,Ht.X1)(Bn[Ln][vn].text,Xn);let $r=Mt?0:-Math.round(od*Xn),Rs=Me(vn,Ln);if(V.negY?.[vn]&&Rs!=null&&(Rs*=-1),Rs!=null){const pr=Sn.bbox.left+(Mt?kn+Pa/2:Rs<0?kn-ra:kn+Pa+ra),br=Sn.bbox.top+(Mt?Rs<0?jn+ua+ra:jn-ra:jn+ua/2-$r),{textMetrics:$s={width:1,actualBoundingBoxAscent:1,actualBoundingBoxDescent:1}}=Bn[Ln][vn];let Fo=0,hi=0;Mt?(Fo=$s.width*Hn/2,hi=Rs>0?($s.actualBoundingBoxAscent+$s.actualBoundingBoxDescent)*Hn:0):(hi=($s.actualBoundingBoxAscent+$s.actualBoundingBoxDescent)*Hn/2,Fo=Rs<0?$s.width*Hn:0),Bn[Ln][vn].x=pr,Bn[Ln][vn].y=br,Bn[Ln][vn].bbox={x:pr-Fo,y:br-hi,w:$s.width*Hn,h:($s.actualBoundingBoxAscent+$s.actualBoundingBoxDescent)*Hn}}}}});const pn=Sn=>{let vn=Sn.over;vn.style.overflow="hidden",Sn.root.querySelectorAll(".u-cursor-pt").forEach(Ln=>{Ln instanceof HTMLElement&&(Ln.style.borderRadius="0",V.fullHighlight&&(Ln.style.zIndex="-1"))})},oa={x:!1,y:!1,drag:{x:!1,y:!1},dataIdx:(Sn,vn)=>{if(vn===1){Ut=null;let Ln=Sn.cursor.left*Na.Z.pxRatio,kn=Sn.cursor.top*Na.Z.pxRatio;kt.get(Ln,kn,1,1,jn=>{(0,Sa.Pn)(Ln,kn,jn.x,jn.y,jn.x+jn.w,jn.y+jn.h)&&(It?(Ut==null||jn.h*jn.w<Ut.h*Ut.w)&&(Ut=jn):Ut=jn)})}return Ut&&vn===Ut.sidx?Ut.didx:null},points:{fill:"rgba(255,255,255,0.4)",bbox:(Sn,vn)=>{let Ln=Ut&&vn===Ut.sidx,kn=0,jn=0;return It&&Ln&&Ut.sidx>1&&(Mt?kn=(0,Sa.zZ)(kt,Ut.sidx-1,Ut.didx).h:jn=(0,Sa.zZ)(kt,Ut.sidx-1,Ut.didx).w),{left:Ln?(Ut.x+jn)/Na.Z.pxRatio:-10,top:Ln?Ut.y/Na.Z.pxRatio:-10,width:Ln?(Ut.w-jn)/Na.Z.pxRatio:0,height:Ln?(Ut.h-kn)/Na.Z.pxRatio:0}}}},ya=Sn=>{if(kt=kt||new Sa.lW(0,0,Sn.bbox.width,Sn.bbox.height),kt.clear(),Sn.series.forEach(vn=>{vn._paths=null}),It?Jn=[null].concat(Un(Sn.data[0].length,Sn.data.length-1)):Jn=[null].concat(On(Sn.data[0].length,Sn.data.length-1)),Ha){wa=[null];for(let vn=1;vn<Sn.data.length;vn++){let Ln=Sn.data[vn].map((kn,jn)=>kn!=null?Ue(vn,jn,kn):null);wa.push({fill:lt<1?Ln.map(kn=>kn!=null?(0,Ns.alpha)(kn,lt):null):Ln,stroke:Ln})}}Bn={},Xn=V.text?.valueSize??ma,ra=Kn,Ua=ja=1/0},ha=Sn=>{if(vt===xe.Jp.Never||Xn<Tr)return;Sn.ctx.save(),Sn.ctx.fillStyle=q.colors.text.primary,Sn.ctx.font=`${Xn}px ${q.typography.fontFamily}`;let vn,Ln;for(const kn in Bn){let jn=!0;for(const Pa in Bn[kn]){const ua=Bn[kn][Pa],{text:Es,x:ds=0,y:Dr=0}=ua;let{value:Ds}=ua;V.negY?.[Pa]&&Ds!=null&&(Ds*=-1);let Is=Mt?"center":Ds!==null&&Ds<0?"right":"left",Gs=Mt?Ds!==null&&Ds<0?"top":"alphabetic":"middle";if(Is!==vn&&(Sn.ctx.textAlign=vn=Is),Gs!==Ln&&(Sn.ctx.textBaseline=Ln=Gs),vt===xe.Jp.Always)Sn.ctx.fillText(Es,ds,Dr);else if(vt===xe.Jp.Auto){let{bbox:$r}=ua,Rs=!1;if($r==null)Rs=!0,ua.hidden=!0;else if(!jn)for(const pr in Bn[kn]){if(pr===Pa)continue;const br=Bn[kn][pr],{bbox:$s,hidden:Fo}=br;if(!Fo&&$s&&(0,Sa.kK)($r,$s)){Rs=!0,ua.hidden=!0;break}}jn=!1,!Rs&&Sn.ctx.fillText(Es,ds,Dr)}}}Sn.ctx.restore()},fa=(Sn,vn,Ln,kn)=>{Ut?(Sn(Ut.sidx),vn(Ut.didx),Ln()):Ln(!0)};let ka=null;function pa(Sn,vn){return ka=null,(0,dr.Bj)(Sn[0],vn,({totals:Ln})=>{ka=Ln})}return{cursor:oa,xRange:An,xValues:an,xSplits:_t,hFilter:Mn,barsBuilder:Da,init:pn,drawClear:ya,draw:ha,interpolateTooltip:fa,prepData:pa}}const Of=Object.freeze([0,0]),Br={barRadius:0,barWidth:.97,fullHighlight:!1,groupWidth:.7,orientation:xe.wm.Auto,showValue:xe.Jp.Auto,stacking:xe.o0.None,xTickLabelRotation:0,xTickLabelSpacing:0},qr={fillOpacity:80,gradientMode:xe.FI.None,lineWidth:1};function Sl(V){return V===Be.wm.Vertical?{xOri:xe.wN.Horizontal,xDir:xe.bQ.Right,yOri:xe.wN.Vertical,yDir:xe.bQ.Up}:{xOri:xe.wN.Vertical,xDir:xe.bQ.Down,yOri:xe.wN.Horizontal,yDir:xe.bQ.Right}}const id=({frame:V,theme:q,orientation:se,showValue:Ee,groupWidth:Me,barWidth:Ue,barRadius:Ne=0,stacking:st,text:lt,rawValue:vt,getColor:gt,fillOpacity:Mt,allFrames:Lt,xTickLabelRotation:It,xTickLabelMaxLength:Yt,xTickLabelSpacing:Zt=0,legend:rn,timeZone:Nt,fullHighlight:kt})=>{const Ut=new ss.U,_t=(Hn,Bn)=>(0,Wa.zc)(V.fields[Hn].display(Bn)),Mn=(Hn,Bn)=>wr(_t(Hn,Bn),Yt),an=Sl(se);V.fields.length===2&&(Me=Ue,Ue=1);const An={xOri:an.xOri,xDir:an.xDir,groupWidth:Me,barWidth:Ue,barRadius:Ne,stacking:st,rawValue:vt,getColor:gt,fillOpacity:Mt,formatValue:_t,formatShortValue:Mn,timeZone:Nt,text:lt,showValue:Ee,legend:rn,xSpacing:Zt,xTimeAuto:V.fields[0]?.type===we.fS.time&&!V.fields[0].config.unit?.startsWith("time:"),negY:V.fields.map(Hn=>Hn.config.custom?.transform===xe.pR.NegativeY),fullHighlight:kt},On=Ml(An,q);if(Ut.setCursor(On.cursor),Ut.addHook("init",On.init),Ut.addHook("drawClear",On.drawClear),Ut.addHook("draw",On.draw),Ut.setTooltipInterpolator(On.interpolateTooltip),It!==0){let Hn=50,Bn=an.xOri===xe.wN.Horizontal?14:5;Ut.setPadding(ld(V,It,Yt,Hn,Bn))}Ut.setPrepData(On.prepData),Ut.addScale({scaleKey:"x",isTime:!1,range:On.xRange,distribution:xe.wf.Ordinal,orientation:an.xOri,direction:an.xDir});const Un=V.fields[0].config.custom?.axisPlacement!==xe.LB.Hidden?an.xOri===xe.wN.Horizontal?xe.LB.Bottom:xe.LB.Left:xe.LB.Hidden,Vn=V.fields[0].config.custom?.axisPlacement!==xe.LB.Hidden;Ut.addAxis({scaleKey:"x",isTime:!1,placement:Un,label:V.fields[0].config.custom?.axisLabel,splits:On.xSplits,filter:an.xOri===0?On.hFilter:void 0,values:On.xValues,timeZone:Nt,grid:{show:!1},ticks:{show:!1},gap:15,tickLabelRotation:an.xOri===0?It*-1:0,theme:q,show:Vn});let Kn=0;const Jn=Ol(rn);for(let Hn=1;Hn<V.fields.length;Hn++){const Bn=V.fields[Hn];Kn++;const Xn={...qr,...Bn.config.custom},ra=Bn.config.unit||Tn.j,Ua=(0,hs.fD)(Bn),Ha=(0,hs.YO)(Bn,q).color;let Ja=Xn.axisSoftMin,Da=Xn.axisSoftMax;if(Ja==null&&Bn.config.min==null&&(Ja=0),Da==null&&Bn.config.max==null&&(Da=0),Xn.thresholdsStyle&&Bn.config.thresholds&&(Xn.thresholdsStyle.mode??xe.i3.Off)!==xe.i3.Off&&Ut.addThresholds({config:Xn.thresholdsStyle,thresholds:Bn.config.thresholds,scaleKey:ra,theme:q,hardMin:Bn.config.min,hardMax:Bn.config.max,softMin:Xn.axisSoftMin,softMax:Xn.axisSoftMax}),Ut.addSeries({scaleKey:ra,pxAlign:!0,lineWidth:Xn.lineWidth,lineColor:Ha,fillOpacity:Xn.fillOpacity,theme:q,colorMode:Ua,pathBuilder:On.barsBuilder,show:!Xn.hideFrom?.viz,gradientMode:Xn.gradientMode,thresholds:Bn.config.thresholds,hardMin:Bn.config.min,hardMax:Bn.config.max,softMin:Ja,softMax:Da,dataFrameFieldIndex:{fieldIndex:Jn?Hn:Lt[0].fields.findIndex(pn=>pn.type===we.fS.number&&pn.state?.seriesIndex===Kn-1),frameIndex:0}}),Ut.addScale({scaleKey:ra,min:Bn.config.min,max:Bn.config.max,softMin:Ja,softMax:Da,orientation:an.yOri,direction:an.yDir,distribution:Xn.scaleDistribution?.type,log:Xn.scaleDistribution?.log}),Xn.axisPlacement!==xe.LB.Hidden){let pn=Xn.axisPlacement;(!pn||pn===xe.LB.Auto)&&(pn=xe.LB.Left),an.xOri===1&&(pn===xe.LB.Left&&(pn=xe.LB.Bottom),pn===xe.LB.Right&&(pn=xe.LB.Top)),Ut.addAxis({scaleKey:ra,label:Xn.axisLabel,size:Xn.axisWidth,placement:pn,formatValue:(oa,ya)=>(0,Wa.zc)(Bn.display(oa,ya)),filter:an.yOri===0?On.hFilter:void 0,tickLabelRotation:an.xOri===1?It*-1:0,theme:q,grid:{show:Xn.axisGridShow}})}}let wa=(0,dr.i7)(V);return Ut.setStackingGroups(wa),Ut};function wr(V,q){return V.length>q?V.substring(0,q).concat("..."):V}function ld(V,q,se,Ee=0,Me=0){const Ue=V.fields[0].values,Ne=en.gD,st=V.fields[0].display,lt=It=>st?st(Ue.get(It)):Ue.get(It);let vt=0;for(let It=0;It<Ue.length;It++){let Yt=(0,Ht.X1)(wr((0,Wa.zc)(lt(It)),se),Ne);vt=Yt.width>vt?Yt.width:vt}const gt=q>0?Math.cos(q*Math.PI/180)*(0,Ht.X1)(wr((0,Wa.zc)(lt(Ue.length-1)),se),Ne).width:0,Mt=q<0?Math.cos(q*-1*Math.PI/180)*(0,Ht.X1)(wr((0,Wa.zc)(lt(0)),se),Ne).width:0,Lt=Math.sin((q>=0?q:q*-1)*Math.PI/180)*vt-Me;return[Math.round(en.gD*Na.Z.pxRatio),gt,Lt,Math.max(0,Mt-Ee)]}function Pi(V,q,se){if(!V?.length)return{warn:"No data in response"};const Ee=V.length===1?(0,Ya.Y3)(V[0],V[0].fields.findIndex(Mt=>Mt.type===we.fS.time)):(0,Ya._9)({frames:V});if(!Ee)return{warn:"Unable to join data"};let Me;if(se.colorByField&&(Me=(0,us.findField)(Ee,se.colorByField),!Me))return{warn:"Color field not found"};let Ue;if(se.xField&&(Ue=(0,us.findField)(Ee,se.xField),!Ue))return{warn:"Configured x field not found"};let Ne,st,lt=[];for(const Mt of Ee.fields)if(Mt!==Ue)switch(Mt.type){case we.fS.string:Ne||(Ne=Mt);break;case we.fS.time:st||(st=Mt);break;case we.fS.number:{const Lt={...Mt,state:{...Mt.state,seriesIndex:lt.length},config:{...Mt.config,custom:{...Mt.config.custom,stacking:{group:"_",mode:se.stacking}}},values:new ls.G(Mt.values.toArray().map(It=>Number.isFinite(It)||It==null?It:null))};se.stacking===xe.o0.Percent&&(Lt.config.unit="percentunit",Lt.display=(0,qa.U_)({field:Lt,theme:q})),lt.push(Lt)}}let vt=Ue;if(vt||(vt=Ne||st),!vt)return{warn:"Bar charts requires a string or time field"};if(!lt.length)return{warn:"No numeric fields found"};if(Me&&lt.length>1){const Mt=lt.find(Lt=>Lt!==Me);Mt&&(lt=[Mt])}if(Ol(se.legend)){const Mt=se.legend.sortBy.toLowerCase(),Lt=se.legend.calcs??[Mt];lt=(0,I.orderBy)(lt,It=>(0,es.Kx)({field:It,reducers:Lt})[Mt],se.legend.sortDesc?"desc":"asc")}let gt=lt;return se.stacking===xe.o0.Percent&&(gt=lt.map(Mt=>{const Lt=Ee.fields.find(Yt=>Yt.name===Mt.name),It={...Mt,config:{...Lt.config},values:Mt.values};return It.display=(0,qa.U_)({field:It,theme:q}),It}),gt.unshift(vt)),lt.unshift(vt),{aligned:Ee,colorByField:Me,viz:[{length:vt.values.length,fields:lt}],legend:{fields:gt,length:vt.values.length}}}const Ol=V=>Boolean(V?.sortBy&&V.sortDesc!==null),lo=10,cd=["orientation","barWidth","barRadius","xTickLabelRotation","xTickLabelMaxLength","xTickLabelSpacing","groupWidth","stacking","showValue","xField","colorField","legend",(V,q)=>q.text?.valueSize===V.text?.valueSize],dd=({data:V,options:q,fieldConfig:se,width:Ee,height:Me,timeZone:Ue,id:Ne})=>{const st=(0,ft.l4)(),{eventBus:lt}=(0,bt.R9)(),vt=(0,S.useRef)(void 0),gt=(0,S.useRef)(!1),[Mt,Lt]=(0,S.useState)(void 0),[It,Yt]=(0,S.useState)(null),[Zt,rn]=(0,S.useState)(null),[Nt,kt]=(0,S.useState)(null),[Ut,_t]=(0,S.useState)(!1),[Mn,an]=(0,S.useState)(!1),An=()=>{gt.current=!1,Yt(null),an(!1)},On=()=>{gt.current=!gt.current,an(gt.current)},Un=(0,S.useRef)(),Vn=(0,S.useRef)(),Kn=(0,S.useMemo)(()=>Pi(V?.series,st,q),[V,st,q]),Jn="viz"in Kn?Kn:null;Vn.current=Jn?.colorByField;const wa=(0,S.useRef)(1e4);(0,S.useMemo)(()=>{wa.current++},[q]);const Hn=(0,S.useMemo)(()=>{const pn=Jn?.viz[0],oa=Un.current;return pn&&oa&&(0,ut.Ch)(pn,oa,!0)||wa.current++,Un.current=pn,(V.structureRev??0)+wa.current},[Jn,V.structureRev]),Bn=(0,S.useMemo)(()=>!q.orientation||q.orientation===Be.wm.Auto?Ee<Me?Be.wm.Horizontal:Be.wm.Vertical:q.orientation,[Ee,Me,q.orientation]),Xn=(0,S.useMemo)(()=>{if(q.xTickLabelMaxLength)return q.xTickLabelMaxLength;{const pn=q.xTickLabelRotation,oa=(0,Ht.X1)("M",en.gD).width;return Me/2/(Math.sin((pn>=0?pn:pn*-1)*Math.PI/180)*oa)-3}},[Me,q.xTickLabelRotation,q.xTickLabelMaxLength]);if("warn"in Kn)return S.createElement(Tt.Z,{panelId:Ne,fieldConfig:se,data:V,message:Kn.warn,needsNumberField:!0});const ra=(pn,oa,ya)=>{const ha=oa==null?null:pn.fields[oa];if(ha){const pa=(0,Ct.C)(ha,pn);oa=Kn.aligned.fields.findIndex(Sn=>pa===(0,Ct.C)(Sn,Kn.aligned))}const fa=q.fullHighlight&&q.stacking!==xe.o0.None?xe.f3.Multi:q.tooltip.mode,ka=q.tooltip.mode===xe.f3.Multi?q.tooltip.sort:xe.As.None;return S.createElement(S.Fragment,null,Mn&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(Ta.P,{onClick:An,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(Ps.H,{data:Kn.aligned,rowIndex:ya,columnIndex:oa,sortOrder:ka,mode:fa}))},Ua=pn=>{const{legend:oa}=q;if(!pn||oa.showLegend===!1)return null;if(Kn.colorByField){const ya=(0,Ba.$m)([Kn.colorByField],st);if(ya?.length)return S.createElement(ln.AY.Legend,{placement:oa.placement},S.createElement(Cn.l,{placement:oa.placement,items:ya,displayMode:oa.displayMode}))}return S.createElement(xn.l,{data:[Kn.legend],config:pn,maxHeight:"35%",maxWidth:"60%",...q.legend})},ja=(pn,oa)=>Un.current.fields[pn].values.get(oa);let Ha,Ja=1;if(Kn.colorByField){const pn=Kn.colorByField,oa=pn.display;Ja=(pn.config.custom.fillOpacity??100)/100,Ha=(ya,ha)=>oa(Vn.current?.values.get(ha)).color}else Un.current.fields.some(oa=>oa.config.custom?.gradientMode===xe.FI.Scheme&&oa.config.color?.mode===Ze.S.Thresholds||oa.config.mappings?.some(ha=>ha.type==="value"?Object.values(ha.options).some(fa=>fa.color!=null):ha.options.result.color!=null))&&(Ja=(Un.current.fields.find(ya=>ya.type===we.fS.number).config.custom.fillOpacity??100)/100,Ha=(ya,ha)=>{let fa=Un.current.fields[ya];return fa.display(fa.values.get(ha)).color});const Da=(pn,oa,ya)=>{const{barWidth:ha,barRadius:fa=0,showValue:ka,groupWidth:pa,stacking:Sn,legend:vn,tooltip:Ln,text:kn,xTickLabelRotation:jn,xTickLabelSpacing:Pa,fullHighlight:ua}=q;return id({frame:pn,getTimeRange:ya,timeZone:Ue,theme:st,timeZones:[Ue],eventBus:lt,orientation:Bn,barWidth:ha,barRadius:fa,showValue:ka,groupWidth:pa,xTickLabelRotation:jn,xTickLabelMaxLength:Xn,xTickLabelSpacing:Pa,stacking:Sn,legend:vn,tooltip:Ln,text:kn,rawValue:ja,getColor:Ha,fillOpacity:Ja,allFrames:Kn.viz,fullHighlight:ua})};return S.createElement(Tn.d,{theme:st,frames:Kn.viz,prepConfig:Da,propsToDiff:cd,preparePlotFrame:pn=>pn[0],renderLegend:Ua,legend:q.legend,timeZone:Ue,timeRange:{from:1,to:1},structureRev:Hn,width:Ee,height:Me},pn=>(vt.current!==pn&&(vt.current=La({config:pn,onUPlotClick:On,setFocusedSeriesIdx:rn,setFocusedPointIdx:kt,setCoords:Yt,setHover:Lt,isToolTipOpen:gt,isActive:Ut,setIsActive:_t})),q.tooltip.mode===xe.f3.None?null:S.createElement(Yn.h_,null,Mt&&It&&Zt&&S.createElement(aa.S,{position:{x:It.viewport.x,y:It.viewport.y},offset:{x:lo,y:lo},allowPointerEvents:gt.current},ra(Kn.viz[0],Zt,Nt)))))};var eo=e(52081),Vr=e(2594),ud=e(58255);const Ci=[{label:"None",value:0,description:"Show all tick marks"},{label:"Small",value:100,description:"Require 100px spacing"},{label:"Medium",value:200,description:"Require 200px spacing"},{label:"Large",value:300,description:"Require 300px spacing"}],md=V=>{let q=V.value??0;const se=q<0;se&&(q*=-1);let Ee=Ci[0];for(const Ne of Ci)if(Ee=Ne,q<=Ee.value)break;const Me=Ne=>{V.onChange(Ne*(se?-1:1))},Ue=()=>{V.onChange(V.value*-1)};return S.createElement(eo.Lh,null,S.createElement(Vr.S,{value:Ee.value,options:Ci,onChange:Me}),q!==0&&S.createElement(tr.u,{content:"Require space from the right side",placement:"top"},S.createElement("div",null,S.createElement(ud.X,{value:se,onChange:Ue,label:"RTL"}))))};var Ca=e(26410);class fd{getListWithDefaults(q){return q.getListAppender({name:Ca.y.BarChart,pluginId:"barchart",options:{showValue:xe.Jp.Never,legend:{calcs:[],displayMode:xe.jK.List,showLegend:!0,placement:"right"}},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:se=>{se.options.barWidth=.8}}})}getSuggestionsForData(q){const se=this.getListWithDefaults(q),{dataSummary:Ee}=q;Ee.frameCount===1&&(!Ee.hasNumberField||!Ee.hasStringField||Ee.rowCountTotal>50||(se.append({name:Ca.y.BarChart}),Ee.numberFieldCount>1&&(se.append({name:Ca.y.BarChartStacked,options:{stacking:xe.o0.Normal}}),se.append({name:Ca.y.BarChartStackedPercent,options:{stacking:xe.o0.Percent}})),se.append({name:Ca.y.BarChartHorizontal,options:{orientation:Be.wm.Horizontal}}),Ee.numberFieldCount>1&&(se.append({name:Ca.y.BarChartHorizontalStacked,options:{stacking:xe.o0.Normal,orientation:Be.wm.Horizontal}}),se.append({name:Ca.y.BarChartHorizontalStackedPercent,options:{orientation:Be.wm.Horizontal,stacking:xe.o0.Percent}}))))}}const gd=new ce.c(dd).useFieldConfig({standardOptions:{[Za.qb.Color]:{settings:{byValueSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Ze.S.PaletteClassic}}},useCustomConfig:V=>{const q=qr;V.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:q.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:q.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:yt.q.fillGradient[0].value,settings:{options:yt.q.fillGradient}}),V.addSelect({category:["Graph styles"],name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:xe.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:xe.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),V.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:xe.i3.Off},settings:{options:yt.q.thresholdsDisplayModes},editor:gn.F,override:gn.F,process:Et.kG,shouldApply:()=>!0}),Rt.r(V,q,!1),Bt.B(V)}}).setPanelOptions((V,q)=>{const se=Pi(q.data,Ae.v.theme2,q.options??{});let Ee="First string or time field";const Me="viz"in se?se.viz[0]:void 0;if(Me?.fields?.length){const Ue=Me.fields[0];Ee+=` (${(0,Ct.C)(Ue,Me)})`}V.addFieldNamePicker({path:"xField",name:"X Axis",settings:{placeholderText:Ee}}).addRadio({path:"orientation",name:"Orientation",settings:{options:[{value:Be.wm.Auto,label:"Auto"},{value:Be.wm.Horizontal,label:"Horizontal"},{value:Be.wm.Vertical,label:"Vertical"}]},defaultValue:Br.orientation}).addSliderInput({path:"xTickLabelRotation",name:"Rotate x-axis tick labels",defaultValue:Br.xTickLabelRotation,settings:{min:-90,max:90,step:15,marks:{"-90":"-90\xB0","-45":"-45\xB0",0:"0\xB0",45:"45\xB0",90:"90\xB0"},included:!1}}).addNumberInput({path:"xTickLabelMaxLength",name:"X-axis tick label max length",description:"X-axis labels will be truncated to the length provided",settings:{placeholder:"None",min:0},showIf:Ue=>Ue.xTickLabelRotation!==0}).addCustomEditor({id:"xTickLabelSpacing",path:"xTickLabelSpacing",name:"X-axis labels minimum spacing",defaultValue:Br.xTickLabelSpacing,editor:md}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xe.Jp.Auto,label:"Auto"},{value:xe.Jp.Always,label:"Always"},{value:xe.Jp.Never,label:"Never"}]},defaultValue:Br.showValue}).addRadio({path:"stacking",name:"Stacking",settings:{options:yt.q.stacking},defaultValue:Br.stacking}).addSliderInput({path:"groupWidth",name:"Group width",defaultValue:Br.groupWidth,settings:{min:0,max:1,step:.01},showIf:(Ue,Ne)=>Ue.stacking&&Ue.stacking!==xe.o0.None?!1:pd(Ne)!==1}).addSliderInput({path:"barWidth",name:"Bar width",defaultValue:Br.barWidth,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"barRadius",name:"Bar radius",defaultValue:Br.barRadius,settings:{min:0,max:.5,step:.05}}).addBooleanSwitch({path:"fullHighlight",name:"Highlight full area on hover",defaultValue:Br.fullHighlight}),V.addFieldNamePicker({path:"colorByField",name:"Color by field",description:"Use the color value for a sibling field to color each bar value."}),(!q.options?.fullHighlight||q.options?.stacking===xe.o0.None)&&Kt.L(V),fn.J(V),Pn.Z(V,!1)}).setSuggestionsSupplier(new fd);function pd(V){let q=0;if(V)for(const se of V)for(const Ee of se.fields)Ee.type===we.fS.number&&q++;return q}var Tl=e(50954),Ko=e(30383);const xi=V=>(0,Tl.rD)(V);var Os=e(63992);const hd=Object.freeze([0,0]),Nr={displayMode:xe.QH.Gradient,minVizHeight:10,minVizWidth:0,showUnfilled:!0,valueMode:xe.M8.Color};class Il{getSuggestionsForData(q){const{dataSummary:se}=q;if(!se.hasData||!se.hasNumberField)return;const Ee=q.getListAppender({name:"",pluginId:"bargauge",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}});se.numberFieldCount>50||(se.hasStringField&&se.frameCount===1&&se.rowCountTotal<30?(Ee.append({name:Ca.y.BarGaugeBasic,options:{reduceOptions:{values:!0,calcs:[]},displayMode:xe.QH.Basic,orientation:Be.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ee.append({name:Ca.y.BarGaugeLCD,options:{reduceOptions:{values:!0,calcs:[]},displayMode:xe.QH.Lcd,orientation:Be.wm.Horizontal},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})):(Ee.append({name:Ca.y.BarGaugeBasic,options:{displayMode:xe.QH.Basic,orientation:Be.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}}),Ee.append({name:Ca.y.BarGaugeLCD,options:{displayMode:xe.QH.Lcd,orientation:Be.wm.Horizontal,reduceOptions:{values:!1,calcs:["lastNotNull"]}},fieldConfig:{defaults:{color:{mode:"continuous-GrYlRd"}},overrides:[]}})))}}const Di=new ce.c(Os.M).useFieldConfig().setPanelOptions(V=>{(0,Ko.j)(V),(0,Ko.h)(V),Pn.Z(V),V.addRadio({path:"displayMode",name:"Display mode",settings:{options:[{value:xe.QH.Gradient,label:"Gradient"},{value:xe.QH.Lcd,label:"Retro LCD"},{value:xe.QH.Basic,label:"Basic"}]},defaultValue:Nr.displayMode}).addRadio({path:"valueMode",name:"Value display",settings:{options:[{value:xe.M8.Color,label:"Value color"},{value:xe.M8.Text,label:"Text color"},{value:xe.M8.Hidden,label:"Hidden"}]},defaultValue:Nr.valueMode}).addBooleanSwitch({path:"showUnfilled",name:"Show unfilled area",description:"When enabled renders the unfilled region as gray",defaultValue:Nr.showUnfilled,showIf:q=>q.displayMode!=="lcd"}).addNumberInput({path:"minVizWidth",name:"Min width",description:"Minimum column width",defaultValue:Nr.minVizWidth,showIf:q=>q.orientation===Be.wm.Vertical}).addNumberInput({path:"minVizHeight",name:"Min height",description:"Minimum row height",defaultValue:Nr.minVizHeight,showIf:q=>q.orientation===Be.wm.Horizontal})}).setPanelChangeHandler(Tl.ZH).setMigrationHandler(xi).setSuggestionsSupplier(new Il);var to=e(56703),bi=e(36998),Mi=e(68948),Vo=e(99375),Eo=e(41611),vd=e(24015),yo=e(11979),co=e(16514);const Rl=V=>q=>{const se=V.visualization.getColorByName(q?.color||co.Jx);return{markerTriangle:b.css`
        width: 0;
        height: 0;
        border-left: 4px solid transparent;
        border-right: 4px solid transparent;
        border-bottom: 4px solid ${se};
      `,markerBar:b.css`
        display: block;
        width: calc(100%);
        height: 5px;
        background: ${se};
      `}};var Al=e(53787),Ed=e(92787),yd=e(94270),ks=e(24799),zo=e(97379),Pd=e(63619),Cd=e(24357),xd=e(70659);const Si=S.forwardRef(({annotation:V,onSave:q,onDismiss:se,timeFormatter:Ee,className:Me,...Ue},Ne)=>{const st=(0,ft.wW)(Dd),lt=(0,bt.R9)(),vt=(0,S.useRef)(null);(0,Ed.Z)(vt,()=>{se()});const[gt,Mt]=(0,Al.default)(async Mn=>{const an=await lt.onAnnotationCreate(Mn);return q&&q(),an}),[Lt,It]=(0,Al.default)(async Mn=>{const an=await lt.onAnnotationUpdate(Mn);return q&&q(),an}),Yt=V.id!==void 0,Zt=V.time!==V.timeEnd,rn=Yt?It:Mt,Nt=Yt?Lt:gt,kt=Zt?`${Ee(V.time)} - ${Ee(V.timeEnd)}`:Ee(V.time),Ut=({tags:Mn,description:an})=>{rn({id:V.id,tags:Mn,description:an,from:Math.round(V.time),to:Math.round(V.timeEnd)})},_t=S.createElement("div",{ref:Ne,className:(0,b.cx)(st.editor,Me),...Ue},S.createElement("div",{className:st.header},S.createElement(eo.Lh,{justify:"space-between",align:"center"},S.createElement("div",{className:st.title},"Add annotation"),S.createElement("div",{className:st.ts},kt))),S.createElement("div",{className:st.editorForm},S.createElement(yd.l,{onSubmit:Ut,defaultValues:{description:V?.text,tags:V?.tags||[]}},({register:Mn,errors:an,control:An})=>S.createElement(S.Fragment,null,S.createElement(ks.g,{label:"Description",invalid:!!an.description,error:an?.description?.message},S.createElement(zo.K,{...Mn("description",{required:"Annotation description is required"})})),S.createElement(ks.g,{label:"Tags"},S.createElement(Pd.g,{control:An,name:"tags",render:({field:{ref:On,onChange:Un,...Vn}})=>S.createElement(Cd.D,{allowCustomValue:!0,placeholder:"Add tags",onChange:Un,tagOptions:xd.lK,tags:Vn.value})})),S.createElement(eo.Lh,{justify:"flex-end"},S.createElement(Re.zx,{size:"sm",variant:"secondary",onClick:se,fill:"outline"},"Cancel"),S.createElement(Re.zx,{size:"sm",type:"submit",disabled:Nt?.loading},Nt?.loading?"Saving":"Save"))))));return S.createElement(S.Fragment,null,S.createElement("div",{className:st.backdrop}),S.createElement("div",{ref:vt},_t))});Si.displayName="AnnotationEditorForm";const Dd=V=>({backdrop:b.css`
      label: backdrop;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: ${V.zIndex.navbarFixed};
    `,editorContainer:b.css`
      position: absolute;
      top: calc(100% + 10px);
      transform: translate3d(-50%, 0, 0);
    `,editor:b.css`
      background: ${V.colors.background.primary};
      box-shadow: ${V.shadows.z3};
      z-index: ${V.zIndex.dropdown};
      border: 1px solid ${V.colors.border.weak};
      border-radius: ${V.shape.borderRadius()};
      width: 460px;
    `,editorForm:b.css`
      padding: ${V.spacing(1)};
    `,header:b.css`
      border-bottom: 1px solid ${V.colors.border.weak};
      padding: ${V.spacing(1.5,1)};
    `,title:b.css`
      font-weight: ${V.typography.fontWeightMedium};
    `,ts:b.css`
      font-size: ${V.typography.bodySmall.fontSize};
      color: ${V.colors.text.secondary};
    `}),Cs=({onDismiss:V,onSave:q,timeZone:se,data:Ee,selection:Me,annotation:Ue,style:Ne})=>{const st=(0,ft.l4)(),lt=(0,ft.wW)(ur),vt=(0,ft.wW)(Rl),[gt,Mt]=(0,S.useState)(null),[Lt,It]=(0,S.useState)(null),Yt=(0,yo.D)(gt,Lt,{modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]});let Zt=Ee.fields[0];if(!Zt)return null;const rn=Zt.display||(0,qa.U_)({field:Zt,timeZone:se,theme:st}),Nt=Me.min!==Me.max;return S.createElement(Yn.h_,null,S.createElement(S.Fragment,null,S.createElement("div",{style:Ne},S.createElement("div",{className:(0,b.cx)(b.css`
                position: absolute;
                top: ${Me.bbox.top}px;
                left: ${Me.bbox.left}px;
                width: ${Me.bbox.width}px;
                height: ${Me.bbox.height}px;
              `,Nt?lt.overlayRange(Ue):lt.overlay(Ue))},S.createElement("div",{ref:Mt,className:Nt?(0,b.cx)(vt(Ue).markerBar,lt.markerBar):(0,b.cx)(vt(Ue).markerTriangle,lt.markerTriangle)}))),S.createElement(Si,{annotation:Ue||{time:Me.min,timeEnd:Me.max},timeFormatter:kt=>rn(kt).text,onSave:q,onDismiss:V,ref:It,style:Yt.styles.popper,...Yt.attributes.popper})))},ur=V=>({overlay:q=>{const se=V.visualization.getColorByName(q?.color||co.Jx);return b.css`
        border-left: 1px dashed ${se};
      `},overlayRange:q=>{const se=V.visualization.getColorByName(q?.color||co.Jx);return b.css`
        background: ${Ns.alpha(se,.1)};
        border-left: 1px dashed ${se};
        border-right: 1px dashed ${se};
      `},markerTriangle:b.css`
      top: calc(100% + 2px);
      left: -4px;
      position: absolute;
    `,markerBar:b.css`
      top: 100%;
      left: 0;
      position: absolute;
    `}),fs=({data:V,timeZone:q,config:se,children:Ee})=>{const Me=(0,S.useRef)(),[Ue,Ne]=(0,S.useState)(),[st,lt]=(0,S.useState)(!1),[vt,gt]=(0,S.useState)(null),Mt=(0,vd.Z)(),Lt=(0,S.useCallback)(()=>{gt(null),Me.current&&Me.current.setSelect({top:0,left:0,width:0,height:0}),lt(!1)},[lt,gt]);(0,S.useLayoutEffect)(()=>{let Yt=!1;se.addHook("init",rn=>{Me.current=rn;const Nt=rn.hooks.setSelect;if(Nt)for(let kt=0;kt<Nt.length;kt++){const Ut=Nt[kt];Ut!==Zt&&(Nt[kt]=(..._t)=>{!Yt&&Ut(..._t)})}}),se.addHook("syncRect",(rn,Nt)=>{Mt()&&Ne(Nt)});const Zt=rn=>{Yt&&(lt(!0),gt({min:rn.posToVal(rn.select.left,"x"),max:rn.posToVal(rn.select.left+rn.select.width,"x"),bbox:{left:rn.select.left,top:0,height:rn.select.height,width:rn.select.width}}),Yt=!1)};se.addHook("setSelect",Zt),se.setCursor({bind:{mousedown:(rn,Nt,kt)=>Ut=>(Yt=Ut.button===0&&(Ut.metaKey||Ut.ctrlKey),kt(Ut),null),mouseup:(rn,Nt,kt)=>Ut=>(Yt&&rn.select.width===0&&(rn.select.left=rn.cursor.left,rn.select.height=rn.bbox.height/window.devicePixelRatio),kt(Ut),null)}})},[se,Ne,Mt]);const It=(0,S.useCallback)(({coords:Yt})=>{if(!Me.current||!Ue||!Yt)return;const Zt=Me.current.posToVal(Yt.plotCanvas.x,"x");Zt&&(gt({min:Zt,max:Zt,bbox:{left:Yt.plotCanvas.x,top:0,height:Ue.height,width:0}}),lt(!0))},[Ue]);return S.createElement(S.Fragment,null,st&&vt&&Ue&&S.createElement(Cs,{selection:vt,onDismiss:Lt,onSave:Lt,data:V,timeZone:q,style:{position:"absolute",top:`${Ue.top}px`,left:`${Ue.left}px`,width:`${Ue.width}px`,height:`${Ue.height}px`}}),Ee?Ee({startAnnotating:It}):null)};var mr=e(50235),Oi=e(66243),Po=e(38849),Ll=e(47513),Ti=e(85419),Cr=e(8928),no=e(8180),Ii=e(34719);const Bl=({annotation:V,timeFormatter:q,canEdit:se,canDelete:Ee,onEdit:Me,onDelete:Ue})=>{const Ne=(0,ft.wW)(bd),st=q(V.time),lt=q(V.timeEnd);let vt=V.text;const gt=V.tags;let Mt="",Lt,It,Yt=null;const Zt=S.createElement("span",{className:Ne.time},Boolean(V.isRegion)?`${st} - ${lt}`:st);if(V.login&&V.avatarUrl&&(Lt=S.createElement("img",{className:Ne.avatar,alt:"Annotation avatar",src:V.avatarUrl})),V.alertId!==void 0&&V.newState){const rn=tn.Z.getStateDisplayModel(V.newState);Yt=S.createElement("div",{className:Ne.alertState},S.createElement("i",{className:rn.stateClass},rn.text)),Mt=tn.Z.getAlertAnnotationInfo(V)}else V.title&&(vt=V.title+"<br />"+(typeof vt=="string"?vt:""));return(se||Ee)&&(It=S.createElement("div",{className:Ne.editControls},se&&S.createElement(no.h,{name:"pen",size:"sm",onClick:Me}),Ee&&S.createElement(no.h,{name:"trash-alt",size:"sm",onClick:Ue}))),S.createElement("div",{className:Ne.wrapper},S.createElement("div",{className:Ne.header},S.createElement(eo.Lh,{justify:"space-between",align:"center",spacing:"md"},S.createElement("div",{className:Ne.meta},S.createElement("span",null,Lt,Yt),Zt),It)),S.createElement("div",{className:Ne.body},vt&&S.createElement("div",{dangerouslySetInnerHTML:{__html:Cr.QX.sanitize(vt)}}),Mt,S.createElement(S.Fragment,null,S.createElement(eo.Lh,{spacing:"xs",wrap:!0},gt?.map((rn,Nt)=>S.createElement(Ii.V,{name:rn,key:`${rn}-${Nt}`}))))))};Bl.displayName="AnnotationTooltip";const bd=V=>({wrapper:b.css`
      max-width: 400px;
    `,commentWrapper:b.css`
      margin-top: 10px;
      border-top: 2px solid #2d2b34;
      height: 30vh;
      overflow-y: scroll;
      padding: 0 3px;
    `,header:b.css`
      padding: ${V.spacing(.5,1)};
      border-bottom: 1px solid ${V.colors.border.weak};
      font-size: ${V.typography.bodySmall.fontSize};
      display: flex;
    `,meta:b.css`
      display: flex;
      justify-content: space-between;
    `,editControls:b.css`
      display: flex;
      align-items: center;
      > :last-child {
        margin-right: 0;
      }
    `,avatar:b.css`
      border-radius: 50%;
      width: 16px;
      height: 16px;
      margin-right: ${V.spacing(1)};
    `,alertState:b.css`
      padding-right: ${V.spacing(1)};
      font-weight: ${V.typography.fontWeightMedium};
    `,time:b.css`
      color: ${V.colors.text.secondary};
      font-weight: normal;
      display: inline-block;
      position: relative;
      top: 1px;
    `,body:b.css`
      padding: ${V.spacing(1)};

      a {
        color: ${V.colors.text.link};
        &:hover {
          text-decoration: underline;
        }
      }
    `}),Md=6,Ho={modifiers:[{name:"arrow",enabled:!1},{name:"preventOverflow",enabled:!0,options:{rootBoundary:"viewport"}}]};function Sd({annotation:V,timeZone:q,width:se}){const{canAddAnnotations:Ee,canEditAnnotations:Me,canDeleteAnnotations:Ue,...Ne}=(0,bt.R9)(),st=(0,ft.wW)(Rl),lt=(0,ft.wW)(Od),[vt,gt]=(0,S.useState)(!1),[Mt,Lt]=(0,S.useState)(!1),[It,Yt]=(0,S.useState)(null),[Zt,rn]=(0,S.useState)(null),[Nt,kt]=(0,S.useState)(null),Ut=(0,S.useRef)(),_t=(0,yo.D)(It,Zt,Ho),Mn=(0,yo.D)(It,Nt,Ho),an=(0,S.useCallback)(()=>{Lt(!0),gt(!1)},[Lt,gt]),An=(0,S.useCallback)(()=>{Ne.onAnnotationDelete&&Ne.onAnnotationDelete(V.id)},[V,Ne]),On=(0,S.useCallback)(()=>{Ut.current&&clearTimeout(Ut.current),gt(!0)},[gt]),Un=(0,S.useCallback)(()=>{Ut.current&&clearTimeout(Ut.current)},[]),Vn=(0,S.useCallback)(()=>{Ut.current=setTimeout(()=>{gt(!1)},100)},[gt]),Kn=(0,S.useCallback)(Xn=>(0,Po.dq)(Xn,{format:Ll.U6.fullDate,timeZone:q}),[q]),Jn=(0,S.useCallback)(()=>S.createElement(Bl,{annotation:V,timeFormatter:Kn,onEdit:an,onDelete:An,canEdit:Me(V.dashboardUID),canDelete:Ue(V.dashboardUID)}),[Me,Ue,An,an,Kn,V]),wa=Boolean(V.isRegion)&&se>Md;let Hn=`${se/2}px`,Bn=S.createElement("div",{className:st(V).markerTriangle,style:{left:Hn,position:"relative",transform:"translate3d(-100%,-50%, 0)"}});return wa&&(Bn=S.createElement("div",{className:st(V).markerBar,style:{width:`${se}px`,transform:"translate3d(0,-50%, 0)"}})),S.createElement(S.Fragment,null,S.createElement("div",{ref:Yt,onMouseEnter:On,onMouseLeave:Vn,className:wa?void 0:lt.markerWrapper},Bn),vt&&S.createElement(Yn.h_,null,S.createElement("div",{ref:rn,style:_t.styles.popper,..._t.attributes.popper,className:lt.tooltip,onMouseEnter:Un,onMouseLeave:Vn},Jn())),Mt&&S.createElement(Yn.h_,null,S.createElement(Si,{onDismiss:()=>Lt(!1),onSave:()=>Lt(!1),timeFormatter:Kn,annotation:V,ref:kt,style:Mn.styles.popper,...Mn.attributes.popper})))}const Od=V=>({markerWrapper:b.css`
      label: markerWrapper;
      padding: 0 4px 4px 4px;
    `,wrapper:b.css`
      max-width: 400px;
    `,tooltip:b.css`
      ${(0,Ti.getTooltipContainerStyles)(V)};
      padding: 0;
    `}),ko=({annotations:V,timeZone:q,config:se})=>{const Ee=(0,ft.l4)(),Me=(0,S.useRef)(),Ue=(0,S.useRef)();(0,S.useEffect)(()=>{const lt=[];for(const vt of V)lt.push(new mr.U(vt));Ue.current=lt},[V]),(0,S.useLayoutEffect)(()=>{se.addHook("init",lt=>{Me.current=lt}),se.addHook("draw",lt=>{if(!Ue.current)return null;const vt=lt.ctx;if(!vt)return;vt.save(),vt.beginPath(),vt.rect(lt.bbox.left,lt.bbox.top,lt.bbox.width,lt.bbox.height),vt.clip();const gt=(Mt,Lt)=>{vt.beginPath(),vt.lineWidth=2,vt.strokeStyle=Lt,vt.setLineDash([5,5]),vt.moveTo(Mt,lt.bbox.top),vt.lineTo(Mt,lt.bbox.top+lt.bbox.height),vt.stroke(),vt.closePath()};for(let Mt=0;Mt<Ue.current.length;Mt++){const Lt=Ue.current[Mt];for(let It=0;It<Lt.length;It++){const Yt=Lt.get(It);if(!Yt.time)continue;let Zt=lt.valToPos(Yt.time,"x",!0);const rn=Ee.visualization.getColorByName(Yt.color);if(gt(Zt,rn),Yt.isRegion&&Yt.timeEnd){let Nt=lt.valToPos(Yt.timeEnd,"x",!0);gt(Nt,rn),vt.fillStyle=Ns.alpha(rn,.1),vt.rect(Zt,lt.bbox.top,Nt-Zt,lt.bbox.height),vt.fill()}}}vt.restore()})},[se,Ee]);const Ne=(0,S.useCallback)((lt,vt)=>{const Mt=new mr.U(lt).get(vt.fieldIndex);if(!Mt.time||!Me.current)return;let Lt=Me.current.valToPos(Mt.time,"x");return Lt<0&&(Lt=0),{x:Lt,y:Me.current.bbox.height/window.devicePixelRatio+4}},[]),st=(0,S.useCallback)((lt,vt)=>{let gt=0;const Lt=new mr.U(lt).get(vt.fieldIndex);if(Boolean(Lt.isRegion)&&Me.current){let Yt=Me.current.valToPos(Lt.time,"x"),Zt=Me.current.valToPos(Lt.timeEnd,"x");Yt<0&&(Yt=0),Zt>Me.current.bbox.width/window.devicePixelRatio&&(Zt=Me.current.bbox.width/window.devicePixelRatio),gt=Zt-Yt}return S.createElement(Sd,{annotation:Lt,timeZone:q,width:gt})},[q]);return S.createElement(Oi.T,{id:"annotations",config:se,events:V,renderEventMarker:st,mapEventToXYCoords:Ne})};var Td=e(86889),Id=e(65987),Rd=e(14391),Go=e(42044),Ad=e(30909);const Yo=({data:V,config:q,onClose:se,timeZone:Ee,replaceVariables:Me,...Ue})=>{const Ne=(0,S.useRef)(),[st,lt]=(0,S.useState)(null),[vt,gt]=(0,S.useState)(null),[Mt,Lt]=(0,S.useState)(!1),It=(0,S.useCallback)(()=>{Lt(!0)},[Lt]),Yt=(0,S.useCallback)(()=>{Lt(!1)},[Lt]),Zt=(0,S.useCallback)(()=>{(0,dr.Zp)("ContextMenuPlugin",!1,"clearing click selection"),gt(null)},[gt]);(0,S.useLayoutEffect)(()=>{let Nt;const kt=Ut=>{let _t={viewport:{x:Ut.clientX,y:Ut.clientY},plotCanvas:{x:0,y:0}};Nt&&(_t={..._t,plotCanvas:{x:Ut.clientX-Nt.left,y:Ut.clientY-Nt.top}}),lt(_t)};q.addHook("syncRect",(Ut,_t)=>{Nt=_t}),q.addHook("init",Ut=>{const _t=Ut.over;Ne.current=_t||void 0,Ne.current?.addEventListener("mousedown",kt),(0,dr.Zp)("ContextMenuPlugin",!1,"init");let Mn=!1,an=Array.from(Ut.root.querySelectorAll(".u-cursor-pt"));Ne.current?.addEventListener("mousedown",()=>{Mn=!0}),Ne.current?.addEventListener("mousemove",()=>{Mn=!1}),Ne.current?.addEventListener("mouseup",An=>{if(!Mn||An.metaKey||An.ctrlKey){gt(null);return}Mn=!0,An.target instanceof HTMLElement&&(An.target.classList.contains("u-cursor-pt")||((0,dr.Zp)("ContextMenuPlugin",!1,"canvas click"),gt({seriesIdx:null,dataIdx:null}))),It()}),an.length>0&&an.forEach((An,On)=>{An.addEventListener("click",()=>{const Un=On+1,Vn=Ut.cursor.idx;(0,dr.Zp)("ContextMenuPlugin",!1,Un,Vn),gt({seriesIdx:Un,dataIdx:Vn??null})})})})},[q,It,lt,gt]);const rn=(0,S.useMemo)(()=>Ue.defaultItems?Ue.defaultItems.map(Nt=>({...Nt,items:Nt.items.map(kt=>({...kt,onClick:Ut=>{st&&kt.onClick?.(Ut,{coords:st})}}))})):[],[st,Ue.defaultItems]);return S.createElement(S.Fragment,null,S.createElement(R.Global,{styles:R.css`
        .uplot .u-cursor-pt {
          pointer-events: auto !important;
        }
      `}),Mt&&st&&S.createElement(ts,{data:V,frames:Ue.frames,defaultItems:rn,timeZone:Ee,selection:{point:vt,coords:st},replaceVariables:Me,onClose:()=>{Zt(),Yt(),se&&se()}}))},ts=({selection:V,timeZone:q,defaultItems:se,replaceVariables:Ee,data:Me,...Ue})=>{const Ne=(0,S.useRef)(null),st=()=>{Ue.onClose&&Ue.onClose()};(0,Td.Z)(Ne,()=>{st()});const lt=Me.fields[0];if(!lt)return null;const vt=se?[...se]:[];let gt=()=>null;if(V.point){const{seriesIdx:Lt,dataIdx:It}=V.point,Yt=lt.display;if(Lt&&It!==null){const Zt=Me.fields[Lt],rn=Zt.display(Zt.values.get(It));Zt.config.links&&Zt.config.links.length>0&&Zt.getLinks&&vt.push({items:Zt.getLinks({valueRowIndex:It}).map(kt=>({label:kt.title,ariaLabel:kt.title,url:kt.href,target:kt.target,icon:kt.target==="_self"?"link":"external-link-alt",onClick:kt.onClick}))}),gt=()=>S.createElement(Id.b,{timestamp:Yt(lt.values.get(It)).text,displayValue:rn,seriesColor:rn.color,displayName:(0,Ct.C)(Zt,Me,Ue.frames)})}}const Mt=()=>vt?.map((Lt,It)=>S.createElement(Rd.k,{key:`${Lt.label}${It}`,label:Lt.label},(Lt.items||[]).map(Yt=>S.createElement(Go.s,{key:Yt.label,url:Yt.url,label:Yt.label,target:Yt.target,icon:Yt.icon,active:Yt.active,onClick:Yt.onClick}))));return S.createElement(Ad.x,{renderMenuItems:Mt,renderHeader:gt,x:V.coords.viewport.x,y:V.coords.viewport.y,onClose:st})};var wl=e(45576);const fr=({timeZone:V,dataFrame:q,dataFrameFieldIndex:se,config:Ee,getFieldLinks:Me,exemplarColor:Ue})=>{const Ne=(0,ft.wW)(za),[st,lt]=(0,S.useState)(!1),[vt,gt]=S.useState(null),[Mt,Lt]=S.useState(null),{styles:It,attributes:Yt}=(0,yo.D)(vt,Mt,{modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top","left-start"]}}]}),Zt=(0,S.useRef)(),rn=()=>{const Mn=[S.createElement("rect",{fill:Ue,key:"diamond",x:"3.38672",width:"4.78985",height:"4.78985",transform:"rotate(45 3.38672 0)"}),S.createElement("path",{fill:Ue,key:"x",d:"M1.94444 3.49988L0 5.44432L1.55552 6.99984L3.49996 5.05539L5.4444 6.99983L6.99992 5.44431L5.05548 3.49988L6.99983 1.55552L5.44431 0L3.49996 1.94436L1.5556 0L8.42584e-05 1.55552L1.94444 3.49988Z"}),S.createElement("path",{fill:Ue,key:"triangle",d:"M4 0L7.4641 6H0.535898L4 0Z"}),S.createElement("rect",{fill:Ue,key:"rectangle",width:"5",height:"5"}),S.createElement("path",{fill:Ue,key:"pentagon",d:"M3 0.5L5.85317 2.57295L4.76336 5.92705H1.23664L0.146831 2.57295L3 0.5Z"}),S.createElement("path",{fill:Ue,key:"plus",d:"m2.35672,4.2425l0,2.357l1.88558,0l0,-2.357l2.3572,0l0,-1.88558l-2.3572,0l0,-2.35692l-1.88558,0l0,2.35692l-2.35672,0l0,1.88558l2.35672,0z"})];return Mn[se.frameIndex%Mn.length]},Nt=(0,S.useCallback)(()=>{Zt.current&&clearTimeout(Zt.current),lt(!0)},[lt]),kt=(0,S.useCallback)(()=>{Zt.current=setTimeout(()=>{lt(!1)},100)},[lt]),Ut=(0,S.useCallback)(()=>{const Mn=q.fields.find(On=>On.name==="traceID")||q.fields[0],an=[Mn,...q.fields.filter(On=>Mn!==On)],An=On=>(0,Po.dq)(On,{format:Ll.U6.fullDate,timeZone:V});return S.createElement("div",{onMouseEnter:Nt,onMouseLeave:kt,className:Ne.tooltip,ref:Lt,style:It.popper,...Yt.popper},S.createElement("div",{className:Ne.wrapper},S.createElement("div",{className:Ne.header},S.createElement("span",{className:Ne.title},"Exemplar")),S.createElement("div",{className:Ne.body},S.createElement("div",null,S.createElement("table",{className:Ne.exemplarsTable},S.createElement("tbody",null,an.map((On,Un)=>{const Vn=On.values.get(se.fieldIndex),Kn=On.config.links?.length?Me(On,se.fieldIndex):void 0;return S.createElement("tr",{key:Un},S.createElement("td",{valign:"top"},On.name),S.createElement("td",null,S.createElement("div",{className:Ne.valueWrapper},S.createElement("span",null,On.type===we.fS.time?An(Vn):Vn),Kn&&S.createElement(wl.Z,{links:Kn}))))})))))))},[Yt.popper,q.fields,Me,se,Nt,kt,It.popper,Ne,V]),_t=Ee.getSeries().find(Mn=>Mn.props.dataFrameFieldIndex?.frameIndex===se.frameIndex)?.props.lineColor;return S.createElement(S.Fragment,null,S.createElement("div",{ref:gt,onMouseEnter:Nt,onMouseLeave:kt,className:Ne.markerWrapper,"aria-label":pt.wl.components.DataSource.Prometheus.exemplarMarker},S.createElement("svg",{viewBox:"0 0 7 7",width:"7",height:"7",style:{fill:_t},className:(0,b.cx)(Ne.marble,st&&Ne.activeMarble)},rn())),st&&S.createElement(Yn.h_,null,Ut()))},za=V=>{const q=V.isDark?V.v1.palette.dark2:V.v1.palette.white,se=V.isDark?V.v1.palette.dark9:V.v1.palette.gray5,Ee=V.isDark?V.v1.palette.black:V.v1.palette.white,Me=V.isDark?V.v1.palette.dark3:V.v1.palette.gray6;return{markerWrapper:b.css`
      padding: 0 4px 4px 4px;
      width: 8px;
      height: 8px;
      box-sizing: content-box;
      transform: translate3d(-50%, 0, 0);

      &:hover {
        > svg {
          transform: scale(1.3);
          opacity: 1;
          filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
        }
      }
    `,marker:b.css`
      width: 0;
      height: 0;
      border-left: 4px solid transparent;
      border-right: 4px solid transparent;
      border-bottom: 4px solid ${V.v1.palette.red};
      pointer-events: none;
    `,wrapper:b.css`
      background: ${q};
      border: 1px solid ${se};
      border-radius: ${V.shape.borderRadius(2)};
      box-shadow: 0 0 20px ${Ee};
    `,exemplarsTable:b.css`
      width: 100%;

      tr td {
        padding: 5px 10px;
        white-space: nowrap;
        border-bottom: 4px solid ${V.components.panel.background};
      }

      tr {
        background-color: ${V.colors.background.primary};
        &:nth-child(even) {
          background-color: ${Me};
        }
      }
    `,valueWrapper:b.css`
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      column-gap: ${V.spacing(1)};

      > span {
        flex-grow: 0;
      }

      > * {
        flex: 1 1;
        align-self: center;
      }
    `,tooltip:b.css`
      background: none;
      padding: 0;
      overflow-y: auto;
      max-height: 95vh;
    `,header:b.css`
      background: ${se};
      padding: 6px 10px;
      display: flex;
    `,title:b.css`
      font-weight: ${V.typography.fontWeightMedium};
      padding-right: ${V.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,body:b.css`
      padding: ${V.spacing(1)};
      font-weight: ${V.typography.fontWeightMedium};
    `,marble:b.css`
      display: block;
      opacity: 0.5;
      transition: transform 0.15s ease-out;
    `,activeMarble:b.css`
      transform: scale(1.3);
      opacity: 1;
      filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.5));
    `}},bn=({exemplars:V,timeZone:q,getFieldLinks:se,config:Ee,visibleSeries:Me})=>{const Ue=(0,S.useRef)();(0,S.useLayoutEffect)(()=>{Ee.addHook("init",lt=>{Ue.current=lt})},[Ee]);const Ne=(0,S.useCallback)((lt,vt)=>{const gt=lt.fields.find(rn=>rn.name===we.Ls),Mt=lt.fields.find(rn=>rn.name===we.M5);if(!gt||!Mt||!Ue.current)return;const Lt=Object.keys(Ue.current.scales).find(rn=>!["x","y"].some(Nt=>Nt===rn))??Tn.j,It=Ue.current.scales[Lt].min,Yt=Ue.current.scales[Lt].max;let Zt=Mt.values.get(vt.fieldIndex);return It!=null&&Zt<It&&(Zt=It),Yt!=null&&Zt>Yt&&(Zt=Yt),{x:Ue.current.valToPos(gt.values.get(vt.fieldIndex),"x"),y:Ue.current.valToPos(Zt,Lt)}},[]),st=(0,S.useCallback)((lt,vt)=>{const gt=Me!==void 0?Bd(Me,lt,vt):!0,Mt=Me!==void 0?Ld(lt,vt,Me):void 0;return gt?S.createElement(fr,{timeZone:q,getFieldLinks:se,dataFrame:lt,dataFrameFieldIndex:vt,config:Ee,exemplarColor:Mt}):S.createElement(S.Fragment,null)},[Ee,q,se,Me]);return S.createElement(Oi.T,{config:Ee,id:"exemplars",events:V,renderEventMarker:st,mapEventToXYCoords:Ne})},Nl=(V,q)=>{const se=V.series.filter(Me=>Me.props.show),Ee=[];return q?.length&&se.forEach(Me=>{const Ue=Me.props?.dataFrameFieldIndex?.frameIndex,Ne=Me.props?.dataFrameFieldIndex?.fieldIndex;if(Ue!==void 0&&Ne!==void 0){const st=q[Ue]?.fields[Ne];st?.labels&&Ee.push({labels:st.labels,color:Me.props?.lineColor??""})}}),{labels:Ee,totalSeriesCount:V.series.length}},Ld=(V,q,se)=>{let Ee;return se.labels.some(Me=>{const Ue=Object.keys(Me.labels),Ne=V.fields.filter(st=>Ue.find(lt=>lt===st.name));return Ne.length&&Ne.every((lt,vt,gt)=>{const Mt=lt.values.get(q.fieldIndex);return Me.labels[lt.name]===Mt})?(Ee=Me.color,!0):!1}),Ee},Bd=(V,q,se)=>{let Ee=!1;return V.labels.length===V.totalSeriesCount?Ee=!0:V.labels.some(Me=>{const Ue=Object.keys(Me.labels);if(Object.keys(Me.labels).length===0)Ee=!0;else{const Ne=q.fields.filter(st=>Ue.find(lt=>lt===st.name));Ne.length&&(Ee=V.labels.some(st=>Object.keys(st.labels).every(lt=>{const vt=st.labels[lt];return Ne.find(gt=>gt.values.get(se.fieldIndex)===vt)})))}return Ee}),Ee},Co=({config:V,onChangeTimeRange:q})=>{const se=(0,S.useRef)(),[Ee,Me]=(0,S.useState)([]),[Ue,Ne]=(0,S.useState)();if((0,S.useLayoutEffect)(()=>{V.addHook("init",It=>{se.current=It}),V.addHook("setScale",It=>{Me(It.data?.[0]??[]),Ne(It.scales.x??void 0)})},[V]),Ee.length<2||!q||!Ue||!Ue.time||!Ue.min||!Ue.max)return null;let st=0,lt=Ee.length-1;for(;st<=lt&&Ee[st]==null;)st++;for(;lt>=0&&Ee[lt]==null;)lt--;const vt=Ee[st],gt=Ee[lt],Mt=Ue.min,Lt=Ue.max;return vt==null||gt==null||vt<=Lt&&gt>=Mt?null:S.createElement("div",{style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",textAlign:"center"}},S.createElement("div",null,S.createElement("div",null,"Data outside time range"),S.createElement(Re.zx,{onClick:It=>q({from:vt,to:gt}),variant:"secondary"},"Zoom to data")))};Co.displayName="OutsideRangePlugin";var xo=e(86979),jo=e(53004),ao=e.n(jo);const Ri=({step:V,y:q,dragBounds:se,mapPositionToValue:Ee,formatValue:Me,onChange:Ue})=>{const Ne=(0,ft.l4)();let st=q,lt="none";q<(se.top??0)&&(lt="top"),q>(se.bottom??0)+22&&(lt="bottom"),lt==="bottom"&&(st=se.bottom??q),lt==="top"&&(st=se.top??q);const vt=typeof Ue!="function",gt=(0,ft.wW)(Yt=>Ai(Yt,V,lt,vt)),[Mt,Lt]=(0,S.useState)(V.value),It=(0,S.useMemo)(()=>Ne.colors.getContrastText(Ne.visualization.getColorByName(V.color)),[V.color,Ne]);return S.createElement(ao(),{axis:"y",grid:[1,1],disabled:vt,onStop:vt?I.noop:(Yt,Zt)=>(Ue(Ee(Zt.lastY)),!1),onDrag:(Yt,Zt)=>Lt(Ee(Zt.lastY)),position:{x:0,y:st},bounds:se},S.createElement("div",{className:gt.handle,style:{color:It}},S.createElement("span",{className:gt.handleText},Me(Mt))))};Ri.displayName="ThresholdDragHandle";const Ai=(V,q,se,Ee)=>{const Me=V.visualization.getColorByName(q.color),Ue=wd(se),Ne=se!=="none";return{handle:b.css`
      display: flex;
      align-items: center;
      position: absolute;
      left: 0;
      width: calc(100% - 9px);
      height: 18px;
      margin-top: -9px;
      border-color: ${Me};
      cursor: ${Ee?"initial":"grab"};
      border-top-right-radius: ${V.shape.borderRadius(1)};
      border-bottom-right-radius: ${V.shape.borderRadius(1)};
      ${Ne&&b.css`
        margin-top: 0;
        border-radius: ${V.shape.borderRadius(1)};
      `}
      background: ${Me};
      font-size: ${V.typography.bodySmall.fontSize};
      &:before {
        ${Ue};
      }
    `,handleText:b.css`
      text-align: center;
      width: 100%;
      display: block;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    `}};function wd(V){const q=V==="none",se=Ee=>b.css`
    content: '';
    position: absolute;

    bottom: 0;
    top: 0;
    width: 0;
    height: 0;
    left: 0;

    border-right-style: solid;
    border-right-width: ${Ee}px;
    border-right-color: inherit;
    border-top: ${Ee}px solid transparent;
    border-bottom: ${Ee}px solid transparent;
  `;return q?b.css`
      ${se(9)};
      left: -9px;
    `:V==="top"?b.css`
      ${se(5)};
      left: calc(50% - 2.5px);
      top: -7px;
      transform: rotate(90deg);
    `:V==="bottom"?b.css`
      ${se(5)};
      left: calc(50% - 2.5px);
      top: calc(100% - 2.5px);
      transform: rotate(-90deg);
    `:""}const Do=60,Li=({config:V,fieldConfig:q,onThresholdsChange:se})=>{const Ee=(0,S.useRef)(),[Me,Ue]=(0,S.useState)(0);(0,S.useLayoutEffect)(()=>{V.setPadding([0,Do,0,0]),V.addHook("init",st=>{Ee.current=st}),V.addHook("draw",()=>{Ue(st=>st+1)})},[V]);const Ne=(0,S.useMemo)(()=>{const st=Ee.current;if(!st)return null;const lt=q.defaults.thresholds;if(!lt)return null;const vt=(0,xo.z)(q.defaults),gt=q.defaults.decimals,Mt=[];for(let Lt=0;Lt<lt.steps.length;Lt++){const It=lt.steps[Lt],Yt=st.valToPos(It.value,vt);if(Number.isNaN(Yt)||!Number.isFinite(Yt))continue;const Zt=st.bbox.height/window.devicePixelRatio,Nt=typeof se=="function"?Ut=>{const _t=[...lt.steps.slice(0,Lt),...lt.steps.slice(Lt+1),{...lt.steps[Lt],value:Ut}].sort((Mn,an)=>Mn.value-an.value);se({...lt,steps:_t})}:void 0,kt=S.createElement(Ri,{key:`${It.value}-${Lt}`,step:It,y:Yt,dragBounds:{top:0,bottom:Zt},mapPositionToValue:Ut=>st.posToVal(Ut,vt),formatValue:Ut=>(0,Wa.Cf)(vt)(Ut,gt).text,onChange:Nt});Mt.push(kt)}return Mt},[Me,q,se]);return Ee.current?S.createElement("div",{style:{position:"absolute",overflow:"visible",left:`${(Ee.current.bbox.left+Ee.current.bbox.width)/window.devicePixelRatio}px`,top:`${Ee.current.bbox.top/window.devicePixelRatio}px`,width:`${Do}px`,height:`${Ee.current.bbox.height/window.devicePixelRatio}px`}},Ne):null};Li.displayName="ThresholdControlsPlugin";var Bi=e(12022),Nd=e(2932),Ud=e(45778),Fd=e(45389);function Ul(V,q,se){if(!V?.length)return null;for(let Ue of V)for(let Ne of Ue.fields)Ne.type===we.fS.time&&typeof Ne.values.get(0)!="number"&&(Ne.values=(0,Nd.p8)(Ne,{destinationType:we.fS.time}).values);let Ee;const Me=[];for(let Ue of V){const Ne=[];let st=!1,lt=!1,vt=(0,Ud.w)({frame:Ue,refFieldPseudoMin:se?.from.valueOf(),refFieldPseudoMax:se?.to.valueOf()});for(const gt of(0,Fd.I)(vt).fields)switch(gt.type){case we.fS.time:st=!0,Ne.push(gt);break;case we.fS.number:lt=!0,Ee={...gt,values:new ls.G(gt.values.toArray().map(It=>Number.isFinite(It)||It==null?It:null))},Ne.push(Ee);break;case we.fS.string:Ee={...gt,values:new ls.G(gt.values.toArray())},Ne.push(Ee);break;case we.fS.boolean:lt=!0;const Mt=gt.config?.custom??{},Lt={...gt.config,max:1,min:0,custom:Mt};Mt.lineInterpolation!==xe.KC.StepBefore&&(Mt.lineInterpolation=xe.KC.StepAfter),Ee={...gt,config:Lt,type:we.fS.number,values:new ls.G(gt.values.toArray().map(It=>It==null?It:Boolean(It)?1:0))},(0,Wa.br)(Lt.unit)||(Lt.unit="bool",Ee.display=(0,qa.U_)({field:Ee,theme:q})),Ne.push(Ee);break}st&&lt&&Me.push({...Ue,length:vt.length,fields:Ne})}return Me.length?(Wd(Me,q),Me):null}const Wd=(V,q)=>{let se=0;V.forEach(Ee=>{Ee.fields.forEach(Me=>{(Me.type===we.fS.number||Me.type===we.fS.boolean)&&(Me.state={...Me.state,seriesIndex:se++},Me.display=(0,qa.U_)({field:Me,theme:q}))})})};function wi(V,q){return!V||!V.length?[q]:V.map(se=>se?.length?se:q)}function $d(V,q,se,Ee){return V.fields.forEach(Me=>{if(Me.state?.origin?.frameIndex===void 0||q[Me.state?.origin?.frameIndex]===void 0)return;const Ue=[];for(const st of q[Me.state?.origin?.frameIndex].fields)if(st.type===we.fS.string)if(Me.values instanceof Bi.o){const lt={...st};lt.values=new Bi.o(st.values,Me.values.getOrderArray()),Ue.push(lt)}else Ue.push(st);const Ne={fields:[...V.fields,...Ue],length:V.fields.length+Ue.length};Me.getLinks=(0,bi.oB)(Ne,Me,Me.state.scopedVars,se,Ee)}),V}const Tf=Object.freeze([1,0]);var Js=(V=>(V.CandlesVolume="candles+volume",V.Candles="candles",V.Volume="volume",V))(Js||{}),Qo=(V=>(V.Candles="candles",V.OHLCBars="ohlcbars",V))(Qo||{}),zr=(V=>(V.OpenClose="open-close",V.CloseClose="close-close",V))(zr||{});const Zo={up:"green",down:"red",flat:"gray"},Rr={mode:"candles+volume",candleStyle:"candles",colorStrategy:"open-close",colors:Zo,fields:{},legend:{displayMode:xe.jK.List,showLegend:!0,placement:"bottom",calcs:[]},includeAllFields:!1},Hr={open:{key:"open",name:"Open",defaults:["open","o"],description:"Value at the start of the period"},high:{key:"high",name:"High",defaults:["high","h","max"],description:"Maximum value within the period"},low:{key:"low",name:"Low",defaults:["low","l","min"],description:"Minimum value within the period"},close:{key:"close",name:"Close",defaults:["close","c"],description:"Value at the end of the period"},volume:{key:"volume",name:"Volume",defaults:["volume","v"],description:"Sample count within the period"}};function Kd(V,q,se){const Ee=(0,us.findField)(V,se[q.key]);if(!Ee)for(const Me of V.fields){const Ue=(0,Ct.C)(Me,V).toLowerCase();if(q.defaults.includes(Ue)||q.defaults.includes(Me.name))return Me}return Ee}function Ni(V,q,se,Ee){if(!V?.length)return null;const Me=q.fields??{},Ue=V.length===1?(0,Ya.Y3)(V[0],V[0].fields.findIndex(It=>It.type===we.fS.time)):(0,Ya._9)({frames:V});if(!Ue?.length)return null;const Ne={aligned:Ue,frame:Ue,names:{}},st=Ul([Ue],se,Ee);if(!st)return null;const lt=Ne.frame=st[0],vt=lt.fields.findIndex(It=>It.type===we.fS.time);if(vt<0)return null;const gt=new Set;for(const It of Object.values(Hr)){const Yt=Kd(lt,It,Me);Yt&&(Ne[It.key]=Yt,gt.add(Yt))}if(!Ne.open&&!Ne.close&&(Ne.open=lt.fields.find(It=>It.type===we.fS.number),Ne.open&&gt.add(Ne.open)),Ne.open&&!Ne.close&&!Me.close){const It=Ne.open.values.toArray().slice(1);It.push(It[It.length-1]),Ne.close={...Ne.open,values:new ls.G(It),name:"Next open",state:void 0},gt.add(Ne.close),lt.fields.push(Ne.close),Ne.autoOpenClose=!0}if(Ne.close&&!Ne.open&&!Me.open){const It=Ne.close.values.toArray().slice();It.unshift(It[0]),It.length=lt.length,Ne.open={...Ne.close,values:new ls.G(It),name:"Previous close",state:void 0},gt.add(Ne.open),lt.fields.push(Ne.open),Ne.autoOpenClose=!0}!Ne.high&&!Me.high&&(Ne.high=Ne.open),!Ne.low&&!Me.low&&(Ne.low=Ne.open),q.mode===Js.Volume?(Ne.high&&(Ne.high!==Ne.open&&gt.delete(Ne.high),Ne.high=void 0),Ne.low&&(Ne.low!==Ne.open&&gt.delete(Ne.low),Ne.low=void 0)):q.mode===Js.Candles&&Ne.volume&&(gt.delete(Ne.volume),Ne.volume=void 0);for(const It of Object.values(Hr)){const Yt=Ne[It.key];Yt&&(Ne.names[It.key]=(0,Ct.C)(Yt,Ne.frame))}const Mt=lt.fields[vt],Lt=[Mt];q.includeAllFields?Lt.push(...lt.fields.filter(It=>It!==Mt)):Lt.push(...gt),Ne.frame={...Ne.frame,fields:Lt};for(let It=0;It<Ne.frame.fields.length;It++){const Yt=Ne.frame.fields[It];Yt.state={...Yt.state,seriesIndex:It-1,origin:{fieldIndex:It,frameIndex:0}}}return Ne}const{alpha:so}=Ns;function Vd(V){let{mode:q,candleStyle:se,fields:Ee,colorStrategy:Me,upColor:Ue,downColor:Ne,flatColor:st,volumeAlpha:lt,flatAsUp:vt=!0}=V;const gt=q!==Js.Volume&&Ee.high!=null&&Ee.low!=null,Mt=gt&&se===Qo.Candles,Lt=q!==Js.Candles&&Ee.volume!=null;function It(_t,Mn,an,An,On){return _t>0?an:_t<0?An:On?an:Mn}let Yt=0,Zt=Ee.open,rn=Ee.high,Nt=Ee.low,kt=Ee.close,Ut=Ee.volume;return _t=>{let Mn,an,An,On,Un,Vn;gt&&(An=new Path2D,an=new Path2D,Mn=new Path2D),Lt&&(On=new Path2D,Un=new Path2D,Vn=new Path2D);let Kn=new Path2D,Jn=_t.ctx,wa=_t.data[Yt],Hn=_t.data[Zt],Bn=_t.data[kt],Xn=gt?_t.data[rn]:null,ra=gt?_t.data[Nt]:null,Ua=Lt?_t.data[Ut]:null,ja=Ut!=null?Math.round(_t.valToPos(0,_t.series[Ut].scale,!0)):null,[Ha,Ja]=_t.series[0].idxs,Da=_t.data[0],pn=Hn,oa=_t.bbox.width;if(Da.length>1){let pa=null;for(let Sn=0,vn=1/0;Sn<Da.length;Sn++)if(pn[Sn]!==void 0){if(pa!=null){let Ln=Math.abs(Da[Sn]-Da[pa]);Ln<vn&&(vn=Ln,oa=Math.abs(_t.valToPos(Da[Sn],"x",!0)-_t.valToPos(Da[pa],"x",!0)))}pa=Sn}}let ya=Math.round(.6*oa),ha=2,fa=2;ya<=12&&(ha=fa=1);let ka=Math.floor(ya/2);for(let pa=Ha;pa<=Ja;pa++){let Sn=Math.round(_t.valToPos(wa[pa],"x",!0)),vn=pa===Ha?0:Math.sign(Bn[pa]-Bn[pa-1]),Ln=Math.sign(Bn[pa]-Hn[pa]);if(Lt){let kn=It(Me===zr.CloseClose?vn:Ln,Vn,Un,On,pa===Ha&&zr.CloseClose?!1:vt),jn=Math.round(_t.valToPos(Ua[pa],_t.series[Ut].scale,!0));kn.rect(Sn-ka,jn,ya,ja-jn)}if(gt){let kn=It(Me===zr.CloseClose?vn:Ln,An,an,Mn,pa===Ha&&zr.CloseClose?!1:vt),jn=Math.round(_t.valToPos(Xn[pa],_t.series[rn].scale,!0)),Pa=Math.round(_t.valToPos(ra[pa],_t.series[Nt].scale,!0));kn.rect(Sn-Math.floor(ha/2),jn,ha,Pa-jn);let ua=Math.round(_t.valToPos(Hn[pa],_t.series[Zt].scale,!0)),Es=Math.round(_t.valToPos(Bn[pa],_t.series[kt].scale,!0));if(Mt){let ds=Math.min(ua,Es),Dr=Math.max(ua,Es),Ds=Math.max(1,Dr-ds);kn.rect(Sn-ka,ds,ya,Ds),Me===zr.CloseClose&&Ln>=0&&Ds>fa*2&&Kn.rect(Sn-ka+fa,ds+fa,ya-fa*2,Ds-fa*2)}else kn.rect(Sn-ka,ua,ka,ha),kn.rect(Sn,Es,ka,ha)}}Jn.save(),Jn.rect(_t.bbox.left,_t.bbox.top,_t.bbox.width,_t.bbox.height),Jn.clip(),Lt&&(Jn.fillStyle=so(Ue,lt),Jn.fill(Un),Jn.fillStyle=so(Ne,lt),Jn.fill(On),Jn.fillStyle=so(st,lt),Jn.fill(Vn)),gt&&(Jn.fillStyle=Ue,Jn.fill(an),Jn.fillStyle=Ne,Jn.fill(Mn),Jn.fillStyle=st,Jn.fill(An),Jn.globalCompositeOperation="destination-out",Jn.fill(Kn)),Jn.restore()}}const Ia=({data:V,id:q,timeRange:se,timeZone:Ee,width:Me,height:Ue,options:Ne,fieldConfig:st,onChangeTimeRange:lt,replaceVariables:vt})=>{const{sync:gt,canAddAnnotations:Mt,onThresholdsChange:Lt,canEditThresholds:It,showThresholds:Yt,onSplitOpen:Zt}=(0,bt.R9)(),rn=(On,Un)=>(0,Eo.a_)({field:On,rowIndex:Un,splitOpenFn:Zt,range:se}),Nt=(0,ft.l4)(),kt=(0,S.useMemo)(()=>Ni(V.series,Ne,Nt,se),[V,Ne,Nt,se]),{renderers:Ut,tweakScale:_t,tweakAxis:Mn,shouldRenderPrice:an}=(0,S.useMemo)(()=>{let On=(fa,ka)=>fa,Un=(fa,ka)=>fa,Vn={renderers:[],tweakScale:On,tweakAxis:Un,shouldRenderPrice:!1};if(!kt)return Vn;const Kn=kt.names;if(!Object.keys(Kn).length)return Vn;const{mode:Jn,candleStyle:wa,colorStrategy:Hn}=Ne,Bn={...Zo,...Ne.colors};let{open:Xn,high:ra,low:Ua,close:ja,volume:Ha}=Kn;if(Xn==null||ja==null)return Vn;let Ja=.5,Da=-1,pn=!1;if(Ha!=null&&Jn!==Js.Candles){let fa=kt.volume;if(fa!=null){pn=!0;let{fillOpacity:ka}=fa.config.custom;ka&&(Ja=ka/100),Jn!==Js.Volume&&(fa.config={...fa.config},fa.config.unit="short",fa.display=(0,qa.U_)({field:fa,theme:_.vc.theme2}),Un=(pa,Sn)=>{if(Sn.name===kt.volume?.name){let vn=(Ln,kn)=>{let jn=[],Pa=Ln.series[Da].max;for(let ua=0;ua<kn.length&&(jn.push(kn[ua]),!(kn[ua]>Pa));ua++);return jn};pa.space=20,pa.filter=vn,pa.ticks={...pa.ticks,filter:vn}}return pa},On=(pa,Sn)=>(Sn.name===kt.volume?.name&&(pa.range=(vn,Ln,kn)=>[0,kn*7]),pa))}}let oa=Jn!==Js.Volume&&ra!=null&&Ua!=null;if(!oa&&!pn)return Vn;let ya={},ha=[];return oa?ya={open:Xn,high:ra,low:Ua,close:ja}:ha.push(Xn,ja),pn&&(ya.volume=Ha,ya.open=Xn,ya.close=ja),{shouldRenderPrice:oa,renderers:[{fieldMap:ya,indicesOnly:ha,init:(fa,ka)=>{Da=ka.volume,fa.addHook("drawAxes",Vd({mode:Jn,fields:ka,upColor:_.vc.theme2.visualization.getColorByName(Bn.up),downColor:_.vc.theme2.visualization.getColorByName(Bn.down),flatColor:_.vc.theme2.visualization.getColorByName(Bn.flat),volumeAlpha:Ja,colorStrategy:Hn,candleStyle:wa,flatAsUp:!0}))}}],tweakScale:On,tweakAxis:Un}},[Ne,V.structureRev,V.series.length]);if(!kt)return S.createElement(Tt.Z,{panelId:q,fieldConfig:st,data:V,needsTimeField:!0,needsNumberField:!0});if(an)for(let On in Ut[0].fieldMap){let Un=kt[On];Un.config={...Un.config,custom:{...Un.config.custom,hideFrom:{legend:!0,tooltip:!1,viz:!1}}}}const An=Boolean(Mt&&Mt());return S.createElement(Mi.p,{frames:[kt.frame],structureRev:V.structureRev,timeRange:se,timeZone:Ee,width:Me,height:Ue,legend:Ne.legend,renderers:Ut,tweakAxis:Mn,tweakScale:_t,options:Ne},(On,Un)=>(Un.fields.forEach(Vn=>{Vn.getLinks=(0,bi.oB)(Un,Vn,Vn.state.scopedVars,vt,Ee)}),S.createElement(S.Fragment,null,S.createElement(Vo.R,{config:On,onZoom:lt}),S.createElement(_n.i,{data:Un,config:On,mode:xe.f3.Multi,sync:gt,timeZone:Ee}),V.annotations&&S.createElement(ko,{annotations:V.annotations,config:On,timeZone:Ee}),An?S.createElement(fs,{data:Un,timeZone:Ee,config:On},({startAnnotating:Vn})=>S.createElement(Yo,{data:Un,config:On,timeZone:Ee,replaceVariables:vt,defaultItems:An?[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(Kn,Jn)=>{Jn&&Vn({coords:Jn.coords})}}]}]:[]})):S.createElement(Yo,{data:Un,config:On,timeZone:Ee,replaceVariables:vt,defaultItems:[]}),V.annotations&&S.createElement(bn,{config:On,exemplars:V.annotations,timeZone:Ee,getFieldLinks:rn}),(It&&Lt||Yt)&&S.createElement(Li,{config:On,fieldConfig:st,onThresholdsChange:It?Lt:void 0}),S.createElement(Co,{config:On,onChangeTimeRange:lt}))))};class zd{getSuggestionsForData(q){const{dataSummary:se}=q;if(!q.data?.series||!se.hasData||se.timeFieldCount<1||se.numberFieldCount<2||se.numberFieldCount>10)return;const Ee=Ni(q.data.series,Rr,Ae.v.theme2);if(!Ee||Ee.open===Ee.high&&Ee.open===Ee.low)return;q.getListAppender({name:"",pluginId:"candlestick",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ca.y.Candlestick,options:Rr,fieldConfig:{defaults:{},overrides:[]},score:Ee.autoOpenClose?Be._.Good:Be._.Best})}}const Hd=[{label:"Candles",value:Js.Candles},{label:"Volume",value:Js.Volume},{label:"Both",value:Js.CandlesVolume}],Ts=[{label:"Candles",value:Qo.Candles},{label:"OHLC Bars",value:Qo.OHLCBars}],kd=[{label:"Since Open",value:zr.OpenClose},{label:"Since Prior Close",value:zr.CloseClose}],Gd=V=>V.type===we.fS.number;function bo(V,q,se){let Ee="Auto ";if(se){const Me=se[q.key];Me?.config?(Ee+="= "+(0,Ct.C)(Me),Me===se?.open&&q.key!=="open"&&(Ee+=` (${q.defaults.join(",")})`)):Ee+=`(${q.defaults.join(",")})`}V.addFieldNamePicker({path:`fields.${q.key}`,name:q.name,description:q.description,settings:{filter:Gd,placeholderText:Ee}})}const If=new ce.c(Ia).useFieldConfig((0,to.F)(to.r)).setPanelOptions((V,q)=>{const se=q.options??Rr,Ee=Ni(q.data,se,Ae.v.theme2);V.addRadio({path:"mode",name:"Mode",description:"",defaultValue:Rr.mode,settings:{options:Hd}}).addRadio({path:"candleStyle",name:"Candle style",description:"",defaultValue:Rr.candleStyle,settings:{options:Ts},showIf:Me=>Me.mode!==Js.Volume}).addRadio({path:"colorStrategy",name:"Color strategy",description:"",defaultValue:Rr.colorStrategy,settings:{options:kd}}).addColorPicker({path:"colors.up",name:"Up color",defaultValue:Zo.up}).addColorPicker({path:"colors.down",name:"Down color",defaultValue:Zo.down}),bo(V,Hr.open,Ee),se.mode!==Js.Volume&&(bo(V,Hr.high,Ee),bo(V,Hr.low,Ee)),bo(V,Hr.close,Ee),se.mode!==Js.Candles&&bo(V,Hr.volume,Ee),V.addRadio({path:"includeAllFields",name:"Additional fields",description:"Use standard timeseries options to configure any fields not mapped above",defaultValue:Rr.includeAllFields,settings:{options:[{label:"Ignore",value:!1},{label:"Include",value:!0}]}}),fn.J(V)}).setDataSupport({annotations:!0,alertStates:!0}).setSuggestionsSupplier(new zd);var Yd=e(61962),Fl=e(43993);const Rf=Object.freeze([0,0]);var Mo=(V=>(V.List="list",V.Previews="previews",V))(Mo||{});const kr={layout:"list",maxItems:10,query:"",showHeadings:!0,showRecentlyViewed:!1,showSearch:!1,showStarred:!0,tags:[]},jd=V=>({dashlistSectionHeader:b.css`
    padding: ${V.spacing(.25,1)};
    margin-right: ${V.spacing(1)};
  `,dashlistSection:b.css`
    margin-bottom: ${V.spacing(2)};
    padding-top: 3px;
  `,dashlistLink:b.css`
    display: flex;
    cursor: pointer;
    border-bottom: 1px solid ${V.colors.border.weak};
    margin-right: ${V.spacing(1)};
    padding: ${V.spacing(1)};

    &:hover {
      a {
        color: ${V.colors.text.link};
        text-decoration: underline;
      }
    }
  `,dashlistStar:b.css`
    align-self: center;
    margin-right: 0px;
    color: ${V.colors.secondary.text};
    z-index: 1;
  `,dashlistFolder:b.css`
    color: ${V.colors.text.secondary};
    font-size: ${V.typography.bodySmall.fontSize};
    line-height: ${V.typography.body.lineHeight};
  `,dashlistTitle:b.css`
    &::after {
      position: absolute;
      content: '';
      left: 0;
      top: 0;
      bottom: 0;
      right: 0;
    }
  `,dashlistLinkBody:b.css`
    flex-grow: 1;
    overflow: hidden;
    text-overflow: ellipsis;
  `,dashlistItem:b.css`
    position: relative;
    list-style: none;
  `,gridContainer:b.css`
    display: grid;
    gap: ${V.spacing(1)};
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    list-style: none;
    margin-bottom: ${V.spacing(1)};
  `});async function Qd(V,q){let se=Promise.resolve([]);if(V.showStarred){const gt={limit:V.maxItems,starred:"true"};se=(0,Ve.i)().search(gt)}let Ee=Promise.resolve([]),Me=[];if(V.showRecentlyViewed){let gt=await it.Z.getDashboardOpened();Me=(0,I.take)(gt,V.maxItems),Ee=(0,Ve.i)().search({dashboardUIDs:Me,limit:V.maxItems})}let Ue=Promise.resolve([]);if(V.showSearch){const gt={limit:V.maxItems,query:q(V.query,{},"text"),folderIds:V.folderId,tag:V.tags.map(Mt=>q(Mt,{},"text")),type:"dash-db"};Ue=(0,Ve.i)().search(gt)}const[Ne,st,lt]=await Promise.all([se,Ue,Ee]);let vt=new Map;for(const gt of Me){const Mt=lt.find(Lt=>Lt.uid===gt);Mt&&vt.set(gt,{...Mt,isRecent:!0})}return st.forEach(gt=>{gt.uid&&(vt.has(gt.uid)?vt.get(gt.uid).isSearchResult=!0:vt.set(gt.uid,{...gt,isSearchResult:!0}))}),Ne.forEach(gt=>{gt.uid&&(vt.has(gt.uid)?vt.get(gt.uid).isStarred=!0:vt.set(gt.uid,{...gt,isStarred:!0}))}),vt}function Zd(V){const[q,se]=(0,S.useState)(new Map),Ee=(0,ct.useDispatch)();(0,S.useEffect)(()=>{Qd(V.options,V.replaceVariables).then(Nt=>{se(Nt)})},[V.options,V.replaceVariables,V.renderCounter]);const Me=async(Nt,kt)=>{const{uid:Ut,title:_t,url:Mn}=kt;Nt.preventDefault(),Nt.stopPropagation();const an=await(0,on.h4)().starDashboard(kt.uid,kt.isStarred),An=new Map(q);An.set(kt?.uid??"",{...kt,isStarred:an}),se(An),Ee((0,Yd.OQ)({id:Ut??"",title:_t,url:Mn,isStarred:an}))},[Ue,Ne,st]=(0,S.useMemo)(()=>{const Nt=[...q.values()];return[Nt.filter(kt=>kt.isStarred).sort((kt,Ut)=>kt.title.localeCompare(Ut.title)),Nt.filter(kt=>kt.isRecent),Nt.filter(kt=>kt.isSearchResult).sort((kt,Ut)=>kt.title.localeCompare(Ut.title))]},[q]),{showStarred:lt,showRecentlyViewed:vt,showHeadings:gt,showSearch:Mt,layout:Lt}=V.options,It=[{header:"Starred dashboards",dashboards:Ue,show:lt},{header:"Recently viewed dashboards",dashboards:Ne,show:vt},{header:"Search",dashboards:st,show:Mt}],Yt=(0,ft.wW)(jd),Zt=Nt=>S.createElement("ul",null,Nt.map(kt=>S.createElement("li",{className:Yt.dashlistItem,key:`dash-${kt.uid}`},S.createElement("div",{className:Yt.dashlistLink},S.createElement("div",{className:Yt.dashlistLinkBody},S.createElement("a",{className:Yt.dashlistTitle,href:kt.url},kt.title),kt.folderTitle&&S.createElement("div",{className:Yt.dashlistFolder},kt.folderTitle)),S.createElement(Jd,{"aria-label":`Star dashboard "${kt.title}".`,className:Yt.dashlistStar,enabled:{name:"favorite",type:"mono"},disabled:{name:"star",type:"default"},checked:kt.isStarred,onClick:Ut=>Me(Ut,kt)}))))),rn=Nt=>S.createElement("ul",{className:Yt.gridContainer},Nt.map(kt=>S.createElement("li",{key:kt.uid},S.createElement(Fl.K,{item:{...kt,kind:"dashboard"}}))));return S.createElement(et.$,{autoHeightMin:"100%",autoHeightMax:"100%"},It.map(({show:Nt,header:kt,dashboards:Ut},_t)=>Nt&&S.createElement("div",{className:Yt.dashlistSection,key:`dash-group-${_t}`},gt&&S.createElement("h6",{className:Yt.dashlistSectionHeader},kt),Lt===Mo.Previews?rn(Ut):Zt(Ut))))}function Jd({enabled:V,disabled:q,checked:se,onClick:Ee,className:Me,"aria-label":Ue,...Ne}){const st=(0,S.useCallback)(Mt=>{Mt.preventDefault(),Mt.stopPropagation(),Ee?.(Mt)},[Ee]),vt={...Ne,...se?V:q},gt=(0,ft.wW)(_d);return S.createElement("label",{className:gt.wrapper},S.createElement("input",{type:"checkbox",defaultChecked:se,onClick:st,className:gt.checkBox,"aria-label":Ue}),S.createElement(Xt.J,{className:(0,b.cx)(gt.icon,Me),...vt}))}const _d=(0,Bs.B)(V=>({wrapper:(0,b.css)({display:"flex",alignSelf:"center",cursor:"pointer",zIndex:1}),checkBox:(0,b.css)({appearance:"none","&:focus-visible + *":{...(0,Ti.getFocusStyles)(V),borderRadius:V.shape.borderRadius(1)}}),icon:(0,b.css)({marginBottom:0,verticalAlign:"baseline",display:"flex"})})),Xd=new ce.c(Zd).setPanelOptions(V=>{Ae.v.featureToggles.dashboardPreviews&&V.addRadio({path:"layout",name:"Layout",defaultValue:Mo.List,settings:{options:[{value:Mo.List,label:"List"},{value:Mo.Previews,label:"Preview"}]}}),V.addBooleanSwitch({path:"showStarred",name:"Starred",defaultValue:kr.showStarred}).addBooleanSwitch({path:"showRecentlyViewed",name:"Recently viewed",defaultValue:kr.showRecentlyViewed}).addBooleanSwitch({path:"showSearch",name:"Search",defaultValue:kr.showSearch}).addBooleanSwitch({path:"showHeadings",name:"Show headings",defaultValue:kr.showHeadings}).addNumberInput({path:"maxItems",name:"Max items",defaultValue:kr.maxItems}).addTextInput({path:"query",name:"Query",defaultValue:kr.query}).addCustomEditor({path:"folderId",name:"Folder",id:"folderId",defaultValue:void 0,editor:function({value:se,onChange:Ee}){return S.createElement(Rn,{initialFolderId:se,onChange:Me=>Ee(Me?.id),extraFolders:[mn,Dn]})}}).addCustomEditor({id:"tags",path:"tags",name:"Tags",description:"",defaultValue:kr.tags,editor(q){return S.createElement(ke.B,{tags:q.value,onChange:q.onChange})}})}).setMigrationHandler(V=>{const q={showStarred:V.options.showStarred??V.starred,showRecentlyViewed:V.options.showRecentlyViewed??V.recent,showSearch:V.options.showSearch??V.search,showHeadings:V.options.showHeadings??V.headings,maxItems:V.options.maxItems??V.limit,query:V.options.query??V.query,folderId:V.options.folderId??V.folderId,tags:V.options.tags??V.tags};return parseFloat(V.pluginVersion||"6.1")<6.3&&["starred","recent","search","headings","limit","query","folderId"].forEach(Me=>delete V[Me]),q});class qd extends S.Component{constructor(){super(...arguments),this.subscription=new Qs.w0,this.state={}}componentDidMount(){const{eventBus:q}=this.props;this.subscription.add(q.subscribe(Ea.es,se=>{this.setState({event:se})})),this.subscription.add(q.subscribe(Ea.xH,se=>{this.setState({event:se})})),this.subscription.add(q.subscribe(or.IA,se=>{this.setState({event:se})})),this.subscription.add(q.subscribe(or.oi,se=>{this.setState({event:se})}))}componentWillUnmount(){this.subscription.unsubscribe()}render(){const{event:q}=this.state;if(!q)return S.createElement("div",null,"no events yet");const{type:se,payload:Ee,origin:Me}=q;return S.createElement(et.$,{autoHeightMin:"100%",autoHeightMax:"100%"},S.createElement("h3",null,"Origin: ",Me?.path),S.createElement("span",null,"Type: ",se),Boolean(Ee)&&S.createElement(S.Fragment,null,S.createElement("pre",null,JSON.stringify(Ee.point,null,"  ")),Ee.data&&S.createElement(Ps.H,{data:Ee.data,rowIndex:Ee.rowIndex,columnIndex:Ee.columnIndex})))}}var eu=e(98212);let Ui=100;class tu extends S.PureComponent{constructor(q){super(q),this.history=new eu.d({capacity:40,append:"head"}),this.eventObserver={next:Ee=>{const Me=Ee.origin;this.history.add({key:Ui++,type:Ee.type,path:Me?.path,payload:Ee.payload}),this.setState({counter:Ui})}},this.state={counter:Ui};const se=[];se.push(q.eventBus.getStream(Ea.es).subscribe(this.eventObserver)),se.push(q.eventBus.getStream(Ea.xH).subscribe(this.eventObserver)),se.push(q.eventBus.getStream(Ea.v9).subscribe(this.eventObserver)),this.subs=se}componentWillUnmount(){for(const q of this.subs)q.unsubscribe()}render(){return S.createElement(et.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.history.map((q,se)=>S.createElement("div",{key:q.key},JSON.stringify(q.path)," ",q.type," / X:",JSON.stringify(q.payload.x)," / Y:",JSON.stringify(q.payload.y))))}}class nu extends S.Component{constructor(){super(...arguments),this.lastRender=Date.now(),this.counters={render:0,dataChanged:0,schemaChanged:0},this.resetCounters=()=>{this.counters={render:0,dataChanged:0,schemaChanged:0},this.forceUpdate()}}shouldComponentUpdate(q){const{data:se,options:Ee}=this.props;if(q.data!==se&&(this.counters.dataChanged++,Ee.counters?.schemaChanged)){const Me=q.data?.series,Ue=se.series;Ue&&Me&&((0,ut.nl)(Ue,Me,ut.Ch)||this.counters.schemaChanged++)}return!0}render(){const{data:q,options:se}=this.props,Ee=se.counters??{render:!1,dataChanged:!1,schemaChanged:!1};this.counters.render++;const Me=Date.now(),Ue=Me-this.lastRender;this.lastRender=Me;const Ne=es.TB.get(es.gz.lastNotNull);return S.createElement("div",null,S.createElement("div",null,S.createElement(no.h,{name:"step-backward",title:"reset counters",onClick:this.resetCounters}),S.createElement("span",null,Ee.render&&S.createElement("span",null,"Render: ",this.counters.render,"\xA0"),Ee.dataChanged&&S.createElement("span",null,"Data: ",this.counters.dataChanged,"\xA0"),Ee.schemaChanged&&S.createElement("span",null,"Schema: ",this.counters.schemaChanged,"\xA0"),S.createElement("span",null,"TIME: ",Ue,"ms"))),q.series&&q.series.map((st,lt)=>S.createElement("div",{key:`${lt}/${st.refId}`},S.createElement("h4",null,(0,Ct.n)(st,lt)," (",st.length,")"),S.createElement("table",{className:"filter-table"},S.createElement("thead",null,S.createElement("tr",null,S.createElement("td",null,"Field"),S.createElement("td",null,"Type"),S.createElement("td",null,"Last"))),S.createElement("tbody",null,st.fields.map((vt,gt)=>{const Mt=Ne.reduce(vt,!1,!1)[Ne.id];return S.createElement("tr",{key:`${gt}/${vt.name}`},S.createElement("td",null,(0,Ct.C)(vt,st,q.series)),S.createElement("td",null,vt.type),S.createElement("td",null,`${Mt}`))}))))))}}var Af=e(46967);function au(V){const q=(0,bt.R9)(),se=Ee=>{q.onInstanceStateChange({name:Ee.currentTarget.value})};return S.createElement(S.Fragment,null,S.createElement(ks.g,{label:"State name"},S.createElement(Af.I,{value:q.instanceState?.name??"",onChange:se})))}function vs({value:V,context:q,onChange:se,item:Ee}){return S.createElement("div",null,"Current value: ",q.instanceState?.name," ")}const yn=Object.freeze([0,0]);var Ra=(V=>(V.Cursor="cursor",V.Events="events",V.Render="render",V.State="State",V.ThrowError="ThrowError",V))(Ra||{});class Wl extends S.Component{render(){const{options:q}=this.props;switch(q.mode){case Ra.Events:return S.createElement(tu,{eventBus:this.props.eventBus});case Ra.Cursor:return S.createElement(qd,{eventBus:this.props.eventBus});case Ra.State:return S.createElement(au,{...this.props});case Ra.ThrowError:throw new Error("I failed you and for that i am deeply sorry");default:return S.createElement(nu,{...this.props})}}}const $l=new ce.c(Wl).useFieldConfig().setPanelOptions(V=>{V.addSelect({path:"mode",name:"Mode",defaultValue:Ra.Render,settings:{options:[{label:"Render",value:Ra.Render},{label:"Events",value:Ra.Events},{label:"Cursor",value:Ra.Cursor},{label:"Cursor",value:Ra.Cursor},{label:"Share state",value:Ra.State},{label:"Throw error",value:Ra.ThrowError}]}}).addCustomEditor({id:"stateView",path:"stateView",name:"State view",defaultValue:"",showIf:({mode:q})=>q===Ra.State,editor:vs}).addBooleanSwitch({path:"counters.render",name:"Render Count",defaultValue:!0,showIf:({mode:q})=>q===Ra.Render}).addBooleanSwitch({path:"counters.dataChanged",name:"Data Changed Count",defaultValue:!0,showIf:({mode:q})=>q===Ra.Render}).addBooleanSwitch({path:"counters.schemaChanged",name:"Schema Changed Count",defaultValue:!0,showIf:({mode:q})=>q===Ra.Render}).addDashboardPicker({path:"dashboardUID",name:"Dashboard",settings:{placeholder:"Select dashboard",isClearable:!0}})});var Kl=e(8433);const su=V=>S.createElement(Kl.Z,{data:V.data.series[0],app:fe.zj.Unknown,flameGraphHeight:V.height}),ru=new ce.c(su);var ou=e(7149),Jo=e(67487);const _o=(V,q)=>{const se="linear-gradient(to right, #5182CC 0%, #245BAF 100%)",Ee=q?se:"linear-gradient(to right, #f05a28 0%, #fbca0a 100%)",Me=q?se:"linear-gradient(to right, #FBCA0A 0%, #F05A28 100%)",Ue=V.isDark?Ee:Me;return`
      background-color: ${V.colors.background.secondary};
      margin-right: ${V.spacing(4)};
      border: 1px solid ${V.colors.border.weak};
      border-bottom-left-radius: ${V.shape.borderRadius(2)};
      border-bottom-right-radius: ${V.shape.borderRadius(2)};
      position: relative;
      max-height: 230px;

      ${V.breakpoints.down("xxl")} {
        margin-right: ${V.spacing(2)};
      }
      &::before {
        display: block;
        content: ' ';
        position: absolute;
        left: 0;
        right: 0;
        height: 2px;
        top: 0;
        background-image: ${Ue};
      }
`},Vl=(V,q)=>b.css`
  color: ${q?V.v1.palette.blue95:V.colors.text.secondary};

  ${V.breakpoints.down("sm")} {
    display: none;
  }
`,zl=b.css`
  padding: 16px;
`,Gr=({card:V})=>{const q=(0,ft.wW)((0,S.useCallback)(Ee=>Xo(Ee,V.done),[V.done])),se=(0,ft.wW)((0,S.useCallback)(Ee=>Vl(Ee,V.done),[V.done]));return S.createElement("div",{className:q.card},S.createElement("div",{className:zl},S.createElement("a",{href:`${V.href}?utm_source=grafana_gettingstarted`,className:q.url},S.createElement("div",{className:q.heading},V.done?"complete":V.heading),S.createElement("h4",{className:q.title},V.title),S.createElement("div",null,S.createElement(Xt.J,{className:se,name:V.icon,size:"xxl"})))),S.createElement("a",{href:`${V.learnHref}?utm_source=grafana_gettingstarted`,className:q.learnUrl,target:"_blank",rel:"noreferrer"},"Learn how in the docs ",S.createElement(Xt.J,{name:"external-link-alt"})))},Xo=(V,q)=>({card:b.css`
      ${_o(V,q)}

      min-width: 230px;

      ${V.breakpoints.down("md")} {
        min-width: 192px;
      }
    `,heading:b.css`
      text-transform: uppercase;
      color: ${q?V.v1.palette.blue95:"#FFB357"};
      margin-bottom: ${V.spacing(2)};
    `,title:b.css`
      margin-bottom: ${V.spacing(2)};
    `,url:b.css`
      display: inline-block;
    `,learnUrl:b.css`
      border-top: 1px solid ${V.colors.border.weak};
      position: absolute;
      bottom: 0;
      padding: 8px 16px;
      width: 100%;
    `});var Ur=e(58379);const iu=({card:V})=>{const q=(0,ft.wW)((0,S.useCallback)(Ee=>lu(Ee,V.done),[V.done])),se=(0,ft.wW)((0,S.useCallback)(Ee=>Vl(Ee,V.done),[V.done]));return S.createElement("a",{className:q.card,target:"_blank",rel:"noreferrer",href:`${V.href}?utm_source=grafana_gettingstarted`,onClick:Ee=>Lf(Ee,V)},S.createElement("div",{className:zl},S.createElement("div",{className:q.type},V.type),S.createElement("div",{className:q.heading},V.done?"complete":V.heading),S.createElement("h4",{className:q.cardTitle},V.title),S.createElement("div",{className:q.info},V.info),S.createElement(Xt.J,{className:se,name:V.icon,size:"xxl"})))},Lf=(V,q)=>{V.preventDefault(),Ur.Z.get(q.key)||Ur.Z.set(q.key,!0)},lu=(V,q)=>({card:b.css`
      ${_o(V,q)}
      width: 460px;
      min-width: 460px;

      ${V.breakpoints.down("xl")} {
        min-width: 368px;
      }

      ${V.breakpoints.down("lg")} {
        min-width: 272px;
      }
    `,type:b.css`
      color: ${V.colors.primary.text};
      text-transform: uppercase;
    `,heading:b.css`
      text-transform: uppercase;
      color: ${V.colors.primary.text};
      margin-bottom: ${V.spacing(1)};
    `,cardTitle:b.css`
      margin-bottom: ${V.spacing(2)};
    `,info:b.css`
      margin-bottom: ${V.spacing(2)};
    `,status:b.css`
      display: flex;
      justify-content: flex-end;
    `}),qo=({step:V})=>{const q=(0,ft.wW)(cu);return S.createElement("div",{className:q.setup},S.createElement("div",{className:q.info},S.createElement("h2",{className:q.title},V.title),S.createElement("p",null,V.info)),S.createElement("div",{className:q.cards},V.cards.map((se,Ee)=>{const Me=`${se.title}-${Ee}`;return se.type==="tutorial"?S.createElement(iu,{key:Me,card:se}):S.createElement(Gr,{key:Me,card:se})})))},cu=V=>({setup:b.css`
      display: flex;
      width: 95%;
    `,info:b.css`
      width: 172px;
      margin-right: 5%;

      ${V.breakpoints.down("xxl")} {
        margin-right: ${V.spacing(4)};
      }
      ${V.breakpoints.down("sm")} {
        display: none;
      }
    `,title:b.css`
      color: ${V.v1.palette.blue95};
    `,cards:b.css`
      overflow-x: scroll;
      overflow-y: hidden;
      width: 100%;
      display: flex;
      justify-content: center;

      ${V.breakpoints.down("xxl")} {
        justify-content: flex-start;
      }
    `});var Fi=e(91162);const Hl="Grafana fundamentals",Wi="Create users and teams",$i="getting.started.",kl=`${$i}${Hl.replace(" ","-").trim().toLowerCase()}`,uo=`${$i}${Wi.replace(" ","-").trim().toLowerCase()}`,du=()=>[{heading:"Welcome to Grafana",subheading:"The steps below will guide you to quickly finish setting up your Grafana installation.",title:"Basic",info:"The steps below will guide you to quickly finish setting up your Grafana installation.",done:!1,cards:[{type:"tutorial",heading:"Data source and dashboards",title:Hl,info:"Set up and understand Grafana if you have no prior experience. This tutorial guides you through the entire process and covers the \u201CData source\u201D and \u201CDashboards\u201D steps to the right.",href:"https://grafana.com/tutorials/grafana-fundamentals",icon:"grafana",check:()=>Promise.resolve(Ur.Z.get(kl)),key:kl,done:!1},{type:"docs",title:"Add your first data source",heading:"data sources",icon:"database",learnHref:"https://grafana.com/docs/grafana/latest/features/datasources/add-a-data-source",href:"datasources/new",check:()=>new Promise(V=>{V((0,Fi.ak)().getMetricSources().filter(q=>q.meta.builtIn!==!0).length>0)}),done:!1},{type:"docs",heading:"dashboards",title:"Create your first dashboard",icon:"apps",href:"dashboard/new",learnHref:"https://grafana.com/docs/grafana/latest/guides/getting_started/#create-a-dashboard",check:async()=>(await(0,Ve.i)().search({limit:1})).length>0,done:!1}]},{heading:"Setup complete!",subheading:"All necessary steps to use Grafana are done. Now tackle advanced steps or make the best use of this home dashboard \u2013 it is, after all, a fully customizable dashboard \u2013 and remove this panel.",title:"Advanced",info:" Manage your users and teams and add plugins. These steps are optional",done:!1,cards:[{type:"tutorial",heading:"Users",title:"Create users and teams",info:"Learn to organize your users in teams and manage resource access and roles.",href:"https://grafana.com/tutorials/create-users-and-teams",icon:"users-alt",key:uo,check:()=>Promise.resolve(Ur.Z.get(uo)),done:!1},{type:"docs",heading:"plugins",title:"Find and install plugins",learnHref:"https://grafana.com/docs/grafana/latest/plugins/installation",href:"plugins",icon:"plug",check:async()=>{const V=await(0,Ve.i)().get("/api/plugins",{embedded:0,core:0});return Promise.resolve(V.length>0)},done:!1}]}];class uu extends S.PureComponent{constructor(){super(...arguments),this.state={checksDone:!1,currentStep:0,steps:du()},this.onForwardClick=()=>{this.setState(q=>({currentStep:q.currentStep+1}))},this.onPreviousClick=()=>{this.setState(q=>({currentStep:q.currentStep-1}))},this.dismiss=()=>{const{id:q}=this.props,se=(0,on.h4)().getCurrent(),Ee=se?.getPanelById(q);se?.removePanel(Ee),Ve.ae.put("/api/user/helpflags/1",void 0,{showSuccessAlert:!1}).then(Me=>{ve.Vt.user.helpFlags1=Me.helpFlags1})}}async componentDidMount(){const{steps:q}=this.state,se=q.map(async Me=>{const Ue=Me.cards.map(async st=>st.check().then(lt=>({...st,done:lt}))),Ne=await Promise.all(Ue);return{...Me,done:Ne.every(st=>st.done),cards:Ne}}),Ee=await Promise.all(se);this.setState({currentStep:Ee[0].done?1:0,steps:Ee,checksDone:!0})}render(){const{checksDone:q,currentStep:se,steps:Ee}=this.state,Me=Gl(),Ue=Ee[se];return S.createElement("div",{className:Me.container},q?S.createElement(S.Fragment,null,S.createElement(Re.zx,{variant:"secondary",fill:"text",className:Me.dismiss,onClick:this.dismiss},"Remove this panel"),se===Ee.length-1&&S.createElement(Re.zx,{className:(0,b.cx)(Me.backForwardButtons,Me.previous),onClick:this.onPreviousClick,"aria-label":"To advanced tutorials",icon:"angle-left",variant:"secondary"}),S.createElement("div",{className:Me.content},S.createElement(qo,{step:Ue})),se<Ee.length-1&&S.createElement(Re.zx,{className:(0,b.cx)(Me.backForwardButtons,Me.forward),onClick:this.onForwardClick,"aria-label":"To basic tutorials",icon:"angle-right",variant:"secondary"})):S.createElement("div",{className:Me.loading},S.createElement("div",{className:Me.loadingText},"Checking completed setup steps"),S.createElement(Jo.$,{size:24,inline:!0})))}}const Gl=(0,Bs.B)(()=>{const V=Ae.v.theme2;return{container:b.css`
      display: flex;
      flex-direction: column;
      height: 100%;
      // background: url(public/img/getting_started_bg_${V.colors.mode}.svg) no-repeat;
      background-size: cover;
      padding: ${V.spacing(4)} ${V.spacing(2)} 0;
    `,content:b.css`
      label: content;
      display: flex;
      justify-content: center;

      ${V.breakpoints.down("xxl")} {
        margin-left: ${V.spacing(3)};
        justify-content: flex-start;
      }
    `,header:b.css`
      label: header;
      margin-bottom: ${V.spacing(3)};
      display: flex;
      flex-direction: column;

      ${V.breakpoints.down("lg")} {
        flex-direction: row;
      }
    `,headerLogo:b.css`
      height: 58px;
      padding-right: ${V.spacing(2)};
      display: none;

      ${V.breakpoints.up("md")} {
        display: block;
      }
    `,heading:b.css`
      label: heading;
      margin-right: ${V.spacing(3)};
      margin-bottom: ${V.spacing(3)};
      flex-grow: 1;
      display: flex;

      ${V.breakpoints.up("md")} {
        margin-bottom: 0;
      }
    `,backForwardButtons:b.css`
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `,previous:b.css`
      left: 10px;

      ${V.breakpoints.down("md")} {
        left: 0;
      }
    `,forward:b.css`
      right: 10px;

      ${V.breakpoints.down("md")} {
        right: 0;
      }
    `,dismiss:b.css`
      align-self: flex-end;
      text-decoration: underline;
      margin-bottom: ${V.spacing(1)};
    `,loading:b.css`
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    `,loadingText:b.css`
      margin-right: ${V.spacing(1)};
    `}}),$a=new ce.c(uu).setNoPadding();var _s=e(15128),Ki=e(3200);const Bf=Object.freeze([0,0]),Vi={bucketOffset:0},Yl={fillOpacity:80,gradientMode:xe.FI.None,lineWidth:1};function mu(V,q){return Math.floor(V/q)*q}function fu(V,q){return Math.ceil(V/q)*q}function jl(V){return V.fields[1].values.get(0)-V.fields[0].values.get(0)}const zi=(V,q)=>{let se=new ss.U,Ee=jl(V),Me=(Mt,Lt,It,Yt,Zt,rn)=>{let Nt=Mt.axes[Lt]._space,kt=Mt.valToPos(Mt.data[0][0]+Ee,"x")-Mt.valToPos(Mt.data[0][0],"x"),Ut=Mt.data[0][0],_t=Mt.data[0][Mt.data[0].length-1]+Ee,Mn=[],an=Math.ceil(Nt/kt);for(let An=0,On=Ut;On<=_t;An++,On+=Ee)!(An%an)&&Mn.push(On);return Mn};se.addScale({scaleKey:"x",isTime:!1,distribution:xe.wf.Linear,orientation:xe.wN.Horizontal,direction:xe.bQ.Right,range:(Mt,Lt,It)=>{let Yt=Mt.data[0][0],Zt=Mt.data[0][Mt.data[0].length-1];return It===Zt?It+=Ee:It=fu(It,Ee),Lt>Yt&&(Lt=mu(Lt,Ee)),[Lt,It]}}),se.addScale({scaleKey:"y",isTime:!1,distribution:xe.wf.Linear,orientation:xe.wN.Vertical,direction:xe.bQ.Up});const Ue=V.fields[0].display,Ne=Mt=>(0,Wa.zc)(Ue(Mt));se.addAxis({scaleKey:"x",isTime:!1,placement:xe.LB.Bottom,incrs:_s.Zi,splits:Me,values:(Mt,Lt)=>{const It=Lt.map(Ne),Yt=It.reduce((kt,Ut)=>Math.max((0,Ht.X1)(Ut,en.gD).width,kt),0),Zt=10,rn=Mt.bbox.width/((Yt+Zt)*devicePixelRatio),Nt=Math.ceil(It.length/rn);return It.map((kt,Ut)=>Ut%Nt===0?kt:null)},theme:q});let lt=V.fields[2].display;se.addAxis({scaleKey:"y",isTime:!1,placement:xe.LB.Left,formatValue:(Mt,Lt)=>(0,Wa.zc)(lt(Mt,Lt)),theme:q}),se.setCursor({points:{show:!1},drag:{x:!0,y:!1,setScale:!0}});let vt=Na.Z.paths.bars({align:1,size:[1,1/0]}),gt=0;for(let Mt=2;Mt<V.fields.length;Mt++){const Lt=V.fields[Mt];Lt.state=Lt.state??{},Lt.state.seriesIndex=gt++;const It={...Yl,...Lt.config.custom},Yt="y",Zt=(0,hs.fD)(Lt),Nt=(0,hs.YO)(Lt,q).color;se.addSeries({scaleKey:Yt,lineWidth:It.lineWidth,lineColor:Nt,fillOpacity:It.fillOpacity,theme:q,colorMode:Zt,pathBuilder:vt,show:!It.hideFrom?.viz,gradientMode:It.gradientMode,thresholds:Lt.config.thresholds,hardMin:Lt.config.min,hardMax:Lt.config.max,softMin:It.axisSoftMin,softMax:It.axisSoftMax,dataFrameFieldIndex:Lt.state.origin})}return se},gu=V=>{let q=[];for(const se of V.fields)se.name!==_s.cO&&q.push(se.values.toArray());for(let se=1;se<q.length;se++){let Ee=q[se];for(let Me=0;Me<Ee.length;Me++)Ee[Me]===0&&(Ee[Me]=null)}return q};class pu extends S.Component{constructor(q){super(q),this.state=this.prepState(q)}prepState(q,se=!0){let Ee=null;const{alignedFrame:Me}=q;return Me&&(Ee={alignedData:gu(Me)},se&&(Ee.config=zi(Me,this.props.theme))),Ee}renderLegend(q){const{legend:se}=this.props;return!q||se.showLegend===!1?null:S.createElement(xn.l,{data:this.props.rawSeries,config:q,maxHeight:"35%",maxWidth:"60%",...se})}componentDidUpdate(q){const{structureRev:se,alignedFrame:Ee,bucketSize:Me}=this.props;if(Ee!==q.alignedFrame){let Ue=this.prepState(this.props,!1);Ue&&(Me!==q.bucketSize||this.props.options!==q.options||this.state.config===void 0||se!==q.structureRev||!se)&&(Ue.config=zi(Ee,this.props.theme)),Ue&&this.setState(Ue)}}render(){const{width:q,height:se,children:Ee,alignedFrame:Me}=this.props,{config:Ue}=this.state;return Ue?S.createElement(ln.AY,{width:q,height:se,legend:this.renderLegend(Ue)},(Ne,st)=>S.createElement(Ki.N,{config:this.state.config,data:this.state.alignedData,width:Ne,height:st,timeRange:null},Ee?Ee(Ue,Me):null)):null}}const ei=({data:V,options:q,width:se,height:Ee})=>{const Me=(0,ft.l4)(),Ue=(0,S.useMemo)(()=>{if(!V?.series?.length)return;if(V.series.forEach((lt,vt)=>{lt.fields.forEach((gt,Mt)=>{gt.state={...gt.state,origin:{frameIndex:vt,fieldIndex:Mt}}})}),V.series.length===1){const lt=(0,_s.qr)(V.series[0]);if(lt)return(0,_s.zM)(lt)}const st=(0,_s.gY)(V.series,q);if(st)return(0,_s.zM)(st,Me)},[V.series,q,Me]);if(!Ue||!Ue.fields.length)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No histogram found in response"));const Ne=jl(Ue);return S.createElement(pu,{options:q,theme:Me,legend:q.legend,rawSeries:V.series,structureRev:V.structureRev,width:se,height:Ee,alignedFrame:Ue,bucketSize:Ne},(st,lt)=>null)};function ro(V){if(V?.length!==1)return!1;const q=V[0];if(q.fields.length<3||!(0,_s.Ok)(q.fields[0].name)||!(0,_s.kl)(q.fields[1].name))return!1;for(const se of q.fields)if(se.type!==we.fS.number)return!1;return!0}const So=new ce.c(ei).setPanelOptions(V=>{V.addCustomEditor({id:"__calc__",path:"__calc__",name:"Values",description:"Showing frequencies that are calculated in the query",editor:()=>null,showIf:(q,se)=>ro(se)}).addNumberInput({path:"bucketSize",name:_s.py.bucketSize.name,description:_s.py.bucketSize.description,settings:{placeholder:"Auto",min:0},defaultValue:Vi.bucketSize,showIf:(q,se)=>!ro(se)}).addNumberInput({path:"bucketOffset",name:_s.py.bucketOffset.name,description:_s.py.bucketOffset.description,settings:{placeholder:"0",min:0},defaultValue:Vi.bucketOffset,showIf:(q,se)=>!ro(se)}).addBooleanSwitch({path:"combine",name:_s.py.combine.name,description:_s.py.combine.description,defaultValue:Vi.combine,showIf:(q,se)=>!ro(se)}),fn.J(V)}).useFieldConfig({standardOptions:{[Za.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Ze.S.PaletteClassic}}},useCustomConfig:V=>{const q=Yl;V.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:q.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:q.fillOpacity,settings:{min:0,max:100,step:1}}).addRadio({path:"gradientMode",name:"Gradient mode",defaultValue:yt.q.fillGradient[0].value,settings:{options:yt.q.fillGradient}}),Bt.B(V)}});var cs=e(62626),ti=e(64353);const Ql=[{label:"Grafana",value:cs.z.Grafana,description:"Core grafana live features"},{label:"Data Sources",value:cs.z.DataSource,description:"Data sources with live support"},{label:"Plugins",value:cs.z.Plugin,description:"Plugins with live support"}];class ni extends S.PureComponent{constructor(){super(...arguments),this.state={namespaces:[],paths:[]},this.onScopeChanged=q=>{q.value&&this.props.onChange({scope:q.value,namespace:void 0,path:void 0})},this.onNamespaceChanged=q=>{const se={scope:this.props.value?.scope,path:void 0};q.value&&(se.namespace=q.value),this.props.onChange(se)},this.onPathChanged=q=>{const{value:se,onChange:Ee}=this.props,Me={scope:se.scope,namespace:se.namespace};q.value&&(Me.path=q.value),Ee(Me)}}async componentDidMount(){this.updateSelectOptions()}async componentDidUpdate(q){this.props.value!==q.value&&this.updateSelectOptions()}async updateSelectOptions(){this.setState({namespaces:[],paths:[]})}render(){const{namespaces:q,paths:se}=this.state,{scope:Ee,namespace:Me,path:Ue}=this.props.value,Ne=Zl(_.vc.theme2);return S.createElement(S.Fragment,null,S.createElement(ea.b,{title:"Grafana Live",severity:"info"},"This supports real-time event streams in grafana core. This feature is under heavy development. Expect the intefaces and structures to change as this becomes more production ready."),S.createElement("div",null,S.createElement("div",{className:Ne.dropWrap},S.createElement(ti._,null,"Scope"),S.createElement(Ke.Ph,{options:Ql,value:Ql.find(st=>st.value===Ee),onChange:this.onScopeChanged})),Ee&&S.createElement("div",{className:Ne.dropWrap},S.createElement(ti._,null,"Namespace"),S.createElement(Ke.Ph,{options:q,value:q.find(st=>st.value===Me)??(Me?{label:Me,value:Me}:void 0),onChange:this.onNamespaceChanged,allowCustomValue:!0,backspaceRemovesValue:!0})),Ee&&Me&&S.createElement("div",{className:Ne.dropWrap},S.createElement(ti._,null,"Path"),S.createElement(Ke.Ph,{options:se,value:hu(se,Ue),onChange:this.onPathChanged,allowCustomValue:!0,backspaceRemovesValue:!0}))))}}function hu(V,q){const se=V.find(Ee=>Ee.value===q);if(se)return se;if(q)return{label:q,value:q}}const Zl=(0,Bs.B)(V=>({dropWrap:b.css`
    margin-bottom: ${V.spacing(1)};
  `}));var Jl=e(49922),Hi=e(75118),vu=e(16065),ki=e(9405),Gi=e(28625),Yr=e(85854),Eu=e(88144);function _l(V){const{data:q,height:se,width:Ee,options:Me,fieldConfig:Ue,id:Ne}=V,st=(0,ft.l4)(),lt=(0,bt.R9)(),vt=q.series,gt=vt.filter(_t=>_t.meta?.custom?.parentRowIndex===void 0),Mt=vt.filter(_t=>_t.meta?.custom?.parentRowIndex!==void 0),Lt=gt?.length,It=gt[0]?.fields.length,Yt=Yi(gt,Me),Zt=gt[Yt];let rn=se,Nt=Mt;if(!Lt||!It)return S.createElement(Tt.Z,{panelId:Ne,fieldConfig:Ue,data:q});if(Lt>1){const _t=st.spacing.gridSize*st.components.height.md,Mn=st.spacing.gridSize;rn=se-_t-Mn,Nt=Mt.filter(an=>an.refId===Zt.refId)}const kt=S.createElement(Eu.i,{height:rn,width:Ee,data:Zt,noHeader:!Me.showHeader,showTypeIcons:Me.showTypeIcons,resizable:!0,initialSortBy:Me.sortBy,onSortByChange:_t=>Pu(_t,V),onColumnResize:(_t,Mn)=>yu(_t,Mn,V),onCellFilterAdded:lt.onAddAdHocFilter,footerOptions:Me.footer,enablePagination:Me.footer?.enablePagination,subData:Nt,cellHeight:Me.cellHeight});if(Lt===1)return kt;const Ut=gt.map((_t,Mn)=>({label:(0,Ct.n)(_t),value:Mn}));return S.createElement("div",{className:ql.wrapper},kt,S.createElement("div",{className:ql.selectWrapper},S.createElement(Ke.Ph,{options:Ut,value:Ut[Yt],onChange:_t=>Xl(_t,V)})))}function Yi(V,q){return q.frameIndex>0&&q.frameIndex<V.length?q.frameIndex:0}function yu(V,q,se){const{fieldConfig:Ee}=se,{overrides:Me}=Ee,Ue=Yr.mi.byName,Ne="custom.width",st=Me.find(lt=>lt.matcher.id===Ue&&lt.matcher.options===V);if(st){const lt=st.properties.find(vt=>vt.id===Ne);lt?lt.value=q:st.properties.push({id:Ne,value:q})}else Me.push({matcher:{id:Ue,options:V},properties:[{id:Ne,value:q}]});se.onFieldConfigChange({...Ee,overrides:Me})}function Pu(V,q){q.onOptionsChange({...q.options,sortBy:V})}function Xl(V,q){q.onOptionsChange({...q.options,frameIndex:V.value||0})}const ql={wrapper:b.css`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 100%;
  `,selectWrapper:b.css`
    padding: 8px 8px 0px 8px;
  `};var Ar=(V=>(V.Raw="raw",V.JSON="json",V.Auto="auto",V.None="none",V))(Ar||{});class Cu extends S.PureComponent{constructor(q){super(q),this.styles=xu(Ae.v.theme2),this.streamObserver={next:se=>{(0,cs.se)(se)?this.setState({status:se,changed:Date.now()}):(0,cs.RL)(se)?this.setState({message:se.message,changed:Date.now()}):console.log("ignore",se)}},this.unsubscribe=()=>{this.subscription&&(this.subscription.unsubscribe(),this.subscription=void 0)},this.onSaveJSON=se=>{const{options:Ee,onOptionsChange:Me}=this.props;try{const Ue=JSON.parse(se);Me({...Ee,json:Ue})}catch(Ue){console.log("Error reading JSON",Ue)}},this.onPublishClicked=async()=>{const{addr:se}=this.state;if(!se){console.log("invalid address");return}const Ee=this.props.options?.json;if(!Ee){console.log("nothing to publish");return}const Me=await(0,Hi.gj)().publish(se,Ee);console.log("onPublishClicked (response from publish)",Me)},this.isValid=!!(0,Hi.gj)(),this.state={changed:0}}async componentDidMount(){this.loadChannel()}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}componentDidUpdate(q){this.props.options?.channel!==q.options?.channel&&this.loadChannel()}async loadChannel(){const q=this.props.options?.channel;if(!(0,cs.nU)(q)){console.log("INVALID",q),this.unsubscribe(),this.setState({addr:void 0});return}if((0,I.isEqual)(q,this.state.addr)){console.log("Same channel",this.state.addr);return}const se=(0,Hi.gj)();if(!se){console.log("INVALID",q),this.unsubscribe(),this.setState({addr:void 0});return}this.unsubscribe(),console.log("LOAD",q);try{this.subscription=se.getStream(q).subscribe(this.streamObserver),this.setState({addr:q,error:void 0})}catch(Ee){this.setState({addr:void 0,error:Ee})}}renderNotEnabled(){const q=`[feature_toggles]
    enable = live`;return S.createElement(ea.b,{title:"Grafana Live",severity:"info"},S.createElement("p",null,"Grafana live requires a feature flag to run"),S.createElement("b",null,"custom.ini:"),S.createElement("pre",null,q))}renderMessage(q){const{options:se}=this.props,{message:Ee}=this.state;if(!Ee)return S.createElement("div",null,S.createElement("h4",null,"Waiting for data:"),se.channel?.scope,"/",se.channel?.namespace,"/",se.channel?.path);if(se.message===Ar.JSON)return S.createElement(vu.g,{json:Ee,open:5});if(se.message===Ar.Auto&&Ee instanceof Gi.Av){const Me={series:(0,bi.SM)({data:[Ee],theme:Ae.v.theme2,replaceVariables:Ne=>Ne,fieldConfig:{defaults:{},overrides:[]}}),state:Jl.Gu.Streaming},Ue={...this.props,options:{frameIndex:0,showHeader:!0}};return S.createElement(_l,{...Ue,data:Me,height:q})}return S.createElement("pre",null,JSON.stringify(Ee))}renderPublish(q){const{options:se}=this.props;return S.createElement(S.Fragment,null,S.createElement(ki.p,{height:q-32,language:"json",value:se.json?JSON.stringify(se.json,null,2):"{ }",onBlur:this.onSaveJSON,onSave:this.onSaveJSON,showMiniMap:!1,showLineNumbers:!0}),S.createElement("div",{style:{height:32}},S.createElement(Re.zx,{onClick:this.onPublishClicked},"Publish")))}renderStatus(){const{status:q}=this.state;if(q?.state===cs.yS.Connected)return;let se="";return q&&(se=this.styles.status[q.state]),S.createElement("div",{className:(0,b.cx)(se,this.styles.statusWrap)},q?.state)}renderBody(){const{status:q}=this.state,{options:se,height:Ee}=this.props;if(se.publish){if(se.message===Ar.None)return S.createElement("div",null,this.renderPublish(Ee));const Me=Ee/2;return S.createElement("div",null,S.createElement("div",{style:{height:Me,overflow:"hidden"}},S.createElement(et.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Me))),S.createElement("div",null,this.renderPublish(Me)))}return se.message===Ar.None?S.createElement("pre",null,JSON.stringify(q)):S.createElement("div",{style:{overflow:"hidden",height:Ee}},S.createElement(et.$,{autoHeightMin:"100%",autoHeightMax:"100%"},this.renderMessage(Ee)))}render(){if(!this.isValid)return this.renderNotEnabled();const{addr:q,error:se}=this.state;return q?se?S.createElement("div",null,S.createElement("h2",null,"ERROR"),S.createElement("div",null,JSON.stringify(se))):S.createElement(S.Fragment,null,this.renderStatus(),this.renderBody()):S.createElement(ea.b,{title:"Grafana Live",severity:"info"},"Use the panel editor to pick a channel")}}const xu=(0,Bs.B)(V=>({statusWrap:b.css`
    margin: auto;
    position: absolute;
    top: 0;
    right: 0;
    background: ${V.components.panel.background};
    padding: 10px;
    z-index: ${V.zIndex.modal};
  `,status:{[cs.yS.Pending]:b.css`
      border: 1px solid ${V.v1.palette.orange};
    `,[cs.yS.Connected]:b.css`
      border: 1px solid ${V.colors.success.main};
    `,[cs.yS.Connecting]:b.css`
      border: 1px solid ${V.v1.palette.brandWarning};
    `,[cs.yS.Disconnected]:b.css`
      border: 1px solid ${V.colors.warning.main};
    `,[cs.yS.Shutdown]:b.css`
      border: 1px solid ${V.colors.error.main};
    `,[cs.yS.Invalid]:b.css`
      border: 1px solid red;
    `}})),Du=new ce.c(Cu).setPanelOptions(V=>{V.addCustomEditor({category:["Channel"],id:"channel",path:"channel",name:"Channel",editor:ni,defaultValue:{}}),V.addRadio({path:"message",name:"Show Message",description:"Display the last message received on this channel",settings:{options:[{value:Ar.Raw,label:"Raw Text"},{value:Ar.JSON,label:"JSON"},{value:Ar.Auto,label:"Auto"},{value:Ar.None,label:"None"}]},defaultValue:Ar.JSON}).addBooleanSwitch({path:"publish",name:"Show Publish",description:"Display a form to publish values",defaultValue:!1})});var ns=e(90595),ji=e(37959),Qi=e(51927),ec=e(54972),tc=e(28947);const nc=({data:V,timeZone:q,fieldConfig:se,options:{showLabels:Ee,showTime:Me,wrapLogMessage:Ue,showCommonLabels:Ne,prettifyLogMessage:st,sortOrder:lt,dedupStrategy:vt,enableLogDetails:gt},title:Mt,id:Lt})=>{const It=lt===xe.UV.Ascending,Yt=(0,ft.wW)(bu(Mt,It)),[Zt,rn]=(0,S.useState)(0),Nt=(0,S.useRef)(null),{eventBus:kt}=(0,bt.R9)(),Ut=(0,S.useCallback)(Un=>{Un?kt.publish(new Ea.es({point:{time:Un.timeEpochMs}})):kt.publish(new Ea.xH)},[kt]),[_t,Mn,an]=(0,S.useMemo)(()=>{const Un=V?(0,ji.aB)(V.series,V.request?.intervalMs,void 0,V.request?.targets):null,Vn=Un?.rows||[],Kn=Un?.meta?.find(wa=>wa.label===ji.Qp),Jn=(0,ji.UW)(Vn,vt);return[Vn,Jn,Kn]},[V,vt]);(0,S.useLayoutEffect)(()=>{It&&Nt.current?rn(Nt.current.offsetHeight):rn(0)},[It,_t]);const An=(0,S.useCallback)((Un,Vn)=>(0,Eo.a_)({field:Un,rowIndex:Vn,range:V.timeRange}),[V]);if(!V||_t.length===0)return S.createElement(Qi.Z,{fieldConfig:se,panelId:Lt,data:V,needsStringField:!0});const On=()=>S.createElement("div",{className:Yt.labelContainer},S.createElement("span",{className:Yt.label},"Common labels:"),S.createElement(ec.j,{labels:an?an.value:{labels:"(no common labels)"}}));return S.createElement(et.$,{autoHide:!0,scrollTop:Zt},S.createElement("div",{className:Yt.container,ref:Nt},Ne&&!It&&On(),S.createElement(tc.w,{logRows:_t,deduplicatedRows:Mn,dedupStrategy:vt,showLabels:Ee,showTime:Me,wrapLogMessage:Ue,prettifyLogMessage:st,timeZone:q,getFieldLinks:An,logsSortOrder:lt,enableLogDetails:gt,previewLimit:It?_t.length:void 0,onLogRowHover:Ut,app:fe.zj.Dashboard}),Ne&&It&&On()))},bu=(V,q)=>se=>({container:b.css`
    margin-bottom: ${se.spacing(1.5)};
    //We can remove this hot-fix when we fix panel menu with no title overflowing top of all panels
    margin-top: ${se.spacing(V?0:2.5)};
  `,labelContainer:b.css`
    margin: ${q?se.spacing(.5,0,.5,0):se.spacing(0,0,.5,.5)};
    display: flex;
    align-items: center;
  `,label:b.css`
    margin-right: ${se.spacing(.5)};
    font-size: ${se.typography.bodySmall.fontSize};
    font-weight: ${se.typography.fontWeightMedium};
  `});class Mu{getSuggestionsForData(q){const se=q.getListAppender({name:"",pluginId:"logs",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}),{dataSummary:Ee}=q;!Ee.hasData||!Ee.hasTimeField||!Ee.hasStringField||(Ee.preferredVisualisationType==="logs"?se.append({name:Ca.y.Logs,score:Be._.Best}):se.append({name:Ca.y.Logs}))}}const Su=new ce.c(nc).setPanelOptions(V=>{V.addBooleanSwitch({path:"showTime",name:"Time",description:"",defaultValue:!1}).addBooleanSwitch({path:"showLabels",name:"Unique labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"showCommonLabels",name:"Common labels",description:"",defaultValue:!1}).addBooleanSwitch({path:"wrapLogMessage",name:"Wrap lines",description:"",defaultValue:!1}).addBooleanSwitch({path:"prettifyLogMessage",name:"Prettify JSON",description:"",defaultValue:!1}).addBooleanSwitch({path:"enableLogDetails",name:"Enable log details",description:"",defaultValue:!0}).addRadio({path:"dedupStrategy",name:"Deduplication",description:"",settings:{options:[{value:xe.Y4.none,label:"None",description:ns.Uv[xe.Y4.none]},{value:xe.Y4.exact,label:"Exact",description:ns.Uv[xe.Y4.exact]},{value:xe.Y4.numbers,label:"Numbers",description:ns.Uv[xe.Y4.numbers]},{value:xe.Y4.signature,label:"Signature",description:ns.Uv[xe.Y4.signature]}]},defaultValue:xe.Y4.none}).addRadio({path:"sortOrder",name:"Order",description:"",settings:{options:[{value:xe.UV.Descending,label:"Newest first"},{value:xe.UV.Ascending,label:"Oldest first"}]},defaultValue:xe.UV.Descending})}).setSuggestionsSupplier(new Mu);var ac=e(53764),ai=e(6981),Ou=e(13724);function Tu(V){const{width:q,options:{feedUrl:se=ai.k,showImage:Ee}}=V,{state:Me,getNews:Ue}=(0,Ou.j)(se);return(0,S.useEffect)(()=>{const Ne=V.eventBus.subscribe(ga.U5,Ue);return()=>{Ne.unsubscribe()}},[Ue,V.eventBus]),(0,S.useEffect)(()=>{Ue()},[Ue]),Me.error?S.createElement("div",null,"Error loading RSS feed."):Me.loading?S.createElement("div",null,"Loading..."):Me.value?S.createElement(et.$,{autoHeightMin:"100%",autoHeightMax:"100%"},Me.value.map((Ne,st)=>S.createElement(ac.S,{key:st,index:st,width:q,showImage:Ee,data:Me.value}))):null}const wf=Object.freeze([0,0]),sc={showImage:!0},rc=new ce.c(Tu).setPanelOptions(V=>{V.addTextInput({path:"feedUrl",name:"URL",description:"Supports RSS and Atom feeds",settings:{placeholder:ai.k},defaultValue:sc.feedUrl}).addBooleanSwitch({path:"showImage",name:"Show image",description:"Controls if the news item social (og:image) image is shown above text content",defaultValue:sc.showImage})});var Iu=e(58635),oc=e(74538),Ru=e(68545);const ar=({width:V,height:q,data:se,options:Ee})=>{const Me=(0,Eo.u8)(se.timeRange);if(!se||!se.series.length)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No data found in response"));const Ue=(0,Iu.Z)(Ru.Ee);return S.createElement("div",{style:{width:V,height:q}},S.createElement(oc.E,{dataFrames:Ue(se.series,Ee),getLinks:Me}))};var Fs=e(90208),Zi=e(15448);const Au=({value:V,onChange:q,context:se})=>{const Ee=(0,ft.wW)(Oo),Me=()=>{const st={field:"",color:""};q(V?[...V,st]:[st])},Ue=st=>{const lt=V?.slice();lt.splice(st,1),q(lt)},Ne=(st,lt,vt)=>{let gt=V?.slice()??[];gt[st][lt]=vt,q(gt)};return S.createElement(S.Fragment,null,V?.map((st,lt)=>S.createElement("div",{className:Ee.section,key:lt},S.createElement(Zi.b,{context:se,value:st.field??"",onChange:vt=>{Ne(lt,"field",vt)},item:{settings:{filter:vt=>vt.name.includes("arc__")},id:`arc-field-${lt}`,name:`arc-field-${lt}`,editor:()=>null}}),S.createElement(Fs.zH,{color:st.color||"#808080",onChange:vt=>{Ne(lt,"color",vt)}}),S.createElement(Re.zx,{size:"sm",icon:"minus",variant:"secondary",onClick:()=>Ue(lt),title:"Remove arc"}))),S.createElement(Re.zx,{size:"sm",icon:"plus",onClick:Me,variant:"secondary"},"Add arc"))},Oo=()=>({section:b.css`
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0 8px;
      margin-bottom: 8px;
    `}),ic=new ce.c(ar).setPanelOptions((V,q)=>{V.addNestedOptions({category:["Nodes"],path:"nodes",build:se=>{se.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),se.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"}),se.addCustomEditor({name:"Arc sections",path:"arcs",id:"arcs",editor:Au})}}),V.addNestedOptions({category:["Edges"],path:"edges",build:se=>{se.addUnitPicker({name:"Main stat unit",path:"mainStatUnit"}),se.addUnitPicker({name:"Secondary stat unit",path:"secondaryStatUnit"})}})});var Lu=e(17128),lc=e(26993),Bu=e(9521),wu=e(32567),Nf=e(68970),Ji=e(66838),Fr=e(46495),mo=e(95670),To=e(28550),si=e(18543),ri=e(50800);let _i=0;const Nu=()=>_i++;function cc(V){const q=(0,S.useRef)(null);return q.current===null&&(q.current=V+Nu()),q.current.toString()}const Uf=Object.freeze([0,0]);var gr=(V=>(V.Donut="donut",V.Pie="pie",V))(gr||{}),xs=(V=>(V.Name="name",V.Percent="percent",V.Value="value",V))(xs||{}),xr=(V=>(V.Percent="percent",V.Value="value",V))(xr||{});const Xi={values:[]},dc={displayLabels:[]};function uc(V){return!V.field.custom?.hideFrom?.viz&&!isNaN(V.display.numeric)}function qi(V,q){return q.display.numeric+V}const Io=({fieldDisplayValues:V,pieType:q,width:se,height:Ee,highlightedTitle:Me,displayLabels:Ue=[],tooltipOptions:Ne})=>{const st=(0,ft.l4)(),lt=cc("PieChart"),vt=(0,ft.wW)(tl),gt=(0,Fr.Z)(),{containerRef:Mt,TooltipInPortal:Lt}=(0,mo.Z)({detectBounds:!0,scroll:!0}),It=V.filter(uc),Yt=an=>an.display.numeric,Zt=an=>`${lt}-${(0,To.Z)(an).toHex()}`,rn=an=>`url(#${Zt(an)})`,Nt=Ue.length>0,kt=Ne.mode!=="none"&&gt.tooltipOpen,Ut=It.reduce(qi,0),_t=$u(se,Ee,q),Mn=[...new Set(It.map(an=>an.display.color??Ze.R))];return S.createElement("div",{className:vt.container},S.createElement("svg",{width:_t.size,height:_t.size,ref:Mt,style:{overflow:"visible"}},S.createElement(Nf.Z,{top:_t.position,left:_t.position},Mn.map(an=>S.createElement(wu.Z,{key:an,id:Zt(an),from:Fu(an,st),to:Wu(an,st),fromOffset:_t.gradientFromOffset,toOffset:"1",gradientUnits:"userSpaceOnUse",cx:0,cy:0,radius:_t.outerRadius})),S.createElement(Ji.Z,{data:It,pieValue:Yt,outerRadius:_t.outerRadius,innerRadius:_t.innerRadius,cornerRadius:3,padAngle:.005},an=>S.createElement(S.Fragment,null,an.arcs.map(An=>{const On=An.data.display.color??Ze.R,Un=oi(Me,An);return An.data.hasLinks&&An.data.getLinks?S.createElement(si.V,{key:An.index,links:An.data.getLinks},Vn=>S.createElement(mc,{tooltip:gt,highlightState:Un,arc:An,pie:an,fill:rn(On),openMenu:Vn.openMenu,tooltipOptions:Ne})):S.createElement(mc,{key:An.index,highlightState:Un,tooltip:gt,arc:An,pie:an,fill:rn(On),tooltipOptions:Ne})}),Nt&&an.arcs.map(An=>{const On=oi(Me,An);return S.createElement(Ro,{arc:An,key:An.index,highlightState:On,outerRadius:_t.outerRadius,innerRadius:_t.innerRadius,displayLabels:Ue,total:Ut,color:st.colors.text.primary})}))))),kt?S.createElement(Lt,{key:Math.random(),top:gt.tooltipTop,className:vt.tooltipPortal,left:gt.tooltipLeft,unstyled:!0,applyPositionStyle:!0},S.createElement(ri.c,{series:gt.tooltipData})):null)};function mc({arc:V,pie:q,highlightState:se,openMenu:Ee,fill:Me,tooltip:Ue,tooltipOptions:Ne}){const st=(0,ft.l4)(),lt=(0,ft.wW)(tl),{eventBus:vt}=(0,bt.R9)(),gt=(0,S.useCallback)(It=>{vt?.publish({type:Ea.xH.type,payload:{raw:It,x:0,y:0,dataId:V.data.display.title}}),Ue.hideTooltip()},[vt,V,Ue]),Mt=(0,S.useCallback)(It=>{vt?.publish({type:Ea.es.type,payload:{raw:It,x:0,y:0,dataId:V.data.display.title}});const Yt=It.currentTarget.ownerSVGElement;if(Yt){const Zt=(0,Bu.Z)(Yt,It);Ue.showTooltip({tooltipLeft:Zt.x,tooltipTop:Zt.y,tooltipData:Uu(q,V,Ne)})}},[vt,V,Ue,q,Ne]),Lt=el(se,lt);return S.createElement("g",{key:V.data.display.title,className:Lt,onMouseMove:Ne.mode!=="none"?Mt:void 0,onMouseOut:gt,onClick:Ee,"aria-label":pt.wl.components.Panels.Visualization.PieChart.svgSlice},S.createElement("path",{d:q.path({...V}),fill:Me,stroke:st.colors.background.primary,strokeWidth:1}))}function Ro({arc:V,outerRadius:q,innerRadius:se,displayLabels:Ee,total:Me,color:Ue,highlightState:Ne}){const st=(0,ft.wW)(tl),lt=se===0?q/6:se,[vt,gt]=fc(V,q,lt);if(!(V.endAngle-V.startAngle>=.3))return null;let Lt=Ee.includes(xs.Name)?Math.min(Math.max(q/150*14,12),30):Math.min(Math.max(q/100*14,12),36);return S.createElement("g",{className:el(Ne,st)},S.createElement("text",{fill:Ue,x:vt,y:gt,dy:".33em",fontSize:Lt,fontWeight:500,textAnchor:"middle",pointerEvents:"none"},Ee.includes(xs.Name)&&S.createElement("tspan",{x:vt,dy:"1.2em"},V.data.display.title),Ee.includes(xs.Value)&&S.createElement("tspan",{x:vt,dy:"1.2em"},(0,Wa.zc)(V.data.display)),Ee.includes(xs.Percent)&&S.createElement("tspan",{x:vt,dy:"1.2em"},(V.data.display.numeric/Me*100).toFixed(V.data.field.decimals??0)+"%")))}function Uu(V,q,se){return se.mode==="multi"?V.arcs.filter(Ee=>{const Me=Ee.data.field;return Me&&!Me.custom?.hideFrom?.tooltip&&!Me.custom?.hideFrom?.viz}).map(Ee=>({color:Ee.data.display.color??Ze.R,label:Ee.data.display.title,value:(0,Wa.zc)(Ee.data.display),isActive:Ee.index===q.index})):[{color:q.data.display.color??Ze.R,label:q.data.display.title,value:(0,Wa.zc)(q.data.display)}]}function fc(V,q,se){const Ee=(q+se)/2,Me=(+V.startAngle+ +V.endAngle)/2-Math.PI/2;return[Math.cos(Me)*Ee,Math.sin(Me)*Ee]}function Fu(V,q){return(0,To.Z)(V).darken(20*(q.isDark?1:-.7)).spin(4).toRgbString()}function Wu(V,q){return(0,To.Z)(V).darken(10*(q.isDark?1:-.7)).spin(-4).toRgbString()}function $u(V,q,se,Ee=16){const Me=Math.min(q,V),Ue=(Me-Ee*2)/2,Ne=se===gr.Pie?Ue:Math.max(Ue/3,20),st=Ue-Ne,lt=(Me-Ee*2)/2,vt=1-(Ue-st)/Ue;return{position:lt+Ee,size:Me,outerRadius:Ue,innerRadius:st,gradientFromOffset:vt}}var gc=(V=>(V[V.Highlighted=0]="Highlighted",V[V.Deemphasized=1]="Deemphasized",V[V.Normal=2]="Normal",V))(gc||{});function oi(V,q){return V?V===q.data.display.title?0:1:2}function el(V,q){switch(V){case 0:return q.svgArg.highlighted;case 1:return q.svgArg.deemphasized;case 2:default:return q.svgArg.normal}}const tl=V=>({container:b.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `,svgArg:{normal:b.css`
        transition: all 200ms ease-in-out;
      `,highlighted:b.css`
        transition: all 200ms ease-in-out;
        transform: scale3d(1.03, 1.03, 1);
      `,deemphasized:b.css`
        transition: all 200ms ease-in-out;
        fill-opacity: 0.5;
      `},tooltipPortal:b.css`
      ${(0,Ti.getTooltipContainerStyles)(V)}
    `}),Ku={displayMode:xe.jK.List,showLegend:!0,placement:"right",calcs:[],values:[xr.Percent]};function pc(V){const{data:q,timeZone:se,fieldConfig:Ee,replaceVariables:Me,width:Ue,height:Ne,options:st,id:lt}=V,vt=(0,ft.l4)(),gt=zu(),Mt=(0,Lu.nG)({fieldConfig:Ee,reduceOptions:st.reduceOptions,data:q.series,theme:vt,replaceVariables:Me,timeZone:se});return ii(Mt)?S.createElement(ln.AY,{width:Ue,height:Ne,legend:Vu(V,Mt)},(Lt,It)=>S.createElement(Io,{width:Lt,height:It,highlightedTitle:gt,fieldDisplayValues:Mt,tooltipOptions:st.tooltip,pieType:st.pieType,displayLabels:st.displayLabels})):S.createElement(Tt.Z,{panelId:lt,fieldConfig:Ee,data:q})}function Vu(V,q){const se=V.options.legend??Ku;if(se.showLegend===!1)return;const Ee=q.filter(uc).reduce(qi,0),Me=q.sort((Ue,Ne)=>isNaN(Ue.display.numeric)?1:isNaN(Ne.display.numeric)?-1:Ne.display.numeric-Ue.display.numeric).map((Ue,Ne)=>{const st=Ue.field.custom?.hideFrom??{};if(st.legend)return;const lt=Boolean(st.viz),vt=Ue.display;return{label:vt.title??"",color:vt.color??Ze.R,yAxis:1,disabled:lt,getItemKey:()=>(vt.title??"")+Ne,getDisplayValues:()=>{const gt=se.values??[];let Mt=[];if(gt.includes(xr.Value)&&Mt.push({numeric:vt.numeric,text:(0,Wa.zc)(vt),title:"Value"}),gt.includes(xr.Percent)){const Lt=lt?0:vt.numeric/Ee,It=Lt*100;Mt.push({numeric:Lt,percent:It,text:lt||isNaN(Lt)?V.fieldConfig.defaults.noValue??"-":It.toFixed(Ue.field.decimals??0)+"%",title:gt.length>1?"Percent":""})}return Mt}}}).filter(Ue=>!!Ue);return S.createElement(Cn.l,{items:Me,seriesVisibilityChangeBehavior:lc.Y.Hide,placement:se.placement,displayMode:se.displayMode})}function ii(V){return V.some(q=>q.view?.dataFrame.length)}function zu(){const[V,q]=(0,S.useState)(),{eventBus:se}=(0,bt.R9)();return(0,S.useEffect)(()=>{const Ee=Ne=>{q(Ne.payload.dataId)},Me=Ne=>{q(void 0)},Ue=new Qs.w0;return Ue.add(se.getStream(Ea.es).subscribe({next:Ee})),Ue.add(se.getStream(Ea.xH).subscribe({next:Me})),()=>{Ue.unsubscribe()}},[q,se]),V}const Hu=(V,q,se)=>{if(q==="grafana-piechart-panel"&&se.angular){const Ee=se.angular,Me=[];let Ue=V.options;if(Ee.aliasColors)for(const Ne of Object.keys(Ee.aliasColors)){const st=Ee.aliasColors[Ne];st&&Me.push({matcher:{id:Yr.mi.byName,options:Ne},properties:[{id:Za.qb.Color,value:{mode:Ze.S.Fixed,fixedColor:st}}]})}if(V.fieldConfig={overrides:Me,defaults:{unit:Ee.format,decimals:Ee.decimals?Ee.decimals:0}},Ue.legend={placement:"right",values:[],displayMode:xe.jK.Table,showLegend:!0,calcs:[]},Ee.valueName)switch(Ue.reduceOptions={calcs:[]},Ee.valueName){case"current":Ue.reduceOptions.calcs=["lastNotNull"];break;case"min":Ue.reduceOptions.calcs=["min"];break;case"max":Ue.reduceOptions.calcs=["max"];break;case"avg":Ue.reduceOptions.calcs=["mean"];break;case"total":Ue.reduceOptions.calcs=["sum"];break}switch(Ee.legendType){case"Under graph":Ue.legend.placement="bottom";break;case"Right side":Ue.legend.placement="right";break}switch(Ee.pieType){case"pie":Ue.pieType=gr.Pie;break;case"donut":Ue.pieType=gr.Donut;break}return Ee.legend&&(Ee.legend.show||(Ue.legend.showLegend=!1),Ee.legend.values&&Ue.legend.values.push(xr.Value),Ee.legend.percentage&&Ue.legend.values.push(xr.Percent)),Ee.legendType==="On graph"&&(Ue.legend.showLegend=!1,Ue.displayLabels=[xs.Name],Ee.legend.values&&Ue.displayLabels.push(xs.Value),Ee.legend.percentage&&Ue.displayLabels.push(xs.Percent)),Ue}return{}};class nl{getSuggestionsForData(q){const se=q.getListAppender({name:Ca.y.PieChart,pluginId:"piechart",options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},displayLabels:[xs.Percent],legend:{placement:"right",values:[]}},cardOptions:{previewModifier:Me=>{Me.options.legend.showLegend=!1}}}),{dataSummary:Ee}=q;if(Ee.hasNumberField){if(Ee.hasStringField&&Ee.frameCount===1){if(Ee.rowCountTotal>30||Ee.rowCountTotal<2)return;se.append({name:Ca.y.PieChart,options:{reduceOptions:{values:!0,calcs:[]}}}),se.append({name:Ca.y.PieChartDonut,options:{reduceOptions:{values:!0,calcs:[]},pieType:gr.Donut}});return}Ee.numberFieldCount>30||Ee.numberFieldCount<2||(se.append({name:Ca.y.PieChart}),se.append({name:Ca.y.PieChartDonut,options:{pieType:gr.Donut}}))}}}const li=new ce.c(pc).setPanelChangeHandler(Hu).useFieldConfig({disableStandardOptions:[Za.qb.Thresholds],standardOptions:{[Za.qb.Color]:{settings:{byValueSupport:!1,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Ze.S.PaletteClassic}}},useCustomConfig:V=>{Bt.B(V)}}).setPanelOptions(V=>{(0,Ko.j)(V),V.addRadio({name:"Piechart type",description:"How the piechart should be rendered",path:"pieType",settings:{options:[{value:gr.Pie,label:"Pie"},{value:gr.Donut,label:"Donut"}]},defaultValue:gr.Pie}).addMultiSelect({name:"Labels",path:"displayLabels",description:"Select the labels to be displayed in the pie chart",settings:{options:[{value:xs.Percent,label:"Percent"},{value:xs.Name,label:"Name"},{value:xs.Value,label:"Value"}]}}),Kt.L(V),fn.J(V,!1),V.addMultiSelect({name:"Legend values",path:"legend.values",category:["Legend"],settings:{options:[{value:xr.Percent,label:"Percent"},{value:xr.Value,label:"Value"}]},showIf:q=>q.legend.showLegend!==!1})}).setSuggestionsSupplier(new nl);var ku=e(98967),fo=e(49616);const hc=["rowHeight","colWidth","showValue","mergeValues","alignValue"];class ci extends S.Component{constructor(){super(...arguments),this.panelContext={},this.getValueColor=(q,se,Ee)=>{const Me=this.props.frames[q].fields[se];if(Me.display){const Ue=Me.display(Ee);if(Ue.color)return Ue.color}return Ze.R},this.prepConfig=(q,se,Ee)=>{this.panelContext=this.context;const{eventBus:Me,sync:Ue}=this.panelContext;return(0,Ba.Nj)({frame:q,getTimeRange:Ee,eventBus:Me,sync:Ue,allFrames:this.props.frames,...this.props,timeZones:Array.isArray(this.props.timeZone)?this.props.timeZone:[this.props.timeZone],rowHeight:q.fields.length>2?this.props.rowHeight:1,getValueColor:this.getValueColor})},this.renderLegend=q=>{const{legend:se,legendItems:Ee}=this.props;return!q||!Ee||!se||se.showLegend===!1?null:S.createElement(ln.AY.Legend,{placement:se.placement},S.createElement(Cn.l,{placement:se.placement,items:Ee,displayMode:se.displayMode,readonly:!0}))}}render(){return S.createElement(Tn.d,{...this.props,fields:{x:q=>q.type===we.fS.time,y:q=>q.type===we.fS.number||q.type===we.fS.boolean||q.type===we.fS.string},prepConfig:this.prepConfig,propsToDiff:hc,renderLegend:this.renderLegend})}}ci.contextType=bt.bb;const al=({data:V,alignedData:q,seriesIdx:se,datapointIdx:Ee,timeZone:Me,onAnnotationAdd:Ue})=>{const Ne=(0,ft.l4)();if(!V||Ee==null)return null;const st=q.fields[se],lt=[],vt=new Set;if(st.getLinks){const an=st.values.get(Ee),An=st.display?st.display(an):{text:`${an}`,numeric:+an};st.getLinks({calculatedValue:An,valueRowIndex:Ee}).forEach(On=>{const Un=`${On.title}/${On.href}`;vt.has(Un)||(lt.push(On),vt.add(Un))})}const gt=q.fields[0],Mt=gt.display||(0,qa.U_)({field:gt,timeZone:Me,theme:Ne}),Lt=st.state?.origin,It=st.display||(0,qa.U_)({field:st,timeZone:Me,theme:Ne}),Yt=st.values.get(Ee),Zt=It(Yt),rn=Lt?(0,Ct.C)(V[Lt.frameIndex].fields[Lt.fieldIndex],V[Lt.frameIndex],V):null,Nt=(0,Ba.iK)(st,Ee);let kt;Nt&&(kt=gt.values.get(Nt));const Ut=gt.values.get(Ee);let _t=null,Mn=null;if(kt){const an=kt&&(0,Ba.Y)(kt-Ut);Mn=S.createElement(S.Fragment,null,S.createElement("br",null),S.createElement("strong",null,"Duration:")," ",an),_t=S.createElement(S.Fragment,null," to"," ",S.createElement("strong",null,Mt(gt.values.get(Nt)).text))}return S.createElement("div",null,S.createElement("div",{style:{fontSize:Ne.typography.bodySmall.fontSize}},rn,S.createElement("br",null),S.createElement(ri.V,{label:Zt.text,color:Zt.color||Ze.R,isActive:!0}),"From ",S.createElement("strong",null,Mt(gt.values.get(Ee)).text),_t,Mn),S.createElement("div",{style:{margin:Ne.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ne.colors.border.weak}`}},Ue&&S.createElement(Go.s,{label:"Add annotation",icon:"comment-alt",onClick:Ue}),lt.length>0&&lt.map((an,An)=>S.createElement(Go.s,{key:An,icon:"external-link-alt",target:an.target,label:an.title,url:an.href,onClick:an.onClick}))))};al.displayName="StateTimelineTooltip";const go=10,vc=({data:V,timeRange:q,timeZone:se,options:Ee,width:Me,height:Ue,replaceVariables:Ne,onChangeTimeRange:st})=>{const lt=(0,ft.l4)(),vt=(0,S.useRef)(void 0),gt=(0,S.useRef)(!1),[Mt,Lt]=(0,S.useState)(void 0),[It,Yt]=(0,S.useState)(null),[Zt,rn]=(0,S.useState)(null),[Nt,kt]=(0,S.useState)(null),[Ut,_t]=(0,S.useState)(!1),[Mn,an]=(0,S.useState)(!1),{sync:An,canAddAnnotations:On}=(0,bt.R9)(),Un=()=>{gt.current=!1,Yt(null),an(!1)},Vn=()=>{gt.current=!gt.current,an(gt.current)},{frames:Kn,warn:Jn}=(0,S.useMemo)(()=>(0,Ba.AR)(V?.series,Ee.mergeValues??!0,q,lt),[V,Ee.mergeValues,q,lt]),wa=(0,S.useMemo)(()=>(0,Ba.SA)(Kn,Ee.legend,lt),[Kn,Ee.legend,lt]),Hn=(0,S.useMemo)(()=>wi(Ee.timezone,se),[Ee.timezone,se]),Bn=(0,S.useCallback)((ra,Ua,ja,Ha)=>{const Ja=Kn??[],Da=Ja.reduce((pn,oa)=>pn+oa.fields.filter(ya=>ya.type!==we.fS.time).length,0);return Ua===null||ja===null||!ra.meta?.transformations?.length&&ra.fields.length-1!==Da||!ra.fields[Ua]?null:S.createElement(S.Fragment,null,Mn&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(Ta.P,{onClick:Un,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(al,{data:Ja,alignedData:ra,seriesIdx:Ua,datapointIdx:ja,timeZone:se,onAnnotationAdd:Ha}))},[se,Kn,Mn]);if(!Kn||Jn)return S.createElement("div",{className:"panel-empty"},S.createElement("p",null,Jn??"No data found in response"));if(Kn.length===1){const ra=(0,Gi.MB)(Kn[0])}const Xn=Boolean(On&&On());return S.createElement(ci,{theme:lt,frames:Kn,structureRev:V.structureRev,timeRange:q,timeZone:Hn,width:Me,height:Ue,legendItems:wa,...Ee,mode:Ba.KN.Changes},(ra,Ua)=>(vt.current!==ra&&(vt.current=La({config:ra,onUPlotClick:Vn,setFocusedSeriesIdx:rn,setFocusedPointIdx:kt,setCoords:Yt,setHover:Lt,isToolTipOpen:gt,isActive:Ut,setIsActive:_t,sync:An})),S.createElement(S.Fragment,null,S.createElement(Vo.R,{config:ra,onZoom:st}),S.createElement(Co,{config:ra,onChangeTimeRange:st}),V.annotations&&S.createElement(ko,{annotations:V.annotations,config:ra,timeZone:se}),Xn?S.createElement(fs,{data:Ua,timeZone:se,config:ra},({startAnnotating:ja})=>Ee.tooltip.mode===xe.f3.None||Nt===null||!Ut&&An&&An()===sa.m.Crosshair?null:S.createElement(Yn.h_,null,Mt&&It&&Zt&&S.createElement(aa.S,{position:{x:It.viewport.x,y:It.viewport.y},offset:{x:go,y:go},allowPointerEvents:gt.current},Bn(Ua,Zt,Nt,()=>{ja({coords:{plotCanvas:It.canvas,viewport:It.viewport}}),Un()})))):S.createElement(Yn.h_,null,Ee.tooltip.mode!==xe.f3.None&&Mt&&It&&S.createElement(aa.S,{position:{x:It.viewport.x,y:It.viewport.y},offset:{x:go,y:go},allowPointerEvents:gt.current},Bn(Ua,Zt,Nt))))))};var Ec=e(26031);const Gu=(V,q,se)=>{let Ee=V.options??{};if(q==="natel-discrete-panel"&&se.angular){const Me=se.angular,Ue=V.fieldConfig??{defaults:{},overrides:[]};Me.units&&(Ue.defaults.unit=Me.units);const Ne={fillOpacity:100,lineWidth:0};Ue.defaults.custom=Ne,Ee.mergeValues=!0;const st={type:Ec.H.ValueToText,options:{}};if(Ue.defaults.mappings=[st],(0,I.isArray)(Me.colorMaps))for(const lt of Me.colorMaps){const vt=lt.color;vt&&(st.options[lt.text]={color:vt})}if((0,I.isArray)(Me.valueMaps))for(const lt of Me.valueMaps){const vt=lt.text,gt=lt.value;if(vt&&gt){let Mt=st.options[gt];Mt?Mt.text=vt:st.options[gt]={text:vt}}}if((0,I.isArray)(Me.rangeMaps))for(const lt of Me.rangeMaps){let vt=+lt.from,gt=+lt.to;const Mt=lt.text;Mt&&Ue.defaults.mappings.push({type:Ec.H.RangeToText,options:{from:vt,to:gt,result:{text:Mt}}})}V.fieldConfig=Ue}return Ee},Ff=Object.freeze([0,0]),di={alignValue:"left",mergeValues:!0,rowHeight:.9,showValue:xe.Jp.Auto},yc={fillOpacity:70,lineWidth:0};class Pc{getSuggestionsForData(q){const{dataSummary:se}=q;if(!se.hasData||!se.hasTimeField||!se.hasStringField&&!se.hasNumberField||se.numberFieldCount>=30||se.preferredVisualisationType==="logs")return;q.getListAppender({name:"",pluginId:"state-timeline",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]}}).append({name:Ca.y.StateTimeline})}}const Yu=new ce.c(vc).setPanelChangeHandler(Gu).useFieldConfig({standardOptions:{[Za.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Ze.S.ContinuousGrYlRd}}},useCustomConfig:V=>{V.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:yc.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:yc.fillOpacity,settings:{min:0,max:100,step:1}}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",defaultValue:!1,editor:fo.c,override:fo.c,shouldApply:q=>q.type!==we.fS.time,process:Et.kG})}}).setPanelOptions(V=>{V.addBooleanSwitch({path:"mergeValues",name:"Merge equal consecutive values",defaultValue:di.mergeValues}).addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xe.Jp.Auto,label:"Auto"},{value:xe.Jp.Always,label:"Always"},{value:xe.Jp.Never,label:"Never"}]},defaultValue:di.showValue}).addRadio({path:"alignValue",name:"Align values",settings:{options:[{value:"left",label:"Left"},{value:"center",label:"Center"},{value:"right",label:"Right"}]},defaultValue:di.alignValue}).addSliderInput({path:"rowHeight",name:"Row height",settings:{min:0,max:1,step:.01},defaultValue:di.rowHeight}),fn.J(V,!1),Kt.L(V,!0)}).setSuggestionsSupplier(new Pc).setDataSupport({annotations:!0}),sl=({data:V,alignedData:q,seriesIdx:se,datapointIdx:Ee,timeZone:Me})=>{const Ue=(0,ft.l4)();if(!V||Ee==null)return null;const Ne=q.fields[se],st=[],lt=new Set;if(Ne.getLinks){const rn=Ne.values.get(Ee),Nt=Ne.display?Ne.display(rn):{text:`${rn}`,numeric:+rn};Ne.getLinks({calculatedValue:Nt,valueRowIndex:Ee}).forEach(kt=>{const Ut=`${kt.title}/${kt.href}`;lt.has(Ut)||(st.push(kt),lt.add(Ut))})}const vt=q.fields[0],gt=vt.display||(0,qa.U_)({field:vt,timeZone:Me,theme:Ue}),Mt=Ne.state?.origin,Lt=Ne.display||(0,qa.U_)({field:Ne,timeZone:Me,theme:Ue}),It=Ne.values.get(Ee),Yt=Lt(It),Zt=Mt?(0,Ct.C)(V[Mt.frameIndex].fields[Mt.fieldIndex],V[Mt.frameIndex],V):null;return S.createElement("div",null,S.createElement("div",{style:{fontSize:Ue.typography.bodySmall.fontSize}},S.createElement("strong",null,gt(vt.values.get(Ee)).text),S.createElement("br",null),S.createElement(ri.V,{label:Yt.text,color:Yt.color||Ze.R,isActive:!0}),Zt),st.length>0&&S.createElement("div",{style:{margin:Ue.spacing(1,-1,-1,-1),borderTop:`1px solid ${Ue.colors.border.weak}`}},st.map((rn,Nt)=>S.createElement(Go.s,{key:Nt,icon:"external-link-alt",target:rn.target,label:rn.title,url:rn.href,onClick:rn.onClick}))))};sl.displayName="StatusHistoryTooltip";const Cc=10,ju=({data:V,timeRange:q,timeZone:se,options:Ee,width:Me,height:Ue,onChangeTimeRange:Ne})=>{const st=(0,ft.l4)(),lt=(0,S.useRef)(void 0),vt=(0,S.useRef)(!1),[gt,Mt]=(0,S.useState)(void 0),[Lt,It]=(0,S.useState)(null),[Yt,Zt]=(0,S.useState)(null),[rn,Nt]=(0,S.useState)(null),[kt,Ut]=(0,S.useState)(!1),[_t,Mn]=(0,S.useState)(!1),{sync:an}=(0,bt.R9)(),An=()=>{vt.current=!1,It(null),Mn(!1)},On=()=>{vt.current=!vt.current,Mn(vt.current)},{frames:Un,warn:Vn}=(0,S.useMemo)(()=>(0,Ba.AR)(V?.series,!1,q,st),[V,q,st]),Kn=(0,S.useMemo)(()=>(0,Ba.SA)(Un,Ee.legend,st),[Un,Ee.legend,st]),Jn=(0,S.useCallback)((Bn,Xn,ra)=>{const Ua=Un??[],ja=Ua.reduce((Ha,Ja)=>Ha+Ja.fields.filter(Da=>Da.type!==we.fS.time).length,0);return Xn===null||ra===null||!Bn.meta?.transformations?.length&&Bn.fields.length-1!==ja||!Bn.fields[Xn]?null:S.createElement(S.Fragment,null,_t&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(Ta.P,{onClick:An,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(sl,{data:Ua,alignedData:Bn,seriesIdx:Xn,datapointIdx:ra,timeZone:se}))},[se,Un,_t]),wa=Bn=>Ee.tooltip.mode===xe.f3.None||rn===null||!kt&&an&&an()===sa.m.Crosshair?null:S.createElement(Yn.h_,null,gt&&Lt&&Yt&&S.createElement(aa.S,{position:{x:Lt.viewport.x,y:Lt.viewport.y},offset:{x:Cc,y:Cc},allowPointerEvents:vt.current},Jn(Bn,Yt,rn))),Hn=(0,S.useMemo)(()=>wi(Ee.timezone,se),[Ee.timezone,se]);return!Un||Vn?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,Vn??"No data found in response")):Un[0].length>Me/2?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"Too many points to visualize properly. ",S.createElement("br",null),"Update the query to return fewer points. ",S.createElement("br",null),"(",Un[0].length," points received)")):S.createElement(ci,{theme:st,frames:Un,structureRev:V.structureRev,timeRange:q,timeZone:Hn,width:Me,height:Ue,legendItems:Kn,...Ee,mode:Ba.KN.Samples},(Bn,Xn)=>(lt.current!==Bn&&(lt.current=La({config:Bn,onUPlotClick:On,setFocusedSeriesIdx:Zt,setFocusedPointIdx:Nt,setCoords:It,setHover:Mt,isToolTipOpen:vt,isActive:kt,setIsActive:Ut})),S.createElement(S.Fragment,null,S.createElement(Vo.R,{config:Bn,onZoom:Ne}),wa(Xn),S.createElement(Co,{config:Bn,onChangeTimeRange:Ne}))))},Wf=Object.freeze([0,0]),xc={colWidth:.9,rowHeight:.9,showValue:xe.Jp.Auto},rl={fillOpacity:70,lineWidth:1};class ol{getSuggestionsForData(q){const{dataSummary:se}=q;if(!se.hasData||!se.hasTimeField||!se.hasStringField&&!se.hasNumberField||se.numberFieldCount>=30||se.rowCountMax>100||se.preferredVisualisationType==="logs")return;q.getListAppender({name:"",pluginId:"status-history",options:{},fieldConfig:{defaults:{color:{mode:Ze.S.ContinuousGrYlRd},custom:{}},overrides:[]},cardOptions:{previewModifier:Me=>{Me.options.colWidth=.7}}}).append({name:Ca.y.StatusHistory})}}const Qu=new ce.c(ju).useFieldConfig({standardOptions:{[Za.qb.Color]:{settings:{byValueSupport:!0},defaultValue:{mode:Ze.S.Thresholds}}},useCustomConfig:V=>{V.addSliderInput({path:"lineWidth",name:"Line width",defaultValue:rl.lineWidth,settings:{min:0,max:10,step:1}}).addSliderInput({path:"fillOpacity",name:"Fill opacity",defaultValue:rl.fillOpacity,settings:{min:0,max:100,step:1}})}}).setPanelOptions(V=>{V.addRadio({path:"showValue",name:"Show values",settings:{options:[{value:xe.Jp.Auto,label:"Auto"},{value:xe.Jp.Always,label:"Always"},{value:xe.Jp.Never,label:"Never"}]},defaultValue:xe.Jp.Auto}).addSliderInput({path:"rowHeight",name:"Row height",defaultValue:.9,settings:{min:0,max:1,step:.01}}).addSliderInput({path:"colWidth",name:"Column width",defaultValue:.9,settings:{min:0,max:1,step:.01}}),fn.J(V,!1),Kt.L(V,!0)}).setSuggestionsSupplier(new ol);var $f=e(35363);const jr={align:"auto",inspect:!1,cellOptions:{type:xe.h2.Auto}};var Zu=e(8944);function Ju({onChange:V,value:q,context:se}){const Ee=Me=>{Me?.currentTarget.checked&&(se.options.footer.show=!1),V(Me?.currentTarget.checked)};return S.createElement(Zu.r,{value:Boolean(q),onChange:Ee})}function _u({cellOptions:V,onChange:q}){const se=Me=>{V.mode=Me,q(V)},Ee=Me=>{V.valueDisplayMode=Me,q(V)};return S.createElement(as.Stack,{direction:"column",gap:0},S.createElement(ks.g,{label:"Gauge display mode"},S.createElement(Vr.S,{value:V?.mode??xe.QH.Gradient,onChange:se,options:Xu})),S.createElement(ks.g,{label:"Value display"},S.createElement(Vr.S,{value:V?.valueDisplayMode??xe.M8.Text,onChange:Ee,options:il})))}const Xu=[{value:xe.QH.Basic,label:"Basic"},{value:xe.QH.Gradient,label:"Gradient"},{value:xe.QH.Lcd,label:"Retro LCD"}],il=[{value:xe.M8.Color,label:"Value color"},{value:xe.M8.Text,label:"Text color"},{value:xe.M8.Hidden,label:"Hidden"}],qu=[{value:xe.v7.Basic,label:"Basic"},{value:xe.v7.Gradient,label:"Gradient"}],ll=({cellOptions:V,onChange:q})=>{const se=Ee=>{V.mode=Ee,q(V)};return S.createElement(ks.g,{label:"Background display mode"},S.createElement(Vr.S,{value:V?.mode??xe.v7.Gradient,onChange:se,options:qu}))};var Dc=e(39778),bc=e(24115);const em=["drawStyle","lineInterpolation","barAlignment","lineWidth","fillOpacity","gradientMode","lineStyle","spanNulls","showPoints","pointSize"],tm=V=>{const{cellOptions:q,onChange:se}=V,Ee=(0,S.useMemo)(()=>{const Ne=(0,to.F)(bc.U);return(0,Dc.j)(Ne,"ChartCell")},[]),Me=(0,ft.wW)(Mc),Ue={...bc.U,...q};return S.createElement(eo.wc,null,Ee.list(em.map(Ne=>`custom.${Ne}`)).map(Ne=>{if(Ne.showIf&&!Ne.showIf(Ue))return null;const st=Ne.editor,lt=Ne.path;return S.createElement(ks.g,{label:Ne.name,key:Ne.id,className:Me.field},S.createElement(st,{onChange:vt=>se({...q,[lt]:vt}),value:(nm(lt,Ue)?Ue[lt]:void 0)??Ne.defaultValue,item:Ne,context:{data:[]}}))}))};function nm(V,q){return V in q}const Mc=()=>({field:b.css`
    width: 100%;

    // @TODO don't show "scheme" option for custom gradient mode.
    // it needs thresholds to work, which are not supported
    // for area chart cell right now
    [title='Use color scheme to define gradient'] {
      display: none;
    }
  `}),Sc=({value:V,onChange:q})=>{const se=V.type,Ee=(0,ft.wW)(Tc),Me=Oc.find(vt=>vt.value.type===se);let[Ue,Ne]=(0,S.useState)({});const st=vt=>{vt.value!==void 0&&(V=vt.value,Ue[V.type]!==void 0&&Object.keys(Ue[V.type]).length>1&&(V=(0,I.merge)(V,Ue[V.type])),q(V))},lt=vt=>{Ue[V.type]=(0,I.merge)(V,vt),Ne(Ue),q(Ue[V.type])};return S.createElement("div",{className:Ee.fixBottomMargin},S.createElement(ks.g,null,S.createElement(Ke.Ph,{options:Oc,value:Me,onChange:st})),se===xe.h2.Gauge&&S.createElement(_u,{cellOptions:V,onChange:lt}),se===xe.h2.ColorBackground&&S.createElement(ll,{cellOptions:V,onChange:lt}),se===xe.h2.Sparkline&&S.createElement(tm,{cellOptions:V,onChange:lt}))},am={value:{type:xe.h2.Sparkline},label:"Sparkline"},Oc=[{value:{type:xe.h2.Auto},label:"Auto"},...Ae.v.featureToggles.timeSeriesTable?[am]:[],{value:{type:xe.h2.ColorText},label:"Colored text"},{value:{type:xe.h2.ColorBackground},label:"Colored background"},{value:{type:xe.h2.Gauge},label:"Gauge"},{value:{type:xe.h2.JSONView},label:"JSON View"},{value:{type:xe.h2.Image},label:"Image"}],Tc=V=>({fixBottomMargin:(0,b.css)({marginBottom:V.spacing(-2)})});var cl=e(24177);const sm=V=>(!V.pluginVersion&&V.columns&&console.log("Was angular table",V),V.options),ui={timeseries_to_rows:"seriesToRows",timeseries_to_columns:"seriesToColumns",timeseries_aggregations:"reduce",table:"merge"},Qr={avg:"mean",min:"min",max:"max",total:"sum",current:"lastNotNull",count:"count"},mi={cell:"color-background",row:"color-background",value:"color-text"},Ic=(V,q)=>[-1/0,...V].map((se,Ee)=>({color:q[Ee],value:(0,I.isNumber)(se)?se:parseInt(se,10)})),rm=(V,q)=>{const se=V.transformations??[];if(Object.keys(ui).includes(q.transform)){const Ee={reducers:[]};q.transform==="timeseries_aggregations"&&(Ee.includeTimeField=!1,Ee.reducers=q.columns.map(Me=>Qr[Me.value])),se.push({id:ui[q.transform],options:Ee})}return se},om=V=>{const se={matcher:{id:/^\/.*\/$/.test(V.pattern)?Yr.mi.byRegexp:Yr.mi.byName,options:V.pattern},properties:[]};return V.alias&&se.properties.push({id:"displayName",value:V.alias}),V.unit&&se.properties.push({id:"unit",value:V.unit}),V.decimals&&se.properties.push({id:"decimals",value:V.decimals}),V.type==="date"&&se.properties.push({id:"unit",value:`time: ${V.dateFormat}`}),V.link&&se.properties.push({id:"links",value:[{title:(0,I.defaultTo)(V.linkTooltip,""),url:(0,I.defaultTo)(V.linkUrl,""),targetBlank:(0,I.defaultTo)(V.linkTargetBlank,!1)}]}),V.colorMode&&se.properties.push({id:"custom.cellOptions",value:{type:mi[V.colorMode]}}),V.align&&se.properties.push({id:"custom.align",value:V.align==="auto"?null:V.align}),V.thresholds?.length&&se.properties.push({id:"thresholds",value:{mode:cl.H.Absolute,steps:Ic(V.thresholds,V.colors)}}),se},im=V=>{let q={custom:{}};if(V){if(q=(0,I.omitBy)({unit:V.unit,decimals:V.decimals,displayName:V.alias,custom:{align:V.align==="auto"?null:V.align}},I.isNil),V.thresholds.length){const se={mode:cl.H.Absolute,steps:Ic(V.thresholds,V.colors)};q.thresholds=se}V.colorMode&&(q.custom.cellOptions={type:mi[V.colorMode]})}return q},lm=(V,q,se)=>{if(q==="table-old"&&se.angular){const Ee=se.angular,Me=rm(V,Ee),Ue=Ee.styles.find(lt=>lt.pattern==="/.*/"),Ne=im(Ue),st=Ee.styles.filter(lt=>lt.pattern!=="/.*/").map(om);V.transformations=Me,V.fieldConfig={defaults:Ne,overrides:st}}return{}},cm=Object.freeze([0,0]),fi={cellHeight:xe.Ss.Sm,footer:{show:!1,countRows:!1,reducer:[]},frameIndex:0,showHeader:!0,showTypeIcons:!1,sortBy:[]};class dm{getSuggestionsForData(q){const se=q.getListAppender({name:Ca.y.Table,pluginId:"table",options:{},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ee=>{Ee.fieldConfig.defaults.custom.minWidth=50}}});q.dataSummary.fieldCount===0?se.append({cardOptions:{imgSrc:"public/app/plugins/panel/table/img/icn-table-panel.svg"}}):se.append({})}}const po="Table footer",Rc=["Cell options"],um=new ce.c(_l).setPanelChangeHandler(lm).setMigrationHandler(sm).useFieldConfig({useCustomConfig:V=>{V.addNumberInput({path:"minWidth",name:"Minimum column width",description:"The minimum width for column auto resizing",settings:{placeholder:"150",min:50,max:500},shouldApply:()=>!0,defaultValue:jr.minWidth}).addNumberInput({path:"width",name:"Column width",settings:{placeholder:"auto",min:20,max:300},shouldApply:()=>!0,defaultValue:jr.width}).addRadio({path:"align",name:"Column alignment",settings:{options:[{label:"auto",value:"auto"},{label:"left",value:"left"},{label:"center",value:"center"},{label:"right",value:"right"}]},defaultValue:jr.align}).addCustomEditor({id:"cellOptions",path:"cellOptions",name:"Cell type",editor:Sc,override:Sc,defaultValue:jr.cellOptions,process:Et.kG,category:Rc,shouldApply:()=>!0}).addBooleanSwitch({path:"inspect",name:"Cell value inspect",description:"Enable cell value inspection in a modal window",defaultValue:!1,category:Rc,showIf:q=>q.cellOptions.type===xe.h2.Auto||q.cellOptions.type===xe.h2.JSONView||q.cellOptions.type===xe.h2.ColorText||q.cellOptions.type===xe.h2.ColorBackground}).addBooleanSwitch({path:"filterable",name:"Column filter",description:"Enables/disables field filters in table",defaultValue:jr.filterable}).addBooleanSwitch({path:"hidden",name:"Hide in table",defaultValue:void 0,hideFromDefaults:!0})}}).setPanelOptions(V=>{V.addBooleanSwitch({path:"showHeader",name:"Show table header",defaultValue:fi.showHeader}).addRadio({path:"cellHeight",name:"Cell height",defaultValue:fi.cellHeight,settings:{options:[{value:xe.Ss.Sm,label:"Small"},{value:xe.Ss.Md,label:"Medium"},{value:xe.Ss.Lg,label:"Large"}]}}).addBooleanSwitch({path:"footer.show",category:[po],name:"Show table footer",defaultValue:fi.footer?.show}).addCustomEditor({id:"footer.reducer",category:[po],path:"footer.reducer",name:"Calculation",description:"Choose a reducer function / calculation",editor:$f.S.get("stats-picker").editor,defaultValue:[es.gz.sum],showIf:q=>q.footer?.show}).addBooleanSwitch({path:"footer.countRows",category:[po],name:"Count rows",description:"Display a single count for all data rows",defaultValue:fi.footer?.countRows,showIf:q=>q.footer?.reducer?.length===1&&q.footer?.reducer[0]===es.gz.count}).addMultiSelect({path:"footer.fields",category:[po],name:"Fields",description:"Select the fields that should be calculated",settings:{allowCustomValue:!1,options:[],placeholder:"All Numeric Fields",getOptions:async q=>{const se=[];if(q&&q.data&&q.data.length>0){const Ee=q.data[0];for(const Me of Ee.fields)if(Me.type===we.fS.number){const Ue=(0,Ct.C)(Me,Ee,q.data),Ne=Me.name;se.push({value:Ne,label:Ue})}}return se}},defaultValue:"",showIf:q=>q.footer?.show&&!q.footer?.countRows||q.footer?.reducer?.length===1&&q.footer?.reducer[0]!==es.gz.count}).addCustomEditor({id:"footer.enablePagination",path:"footer.enablePagination",name:"Enable pagination",editor:Ju})}).setSuggestionsSupplier(new dm);var mm=e(54391),fm=e(70197),Ac=e(41959);const Kf=Object.freeze([0,0]);var Ws=(V=>(V.Code="code",V.HTML="html",V.Markdown="markdown",V))(Ws||{}),Lc=(V=>(V.Go="go",V.Html="html",V.Json="json",V.Markdown="markdown",V.Plaintext="plaintext",V.Sql="sql",V.Typescript="typescript",V.Xml="xml",V.Yaml="yaml",V))(Lc||{});const Vf="plaintext",Ao={language:"plaintext",showLineNumbers:!1,showMiniMap:!1},Lo={content:`# Title

For markdown syntax help: [commonmark.org/help](https://commonmark.org/help/)`,mode:"markdown"};function Bc(V){const q=(0,ft.wW)(gm),[se,Ee]=(0,S.useState)({mode:V.options.mode,content:wc(V.options,V.replaceVariables,_.ZP.disableSanitizeHtml)});if((0,fm.Z)(()=>{const{options:Me,replaceVariables:Ue}=V,Ne=wc(Me,Ue,_.ZP.disableSanitizeHtml);(Ne!==se.content||Me.mode!==se.mode)&&Ee({mode:Me.mode,content:Ne})},100,[V]),se.mode===Ws.Code){const Me=V.options.code??Ao;return S.createElement(ki.p,{key:`${Me.showLineNumbers}/${Me.showMiniMap}`,value:se.content,language:Me.language??Ao.language,width:V.width,height:V.height,containerStyles:q.codeEditorContainer,showMiniMap:Me.showMiniMap,showLineNumbers:Me.showLineNumbers,readOnly:!0})}return S.createElement(et.$,{autoHeightMin:"100%"},S.createElement(mm.Z,{html:se.content,className:q.markdown,"data-testid":"TextPanel-converted-content"}))}function wc(V,q,se){let{mode:Ee,content:Me}=V;if(!Me)return"";switch(Me=q(Me,{},V.code?.language==="json"?"json":"html"),Ee){case Ws.Code:break;case Ws.HTML:se||(Me=Cr.QX.sanitizeTextPanelContent(Me));break;case Ws.Markdown:default:Me=(0,Ac.x)(Me,{noSanitize:se})}return Me}const gm=V=>({codeEditorContainer:b.css`
    .monaco-editor .margin,
    .monaco-editor-background {
      background-color: ${V.colors.background.primary};
    }
  `,markdown:(0,b.cx)("markdown-html",b.css`
      height: 100%;
    `)});var pm=e(89050),hm=e(25503);const vm=({value:V,onChange:q,context:se})=>{const Ee=(0,S.useMemo)(()=>se.options?.mode??Ws.Markdown,[se]),Me=(0,ft.wW)(dl),Ue=()=>se.getSuggestions?se.getSuggestions().map(Ne=>(0,hm.T)(Ne)):[];return S.createElement("div",{className:(0,b.cx)(Me.editorBox)},S.createElement(pm.Z,{disableHeight:!0},({width:Ne})=>Ne===0?null:S.createElement(ki.p,{value:V,onBlur:q,onSave:q,language:Ee,width:Ne,showMiniMap:!1,showLineNumbers:!1,height:"500px",getSuggestions:Ue})))},dl=V=>({editorBox:b.css`
    label: editorBox;
    border: 1px solid ${V.colors.border.medium};
    border-radius: ${V.shape.borderRadius(1)};
    margin: ${V.spacing(.5)} 0;
    width: 100%;
  `}),Nc=V=>{const q=parseFloat(V.pluginVersion||"6.1");let se=V.options;if(V.hasOwnProperty("content")&&V.hasOwnProperty("mode")){const Me=V,Ue=Me.content,Ne=Me.mode;delete Me.content,delete Me.mode,q<7.1&&(se={content:Ue,mode:Ne})}return[Ws.Code,Ws.HTML,Ws.Markdown].find(Me=>Me===se.mode)||(se={...se,mode:Ws.Markdown}),se},Em=new ce.c(Bc).setPanelOptions(V=>{V.addRadio({path:"mode",name:"Mode",settings:{options:[{value:Ws.Markdown,label:"Markdown"},{value:Ws.HTML,label:"HTML"},{value:Ws.Code,label:"Code"}]},defaultValue:Lo.mode}).addSelect({path:"code.language",name:"Language",settings:{options:Object.values(Lc).map(q=>({value:q,label:q}))},defaultValue:Ao.language,showIf:q=>q.mode===Ws.Code}).addBooleanSwitch({path:"code.showLineNumbers",name:"Show line numbers",defaultValue:Ao.showLineNumbers,showIf:q=>q.mode===Ws.Code}).addBooleanSwitch({path:"code.showMiniMap",name:"Show mini map",defaultValue:Ao.showMiniMap,showIf:q=>q.mode===Ws.Code}).addCustomEditor({id:"content",path:"content",name:"Content",editor:vm,defaultValue:Lo.content})}).setMigrationHandler(Nc);var ym=e(16366);const Pm=({data:V,timeRange:q,timeZone:se,width:Ee,height:Me,options:Ue,fieldConfig:Ne,onChangeTimeRange:st,replaceVariables:lt,id:vt})=>{const{sync:gt,canAddAnnotations:Mt,onThresholdsChange:Lt,canEditThresholds:It,showThresholds:Yt,onSplitOpen:Zt}=(0,bt.R9)(),rn=(_t,Mn)=>(0,Eo.a_)({field:_t,rowIndex:Mn,splitOpenFn:Zt,range:q}),Nt=(0,S.useMemo)(()=>Ul(V.series,_.vc.theme2,q),[V,q]),kt=(0,S.useMemo)(()=>wi(Ue.timezone,se),[Ue.timezone,se]);if(!Nt)return S.createElement(Tt.Z,{panelId:vt,fieldConfig:Ne,data:V,needsTimeField:!0,needsNumberField:!0});const Ut=Boolean(Mt&&Mt());return S.createElement(Mi.p,{frames:Nt,structureRev:V.structureRev,timeRange:q,timeZone:kt,width:Ee,height:Me,legend:Ue.legend,options:Ue},(_t,Mn)=>(Mn.fields.filter(an=>an.config.links!==void 0&&an.config.links.length>0).length>0&&(Mn=$d(Mn,Nt,lt,se)),S.createElement(S.Fragment,null,S.createElement(ym.C,{config:_t}),S.createElement(Vo.R,{config:_t,onZoom:st}),Ue.tooltip.mode===xe.f3.None||S.createElement(_n.i,{frames:Nt,data:Mn,config:_t,mode:Ue.tooltip.mode,sortOrder:Ue.tooltip.sort,sync:gt,timeZone:se}),V.annotations&&S.createElement(ko,{annotations:V.annotations,config:_t,timeZone:se}),Ut?S.createElement(fs,{data:Mn,timeZone:se,config:_t},({startAnnotating:an})=>S.createElement(Yo,{data:Mn,config:_t,timeZone:se,replaceVariables:lt,defaultItems:[{items:[{label:"Add annotation",ariaLabel:"Add annotation",icon:"comment-alt",onClick:(An,On)=>{On&&an({coords:On.coords})}}]}]})):S.createElement(Yo,{data:Mn,frames:Nt,config:_t,timeZone:se,replaceVariables:lt,defaultItems:[]}),V.annotations&&S.createElement(bn,{visibleSeries:Nl(_t,Nt),config:_t,exemplars:V.annotations,timeZone:se,getFieldLinks:rn}),(It&&Lt||Yt)&&S.createElement(Li,{config:_t,fieldConfig:Ne,onThresholdsChange:It?Lt:void 0}),S.createElement(Co,{config:_t,onChangeTimeRange:st}))))};var ul=e(38306),Uc=e(52566);const Fc=({value:V,onChange:q})=>{const se=(0,ft.wW)(Cm);(!V||V.length<1)&&(V=[""]);const Ee=()=>{q([...V,ul.RQ.default])},Me=Ne=>{const st=V.slice();st.splice(Ne,1),q(st)},Ue=(Ne,st)=>{const lt=V.slice();lt[Ne]=st??ul.RQ.default,lt.length===0||lt.length===1&&lt[0]===""?q(void 0):q(lt)};return S.createElement("div",null,V.map((Ne,st)=>S.createElement("div",{className:se.wrapper,key:`${st}.${Ne}`},S.createElement("span",{className:se.first},S.createElement(Uc.O,{onChange:lt=>Ue(st,lt),includeInternal:!0,value:Ne??ul.RQ.default})),st===V.length-1?S.createElement(no.h,{ariaLabel:"Add timezone",name:"plus",onClick:Ee}):S.createElement(no.h,{ariaLabel:"Remove timezone",name:"times",onClick:()=>Me(st)}))))},Cm=V=>({wrapper:b.css`
    width: 100%;
    display: flex;
    flex-direction: rows;
    align-items: center;
  `,first:b.css`
    margin-right: 8px;
    flex-grow: 2;
  `}),ml=(V,q,se,Ee)=>{if(q==="graph"&&se.angular){const{fieldConfig:Me,options:Ue}=xm({...se.angular,fieldConfig:Ee});return V.fieldConfig=Me,V.alert=se.angular.alert,Ue}return Mm(V),{}};function xm(V){const q=V.fieldConfig?.overrides??[],se=V.yaxes??[];let Ee=Wc(se[0]);V.fieldConfig?.defaults&&(Ee={...V.fieldConfig?.defaults,...Ee});const Me={fill:V.dashes?"dash":"solid",dash:[V.dashLength??10,V.spaceLength??10]};if(V.aliasColors)for(const gt of Object.keys(V.aliasColors)){const Mt=V.aliasColors[gt];Mt&&q.push({matcher:{id:Yr.mi.byName,options:gt},properties:[{id:Za.qb.Color,value:{mode:Ze.S.Fixed,fixedColor:Mt}}]})}let Ue=!1;if(V.seriesOverrides?.length)for(const gt of V.seriesOverrides){if(!gt.alias)continue;const Lt={matcher:{id:/^([/~@;%#'])(.*?)\1([gimsuy]*)$/.test(gt.alias)?Yr.mi.byRegexp:Yr.mi.byName,options:gt.alias},properties:[]};let It;for(const Yt of Object.keys(gt)){const Zt=gt[Yt];switch(Yt){case"alias":case"$$hashKey":break;case"yaxis":if(Zt===2){const rn=Wc(se[1]);Dm(Ee,rn,Lt.properties)}break;case"fill":Lt.properties.push({id:"custom.fillOpacity",value:Zt*10});break;case"fillBelowTo":Ue=!0,Lt.properties.push({id:"custom.fillBelowTo",value:Zt});break;case"fillGradient":Zt&&(Lt.properties.push({id:"custom.fillGradient",value:"opacity"}),Lt.properties.push({id:"custom.fillOpacity",value:Zt*10}));break;case"points":Lt.properties.push({id:"custom.showPoints",value:Zt?xe.Jp.Always:xe.Jp.Never});break;case"bars":Zt?(Lt.properties.push({id:"custom.drawStyle",value:xe.l8.Bars}),Lt.properties.push({id:"custom.fillOpacity",value:100})):Lt.properties.push({id:"custom.drawStyle",value:xe.l8.Line});break;case"lines":Lt.properties.push({id:"custom.lineWidth",value:0});break;case"linewidth":Lt.properties.push({id:"custom.lineWidth",value:Zt});break;case"pointradius":Lt.properties.push({id:"custom.pointSize",value:2+Zt*2});break;case"dashLength":case"spaceLength":case"dashes":switch(It||(It={fill:Me.fill,dash:[...Me.dash]}),Yt){case"dashLength":It.dash[0]=Zt;break;case"spaceLength":It.dash[1]=Zt;break;case"dashes":It.fill=Zt?"dash":"solid";break}break;case"stack":Lt.properties.push({id:"custom.stacking",value:{mode:xe.o0.Normal,group:Zt}});break;case"color":Lt.properties.push({id:"color",value:{fixedColor:Zt,mode:Ze.S.Fixed}});break;case"transform":Lt.properties.push({id:"custom.transform",value:Zt==="negative-Y"?xe.pR.NegativeY:xe.pR.Constant});break;default:console.log("Ignore override migration:",gt.alias,Yt,Zt)}}It&&Lt.properties.push({id:"custom.lineStyle",value:It}),Lt.properties.length&&q.push(Lt)}const Ne=Ee.custom??{};Ne.drawStyle=V.bars?xe.l8.Bars:V.lines?xe.l8.Line:xe.l8.Points,V.points?(Ne.showPoints=xe.Jp.Always,(0,I.isNumber)(V.pointradius)&&(Ne.pointSize=2+V.pointradius*2)):Ne.drawStyle!==xe.l8.Points&&(Ne.showPoints=xe.Jp.Never),Ne.lineWidth=V.linewidth,Me.fill!=="solid"&&(Ne.lineStyle=Me),Ue?Ne.fillOpacity=35:(0,I.isNumber)(V.fill)&&(Ne.fillOpacity=V.fill*10),(0,I.isNumber)(V.fillGradient)&&V.fillGradient>0&&(Ne.gradientMode=xe.FI.Opacity,Ne.fillOpacity=V.fillGradient*10),Ne.spanNulls=V.nullPointMode===Jl.Gl.Ignore,V.steppedLine&&(Ne.lineInterpolation=xe.KC.StepAfter),Ne.drawStyle===xe.l8.Bars&&(Ne.fillOpacity=100),V.stack&&(Ne.stacking={mode:xe.o0.Normal,group:to.r.stacking.group}),Ee.custom=(0,I.omitBy)(Ne,I.isNil),Ee.nullValueMode=V.nullPointMode;const st={legend:{displayMode:xe.jK.List,showLegend:!0,placement:"bottom",calcs:[]},tooltip:{mode:xe.f3.Single,sort:xe.As.None}},lt=V.legend;if(lt){if(lt.show?st.legend.displayMode=lt.alignAsTable?xe.jK.Table:xe.jK.List:st.legend.showLegend=!1,lt.rightSide&&(st.legend.placement="right"),V.legend.values){const gt=(0,I.pickBy)(V.legend);st.legend.calcs=bm(gt)}V.legend.sideWidth&&(st.legend.width=V.legend.sideWidth)}const vt=V.tooltip;if(vt&&(vt.shared!==void 0&&(st.tooltip.mode=vt.shared?xe.f3.Multi:xe.f3.Single),vt.sort!==void 0&&vt.shared))switch(vt.sort){case 1:st.tooltip.sort=xe.As.Ascending;break;case 2:st.tooltip.sort=xe.As.Descending;break;default:st.tooltip.sort=xe.As.None}if(V.thresholds&&V.thresholds.length>0){let gt=[],Mt=!1,Lt=!1;const It=V.thresholds.sort((Zt,rn)=>Zt.value>rn.value?1:-1);for(let Zt=0;Zt<It.length;Zt++){const rn=It[Zt],Nt=It.length>Zt+1?It[Zt+1]:null;rn.fill&&(Mt=!0),rn.line&&(Lt=!0),rn.op==="gt"&&gt.push({value:rn.value,color:fl(rn)}),rn.op==="lt"&&(gt.length===0&&gt.push({value:-1/0,color:fl(rn)}),Nt&&Nt.op==="gt"&&Nt.value>rn.value?gt.push({value:rn.value,color:"transparent"}):Nt&&Nt.op==="lt"?gt.push({value:rn.value,color:fl(Nt)}):gt.push({value:rn.value,color:"transparent"}))}gt.length>0&&gt[0].value!==-1/0&&gt.unshift({color:"transparent",value:-1/0});let Yt=Mt?xe.i3.Area:xe.i3.Line;Lt&&Mt&&(Yt=xe.i3.LineAndArea),Ee.custom.thresholdsStyle={mode:Yt},Ee.thresholds={mode:cl.H.Absolute,steps:gt}}return V.xaxis&&V.xaxis.show===!1&&V.xaxis.mode==="time"&&q.push({matcher:{id:Yr.mi.byType,options:we.fS.time},properties:[{id:"custom.axisPlacement",value:xe.LB.Hidden}]}),{fieldConfig:{defaults:(0,I.omitBy)(Ee,I.isNil),overrides:q},options:st}}function fl(V){return V.colorMode==="critical"?"red":V.colorMode==="warning"?"orange":V.colorMode==="custom"?V.fillColor||V.lineColor:"red"}function Wc(V){if(!V)return{};const q={axisPlacement:V.show?xe.LB.Auto:xe.LB.Hidden};if(V.label&&(q.axisLabel=V.label),V.logBase){const se=V.logBase;(se===2||se===10)&&(q.scaleDistribution={type:xe.wf.Log,log:se})}return(0,I.omitBy)({unit:V.format,decimals:gl(V.decimals),min:gl(V.min),max:gl(V.max),custom:q},I.isNil)}function Dm(V,q,se){for(const Ue of Object.keys(q)){const Ne=q[Ue];Ue!=="custom"&&Ne!==V[Ue]&&se.push({id:Ue,value:Ne})}const Ee=V.custom??{},Me=q.custom??{};for(const Ue of Object.keys(Me)){const Ne=Me[Ue];Ne!==Ee[Ue]&&se.push({id:`custom.${Ue}`,value:Ne})}}function gl(V){if((0,I.isNumber)(V))return V;if((0,I.isString)(V)){const q=Number(V);if(!isNaN(q))return q}}function bm(V){const q=[];for(const se of Object.keys(V)){const Ee=es.TB.getIfExists(se);Ee&&q.push(Ee.id)}return q}function Mm(V){V.fieldConfig?.defaults?.custom?.hideFrom?.graph!==void 0&&(V.fieldConfig.defaults.custom.hideFrom.viz=V.fieldConfig.defaults.custom.hideFrom.graph,delete V.fieldConfig.defaults.custom.hideFrom.graph),V.fieldConfig?.overrides&&(V.fieldConfig.overrides=V.fieldConfig.overrides.map(q=>(q.properties=q.properties.map(se=>(se.id==="custom.hideFrom"&&se.value.graph&&(se.value.viz=se.value.graph,delete se.value.graph),se)),q)))}class Sm{getSuggestionsForData(q){const{dataSummary:se}=q;if(!se.hasTimeField||!se.hasNumberField||se.rowCountTotal<2)return;const Ee=q.getListAppender({name:Ca.y.LineChart,pluginId:"timeseries",options:{legend:{}},fieldConfig:{defaults:{custom:{}},overrides:[]},cardOptions:{previewModifier:Ue=>{Ue.options.legend.showLegend=!1,Ue.fieldConfig?.defaults.custom?.drawStyle!==xe.l8.Bars&&(Ue.fieldConfig.defaults.custom.lineWidth=Math.max(Ue.fieldConfig.defaults.custom.lineWidth??1,2))}}}),Me=100;if(Ee.append({name:Ca.y.LineChart}),se.rowCountMax<200&&Ee.append({name:Ca.y.LineChartSmooth,fieldConfig:{defaults:{custom:{lineInterpolation:xe.KC.Smooth}},overrides:[]}}),se.numberFieldCount===1){Ee.append({name:Ca.y.AreaChart,fieldConfig:{defaults:{custom:{fillOpacity:25}},overrides:[]}}),Ee.append({name:Ca.y.LineChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Ze.S.ContinuousGrYlRd},custom:{gradientMode:xe.FI.Scheme,lineInterpolation:xe.KC.Smooth,lineWidth:3,fillOpacity:20}},overrides:[]}}),se.rowCountMax<Me&&(Ee.append({name:Ca.y.BarChart,fieldConfig:{defaults:{custom:{drawStyle:xe.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xe.FI.Hue}},overrides:[]}}),Ee.append({name:Ca.y.BarChartGradientColorScheme,fieldConfig:{defaults:{color:{mode:Ze.S.ContinuousGrYlRd},custom:{drawStyle:xe.l8.Bars,fillOpacity:90,lineWidth:1,gradientMode:xe.FI.Scheme}},overrides:[]}}));return}Ee.append({name:Ca.y.AreaChartStacked,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:xe.o0.Normal,group:"A"}}},overrides:[]}}),Ee.append({name:Ca.y.AreaChartStackedPercent,fieldConfig:{defaults:{custom:{fillOpacity:25,stacking:{mode:xe.o0.Percent,group:"A"}}},overrides:[]}}),se.rowCountTotal/se.numberFieldCount<Me&&(Ee.append({name:Ca.y.BarChartStacked,fieldConfig:{defaults:{custom:{drawStyle:xe.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xe.FI.Hue,stacking:{mode:xe.o0.Normal,group:"A"}}},overrides:[]}}),Ee.append({name:Ca.y.BarChartStackedPercent,fieldConfig:{defaults:{custom:{drawStyle:xe.l8.Bars,fillOpacity:100,lineWidth:1,gradientMode:xe.FI.Hue,stacking:{mode:xe.o0.Percent,group:"A"}}},overrides:[]}}))}}const Om=new ce.c(Pm).setPanelChangeHandler(ml).useFieldConfig((0,to.F)(to.r)).setPanelOptions(V=>{Kt.L(V),fn.J(V),V.addCustomEditor({id:"timezone",name:"Time zone",path:"timezone",category:["Axis"],editor:Fc,defaultValue:void 0})}).setSuggestionsSupplier(new Sm).setDataSupport({annotations:!0,alertStates:!0});var Tm=e(86647),$c=e(94619),Kc=e(72169),pl=e(93183),Im=e(75151),Rm=e(335);const Vc={wrapper:b.css`
    height: 100%;
    overflow: scroll;
  `},Am=({data:V})=>{const q=(0,S.createRef)(),se=(0,S.useMemo)(()=>(0,Rm.N)(V.series[0]),[V.series]),{search:Ee,setSearch:Me,spanFindMatches:Ue}=(0,Im.R)(se?.spans),[Ne,st]=(0,S.useState)(""),[lt,vt]=(0,S.useState)(""),gt=(0,St.Z)(async()=>await(0,Tm.F)().get(V.request?.targets[0].datasource?.uid)),Mt=document.getElementsByClassName(Vc.wrapper)[0],Lt=gt&&gt.value?gt.value.type:"unknown";return!V||!V.series.length||!se?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,"No data found in response")):S.createElement("div",{className:Vc.wrapper},S.createElement("div",{ref:q}),Ae.v.featureToggles.newTraceView?null:S.createElement(Kc.Z,{navigable:!0,searchValue:Ee,setSearch:Me,spanFindMatches:Ue,searchBarSuffix:lt,setSearchBarSuffix:vt,focusedSpanIdForSearch:Ne,setFocusedSpanIdForSearch:st,datasourceType:Lt}),S.createElement($c.m,{dataFrames:V.series,scrollElement:Mt,traceProp:se,spanFindMatches:Ue,search:Ee,focusedSpanIdForSearch:Ne,queryResponse:V,datasource:gt.value,topOfViewRef:q,topOfViewRefType:pl.l4.Panel}))},Lm=new ce.c(Am),Bm=[{value:0,label:"Documentation",href:"https://grafana.com/docs/grafana/latest"},{value:1,label:"Tutorials",href:"https://grafana.com/tutorials"},{value:2,label:"Community",href:"https://community.grafana.com"},{value:3,label:"Public Slack",href:"http://slack.grafana.com"}],wm=()=>{const V=(0,ft.wW)(Nm);return S.createElement("div",{className:V.container},S.createElement("h1",{className:V.title},"Welcome to Grafana"),S.createElement("div",{className:V.help},S.createElement("h3",{className:V.helpText},"Need help?"),S.createElement("div",{className:V.helpLinks},Bm.map((q,se)=>S.createElement("a",{key:`${q.label}-${se}`,className:V.helpLink,href:`${q.href}?utm_source=grafana_gettingstarted`},q.label)))))},Nm=V=>({container:b.css`
      display: flex;
      /// background: url(public/img/g8_home_v2.svg) no-repeat;
      background-size: cover;
      height: 100%;
      align-items: center;
      padding: 0 16px;
      justify-content: space-between;
      padding: 0 ${V.spacing(3)};

      ${V.breakpoints.down("lg")} {
        background-position: 0px;
        flex-direction: column;
        align-items: flex-start;
        justify-content: center;
      }

      ${V.breakpoints.down("sm")} {
        padding: 0 ${V.spacing(1)};
      }
    `,title:b.css`
      margin-bottom: 0;

      ${V.breakpoints.down("lg")} {
        margin-bottom: ${V.spacing(1)};
      }

      ${V.breakpoints.down("md")} {
        font-size: ${V.typography.h2.fontSize};
      }
      ${V.breakpoints.down("sm")} {
        font-size: ${V.typography.h3.fontSize};
      }
    `,help:b.css`
      display: flex;
      align-items: baseline;
    `,helpText:b.css`
      margin-right: ${V.spacing(2)};
      margin-bottom: 0;

      ${V.breakpoints.down("md")} {
        font-size: ${V.typography.h4.fontSize};
      }

      ${V.breakpoints.down("sm")} {
        display: none;
      }
    `,helpLinks:b.css`
      display: flex;
      flex-wrap: wrap;
    `,helpLink:b.css`
      margin-right: ${V.spacing(2)};
      text-decoration: underline;
      text-wrap: no-wrap;

      ${V.breakpoints.down("sm")} {
        margin-right: 8px;
      }
    `}),Um=new ce.c(wm).setNoPadding();var Fm=(V=>(V[V.NoData=0]="NoData",V[V.BadFrameSelection=1]="BadFrameSelection",V[V.XNotFound=2]="XNotFound",V))(Fm||{});function Bo(V){return V.type===we.fS.number}function Wm(V,q){if(!q||!q.length)return{error:0};V||(V={frame:0});let se=q[V.frame??0];if(!se)return{error:1};let Ee=-1;for(let st=0;st<se.fields.length;st++){const lt=se.fields[st];if(V.x&&V.x===(0,Ct.C)(lt,se,q)){Ee=st;break}if(Bo(lt)&&!V.x){Ee=st;break}}let Me=!1;const Ue=se.fields[Ee],Ne=[Ue];for(const st of se.fields)if(st.type===we.fS.time&&(Me=!0),!(st===Ue||!Bo(st))){if(V.exclude){const lt=(0,Ct.C)(st,se,q);if(V.exclude.includes(lt))continue}Ne.push(st)}return{x:Ue,fields:{x:zc(Ue),y:$m(Ue)},frame:{...se,fields:Ne},hasData:se.fields.length>0,hasTime:Me}}function zc(V){return V?q=>V===q||!!(V.state&&V.state===q.state):()=>!1}function $m(V){if(!V)return()=>!1;const q=zc(V);return se=>!q(se,void 0,void 0)}const Km=({value:V,onChange:q,context:se})=>{const Ee=(0,S.useMemo)(()=>se?.data?.length?se.data.map((st,lt)=>({value:lt,label:(0,Ct.n)(st,lt)})):[{value:0,label:"First result"}],[se.data]),Me=(0,S.useMemo)(()=>Wm(V,se.data),[se.data,V]),Ue=(0,S.useMemo)(()=>{const st={label:"?",value:void 0},lt={numberFields:[st],yFields:[],xAxis:V?.x?{label:`${V.x} (Not found)`,value:V.x}:st},vt=se.data?se.data[V?.frame??0]:void 0;if(vt){const gt=Me.x?(0,Ct.C)(Me.x,Me.frame,se.data):void 0;for(let Mt of vt.fields)if(Bo(Mt)){const Lt=(0,Ct.C)(Mt,vt,se.data),It={label:Lt,value:Lt};lt.numberFields.push(It),st.label==="?"&&(st.label=`${Lt} (First)`),V?.x&&Lt===V.x&&(lt.xAxis=It),gt!==Lt&&lt.yFields.push({label:Lt,value:V?.exclude?.includes(Lt)})}}return lt},[Me,se.data,V]),Ne=(0,ft.wW)(Vm);return se.data?S.createElement("div",null,S.createElement(ks.g,{label:"Data"},S.createElement(Ke.Ph,{options:Ee,value:Ee.find(st=>st.value===V?.frame)??Ee[0],onChange:st=>{q({...V,frame:st.value})}})),S.createElement(ks.g,{label:"X Field"},S.createElement(Ke.Ph,{options:Ue.numberFields,value:Ue.xAxis,onChange:st=>{q({...V,x:st.value})}})),S.createElement(ks.g,{label:"Y Fields"},S.createElement("div",null,Ue.yFields.map(st=>S.createElement("div",{key:st.label,className:Ne.row},S.createElement(no.h,{name:st.value?"eye-slash":"eye",onClick:()=>{const lt=V?.exclude?[...V.exclude]:[];let vt=lt.indexOf(st.label);vt<0?lt.push(st.label):lt.splice(vt,1),q({...V,exclude:lt})}}),st.label))))):S.createElement("div",null,"No data...")},Vm=V=>({sorter:b.css`
    margin-top: 10px;
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    cursor: pointer;
  `,row:b.css`
    padding: ${V.spacing(.5,1)};
    border-radius: ${V.shape.borderRadius(1)};
    background: ${V.colors.background.secondary};
    min-height: ${V.spacing(4)};
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    margin-bottom: 3px;
    border: 1px solid ${V.components.input.borderColor};
  `});var zm=e(93022),hl=e(54643);const Hm=Object.freeze([0,0]);var vl=(V=>(V.Auto="auto",V.Manual="manual",V))(vl||{}),Wr=(V=>(V.Lines="lines",V.Points="points",V.PointsAndLines="points+lines",V))(Wr||{});const zf={exclude:[]},km={label:xe.Jp.Auto,show:"points"},Gm={series:[]},gi={...km},Hf=({value:V,onChange:q,context:se})=>{const[Ee,Me]=(0,S.useState)(0),Ue=(0,ft.wW)(kf),Ne=(gt,Mt,Lt)=>{q(V.map((It,Yt)=>Yt===Mt?{...It,[Lt]:gt}:It))},st=()=>{q([...V,{pointColor:{},pointSize:gi.pointSize}]),Me(V.length)};(0,S.useEffect)(()=>{V?.length||st()},[]);const lt=gt=>{q(V.filter((Mt,Lt)=>Lt!==gt))},vt=gt=>gt===Ee?`${Ue.row} ${Ue.sel}`:Ue.row;return S.createElement(S.Fragment,null,S.createElement(Re.zx,{icon:"plus",size:"sm",variant:"secondary",onClick:st,className:Ue.marginBot},"Add series"),S.createElement("div",{className:Ue.marginBot},V.map((gt,Mt)=>S.createElement("div",{key:`series/${Mt}`,className:vt(Mt),onMouseDown:()=>Me(Mt)},S.createElement(zm.X,{name:gt.name??`Series ${Mt+1}`,onChange:Lt=>Ne(Lt,Mt,"name")}),S.createElement(no.h,{name:"trash-alt",title:"remove",className:(0,b.cx)(Ue.actionIcon),onClick:()=>lt(Mt)})))),Ee>=0&&V[Ee]&&S.createElement(S.Fragment,null,S.createElement("div",{key:`series/${Ee}`},S.createElement(ks.g,{label:"X Field"},S.createElement(Zi.b,{value:V[Ee].x??"",context:se,onChange:gt=>Ne(gt,Ee,"x"),item:{}})),S.createElement(ks.g,{label:"Y Field"},S.createElement(Zi.b,{value:V[Ee].y??"",context:se,onChange:gt=>Ne(gt,Ee,"y"),item:{}})),S.createElement(ks.g,{label:"Point color"},S.createElement(hl.Lm,{value:V[Ee].pointColor,context:se,onChange:gt=>Ne(gt,Ee,"pointColor"),item:{}})),S.createElement(ks.g,{label:"Point size"},S.createElement(hl.cL,{value:V[Ee].pointSize,context:se,onChange:gt=>Ne(gt,Ee,"pointSize"),item:{settings:{min:1,max:100}}})))))},kf=V=>({marginBot:b.css`
    margin-bottom: 20px;
  `,row:b.css`
    padding: ${V.spacing(.5,1)};
    border-radius: ${V.shape.borderRadius(1)};
    background: ${V.colors.background.secondary};
    min-height: ${V.spacing(4)};
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3px;
    cursor: pointer;

    border: 1px solid ${V.components.input.borderColor};
    &:hover {
      border: 1px solid ${V.components.input.borderHover};
    }
  `,sel:b.css`
    border: 1px solid ${V.colors.primary.border};
    &:hover {
      border: 1px solid ${V.colors.primary.border};
    }
  `,actionIcon:b.css`
    color: ${V.colors.text.secondary};
    &:hover {
      color: ${V.colors.text};
    }
  `});var Hc=e(54291),Ym=(V=>(V.Points="points",V.Lines="lines",V.PointsAndLines="points+lines",V))(Ym||{}),El=(V=>(V.Auto="auto",V.Manual="manual",V))(El||{});const jm={show:"points",lineWidth:1,lineStyle:{fill:"solid"},pointSize:{fixed:5,min:1,max:20},axisPlacement:xe.LB.Auto},Qm=({allSeries:V,data:q,manualSeriesConfigs:se,seriesMapping:Ee,rowIndex:Me,hoveredPointIndex:Ue,options:Ne,range:st})=>{const lt=(0,ft.wW)(kc),{onSplitOpen:vt}=(0,bt.R9)();if(!V||Me==null)return null;const gt=V[Ue],Mt=gt.frame(q),Lt=gt.x(Mt),It=gt.y(Mt),Yt=(0,Eo.a_)({field:It,splitOpenFn:vt,rowIndex:Me,range:st});let Zt=Mt.fields.filter(kt=>kt!==Lt&&kt!==It),rn=null,Nt=null;if(Ee===El.Manual&&se){const kt=se[Ue].pointColor?.field??"",Ut=se[Ue].pointSize?.field??"",_t=kt?(0,us.findField)(Mt,kt):void 0,Mn=Ut?(0,us.findField)(Mt,Ut):void 0;Nt={colorFacetFieldName:kt,sizeFacetFieldName:Ut,colorFacetValue:_t?.values.get(Me),sizeFacetValue:Mn?.values.get(Me)},Zt=Zt.filter(an=>an!==_t&&an!==Mn)}return rn={name:(0,Ct.C)(It,Mt),val:It.values.get(Me),field:It,color:gt.pointColor(Mt)},S.createElement(S.Fragment,null,S.createElement("table",{className:lt.infoWrap},S.createElement("tr",null,S.createElement("th",{colSpan:2,style:{backgroundColor:rn.color}})),S.createElement("tbody",null,S.createElement("tr",null,S.createElement("th",null,(0,Ct.C)(Lt,Mt)),S.createElement("td",null,yl(Lt,Lt.values.get(Me)))),S.createElement("tr",null,S.createElement("th",null,rn.name,":"),S.createElement("td",null,yl(rn.field,rn.val))),Nt!==null&&Nt.colorFacetFieldName&&S.createElement("tr",null,S.createElement("th",null,Nt.colorFacetFieldName,":"),S.createElement("td",null,Nt.colorFacetValue)),Nt!==null&&Nt.sizeFacetFieldName&&S.createElement("tr",null,S.createElement("th",null,Nt.sizeFacetFieldName,":"),S.createElement("td",null,Nt.sizeFacetValue)),Zt.map((kt,Ut)=>S.createElement("tr",{key:Ut},S.createElement("th",null,(0,Ct.C)(kt,Mt),":"),S.createElement("td",null,yl(kt,kt.values.get(Me))))),Yt.length>0&&S.createElement("tr",null,S.createElement("td",{colSpan:2},S.createElement(eo.wc,null,Yt.map((kt,Ut)=>S.createElement(Re.Qj,{key:Ut,icon:"external-link-alt",target:kt.target,href:kt.href,onClick:kt.onClick,fill:"text",style:{width:"100%"}},kt.title))))))))};function yl(V,q){return V.display?(0,Wa.zc)(V.display(q)):`${q}`}const kc=V=>({infoWrap:b.css`
    padding: 8px;
    width: 100%;
    th {
      font-weight: ${V.typography.fontWeightMedium};
      padding: ${V.spacing(.25,2)};
    }
  `,highlight:b.css`
    background: ${V.colors.action.hover};
  `,xVal:b.css`
    font-weight: ${V.typography.fontWeightBold};
  `,icon:b.css`
    margin-right: ${V.spacing(1)};
    vertical-align: middle;
  `});function Gc(V,q,se,Ee,Me,Ue){let Ne,st;try{Ne=Zm(V,q()),st=Jm(q,Ne,se,Ee,Me,Ue)}catch(lt){let vt="Unknown error in prepScatter";return typeof lt=="string"?vt=lt:lt instanceof Error&&(vt=lt.message),{error:vt,series:[]}}return{series:Ne,builder:st}}function Yc(V,q,se,Ee,Me,Ue){const Ne=q[se],st=Ne.fields[Me];let lt=st.state??{};lt.seriesIndex=V,st.state=lt;let vt=Ue.pointColorFixed?Ae.v.theme2.visualization.getColorByName(Ue.pointColorFixed):(0,hs.YO)(st,Ae.v.theme2).color,gt=()=>vt;const Mt={...gi,...st.config.custom};let Lt=hs.WO.get(Ze.S.PaletteClassic);if(Ue.pointColorIndex){const Nt=q[se].fields[Ue.pointColorIndex];if(Nt){const kt=Nt.display??(0,qa.U_)({field:Nt,theme:Ae.v.theme2});if(Lt=(0,hs.fD)(st),Lt.isByValue){const Ut=Ue.pointColorIndex;gt=_t=>_t.fields[Ut].values.toArray().map(Mn=>kt(Mn).color)}else vt=Lt.getCalculator(Nt,Ae.v.theme2)(Nt.values.get(0),1),gt=()=>vt}}let It=Ue.pointSizeConfig,Yt=Ue.pointSizeConfig?.fixed??st.config.custom?.pointSize?.fixed??5,Zt=()=>Yt;Ue.pointSizeIndex?Zt=Nt=>{const kt=(0,us.getScaledDimensionForField)(Nt.fields[Ue.pointSizeIndex],Ue.pointSizeConfig,us.ScaleDimensionMode.Quadratic),Ut=Array(Nt.length);for(let _t=0;_t<Nt.length;_t++)Ut[_t]=kt.get(_t);return Ut}:It={fixed:Yt,min:Yt,max:Yt};const rn=(0,Ct.C)(st,Ne,q);return{name:rn,frame:Nt=>Nt[se],x:Nt=>Nt.fields[Ee],y:Nt=>Nt.fields[Me],legend:()=>[{label:rn,color:vt,getItemKey:()=>rn,yAxis:Me}],showLine:Mt.show!==Wr.Points,lineWidth:Mt.lineWidth??2,lineStyle:Mt.lineStyle,lineColor:()=>vt,showPoints:Mt.show!==Wr.Lines?xe.Jp.Always:xe.Jp.Never,pointSize:Zt,pointColor:gt,pointSymbol:(Nt,kt)=>"circle",label:xe.Jp.Never,labelValue:()=>"",show:!Ne.fields[Me].config.custom.hideFrom?.viz,hints:{pointSize:It,pointColor:{mode:Lt}}}}function Zm(V,q){let se=0;if(!q.length)throw"Missing data";if(V.seriesMapping==="manual"){if(!V.series?.length)throw"Missing series config";const lt=[];for(const vt of V.series){if(!vt?.x)throw"Select X dimension";if(!vt?.y)throw"Select Y dimension";for(let gt=0;gt<q.length;gt++){const Mt=q[gt],Lt=(0,us.findFieldIndex)(Mt,vt.x);if(Lt!=null){const It=(0,us.findFieldIndex)(Mt,vt.y);if(It==null)throw"Y must be in the same frame as X";const Yt={pointColorFixed:vt.pointColor?.fixed,pointColorIndex:(0,us.findFieldIndex)(Mt,vt.pointColor?.field),pointSizeConfig:vt.pointSize,pointSizeIndex:(0,us.findFieldIndex)(Mt,vt.pointSize?.field)};lt.push(Yc(se++,q,gt,Lt,It,Yt))}}}return lt}const Ee=V.dims??{},Me=Ee.frame??0,Ue=q[Me],Ne=[];let st=(0,us.findFieldIndex)(Ue,Ee.x);for(let lt=0;lt<Ue.fields.length;lt++)if(Bo(Ue.fields[lt])){if(st==null||lt===st){st=lt;continue}if(Ee.exclude&&Ee.exclude.includes((0,Ct.C)(Ue.fields[lt],Ue,q)))continue;Ne.push(lt)}if(st==null)throw"Missing X dimension";if(!Ne.length)throw"No Y values";return Ne.map(lt=>Yc(se++,q,Me,st,lt,{}))}const Jm=(V,q,se,Ee,Me,Ue)=>{let Ne,st;function lt(Nt){return(Ut,_t,Mn,an)=>(Na.Z.orient(Ut,_t,(An,On,Un,Vn,Kn,Jn,wa,Hn,Bn,Xn,ra,Ua,ja,Ha,Ja)=>{const Da=q[_t-1];let pn=Ut.data[_t],oa=Da.showLine,ya=Da.showPoints===xe.Jp.Always;!ya&&Da.showPoints===xe.Jp.Auto&&(ya=pn[0].length<1e3),!ya&&!oa&&(oa=!0);let ha=1;Ut.ctx.save(),Ut.ctx.rect(Ut.bbox.left,Ut.bbox.top,Ut.bbox.width,Ut.bbox.height),Ut.ctx.clip(),Ut.ctx.fillStyle=An.fill(),Ut.ctx.strokeStyle=An.stroke(),Ut.ctx.lineWidth=ha;let fa=2*Math.PI,ka=Vn.key,pa=Kn.key,Sn=Da.hints.pointSize;const vn=Da.hints.pointColor.mode.isByValue;let Ln=(Sn.max??Sn.fixed)*devicePixelRatio,kn=Ut.posToVal(-Ln/2,ka),jn=Ut.posToVal(Ut.bbox.width/devicePixelRatio+Ln/2,ka),Pa=Ut.posToVal(Ut.bbox.height/devicePixelRatio+Ln/2,pa),ua=Ut.posToVal(-Ln/2,pa),Es=Nt.disp.size.values(Ut,_t),ds=Nt.disp.color.values(Ut,_t),Dr=Nt.disp.color.alpha(Ut,_t),Ds=oa?new Path2D:null;for(let Is=0;Is<pn[0].length;Is++){let Gs=pn[0][Is],$r=pn[1][Is],Rs=Es[Is]*devicePixelRatio;if(Gs>=kn&&Gs<=jn&&$r>=Pa&&$r<=ua){let pr=Jn(Gs,Vn,Xn,Hn),br=wa($r,Kn,ra,Bn);oa&&Ds.lineTo(pr,br),ya&&(Ut.ctx.moveTo(pr+Rs/2,br),Ut.ctx.beginPath(),Ut.ctx.arc(pr,br,Rs/2,0,fa),vn&&(Ut.ctx.fillStyle=Dr[Is],Ut.ctx.strokeStyle=ds[Is]),Ut.ctx.fill(),Ut.ctx.stroke(),Nt.each(Ut,_t,Is,pr-Rs/2-ha/2,br-Rs/2-ha/2,Rs+ha,Rs+ha))}}if(oa){let Is=Da.frame(V());Ut.ctx.strokeStyle=Da.lineColor(Is),Ut.ctx.lineWidth=Da.lineWidth*devicePixelRatio;const{lineStyle:Gs}=Da;Gs&&Gs.fill!=="solid"&&(Gs.fill==="dot"&&(Ut.ctx.lineCap="round"),Ut.ctx.setLineDash(Gs.dash??[10,10])),Ut.ctx.stroke(Ds)}Ut.ctx.restore()}),null)}let vt=lt({disp:{size:{values:(Nt,kt)=>Nt.data[kt][2]},color:{values:(Nt,kt)=>Nt.data[kt][3],alpha:(Nt,kt)=>Nt.data[kt][4]}},each:(Nt,kt,Ut,_t,Mn,an,An)=>{_t-=Nt.bbox.left,Mn-=Nt.bbox.top,Ne.add({x:_t,y:Mn,w:an,h:An,sidx:kt,didx:Ut})}});const gt=new ss.U;gt.setCursor({drag:{setScale:!0},dataIdx:(Nt,kt)=>{if(kt===1){st=null;let Ut=1/0,_t=Nt.cursor.left*devicePixelRatio,Mn=Nt.cursor.top*devicePixelRatio;Ne.get(_t,Mn,1,1,an=>{if((0,Sa.Pn)(_t,Mn,an.x,an.y,an.x+an.w,an.y+an.h)){let An=an.x+an.w/2,On=an.y+an.h/2,Un=An-_t,Vn=On-Mn,Kn=Math.sqrt(Un**2+Vn**2);Kn<=an.w/2&&Kn<=Ut&&(Ut=Kn,st=an)}})}return st&&kt===st.sidx?st.didx:null},points:{size:(Nt,kt)=>st&&kt===st.sidx?st.w/devicePixelRatio:0,fill:(Nt,kt)=>"rgba(255,255,255,0.4)"}});const Mt=()=>{Ue.current&&(Ee(void 0),Me&&Me())};let Lt=null;gt.addHook("init",(Nt,kt)=>{Nt.over.style.overflow="hidden",Lt=Nt.root.parentElement,Me&&Lt?.addEventListener("click",Me)}),gt.addHook("destroy",Nt=>{Me&&(Lt?.removeEventListener("click",Me),Mt())});let It;gt.addHook("syncRect",(Nt,kt)=>{It=kt}),gt.addHook("setLegend",Nt=>{if(Nt.cursor.idxs!=null)for(let kt=0;kt<Nt.cursor.idxs.length;kt++){const Ut=Nt.cursor.idxs[kt];if(Ut!=null&&!Ue.current){Ee({scatterIndex:kt-1,xIndex:Ut,pageX:It.left+Nt.cursor.left,pageY:It.top+Nt.cursor.top});return}}Ue.current||Ee(void 0)}),gt.addHook("drawClear",Nt=>{Mt(),Ne=Ne||new Sa.lW(0,0,Nt.bbox.width,Nt.bbox.height),Ne.clear(),Nt.series.forEach((kt,Ut)=>{Ut>0&&(kt._paths=null)})}),gt.setMode(2);const Yt=V();let Zt=q[0].x(q[0].frame(Yt));gt.addScale({scaleKey:"x",isTime:!1,orientation:xe.wN.Horizontal,direction:xe.bQ.Right,min:Zt.config.min,max:Zt.config.max});let rn=Zt.config.custom.axisLabel;return gt.addAxis({scaleKey:"x",placement:Zt.config.custom?.axisPlacement!==xe.LB.Hidden?xe.LB.Bottom:xe.LB.Hidden,show:Zt.config.custom?.axisPlacement!==xe.LB.Hidden,theme:se,label:rn==null||rn===""?(0,Ct.C)(Zt,q[0].frame(Yt),Yt):rn}),q.forEach((Nt,kt)=>{let Ut=Nt.frame(Yt),_t=Nt.y(Ut);const Mn=Nt.lineColor(Ut),an=Xm(Ut,Nt.pointColor);let An=_t.config.unit??"y";if(gt.addScale({scaleKey:An,orientation:xe.wN.Vertical,direction:xe.bQ.Up,max:_t.config.max,min:_t.config.min}),_t.config.custom?.axisPlacement!==xe.LB.Hidden){let On=_t.config.custom?.axisLabel;gt.addAxis({scaleKey:An,theme:se,placement:_t.config.custom?.axisPlacement,label:On==null||On===""?(0,Ct.C)(_t,q[kt].frame(Yt),Yt):On,values:(Un,Vn)=>Vn.map(Kn=>_t.display(Kn).text)})}gt.addSeries({facets:[{scale:"x",auto:!0},{scale:An,auto:!0}],pathBuilder:vt,theme:se,scaleKey:"",lineColor:Mn,fillColor:(0,Ns.alpha)(an,.5),show:!_t.config.custom.hideFrom?.viz})}),gt};function jc(V,q,se){return V.error||!q.length?[null]:[null,...V.series.map((Ee,Me)=>{const Ue=Ee.frame(q);let Ne,st;const lt=Ee.pointColor(Ue);return Array.isArray(lt)?(Ne=lt,st=lt.map(vt=>(0,Ns.alpha)(vt,.5))):(Ne=Array(Ue.length).fill(lt),st=Array(Ue.length).fill((0,Ns.alpha)(lt,.5))),[Ee.x(Ue).values.toArray(),Ee.y(Ue).values.toArray(),_m(Ue,Ee.pointSize),Ne,st]})]}function _m(V,q){const se=q(V);return Array.isArray(se)?se:Array(V.length).fill(se)}function Xm(V,q){const se=q(V);return Array.isArray(se)?se[0]:se}const Qc=10,Zc=V=>{const[q,se]=(0,S.useState)(),[Ee,Me]=(0,S.useState)([]),[Ue,Ne]=(0,S.useState)(),[st,lt]=(0,S.useState)(),[vt,gt]=(0,S.useState)(),[Mt,Lt]=(0,S.useState)(!1),It=(0,S.useRef)(!1),Yt=(0,Hc.Z)(V.options),Zt=(0,Hc.Z)(V.data),rn=()=>{It.current=!1,Lt(!1),kt(void 0)},Nt=()=>{It.current=!It.current,Lt(It.current)},kt=an=>{gt(an)},Ut=(0,S.useCallback)(()=>{const an=()=>V.data.series,An=Gc(V.options,an,Ae.v.theme2,kt,Nt,It);An.error?se(An.error):An.series.length&&V.data.series&&(Ne(An.builder),Me(An.series),lt(()=>jc(An,V.data.series)),se(void 0))},[V.data.series,V.options]),_t=(0,S.useCallback)(()=>{lt(()=>jc({error:q,series:Ee},V.data.series))},[V.data.series,q,Ee]);(0,S.useEffect)(()=>{Yt!==V.options||Zt?.structureRev!==V.data.structureRev?Ut():Zt!==V.data&&_t()},[V]);const Mn=()=>{const an=[],An=Vn=>Vn==null?"-":Vn.toFixed(1),On=Ae.v.theme2;for(let Vn=0;Vn<Ee.length;Vn++){const Kn=Ee[Vn],Jn=Kn.frame(V.data.series);if(Jn)for(const wa of Kn.legend())wa.getDisplayValues=()=>{const Hn=V.options.legend.calcs;if(!Hn?.length)return[];const Bn=Kn.y(Jn),Xn=Bn.display??An;let ra=null;const Ua=(0,es.Kx)({field:Bn,reducers:Hn});return Hn.map(ja=>{const Ha=es.TB.get(ja);let Ja=Xn;return Ha.id===es.gz.diffperc&&(Ja=(0,qa.U_)({field:{...Bn,config:{...Bn.config,unit:"percent"}},theme:On})),(Ha.id===es.gz.count||Ha.id===es.gz.changeCount||Ha.id===es.gz.distinctCount)&&(ra||(ra=(0,qa.U_)({field:{...Bn,config:{...Bn.config,unit:"none"}},theme:On})),Ja=ra),{...Ja(Ua[ja]),title:Ha.name,description:Ha.description}})},wa.disabled=!(Kn.show??!0),V.options.seriesMapping===El.Manual&&(wa.label=V.options.series?.[Vn]?.name??`Series ${Vn+1}`),an.push(wa)}if(!V.options.legend.showLegend)return null;const Un={flexStart:b.css`
        div {
          justify-content: flex-start !important;
        }
      `};return S.createElement(ln.AY.Legend,{placement:V.options.legend.placement,width:V.options.legend.width},S.createElement(Cn.l,{className:Un.flexStart,placement:V.options.legend.placement,items:an,displayMode:V.options.legend.displayMode}))};return q||!Ue||!st?S.createElement("div",{className:"panel-empty"},S.createElement("p",null,q)):S.createElement(S.Fragment,null,S.createElement(ln.AY,{width:V.width,height:V.height,legend:Mn()},(an,An)=>S.createElement(Ki.N,{config:Ue,data:st,width:an,height:An,timeRange:V.timeRange})),S.createElement(Yn.h_,null,vt&&V.options.tooltip.mode!==xe.f3.None&&S.createElement(aa.S,{position:{x:vt.pageX,y:vt.pageY},offset:{x:Qc,y:Qc},allowPointerEvents:It.current},Mt&&S.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"flex-end"}},S.createElement(Ta.P,{onClick:rn,style:{position:"relative",top:"auto",right:"auto",marginRight:0}})),S.createElement(Qm,{options:V.options.tooltip,allSeries:Ee,manualSeriesConfigs:V.options.series,seriesMapping:V.options.seriesMapping,rowIndex:vt.xIndex,hoveredPointIndex:vt.scatterIndex,data:V.data.series,range:V.timeRange}))))};var Jc=e(66683);function qm(V){return{standardOptions:{[Za.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:Ze.S.PaletteClassic}}},useCustomConfig:q=>{q.addRadio({path:"show",name:"Show",defaultValue:V.show,settings:{options:[{label:"Points",value:Wr.Points},{label:"Lines",value:Wr.Lines},{label:"Both",value:Wr.PointsAndLines}]}}).addSliderInput({path:"pointSize.fixed",name:"Point size",defaultValue:V.pointSize?.fixed,settings:{min:1,max:100,step:1},showIf:se=>se.show!==Wr.Lines}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",showIf:se=>se.show!==Wr.Points,editor:Jc.j,override:Jc.j,process:Et.kG,shouldApply:se=>se.type===we.fS.number}).addSliderInput({path:"lineWidth",name:"Line width",defaultValue:V.lineWidth,settings:{min:0,max:10,step:1},showIf:se=>se.show!==Wr.Points}),Rt.r(q,V),Bt.B(q)}}}const ef=new ce.c(Zc).useFieldConfig(qm(gi)).setPanelOptions(V=>{V.addRadio({path:"seriesMapping",name:"Series mapping",defaultValue:"auto",settings:{options:[{value:"auto",label:"Auto",description:"No changes to saved model since 8.0"},{value:"manual",label:"Manual"}]}}).addCustomEditor({id:"xyPlotConfig",path:"dims",name:"",editor:Km,showIf:q=>q.seriesMapping==="auto"}).addCustomEditor({id:"series",path:"series",name:"",defaultValue:[],editor:Hf,showIf:q=>q.seriesMapping==="manual"}),Kt.L(V),fn.J(V)}),rf={"app/plugins/datasource/graphite/module":async()=>await e.e(7494).then(e.bind(e,86069)),"app/plugins/datasource/cloudwatch/module":async()=>await Promise.all([e.e(4761),e.e(7421),e.e(8831)]).then(e.bind(e,17421)),"app/plugins/datasource/dashboard/module":async()=>await e.e(2557).then(e.bind(e,32557)),"app/plugins/datasource/elasticsearch/module":async()=>await Promise.all([e.e(4761),e.e(5048),e.e(4601),e.e(9897)]).then(e.bind(e,14601)),"app/plugins/datasource/opentsdb/module":async()=>await e.e(3168).then(e.bind(e,80808)),"app/plugins/datasource/grafana/module":async()=>await Promise.all([e.e(3755),e.e(7537)]).then(e.bind(e,265)),"app/plugins/datasource/influxdb/module":async()=>await e.e(5783).then(e.bind(e,9722)),"app/plugins/datasource/loki/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(924),e.e(5439),e.e(6196),e.e(4712),e.e(1598)]).then(e.bind(e,34712)),"app/plugins/datasource/jaeger/module":async()=>await e.e(890).then(e.bind(e,94053)),"app/plugins/datasource/zipkin/module":async()=>await e.e(4023).then(e.bind(e,86098)),"app/plugins/datasource/mixed/module":async()=>await e.e(2001).then(e.bind(e,40336)),"app/plugins/datasource/mysql/module":async()=>await Promise.all([e.e(9243),e.e(4251)]).then(e.bind(e,93157)),"app/plugins/datasource/postgres/module":async()=>await Promise.all([e.e(9243),e.e(534)]).then(e.bind(e,18821)),"app/plugins/datasource/mssql/module":async()=>await Promise.all([e.e(9243),e.e(5032)]).then(e.bind(e,21264)),"app/plugins/datasource/prometheus/module":async()=>await Promise.all([e.e(6488),e.e(1899),e.e(4254),e.e(4761),e.e(5048),e.e(924),e.e(8366),e.e(6196),e.e(7004)]).then(e.bind(e,86980)),"app/plugins/datasource/testdata/module":async()=>await e.e(319).then(e.bind(e,50747)),"app/plugins/datasource/cloud-monitoring/module":async()=>await Promise.all([e.e(2773),e.e(3549)]).then(e.bind(e,43737)),"app/plugins/datasource/azuremonitor/module":async()=>await Promise.all([e.e(9469),e.e(2364)]).then(e.bind(e,9469)),"app/plugins/datasource/tempo/module":async()=>await Promise.all([e.e(5331),e.e(5644),e.e(295)]).then(e.bind(e,25644)),"app/plugins/datasource/alertmanager/module":async()=>await Promise.all([e.e(4761),e.e(6795)]).then(e.bind(e,98548)),"app/plugins/datasource/phlare/module":async()=>await Promise.all([e.e(1899),e.e(4254),e.e(9704)]).then(e.bind(e,61674)),"app/plugins/datasource/parca/module":async()=>await e.e(2015).then(e.bind(e,74775)),"app/plugins/panel/text/module":y,"app/plugins/panel/timeseries/module":C,"app/plugins/panel/state-timeline/module":a,"app/plugins/panel/status-history/module":v,"app/plugins/panel/candlestick/module":f,"app/plugins/panel/graph/module":async()=>await Promise.all([e.e(6093),e.e(1260)]).then(e.bind(e,35155)),"app/plugins/panel/xychart/module":M,"app/plugins/panel/geomap/module":async()=>await Promise.all([e.e(1251),e.e(8096)]).then(e.bind(e,88763)),"app/plugins/panel/canvas/module":async()=>await Promise.all([e.e(7638),e.e(8528),e.e(3330)]).then(e.bind(e,84310)),"app/plugins/panel/icon/module":async()=>await Promise.all([e.e(8528),e.e(53)]).then(e.bind(e,10529)),"app/plugins/panel/dashlist/module":c,"app/plugins/panel/alertlist/module":n,"app/plugins/panel/annolist/module":l,"app/plugins/panel/heatmap/module":async()=>await e.e(6987).then(e.bind(e,77899)),"app/plugins/panel/table/module":x,"app/plugins/panel/table-old/module":async()=>await e.e(6784).then(e.bind(e,8414)),"app/plugins/panel/news/module":p,"app/plugins/panel/live/module":d,"app/plugins/panel/stat/module":ku,"app/plugins/panel/debug/module":o,"app/plugins/panel/flamegraph/module":m,"app/plugins/panel/gettingstarted/module":r,"app/plugins/panel/gauge/module":ou,"app/plugins/panel/piechart/module":h,"app/plugins/panel/bargauge/module":i,"app/plugins/panel/barchart/module":s,"app/plugins/panel/logs/module":g,"app/plugins/panel/traces/module":P,"app/plugins/panel/welcome/module":D,"app/plugins/panel/nodeGraph/module":E,"app/plugins/panel/histogram/module":u,"app/plugins/panel/alertGroups/module":t};function of(V){const se=new URL(V).pathname.split("/");return{id:se[3],version:se[4]}}function lf(V){const{address:q}=V,se=q.split("/public/plugin-cdn/");return`${Ae.v.pluginsCDNBaseURL}/${se[1]}`}function cf(V){const{id:q,version:se}=of(V.name),Ee=`${Ae.v.pluginsCDNBaseURL}/${q}/${se}`;return V.source=V.source.replace(/(\/?)(public\/plugins)/g,`${Ee}/$2`),V.source=V.source.replace(/(["|'])(plugins\/.+?.css)(["|'])/g,`$1${Ee}/public/$2$3`),V.source=V.source.replace(/(\/\/#\ssourceMappingURL=)(.+)\.map/g,`$1${Ee}/public/plugins/${q}/$2.map`),V.source}function _c(V){return V.metadata.loader==="cdn-loader"&&V.address.startsWith(`${location.origin}/public/plugin-cdn`)&&(V.address=V.address.replace(`${location.origin}/public/plugin-cdn`,Ae.v.pluginsCDNBaseURL)),V.address}function df(V){const q=document.getElementsByTagName("link");return Array.from(q).map(Ee=>Ee.href).includes(V.address)?"":ff(V.address)}const uf="?_cache="+Date.now(),mf=100;function ff(V){return new Promise(function(q,se){const Ee=setTimeout(function(){se("Unable to load CSS")},mf*1e3),Me=function(Ne){clearTimeout(Ee),Ue.onload=Ue.onerror=I.noop,setTimeout(function(){Ne?se(Ne):q("")},7)},Ue=document.createElement("link");Ue.type="text/css",Ue.rel="stylesheet",Ue.href=V,Ue.href.startsWith(Ae.v.pluginsCDNBaseURL)||(Ue.href=Ue.href+uf),Ue.onload=function(){Me()},Ue.onerror=function(Ne){Me(Ne instanceof ErrorEvent?Ne.message:new Error("Error loading CSS file."))},document.head.appendChild(Ue)})}var wo=e(82907),Kg=e(89377),Vg=e(4027),fg=e(59554),gg=e(65103),pg=e(85095),No=e(28844),hg=e(26189),vg=e(47825),zg=e(7540);const Uo=te;Uo.PanelPlugin=ce.c,Uo.DataSourcePlugin=ie.hf,Uo.AppPlugin=fe.k8,Uo.DataSourceApi=ie.MF,ne.i3.registry.set("css",ne.i3.newModule({locate:_c,fetch:df})),ne.i3.registry.set("plugin-loader",ne.i3.newModule({locate:wo.hf})),ne.i3.registry.set("cdn-loader",ne.i3.newModule({locate:lf,translate:cf})),ne.i3.config({baseURL:"public",defaultExtension:"js",packages:{plugins:{defaultExtension:"js"},"plugin-cdn":{defaultExtension:"js"}},map:{text:"vendor/plugin-text/text.js"},meta:{"/*":{esModule:!0,authorization:!0,loader:"plugin-loader"},"*.css":{loader:"css"},"plugin-cdn/*":{esModule:!0,authorization:!1,loader:"cdn-loader"}}});function xa(V,q){ne.i3.registerDynamic(V,[],!0,(se,Ee,Me)=>{Me.exports=q})}xa("@grafana/data",Ce),xa("@grafana/ui",Uo),xa("@grafana/runtime",X),xa("lodash",F()),xa("moment",W()),xa("jquery",A()),xa("d3",B),xa("rxjs",k),xa("rxjs/operators",j),xa("react-router-dom",z),xa("prismjs",N()),xa("slate",de.ZP),xa("slate-react",re.ZP),xa("@grafana/slate-react",re.ZP),xa("slate-plain-serializer",ge.Z),xa("react",S),xa("react-dom",Y),xa("react-redux",Q),xa("redux",G),xa("emotion",b),xa("@emotion/css",b),xa("@emotion/react",R),xa("app/features/dashboard/impression_store",{impressions:it.Z,__esModule:!0}),xa("app/core/services/backend_srv",{BackendSrv:Ve.y$,getBackendSrv:Ve.i}),xa("app/core/utils/datemath",ee),xa("app/core/utils/flatten",pe),xa("app/core/utils/kbn",Ie.Z),xa("app/core/utils/ticks",We),xa("app/core/config",_.ZP),xa("app/core/time_series",rt.Z),xa("app/core/time_series2",rt.Z),xa("app/core/table_model",ae.Z),xa("app/core/app_events",ve.h$),xa("app/core/core",{appEvents:ve.h$,contextSrv:ve.Vt,__esModule:!0});const Xc=["jquery.flot","jquery.flot.pie","jquery.flot.time","jquery.flot.fillbelow","jquery.flot.crosshair","jquery.flot.stack","jquery.flot.selection","jquery.flot.stackpercent","jquery.flot.events","jquery.flot.gauge"];for(const V of Xc)xa(V,{fakeDep:1});async function Cl(V,q){q&&(0,wo.Vf)({path:V,version:q});const se=rf[V];return se?typeof se=="function"?await se():se:ne.i3.import(V)}function qc(V){return Cl(V.module,V.info?.version).then(q=>{if(q.plugin){const se=q.plugin;return se.meta=V,se}if(q.Datasource){const se=new ie.hf(q.Datasource);return se.setComponentsFromLegacyExports(q),se.meta=V,se}throw new Error("Plugin module is missing DataSourcePlugin or Datasource constructor export")})}function Zr(V){return Cl(V.module,V.info?.version).then(q=>{const se=q.plugin?q.plugin:new fe.k8;return se.init(V),se.meta=V,se.setComponentsFromLegacyExports(q),se})}},82907:(Z,O,e)=>{"use strict";e.d(O,{Hl:()=>i,Vf:()=>s,hf:()=>f});var t=e(13011);const n={},l=Date.now();function s({path:o,version:m}){n[o]||(n[o]=encodeURI(m))}function i(o){const m=`plugins/${o}/module`;n[m]&&delete n[m],(0,t.Z)(o)}function f(o,m=l){const{address:r}=o,u=c(r);if(!u)return`${r}?_cache=${m}`;const g=n[u]||m;return`${r}?_cache=${g}`}function c(o){const m=/\/public\/(plugins\/.+\/module)\.js/i.exec(o);if(!m)return;const[r,u]=m;if(u)return u}},55111:(Z,O,e)=>{"use strict";e.d(O,{O:()=>f,d:()=>c});var t=e(24699),n=e(35645),l=e(38490),s=e(13011),i=e(66322);async function f(o){const m=await(0,s.a)(o);let r;if(m.type===t.zV.app&&(r=await(0,i.Av)(m)),m.type===t.zV.datasource&&(r=await(0,i.nL)(m)),m.type===t.zV.panel&&(r=await(0,l._2)(m)),m.type===t.zV.renderer&&(r={meta:m}),!r)throw new Error("Unknown Plugin type: "+m.type);return r}function c(o,m,r){if(!n.v.featureToggles.topnav)return m??void 0;let u={...o},d;function g(p,E){return!E.startsWith(p.url??"")||d&&(d.url?.length??0)>(p.url?.length??0)?p:(d&&(d.active=!1),d={...p,active:!0},d)}return u.children=(u?.children??[]).map(p=>{if(p.children){const E=p.children.map(h=>g(h,r));return{...g(p,r),children:E}}return g(p,r)}),{main:u,node:d??u}}},19360:(Z,O,e)=>{"use strict";e.d(O,{h:()=>r});var t=e(54899);async function n(u){try{await(0,t.i)().put("/api/user/password",u)}catch(d){console.error(d)}}function l(){return(0,t.i)().get("/api/user")}function s(){return(0,t.i)().get("/api/user/teams")}function i(){return(0,t.i)().get("/api/user/orgs")}function f(){return(0,t.i)().get("/api/user/auth-tokens")}async function c(u){await(0,t.i)().post("/api/user/revoke-auth-token",{authTokenId:u})}async function o(u){await(0,t.i)().post("/api/user/using/"+u.orgId,{})}async function m(u){try{await(0,t.i)().put("/api/user",u)}catch(d){console.error(d)}}const r={changePassword:n,revokeUserSession:c,loadUser:l,loadSessions:f,loadOrgs:i,loadTeams:s,setUserOrg:o,updateUserProfile:m}},54294:(Z,O,e)=>{"use strict";e.d(O,{$S:()=>p,Ns:()=>E,PL:()=>a,Uk:()=>y,YT:()=>u,ZP:()=>R,aw:()=>v,p$:()=>x,qD:()=>h,rf:()=>r,z0:()=>C,zW:()=>d,zc:()=>g});var t=e(62992),n=e(82897),l=e.n(n),s=e(38849),i=e(46519),f=e(47694),c=e(77582);const o={orgId:f.ZP.bootData.user.orgId,timeZone:f.ZP.bootData.user.timezone,weekStart:f.ZP.bootData.user.weekStart,fiscalYearStartMonth:0,orgsAreLoading:!1,sessionsAreLoading:!1,teamsAreLoading:!1,isUpdating:!1,orgs:[],sessions:[],teams:[],user:null},m=(0,t.oM)({name:"user/profile",initialState:o,reducers:{updateTimeZone:(B,w)=>{B.timeZone=w.payload.timeZone},updateWeekStart:(B,w)=>{B.weekStart=w.payload.weekStart},updateFiscalYearStartMonth:(B,w)=>{B.fiscalYearStartMonth=w.payload.fiscalYearStartMonth},setUpdating:(B,w)=>{B.isUpdating=w.payload.updating},userLoaded:(B,w)=>{B.user=w.payload.user},initLoadTeams:(B,w)=>{B.teamsAreLoading=!0},teamsLoaded:(B,w)=>{B.teams=w.payload.teams,B.teamsAreLoading=!1},initLoadOrgs:(B,w)=>{B.orgsAreLoading=!0},orgsLoaded:(B,w)=>{B.orgs=w.payload.orgs,B.orgsAreLoading=!1},initLoadSessions:(B,w)=>{B.sessionsAreLoading=!0},sessionsLoaded:(B,w)=>{const A=w.payload.sessions.sort((I,F)=>Number(F.isActive)-Number(I.isActive));B.sessions=A.map(I=>({id:I.id,isActive:I.isActive,seenAt:(0,s.E8)(I.seenAt),createdAt:I.createdAt,clientIp:I.clientIp,browser:I.browser,browserVersion:I.browserVersion,os:I.os,osVersion:I.osVersion,device:I.device})),B.sessionsAreLoading=!1},userSessionRevoked:(B,w)=>{B.sessions=B.sessions.filter(A=>A.id!==w.payload.tokenId),B.isUpdating=!1}}}),r=B=>async w=>{(0,n.set)(c.Vt,"user.fiscalYearStartMonth",B),w(M({fiscalYearStartMonth:B}))},u=B=>async w=>{(!(0,n.isString)(B)||(0,n.isEmpty)(B))&&(B=f.ZP?.bootData?.user?.timezone),(0,n.set)(c.Vt,"user.timezone",B),w(P({timeZone:B}))},d=B=>async w=>{(!(0,n.isString)(B)||(0,n.isEmpty)(B))&&(B=f.ZP?.bootData?.user?.weekStart),(0,n.set)(c.Vt,"user.weekStart",B),w(D({weekStart:B})),(0,i.Ls)(B)},{setUpdating:g,initLoadOrgs:p,orgsLoaded:E,initLoadTeams:h,teamsLoaded:a,userLoaded:v,userSessionRevoked:x,initLoadSessions:y,sessionsLoaded:C,updateTimeZone:P,updateWeekStart:D,updateFiscalYearStartMonth:M}=m.actions,b=m.reducer,R={user:m.reducer}},25405:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>t,i:()=>n});const t=l=>l.timeZone,n=l=>l.fiscalYearStartMonth},9386:(Z,O,e)=>{"use strict";e.d(O,{S:()=>n,f:()=>l});class t{constructor(){this.extraRenderActions=[]}addExtraRenderAction(i){this.extraRenderActions=this.extraRenderActions.concat(i)}getAllExtraRenderAction(){return this.extraRenderActions}}const n=new t,l=new t},36584:(Z,O,e)=>{"use strict";e.d(O,{x:()=>S,t:()=>Q});var t=e(9085),n=e.n(t),l=e(82897),s=e(64681),i=e.n(s),f=e(68404),c=e(40400),o=e(94929),m=e(85081),r=e(49922),u=e(16911),d=e(25318),g=e(68183),p=e(86647),E=e(11484),h=e(19985),a=e(52081),v=e(53546),x=e(19117),y=e(1029),C=e(67254),P=e(19349),D=e(96161),M=e(9386),b=e(9892),R=e(53117),B=e(72648),w=e(39904),A=e(46967),I=e(57227);const F=z=>{const{query:G,queries:k,onChange:j,collapsedText:de,renderExtras:ge,disabled:re}=z,ce=(0,B.wW)(W),[ie,fe]=(0,f.useState)(!1),[Ce,ee]=(0,f.useState)(null),ne=Ve=>{fe(!0)},X=Ve=>{if(fe(!1),Ce){ee(null);return}G.refId!==Ve&&j({...G,refId:Ve})},te=Ve=>{const it=Ve.currentTarget.value.trim();if(it.length===0){ee("An empty query name is not allowed");return}for(const rt of k)if(rt!==G&&it===rt.refId){ee("Query name already exists");return}Ce&&ee(null)},ae=Ve=>{X(Ve.currentTarget.value.trim())},_=Ve=>{Ve.key==="Enter"&&X(Ve.target.value)},ve=Ve=>{Ve.target.select()};return f.createElement(f.Fragment,null,f.createElement("div",{className:ce.wrapper},!ie&&f.createElement("button",{className:ce.queryNameWrapper,"aria-label":g.wl.components.QueryEditorRow.title(G.refId),title:"Edit query name",onClick:ne,"data-testid":"query-name-div",type:"button"},f.createElement("span",{className:ce.queryName},G.refId),f.createElement(w.J,{name:"pen",className:ce.queryEditIcon,size:"sm"})),ie&&f.createElement(f.Fragment,null,f.createElement(A.I,{type:"text",defaultValue:G.refId,onBlur:ae,autoFocus:!0,onKeyDown:_,onFocus:ve,invalid:Ce!==null,onChange:te,className:ce.queryNameInput,"data-testid":"query-name-input"}),Ce&&f.createElement(I.S,{horizontal:!0},Ce)),K(z,ce),ge&&f.createElement("div",{className:ce.itemWrapper},ge()),re&&f.createElement("em",{className:ce.contextInfo},"Disabled")),de&&f.createElement("div",{className:ce.collapsedText},de))},K=(z,G)=>{const{alerting:k,dataSource:j,onChangeDataSource:de}=z;return de?f.createElement("div",{className:G.itemWrapper},f.createElement(R.q,{variables:!0,alerting:k,current:j.name,onChange:de})):f.createElement("em",{className:G.contextInfo},"(",j.name,")")},W=z=>({wrapper:b.css`
      label: Wrapper;
      display: flex;
      align-items: center;
      margin-left: ${z.spacing(.5)};
      overflow: hidden;
    `,queryNameWrapper:b.css`
      display: flex;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: ${z.shape.borderRadius(2)};
      align-items: center;
      padding: 0 0 0 ${z.spacing(.5)};
      margin: 0;
      background: transparent;
      overflow: hidden;

      &:hover {
        background: ${z.colors.action.hover};
        border: 1px dashed ${z.colors.border.strong};
      }

      &:focus {
        border: 2px solid ${z.colors.primary.border};
      }

      &:hover,
      &:focus {
        .query-name-edit-icon {
          visibility: visible;
        }
      }
    `,queryName:b.css`
      font-weight: ${z.typography.fontWeightMedium};
      color: ${z.colors.primary.text};
      cursor: pointer;
      overflow: hidden;
      margin-left: ${z.spacing(.5)};
    `,queryEditIcon:(0,b.cx)(b.css`
        margin-left: ${z.spacing(2)};
        visibility: hidden;
      `,"query-name-edit-icon"),queryNameInput:b.css`
      max-width: 300px;
      margin: -4px 0;
    `,collapsedText:b.css`
      font-weight: ${z.typography.fontWeightRegular};
      font-size: ${z.typography.bodySmall.fontSize};
      color: ${z.colors.text.secondary};
      padding-left: ${z.spacing(1)};
      align-items: center;
      overflow: hidden;
      font-style: italic;
      white-space: nowrap;
      text-overflow: ellipsis;
    `,contextInfo:b.css`
      font-size: ${z.typography.bodySmall.fontSize};
      font-style: italic;
      color: ${z.colors.text.secondary};
      padding-left: 10px;
      padding-right: 10px;
    `,itemWrapper:b.css`
      display: flex;
      margin-left: 4px;
    `});function U({error:z}){const G=(0,B.wW)(N),k=z?.message??z?.data?.message??"Query error";return f.createElement("div",{className:G.wrapper},f.createElement("div",{className:G.icon},f.createElement(w.J,{name:"exclamation-triangle"})),f.createElement("div",{className:G.message},k))}const N=z=>({wrapper:(0,b.css)({marginTop:z.spacing(.5),background:z.colors.background.secondary,display:"flex"}),icon:(0,b.css)({background:z.colors.error.main,color:z.colors.error.contrastText,padding:z.spacing(1)}),message:(0,b.css)({fontSize:z.typography.bodySmall.fontSize,fontFamily:z.typography.fontFamilyMonospace,padding:z.spacing(1)})});class S extends f.PureComponent{constructor(){super(...arguments),this.element=null,this.angularScope=null,this.angularQueryEditor=null,this.dataSourceSrv=(0,p.F)(),this.id="",this.state={datasource:null,hasTextEditMode:!1,data:void 0,isOpen:!0,showingHelp:!1},this.renderAngularQueryEditor=()=>{if(!this.element)return;this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null);const G=(0,E.w)(),k='<plugin-component type="query-ctrl" />',j={ctrl:this.getAngularQueryComponentScope()};this.angularQueryEditor=G.load(this.element,j,k),this.angularScope=j.ctrl},this.onOpen=()=>{this.renderAngularQueryEditor()},this.renderPluginEditor=()=>{const{query:G,onChange:k,queries:j,onRunQuery:de,onAddQuery:ge,app:re=c.zj.PanelEditor,history:ce}=this.props,{datasource:ie,data:fe}=this.state;if(this.isWaitingForDatasourceToLoad())return null;if(ie?.components?.QueryCtrl)return f.createElement("div",{ref:Ce=>this.element=Ce});if(ie){let Ce=this.getReactQueryEditor(ie);if(Ce)return f.createElement(o.n,{instanceSettings:this.props.dataSource},f.createElement(Ce,{key:ie?.name,query:G,datasource:ie,onChange:k,onRunQuery:de,onAddQuery:ge,data:fe,range:(0,P.$t)().timeRange(),queries:j,app:re,history:ce}))}return f.createElement("div",null,"Data source plugin does not export any Query Editor component")},this.onToggleEditMode=(G,k)=>{G.stopPropagation(),this.angularScope&&this.angularScope.toggleEditorMode&&(this.angularScope.toggleEditorMode(),this.angularQueryEditor?.digest(),k.isOpen||k.onOpen())},this.onRemoveQuery=()=>{const{onRemoveQuery:G,query:k,onQueryRemoved:j}=this.props;G(k),j&&j()},this.onCopyQuery=()=>{const{query:G,onAddQuery:k,onQueryCopied:j}=this.props,de=(0,l.cloneDeep)(G);k(de),j&&j()},this.onDisableQuery=()=>{const{query:G,onChange:k,onRunQuery:j,onQueryToggled:de}=this.props;k({...G,hide:!G.hide}),j(),de&&de(G.hide)},this.onToggleHelp=()=>{this.setState(G=>({showingHelp:!G.showingHelp}))},this.onClickExample=G=>{G.datasource===void 0&&(G.datasource={type:this.props.dataSource.type,uid:this.props.dataSource.uid}),this.props.onChange({...G,refId:this.props.query.refId}),this.onToggleHelp()},this.renderWarnings=()=>{const{data:G,query:k}=this.props,de=(Q(G,k.refId)?.series??[]).reduce((ie,fe)=>{if(!fe.meta?.notices)return ie;const Ce=(0,l.filter)(fe.meta.notices,{severity:"warning"})??[];return ie.concat(Ce)},[]),ge=(0,l.uniqBy)(de,"text");if(!(ge.length>0))return null;const ce=ge.map(ie=>ie.text).join(`
`);return f.createElement(h.C,{color:"orange",icon:"exclamation-triangle",text:f.createElement(f.Fragment,null,ge.length," ",i()("warning",ge.length)),tooltip:ce})},this.renderExtraActions=()=>{const{query:G,queries:k,data:j,onAddQuery:de,dataSource:ge}=this.props,re=M.f.getAllExtraRenderAction().map((ce,ie)=>ce({query:G,queries:k,timeRange:j.timeRange,onAddQuery:de,dataSource:ge,key:ie})).filter(Boolean);return re.push(this.renderWarnings()),re},this.renderActions=G=>{const{query:k,hideDisableQuery:j=!1}=this.props,{hasTextEditMode:de,datasource:ge,showingHelp:re}=this.state,ce=k.hide,ie=ge?.components?.QueryEditorHelp;return f.createElement(a.Lh,{width:"auto"},ie&&f.createElement(y.y,{title:"Toggle data source help",icon:"question-circle",onClick:this.onToggleHelp,active:re}),de&&f.createElement(y.y,{title:"Toggle text edit mode",icon:"pen",onClick:fe=>{this.onToggleEditMode(fe,G)}}),this.renderExtraActions(),f.createElement(y.y,{title:"Duplicate query",icon:"copy",onClick:this.onCopyQuery}),j?null:f.createElement(y.y,{title:"Disable/enable query",icon:ce?"eye-slash":"eye",active:ce,onClick:this.onDisableQuery}),f.createElement(y.y,{title:"Remove query",icon:"trash-alt",onClick:this.onRemoveQuery}))},this.renderHeader=G=>{const{alerting:k,query:j,dataSource:de,onChangeDataSource:ge,onChange:re,queries:ce,renderHeaderExtras:ie}=this.props;return f.createElement(F,{query:j,queries:ce,onChangeDataSource:ge,dataSource:de,disabled:j.hide,onClick:fe=>this.onToggleEditMode(fe,G),onChange:re,collapsedText:G.isOpen?null:this.renderCollapsedText(),renderExtras:ie,alerting:k})}}componentDidMount(){const{data:G,query:k,id:j}=this.props,de=Q(G,k.refId);this.id=(0,l.uniqueId)(j+"_"),this.setState({data:de}),this.loadDatasource()}componentWillUnmount(){this.angularQueryEditor&&this.angularQueryEditor.destroy()}getAngularQueryComponentScope(){const{query:G,queries:k}=this.props,{datasource:j}=this.state,de=new D.rY({targets:k}),ge={},re=this;return{datasource:j,target:G,panel:de,dashboard:ge,refresh:()=>{G.hide!==re.props.query.hide&&(G.hide=re.props.query.hide),this.props.onChange(G),this.props.onRunQuery()},render:()=>()=>console.log("legacy render function called, it does nothing"),events:this.props.eventBus||new m.F,range:(0,P.$t)().timeRange()}}getInterpolatedDataSourceUID(){if(this.props.query.datasource){const G=this.dataSourceSrv.getInstanceSettings(this.props.query.datasource);return G?.rawRef?.uid??G?.uid}return this.props.dataSource.rawRef?.uid??this.props.dataSource.uid}async loadDatasource(){let G;const k=this.getInterpolatedDataSourceUID();try{G=await this.dataSourceSrv.get(k)}catch{G=await this.dataSourceSrv.get()}this.setState({datasource:G,queriedDataSourceIdentifier:k,hasTextEditMode:(0,l.has)(G,"components.QueryCtrl.prototype.toggleEditorMode")})}componentDidUpdate(G){const{datasource:k,queriedDataSourceIdentifier:j}=this.state,{data:de,query:ge}=this.props;if(G.id!==this.props.id&&(this.id=(0,l.uniqueId)(this.props.id+"_")),de!==G.data){const re=Q(de,ge.refId);this.setState({data:re}),this.angularScope&&(this.angularScope.range=(0,P.$t)().timeRange()),this.angularQueryEditor&&re&&Y(this.angularScope,re,this.angularQueryEditor)}if(k&&j!==this.getInterpolatedDataSourceUID()){this.angularQueryEditor&&(this.angularQueryEditor.destroy(),this.angularQueryEditor=null),this.loadDatasource();return}!this.element||this.angularQueryEditor||this.renderAngularQueryEditor()}getReactQueryEditor(G){if(G)switch(this.props.app){case c.zj.Explore:return G.components?.ExploreMetricsQueryField||G.components?.ExploreLogsQueryField||G.components?.ExploreQueryField||G.components?.QueryEditor;case c.zj.PanelEditor:case c.zj.Dashboard:default:return G.components?.QueryEditor}}isWaitingForDatasourceToLoad(){return this.getInterpolatedDataSourceUID()!==this.state.queriedDataSourceIdentifier}renderCollapsedText(){const{datasource:G}=this.state;return G?.getQueryDisplayText?G.getQueryDisplayText(this.props.query):this.angularScope&&this.angularScope.getCollapsedText?this.angularScope.getCollapsedText():null}render(){const{query:G,index:k,visualization:j}=this.props,{datasource:de,showingHelp:ge,data:re}=this.state,ce=G.hide,ie=n()("query-editor-row",{"query-editor-row--disabled":ce,"gf-form-disabled":ce});if(!de)return null;const fe=this.renderPluginEditor(),Ce=de.components?.QueryEditorHelp;return f.createElement("div",{"data-testid":"query-editor-row","aria-label":g.wl.components.QueryEditorRows.rows},f.createElement(C.t,{id:this.id,draggable:!0,index:k,headerElement:this.renderHeader,actions:this.renderActions,onOpen:this.onOpen},f.createElement("div",{className:ie,id:this.id},f.createElement(v.z4,null,ge&&Ce&&f.createElement(x.h,null,f.createElement(Ce,{onClickExample:ee=>this.onClickExample(ee),query:this.props.query,datasource:de})),fe),re?.error&&re.error.refId===G.refId&&f.createElement(U,{error:re.error}),j)))}}function Y(z,G,k){if(G.state===r.Gu.Done){const j=G.series.map(de=>(0,u.Zr)(de));z.events.emit(d.Kh.dataReceived,j)}else G.state===r.Gu.Error&&z.events.emit(d.Kh.dataError,G.error);setTimeout(k.digest)}function Q(z,G){const k=z.series.filter(re=>re.refId===G);if(z.state!==r.Gu.Loading&&(z.error||z.errors?.length)&&!z.series.length)return{...z,state:r.Gu.Error};let j=z.state,de=z.errors?.find(re=>re.refId===G);!de&&z.error&&(de=z.error.refId===G?z.error:void 0),j!==r.Gu.Loading&&(de?j=r.Gu.Error:z.state===r.Gu.Error&&(j=r.Gu.Done));const ge=z.timeRange;return{...z,state:j,series:k,error:de,errors:de?[de]:void 0,timeRange:ge}}},87865:(Z,O,e)=>{"use strict";e.d(O,{Tl:()=>ee,kt:()=>ie});var t=e(46528),n=e(91017),l=e(53376),s=e(12877),i=e(25740),f=e(9471),c=e(82615),o=e(7880),m=e(61474),r=e(86318),u=e(57027),d=e(46978),g=e(82378),p=e(47694),E=e(82897);function h(ne){let X=[];const te=(0,E.partition)(ne,"id"),ae=(0,E.groupBy)(te[0],"id");return X=(0,E.map)(ae,_=>_.length>1&&!(0,E.every)(_,a)?(0,E.find)(_,ve=>ve.eventType!=="panel-alert"):(0,E.head)(_)),X=(0,E.concat)(X,te[1]),X}function a(ne){return ne.eventType==="panel-alert"}var v=e(19349),x=e(49372),y=e(59724),C=e(54899),P=e(55197);class D{canWork({dashboard:X,range:te}){return!(!X.id||te.raw.to!=="now"||!X.panels.find(ae=>!!ae.alert))}work(X){if(!this.canWork(X))return(0,P.H_)();const{dashboard:te}=X;return(0,x.D)((0,C.i)().get("/api/alerts/states-for-dashboard",{dashboardId:te.id},`dashboard-query-runner-alert-states-${te.id}`)).pipe((0,f.U)(ae=>({alertStates:ae,annotations:[]})),(0,y.K)(P.Rc))}}var M=e(59980),b=e(39859),R=e(90801),B=e(86647),w=e(45984),A=e(17424),I=e(86953);class F{canRun(X){return X?Boolean(!X.annotationQuery||X.annotations):!1}run({annotation:X,datasource:te,dashboard:ae,range:_}){if(!this.canRun(te))return(0,M.of)([]);const ve={};return(0,I.r)({dashboard:ae,range:_,panel:ve},te,X).pipe((0,f.U)(Ve=>Ve.events??[]),(0,y.K)(P.h1))}}var K=e(573);class W{canRun(X){return X?(0,K.yr)(X)?!0:Boolean(X.annotationQuery&&!X.annotations):!1}run({annotation:X,datasource:te,dashboard:ae,range:_}){return this.canRun(te)?(0,x.D)(te.annotationQuery({range:_,rangeRaw:_.raw,annotation:X,dashboard:ae})).pipe((0,y.K)(P.h1)):(0,M.of)([])}}class U{constructor(X=[new W,new F]){this.runners=X}canWork({dashboard:X}){const te=X.annotations.list.find(U.getAnnotationsToProcessFilter);return Boolean(te)}work(X){if(!this.canWork(X))return(0,P.H_)();const{dashboard:te,range:ae}=X;let _=te.annotations.list.filter(U.getAnnotationsToProcessFilter);te.meta.publicDashboardAccessToken&&_.length>0&&(_=[_[0]]);const ve=_.map(Ve=>{let it;if((0,p.iE)().isPublicDashboardView){const rt=new A.lh(A.Qi);it=(0,M.of)(rt).pipe((0,y.K)(P.hs))}else it=(0,x.D)((0,B.F)().get(Ve.datasource)).pipe((0,y.K)(P.hs));return it.pipe((0,b.z)(rt=>{const pe=this.runners.find(Ie=>Ie.canRun(rt));return pe?(te.events.publish(new w.z(Ve)),pe.run({annotation:Ve,datasource:rt,dashboard:te,range:ae}).pipe((0,c.R)(ie().cancellations().pipe((0,R.h)(Ie=>Ie===Ve))),(0,f.U)(Ie=>(te.snapshot&&(Ve.snapshotData=(0,E.cloneDeep)(Ie)),te.meta.publicDashboardAccessToken?Ie:(0,P.pG)(Ve,Ie))),(0,r.x)(()=>{te.events.publish(new w.RB(Ve))}))):(0,M.of)([])}))});return(0,s.T)(ve).pipe((0,o.J)(),(0,m.u)((Ve,it)=>Ve.concat(it)),(0,f.U)(Ve=>({annotations:Ve,alertStates:[]})))}static getAnnotationsToProcessFilter(X){return X.enable&&!Boolean(X.snapshotData)}}var N=e(56422),S=e(23309),Y=e(82002),Q=e(37190),z=e(79662),G=e(81168),k=e(46063);class j{constructor(){this.hasAlertRules={}}canWork({dashboard:X,range:te}){return!(!X.uid||X.meta.publicDashboardAccessToken||te.raw.to!=="now"||this.hasAlertRules[X.uid]===!1||!(Y.Vt.hasPermission(G.AccessControlAction.AlertingRuleRead)&&Y.Vt.hasPermission(G.AccessControlAction.AlertingRuleExternalRead)))}work(X){if(!this.canWork(X))return(0,P.H_)();const{dashboard:te}=X;return(0,x.D)((0,C.i)().get("/api/prometheus/grafana/api/v1/rules",{dashboard_uid:te.uid},`dashboard-query-runner-unified-alert-states-${te.id}`)).pipe((0,f.U)(ae=>{if(ae.status==="success"){this.hasAlertRules[te.uid]=!1;const _={};return ae.data.groups.forEach(ve=>ve.rules.forEach(Ve=>{if((0,z.x_)(Ve)&&Ve.annotations&&Ve.annotations[Q.q6.panelID]){this.hasAlertRules[te.uid]=!0;const it=Number(Ve.annotations[Q.q6.panelID]),rt=de(Ve.state);_[it]?rt===S.Z.Alerting&&_[it].state!==S.Z.Alerting?_[it].state=S.Z.Alerting:rt===S.Z.Pending&&_[it].state!==S.Z.Alerting&&_[it].state!==S.Z.Pending&&(_[it].state=S.Z.Pending):_[it]={state:rt,id:Object.keys(_).length,panelId:it,dashboardId:te.id}}})),{alertStates:Object.values(_),annotations:[]}}throw new Error("Unexpected alert rules response.")}),(0,y.K)(P.Rc))}}function de(ne){return ne===k.x_.Firing?S.Z.Alerting:ne===k.x_.Pending?S.Z.Pending:S.Z.OK}class ge{constructor(X,te=(0,v.$t)(),ae=[p.vc.unifiedAlertingEnabled?new j:new D,new N.g,new U]){this.dashboard=X,this.timeSrv=te,this.workers=ae,this.run=this.run.bind(this),this.getResult=this.getResult.bind(this),this.cancel=this.cancel.bind(this),this.destroy=this.destroy.bind(this),this.executeRun=this.executeRun.bind(this),this.results=new t.t(1),this.runs=new n.x,this.cancellationStream=new n.x,this.runsSubscription=this.runs.subscribe(_=>this.executeRun(_)),this.eventsSubscription=X.events.subscribe(g.U5,_=>{this.run({dashboard:this.dashboard,range:this.timeSrv.timeRange()})})}run(X){this.runs.next(X)}getResult(X){return this.results.asObservable().pipe((0,f.U)(te=>{const ae=(0,P.tD)(te.annotations,X),_=te.alertStates.find(ve=>Boolean(X)&&ve.panelId===X);return{annotations:h(ae),alertState:_}}))}executeRun(X){const ae=this.workers.filter(rt=>rt.canWork(X)).map(rt=>rt.work(X)),_=new l.w0,ve=(0,s.T)(ae).pipe((0,c.R)(this.runs.asObservable()),(0,o.J)(),(0,m.u)((rt,pe)=>(rt.annotations=rt.annotations.concat(pe.annotations),rt.alertStates=rt.alertStates.concat(pe.alertStates),rt)),(0,r.x)(()=>{_.unsubscribe()}),(0,u.B)()),Ve=new l.w0,it=(0,i.H)(200).pipe((0,d.h)({annotations:[],alertStates:[]}),(0,c.R)(ve),(0,r.x)(()=>{Ve.unsubscribe()}));Ve.add(it.subscribe(rt=>{this.results.next(rt)})),_.add(ve.subscribe(rt=>{this.results.next(rt)}))}cancel(X){this.cancellationStream.next(X)}cancellations(){return this.cancellationStream.asObservable().pipe((0,u.B)())}destroy(){this.results.complete(),this.runs.complete(),this.cancellationStream.complete(),this.runsSubscription.unsubscribe(),this.eventsSubscription.unsubscribe()}}let re;function ce(ne){re&&re.destroy(),re=ne}function ie(){if(!re)throw new Error("getDashboardQueryRunner can only be used after Grafana instance has started.");return re}let fe;function Ce(ne){fe=ne}function ee(ne){fe||(fe=({dashboard:te,timeSrv:ae,workers:_})=>new ge(te,ae,_));const X=fe(ne);return ce(X),X}},56422:(Z,O,e)=>{"use strict";e.d(O,{g:()=>l});var t=e(59980),n=e(55197);class l{canWork({dashboard:i}){return i?.annotations?.list?.some(f=>f.enable&&Boolean(f.snapshotData))}work(i){if(!this.canWork(i))return(0,n.H_)();const f=this.getAnnotationsFromSnapshot(i.dashboard);return(0,t.of)({annotations:f,alertStates:[]})}getAnnotationsFromSnapshot(i){return(i?.annotations?.list?.filter(m=>m.enable)).filter(m=>Boolean(m.snapshotData)).reduce((m,r)=>m.concat((0,n.pG)(r,r.snapshotData)),[])}getAnnotationsInSnapshot(i,f){const c=this.getAnnotationsFromSnapshot(i);return(0,n.tD)(c,f)}}},55197:(Z,O,e)=>{"use strict";e.d(O,{H_:()=>d,Rc:()=>g,em:()=>a,h1:()=>r,hs:()=>u,pG:()=>h,tD:()=>E});var t=e(82897),n=e.n(t),l=e(59980),s=e(50235),i=e(77599),f=e(35645),c=e(3153),o=e(60499),m=e(98864);function r(v){return v.cancelled?(0,l.of)([]):(p("AnnotationQueryRunner failed",v),(0,l.of)([]))}function u(v){return p("Failed to retrieve datasource",v),(0,l.of)(void 0)}const d=()=>(0,l.of)({annotations:[],alertStates:[]});function g(v){return v.cancelled||p("DashboardQueryRunner failed",v),d()}function p(v,x){const y=(0,i.P)(x);console.error("handleAnnotationQueryRunnerError",y);const C=(0,o.t_)(v,y.message);(0,c.WI)((0,m.$l)(C))}function E(v,x){return v.filter(y=>x!==void 0&&y.panelId&&y.source?.type==="dashboard"?y.panelId===x:!0)}function h(v,x){v.snapshotData&&(v=(0,t.cloneDeep)(v),delete v.snapshotData);for(const y of x)switch(y.source=v,y.color=f.v.theme2.visualization.getColorByName(v.iconColor),y.type=v.name,y.isRegion=Boolean(y.timeEnd&&y.time!==y.timeEnd),y.newState?.toLowerCase()){case"pending":y.color="yellow";break;case"alerting":y.color="red";break;case"ok":y.color="green";break;case"normal":y.color="green";break;case"no_data":y.color="gray";break;case"nodata":y.color="gray";break}return x}function a(v){if(!v||!v.length)return[];const x=[];for(const y of v){const C=new s.U(y);for(let P=0;P<y.length;P++){const D=(0,t.cloneDeep)(C.get(P));x.push(D)}}return x}},49003:(Z,O,e)=>{"use strict";e.d(O,{o:()=>w,t:()=>B});var t=e(82897),n=e(59980),l=e(46528),s=e(39859),i=e(9471),f=e(79720),c=e(49922),o=e(16911),m=e(69311),r=e(36998),u=e(38067),d=e(40400),g=e(33180),p=e(20308),E=e(77599),h=e(22069),a=e(14035),v=e(91162),x=e(79543),y=e(17424),C=e(87865),P=e(23351),D=e(71398);function M(I,F){return(0,P.a)([I,F]).pipe((0,s.z)(K=>{const[W,U]=K;if(Boolean(U.annotations?.length)||Boolean(U.alertState)){W.annotations||(W.annotations=[]);const N=W.annotations.concat(new D.i(U.annotations)),S=U.alertState;return(0,n.of)({...W,annotations:N,alertState:S})}return(0,n.of)(W)}))}var b=e(75434);let R=100;function B(){return"Q"+R++}class w{constructor(F){this.getTransformationsStream=K=>W=>W.pipe((0,s.z)(U=>{if(!K)return(0,n.of)(U);const N=this.dataConfigSource.getTransformations();if(!N||N.length===0)return(0,n.of)(U);const S={interpolate:Y=>(0,p.J)().replace(Y,U?.request?.scopedVars)};return(0,f.H)(N,U.series,S).pipe((0,i.U)(Y=>({...U,series:Y})))})),this.resendLastResult=()=>{this.lastResult&&this.subject.next(this.lastResult)},this.subject=new l.t(1),this.dataConfigSource=F}getData(F){const{withFieldConfig:K,withTransforms:W}=F;let U=1,N=[],S=!0,Y=-1;if(this.dataConfigSource.snapshotData){const Q={state:c.Gu.Done,series:this.dataConfigSource.snapshotData.map(z=>(0,o.g0)(z)),timeRange:(0,m.JK)()};return(0,n.of)(Q)}return this.subject.pipe(this.getTransformationsStream(W),(0,i.U)(Q=>{let z=Q,G=!1;if(K&&Q.series?.length){if(Y===this.dataConfigSource.configRev){const j=Q.series.find(de=>(0,a.iL)(de));j&&!j.packetInfo.schemaChanged&&N[0].fields.length===j.fields.length&&(z={...z,series:N.map((de,ge)=>({...de,length:Q.series[ge].length,fields:de.fields.map((re,ce)=>({...re,values:Q.series[ge].fields[ce].values,state:{...re.state,calcs:void 0,range:void 0}}))}))},G=!0)}let k=this.dataConfigSource.getFieldOverrideOptions();k!=null&&(S||!G)&&(Y=this.dataConfigSource.configRev,z={...z,series:(0,r.SM)({timeZone:Q.request?.timezone??"browser",data:z.series,...k})},S=!1)}return!G&&!(0,u.nl)(N,z.series,u.Ch)&&U++,N=z.series,{...z,structureRev:U}}))}async run(F){const{queries:K,timezone:W,datasource:U,panelId:N,dashboardId:S,dashboardUID:Y,publicDashboardAccessToken:Q,timeRange:z,timeInfo:G,cacheTimeout:k,queryCachingTTL:j,maxDataPoints:de,scopedVars:ge,minInterval:re,app:ce}=F;if((0,x.yl)(U)){this.pipeToSubject((0,x.AK)(F,K[0]),N);return}const ie={app:ce??d.zj.Dashboard,requestId:B(),timezone:W,panelId:N,dashboardId:S,dashboardUID:Y,publicDashboardAccessToken:Q,range:z,timeInfo:G,interval:"",intervalMs:0,targets:(0,t.cloneDeep)(K),maxDataPoints:de,scopedVars:ge||{},cacheTimeout:k,queryCachingTTL:j,startTime:Date.now(),rangeRaw:z.raw};try{const fe=await A(U,ie.scopedVars,Q),Ce=fe.meta?.mixed;ie.targets=ie.targets.map(X=>{const te=X.datasource?.type===h.hr.type;return(!X.datasource||X.datasource.uid!==fe.uid&&!Ce&&!te)&&(X.datasource=fe.getRef()),X});const ee=re?(0,p.J)().replace(re,ie.scopedVars):fe.interval,ne=g.calculateInterval(z,de,ee);ie.scopedVars=Object.assign({},ie.scopedVars,{__interval:{text:ne.interval,value:ne.interval},__interval_ms:{text:ne.intervalMs.toString(),value:ne.intervalMs}}),ie.interval=ne.interval,ie.intervalMs=ne.intervalMs,this.lastRequest=ie,this.pipeToSubject((0,b.v7)(fe,ie),N)}catch(fe){this.pipeToSubject((0,n.of)({state:c.Gu.Error,error:(0,E.P)(fe),series:[],timeRange:ie.range}),N)}}pipeToSubject(F,K){this.subscription&&this.subscription.unsubscribe();let W=F;const U=this.dataConfigSource.getDataSupport();if(U.alertStates||U.annotations){const N=this.dataConfigSource;W=M(F,(0,C.kt)().getResult(N.id))}this.subscription=W.subscribe({next:N=>{this.lastResult=(0,o.zR)(N,this.lastResult),this.subject.next(this.lastResult)}})}cancelQuery(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&(this.lastResult.state===c.Gu.Loading||this.lastResult.state===c.Gu.Streaming)&&this.subject.next({...this.lastResult,state:c.Gu.Done}))}clearLastResult(){this.lastResult=void 0,this.subject=new l.t(1)}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}useLastResultFrom(F){this.lastResult=F.getLastResult(),this.lastResult&&this.subject.next(this.lastResult)}setLastResult(F){this.lastResult=F}getLastResult(){return this.lastResult}getLastRequest(){return this.lastRequest}}async function A(I,F,K){if(!K&&I&&typeof I=="object"&&"query"in I)return I;const W=await(0,v.ak)().get(I,F);return K?new y.lh(W):W}},88039:(Z,O,e)=>{"use strict";e.d(O,{V:()=>n});var t=e(86318);function n(l,s){return(0,t.x)(()=>{s&&l.resolveCancelerIfExists(s)})}},59584:(Z,O,e)=>{"use strict";e.d(O,{C:()=>n});var t=e(38067);const n=(l,s)=>{let i=1;return s?.structureRev&&s.series&&(i=s.structureRev,(0,t.nl)(l.series,s.series,t.Ch)||i++),l.structureRev=i,l}},75434:(Z,O,e)=>{"use strict";e.d(O,{v7:()=>A});var t=e(82897),n=e(59980),l=e(12877),s=e(25740),i=e(49372),f=e(9471),c=e(59724),o=e(71735),m=e(57027),r=e(46978),u=e(82615),d=e(49922),g=e(62163),p=e(21053),E=e(40400),h=e(77599),a=e(22069),v=e(29930),x=e(99822),y=e(47471),C=e(88039),P=e(27677),D=e(75552),M=e(41818),b=e(9398);function R(F){let K=!1;return N=>{if(!N.request||K||P.Cj.getUrlSearchParams().editPanel!=null||N.state!==d.Gu.Done&&N.state!==d.Gu.Error)return;const Y={eventName:D.ct.DataRequest,source:N.request.app,datasourceName:F.name,datasourceId:F.id,datasourceUid:F.uid,datasourceType:F.type,dataSize:0,duration:N.request.endTime-N.request.startTime};N.request.app===E.zj.Explore||N.request.app===E.zj.Correlations?W(Y,N):U(Y,N),N.series&&N.series.length>0&&(Y.dataSize=N.series.length),(0,M.r_)(Y),K=!0};function W(N,S){const Y=Object.keys(S.series).length;N.totalQueries=Y}function U(N,S){const Y={};for(let k=0;k<S.series.length;k++){const j=S.series[k].refId;j&&!Y[j]&&(Y[j]=S.series[k].meta?.isCachedResponse??!1)}const Q=Object.keys(Y).length,z=Object.values(Y).filter(k=>k===!0).length;N.panelId=S.request.panelId,N.dashboardId=S.request.dashboardId,N.totalQueries=Q,N.cachedQueries=z;const G=(0,b.h4)().getCurrent();G&&(N.dashboardId=G.id,N.dashboardName=G.title,N.dashboardUid=G.uid,N.folderName=G.meta.folderTitle),S.error&&(N.error=S.error.message)}}function B(F,K){const W=K.panelData.request,U={...K.packets},N=F.key??F.data?.[0]?.refId??"A";U[N]=F;let S=F.state||d.Gu.Done,Y,Q;const z=[],G=[];for(const de in U){const ge=U[de];if((ge.error||ge.errors?.length)&&(S=d.Gu.Error,Y=ge.error,Q=ge.errors),ge.data&&ge.data.length)for(const re of ge.data){if(re.meta?.dataTopic===g.w5.Annotations){G.push(re);continue}z.push(re)}}const k=w(W,S);return{packets:U,panelData:{state:S,series:z,annotations:G,error:Y,errors:Q,request:W,timeRange:k}}}function w(F,K){const W=F.range;return!(0,t.isString)(W.raw.from)||K!==d.Gu.Streaming?W:{...W,from:p.parse(W.raw.from,!1),to:p.parse(W.raw.to,!0)}}function A(F,K,W){let U={panelData:{state:d.Gu.Loading,series:[],request:K,timeRange:K.range},packets:{}};if(!K.targets.length)return K.endTime=Date.now(),U.panelData.state=d.Gu.Done,(0,n.of)(U.panelData);const N=I(F,K,W).pipe((0,f.U)(S=>{if(!(0,t.map)(S.data))throw new Error(`Expected response data to be array, got ${typeof S.data}.`);return K.endTime=Date.now(),U=B(S,U),U.panelData}),(0,c.K)(S=>{const Y=typeof S=="string"?S:JSON.stringify(S);return console.error("runRequest.catchError",Y),(0,n.of)({...U.panelData,state:d.Gu.Error,error:(0,h.P)(S)})}),(0,o.b)(R(F)),(0,C.V)(v.ae,K.requestId),(0,m.B)());return(0,l.T)((0,s.H)(200).pipe((0,r.h)(U.panelData),(0,u.R)(N)),N)}function I(F,K,W){if(K.targets=K.targets.map(N=>(0,x.vH)(N)?{...F?.getDefaultQuery?.(E.zj.PanelEditor),...N}:N),F.type==="public-ds")return(0,i.D)(F.query(K));for(const N of K.targets)if((0,a.Pr)(N.datasource))return y.mV.query(K);const U=W?W(K):F.query(K);return(0,i.D)(U)}},43993:(Z,O,e)=>{"use strict";e.d(O,{K:()=>x,A:()=>v});var t=e(9892),n=e(68404),l=e(61549),s=e(11979),i=e(68183),f=e(72648),c=e(39904),o=e(34807),m=e(85511),r=e(29930),u=e(9085),d=e.n(u),g=e(67487);function p({className:C,imageHeight:P,imageWidth:D,item:M,lastUpdated:b,onClick:R}){const B=(0,f.l4)(),[w,A]=(0,n.useState)(!0),I=v(M.uid,B.isLight),F=E(B,P,D),K=M.parentTitle||"General";return n.createElement("a",{className:d()(C,F.card),key:M.uid,href:M.url,onClick:R},n.createElement("div",{className:F.imageContainer},w?n.createElement("img",{loading:"lazy",alt:"Dashboard preview",className:F.image,src:I,onLoad:()=>A(!0),onError:()=>A(!1)}):n.createElement("div",{className:F.imagePlaceholder},M.icon?n.createElement(l.Z,{src:M.icon,width:36,height:36,title:M.title}):n.createElement(c.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:F.info},n.createElement("div",{className:F.infoHeader},n.createElement("div",{className:F.titleContainer},n.createElement("div",null,M.title),n.createElement("div",{className:F.folder},n.createElement(c.J,{name:"folder"}),K)),b!==null&&n.createElement("div",{className:F.updateContainer},n.createElement("div",null,"Last updated"),b?n.createElement("div",{className:F.update},b):n.createElement(g.$,null))),n.createElement("div",null,n.createElement(o.P,{className:F.tagList,tags:M.tags??[]}))))}const E=(C,P,D)=>{const M=C.spacing(4);return{card:t.css`
      background-color: ${C.colors.background.secondary};
      border: 1px solid ${C.colors.border.medium};
      border-radius: 4px;
      box-shadow: ${C.shadows.z3};
      display: flex;
      flex-direction: column;
      height: 100%;
      max-width: calc(${D}px + (${M} * 2))};
      width: 100%;
    `,folder:t.css`
      align-items: center;
      color: ${C.colors.text.secondary};
      display: flex;
      font-size: ${C.typography.size.sm};
      gap: ${C.spacing(.5)};
    `,image:t.css`
      box-shadow: ${C.shadows.z2};
      height: ${P}px;
      margin: ${C.spacing(1)} calc(${M} - 1px) 0;
      width: ${D}px;
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${C.spacing(1)} calc(${M} - 1px) 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      color: ${C.colors.text.secondary};
      display: flex;
      height: ${P}px;
      justify-content: center;
      margin: ${C.spacing(1)} ${M} 0;
      width: ${D}px;
    `,info:t.css`
      background-color: ${C.colors.background.canvas};
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 4px;
      display: flex;
      flex-direction: column;
      min-height: ${C.spacing(7)};
      gap: ${C.spacing(1)};
      padding: ${C.spacing(1)} ${C.spacing(2)};
      z-index: 1;
    `,infoHeader:t.css`
      display: flex;
      gap: ${C.spacing(1)};
      justify-content: space-between;
    `,tagList:t.css`
      justify-content: flex-start;
    `,titleContainer:t.css`
      display: flex;
      flex-direction: column;
      gap: ${C.spacing(.5)};
    `,updateContainer:t.css`
      align-items: flex-end;
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      font-size: ${C.typography.bodySmall.fontSize};
      gap: ${C.spacing(.5)};
    `,update:t.css`
      color: ${C.colors.text.secondary};
      text-align: right;
    `}};var h=e(84638);const a=500;function v(C,P){return`/api/dashboards/uid/${C}/img/thumb/${P?"light":"dark"}`}function x({editable:C,item:P,isSelected:D,onTagSelected:M,onToggleChecked:b,onClick:R}){const[B,w]=(0,n.useState)(!0),[A,I]=(0,n.useState)(null),[F,K]=(0,n.useState)(!1),W=(0,n.useRef)(null),U=(0,n.useCallback)(({placement:ee,reference:ne,popper:X})=>{let te=[0,0];return ee==="bottom"||ee==="top"?te=[0,-(ne.height+X.height)/2]:(ee==="left"||ee==="right")&&(te=[-(ne.width+X.width)/2,0]),te},[]),[N,S]=n.useState(null),[Y,Q]=n.useState(null),{styles:z,attributes:G}=(0,s.D)(N,Y,{modifiers:[{name:"offset",options:{offset:U}}]}),k=(0,f.l4)(),j=v(P.uid,k.isLight),de=y(k,N?.getBoundingClientRect().width,Y?.getBoundingClientRect().width),ge=async()=>{if(K(!0),P.uid&&!A){const ee=await r.ae.getDashboardByUid(P.uid),{updated:ne}=ee.meta;I(ne?new Date(ne).toLocaleString():null)}},re=()=>{W.current=window.setTimeout(ge,a)},ce=()=>{W.current&&window.clearTimeout(W.current),W.current=window.setTimeout(ge,a)},ie=()=>{W.current&&window.clearTimeout(W.current),K(!1)},fe=ee=>{ee.stopPropagation(),ee.preventDefault(),b?.(P)},Ce=(ee,ne)=>{ne.stopPropagation(),ne.preventDefault(),M?.(ee)};return n.createElement("a",{"data-testid":i.wl.components.Search.dashboardCard(P.title),className:de.card,key:P.uid,href:P.url,ref:ee=>S(ee),onMouseEnter:re,onMouseLeave:ie,onMouseMove:ce,onClick:R},n.createElement("div",{className:de.imageContainer},n.createElement(h.R,{className:de.checkbox,"aria-label":`Select dashboard ${P.title}`,editable:C,checked:D,onClick:fe}),B?n.createElement("img",{loading:"lazy",className:de.image,src:j,alt:"Dashboard preview",onError:()=>w(!1)}):n.createElement("div",{className:de.imagePlaceholder},P.icon?n.createElement(l.Z,{src:P.icon,width:36,height:36,title:P.title}):n.createElement(c.J,{name:"apps",size:"xl"}))),n.createElement("div",{className:de.info},n.createElement("div",{className:de.title},P.title),n.createElement(o.P,{displayMax:1,tags:P.tags??[],onClick:Ce})),F&&n.createElement(m.h_,{className:de.portal},n.createElement("div",{ref:Q,style:z.popper,...G.popper},n.createElement(p,{className:de.expandedView,imageHeight:240,imageWidth:320,item:P,lastUpdated:A,onClick:R}))))}const y=(C,P=0,D=0)=>{const M=C.spacing(4);return{card:t.css`
      background-color: ${C.colors.background.secondary};
      border: 1px solid ${C.colors.border.medium};
      border-radius: ${C.shape.radius.default};
      display: flex;
      flex-direction: column;

      &:hover {
        background-color: ${C.colors.emphasize(C.colors.background.secondary,.03)};
      }
    `,checkbox:t.css`
      left: 0;
      margin: ${C.spacing(1)};
      position: absolute;
      top: 0;
    `,expandedView:t.css`
      @keyframes expand {
        0% {
          transform: scale(${P/D});
        }
        100% {
          transform: scale(1);
        }
      }

      animation: expand ${C.transitions.duration.shortest}ms ease-in-out 0s 1 normal;
      background-color: ${C.colors.emphasize(C.colors.background.secondary,.03)};
    `,image:t.css`
      aspect-ratio: 4 / 3;
      box-shadow: ${C.shadows.z1};
      margin: ${C.spacing(1)} ${M} 0;
      width: calc(100% - (2 * ${M}));
    `,imageContainer:t.css`
      flex: 1;
      position: relative;

      &:after {
        background: linear-gradient(180deg, rgba(196, 196, 196, 0) 0%, rgba(127, 127, 127, 0.25) 100%);
        bottom: 0;
        content: '';
        left: 0;
        margin: ${C.spacing(1)} ${M} 0;
        position: absolute;
        right: 0;
        top: 0;
      }
    `,imagePlaceholder:t.css`
      align-items: center;
      aspect-ratio: 4 / 3;
      color: ${C.colors.text.secondary};
      display: flex;
      justify-content: center;
      margin: ${C.spacing(1)} ${M} 0;
      width: calc(100% - (2 * ${M}));
    `,info:t.css`
      align-items: center;
      background-color: ${C.colors.background.canvas};
      border-bottom-left-radius: ${C.shape.radius.default};
      border-bottom-right-radius: ${C.shape.radius.default};
      display: flex;
      height: ${C.spacing(7)};
      gap: ${C.spacing(1)};
      padding: 0 ${C.spacing(2)};
      z-index: 1;
    `,portal:t.css`
      pointer-events: none;
    `,title:t.css`
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    `}}},84638:(Z,O,e)=>{"use strict";e.d(O,{R:()=>l});var t=e(68404),n=e(58255);const l=(0,t.memo)(({onClick:s,className:i,checked:f=!1,editable:c=!1,"aria-label":o})=>c?t.createElement(n.X,{onClick:s,className:i,value:f,"aria-label":o}):null);l.displayName="SearchCheckbox"},81029:(Z,O,e)=>{"use strict";e.d(O,{T:()=>E});var t=e(9892),n=e(68404),l=e(68183),s=e(35645),i=e(72648),f=e(39904),c=e(72948),o=e(34807),m=e(35287),r=e(10216),u=e(28066),d=e(84638);const g=l.wl.components.Search,p=(v="")=>{const x=new Map([["errors","info-circle"],["views","eye"]]);return x.has(v)?x.get(v):"sort-amount-down"},E=({item:v,isSelected:x,editable:y,onToggleChecked:C,onTagSelected:P,onClickItem:D})=>{const M=(0,i.wW)(a),b=(0,n.useCallback)((w,A)=>{A.stopPropagation(),A.preventDefault(),P(w)},[P]),R=(0,n.useCallback)(w=>{w.stopPropagation(),C&&C(v)},[v,C]),B=s.v.featureToggles.nestedFolders?n.createElement(n.Fragment,null,n.createElement(f.J,{name:(0,u.J6)(v.kind),"aria-hidden":!0})," ",h(v.kind)):n.createElement(n.Fragment,null,n.createElement(f.J,{name:(0,u.J6)(v.parentKind??"folder"),"aria-hidden":!0})," ",v.parentTitle||"General");return n.createElement("div",{className:M.cardContainer},n.createElement(d.R,{"aria-label":"Select dashboard",editable:y,checked:x,onClick:R}),n.createElement(c.Z,{className:M.card,"data-testid":g.dashboardItem(v.title),href:v.url,style:{minHeight:r.CN},onClick:D},n.createElement(c.Z.Heading,null,v.title),n.createElement(c.Z.Meta,{separator:""},n.createElement("span",{className:M.metaContainer},B),v.sortMetaName&&n.createElement("span",{className:M.metaContainer},n.createElement(f.J,{name:p(v.sortMetaName)}),v.sortMeta," ",v.sortMetaName)),n.createElement(c.Z.Tags,null,n.createElement(o.P,{tags:v.tags??[],onClick:b,getAriaLabel:w=>`Filter by tag "${w}"`}))))};function h(v){switch(v){case"folder":return(0,m.t)("search.result-kind.folder","Folder");case"dashboard":return(0,m.t)("search.result-kind.dashboard","Dashboard");case"panel":return(0,m.t)("search.result-kind.panel","Panel")}}const a=v=>({cardContainer:t.css`
      display: flex;
      align-items: center;
      margin-bottom: ${v.spacing(.75)};
    `,card:t.css`
      padding: ${v.spacing(1)} ${v.spacing(2)};
      margin-bottom: 0;
    `,metaContainer:t.css`
      display: flex;
      align-items: center;
      margin-right: ${v.spacing(1)};

      svg {
        margin-right: ${v.spacing(.5)};
      }
    `})},10216:(Z,O,e)=>{"use strict";e.d(O,{CN:()=>l,E_:()=>p,YQ:()=>o,fy:()=>m,pW:()=>c,qb:()=>d,qi:()=>f,rh:()=>u,to:()=>r,xb:()=>g,yw:()=>i});var t=e(1037);const n=null,l=58,s=8,i={label:"A\u2013Z",value:"alpha-asc"},f="search.sections",c=0,o="general",m="General",r="grafana.search.include.panels",u="grafana.search.layout",d="grafana.search.sort",g={dashboard:t.o.DashDB,folder:t.o.DashFolder,home:t.o.DashHome},p=1e3},54350:(Z,O,e)=>{"use strict";e.d(O,{A:()=>i,v:()=>f});var t=e(68404),n=e(91017),l=e(83383),s=e(37932);function i(){const c=(0,t.useRef)(new n.x);return{keyboardEvents:c.current,onKeyDown:o=>{switch(o.code){case"ArrowDown":case"ArrowUp":case"ArrowLeft":case"ArrowRight":case"Enter":c.current.next(o);default:}}}}function f(c,o,m){const r=(0,t.useRef)({x:0,y:-1}),[u,d]=(0,t.useState)({x:0,y:-1}),g=(0,t.useRef)();return(0,t.useEffect)(()=>{g.current=m.view.fields.url,r.current.x=0,r.current.y=-1,d({...r.current})},[m]),(0,t.useEffect)(()=>{const p=c.subscribe({next:E=>{switch(E?.code){case"ArrowDown":{r.current.y++,d({...r.current});break}case"ArrowUp":r.current.y=Math.max(0,r.current.y-1),d({...r.current});break;case"ArrowRight":{o>0&&(r.current.x=Math.min(o,r.current.x+1),d({...r.current}));break}case"ArrowLeft":{o>0&&(r.current.x=Math.max(0,r.current.x-1),d({...r.current}));break}case"Enter":if(!g.current)break;const h=r.current.x*o+r.current.y;if(h<0){r.current.x=0,r.current.y=0,d({...r.current});break}const a=g.current.values?.get(h);a&&s.E1.push(l.u.stripBaseFromUrl(a))}}});return()=>p.unsubscribe()},[c,o]),u}},30506:(Z,O,e)=>{"use strict";e.d(O,{T:()=>t.T,_:()=>M});var t=e(81029),n=e(68404),l=e(35645),s=e(70356),i=e(37932);function f(){const b=(0,s.TH)();return[new URLSearchParams(b.search),(w,A)=>{i.E1.partial(w,A)}]}var c=e(9892),o=e(72648),m=e(8180),r=e(7804),u=e(54350),d=e(50343),g=e(66757);function p({}){const b=(0,o.wW)(E),R=(0,g.hD)(),B=R.useState();(0,n.useEffect)(()=>R.initStateFromUrl(),[R]);const{onKeyDown:w,keyboardEvents:A}=(0,u.A)();return n.createElement("div",{className:b.overlay},n.createElement("div",{className:b.container},n.createElement("div",{className:b.searchField},n.createElement("div",null,n.createElement("input",{type:"text",autoFocus:!0,placeholder:B.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:B.query??"",onChange:I=>R.onQueryChange(I.currentTarget.value),onKeyDown:w,spellCheck:!1,className:b.input})),n.createElement("div",{className:b.closeBtn},n.createElement(m.h,{name:"times",onClick:R.onCloseSearch,size:"xxl",tooltip:"Close search"}))),n.createElement("div",{className:b.search},n.createElement(d.Z,{showManage:!1,keyboardEvents:A}))))}const E=(0,r.B)(b=>({overlay:c.css`
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      z-index: ${b.zIndex.sidemenu};
      position: fixed;
      background: ${b.colors.background.canvas};
      padding: ${b.spacing(1)};

      ${b.breakpoints.up("md")} {
        left: ${b.components.sidemenu.width}px;
        z-index: ${b.zIndex.navbarFixed+1};
        padding: ${b.spacing(2)};
      }
    `,container:c.css`
      display: flex;
      flex-direction: column;
      max-width: 1400px;
      margin: 0 auto;
      padding: ${b.spacing(1)};
      background: ${b.colors.background.primary};
      border: 1px solid ${b.components.panel.borderColor};
      height: 100%;

      ${b.breakpoints.up("md")} {
        padding: ${b.spacing(3)};
      }
    `,closeBtn:c.css`
      right: -5px;
      top: 2px;
      z-index: 1;
      position: absolute;
    `,searchField:c.css`
      position: relative;
    `,search:c.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${b.spacing(2,0,3,0)};
    `,input:c.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 2px solid ${b.v1.colors.border1};
      font-size: 20px;
      line-height: 38px;
      width: 100%;

      &::placeholder {
        color: ${b.v1.colors.textWeak};
      }
    `}));var h=e(99510),a=e(81699),v=e(6665),x=e(22163);const y=200;function C({isOpen:b}){const R=(0,o.wW)(D),B=(0,o.wW)(z=>P(z,y)),w=(0,g.hD)(),A=w.useState(),I=(0,n.useRef)(null),F=(0,n.useRef)(null),[K,W]=(0,n.useState)(!1),{overlayProps:U,underlayProps:N}=(0,v.Ir)({isOpen:b,onClose:w.onCloseSearch},I),{dialogProps:S}=(0,h.R)({},I),{onKeyDown:Y,keyboardEvents:Q}=(0,u.A)();return(0,n.useEffect)(()=>w.initStateFromUrl(),[w]),n.createElement(v.Xj,null,n.createElement(x.Z,{nodeRef:F,appear:!0,in:!0,timeout:y,classNames:B.underlay},n.createElement("div",{ref:F,onClick:w.onCloseSearch,className:R.underlay,...N})),n.createElement(x.Z,{nodeRef:I,onEntered:()=>W(!0),appear:!0,in:!0,timeout:y,classNames:B.overlay},n.createElement("div",{ref:I,className:R.overlay,...U,...S},n.createElement(a.MT,{contain:!0,autoFocus:!0},n.createElement("div",{className:R.searchField},n.createElement("div",null,n.createElement("input",{type:"text",placeholder:A.includePanels?"Search dashboards and panels by name":"Search dashboards by name",value:A.query??"",onChange:z=>w.onQueryChange(z.currentTarget.value),onKeyDown:Y,tabIndex:0,spellCheck:!1,className:R.input})),n.createElement("div",{className:R.closeBtn},n.createElement(m.h,{name:"times",onClick:w.onCloseSearch,size:"xl",tooltip:"Close search"}))),K&&n.createElement("div",{className:R.search},n.createElement(d.Z,{showManage:!1,keyboardEvents:Q}))))))}const P=(b,R)=>{const B={transitionDuration:`${R}ms`,transitionTimingFunction:b.transitions.easing.easeInOut},w={[b.breakpoints.up("md")]:{...B,transitionProperty:"opacity"}},A={[b.breakpoints.up("md")]:{opacity:0}},I={[b.breakpoints.up("md")]:{opacity:1}},F={[b.breakpoints.up("md")]:{...B,transitionProperty:"height, width",overflow:"hidden"}},K={height:"100%",width:"100%",[b.breakpoints.up("md")]:{height:"32px",width:"50%"}},W={height:"100%",width:"100%",[b.breakpoints.up("md")]:{height:"90%",width:"75%"}};return{overlay:{appear:(0,c.css)(K),appearActive:(0,c.css)(F,W),appearDone:(0,c.css)(W)},underlay:{appear:(0,c.css)(A),appearActive:(0,c.css)(w,I),appearDone:(0,c.css)(I)}}},D=b=>({underlay:c.css`
      background-color: ${b.components.overlay.background};
      backdrop-filter: blur(1px);
      bottom: 0;
      left: 0;
      padding: 0;
      position: fixed;
      right: 0;
      top: 0;
      z-index: ${b.zIndex.modalBackdrop};
    `,overlay:c.css`
      background: ${b.colors.background.primary};
      border: 1px solid ${b.components.panel.borderColor};
      display: flex;
      flex-direction: column;
      margin: 0 auto;
      padding: ${b.spacing(1)};
      position: fixed;
      height: 100%;
      z-index: ${b.zIndex.modal};

      ${b.breakpoints.up("md")} {
        border-radius: ${b.shape.radius.default};
        box-shadow: ${b.shadows.z3};
        left: 0;
        margin: ${b.spacing(.5,"auto",0)};
        padding: ${b.spacing(1)};
        right: 0;
      }
    `,closeBtn:c.css`
      right: -5px;
      top: 0px;
      z-index: 1;
      position: absolute;
    `,searchField:c.css`
      position: relative;
    `,search:c.css`
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: 100%;
      padding: ${b.spacing(2,0,3,0)};
    `,input:c.css`
      box-sizing: border-box;
      outline: none;
      background-color: transparent;
      background: transparent;
      border-bottom: 1px solid ${b.colors.border.medium};
      font-size: 16px;
      line-height: 30px;
      width: 100%;

      &::placeholder {
        color: ${b.colors.text.disabled};
      }
    `}),M=(0,n.memo)(()=>{const[b]=f(),R=b.get("search")==="open",B=l.v.featureToggles.topnav;return R?B?n.createElement(C,{isOpen:R}):n.createElement(p,null):null});M.displayName="SearchWrapper"},62079:(Z,O,e)=>{"use strict";e.d(O,{i:()=>g});var t=e(9892),n=e(68404),l=e(72648),s=e(35029),i=e(45253),f=e(52081),c=e(31403),o=e(79658),m=e(47694),r=e(60499),u=e(50946),d=e(10216);const g=({results:h,onMoveItems:a,onDismiss:v})=>{const[x,y]=(0,n.useState)(null),C=(0,l.wW)(E),P=(0,r.iG)(),[D,M]=(0,n.useState)(!1),b=m.ZP.featureToggles.nestedFolders,R=Array.from(h.get("dashboard")??[]),B=b?Array.from(h.get("folder")??[]).filter(F=>F!==d.YQ):[],w=(0,n.useCallback)(F=>{y(F)},[y]),A=async()=>{if(x){if(b){M(!0);let F=0,K=0;if(R.length){const U=await(0,u.ct)(R,x);F+=U.totalCount,K+=U.successCount}if(B.length){const U=await(0,u.Jx)(B,x);F+=U.totalCount,K+=U.successCount}const W=x.title??"General";p(P,W,{selectedDashboardsCount:R.length,selectedFoldersCount:B.length,totalCount:F,successCount:K}),a(),M(!1),v();return}if(R.length){const F=x.title??"General";M(!0),(0,u.ct)(R,x).then(K=>{if(K.successCount>0){const W=K.successCount===1?"":"s",U=`Dashboard${W} Moved`,N=`${K.successCount} dashboard${W} moved to ${F}`;P.success(U,N)}K.totalCount===K.alreadyInFolderCount?P.error("Error",`Dashboard already belongs to folder ${F}`):a(),M(!1),v()})}}},I=[["folder","folders",B.length],["dashboard","dashboards",R.length]].filter(([F,K,W])=>W>0).map(([F,K,W])=>`${W.toLocaleString()} ${W===1?F:K}`).join(" and ");return n.createElement(s.u,{isOpen:!0,className:C.modal,title:b?"Move":"Choose Dashboard Folder",icon:"folder-plus",onDismiss:v},n.createElement(n.Fragment,null,n.createElement("div",{className:C.content},b&&B.length>0&&n.createElement(i.b,{severity:"warning",title:" Moving this item may change its permissions"}),n.createElement("p",null,"Move ",I," to:"),n.createElement(o.Es,{allowEmpty:!0,enableCreateNew:!1,onChange:w})),n.createElement(f.Lh,{justify:"flex-end"},n.createElement(c.zx,{icon:D?"fa fa-spinner":void 0,variant:"primary",onClick:A},"Move"),n.createElement(c.zx,{variant:"secondary",onClick:v},"Cancel"))))};function p(h,a,{selectedDashboardsCount:v,selectedFoldersCount:x,totalCount:y,successCount:C}){let P;const D=C===1?"":"s",M=y-C;if(v&&x?P=`Item${D}`:v?P=`Dashboard${D}`:x&&(P=`Folder${D}`),P){const b=P?.toLocaleLowerCase();y===C?h.success(`${P} moved`,`Moved ${C} ${b} to ${a}`):C===0?h.error(`Failed to move ${b}`,`Could not move ${y} ${b} due to an error`):h.warning(`Partially moved ${b}`,`Failed to move ${M} ${b} to ${a}`)}}const E=h=>({modal:t.css`
      width: 500px;
    `,content:t.css`
      margin-bottom: ${h.spacing(3)};
    `})},16526:(Z,O,e)=>{"use strict";e.d(O,{Q:()=>j});var t=e(9892),n=e(68404),l=e(91742),s=e(75478),i=e(47535),f=e(40538),c=e(72648),o=e(35316),m=e(12245),r=e(54350),u=e(14582),d=e(36512),g=e(89890),p=e(20112),E=e(35645),h=e(86647),a=e(8180),v=e(58255),x=e(39904),y=e(34807),C=e(18271),P=e(35287),D=e(48996),M=e(45984),b=e(28066),R=e(88683),B=e(35029),w=e(94893),A=e(9405),I=e(16225);const F=[{label:"Score",value:"score"},{label:"Fields",value:"fields"},{label:"Allowed actions",value:"allowed_actions"}];function K({name:re,explain:ce,frame:ie,row:fe}){const[Ce,ee]=(0,n.useState)(!0),[ne,X]=(0,n.useState)("score"),te=n.createElement(R.H,{title:re,icon:"info",tabs:F,activeTab:ne,onChangeTab:ae=>{X(ae.value)}});return n.createElement(B.u,{title:te,isOpen:Ce,onDismiss:()=>ee(!1),closeOnBackdropClick:!0,closeOnEscape:!0},n.createElement(w.I,null,ne===F[0].value&&n.createElement(A.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!0,value:JSON.stringify(ce,null,2),readOnly:!1}),ne===F[1].value&&n.createElement("div",null,n.createElement(I.H,{data:ie,rowIndex:fe})),ne===F[2].value&&n.createElement(A.p,{width:"100%",height:"70vh",language:"json",showLineNumbers:!1,showMiniMap:!1,value:(()=>{const ae=ie.fields.find(ve=>ve.name==="allowed_actions")?.values?.get(fe),_=ie.fields.find(ve=>ve.name==="ds_uid")?.values?.get(fe);return JSON.stringify({dsUids:_??[],allowedActions:ae??[]},null,2)})(),readOnly:!1})))}const W=175,U=200,N=(re,ce,ie,fe,Ce,ee,ne,X,te)=>{const ae=[],_=re.view.fields,ve=_.uid,Ve=_.kind;let it=0;const rt=_[re.view.dataFrame.meta?.custom?.sortBy];rt&&(it=175,rt.type===u.fS.time&&(it+=25),ce-=it),_.explain&&_.score&&(ce-=100);let pe=50;ie&&fe&&(pe=30,ae.push({id:"column-checkbox",width:pe,Header:()=>ie("*","*")?n.createElement("div",{className:ee.checkboxHeader},n.createElement(a.h,{name:"check-square",onClick:Ce})):n.createElement("div",{className:ee.checkboxHeader},n.createElement(v.X,{checked:!1,onChange:Je=>{Je.stopPropagation(),Je.preventDefault();const{view:He}=re,Ae=Math.min(He.length,50);for(let et=0;et<Ae;et++){const _e=He.get(et);_e.uid&&_e.kind&&(ie(_e.kind,_e.uid)||fe(_e.kind,_e.uid))}}})),Cell:Je=>{const He=ve.values.get(Je.row.index),Ae=Ve?Ve.values.get(Je.row.index):"dashboard",et=ie(Ae,He),_e=He!=null;return n.createElement("div",{...Je.cellProps},n.createElement("div",{className:ee.checkbox},n.createElement(v.X,{disabled:!_e,value:et&&_e,onChange:Se=>{fe(Ae,He)}})))},field:ve}),ce-=pe),pe=Math.max(ce*.2,300),ae.push({Cell:Je=>{let He=(0,t.cx)(ee.nameCellStyle),Ae=_.name.values.get(Je.row.index);return Ae?.length||(Ae=Je.row.index>=re.view.dataFrame.length?"Loading...":"Missing title",He+=" "+ee.missingTitleText),n.createElement("a",{...Je.cellProps,href:Je.userProps.href,onClick:Je.userProps.onClick,className:He,title:Ae},Ae)},id:"column-name",field:_.name,Header:()=>n.createElement("div",{className:ee.headerNameStyle},(0,P.t)("search.results-table.name-header","Name")),width:pe}),ce-=pe,pe=W,ae.push(Q(_.kind,_.panel_type,pe,ee)),ce-=pe,_.ds_uid&&X&&(pe=Math.min(ce/2.5,U),ae.push(Y(_.ds_uid,pe,ee.typeIcon,ee.datasourceItem,ee.invalidDatasourceItem,X)),ce-=pe);const Ie=!te||S(re.view.fields.tags),We=re.view.dataFrame.meta?.custom;if(We?.locationInfo&&ce>0&&(pe=Ie?Math.max(ce/1.75,300):ce,ce-=pe,ae.push({Cell:Je=>{const He=(_.location?.values.get(Je.row.index)??"").split("/");return n.createElement("div",{...Je.cellProps,className:(0,t.cx)(ee.locationCellStyle)},He.map(Ae=>{let et=We.locationInfo[Ae];return!et&&Ae==="general"&&(et={kind:"folder",url:"/dashboards",name:"General"}),et?n.createElement("a",{key:Ae,href:et.url,className:ee.locationItem},n.createElement(x.J,{name:(0,b.J6)(et.kind)})," ",et.name):n.createElement("span",{key:Ae},Ae)}))},id:"column-location",field:_.location??_.url,Header:()=>(0,P.t)("search.results-table.location-header","Location"),width:pe})),ce>0&&Ie&&ae.push(z(_.tags,ce,ee.tagList,ne)),rt&&it){const Je=rt.display??(0,d.U_)({field:rt,theme:E.v.theme2});ae.push({Header:()=>n.createElement("div",{className:ee.sortedHeader},(0,g.C)(rt)),Cell:He=>n.createElement("div",{...He.cellProps,className:ee.sortedItems},G({sortField:rt,getDisplay:Je,index:He.row.index,kind:_.kind})),id:"column-sort-field",field:rt,width:it})}if(_.explain&&_.score){const Je=_.score.values,He=Ae=>{C.Z.publish(new M.Dn({component:K,props:{name:_.name.values.get(Ae),explain:_.explain.values.get(Ae),frame:re.view.dataFrame,row:Ae}}))};ae.push({Header:()=>n.createElement("div",{className:ee.sortedHeader},"Score"),Cell:Ae=>n.createElement("div",{...Ae.cellProps,className:ee.explainItem,onClick:()=>He(Ae.row.index)},Je.get(Ae.row.index)),id:"column-score-field",field:_.score,width:100})}return ae};function S(re){for(let ce=0;ce<re.values.length;ce++)if(re.values.get(ce)!=null)return!0;return!1}function Y(re,ce,ie,fe,Ce,ee){const ne=(0,h.F)();return{id:"column-datasource",field:re,Header:()=>(0,P.t)("search.results-table.datasource-header","Data source"),Cell:X=>{const te=re.values.get(X.row.index);return te?.length?n.createElement("div",{...X.cellProps,className:(0,t.cx)(fe)},te.map((ae,_)=>{const ve=ne.getInstanceSettings(ae),Ve=ve?.meta?.info?.logos?.small;return Ve?n.createElement("span",{key:_,onClick:it=>{it.stopPropagation(),it.preventDefault(),ee(ve.uid)}},n.createElement("img",{src:Ve,alt:"",width:14,height:14,title:ve.type,className:ie}),ve.name):n.createElement("span",{className:Ce,key:_},ae)})):null},width:ce}}function Q(re,ce,ie,fe){return{id:"column-type",field:re??ce,Header:()=>(0,P.t)("search.results-table.type-header","Type"),Cell:Ce=>{const ee=Ce.row.index,ne=re?.values.get(ee)??"dashboard";let X="apps",te="Dashboard";if(ne)switch(te=ne,te){case"dashboard":te=(0,P.t)("search.results-table.type-dashboard","Dashboard");break;case"folder":X="folder",te=(0,P.t)("search.results-table.type-folder","Folder");break;case"panel":X=`${D.Co.panel}`;const ae=ce.values.get(ee);if(ae){te=ae;const _=E.v.panels[te];if(_?.name)te=_.name;else switch(ae){case"row":te="Row",X="bars";break;case"singlestat":te="Singlestat";break;default:X="question-circle"}}break}return n.createElement("div",{...Ce.cellProps,className:fe.typeText},n.createElement(x.J,{name:X,size:"sm",title:te,className:fe.typeIcon}),te)},width:ie}}function z(re,ce,ie,fe){return{Cell:Ce=>{const ee=re.values.get(Ce.row.index);return ee?n.createElement("div",{...Ce.cellProps},n.createElement(y.P,{className:ie,tags:ee,onClick:fe})):null},id:"column-tags",field:re,Header:()=>(0,P.t)("search.results-table.tags-header","Tags"),width:ce}}function G({kind:re,sortField:ce,index:ie,getDisplay:fe}){const Ce=ce.values.get(ie);return["folder","panel"].includes(re.values.get(ie))&&Ce===0?"-":(0,p.zc)(fe(Ce))}const k=36,j=n.memo(({response:re,width:ce,height:ie,selection:fe,selectionToggle:Ce,clearSelection:ee,onTagSelected:ne,onDatasourceChange:X,onClickItem:te,keyboardEvents:ae})=>{const _=(0,c.wW)(de),ve=(0,c.wW)(ge),Ve=(0,m.p)((0,c.l4)(),f.Ss.Sm),it=(0,n.useRef)(null),[rt,pe]=(0,n.useState)(null),Ie=(0,r.v)(ae,0,re),We=(0,n.useMemo)(()=>re?.view?.dataFrame.fields.length?Array(re.totalRows).fill(0):[],[re]);(0,n.useEffect)(()=>{it.current&&it.current.resetloadMoreItemsCache(),rt&&rt.scrollTo(0)},[We,rt]);const Je=(0,n.useMemo)(()=>N(re,ce,fe,Ce,ee,ve,ne,X,re.view?.length>=re.totalRows),[re,ce,ve,fe,Ce,ee,ne,X]),He=(0,n.useMemo)(()=>({columns:Je,data:We}),[Je,We]),{getTableProps:Ae,getTableBodyProps:et,headerGroups:_e,rows:Se,prepareRow:Fe}=(0,l.useTable)(He,l.useAbsoluteLayout),Xe=(0,n.useCallback)(({index:Qe,style:ct})=>{const ht=Se[Qe];Fe(ht);const ft=re.view.fields.url?.values.get(Qe);let Re=_.rowContainer;return Qe===Ie.y&&(Re+=" "+_.selectedRow),n.createElement("div",{...ht.getRowProps({style:ct}),className:Re},ht.cells.map((nt,le)=>n.createElement(o.p,{key:le,tableStyles:Ve,cell:nt,columnIndex:le,columnCount:ht.cells.length,userProps:{href:ft,onClick:te}})))},[Se,Fe,re.view.fields.url?.values,Ie,_,Ve,te]);return Se.length?n.createElement("div",{...Ae(),"aria-label":"Search results table",role:"table"},n.createElement("div",null,_e.map(Qe=>{const{key:ct,...ht}=Qe.getHeaderGroupProps();return n.createElement("div",{key:ct,...ht,className:_.headerRow},Qe.headers.map(ft=>{const{key:Re,...nt}=ft.getHeaderProps();return n.createElement("div",{key:Re,...nt,role:"columnheader",className:_.headerCell},ft.render("Header"))}))})),n.createElement("div",{...et()},n.createElement(i.Z,{ref:it,isItemLoaded:re.isItemLoaded,itemCount:Se.length,loadMoreItems:re.loadMoreItems},({onItemsRendered:Qe,ref:ct})=>n.createElement(s.t7,{ref:ht=>{ct(ht),pe(ht)},onItemsRendered:Qe,height:ie-k,itemCount:Se.length,itemSize:Ve.rowHeight,width:"100%",style:{overflow:"hidden auto"}},Xe)))):n.createElement("div",{className:_.noData},"No data")});j.displayName="SearchResultsTable";const de=re=>{const ce=re.colors.emphasize(re.colors.background.primary,.03);return{noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,headerCell:t.css`
      padding: ${re.spacing(1)};
    `,headerRow:t.css`
      background-color: ${re.colors.background.secondary};
      height: ${k}px;
      align-items: center;
    `,selectedRow:t.css`
      background-color: ${ce};
      box-shadow: inset 3px 0px ${re.colors.primary.border};
    `,rowContainer:t.css`
      label: row;
      &:hover {
        background-color: ${ce};
      }

      &:not(:hover) div[role='cell'] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    `}},ge=re=>({nameCellStyle:t.css`
      border-right: none;
      padding: ${re.spacing(1)} ${re.spacing(1)} ${re.spacing(1)} ${re.spacing(2)};
      overflow: hidden;
      text-overflow: ellipsis;
      user-select: text;
      white-space: nowrap;
      &:hover {
        box-shadow: none;
      }
    `,headerNameStyle:t.css`
      padding-left: ${re.spacing(1)};
    `,typeIcon:t.css`
      margin-left: 5px;
      margin-right: 9.5px;
      vertical-align: middle;
      display: inline-block;
      margin-bottom: ${re.v1.spacing.xxs};
      fill: ${re.colors.text.secondary};
    `,datasourceItem:t.css`
      span {
        &:hover {
          color: ${re.colors.text.link};
        }
      }
    `,missingTitleText:t.css`
      color: ${re.colors.text.disabled};
      font-style: italic;
    `,invalidDatasourceItem:t.css`
      color: ${re.colors.error.main};
      text-decoration: line-through;
    `,typeText:t.css`
      color: ${re.colors.text.secondary};
      padding-top: ${re.spacing(1)};
    `,locationItem:t.css`
      color: ${re.colors.text.secondary};
      margin-right: 12px;
    `,sortedHeader:t.css`
      text-align: right;
      padding-right: ${re.spacing(2)};
    `,sortedItems:t.css`
      text-align: right;
      padding: ${re.spacing(1)} ${re.spacing(3)} ${re.spacing(1)} ${re.spacing(1)};
    `,explainItem:t.css`
      text-align: right;
      padding: ${re.spacing(1)} ${re.spacing(3)} ${re.spacing(1)} ${re.spacing(1)};
      cursor: pointer;
    `,locationCellStyle:t.css`
      padding-top: ${re.spacing(1)};
      padding-right: ${re.spacing(1)};
    `,checkboxHeader:t.css`
      margin-left: 2px;
    `,checkbox:t.css`
      margin-left: 10px;
      margin-right: 10px;
      margin-top: 5px;
    `,tagList:t.css`
      padding-top: ${re.spacing(.5)};
      justify-content: flex-start;
      flex-wrap: nowrap;
    `})},50343:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>ct});var t=e(9892),n=e(68404),l=e(70197),s=e(89050),i=e(35645),f=e(72648),c=e(67487),o=e(31403),m=e(69142),r=e(45253);const u=({text:Re})=>n.createElement("a",{href:"https://grafana.com/grafana/plugins/grafana-image-renderer",target:"_blank",rel:"noopener noreferrer",className:"external-link"},Re),d=({requiredImageRendererPluginVersion:Re})=>Re?n.createElement(n.Fragment,null,"You must update the ",n.createElement(u,{text:"Grafana image renderer plugin"})," to version"," ",Re," to enable dashboard previews. Please contact your Grafana administrator to update the plugin."):n.createElement(n.Fragment,null,"You must install the ",n.createElement(u,{text:"Grafana image renderer plugin"})," to enable dashboard previews. Please contact your Grafana administrator to install the plugin."),g=({showPreviews:Re,onRemove:nt,topSpacing:le,bottomSpacing:Pe})=>{const Oe=(0,f.wW)(p),Le=i.v.featureToggles.dashboardPreviews,Ye=i.v.rendererAvailable,{systemRequirements:{met:be,requiredImageRendererPluginVersion:Te},thumbnailsExist:me}=i.v.dashboardPreviews,$e=Le&&Re&&!(Ye&&be||me),ke=Te?"Image renderer plugin needs to be updated":"Image renderer plugin not installed";return n.createElement(n.Fragment,null,$e&&n.createElement("div",{className:Oe.wrapper},n.createElement(r.b,{className:Oe.alert,topSpacing:le,bottomSpacing:Pe,severity:"info",title:ke,onRemove:nt},n.createElement(d,{requiredImageRendererPluginVersion:Te}))))},p=()=>({wrapper:t.css`
      display: flex;
      justify-content: center;
    `,alert:t.css`
      max-width: 800px;
    `});var E=e(82e3),h=e(66757),a=e(1037);function v(){const Re=new Map;return{items:Re,isSelected:(le,Pe)=>Boolean(Re.get(le)?.has(Pe))}}function x(Re,nt,le,Pe){const Oe=Re.items;if(Pe.length){const Le=Oe.get(le);if(Le){for(const Ye of Pe)nt?Le.add(Ye):Le.delete(Ye);Le.size<1&&Oe.delete(le)}else nt&&Oe.set(le,new Set(Pe))}return{items:Oe,isSelected:(Le,Ye)=>{if(Ye==="*"){if(Le==="*"){for(const be of Oe.keys())if(Oe.get(be)?.size)return!0;return!1}return Boolean(Oe.get(Le)?.size)}return Boolean(Oe.get(Le)?.has(Ye))}}}var y=e(52081),C=e(58255),P=e(2594),D=e(95509),M=e(24357),b=e(35287);function R(){const Re=[{value:a.A.Folders,icon:"folder",ariaLabel:(0,b.t)("search.actions.view-as-folders","View by folders")},{value:a.A.List,icon:"list-ul",ariaLabel:(0,b.t)("search.actions.view-as-list","View as list")}];return i.v.featureToggles.dashboardPreviews&&Re.push({value:a.A.Grid,icon:"apps",ariaLabel:(0,b.t)("search.actions.view-as-grid","Grid view")}),Re}function B(Re){const nt=Re.layout??a.A.Folders;return nt===a.A.Folders&&(Re.query||Re.sort||Re.starred||Re.tag.length>0)||nt===a.A.Grid&&!i.v.featureToggles.dashboardPreviews?a.A.List:nt}const w=({onLayoutChange:Re,onSortChange:nt,onStarredFilterChange:le=()=>{},onTagFilterChange:Pe,getTagOptions:Oe,getSortOptions:Le,sortPlaceholder:Ye,onDatasourceChange:be,onPanelTypeChange:Te,onSetIncludePanels:me,state:he,showStarredFilter:De,hideLayout:$e})=>{const ke=(0,f.wW)(A),tt=B(he),Ge=he.query||he.datasource||he.panel_type?[a.A.Folders]:[];return n.createElement("div",{className:ke.actionRow},n.createElement(y.Lh,{spacing:"md",width:"auto"},n.createElement(M.D,{isClearable:!1,tags:he.tag,tagOptions:Oe,onChange:Pe}),i.v.featureToggles.panelTitleSearch&&n.createElement(C.X,{"data-testid":"include-panels",disabled:tt===a.A.Folders,value:he.includePanels,onChange:()=>me(!he.includePanels),label:(0,b.t)("search.actions.include-panels","Include panels")}),De&&n.createElement("div",{className:ke.checkboxWrapper},n.createElement(C.X,{label:(0,b.t)("search.actions.starred","Starred"),onChange:le,value:he.starred})),he.datasource&&n.createElement(o.zx,{icon:"times",variant:"secondary",onClick:()=>be(void 0)},n.createElement(b.cC,{i18nKey:"search.actions.remove-datasource-filter"},"Datasource: ",{datasource:he.datasource})),he.panel_type&&n.createElement(o.zx,{icon:"times",variant:"secondary",onClick:()=>Te(void 0)},"Panel: ",he.panel_type)),n.createElement("div",{className:ke.rowContainer},n.createElement(y.Lh,{spacing:"md",width:"auto"},!$e&&n.createElement(P.S,{options:R(),disabledOptions:Ge,onChange:Re,value:tt}),n.createElement(D.P,{onChange:dt=>nt(dt?.value),value:he.sort,getSortOptions:Le,placeholder:Ye||(0,b.t)("search.actions.sort-placeholder","Sort"),isClearable:!0}))))};w.displayName="ActionRow";const A=Re=>({actionRow:t.css`
      display: none;

      ${Re.breakpoints.up("md")} {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-bottom: ${Re.spacing(2)};
        width: 100%;
      }
    `,rowContainer:t.css`
      margin-right: ${Re.v1.spacing.md};
    `,checkboxWrapper:t.css`
      label {
        line-height: 1.2;
      }
    `});var I=e(24664),F=e(22350),K=e(43565),W=e(68183),U=e(72948),N=e(20941),S=e(39904),Y=e(47694),Q=e(63053),z=e(56991),G=e(30506),k=e(10216),j=e(54899),de=e(58355),ge=e(28066);async function re(Re,nt){if(!Y.ZP.featureToggles.nestedFolders)return console.error("getFolderChildren requires nestedFolders feature toggle"),[];if(!Re)return await ce();const Pe=await(0,de.O)().search({kind:["dashboard"],query:"*",location:Re,limit:1e3}),Oe=Pe.view.map(Ye=>(0,ge.f9)(Ye,Pe.view));return[...await ce(Re,nt),...Oe]}async function ce(Re,nt){return(await(0,j.i)().get("/api/folders",{parentUid:Re})).map(Oe=>({kind:"folder",uid:Oe.uid,title:Oe.title,parentTitle:nt,url:`/dashboards/f/${Oe.uid}/`}))}async function ie(Re,nt){if(Y.vc.featureToggles.nestedFolders)return re(Re.uid,Re.title);const le=Re.itemsUIDs?{uid:Re.itemsUIDs}:{query:"*",kind:["dashboard"],location:Re.uid,sort:"name_sort",limit:1e3},Pe=await(0,E.getGrafanaSearcher)().search({...le,tags:nt});return Pe.view.map(Oe=>(0,ge.f9)(Oe,Pe.view))}const fe=({section:Re,selectionToggle:nt,onClickItem:le,onTagSelected:Pe,selection:Oe,renderStandaloneBody:Le,tags:Ye})=>{const be=nt!=null,Te=(0,f.wW)((0,n.useCallback)(Ke=>Ce(Ke,be),[be])),[me,he]=(0,I.Z)((0,Q.tT)(Re.title),!1),De=(0,F.Z)(async()=>!me&&!Le?Promise.resolve([]):ie(Re,Ye),[me,Ye]),$e=()=>{he(!me)},ke=Ke=>{if(Ke.preventDefault(),Ke.stopPropagation(),nt&&Oe){const je=!Oe(Re.kind,Re.uid);nt(Re.kind,Re.uid);const ot=De.value??[];for(const at of ot)Oe(at.kind,at.uid)!==je&&nt(at.kind,at.uid)}},Ge=`section-header-label-${(0,z.L)()}`;let dt=(0,K.iJ)(Re.icon??"");dt||(dt=me?"folder-open":"folder");const pt=()=>{if(De.value){if(De.value.length===0&&!De.loading)return n.createElement(U.Z,null,n.createElement(U.Z.Heading,null,"No results found"))}else return null;return De.value.map(Ke=>n.createElement(G.T,{key:Ke.uid,item:Ke,onTagSelected:Pe,onToggleChecked:je=>nt?.(je.kind,je.uid),editable:Boolean(Oe!=null),onClickItem:le,isSelected:Oe?.(Ke.kind,Ke.uid)}))};return Le?n.createElement("div",{className:Te.folderViewResults},!De.value?.length&&De.loading?n.createElement(c.$,{className:Te.spinner}):pt()):n.createElement(N.s,{headerDataTestId:W.wl.components.Search.folderHeader(Re.title),contentDataTestId:W.wl.components.Search.folderContent(Re.title),isOpen:me??!1,onToggle:$e,className:Te.wrapper,contentClassName:Te.content,loading:De.loading,labelId:Ge,label:n.createElement(n.Fragment,null,nt&&Oe&&n.createElement("div",{onClick:ke},n.createElement(C.X,{value:Oe(Re.kind,Re.uid),"aria-label":(0,b.t)("search.folder-view.select-folder","Select folder")})),n.createElement("div",{className:Te.icon},n.createElement(S.J,{name:dt})),n.createElement("div",{className:Te.text},n.createElement("span",{id:Ge},Re.title),Re.url&&Re.uid!==k.YQ&&n.createElement("a",{href:Re.url,className:Te.link},n.createElement("span",{className:Te.separator},"|")," ",n.createElement(S.J,{name:"folder-upload"})," ",(0,b.t)("search.folder-view.go-to-folder","Go to folder"))))},De.value&&n.createElement("ul",{className:Te.sectionItems},pt()))},Ce=(Re,nt)=>{const le=Re.spacing(1);return{wrapper:t.css`
      align-items: center;
      font-size: ${Re.typography.size.base};
      padding: 12px;
      border-bottom: none;
      color: ${Re.colors.text.secondary};
      z-index: 1;

      &:hover,
      &.selected {
        color: ${Re.colors.text};
      }

      &:hover,
      &:focus-visible,
      &:focus-within {
        a {
          opacity: 1;
        }
      }
    `,sectionItems:t.css`
      margin: 0 24px 0 32px;
    `,icon:t.css`
      padding: 0 ${le} 0 ${nt?0:le};
    `,folderViewResults:t.css`
      overflow: auto;
    `,text:t.css`
      flex-grow: 1;
      line-height: 24px;
    `,link:t.css`
      padding: 2px 10px 0;
      color: ${Re.colors.text.secondary};
      opacity: 0;
      transition: opacity 150ms ease-in-out;
    `,separator:t.css`
      margin-right: 6px;
    `,content:t.css`
      padding-top: 0px;
      padding-bottom: 0px;
    `,spinner:t.css`
      display: grid;
      place-content: center;
      padding-bottom: 1rem;
    `}};var ee=e(8180),ne=e(82002),X=e(98102),te=e(50946);const ae=({results:Re,onDeleteItems:nt,onDismiss:le})=>{const Pe=(0,f.wW)(_),Oe=Array.from(Re.get("dashboard")??[]),Le=Array.from(Re.get("folder")??[]),Ye=Le.length,be=Oe.length;let Te="Do you want to delete the ",me;const he=be===1?"":"s",De=Ye===1?"":"s";Ye>0&&be>0?(Te+=`selected folder${De} and dashboard${he}?
`,me=`All dashboards and alerts of the selected folder${De} will also be deleted`):Ye>0?Te+=`selected folder${De} and all ${Ye===1?"its":"their"} dashboards and alerts?`:Te+=`${be} selected dashboard${he}?`;const $e=()=>{(0,te.Fd)(Le,Oe).then(()=>{nt(),le()})},ke=Y.vc.featureToggles.nestedFolders&&Ye>0;return n.createElement(X.s,{isOpen:!0,title:"Delete",body:n.createElement(n.Fragment,null,Te," ",me&&n.createElement("div",{className:Pe.subtitle},me)),confirmText:"Delete",confirmationText:ke?"delete":void 0,onConfirm:$e,onDismiss:le})},_=Re=>({subtitle:t.css`
    font-size: ${Re.typography.fontSize}px;
    padding-top: ${Re.spacing(2)};
  `});var ve=e(62079);function Ve({items:Re,folder:nt,onChange:le,clearSelection:Pe}){const Oe=(0,f.wW)(A),Le=nt?.canSave,Ye=nt?Le:ne.Vt.hasEditPermissionInFolders,be=Ye,me=Array.from(Re.get("folder")??[]).find(pt=>pt===k.YQ),he=Ye&&!me,[De,$e]=(0,n.useState)(!1),[ke,tt]=(0,n.useState)(!1),Ge=()=>{$e(!0)},dt=()=>{tt(!0)};return n.createElement("div",{className:Oe.actionRow,"data-testid":"manage-actions"},n.createElement("div",{className:Oe.rowContainer},n.createElement(y.Lh,{spacing:"md",width:"auto"},n.createElement(ee.h,{name:"check-square",onClick:Pe,title:"Uncheck everything"}),n.createElement(o.zx,{disabled:!be,onClick:Ge,icon:"exchange-alt",variant:"secondary"},"Move"),n.createElement(o.zx,{disabled:!he,onClick:dt,icon:"trash-alt",variant:"destructive"},"Delete"))),ke&&n.createElement(ae,{onDeleteItems:le,results:Re,onDismiss:()=>tt(!1)}),De&&n.createElement(ve.i,{onMoveItems:le,results:Re,onDismiss:()=>$e(!1)}))}var it=e(13019);async function rt(){if(Y.ZP.featureToggles.nestedFolders)return re();const Re=(0,E.getGrafanaSearcher)(),nt=await Re.search({query:"*",kind:["folder"],sort:Re.getFolderViewSort(),limit:1e3});return nt.view.map(le=>(0,ge.f9)(le,nt.view))}const pe=({selection:Re,selectionToggle:nt,onTagSelected:le,tags:Pe,hidePseudoFolders:Oe,onClickItem:Le})=>{const Ye=(0,f.wW)(Ie),be=(0,F.Z)(async()=>{const me=await rt();if(me.unshift({title:"General",url:"/dashboards",kind:"folder",uid:k.YQ}),!Oe){const he=await it.Z.getDashboardOpened();if(he.length&&me.unshift({title:"Recent",icon:"clock-nine",kind:"folder",uid:"__recent",itemsUIDs:he}),ne.Vt.isSignedIn){const De=await(0,j.i)().get("api/user/stars");De.length>0&&me.unshift({title:"Starred",icon:"star",kind:"folder",uid:"__starred",itemsUIDs:De})}}return me},[]),Te=()=>be.loading?n.createElement(c.$,{className:Ye.spinner}):be.value?be.value.map(me=>n.createElement("div",{"data-testid":W.wl.components.Search.sectionV2,className:Ye.section,key:me.title},me.title&&n.createElement(fe,{selection:Re,selectionToggle:nt,onTagSelected:le,section:me,tags:Pe,onClickItem:Le}))):n.createElement(r.b,{className:Ye.error,title:be.error?be.error.message:"Something went wrong"});return n.createElement("div",{className:Ye.wrapper},Te())},Ie=Re=>({wrapper:t.css`
      display: flex;
      flex-direction: column;
      overflow: auto;

      > ul {
        list-style: none;
      }

      border: solid 1px ${Re.v1.colors.border2};
    `,section:t.css`
      display: flex;
      flex-direction: column;
      background: ${Re.v1.colors.panelBg};

      &:not(:last-child) {
        border-bottom: solid 1px ${Re.v1.colors.border2};
      }
    `,spinner:t.css`
      align-items: center;
      display: flex;
      justify-content: center;
      min-height: 100px;
    `,error:t.css`
      margin: ${Re.spacing(4)} auto;
    `});var We=e(75478),Je=e(47535),He=e(81029),Ae=e(54350);const et=n.memo(({response:Re,width:nt,height:le,selection:Pe,selectionToggle:Oe,onTagSelected:Le,keyboardEvents:Ye,onClickItem:be})=>{const Te=(0,f.wW)(_e),me=(0,n.useRef)(null),[he,De]=(0,n.useState)(null),$e=(0,Ae.v)(Ye,0,Re);(0,n.useEffect)(()=>{me.current&&me.current.resetloadMoreItemsCache(),he&&he.scrollTo(0)},[Re,he]);const ke=(0,n.useCallback)(({index:tt,style:Ge})=>{let dt="";tt===$e.y&&(dt+=" "+Te.selectedRow);const pt=Re.view.get(tt),Ke=(0,ge.f9)(pt,Re.view),je=Oe&&Pe?.(Ke.kind,Ke.uid);return n.createElement("div",{style:Ge,key:pt.uid,className:dt,role:"row"},n.createElement(He.T,{item:Ke,onTagSelected:Le,onToggleChecked:ot=>{Oe&&Oe("dashboard",ot.uid)},editable:Boolean(Pe!=null),onClickItem:be,isSelected:je}))},[Re.view,$e,Te,Le,Pe,Oe,be]);return Re.totalRows?n.createElement("div",{"aria-label":"Search results list",style:{width:nt},role:"list"},n.createElement(Je.Z,{ref:me,isItemLoaded:Re.isItemLoaded,itemCount:Re.totalRows,loadMoreItems:Re.loadMoreItems},({onItemsRendered:tt,ref:Ge})=>n.createElement(We.t7,{ref:dt=>{Ge(dt),De(dt)},onItemsRendered:tt,height:le,itemCount:Re.totalRows,itemSize:72,width:"100%",style:{overflow:"hidden auto"}},ke))):n.createElement("div",{className:Te.noData,style:{width:nt}},"No data")});et.displayName="SearchResultsCards";const _e=Re=>({noData:t.css`
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
    `,selectedRow:t.css`
      border-left: 3px solid ${Re.colors.primary.border};
    `});var Se=e(43993);const Fe=({response:Re,width:nt,height:le,selection:Pe,selectionToggle:Oe,onTagSelected:Le,onClickItem:Ye,keyboardEvents:be})=>{const Te=(0,f.wW)(Xe),me={editable:Pe!=null,onToggleChecked:pt=>{Oe&&Oe(pt.kind,pt.uid)},onTagSelected:Le,onClick:Ye},he=Re.totalRows??Re.view.length,De=Re.view,$e=Math.ceil(nt/320),ke=nt/$e,tt=(ke-64)*.75+56+8,Ge=Math.ceil(he/$e),dt=(0,Ae.v)(be,$e,Re);return n.createElement(Je.Z,{isItemLoaded:Re.isItemLoaded,itemCount:he,loadMoreItems:Re.loadMoreItems},({onItemsRendered:pt,ref:Ke})=>n.createElement(We.Ym,{ref:Ke,onItemsRendered:je=>{pt({visibleStartIndex:je.visibleRowStartIndex*$e,visibleStopIndex:je.visibleRowStopIndex*$e,overscanStartIndex:je.overscanRowStartIndex*$e,overscanStopIndex:je.overscanColumnStopIndex*$e})},columnCount:$e,columnWidth:ke,rowCount:Ge,rowHeight:tt,className:Te.wrapper,innerElementType:"ul",height:le,width:nt-2},({columnIndex:je,rowIndex:ot,style:at})=>{const xt=ot*$e+je;if(xt>=De.length)return null;const Dt=De.get(xt),wt=Dt.kind??"dashboard",sn=(0,ge.f9)(Dt,De);if(wt==="panel"){const Dn=Dt.panel_type;if(sn.icon="public/img/icons/unicons/graph-bar.svg",Dn){const Rn=i.v.panels[Dn];if(Rn?.name){const St=Rn.info?.logos.small;St&&St.endsWith(".svg")&&(sn.icon=St)}}}let mn=Te.virtualizedGridItemWrapper;return ot===dt.y&&je===dt.x&&(mn+=" "+Te.selectedItem),Dt?n.createElement("li",{style:at,className:mn},n.createElement(Se.K,{key:Dt.uid,...me,item:sn,isSelected:Pe?Pe(sn.kind,sn.uid):!1})):null}))},Xe=Re=>({virtualizedGridItemWrapper:t.css`
    padding: 4px;
  `,wrapper:t.css`
    display: flex;
    flex-direction: column;

    > ul {
      list-style: none;
    }
  `,selectedItem:t.css`
    box-shadow: inset 1px 1px 3px 3px ${Re.colors.primary.border};
  `});var Qe=e(16526);const ct=({showManage:Re,folderDTO:nt,hidePseudoFolders:le,keyboardEvents:Pe})=>{const Oe=(0,f.wW)(ht),Le=(0,h.hD)(),Ye=Le.useState(),[be,Te]=(0,n.useState)(v()),me=B(Ye),he=me===a.A.Folders,[De,$e]=(0,n.useState)(Date.now());(0,l.Z)(Le.onReportSearchUsage,1e3,[]);const ke=(0,n.useCallback)(()=>{be.items.clear(),Te({...be})},[be]),tt=(0,n.useCallback)((pt,Ke)=>{const je=be.isSelected(pt,Ke);Te(x(be,!je,pt,[Ke]))},[be]),Ge=async()=>{ke(),$e(Date.now()),Le.onQueryChange(Ye.query)},dt=()=>{const pt=Ye.result;if((!pt||!pt.totalRows)&&!he)return Ye.loading&&!pt?n.createElement(c.$,null):n.createElement("div",{className:Oe.noResults},n.createElement("div",null,"No results found for your query."),n.createElement("br",null),n.createElement(o.zx,{variant:"secondary",onClick:Le.onClearSearchAndFilters},"Clear search and filters"));const Ke=Re?be.isSelected:void 0;return me===a.A.Folders?nt?n.createElement(fe,{section:ft(nt),selection:Ke,selectionToggle:tt,onTagSelected:Le.onAddTag,renderStandaloneBody:!0,tags:Ye.tag,key:De,onClickItem:Le.onSearchItemClicked}):n.createElement(pe,{key:De,selection:Ke,selectionToggle:tt,tags:Ye.tag,onTagSelected:Le.onAddTag,hidePseudoFolders:le,onClickItem:Le.onSearchItemClicked}):n.createElement("div",{style:{height:"100%",width:"100%"}},n.createElement(s.Z,null,({width:je,height:ot})=>{const at={response:pt,selection:Ke,selectionToggle:tt,clearSelection:ke,width:je,height:ot,onTagSelected:Le.onAddTag,keyboardEvents:Pe,onDatasourceChange:Ye.datasource?Le.onDatasourceChange:void 0,onClickItem:Le.onSearchItemClicked};return me===a.A.Grid?n.createElement(Fe,{...at}):je<800?n.createElement(et,{...at}):n.createElement(Qe.Q,{...at})}))};return nt&&!i.v.featureToggles.nestedFolders&&!Ye.loading&&!Ye.result?.totalRows&&!Le.hasSearchFilters()?n.createElement(m.Z,{title:"This folder doesn't have any dashboards yet",buttonIcon:"plus",buttonTitle:"Create Dashboard",buttonLink:`dashboard/new?folderUid=${nt.uid}`,proTip:"Add/move dashboards to your folder at ->",proTipLink:"dashboards",proTipLinkTitle:"Manage dashboards",proTipTarget:""}):n.createElement(n.Fragment,null,Boolean(be.items.size>0)?n.createElement(Ve,{items:be.items,onChange:Ge,clearSelection:ke}):n.createElement(w,{onLayoutChange:Le.onLayoutChange,showStarredFilter:le,onStarredFilterChange:le?Le.onStarredFilterChange:void 0,onSortChange:Le.onSortChange,onTagFilterChange:Le.onTagFilterChange,getTagOptions:Le.getTagOptions,getSortOptions:(0,E.getGrafanaSearcher)().getSortOptions,sortPlaceholder:(0,E.getGrafanaSearcher)().sortPlaceholder,onDatasourceChange:Le.onDatasourceChange,onPanelTypeChange:Le.onPanelTypeChange,state:Ye,includePanels:Ye.includePanels,onSetIncludePanels:Le.onSetIncludePanels}),me===a.A.Grid&&n.createElement(g,{bottomSpacing:3,showPreviews:!0,onRemove:()=>Le.onLayoutChange(a.A.List)}),dt())},ht=Re=>({searchInput:t.css`
    margin-bottom: 6px;
    min-height: ${Re.spacing(4)};
  `,unsupported:t.css`
    padding: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    font-size: 18px;
  `,noResults:t.css`
    padding: ${Re.v1.spacing.md};
    background: ${Re.v1.colors.bg2};
    font-style: italic;
    margin-top: ${Re.v1.spacing.md};
  `});function ft(Re){return{uid:Re.uid,kind:"folder",title:Re.title}}},72809:(Z,O,e)=>{"use strict";e.d(O,{Jy:()=>f,Nw:()=>o,OY:()=>i,Qw:()=>s,TP:()=>c});var t=e(41818),n=e(35645),l=e(1037);const s=(r,u)=>{(0,t.ff)(`${r}_viewed`,m(u))},i=(r,u)=>{(0,t.ff)(`${r}_result_clicked`,m(u))},f=(r,u)=>{(0,t.ff)(`${r}_query_submitted`,m(u))},c=(r,{error:u,...d})=>{(0,t.ff)(`${r}_query_failed`,{...m(d),error:u})},o=(r,u,d)=>{(0,t.ff)(`grafana_panel_inspect_${r}_${u}_clicked`,d)},m=r=>{const u=r.layout===l.A.Grid;return{previews:Boolean(n.v.featureToggles.panelTitleSearch)?u?"on":"off":"feature_disabled",layout:r.layout,starredFilter:r.starred??!1,sort:r.sortValue??"",tagCount:r.tagCount??0,queryLength:r.query?.length??0,includePanels:r.includePanels??!1}}},82e3:(Z,O,e)=>{"use strict";e.d(O,{getGrafanaSearcher:()=>t.O});var t=e(58355)},58355:(Z,O,e)=>{"use strict";e.d(O,{O:()=>B});var t=e(35645),n=e(50235),l=e(16911),s=e(36512),i=e(54899),f=e(28066);const c="Loading",o="api/search-v2",m="name_sort";class r{constructor(A){this.fallbackSearcher=A}async search(A){if(A.facet?.length)throw new Error("facets not supported!");return this.doSearchQuery(A)}async starred(A){if(A.facet?.length)throw new Error("facets not supported!");const I=await(0,i.i)().get("api/user/stars");return I?.length?this.doSearchQuery({uid:I,query:A.query??"*"}):{view:new n.U({length:0,fields:[]}),totalRows:0,loadMoreItems:async(F,K)=>{},isItemLoaded:F=>!0}}async tags(A){const I={...A,query:A.query??"*",sort:void 0,facet:[{field:"tag"}],limit:1},K=(await(0,i.i)().post(o,I)).frames.map(W=>(0,l.g0)(W));if(K[0]?.name===c)return this.fallbackSearcher.tags(A);for(const W of K)if(W.fields[0].name==="tag")return g(W);return[]}getSortOptions(){const A=[{value:m,label:"Alphabetically (A-Z)"},{value:"-name_sort",label:"Alphabetically (Z-A)"}];if(t.v.licenseInfo.enabledFeatures.analytics){for(const I of p)A.push({value:`-${I.name}`,label:`${I.display} (most)`}),A.push({value:`${I.name}`,label:`${I.display} (least)`});for(const I of E)A.push({value:`-${I.name}`,label:`${I.display} (recent)`}),A.push({value:`${I.name}`,label:`${I.display} (oldest)`})}return Promise.resolve(A)}async doSearchQuery(A){A=await(0,f.Sd)(A);const I={...A,query:A.query??"*",limit:A.limit??u},K=(await(0,i.i)().post(o,I)).frames.map(z=>(0,l.g0)(z)),W=K.length?(0,l.g0)(K[0]):{fields:[],length:0};if(W.name===c)return this.fallbackSearcher.search(A);for(const z of W.fields)z.display=(0,s.U_)({field:z,theme:t.v.theme2});W.meta?.custom||(W.meta={...W.meta,custom:{count:W.length,max_score:1}});const U=W.meta.custom;if(U.locationInfo||(U.locationInfo={}),U.sortBy?.length){const z=W.fields.find(G=>G.name===U.sortBy);if(z){const G=h(z.name);U.sortBy=G,z.name=G}}let N=0,S;const Y=async()=>{for(;N>Q.dataFrame.length;){const z=Q.dataFrame.length;if(z>=U.count)return;const G=await(0,i.i)().post(o,{...I??{},from:z,limit:d}),k=(0,l.g0)(G.frames[0]);if(!k){console.log("no results",k);return}if(k.fields.length!==Q.dataFrame.fields.length){console.log("invalid shape",k,Q.dataFrame);return}const j=k.length+Q.dataFrame.length;for(let ge=0;ge<k.fields.length;ge++)Q.dataFrame.fields[ge].values.buffer.push(...k.fields[ge].values.toArray());Q.dataFrame.length=j;const de=k.meta?.custom;if(de?.locationInfo&&U)for(const[ge,re]of Object.entries(de.locationInfo))U.locationInfo[ge]=re}S=void 0},Q=new n.U(W);return{totalRows:U.count??W.length,view:Q,loadMoreItems:async(z,G)=>(N=Math.max(N,G),S||(S=Y()),S),isItemLoaded:z=>z<Q.dataFrame.length}}getFolderViewSort(){return"name_sort"}}const u=50,d=100;function g(w){const A=w.fields[0].values,I=w.fields[1].values,F=[];for(let K=0;K<w.length;K++)F.push({term:A.get(K),count:I.get(K)});return F}const p=[{name:"views_total",display:"Views total"},{name:"views_last_30_days",display:"Views 30 days"},{name:"errors_total",display:"Errors total"},{name:"errors_last_30_days",display:"Errors 30 days"}],E=[{name:"created_at",display:"Created time"},{name:"updated_at",display:"Updated time"}];function h(w){for(const A of p)if(A.name===w)return A.display;for(const A of E)if(A.name===w)return A.display;return w}var a=e(22759),v=e(19695);class x{constructor(A){this.parent=A,this.cache=new Map,this.sortPlaceholder="Default (Relevance)"}async search(A){if(A.facet?.length)throw new Error("facets not supported!");if(A.sort!=null)throw new Error("custom sorting is not supported yet");if(A.tags?.length||A.ds_uid?.length)return this.parent.search(A);const F=(await this.getCache(A.kind)).search(A.query);return{isItemLoaded:()=>!0,loadMoreItems:async(K,W)=>{},totalRows:F.length,view:F}}async getCache(A){const I=A?A.sort().join(","):"*",F=this.cache.get(I);if(F)try{return await F}catch{return this.cache.delete(I),new y(new n.U({name:"error",fields:[],length:0}))}const K=this.parent.search({kind:A,limit:5e3}).then(W=>new y(W.view));return this.cache.set(I,K),K}async starred(A){return this.parent.starred(A)}async getSortOptions(){return this.parent.getSortOptions()}async tags(A){return this.parent.tags(A)}getFolderViewSort(){return this.parent.getFolderViewSort()}}class y{constructor(A){this.full=A,this.ufuzzy=new a.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1}),this.names=this.full.fields.name.values.toArray(),this.empty=new n.U({...this.full.dataFrame,fields:this.full.dataFrame.fields.map(I=>({...I,values:new v.G([])})),length:0})}search(A){if(!A?.length||A==="*")return this.full;const I=this.full.dataFrame.fields,F=this.names,K=I.map(S=>[]);let[W,U,N]=this.ufuzzy.search(F,A,!0);for(let S=0;S<I.length;S++){let Y=I[S].values.toArray(),Q=K[S];if(U&&N)for(let z=0;z<N.length;z++){let G=U.idx[N[z]];Q.push(Y[G])}else if(W)for(let z=0;z<W.length;z++){let G=W[z];Q.push(Y[G])}}return this.empty.dataFrame.fields.forEach((S,Y)=>{S.values=new v.G(K[Y])}),this.empty.dataFrame.length=this.empty.dataFrame.fields[0].values.length,this.empty}}var C=e(14582),P=e(29930),D=e(10216),M=e(1037);class b{constructor(){this.locationInfo={general:{kind:"folder",name:"General",url:"/dashboards",folderId:0}},this.getFolderViewSort=()=>""}async composeQuery(A,I){const F=await(0,f.Sd)(I);if(F.query==="*"?F.kind?.length===1&&D.xb[F.kind[0]]&&(A.type=D.xb[F.kind[0]]):F.query?.length&&(A.query=F.query),F.uid)A.dashboardUID=F.uid;else if(F.location?.length){let K=this.locationInfo[F.location];K||(await this.doAPIQuery({type:M.o.DashFolder,limit:999}),K=this.locationInfo[F.location]),A.folderIds=[K?.folderId??0]}return A}async search(A){if(A.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:A.limit??D.E_,tag:A.tags,sort:A.sort},A);return this.doAPIQuery(I)}async starred(A){if(A.facet?.length)throw new Error("facets not supported!");const I=await this.composeQuery({limit:A.limit??D.E_,tag:A.tags,sort:A.sort,starred:A.starred},A);return this.doAPIQuery(I)}async getSortOptions(){return(await P.ae.get("/api/search/sorting")).sortOptions.map(I=>({value:I.name,label:I.displayName}))}async tags(A){return(await P.ae.get("/api/dashboards/tags")).sort((F,K)=>K.count-F.count)}async doAPIQuery(A){const I=await P.ae.get("/api/search",A),F=[],K=[],W=[],U=[],N=[],S=[],Y=[];let Q;for(let k of I){const j=k.type==="dash-folder"?"folder":"dashboard";F.push(j),K.push(k.title),W.push(k.uid),U.push(k.url),N.push(k.tags),Y.push(k.sortMeta);let de=k.folderUid;!de&&j==="dashboard"&&(de="general"),S.push(de),k.sortMetaName?.length&&(Q=k.sortMetaName),k.folderUid&&k.folderTitle?this.locationInfo[k.folderUid]={kind:"folder",name:k.folderTitle,url:k.folderUrl,folderId:k.folderId}:j==="folder"&&(this.locationInfo[k.uid]={kind:j,name:k.title,url:k.url,folderId:k.id})}const z={fields:[{name:"kind",type:C.fS.string,config:{},values:new v.G(F)},{name:"name",type:C.fS.string,config:{},values:new v.G(K)},{name:"uid",type:C.fS.string,config:{},values:new v.G(W)},{name:"url",type:C.fS.string,config:{},values:new v.G(U)},{name:"tags",type:C.fS.other,config:{},values:new v.G(N)},{name:"location",type:C.fS.string,config:{},values:new v.G(S)}],length:K.length,meta:{custom:{count:K.length,max_score:1,locationInfo:this.locationInfo}}};Q?.length&&Y.length&&(z.meta.custom.sortBy=Q,z.fields.push({name:Q,type:C.fS.number,config:{},values:new v.G(Y)}));for(const k of z.fields)k.display=(0,s.U_)({field:k,theme:t.v.theme2});const G=new n.U(z);return{totalRows:z.length,view:G,loadMoreItems:async(k,j)=>{},isItemLoaded:k=>!0}}}let R;function B(){if(!R){const w=new b,A=t.v.featureToggles.panelTitleSearch;R=A?new r(w):w,A&&location.search.includes("do-frontend-query")&&(R=new x(R))}return R}},28066:(Z,O,e)=>{"use strict";e.d(O,{J6:()=>i,Sd:()=>n,f9:()=>f});var t=e(9398);async function n(c){return c.query&&c.query.indexOf("folder:current")>=0&&(c={...c,location:await l(),query:c.query.replace("folder:current","").trim()},c.query?.length||(c.query="*")),Promise.resolve(c)}async function l(){try{let c=(0,t.h4)().getCurrent();return c||(await s(500),c=(0,t.h4)().getCurrent()),Promise.resolve(c?.meta?.folderUid)}catch(c){console.error(c)}}function s(c){return new Promise(o=>setTimeout(o,c))}function i(c){return c==="dashboard"?"apps":c==="folder"?"folder":"question-circle"}function f(c,o){const m=o?.dataFrame.meta?.custom,r={kind:"dashboard",uid:c.uid,title:c.name,url:c.url,tags:c.tags??[]},u=m?.sortBy;if(u){const d=c[u];(typeof d=="string"||typeof d=="number")&&(r.sortMetaName=u,r.sortMeta=d)}if(c.location){const d=c.location.split("/"),g=d[d.length-1],p=m?.locationInfo[g];p&&(r.parentTitle=p.name,r.parentKind=p.kind)}return r}},66757:(Z,O,e)=>{"use strict";e.d(O,{hD:()=>E});var t=e(82897),n=e.n(t),l=e(37932),s=e(38535),i=e(58379),f=e(10216),c=e(72809),o=e(82e3),m=e(1037),r=e(63053);const u={query:"",tag:[],starred:!1,layout:m.A.Folders,sort:void 0,prevSort:void 0,eventTrackingNamespace:"dashboard_search"},d={sort:null,starred:null,query:null,tag:null,layout:null};class g extends s.b{constructor(){super(...arguments),this.updateLocation=(0,t.debounce)(a=>l.E1.partial(a,!0),300),this.doSearchWithDebounce=(0,t.debounce)(()=>this.doSearch(),300),this.onCloseSearch=()=>{this.updateLocation({search:null,folder:null,...d})},this.onClearSearchAndFilters=()=>{this.setStateAndDoSearch({query:"",datasource:void 0,tag:[],panel_type:void 0,starred:void 0})},this.onQueryChange=a=>{this.setStateAndDoSearch({query:a})},this.onRemoveTag=a=>{this.setStateAndDoSearch({tag:this.state.tag.filter(v=>v!==a)})},this.onTagFilterChange=a=>{this.setStateAndDoSearch({tag:a})},this.onAddTag=a=>{this.state.tag&&this.state.tag.includes(a)||this.setStateAndDoSearch({tag:[...this.state.tag,a]})},this.onDatasourceChange=a=>{this.setStateAndDoSearch({datasource:a})},this.onPanelTypeChange=a=>{this.setStateAndDoSearch({panel_type:a})},this.onStarredFilterChange=a=>{const v=a.currentTarget.checked;this.setStateAndDoSearch({starred:v})},this.onClearStarred=()=>{this.setStateAndDoSearch({starred:!1})},this.onSortChange=a=>{a?localStorage.setItem(f.qb,a):localStorage.removeItem(f.qb),this.state.layout===m.A.Folders?this.setStateAndDoSearch({sort:a,layout:m.A.List}):this.setStateAndDoSearch({sort:a})},this.onLayoutChange=a=>{localStorage.setItem(f.rh,a),this.state.sort&&a===m.A.Folders?this.setStateAndDoSearch({layout:a,prevSort:this.state.sort,sort:void 0}):this.setStateAndDoSearch({layout:a,sort:this.state.prevSort})},this.onSetIncludePanels=a=>{this.setStateAndDoSearch({includePanels:a}),i.Z.set(f.to,a)},this.getTagOptions=()=>(0,o.getGrafanaSearcher)().tags(this.lastQuery),this.onSearchItemClicked=a=>{!a.altKey&&!a.ctrlKey&&!a.metaKey&&this.setState({tag:[],starred:!1,sort:void 0,query:"",folderUid:void 0}),(0,c.OY)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})},this.onReportSearchUsage=()=>{(0,c.Qw)(this.state.eventTrackingNamespace,{layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels})}}initStateFromUrl(a){const v=(0,r.vj)(l.E1.getSearchObject());(v.query||v.datasource||v.panel_type)&&(v.layout=m.A.List),p.setState({...v,folderUid:a,eventTrackingNamespace:a?"manage_dashboards":"dashboard_search"}),this.doSearch()}setStateAndDoSearch(a){this.setState(a),this.updateLocation({query:this.state.query.length===0?null:this.state.query,tag:this.state.tag,datasource:this.state.datasource,panel_type:this.state.panel_type,starred:this.state.starred?this.state.starred:null,sort:this.state.sort}),this.doSearchWithDebounce()}hasSearchFilters(){return this.state.query||this.state.tag.length||this.state.starred||this.state.panel_type}getSearchQuery(){const a={query:this.state.query,tags:this.state.tag,ds_uid:this.state.datasource,panel_type:this.state.panel_type,location:this.state.folderUid,sort:this.state.sort,explain:this.state.explain,withAllowedActions:this.state.explain,starred:this.state.starred};return a.sort?.length&&!a.sort.includes("name")&&(a.kind=["dashboard","folder"]),a.query?.length||(a.query="*",a.location||(a.kind=["dashboard","folder"])),!this.state.includePanels&&!a.kind&&(a.kind=["dashboard","folder"]),a.panel_type?.length&&(a.kind=["panel"]),a}doSearch(){const a={layout:this.state.layout,starred:this.state.starred,sortValue:this.state.sort,query:this.state.query,tagCount:this.state.tag?.length,includePanels:this.state.includePanels};(0,c.Jy)(this.state.eventTrackingNamespace,a),this.lastQuery=this.getSearchQuery(),this.setState({loading:!0}),this.state.starred?(0,o.getGrafanaSearcher)().starred(this.lastQuery).then(v=>this.setState({result:v,loading:!1})).catch(v=>{(0,c.TP)(this.state.eventTrackingNamespace,{...a,error:v?.message}),this.setState({loading:!1})}):(0,o.getGrafanaSearcher)().search(this.lastQuery).then(v=>this.setState({result:v,loading:!1})).catch(v=>{(0,c.TP)(this.state.eventTrackingNamespace,{...a,error:v?.message}),this.setState({loading:!1})})}}let p;function E(){if(!p){const a=localStorage.getItem(f.rh)??u.layout,v=localStorage.getItem(f.qb)??void 0;let x=i.Z.getBool(f.to,!0);x&&(x=!1),p=new g({...u,layout:a,sort:v,includePanels:x})}return p}},1037:(Z,O,e)=>{"use strict";e.d(O,{A:()=>n,o:()=>t});var t=(l=>(l.DashDB="dash-db",l.DashHome="dash-home",l.DashFolder="dash-folder",l))(t||{}),n=(l=>(l.List="list",l.Folders="folders",l.Grid="grid",l))(n||{})},63053:(Z,O,e)=>{"use strict";e.d(O,{tT:()=>l,vj:()=>s});var t=e(10216);const n=i=>i?Boolean(i.query||i.tag?.length>0||i.starred||i.sort):!1,l=(i="General")=>`${t.qi}.${i.toLowerCase()}`,s=i=>{const f=Object.entries(i).reduce((c,[o,m])=>{if(m){if(o==="tag"&&!Array.isArray(m))return{...c,tag:[m]}}else return c;return{...c,[o]:m}},{});if(i.folder){const c=`folder:${i.folder}`;return{...f,query:`${c} ${(f.query??"").replace(c,"")}`}}return{...f}}},45003:(Z,O,e)=>{"use strict";e.d(O,{Dn:()=>h,LA:()=>m,M4:()=>v,P4:()=>f,Ub:()=>E,ZP:()=>y,aj:()=>x,dt:()=>p,e7:()=>c,pN:()=>g,s3:()=>o});var t=e(62992),n=e(81168);const l={serviceAccount:{},isLoading:!0,tokens:[]},s=(0,t.oM)({name:"serviceaccount",initialState:l,reducers:{serviceAccountFetchBegin:C=>({...C,isLoading:!0}),serviceAccountFetchEnd:C=>({...C,isLoading:!1}),serviceAccountLoaded:(C,P)=>({...C,serviceAccount:P.payload,isLoading:!1}),serviceAccountTokensLoaded:(C,P)=>({...C,tokens:P.payload,isLoading:!1})}}),i=s.reducer,{serviceAccountLoaded:f,serviceAccountTokensLoaded:c,serviceAccountFetchBegin:o,serviceAccountFetchEnd:m}=s.actions,r={serviceAccounts:[],isLoading:!0,roleOptions:[],query:"",page:0,perPage:50,totalPages:1,showPaging:!1,serviceAccountStateFilter:n.ServiceAccountStateFilter.All},u=(0,t.oM)({name:"serviceaccounts",initialState:r,reducers:{serviceAccountsFetched:(C,P)=>{const{totalCount:D,perPage:M,...b}=P.payload,R=Math.ceil(D/M);return{...C,...b,totalPages:R,perPage:M,showPaging:R>1,isLoading:!1}},serviceAccountsFetchBegin:C=>({...C,isLoading:!0}),serviceAccountsFetchEnd:C=>({...C,isLoading:!1}),acOptionsLoaded:(C,P)=>({...C,roleOptions:P.payload}),queryChanged:(C,P)=>({...C,query:P.payload,page:0}),pageChanged:(C,P)=>({...C,page:P.payload}),stateFilterChanged:(C,P)=>({...C,serviceAccountStateFilter:P.payload})}}),d=u.reducer,{serviceAccountsFetchBegin:g,serviceAccountsFetchEnd:p,serviceAccountsFetched:E,acOptionsLoaded:h,pageChanged:a,stateFilterChanged:v,queryChanged:x}=u.actions,y={serviceAccountProfile:i,serviceAccounts:d}},62295:(Z,O,e)=>{"use strict";e.d(O,{Ii:()=>i,UW:()=>m,ZP:()=>g,cD:()=>c,fT:()=>u,ik:()=>o,ki:()=>f,rI:()=>r,rW:()=>s});var t=e(62992);const n={supportBundles:[],isLoading:!1,supportBundleCollectors:[],createBundlePageLoading:!1,loadBundlesError:"",createBundleError:""},l=(0,t.oM)({name:"supportBundles",initialState:n,reducers:{supportBundlesLoaded:(p,E)=>({...p,supportBundles:E.payload,isLoading:!1}),fetchBegin:p=>({...p,isLoading:!0}),fetchEnd:p=>({...p,isLoading:!1}),collectorsFetchBegin:p=>({...p,createBundlePageLoading:!0}),collectorsFetchEnd:p=>({...p,createBundlePageLoading:!1}),supportBundleCollectorsLoaded:(p,E)=>({...p,supportBundleCollectors:E.payload,createBundlePageLoading:!1}),setLoadBundleError:(p,E)=>({...p,loadBundlesError:E.payload,supportBundleCollectors:[]}),setCreateBundleError:(p,E)=>({...p,createBundleError:E.payload})}}),{supportBundlesLoaded:s,fetchBegin:i,fetchEnd:f,supportBundleCollectorsLoaded:c,collectorsFetchBegin:o,collectorsFetchEnd:m,setLoadBundleError:r,setCreateBundleError:u}=l.actions,g={supportBundles:l.reducer}},97189:(Z,O,e)=>{"use strict";e.d(O,{PJ:()=>f,PL:()=>s,UD:()=>g,ZP:()=>E,aj:()=>i,iI:()=>u,n2:()=>d,p3:()=>n,y$:()=>r});var t=e(62992);const n={teams:[],page:1,query:"",perPage:30,totalPages:0,noTeams:!1,hasFetched:!1},l=(0,t.oM)({name:"teams",initialState:n,reducers:{teamsLoaded:(h,a)=>{const{totalCount:v,perPage:x,...y}=a.payload,C=Math.ceil(v/x);return{...h,...y,totalPages:C,perPage:x,hasFetched:!0}},queryChanged:(h,a)=>({...h,page:1,query:a.payload}),pageChanged:(h,a)=>({...h,page:a.payload})}}),{teamsLoaded:s,queryChanged:i,pageChanged:f}=l.actions,c=l.reducer,o={team:{},members:[],groups:[],searchMemberQuery:""},m=(0,t.oM)({name:"team",initialState:o,reducers:{teamLoaded:(h,a)=>({...h,team:a.payload}),teamMembersLoaded:(h,a)=>({...h,members:a.payload}),setSearchMemberQuery:(h,a)=>({...h,searchMemberQuery:a.payload}),teamGroupsLoaded:(h,a)=>({...h,groups:a.payload})}}),{teamLoaded:r,teamGroupsLoaded:u,teamMembersLoaded:d,setSearchMemberQuery:g}=m.actions,p=m.reducer,E={teams:c,team:p}},58155:(Z,O,e)=>{"use strict";e.d(O,{J:()=>W});var t=e(82897),n=e(99227),l=e(86647),s=e(20308),i=e(64622),f=e(40538),c=e(22323),o=e(82253),m=e(15546),r=e(87095),u=e(92624);class d{constructor(N,S,Y){this.state={name:N.name,value:S,text:Y,type:N.type}}getValue(N){let{value:S}=this.state;return S==="string"||S==="number"||S==="boolean"?S:String(S)}getValueText(){const{value:N,text:S}=this.state;return typeof S=="string"?N===o.r2?o.xk:S:Array.isArray(S)?S.join(" + "):(console.log("value",S),String(S))}}let g;function p(U,N,S){return g?(g.state.name=U.name,g.state.type=U.type,g.state.value=N,g.state.text=S):g=new d(U,N,S),g}function E(U,N,S,Y){if(S=S||{},U==null||(0,m.Kn)(S)&&N!==f.b8.QueryParam)return"";if(!Array.isArray(U)&&typeof U=="object"&&(U=`${U}`),typeof N=="function")return N(U,S,E);N||(N=f.b8.Glob);let Q=N.split(":");Q.length>1?(N=Q[0],Q=Q.slice(1)):Q=[];let z=i.Vl.getIfExists(N);z||(console.error(`Variable format ${N} not found. Using glob format as fallback.`),z=i.Vl.get(f.b8.Glob));const G=p(S,U,Y??U);return z.formatter(U,Q,G)}var h=e(89029),a=e(27677),v=e(19349),x=e(69155),y=e(20112),C=e(14582),P=e(36512);function D(U,N,S,Y){const Q=M(U,N,S);return E(Q,Y)}function M(U,N,S){const Y=S?.__dataContext;if(!Y)return U;const{frame:Q,rowIndex:z,field:G,calculatedValue:k}=Y.value;if(k)switch(N){case"numeric":return k.numeric.toString();case"raw":return k.numeric;case"time":return"";case"text":default:return(0,y.zc)(k)}if(z===void 0)return U;if(N==="time"){const re=Q.fields.find(ce=>ce.type===C.fS.time);return re?re.values.get(z):void 0}const j=G.values.get(z);if(N==="raw")return j;const ge=(G.display??R())(j);switch(N){case"numeric":return ge.numeric;case"text":return ge.text;default:return(0,y.zc)(ge)}}let b;function R(){return b||(b=(0,P.U_)()),b}const B={__value:D,[h.W.includeVars]:w,[h.W.keepTime]:A};function w(U,N,S){const Y=(0,x.c)(S);return a.Cj.toUrlParams(Y)}function A(){return a.Cj.toUrlParams((0,v.$t)().timeRangeForUrl())}const I={getFilteredVariables:r.Q4,getVariables:r.ng,getVariableWithName:r._K};class F{constructor(N=I){this.dependencies=N,this.regex=u.J7,this.index={},this.grafanaVariables=new Map,this.timeRange=null,this.fieldAccessorCache={},this._variables=[]}init(N,S){this._variables=N,this.timeRange=S,this.updateIndex()}get variables(){return(0,n.d)("template_srv.ts","variables","getVariables"),this.getVariables()}getVariables(){return this.dependencies.getVariables()}updateIndex(){const N=S=>S||S==="";if(this.index=this._variables.reduce((S,Y)=>(Y.current&&(Y.current.isNone||N(Y.current.value))&&(S[Y.name]=Y),S),{}),this.timeRange){const S=this.timeRange.from.valueOf().toString(),Y=this.timeRange.to.valueOf().toString();this.index={...this.index,__from:{current:{value:S,text:S}},__to:{current:{value:Y,text:Y}}}}}updateTimeRange(N){this.timeRange=N,this.updateIndex()}variableInitialized(N){this.index[N.name]=N}getAdhocFilters(N){let S=[],Y=(0,l.F)().getInstanceSettings(N);if(!Y)return[];for(const Q of this.getAdHocVariables()){const z=Q.datasource?.uid;(z===Y.uid||z?.indexOf("$")===0&&this.replace(z)===N)&&(S=S.concat(Q.filters))}return S}setGrafanaVariable(N,S){this.grafanaVariables.set(N,S)}setGlobalVariable(N,S){(0,n.d)("template_srv.ts","setGlobalVariable",""),this.index={...this.index,[N]:{current:S}}}getVariableName(N){this.regex.lastIndex=0;const S=this.regex.exec(N);return S?S.slice(1).find(Q=>Q!==void 0):null}containsTemplate(N){if(!N)return!1;const S=this.getVariableName(N),Y=S&&this.getVariableAtIndex(S);return Y!=null}variableExists(N){return(0,n.d)("template_srv.ts","variableExists","containsTemplate"),this.containsTemplate(N)}highlightVariablesAsHtml(N){return!N||!(0,t.isString)(N)?N:(N=(0,t.escape)(N),this._replaceWithVariableRegex(N,void 0,(S,Y)=>this.getVariableAtIndex(Y)?'<span class="template-variable">'+S+"</span>":S))}getAllValue(N){if(N.allValue)return N.allValue;const S=[];for(let Y=1;Y<N.options.length;Y++)S.push(N.options[Y].value);return S}getFieldAccessor(N){const S=this.fieldAccessorCache[N];return S||(this.fieldAccessorCache[N]=(0,t.property)(N))}getVariableValue(N,S){return S?this.getFieldAccessor(S)(N.value):N.value}getVariableText(N,S){return N.value===S||typeof S!="string"?N.text:S}replace(N,S,Y,Q){return S&&S.__sceneObject?i.ep.interpolate(S.__sceneObject.value,N,S,Y):N?(this.regex.lastIndex=0,this._replaceWithVariableRegex(N,Y,(z,G,k,j)=>{const de=this._evaluateVariableExpression(z,G,k,j,S);return Q&&Q.push({match:z,variableName:G,fieldPath:k,format:j,value:de,found:de!==z}),de})):N??""}_evaluateVariableExpression(N,S,Y,Q,z){const G=this.getVariableAtIndex(S),k=z?.[S];if(k){const re=this.getVariableValue(k,Y),ce=this.getVariableText(k,re);if(re!=null)return E(re,Q,G,ce)}if(!G)return B[S]?B[S](N,Y,z,Q):N;if(Q===f.b8.QueryParam||(0,m.Kn)(G)){const re=c.z.get(G.type).getValueForUrl(G),ce=(0,m.Kn)(G)?G.id:G.current.text;return E(re,Q,G,ce)}const j=this.grafanaVariables.get(G.current.value);if(j)return E(j,Q,G);let de=G.current.value,ge=G.current.text;if(this.isAllValue(de)&&(de=this.getAllValue(G),ge=o.xk,G.allValue&&Q!==f.b8.Text&&Q!==f.b8.PercentEncode))return this.replace(de);if(Y){const re=this.getVariableValue({value:de,text:ge},Y);if(re!=null)return E(re,Q,G,ge)}return E(de,Q,G,ge)}_replaceWithVariableRegex(N,S,Y){return this.regex.lastIndex=0,N.replace(this.regex,(Q,z,G,k,j,de,ge)=>Y(Q,z||G||j,de,k||ge||S))}isAllValue(N){return N===o.r2||Array.isArray(N)&&N[0]===o.r2}replaceWithText(N,S){return(0,n.d)("template_srv.ts","replaceWithText()","replace(), and specify the :text format"),this.replace(N,S,"text")}getVariableAtIndex(N){if(N)return this.index[N]?this.index[N]:this.dependencies.getVariableWithName(N)}getAdHocVariables(){return this.dependencies.getFilteredVariables(m.Kn)}}const K=new F;(0,s.l)(K);const W=()=>K},90024:(Z,O,e)=>{"use strict";e.d(O,{J:()=>r});var t=e(40538),n=e(34315),l=e(68404),s=e(52081),i=e(2594),f=e(46967);const c=[{label:"Size",value:t.kW.Size,description:"Split the buckets based on size"},{label:"Count",value:t.kW.Count,description:"Split the buckets based on count"}],o=[{label:"Split",value:t.kW.Size,description:"Split the buckets based on size"}],m=({value:u,onChange:d,item:g})=>l.createElement(s.Lh,null,l.createElement(i.S,{value:u?.mode||t.kW.Size,options:u?.scale?.type===t.wf.Log?o:c,onChange:p=>{d({...u,mode:p})}}),l.createElement(f.I,{value:u?.value??"",placeholder:"Auto",onChange:p=>{d({...u,value:p.currentTarget.value})}}));function r(u,d,g,p){d.addCustomEditor({id:"xBuckets",path:`${u}xBuckets`,name:"X Bucket",editor:m,category:p,defaultValue:{mode:t.kW.Size}}),d.addCustomEditor({id:"yBuckets",path:`${u}yBuckets`,name:"Y Bucket",editor:m,category:p,defaultValue:{mode:t.kW.Size}}),d.addCustomEditor({id:"yBuckets-scale",path:`${u}yBuckets.scale`,name:"Y Bucket scale",category:p,editor:n.Y,defaultValue:{type:t.wf.Linear}})}},77564:(Z,O,e)=>{"use strict";e.d(O,{xf:()=>S,Oy:()=>A,qJ:()=>W,d8:()=>K,Cj:()=>U});var t=e(9471),n=e(17130),l=e(14582),s=e(89890),i=e(20112),f=e(88432),c=e(19695),o=e(37556),m=e(15128),r=e(40538),u=e(43211);const{abs:d,pow:g}=Math,p=new Map;function E(z,G,k,j){let de=[],ge=j.map(u.d);for(let re=G;re<k;re++){let ce=d(re),ie=(0,u.O)(g(z,re),ce);for(let fe=0;fe<j.length;fe++){let Ce=j[fe]*ie,ee=(Ce>=0&&re>=0?0:ce)+(re>=ge[fe]?0:ge[fe]),ne=(0,u.O)(Ce,ee);de.push(ne),p.set(ne,ee)}}return de}const h=z=>z%1===0,a=[1,1.5,2,2.5,3,3.5,4,4.5,5,5.5,6,6.5,7,7.5,8,8.5,9,9.5],v=E(10,-16,0,a),x=E(10,0,16,a),y=x.filter(h),C=v.concat(x),P=v.concat(y),D=1*1e3,M=60*D,b=60*M,R=24*b,B=365*R,w=[1,2,4,5,10,20,25,40,50,100,200,250,400,500,D,2*D,4*D,5*D,10*D,15*D,20*D,30*D,M,2*M,4*M,5*M,10*M,15*M,20*M,30*M,b,2*b,4*b,6*b,8*b,12*b,18*b,R,2*R,3*R,4*R,5*R,6*R,7*R,10*R,15*R,30*R,45*R,60*R,90*R,180*R,B,2*B,3*B,4*B,5*B,6*B,7*B,8*B,9*B,10*B],A={id:n.W.heatmap,name:"Create heatmap",description:"calculate heatmap from source data",defaultOptions:{},operator:(z,G)=>k=>k.pipe((0,t.U)(j=>A.transformer(z,G)(j))),transformer:z=>G=>{const k=S(G,z);return z.keepOriginalData?[k,...G]:[k]}};function I(z){return z==="+Inf"?1/0:z==="-Inf"?-1/0:+(z??0)}function F(z,G){return I(z)-I(G)}function K(z){return z?.meta?.custom??{}}function W(z){let G=!1;for(let k of z.fields)switch(k.name){case"y":case"yMin":case"yMax":if(G)return!1;G=!0}return G}function U(z){const G=z.frame.fields[0],k=G.values.toArray(),j=z.frame.fields.filter((X,te)=>X.type===l.fS.number&&te>0),de=k.length*j.length,ge=new Array(de),re=new Array(de),ce=new Array(de),ie=j.map(X=>X.values.toArray().slice());ie.forEach((X,te)=>{for(let ae=0;ae<X.length;ae++)ce[ie.length*ae+te]=X[ae]});const fe=Array.from({length:j.length},(X,te)=>te);for(let X=0,te=0,ae=0;X<de;te=++X%fe.length)re[X]=fe[te],te===0&&X>=fe.length&&ae++,ge[X]=k[ae];let Ce=j[0].labels?.le!=null?"yMax":"y";switch(z.layout){case r.kv.le:Ce="yMax";break;case r.kv.ge:Ce="yMin";break;case r.kv.unknown:Ce="y";break}const ee={yOrdinalDisplay:j.map(X=>(0,s.C)(X,z.frame)),yMatchWithLabel:Object.keys(j[0].labels??{})[0]};if(ee.yMatchWithLabel&&(ee.yOrdinalLabel=j.map(X=>X.labels?.[ee.yMatchWithLabel]??""),ee.yMatchWithLabel==="le"&&(ee.yMinDisplay="0.0")),z.unit?.length||z.decimals!=null){const X=(0,i.Cf)(z.unit??"short");ee.yMinDisplay&&(ee.yMinDisplay=(0,i.zc)(X(0,z.decimals))),ee.yOrdinalDisplay=ee.yOrdinalDisplay.map(te=>{let ae=+te;return Number.isNaN(ae)?te:(0,i.zc)(X(ae,z.decimals))})}const ne={...j[0].config};return ne.displayNameFromDS&&delete ne.displayNameFromDS,{length:ge.length,refId:z.frame.refId,meta:{type:f.P.HeatmapCells,custom:ee},fields:[{name:G.type===l.fS.time?"xMax":"x",type:G.type,values:new c.G(ge),config:G.config},{name:Ce,type:l.fS.number,values:new c.G(re),config:{unit:"short"}},{name:z.value?.length?z.value:"Value",type:l.fS.number,values:new c.G(ce),config:ne,display:j[0].display}]}}function N(z){z=z.slice(),z.sort((k,j)=>F(k.name,j.name));const G=z.map(k=>k.fields[1].values.toArray().slice());return G.reverse(),G.forEach((k,j)=>{if(j<G.length-1)for(let de=0;de<k.length;de++)k[de]-=G[j+1][de]}),G.reverse(),z.map((k,j)=>({...k,fields:[k.fields[0],{...k.fields[1],values:new ArrayVector(G[j])}]}))}function S(z,G){let k,j,de=0;for(let X of z)X.fields.find(ae=>ae.type===l.fS.time)&&(de+=X.length);let ge=Array(de),re=Array(de),ce=0;for(let X of z){const te=X.fields.find(_=>_.type===l.fS.time);if(!te)continue;k||(k=te);const ae=te.values.toArray();for(let _ of X.fields)if(_!==te&&_.type===l.fS.number){const ve=_.values.toArray();for(let Ve=0;Ve<ae.length;Ve++,ce++)ge[ce]=ae[Ve],re[ce]=ve[Ve];j||(j=_)}}if(!k||!j)throw"no heatmap fields found";if(!ge.length||!re.length)throw"no values found";const ie=G.xBuckets??{},fe=G.yBuckets??{};if(ie.scale?.type===r.wf.Log)throw"X axis only supports linear buckets";const Ce=G.yBuckets?.scale??{type:r.wf.Linear},ee=Y(ge,re,{xSorted:!0,xTime:k.type===l.fS.time,xMode:ie.mode,xSize:ie.mode===r.kW.Size?(0,o.iX)((0,o.RA)(ie.value??"")):ie.value?+ie.value:void 0,yMode:fe.mode,ySize:fe.value?+fe.value:void 0,yLog:Ce?.type===r.wf.Log?Ce?.log:void 0});return{length:ee.x.length,name:(0,s.C)(j),meta:{type:f.P.HeatmapCells},fields:[{name:"xMin",type:k.type,values:new c.G(ee.x),config:k.config},{name:"yMin",type:l.fS.number,values:new c.G(ee.y),config:{...j.config,custom:{scaleDistribution:Ce}}},{name:"Count",type:l.fS.number,values:new c.G(ee.count),config:{unit:"short"}}]}}function Y(z,G,k){let j=z.length,de=k?.xSorted??!1,ge=k?.ySorted??!1,re=de?z[0]:1/0,ce=ge?G[0]:1/0,ie=de?z[j-1]:-1/0,fe=ge?G[j-1]:-1/0,Ce=k?.yLog;for(let Ae=0;Ae<j;Ae++)de||(re=Math.min(re,z[Ae]),ie=Math.max(ie,z[Ae])),ge||(!Ce||G[Ae]>0)&&(ce=Math.min(ce,G[Ae]),fe=Math.max(fe,G[Ae]));let ee=k?.xSize??0,ne=k?.ySize??0,X=k?.xMode,te=k?.yMode;if((!Number.isFinite(ee)||ee<=0)&&(X=r.kW.Count,ee=20),(!Number.isFinite(ne)||ne<=0)&&(te=r.kW.Count,ne=10),X===r.kW.Count){let Ae=(ie-re)/Math.max(ee-1,1),et=k?.xTime?w:P,_e=et.findIndex(Se=>Se>Ae)-1;ee=et[Math.max(_e,0)]}if(te===r.kW.Count){let Ae=(fe-ce)/Math.max(ne-1,1),et=k?.yTime?w:P,_e=et.findIndex(Se=>Se>Ae)-1;ne=et[Math.max(_e,0)]}let ae=k?.xCeil?Ae=>(0,m.UO)(Ae,ee):Ae=>(0,m.mB)(Ae,ee),_=k?.yCeil?Ae=>(0,m.UO)(Ae,ne):Ae=>(0,m.mB)(Ae,ne);if(Ce){ne=1/(k?.ySize??1);let Ae=Ce===2?Math.log2:Math.log10;_=k?.yCeil?et=>(0,m.UO)(Ae(et),ne):et=>(0,m.mB)(Ae(et),ne)}let ve=ae(re),Ve=ae(ie),it=_(ce),rt=_(fe),pe=Math.round((Ve-ve)/ee)+1,Ie=Math.round((rt-it)/ne)+1,[We,Je,He]=Q(pe,Ie,ve,ee,it,ne,Ce);for(let Ae=0;Ae<j;Ae++){if(Ce&&G[Ae]<=0)continue;const et=(ae(z[Ae])-ve)/ee,_e=(_(G[Ae])-it)/ne,Se=et*Ie+_e;He[Se]++}return{x:We,y:Je,count:He}}function Q(z,G,k,j,de,ge,re){const ce=z*G,ie=new Array(ce),fe=new Array(ce),Ce=new Array(ce);for(let ee=0,ne=0,X=k;ee<ce;ne=++ee%G)Ce[ee]=0,re?fe[ee]=re**(de+ne*ge):fe[ee]=de+ne*ge,ne===0&&ee>=G&&(X+=j),ie[ee]=X;return[ie,fe,Ce]}},96366:(Z,O,e)=>{"use strict";e.d(O,{Ii:()=>l,JJ:()=>n,ac:()=>s});var t=e(40538),n=(f=>(f.Prepare="prepare",f.Calculate="calculate",f.Modify="modify",f))(n||{}),l=(f=>(f.Heading="heading",f.Distance="distance",f.Area="area",f))(l||{}),s=(f=>(f.AsLine="asLine",f.LineBuilder="lineBuilder",f))(s||{});const i={action:"prepare",source:{mode:t.q1.Auto}}},14573:(Z,O,e)=>{"use strict";e.d(O,{Lb:()=>u,Lp:()=>m,N7:()=>g});var t=e(55839),n=e(17792),l=e(63897),s=e(29501),i=e(76254),f=e(14582),c=e(19695),o=e(96366);function m(p){const E=[];for(const h of p.values.toArray())h&&E.push(u(h));return new n.Z(E)}function r(p){const E=new Array(p.length);if(p.length>1){let h=d(p[0]);for(let a=1;a<p.length;a++){let v=d(p[a]);if(h&&v){let x=Math.atan2(v[0]-h[0],v[1]-h[1])*180/Math.PI;x<0&&(x+=360),E[a-1]=E[a]=x}}}else E.fill(0);return E}function u(p){return p instanceof l.Z?p.getCoordinates():(0,t.qg)(p.getExtent())}function d(p){if(p)return(0,s.bU)(u(p))}function g(p,E){const h=p.values.toArray(),a=new Array(p.values.length),v=E.calc??o.Ii.Heading,x=E.field??v;switch(v){case o.Ii.Area:{for(let y=0;y<h.length;y++){const C=h[y];C&&(a[y]=(0,i.bg)(C))}return{name:x,type:f.fS.number,config:{unit:"areaM2"},values:new c.G(a)}}case o.Ii.Distance:{for(let y=0;y<h.length;y++){const C=h[y];C&&(a[y]=(0,i.xA)(C))}return{name:x,type:f.fS.number,config:{unit:"lengthm"},values:new c.G(a)}}case o.Ii.Heading:default:return{name:x,type:f.fS.number,config:{unit:"degree"},values:new c.G(r(h))}}}},12142:(Z,O,e)=>{"use strict";e.d(O,{PJ:()=>r,ZP:()=>d,eT:()=>c,k7:()=>m,tZ:()=>o,w4:()=>i});var t=e(62992),n=e(47694);const l={users:[],searchQuery:"",page:0,perPage:30,totalPages:1,canInvite:!n.ZP.externalUserMngLinkName,externalUserMngInfo:n.ZP.externalUserMngInfo,externalUserMngLinkName:n.ZP.externalUserMngLinkName,externalUserMngLinkUrl:n.ZP.externalUserMngLinkUrl,isLoading:!1},s=(0,t.oM)({name:"users",initialState:l,reducers:{usersLoaded:(g,p)=>{const{totalCount:E,perPage:h,page:a,orgUsers:v}=p.payload,x=Math.ceil(E/h);return{...g,isLoading:!0,users:v,perPage:h,page:a,totalPages:x}},searchQueryChanged:(g,p)=>({...g,searchQuery:p.payload,page:l.page}),setUsersSearchPage:(g,p)=>({...g,page:p.payload}),pageChanged:(g,p)=>({...g,page:p.payload}),usersFetchBegin:g=>({...g,isLoading:!0}),usersFetchEnd:g=>({...g,isLoading:!1})}}),{searchQueryChanged:i,setUsersSearchPage:f,usersLoaded:c,usersFetchBegin:o,usersFetchEnd:m,pageChanged:r}=s.actions,d={users:s.reducer}},22323:(Z,O,e)=>{"use strict";e.d(O,{z:()=>n});var t=e(64140);const n=new t.B},30002:(Z,O,e)=>{"use strict";e.d(O,{KJ:()=>h,M6:()=>p,Ue:()=>a,Z$:()=>v,ku:()=>E,m2:()=>g});var t=e(82897),n=e.n(t),l=e(91162),s=e(50678),i=e(15546),f=e(85803),c=e(7240),o=e(87095),m=e(92990),r=e(92624),u=e(79134);const d="Filters",g=C=>async(P,D)=>{let M=y(C,D());if(!M&&(P(x(C)),M=y(C,D()),!M))return;const b=M.filters.findIndex(B=>B.key===C.key&&B.value===C.value);if(b===-1){const{value:B,key:w,operator:A}=C,I={value:B,key:w,operator:A,condition:""};return await P(h((0,r.yQ)(M),I))}const R={...M.filters[b],operator:C.operator};return await P(p((0,r.yQ)(M),{index:b,filter:R}))},p=(C,P)=>async(D,M)=>{const b=(0,o.E0)(C,M());D((0,c.mb)(C.rootStateKey,(0,u.e_)((0,r.Y6)(b,P)))),await D((0,f.MB)((0,r.yQ)(b),!0))},E=(C,P)=>async(D,M)=>{const b=(0,o.E0)(C,M());D((0,c.mb)(C.rootStateKey,(0,u.DO)((0,r.Y6)(b,P)))),await D((0,f.MB)((0,r.yQ)(b),!0))},h=(C,P)=>async(D,M)=>{const b=(0,o.E0)(C,M());D((0,c.mb)(C.rootStateKey,(0,u.QL)((0,r.Y6)(b,P)))),await D((0,f.MB)((0,r.yQ)(b),!0))},a=(C,P)=>async(D,M)=>{const b=(0,o.E0)(C,M());D((0,c.mb)(C.rootStateKey,(0,u.aM)((0,r.Y6)(b,P)))),await D((0,f.MB)((0,r.yQ)(b),!0))},v=(C,P)=>async(D,M)=>{const b=(0,o.E0)(C,M());D((0,c.mb)(C.rootStateKey,(0,m.Pl)((0,r.Y6)(b,{propName:"datasource",propValue:P}))));const B=(await(0,l.ak)().get(P))?.getTagKeys?"Ad hoc filters are applied automatically to all queries that target this data source":"This data source does not support ad hoc filters yet.";D((0,c.mb)(C.rootStateKey,(0,s.z7)({infoText:B})))},x=C=>(P,D)=>{const M=(0,o.S_)(D()),b={...(0,t.cloneDeep)(u.Js),datasource:C.datasource,name:d,id:d,rootStateKey:M},R=!1,B=(0,o.Eo)(M,D()),w={type:"adhoc",id:b.id,rootStateKey:M};P((0,c.mb)(M,(0,m.VN)((0,r.Y6)(w,{global:R,model:b,index:B}))))},y=(C,P)=>{const D=(0,o.S_)(P),M=(0,o.AE)(D,P);return Object.values(M.variables).find(b=>(0,i.Kn)(b)&&b.datasource?.uid===C.datasource.uid)}},44847:(Z,O,e)=>{"use strict";e.d(O,{F:()=>C});var t=e(68404),n=e(70044),l=e(35287),s=e(68118),i=e(39904),f=e(91162);const c=90,o=({datasource:P,onChange:D,disabled:M,filterKey:b,getTagKeysOptions:R})=>{const B=()=>d(P,R),w=()=>g(P,R);return b===null?t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-add-key-wrapper"},t.createElement(s.V,{disabled:M,className:"query-segment-key",Component:u,value:b,onChange:D,loadOptions:B,inputMinWidth:c})):t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterKey-key-wrapper"},t.createElement(s.V,{disabled:M,className:"query-segment-key",value:b,onChange:D,loadOptions:w,inputMinWidth:c}))},m="-- remove filter --",r={label:m,value:m},u=t.createElement("span",{className:"gf-form-label query-part","aria-label":"Add Filter"},t.createElement(i.J,{name:"plus"})),d=async(P,D)=>{const M=await(0,f.ak)().get(P);return!M||!M.getTagKeys?[]:(await M.getTagKeys(D)).map(R=>({label:R.text,value:R.text}))},g=async(P,D)=>{const M=await d(P,D);return[r,...M]},p=({datasource:P,disabled:D,onChange:M,filterKey:b,filterValue:R,placeHolder:B})=>{const w=()=>E(P,b);return t.createElement("div",{className:"gf-form","data-testid":"AdHocFilterValue-value-wrapper"},t.createElement(s.V,{className:"query-segment-value",disabled:D,placeholder:B,value:R,onChange:M,loadOptions:w}))},E=async(P,D)=>{const M=await(0,f.ak)().get(P);return!M||!M.getTagValues?[]:(await M.getTagValues({key:D})).map(R=>({label:R.text,value:R.text}))},h=["=","!=","<",">","=~","!~"].map(P=>({label:P,value:P})),a=({value:P,disabled:D,onChange:M})=>t.createElement(n.X,{className:"query-segment-operator",value:P,disabled:D,options:h,onChange:M}),v=({datasource:P,filter:{key:D,operator:M,value:b},onKeyChange:R,onOperatorChange:B,onValueChange:w,placeHolder:A,getTagKeysOptions:I,disabled:F})=>t.createElement(t.Fragment,null,t.createElement(o,{disabled:F,datasource:P,filterKey:D,onChange:R,getTagKeysOptions:I}),t.createElement("div",{className:"gf-form"},t.createElement(a,{disabled:F,value:M,onChange:B})),t.createElement(p,{disabled:F,datasource:P,filterKey:D,filterValue:b,onChange:w,placeHolder:A})),x=({datasource:P,appendBefore:D,onCompleted:M,getTagKeysOptions:b})=>{const[R,B]=(0,t.useState)(null),[w,A]=(0,t.useState)("="),I=(0,t.useCallback)(W=>{if(W.value!==m){B(W.value??"");return}B(null)},[B]),F=(0,t.useCallback)(W=>A(W.value??""),[A]),K=(0,t.useCallback)(W=>{M({value:W.value??"",operator:w,condition:"",key:R}),B(null),A("=")},[M,w,R]);return R===null?t.createElement(o,{datasource:P,filterKey:R,onChange:I,getTagKeysOptions:b}):t.createElement(t.Fragment,{key:"filter-builder"},D,t.createElement(v,{datasource:P,filter:{key:R,value:"",operator:w,condition:""},placeHolder:(0,l.t)("variable.adhoc.placeholder","Select value"),onKeyChange:I,onOperatorChange:F,onValueChange:K,getTagKeysOptions:b}))},y=({label:P})=>t.createElement("div",{className:"gf-form"},t.createElement("span",{className:"gf-form-label query-keyword"},P));class C extends t.PureComponent{constructor(){super(...arguments),this.onChange=(D,M)=>b=>{const{filters:R}=this.props,{value:B}=b;return b.value===m?this.props.removeFilter(D):this.props.changeFilter(D,{...R[D],[M]:B})},this.appendFilterToVariable=D=>{this.props.addFilter(D)}}render(){const{filters:D,disabled:M}=this.props;return t.createElement("div",{className:"gf-form-inline"},this.renderFilters(D,M),!M&&t.createElement(x,{datasource:this.props.datasource,appendBefore:D.length>0?t.createElement(y,{label:"AND"}):null,onCompleted:this.appendFilterToVariable,getTagKeysOptions:this.props.getTagKeysOptions}))}renderFilters(D,M){return D.length===0&&M?t.createElement(n.X,{disabled:M,value:"No filters",options:[],onChange:()=>{}}):D.reduce((b,R,B)=>(b.length>0&&b.push(t.createElement(y,{label:"AND",key:`condition-${B}`})),b.push(this.renderFilterSegments(R,B,M)),b),[])}renderFilterSegments(D,M,b){return t.createElement(t.Fragment,{key:`filter-${M}`},t.createElement(v,{disabled:b,datasource:this.props.datasource,filter:D,onKeyChange:this.onChange(M,"key"),onOperatorChange:this.onChange(M,"operator"),onValueChange:this.onChange(M,"value"),getTagKeysOptions:this.props.getTagKeysOptions}))}}},79134:(Z,O,e)=>{"use strict";e.d(O,{DO:()=>o,Js:()=>i,QL:()=>c,aM:()=>r,e_:()=>m,jo:()=>u});var t=e(62992),n=e(10672),l=e(87095),s=e(63510);const i={...n.Eg,type:"adhoc",datasource:null,filters:[]},f=(0,t.oM)({name:"templating/adhoc",initialState:s.s,reducers:{filterAdded:(d,g)=>{const p=(0,l.ir)(d,g.payload.id);p.type==="adhoc"&&p.filters.push(g.payload.data)},filterRemoved:(d,g)=>{const p=(0,l.ir)(d,g.payload.id);if(p.type!=="adhoc")return;const E=g.payload.data;p.filters.splice(E,1)},filterUpdated:(d,g)=>{const p=(0,l.ir)(d,g.payload.id);if(p.type!=="adhoc")return;const{filter:E,index:h}=g.payload.data;p.filters[h]=E},filtersRestored:(d,g)=>{const p=(0,l.ir)(d,g.payload.id);p.type==="adhoc"&&(p.filters=g.payload.data)}}}),{filterAdded:c,filterRemoved:o,filterUpdated:m,filtersRestored:r}=f.actions,u=f.reducer},82253:(Z,O,e)=>{"use strict";e.d(O,{BH:()=>s,IG:()=>f,QX:()=>i,UY:()=>t,r2:()=>l,xk:()=>n});const t="00000000-0000-0000-0000-000000000000",n="All",l="$__all",s="None",i="",f="var-"},95125:(Z,O,e)=>{"use strict";e.d(O,{R:()=>o,z:()=>c});var t=e(42066),n=e(68404),l=e(68183),s=e(72648),i=e(97379),f=e(49993);const c="Grafana-LegacyVariableQueryEditor",o=({onChange:m,query:r})=>{const u=(0,s.wW)(f.w),[d,g]=(0,n.useState)(r),p=a=>{g(a.currentTarget.value)},E=(0,n.useCallback)(a=>{m(a.currentTarget.value,a.currentTarget.value)},[m]),h=(0,t.Me)();return n.createElement(i.K,{id:h,rows:2,value:d,onChange:p,onBlur:E,placeholder:"Metric name or tags query",required:!0,"aria-label":l.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsQueryInput,cols:52,className:u.textarea})};o.displayName=c},41624:(Z,O,e)=>{"use strict";e.d(O,{e:()=>i});var t=e(9892),n=e(68404),l=e(72648),s=e(19825);function i({className:c,...o}){const m=(0,l.wW)(f);return n.createElement(s.D,{...o,className:(0,t.cx)(m.legend,c)})}function f(c){return{legend:(0,t.css)({marginTop:c.spacing(3),marginBottom:c.spacing(1)})}}},83704:(Z,O,e)=>{"use strict";e.d(O,{u:()=>c});var t=e(9892),n=e(68404),l=e(72648),s=e(24799),i=e(53217),f=e(56991);function c({name:m,description:r,value:u,options:d,onChange:g,testId:p,width:E}){const h=(0,l.wW)(o),a=(0,f.L)(),v=`variable-select-input-${m}-${a}`;return n.createElement(s.g,{label:m,description:r,htmlFor:v},n.createElement("div",{"data-testid":p},n.createElement(i.Ph,{inputId:v,onChange:g,value:u,width:E??30,options:d,className:h.selectContainer})))}function o(m){return{selectContainer:t.css`
      margin-right: ${m.spacing(.5)};
    `}}},49993:(Z,O,e)=>{"use strict";e.d(O,{W:()=>c,w:()=>o});var t=e(9892),n=e(42066),l=e(68404),s=e(72648),i=e(24799),f=e(97379);function c({value:m,name:r,description:u,placeholder:d,onChange:g,onBlur:p,ariaLabel:E,required:h,width:a,testId:v}){const x=(0,s.wW)(o),y=(0,n.Me)();return l.createElement(i.g,{label:r,description:u,htmlFor:y},l.createElement(f.K,{id:y,rows:2,value:m,onChange:g,onBlur:p,placeholder:d,required:h,"aria-label":E,cols:a,className:x.textarea,"data-testid":v}))}function o(m){return{textarea:t.css`
      white-space: pre-wrap;
      min-height: ${m.spacing(4)};
      height: auto;
      overflow: auto;
      padding: ${m.spacing(.75,1)};
      width: inherit;
    `}}},57052:(Z,O,e)=>{"use strict";e.d(O,{V:()=>i});var t=e(42066),n=e(68404),l=e(24799),s=e(46967);function i({value:f,name:c,placeholder:o="",onChange:m,testId:r,width:u,required:d,onBlur:g,grow:p,description:E,invalid:h,error:a,maxLength:v}){const x=(0,t.Me)(c);return n.createElement(l.g,{label:c,description:E,invalid:h,error:a,htmlFor:x},n.createElement(s.I,{type:"text",id:x,placeholder:o,value:f,onChange:m,onBlur:g,width:p?void 0:u??30,"data-testid":r,maxLength:v,required:d}))}},50678:(Z,O,e)=>{"use strict";e.d(O,{PF:()=>n,PV:()=>u,QR:()=>d,Sg:()=>r,Yo:()=>i,gl:()=>s,qe:()=>o,wJ:()=>c,y8:()=>f,z7:()=>m});var t=e(62992);const n={id:"",isValid:!0,errors:{},name:"",extended:null},l=(0,t.oM)({name:"templating/editor",initialState:n,reducers:{variableEditorMounted:(g,p)=>{g.name=p.payload.name,g.id=p.payload.id},variableEditorUnMounted:(g,p)=>n,changeVariableNameSucceeded:(g,p)=>{g.name=p.payload.data.newName,delete g.errors.name,g.isValid=Object.keys(g.errors).length===0},changeVariableNameFailed:(g,p)=>{g.name=p.payload.newName,g.errors.name=p.payload.errorText,g.isValid=Object.keys(g.errors).length===0},addVariableEditorError:(g,p)=>{g.errors[p.payload.errorProp]=p.payload.errorText,g.isValid=Object.keys(g.errors).length===0},removeVariableEditorError:(g,p)=>{delete g.errors[p.payload.errorProp],g.isValid=Object.keys(g.errors).length===0},changeVariableEditorExtended:(g,p)=>{g.extended={...g.extended,...p.payload}},cleanEditorState:()=>n}}),s=l.reducer,{changeVariableNameSucceeded:i,changeVariableNameFailed:f,variableEditorMounted:c,variableEditorUnMounted:o,changeVariableEditorExtended:m,addVariableEditorError:r,removeVariableEditorError:u,cleanEditorState:d}=l.actions},69155:(Z,O,e)=>{"use strict";e.d(O,{c:()=>s});var t=e(20308),n=e(22323),l=e(82253);function s(i){const f={},c=(0,t.J)().getVariables();for(let o=0;o<c.length;o++){const m=c[o],r=i&&i[m.name];m.skipUrlSync||(r?f[l.IG+m.name]=r.value:f[l.IG+m.name]=n.z.get(m.type).getValueForUrl(m))}return f}},15546:(Z,O,e)=>{"use strict";e.d(O,{$7:()=>E,Ju:()=>u,Kn:()=>s,Kr:()=>o,NX:()=>p,R:()=>r,U4:()=>f,VC:()=>i,X7:()=>g,Xh:()=>l,d7:()=>d,eL:()=>c});var t=e(59670),n=e(95125);const l=h=>h.type==="query",s=h=>h.type==="adhoc",i=h=>h.type==="constant",f=h=>"multi"in h,c=h=>"options"in h,o=h=>"current"in h;function m(h){return h===null?!1:typeof h=="string"}const r=h=>Boolean(h.metricFindQuery)&&!Boolean(h.variables),u=h=>{if(!h.variables||h.variables.getType()!==t.j2.Standard)return!1;const a=h.variables;return"toDataQuery"in a&&Boolean(a.toDataQuery)},d=h=>{if(!h.variables||h.variables.getType()!==t.j2.Custom)return!1;const a=h.variables;return"query"in a&&"editor"in a&&Boolean(a.query)&&Boolean(a.editor)},g=h=>h.variables?h.variables.getType()===t.j2.Datasource:!1;function p(h,a){return h?h.displayName===n.z||r(a):!1}function E(h,a){return h?h.displayName!==n.z&&(g(a)||u(a)||d(a)):!1}},37737:(Z,O,e)=>{"use strict";e.d(O,{Kf:()=>n,iV:()=>s,j4:()=>i});var t=e(62992);const n={usages:[],usagesNetwork:[]},l=(0,t.oM)({name:"templating/inspect",initialState:n,reducers:{initInspect:(f,c)=>{const{usages:o,usagesNetwork:m}=c.payload;f.usages=o,f.usagesNetwork=m}}}),s=l.reducer,{initInspect:i}=l.actions},19248:(Z,O,e)=>{"use strict";e.d(O,{MJ:()=>u,GQ:()=>m,V:()=>h,Of:()=>r,PQ:()=>x,dH:()=>R,Yg:()=>a,Rv:()=>M,vI:()=>P});var t=e(89029);function n(B,w){const A=new Set;for(const I of B)A.add(w(I));return A}var l=e(96161),s=e(55935),i=e(86899),f=e(22323),c=e(15546),o=e(92624);const m=B=>{const w=[];for(const A of B)w.push({id:A.id,label:`${A.id}`});return w},r=(B,w)=>B.filter(A=>w.some(I=>I.from===A.id||I.to===A.id)),u=B=>{const w=[];for(const A of B)for(const I of B){if(A===I)continue;f.z.get(A.type).dependsOn(A,I)&&w.push({from:A.id,to:I.id})}return w};function d(B){const w=(0,o.a9)(B);return w?w.slice(1).find(I=>I!==void 0):void 0}const g=(B,w)=>{o.J7.lastIndex=0;const A=[],F=(0,s.Xh)(w,2).match(o.J7);if(!F)return A;for(const K of F){if(!K||K.indexOf("$__")!==-1||K.indexOf("${__")!==-1||K.indexOf("$hashKey")!==-1)continue;const W=d(K);B.some(U=>U.id===W)||A.find(U=>U===W)||W&&A.push(W)}return A},p={alias:[/^m$/,/^measurement$/,/^col$/,/^tag_(\w+|\d+)$/],query:[/^timeFilter$/]},E=(B,w,A)=>{const I=Object.keys(w.value).reduce((K,W)=>{const U=w.value[W];if(!U||typeof U!="string")return K;const N=p[W]?p[W].find(Y=>Y.test(B)):void 0;let S=(0,o.QI)(U,B);return W==="repeat"&&U===B&&(S=!0),!N&&S&&(K={...K,[W]:U}),K},{}),F=Object.keys(w.value).reduce((K,W)=>{const U=w.value[W];if(U&&typeof U=="object"&&Object.keys(U).length){let N=U.title||U.name||U.id||W;Array.isArray(w.value)&&w.key==="panels"&&(N=`${N}[${U.id}]`);const S=E(B,{key:W,value:U},{});Object.keys(S).length&&(K={...K,[N]:S})}return K},{});return(Object.keys(I).length||Object.keys(F).length)&&(A={...A,...I,...F}),A},h=(B,w)=>{if(!w)return{unUsed:[],usages:[]};const A=[];let I=[];const F=w.getSaveModelClone();for(const K of B){const W=K.id,U=E(W,{key:"model",value:F},{});!Object.keys(U).length&&!(0,c.Kn)(K)&&A.push(K),Object.keys(U).length&&I.push({variable:K,tree:U})}return{unUsed:A,usages:I}};async function a(B,w){return new Promise((A,I)=>{setTimeout(()=>{try{const F=v(B,w);A(P(F))}catch(F){I(F)}},200)})}function v(B,w){if(!w)return[];let A=[];const I=w.getSaveModelClone(),F=g(B,I);for(const K of F){const W=E(K,{key:"model",value:I},{});if(Object.keys(W).length){const U={id:K,name:K};A.push({variable:U,tree:W})}}return A}function x(B,w,A){const I=n(w.descendants(B),K=>K.name);I.add(t.W.includeVars);for(const K of B)I.add(K);return y([...I],A)}function y(B,w){const A=[];for(const I of B)w[I]&&A.push(...w[I]);return new Set(A)}const C=(B,w)=>{const{id:A,value:I}=w,{nodes:F,edges:K}=B;if(I&&typeof I=="string"){const W=`${w.id}-${I}`;return F.push({id:W,label:I}),K.push({from:W,to:A}),B}if(I&&typeof I=="object"){const W=Object.keys(I);for(const U of W){const N=`${w.id}-${U}`;F.push({id:N,label:U}),K.push({from:N,to:A}),B=C(B,{id:N,value:I[U]})}return B}return B},P=B=>{const w=[];for(const A of B){const{variable:I,tree:F}=A,K={variable:I,nodes:[{id:"dashboard",label:"dashboard"}],edges:[],showGraph:!1};w.push(C(K,{id:"dashboard",value:F}))}return w},D=B=>Object.values(B).reduce((A,I)=>typeof I=="object"?A+D(I):A+1,0),M=(B,w)=>{const A=w.find(I=>I.variable.id===B);return A?D(A.tree):0};function b(B){const w=[];for(const A of B)w.push(A),A.panels?.length&&w.push(...b(A.panels.map(I=>new PanelModel(I))));return w}function R(B){const w={};for(const A of B){const I=(0,l.Jg)(A),F=[...I.matchAll(/"repeat":"([^"]+)"/g)].map(U=>U[1]),K=I.match(o.J7)?.map(U=>d(U))??[],W=[...F,...K];for(const U of W)U in w?w[U].add(A.id):w[U]=new Set([A.id])}return w}},85972:(Z,O,e)=>{"use strict";e.d(O,{XJ:()=>D,nn:()=>a,yy:()=>c,Ew:()=>v,cv:()=>M,aN:()=>h,iQ:()=>x,_M:()=>E,ss:()=>C,wF:()=>P,Ug:()=>y});var t=e(62992),n=e(82897);const l=(b,...R)=>R.reduce((B,w)=>w(B),b);var s=e(82253),i=e(15546),f=e(92624);const c={id:"",highlightIndex:-1,queryValue:"",selectedValues:[],options:[],multi:!1},o=1e3,m=b=>Array.isArray(b)?b.reduce((R,B)=>((0,n.isString)(B.value)&&(R[B.value]=B),R),{}):{},r=b=>{if(!Array.isArray(b.options))return b.options=[],b;const R=m(b.selectedValues);return b.selectedValues=Object.values(R),b.options=b.options.map(B=>{if(!(0,n.isString)(B.value))return B;const w=!!R[B.value];return B.selected===w?B:{...B,selected:w}}),b.options=u(b.options),b},u=b=>Array.isArray(b)?b.length<=o?b:b.slice(0,o):[],d=b=>{const{options:R,selectedValues:B}=b;return R.length===0||B.length>0||!R[0]||R[0].value!==s.r2||(b.selectedValues=[{...R[0],selected:!0}]),b},g=b=>{const{selectedValues:R}=b;return R.length>1&&(b.selectedValues=R.filter(B=>B.value!==s.r2)),b},p=(0,t.oM)({name:"templating/optionsPicker",initialState:c,reducers:{showOptions:(b,R)=>{const{query:B,options:w}=R.payload;if(b.highlightIndex=-1,b.options=(0,n.cloneDeep)(w),b.id=R.payload.id,b.queryValue="",b.multi=!1,(0,i.U4)(R.payload)&&(b.multi=R.payload.multi??!1),(0,i.Xh)(R.payload)){const{queryValue:A}=R.payload,I=(0,f.bf)(B);b.queryValue=I&&A?A:""}return b.selectedValues=b.options.filter(A=>A.selected),l(b,d,r)},hideOptions:(b,R)=>({...c}),toggleOption:(b,R)=>{const{option:B,clearOthers:w,forceSelect:A}=R.payload,{multi:I,selectedValues:F}=b;if(B){const K=!F.find(W=>W.value===B.value&&W.text===B.text);if(B.value===s.r2||!I||w)return K||A?b.selectedValues=[{...B,selected:!0}]:b.selectedValues=[],l(b,d,g,r);if(A||K)return b.selectedValues.push({...B,selected:!0}),l(b,d,g,r);b.selectedValues=F.filter(W=>W.value!==B.value&&W.text!==B.text)}else b.selectedValues=[];return l(b,d,g,r)},moveOptionsHighlight:(b,R)=>{let B=b.highlightIndex+R.payload;return B<0?B=-1:B>=b.options.length&&(B=b.options.length-1),{...b,highlightIndex:B}},toggleAllOptions:(b,R)=>b.selectedValues.length>0?(b.selectedValues=[],l(b,r)):(b.selectedValues=b.options.filter(B=>B.value!==s.r2).map(B=>({...B,selected:!0})),l(b,r)),updateSearchQuery:(b,R)=>(b.queryValue=R.payload,b),updateOptionsAndFilter:(b,R)=>{const B=(0,n.trimStart)((b.queryValue??"").toLowerCase());return b.options=R.payload.filter(w=>{const A=w.text??"";return(Array.isArray(A)?A.toString():A).toLowerCase().indexOf(B)!==-1}),b.highlightIndex=0,l(b,d,r)},updateOptionsFromSearch:(b,R)=>(b.options=R.payload,b.highlightIndex=0,l(b,d,r)),cleanPickerState:()=>c}}),{toggleOption:E,showOptions:h,hideOptions:a,moveOptionsHighlight:v,toggleAllOptions:x,updateSearchQuery:y,updateOptionsAndFilter:C,updateOptionsFromSearch:P,cleanPickerState:D}=p.actions,M=p.reducer},96188:(Z,O,e)=>{"use strict";e.d(O,{x:()=>t});const t=(s,i)=>s&&(i&&!Array.isArray(s.value)?{...s,value:l(s.value),text:l(s.text)}:!i&&Array.isArray(s.value)?{...s,value:n(s.value),text:n(s.text)}:s),n=s=>Array.isArray(s)?s.length>0?s[0]:"":s,l=s=>Array.isArray(s)?s:[s]},85803:(Z,O,e)=>{"use strict";e.d(O,{Ci:()=>G,DU:()=>ce,Fz:()=>de,LX:()=>ne,MB:()=>re,Rk:()=>_,Z7:()=>W,wX:()=>ae,xQ:()=>j,xs:()=>fe});var t=e(82897),n=e.n(t),l=e(49922),s=e(5916),i=e(37932),f=e(659),c=e(82002),o=e(19349),m=e(3153),r=e(60499),u=e(77582),d=e(29930),g=e(28630),p=e(91162),E=e(58155),h=e(22323),a=e(82253),v=e(50678),x=e(15546),y=e(19248),C=e(85972),P=e(96188),D=e(10672),M=e(92624),b=e(7240),R=e(87095),B=e(92990),w=e(30286),A=e(6942);const I=(pe,Ie)=>(We,Je)=>{let He=0;const Ae=Ie.templating.list;for(let _e=0;_e<Ae.length;_e++){const Se=F(Ae[_e]);Se.rootStateKey=pe,h.z.getIfExists(Se.type)&&We((0,b.mb)(pe,(0,B.VN)((0,M.Y6)(Se,{global:!1,index:He++,model:Se}))))}(0,E.J)().updateTimeRange((0,o.$t)().timeRange());const et=(0,R.gt)(pe,Je());for(const _e of et)We((0,b.mb)(pe,(0,B.Mn)((0,M.Y6)(_e))))};function F(pe){if(!(0,x.eL)(pe))return pe;let Ie=!1;for(const We of pe.options)if(We.selected=!1,Array.isArray(pe.current.value))for(const Je of pe.current.value)We.value===Je&&(We.selected=Ie=!0);else We.value===pe.current.value&&(We.selected=Ie=!0);return!Ie&&pe.options.length&&(pe.options[0].selected=!0),pe}const K=(pe,Ie)=>We=>{const Je={...D.Eg,id:"__dashboard",name:"__dashboard",type:"system",index:-3,skipUrlSync:!0,hide:D.bU.hideVariable,current:{value:{name:Ie.title,uid:Ie.uid,toString:()=>Ie.title}}};We((0,b.mb)(pe,(0,B.VN)((0,M.Y6)(Je,{global:Je.global,index:Je.index,model:Je}))));const He={...D.Eg,id:"__org",name:"__org",type:"system",index:-2,skipUrlSync:!0,hide:D.bU.hideVariable,current:{value:{name:c.Vt.user.orgName,id:c.Vt.user.orgId,toString:()=>c.Vt.user.orgId.toString()}}};We((0,b.mb)(pe,(0,B.VN)((0,M.Y6)(He,{global:He.global,index:He.index,model:He}))));const Ae={...D.Eg,id:"__user",name:"__user",type:"system",index:-1,skipUrlSync:!0,hide:D.bU.hideVariable,current:{value:{login:c.Vt.user.login,id:c.Vt.user.id,email:c.Vt.user.email,toString:()=>c.Vt.user.id.toString()}}};We((0,b.mb)(pe,(0,B.VN)((0,M.Y6)(Ae,{global:Ae.global,index:Ae.index,model:Ae}))))},W=(pe,Ie)=>(We,Je)=>{const{rootStateKey:He}=pe,Ae=(0,R.E0)(pe,Je());if(!(0,x.U4)(Ae))return;const et=(0,P.x)(Ae.current,Ie);We((0,b.mb)(He,(0,B.Pl)((0,M.Y6)(pe,{propName:"multi",propValue:Ie})))),We((0,b.mb)(He,(0,B.Pl)((0,M.Y6)(pe,{propName:"current",propValue:et}))))},U=async(pe,Ie)=>{if(!pe.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${pe.id}`);if(N(pe,Ie))throw new Error("Circular dependency in dashboard variables detected. Dashboard may not work as expected.");const We=S(pe,Ie);Y(pe.rootStateKey,We,Ie)&&await new Promise(Je=>{const He=m.h.subscribe(()=>{if(!pe.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${pe.id}`);Y(pe.rootStateKey,We,m.h.getState())||(He(),Je())})})},N=(pe,Ie,We=new Set)=>We.has(pe.id)?!0:(We=new Set([...We,pe.id]),S(pe,Ie).some(Je=>N(Je,Ie,We))),S=(pe,Ie)=>{if(!pe.rootStateKey)return[];const We=[];for(const Je of(0,R.gt)(pe.rootStateKey,Ie))pe!==Je&&h.z.getIfExists(pe.type)&&h.z.get(pe.type).dependsOn(pe,Je)&&We.push(Je);return We},Y=(pe,Ie,We)=>{if(Ie.length===0)return!1;const Je=(0,R.gt)(pe,We);return Ie.filter(Ae=>Je.some(et=>et.id===Ae.id&&(et.state===l.Gu.NotStarted||et.state===l.Gu.Loading))).length>0},Q=(pe,Ie)=>async(We,Je)=>{const He=(0,R.E0)(pe,Je());await U(He,Je());const Ae=Ie[a.IG+He.name];if(Ae!==void 0){const et=(0,M.Hi)(Ae);await h.z.get(He.type).setValueFromUrl(He,et);return}if(He.hasOwnProperty("refresh")){const et=He;if(et.refresh===D.Bd.onDashboardLoad||et.refresh===D.Bd.onTimeRangeChanged){await We(_((0,M.yQ)(et)));return}}We(Ve(pe))},z=pe=>async(Ie,We)=>{const Je=i.E1.getSearchObject(),He=(0,R.gt)(pe,We()).map(async Ae=>await Ie(Q((0,M.yQ)(Ae),Je)));await Promise.all(He)},G=(pe,Ie)=>async(We,Je)=>{const He=(0,M.Hi)(Ie),Ae=(0,R.E0)(pe,Je());(0,M.iD)(Ae)!==D.Bd.never&&await We(_((0,M.yQ)(Ae)));const et=(0,R.E0)((0,M.yQ)(Ae),Je());if(!(0,x.eL)(et))return;if(!et)throw new Error(`Couldn't find variable with name: ${Ae.name}`);let _e=et.options.find(Se=>Se.text===He||Se.value===He);if(!_e&&(0,x.U4)(et)&&et.allValue&&He===et.allValue&&(_e={text:a.xk,value:a.r2,selected:!1}),!_e){let Se=He;const Fe=He;Array.isArray(He)&&(Se=He.reduce((Xe,Qe)=>{const ct=et.options.find(ht=>ht.value===Qe);return ct?[].concat(Xe,[ct.text]):[].concat(Xe,[Qe])},[])),_e={text:Se,value:Fe,selected:!1}}(0,x.U4)(et)&&(_e=(0,P.x)({text:(0,t.castArray)(_e.text),value:(0,t.castArray)(_e.value),selected:!1},et.multi)),await h.z.get(Ae.type).setValue(et,_e)},k=pe=>{let Ie,We,Je,He;const Ae=[];for(Ie=0;Ie<pe.options.length;Ie++)if(He={...pe.options[Ie]},He.selected=!1,Array.isArray(pe.current.value))for(We=0;We<pe.current.value.length;We++)Je=pe.current.value[We],He.value===Je&&(He.selected=!0,Ae.push(He));else He.value===pe.current.value&&(He.selected=!0,Ae.push(He));return Ae},j=(pe,Ie)=>(We,Je)=>{const He=(0,R.E0)(pe,Je());if(!(0,x.eL)(He))return Promise.resolve();const Ae=He.current||{},et=h.z.get(He.type).setValue;if(Array.isArray(Ae.value)){const Fe=k(He);if(Fe.length===0){const Qe=He.options[0];return et(He,Qe)}const Xe={value:Fe.map(Qe=>Qe.value),text:Fe.map(Qe=>Qe.text),selected:!0};return et(He,Xe)}let _e=null;const Se=(0,M.Tt)(He);if(_e=He.options?.find(Fe=>Fe.text===Se),_e||Ie&&(_e=He.options?.find(Fe=>Fe.text===Ie),_e))return et(He,_e);if(He.options){const Fe=He.options[0];if(Fe)return et(He,Fe)}return Promise.resolve()},de=(pe,Ie,We)=>async Je=>{const{rootStateKey:He}=pe;return Je((0,b.mb)(He,(0,B.Q8)((0,M.Y6)(pe,{option:Ie})))),await Je(re(pe,We))},ge=pe=>{const Ie=new g.kJ;return pe.forEach(We=>{Ie.createNode(We.name)}),pe.forEach(We=>{pe.forEach(Je=>{We!==Je&&h.z.get(We.type).dependsOn(We,Je)&&Ie.link(We.name,Je.name)})}),Ie},re=(pe,Ie,We=u.h$)=>async(Je,He)=>{const Ae=He(),{rootStateKey:et}=pe,_e=(0,R.E0)(pe,Ae);if((0,R.AE)(et,Ae).transaction.status===D.LN.Fetching)return(0,M.iD)(_e)===D.Bd.never&&(await Je(it((0,M.yQ)(_e))),Je(Ve(pe))),Promise.resolve();const Se=(0,R.gt)(et,Ae),Fe=ge(Se),Xe=Ae.dashboard?.getModel()?.panels??[],Qe=(0,y.dH)(Xe),ct=(0,x.Kn)(_e)?{refreshAll:!0,panelIds:[]}:{refreshAll:!1,panelIds:Array.from((0,y.PQ)([_e.id],Fe,Qe))},ht=Fe.getNode(_e.name);let ft=[];return ht&&(ft=ht.getOptimizedInputEdges().map(Re=>{const nt=Se.find(le=>le.name===Re.inputNode?.name);return nt?Je(_((0,M.yQ)(nt))):Promise.resolve()})),Promise.all(ft).then(()=>{Ie&&(We.publish(new D.x9(ct)),i.E1.partial(ee(et,He)))})},ce=(pe,Ie,We={templateSrv:(0,E.J)(),events:u.h$})=>async(Je,He)=>{We.templateSrv.updateTimeRange(Ie);const Ae=(0,R.gt)(pe,He()).filter(Se=>Se.hasOwnProperty("refresh")&&Se.hasOwnProperty("options")?Se.refresh===D.Bd.onTimeRangeChanged:!1),et=Ae.map(Se=>Se.id),_e=Ae.map(Se=>Je(ie((0,M.yQ)(Se))));try{await Promise.all(_e),We.events.publish(new D.eq({variableIds:et}))}catch(Se){console.error(Se),Je((0,f.$l)(ve("Template variable service failed",Se)))}},ie=pe=>async(Ie,We)=>{const Je=(0,R.E0)(pe,We());if(!(0,x.eL)(Je))return;const He=Je.options.slice();await Ie(_((0,M.yQ)(Je),!0));const Ae=(0,R.E0)(pe,We());if(!(0,x.eL)(Ae))return;const et=Ae.options;JSON.stringify(He)!==JSON.stringify(et)&&We().dashboard.getModel()?.templateVariableValueUpdated()},fe=(pe,Ie,We=u.h$)=>async(Je,He)=>{const Ae=[],et=He().dashboard.getModel(),_e=(0,R.gt)(pe,He());for(const ct of _e){const ht=a.IG+ct.name;if(!Ie.hasOwnProperty(ht)||!Ce(ct,Ie[ht].value))continue;let ft=Ie[ht].value;if(Ie[ht].removed){const nt=et?.templating.list.find(le=>le.name===ct.name);nt&&(0,x.Kr)(nt)&&(ft=nt.current.value),nt&&(0,x.VC)(nt)&&(ft=nt.query)}const Re=h.z.get(ct.type).setValueFromUrl(ct,ft);Ae.push(Re)}const Se=_e.filter(ct=>{const ht=a.IG+ct.name;return Ie.hasOwnProperty(ht)&&Ce(ct,Ie[ht].value)&&!(0,x.Kn)(ct)}),Fe=ge(_e),Xe=(0,y.dH)(et?.panels??[]),Qe=(0,y.PQ)(Se.map(ct=>ct.id),Fe,Xe);Ae.length&&(await Promise.all(Ae),We.publish(new D.Wy({refreshAll:Qe.size===0,panelIds:Array.from(Qe)})))};function Ce(pe,Ie){const We=h.z.get(pe.type).getValueForUrl(pe);let Je=(0,M.Hi)(Ie);return Array.isArray(We)&&!Array.isArray(Je)&&(Je=[Je]),!(0,t.isEqual)(We,Je)}const ee=(pe,Ie)=>{const We=i.E1.getSearchObject(),Je=Object.keys(We).filter(He=>He.indexOf(a.IG)===-1).reduce((He,Ae)=>(He[Ae]=We[Ae],He),{});for(const He of(0,R.gt)(pe,Ie())){if(He.skipUrlSync)continue;const Ae=h.z.get(He.type);Je[a.IG+He.name]=Ae.getValueForUrl(He)}return Je},ne=(pe,Ie)=>async(We,Je)=>{try{const He=(0,M.mn)(pe),Ae=Je(),et=(0,R.cp)(Ae);et&&(0,R.AE)(et,Ae).transaction.status===D.LN.Fetching&&We(ae(et)),We((0,b.mb)(He,(0,w.Z9)({uid:He}))),We(K(He,Ie)),We(I(He,Ie)),We(X(He)),await We(z(He)),We((0,b.mb)(He,(0,w.iv)({uid:He})))}catch(He){We((0,f.$l)(ve("Templating init failed",He))),console.error(He)}};function X(pe,Ie=p.ak){return(We,Je)=>{const He=(0,R.gt)(pe,Je());for(const Ae of He){if(!(0,x.Kn)(Ae)&&!(0,x.Xh)(Ae))continue;const{datasource:et}=Ae;if((0,s.cv)(et))continue;const _e=Ie().getInstanceSettings(et),Se=_e?(0,s.iU)(_e):{uid:et};We((0,b.mb)(pe,(0,B.Pl)((0,M.Y6)(Ae,{propName:"datasource",propValue:Se}))))}}}const te=pe=>Ie=>{Ie((0,b.mb)(pe,(0,A.S)())),Ie((0,b.mb)(pe,(0,v.QR)())),Ie((0,b.mb)(pe,(0,C.XJ)())),Ie((0,b.mb)(pe,(0,w.p3)()))},ae=(pe,Ie={getBackendSrv:d.i})=>We=>{Ie.getBackendSrv().cancelAllInFlightRequests(),We(te(pe))},_=(pe,Ie=!1)=>async(We,Je)=>{const{rootStateKey:He}=pe;try{if(!(0,M.A3)(He,Je()))return;const Ae=(0,R.E0)(pe,Je());We((0,b.mb)(He,(0,B.$M)((0,M.Y6)(Ae)))),await We(it((0,M.yQ)(Ae))),await h.z.get(Ae.type).updateOptions(Ae),We(Ve(pe))}catch(Ae){if(We((0,b.mb)(He,(0,B.Le)((0,M.Y6)(pe,{error:Ae})))),Ie||(console.error(Ae),We((0,f.$l)(ve("Error updating options:",Ae,pe)))),Ie)throw Ae}},ve=(pe,Ie,We)=>(0,r.t_)(`${We?`Templating [${We.id}]`:"Templating"}`,`${pe} ${Ie.message}`),Ve=pe=>(Ie,We)=>{const{rootStateKey:Je}=pe;if(!(0,M.A3)(Je,We()))return;const He=(0,R.E0)(pe,We());He.state!==l.Gu.Done&&Ie((0,b.mb)(pe.rootStateKey,(0,B.qQ)((0,M.Y6)(He))))};function it(pe,Ie=p.ak){return async function(We,Je){const{id:He,rootStateKey:Ae}=pe;if(!(0,M.A3)(Ae,Je()))return;const et=(0,R.E0)(pe,Je());if(et.type==="query")try{const _e=await Ie().get(et.datasource??"");if((0,x.R)(_e)||!(0,x.Ju)(_e)||rt(et.query))return;const Se={refId:`${_e.name}-${He}-Variable-Query`,query:et.query};We((0,b.mb)(Ae,(0,B.Pl)((0,M.Y6)(pe,{propName:"query",propValue:Se}))))}catch(_e){We((0,f.$l)(ve("Failed to upgrade legacy queries",_e))),console.error(_e)}}}function rt(pe){return pe?pe.hasOwnProperty("refId")&&typeof pe.refId=="string":!1}},7240:(Z,O,e)=>{"use strict";e.d(O,{ZP:()=>m,mb:()=>f,qM:()=>s});var t=e(92624),n=e(51511),l=e(30286);const s={keys:{}},i=r=>({type:`templating/keyed/${r.action.type.replace(/^templating\//,"")}`,payload:r});function f(r,u){const d=(0,t.mn)(r);return i({key:d,action:u})}const c=r=>typeof r.type=="string"&&r.type.startsWith("templating/keyed")&&"payload"in r&&typeof r.payload.key=="string";function o(r=s,u){if(c(u)){const{key:d,action:g}=u.payload,p=(0,t.mn)(d),E=l.Z9.match(g)?p:r.lastKey,h=(0,n.Q)(),a=r.keys[p],v=h(a,g);return{...r,lastKey:E,keys:{...r.keys,[p]:v}}}return r}const m={templating:o}},51511:(Z,O,e)=>{"use strict";e.d(O,{L:()=>r,Q:()=>m});var t=e(83829),n=e(50678),l=e(37737),s=e(85972),i=e(30286),f=e(63510),c=e(6942);let o;function m(){return o||(o=(0,t.combineReducers)({editor:n.gl,variables:c.L,optionsPicker:s.cv,transaction:i.vw,inspect:l.iV})),o}function r(){return{editor:n.PF,variables:f.s,optionsPicker:s.yy,transaction:i.xO,inspect:l.Kf}}},87095:(Z,O,e)=>{"use strict";e.d(O,{AE:()=>c,E0:()=>i,Eo:()=>d,IV:()=>r,Q4:()=>a,QT:()=>g,S_:()=>h,_K:()=>x,cp:()=>E,gt:()=>o,ir:()=>y,ng:()=>v,xD:()=>u});var t=e(58635),n=e(3153),l=e(92624),s=e(51511);function i(C,P=(0,n.y0)(),D=!0){const{id:M,rootStateKey:b}=C,B=c(b,P).variables[M];if(!B){if(D)throw new Error(`Couldn't find variable with id:${M}`);return}return B}function f(C,P,D=(0,n.y0)()){return Object.values(c(P,D).variables).filter(C).sort((M,b)=>M.index-b.index)}function c(C,P=(0,n.y0)()){return P.templating.keys[(0,l.mn)(C)]??(0,s.L)()}function o(C,P=(0,n.y0)()){return f(m,C,P)}function m(C){return C.type!=="system"}const r=(0,t.Z)((C,P)=>o(C,(0,n.y0)())),u=(C,P)=>o(C,P);function d(C,P=(0,n.y0)()){return g(Object.values(c(C,P).variables))}function g(C){const P=C.filter(m).sort((D,M)=>D.index-M.index);return P.length>0?P[P.length-1].index+1:0}function p(C,P=getState()){return c(C,P).transaction.isDirty}function E(C=(0,n.y0)()){return C.templating?.lastKey}function h(C=(0,n.y0)()){if(!C.templating?.lastKey)throw new Error("Accessing lastKey without initializing it variables");return C.templating.lastKey}function a(C,P=(0,n.y0)()){const D=E(P);return D?f(C,D,P):[]}function v(C=(0,n.y0)()){const P=E(C);return P?o(P,C):[]}function x(C,P=(0,n.y0)()){const D=E(P);if(D)return i({id:C,rootStateKey:D,type:"query"},P,!1)}function y(C,P){return C[P]}},92990:(Z,O,e)=>{"use strict";e.d(O,{$M:()=>C,Be:()=>x,Le:()=>D,Mn:()=>y,Pl:()=>E,Q8:()=>v,VN:()=>p,Y9:()=>a,b5:()=>d,gE:()=>h,mZ:()=>g,qQ:()=>P});var t=e(62992),n=e(82897),l=e.n(n),s=e(49922),i=e(22323),f=e(50678),c=e(15546),o=e(92624),m=e(87095),r=e(63510);const u=(0,t.oM)({name:"templating/shared",initialState:r.s,reducers:{addVariable:(M,b)=>{const R=b.payload.id??b.payload.data.model.name,B=i.z.get(b.payload.type),w=(0,n.cloneDeep)(B.initialState),A=B.beforeAdding?B.beforeAdding(b.payload.data.model):(0,n.cloneDeep)(b.payload.data.model),I={...(0,n.defaults)({},A,w),id:R,index:b.payload.data.index,global:b.payload.data.global};M[R]=I},variableStateNotStarted:(M,b)=>{const R=(0,m.ir)(M,b.payload.id);R.state=s.Gu.NotStarted,R.error=null},variableStateFetching:(M,b)=>{const R=(0,m.ir)(M,b.payload.id);R.state=s.Gu.Loading,R.error=null},variableStateCompleted:(M,b)=>{const R=(0,m.ir)(M,b.payload.id);R&&(R.state=s.Gu.Done,R.error=null)},variableStateFailed:(M,b)=>{const R=(0,m.ir)(M,b.payload.id);R&&(R.state=s.Gu.Error,R.error=b.payload.data.error)},removeVariable:(M,b)=>{if(delete M[b.payload.id],!b.payload.data.reIndex)return;const R=Object.values(M).sort((B,w)=>B.index-w.index);for(let B=0;B<R.length;B++)R[B].index=B},duplicateVariable:(M,b)=>{const R=(0,n.cloneDeep)(M[b.payload.id]),B=`copy_of_${R.name}`,w=b.payload.data?.newId??B,A=(0,m.QT)(Object.values(M));M[w]={...(0,n.cloneDeep)(i.z.get(b.payload.type).initialState),...R,id:w,name:B,index:A}},changeVariableOrder:(M,b)=>{const{toIndex:R,fromIndex:B}=b.payload.data,w=Object.values(M);for(let A=0;A<w.length;A++){const I=w[A];I.index===B?I.index=R:I.index>B&&I.index<=R?I.index--:I.index<B&&I.index>=R&&I.index++}},changeVariableType:(M,b)=>{const{id:R}=b.payload,{label:B,name:w,index:A,description:I,rootStateKey:F}=M[R];M[R]={...(0,n.cloneDeep)(i.z.get(b.payload.data.newType).initialState),id:R,rootStateKey:F,label:B,name:w,index:A,description:I}},setCurrentVariableValue:(M,b)=>{if(!b.payload.data.option)return;const R=(0,m.ir)(M,b.payload.id);if(!(0,c.eL)(R))return;const{option:B}=b.payload.data,w={...B,text:(0,o.Hi)(B?.text),value:(0,o.Hi)(B?.value)};R.current=w,R.options=R.options.map(A=>{A.value=(0,o.Hi)(A.value),A.text=(0,o.Hi)(A.text);let I=!1;if(Array.isArray(w.value))for(let F=0;F<w.value.length;F++){const K=w.value[F];if(A.value===K){I=!0;break}}else A.value===w.value&&(I=!0);return A.selected=I,A})},changeVariableProp:(M,b)=>{const R=(0,m.ir)(M,b.payload.id);R[b.payload.data.propName]=b.payload.data.propValue}},extraReducers:M=>M.addCase(f.Yo,(b,R)=>{const B=(0,m.ir)(b,R.payload.id);B.name=R.payload.data.newName})}),d=u.reducer,{removeVariable:g,addVariable:p,changeVariableProp:E,changeVariableOrder:h,duplicateVariable:a,setCurrentVariableValue:v,changeVariableType:x,variableStateNotStarted:y,variableStateFetching:C,variableStateCompleted:P,variableStateFailed:D}=u.actions},30286:(Z,O,e)=>{"use strict";e.d(O,{Z9:()=>c,iv:()=>m,p3:()=>o,vw:()=>r,xO:()=>s});var t=e(62992),n=e(10672),l=e(92990);const s={uid:null,status:n.LN.NotStarted,isDirty:!1},i=(0,t.oM)({name:"templating/transaction",initialState:s,reducers:{variablesInitTransaction:(u,d)=>{u.uid=d.payload.uid,u.status=n.LN.Fetching},variablesCompleteTransaction:(u,d)=>{u.uid===d.payload.uid&&(u.status=n.LN.Completed)},variablesClearTransaction:(u,d)=>{u.uid=null,u.status=n.LN.NotStarted,u.isDirty=!1}},extraReducers:u=>u.addMatcher(f,(d,g)=>{d.status===n.LN.Completed&&(d.isDirty=!0)})});function f(u){return l.mZ.match(u)||l.VN.match(u)||l.Pl.match(u)||l.gE.match(u)||l.Y9.match(u)||l.Be.match(u)}const{variablesInitTransaction:c,variablesClearTransaction:o,variablesCompleteTransaction:m}=i.actions,r=i.reducer},63510:(Z,O,e)=>{"use strict";e.d(O,{s:()=>t});const t={}},6942:(Z,O,e)=>{"use strict";e.d(O,{L:()=>f,S:()=>i});var t=e(62992),n=e(22323),l=e(92990),s=e(63510);const i=(0,t.PH)("templating/cleanVariables"),f=(c=s.s,o)=>{if(i.match(o)){const m=Object.values(c).filter(u=>u.global);return m?m.reduce((u,d)=>(u[d.id]=d,u),{}):s.s}return o?.payload?.type&&n.z.getIfExists(o?.payload?.type)?n.z.get(o.payload.type).reducer((0,l.b5)(c,o),o):c}},10672:(Z,O,e)=>{"use strict";e.d(O,{$U:()=>t.$U,Bd:()=>t.Bd,Eg:()=>f,LN:()=>i,Wy:()=>m,bU:()=>t.bU,eq:()=>o,x9:()=>c});var t=e(22107),n=e(49922),l=e(62316),s=e(82253),i=(r=>(r.NotStarted="Not started",r.Fetching="Fetching",r.Completed="Completed",r))(i||{});const f={id:s.UY,rootStateKey:null,name:"",type:"query",global:!1,index:-1,hide:t.bU.dontHide,skipUrlSync:!1,state:n.Gu.NotStarted,error:null,description:null};class c extends l.R{}c.type="variables-changed";class o extends l.R{}o.type="variables-time-range-process-done";class m extends l.R{}m.type="variables-changed-in-url"},92624:(Z,O,e)=>{"use strict";e.d(O,{A3:()=>B,AQ:()=>C,HY:()=>a,Hi:()=>R,J7:()=>u,N9:()=>x,QI:()=>h,Tt:()=>v,Y6:()=>I,_6:()=>E,a9:()=>d,bf:()=>p,bi:()=>D,gR:()=>y,iD:()=>P,mn:()=>w,xT:()=>b,yQ:()=>A});var t=e(82897),n=e.n(t),l=e(20308),s=e(55935),i=e(3153),f=e(19349),c=e(22323),o=e(82253),m=e(87095),r=e(10672);const u=/\$(\w+)|\[\[(\w+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::([^\}]+))?}/g,d=F=>(u.lastIndex=0,u.exec(F)),g="__searchFilter",p=F=>F&&typeof F=="string"?F.indexOf(g)!==-1:!1,E=F=>{const{query:K,wildcardChar:W}=F;if(!p(K))return{};let{options:U}=F;return U=U||{searchFilter:""},{__searchFilter:{value:U.searchFilter?`${U.searchFilter}${W}`:`${W}`,text:""}}};function h(...F){const K=F[F.length-1];F[0]=typeof F[0]=="string"?F[0]:(0,s.Xh)(F[0]);const U=F.slice(0,-1).join(" ").match(u);return!!(U!==null?U.find(S=>{const Y=d(S);return Y!==null&&Y.indexOf(K)>-1}):!1)}const a=F=>{if(!F||!F.current)return!1;if(F.current.value){const K=Array.isArray(F.current.value);if(K&&F.current.value.length&&F.current.value[0]===o.r2||!K&&F.current.value===o.r2)return!0}if(F.current.text){const K=Array.isArray(F.current.text);if(K&&F.current.text.length&&F.current.text[0]===o.xk||!K&&F.current.text===o.xk)return!0}return!1},v=F=>!F||!F.current||!F.current.text?"":Array.isArray(F.current.text)?F.current.text.toString():typeof F.current.text!="string"?"":F.current.text,x=F=>!F||!F.current||F.current.value===void 0||F.current.value===null?null:Array.isArray(F.current.value)?F.current.value.toString():typeof F.current.value!="string"?null:F.current.value;function y(F,K=(0,l.J)()){return!F||!F.regex?"":K.replace(F.regex,{},"regex")}function C(F,K,W=(0,f.$t)()){const U={range:void 0,variable:F,searchFilter:K};return(F.refresh===r.Bd.onTimeRangeChanged||F.refresh===r.Bd.onDashboardLoad)&&(U.range=W.timeRange()),U}function P(F){if(!F||!F.hasOwnProperty("refresh"))return r.Bd.never;const K=F;return K.refresh!==r.Bd.onTimeRangeChanged&&K.refresh!==r.Bd.onDashboardLoad&&K.refresh!==r.Bd.never?r.Bd.never:K.refresh}function D(){return c.z.list().filter(F=>F.id!=="system").map(({id:F,name:K,description:W})=>({label:K,value:F,description:W}))}function M(F){return(0,t.isArray)(F)&&(F.length===0?F=void 0:F.length===1&&(F=F[0])),F}function b(F,K){let W=0;const U={};for(const N in F){if(!N.startsWith(o.IG))continue;let S=M(K[N]),Y=M(F[N]);(0,t.isEqual)(Y,S)||(U[N]={value:F[N]},W++)}for(const N in K){if(!N.startsWith(o.IG))continue;const S=K[N];(0,t.isArray)(S)&&S.length===0||F.hasOwnProperty(N)||(U[N]={value:"",removed:!0},W++)}return W?U:void 0}function R(F){return Array.isArray(F)?F.map(String):F==null?"":typeof F=="number"?F.toString(10):typeof F=="string"?F:typeof F=="boolean"?F.toString():""}function B(F,K=(0,i.y0)()){return(0,m.AE)(F,K).transaction.status!==r.LN.NotStarted}function w(F){return String(F)}const A=F=>{if(!F.rootStateKey)throw new Error(`rootStateKey not found for variable with id:${F.id}`);return{type:F.type,id:F.id,rootStateKey:F.rootStateKey}};function I(F,K){return{type:F.type,id:F.id,data:K}}},16749:(Z,O,e)=>{"use strict";var t=e(32478),n=e(88656),l=e(4547),s=e(44032),i=e(63073),f=e(3574),c=e(24259),o=e(91162),m=e(87449),r=e(9398),u=e(134),d=e(30014),g=e(99714),p=e(82557),E=e(82897),h=e.n(E),a=e(68404),v=e(97394),x=e(46519),y=e(99919),C=e(35363),P=e(20256),D=e(87442),M=e(83383),b=e(54899),R=e(47458),B=e(37932),w=e(82378),A=e(36535),I=e(19920),F=e(86647),K=e(54665),W=e(5494),U=e(87670),N=e(98825),S=e(87221),Y=e(90771),Q=e(47694),z=e(79378),G=e(35645),k=e(9892),j=e(14582),de=e(3249),ge=e(85854),re=e(89890),ce=e(17130),ie=e(74940),fe=e(86789),Ce=e(2594),ee=e(31403),ne=e(7804),X=e(53217),te=e(64140),ae=e(46967);function _(T,L){switch(L.type){case j.fS.boolean:return(0,E.isUndefined)(T)?!1:ve(T);case j.fS.number:return isNaN(T)?0:parseFloat(T);case j.fS.string:return T?String(T):"";default:return T}}const ve=T=>(0,E.isString)(T)?!(T[0]==="F"||T[0]==="f"||T[0]==="0"):!!T;function Ve(T){return function({options:H,onChange:J,field:oe}){const{validator:ue,converter:ye=_}=T,{value:ze}=H,[qe,mt]=(0,a.useState)(!ue(ze)),Pt=(0,a.useCallback)(Ft=>{mt(!ue(Ft.currentTarget.value))},[mt,ue]),Ot=(0,a.useCallback)(Ft=>{if(qe)return;const{value:zt}=Ft.currentTarget;J({...H,value:ye(zt,oe)})},[H,J,qe,oe,ye]);return a.createElement(ae.I,{className:"flex-grow-1",invalid:qe,defaultValue:String(H.value),placeholder:"Value",onChange:Pt,onBlur:Ot})}}const it=()=>[{name:"Is greater",id:ge.mE.greater,component:Ve({validator:T=>!isNaN(T)})},{name:"Is greater or equal",id:ge.mE.greaterOrEqual,component:Ve({validator:T=>!isNaN(T)})},{name:"Is lower",id:ge.mE.lower,component:Ve({validator:T=>!isNaN(T)})},{name:"Is lower or equal",id:ge.mE.lowerOrEqual,component:Ve({validator:T=>!isNaN(T)})},{name:"Is equal",id:ge.mE.equal,component:Ve({validator:()=>!0})},{name:"Is not equal",id:ge.mE.notEqual,component:Ve({validator:()=>!0})},{name:"Regex",id:ge.mE.regex,component:Ve({validator:()=>!0,converter:T=>String(T)})}],rt=()=>null,pe=()=>[{name:"Is null",id:ge.mE.isNull,component:rt},{name:"Is not null",id:ge.mE.isNotNull,component:rt}];function Ie(T){return function({options:H,onChange:J,field:oe}){const{validator:ue}=T,[ye,ze]=(0,a.useState)({from:!ue(H.from),to:!ue(H.to)}),qe=(0,a.useCallback)((Pt,Ot)=>{ze({...ye,[Ot]:!ue(Pt.currentTarget.value)})},[ze,ue,ye]),mt=(0,a.useCallback)((Pt,Ot)=>{if(ye[Ot])return;const{value:Ft}=Pt.currentTarget;J({...H,[Ot]:_(Ft,oe)})},[H,J,ye,oe]);return a.createElement(a.Fragment,null,a.createElement(ae.I,{className:"flex-grow-1 gf-form-spacing",invalid:ye.from,defaultValue:String(H.from),placeholder:"From",onChange:Pt=>qe(Pt,"from"),onBlur:Pt=>mt(Pt,"from")}),a.createElement("div",{className:"gf-form-label"},"and"),a.createElement(ae.I,{className:"flex-grow-1",invalid:ye.to,defaultValue:String(H.to),placeholder:"To",onChange:Pt=>qe(Pt,"to"),onBlur:Pt=>mt(Pt,"to")}))}}const We=()=>[{name:"Is between",id:ge.mE.between,component:Ie({validator:T=>!isNaN(T)})}],Je=new te.B(()=>[...it(),...pe(),...We()]),He=T=>{const{onDelete:L,onChange:H,filter:J,fieldsInfo:oe}=T,{fieldsAsOptions:ue,fieldByDisplayName:ye}=oe,ze=_e(J,ue)??"",qe=ye[ze],mt=qe?Ae(qe):[],Pt=et(J,mt),Ot=Je.getIfExists(Pt),Ft=(0,a.useCallback)(hn=>{hn?.value&&H({...J,fieldName:hn.value})},[H,J]),zt=(0,a.useCallback)(hn=>{if(!hn?.value)return;const In=hn.value,Zn=de.U8.get(In).getDefaultOptions(qe);H({...J,config:{id:In,options:Zn}})},[H,J,qe]),Jt=(0,a.useCallback)(hn=>{H({...J,config:{...J.config,options:hn}})},[H,J]);return!qe||!Ot||!Ot.component?null:a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label width-7"},"Field"),a.createElement(X.Ph,{className:"min-width-15 max-width-24",placeholder:"Field Name",options:ue,value:J.fieldName,onChange:Ft})),a.createElement("div",{className:"gf-form gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Match"),a.createElement(X.Ph,{className:"width-12",placeholder:"Select test",options:mt,value:Pt,onChange:zt})),a.createElement("div",{className:"gf-form gf-form--grow gf-form-spacing"},a.createElement("div",{className:"gf-form-label"},"Value"),a.createElement(Ot.component,{field:qe,options:J.config.options??{},onChange:Jt})),a.createElement("div",{className:"gf-form"},a.createElement(ee.zx,{icon:"times",onClick:L,variant:"secondary"})))},Ae=T=>{const L=[];for(const H of de.U8.list())!H.isApplicable(T)||!Je.getIfExists(H.id)||L.push({value:H.id,label:H.name,description:H.description});return L},et=(T,L)=>{const H=L.find(J=>J.value===T.config.id);if(H&&H.value)return H.value;if(L[0]?.value)return L[0]?.value},_e=(T,L)=>{const H=L.find(J=>J.value===T.fieldName);if(H&&H.value)return H.value;if(L[0]?.value)return L[0]?.value},Se=[{label:"Include",value:fe.PQ.include},{label:"Exclude",value:fe.PQ.exclude}],Fe=[{label:"Match all",value:fe.ER.all},{label:"Match any",value:fe.ER.any}],Xe=T=>{const{input:L,options:H,onChange:J}=T,oe=ct(),ue=ht(L),ye=(0,a.useCallback)(()=>{const Ot=L[0],Ft=Ot.fields.find(hn=>hn.type!==j.fS.time);if(!Ft)return;const zt=(0,E.cloneDeep)(H.filters),Jt=de.U8.get(ge.mE.greater);zt.push({fieldName:(0,re.C)(Ft,Ot,L),config:{id:Jt.id,options:Jt.getDefaultOptions(Ft)}}),J({...H,filters:zt})},[J,H,L]),ze=(0,a.useCallback)(Ot=>{let Ft=(0,E.cloneDeep)(H.filters);Ft.splice(Ot,1),J({...H,filters:Ft})},[H,J]),qe=(0,a.useCallback)((Ot,Ft)=>{let zt=(0,E.cloneDeep)(H.filters);zt[Ft]=Ot,J({...H,filters:zt})},[H,J]),mt=(0,a.useCallback)(Ot=>{J({...H,type:Ot??fe.PQ.include})},[H,J]),Pt=(0,a.useCallback)(Ot=>{J({...H,match:Ot??fe.ER.all})},[H,J]);return a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Filter type"),a.createElement("div",{className:"width-15"},a.createElement(Ce.S,{options:Se,value:H.type,onChange:mt,fullWidth:!0}))),a.createElement("div",{className:"gf-form gf-form-inline"},a.createElement("div",{className:"gf-form-label width-8"},"Conditions"),a.createElement("div",{className:"width-15"},a.createElement(Ce.S,{options:Fe,value:H.match,onChange:Pt,fullWidth:!0}))),a.createElement("div",{className:oe.conditions},H.filters.map((Ot,Ft)=>a.createElement(He,{key:Ft,filter:Ot,fieldsInfo:ue,onChange:zt=>qe(zt,Ft),onDelete:()=>ze(Ft)})),a.createElement("div",{className:"gf-form"},a.createElement(ee.zx,{icon:"plus",size:"sm",onClick:ye,variant:"secondary"},"Add condition"))))},Qe={id:ce.W.filterByValue,editor:Xe,transformation:ie.Y.filterByValueTransformer,name:ie.Y.filterByValueTransformer.name,description:"Removes rows of the query results using user-defined filters. This is useful if you can not filter your data in the data source."},ct=(0,ne.B)(()=>({conditions:k.css`
    padding-left: 16px;
  `})),ht=T=>(0,a.useMemo)(()=>{const L={fieldsAsOptions:[],fieldByDisplayName:{}};return Array.isArray(T)?T.reduce((H,J)=>J.fields.reduce((oe,ue)=>{const ye=(0,re.C)(ue,J,T);return oe.fieldByDisplayName[ye]||(oe.fieldsAsOptions.push({label:ye,value:ye,type:ue.type}),oe.fieldByDisplayName[ye]=ue),oe},H),L):L},[T]);var ft=e(24699),Re=e(91171),nt=e(91752),le=e(57054),Pe=e(13505);function Oe(T,L){const H={data:T.input,options:T.options},J=new nt.j({id:"root",title:"root"}),oe=ye=>{if(ye?.length){const ze=ye[0];let qe=J.categories.find(mt=>mt.props.id===ze);return qe||(qe=new nt.j({id:ze,title:ze}),J.categories.push(qe)),qe}return J},ue={getValue:ye=>(0,E.get)(T.options,ye),onChange:(ye,ze)=>{T.onChange((0,Pe.hs)(T.options,ye,ze))}};return(0,le.HZ)(L,ue,oe,H),J}function Le(T){const L={data:[],options:{}},H={},J=new Re.rt;T(J,L);for(const oe of J.getItems())oe.defaultValue!=null&&(0,E.set)(H,oe.path,oe.defaultValue);return H}var Ye=e(90024),be=e(77564);const Te=(T,L)=>{const H=L.options??{};(0,Ye.J)("",T,H)},me=T=>{(0,a.useEffect)(()=>{if(!T.options.xBuckets?.mode){const H=Le(Te);T.onChange({...H,...T.options}),console.log("geometry useEffect",H)}});const L=Oe(T,Te);return a.createElement("div",null,a.createElement("div",null,L.items.map(H=>H.render())))},he={id:be.Oy.id,editor:me,transformation:be.Oy,name:be.Oy.name,description:be.Oy.description,state:ft.BV.alpha};var De=e(72648),$e=e(37676),ke=e(11543),tt=e(81764),Ge=e(21760),dt=e(71294),pt=e(66926),Ke=e(63279),je=e(24177),ot=e(26031);function at(T,L,H){const J={},oe={};for(const ue of T.fields){const ye=(0,re.C)(ue,T),qe=H.index[ye].handler;if(!qe)continue;const mt=ue.values.get(L);if(mt==null)continue;const Pt=qe.processor(mt,J,oe);Pt!=null&&(J[qe.targetProperty??qe.key]=Pt)}return oe.mappingValues&&(J.mappings=wt(oe)),J}var xt=(T=>(T.Name="field.name",T.Value="field.value",T.Label="field.label",T.Ignore="__ignore",T))(xt||{});const Dt=[{key:"field.name",name:"Field name",processor:()=>{}},{key:"field.value",name:"Field value",processor:()=>{}},{key:"field.label",name:"Field label",processor:()=>{}},{key:"__ignore",name:"Ignore",processor:()=>{}},{key:"max",processor:Dn},{key:"min",processor:Dn},{key:"unit",processor:T=>T.toString()},{key:"decimals",processor:Dn},{key:"displayName",name:"Display name",processor:T=>T.toString()},{key:"color",processor:T=>({fixedColor:T,mode:pt.S.Fixed})},{key:"threshold1",targetProperty:"thresholds",processor:(T,L)=>{const H=(0,Ke.I)(T);if(!isNaN(H))return L.thresholds||(L.thresholds={mode:je.H.Absolute,steps:[{value:-1/0,color:"green"}]}),L.thresholds.steps.push({value:H,color:"red"}),L.thresholds}},{key:"mappings.value",name:"Value mappings / Value",targetProperty:"mappings",defaultReducer:Ge.gz.allValues,processor:(T,L,H)=>{if((0,E.isArray)(T))return H.mappingValues=T,L.mappings}},{key:"mappings.color",name:"Value mappings / Color",targetProperty:"mappings",defaultReducer:Ge.gz.allValues,processor:(T,L,H)=>{if((0,E.isArray)(T))return H.mappingColors=T,L.mappings}},{key:"mappings.text",name:"Value mappings / Display text",targetProperty:"mappings",defaultReducer:Ge.gz.allValues,processor:(T,L,H)=>{if((0,E.isArray)(T))return H.mappingTexts=T,L.mappings}}];function wt(T){const L={type:ot.H.ValueToText,options:{}};if(!T.mappingValues)return[];for(let H=0;H<T.mappingValues.length;H++){const J=T.mappingValues[H];J!=null&&(L.options[J.toString()]={color:T.mappingColors&&T.mappingColors[H],text:T.mappingTexts&&T.mappingTexts[H],index:H})}return[L]}let sn=null;function mn(){if(sn===null){sn={};for(const T of Dt)sn[T.key]=T}return sn}function Dn(T){const L=(0,Ke.I)(T);if(!isNaN(L))return L}function Rn(T,L){for(const H of L)if(T===H.fieldName)return H.handlerKey;return T.toLowerCase()}function St(T){return T?mn()[T]:null}function At(T,L,H){const J={index:{}};let oe=L.find(ye=>ye.handlerKey==="field.name"),ue=L.find(ye=>ye.handlerKey==="field.value");for(const ye of T.fields){const ze=(0,re.C)(ye,T),qe=L.find(Ot=>Ot.fieldName===ze),mt=qe?qe.handlerKey:ze.toLowerCase();let Pt=St(mt);H&&(Pt?(Pt.key==="field.name"&&(J.nameField=ye),Pt.key==="field.value"&&(J.valueField=ye)):qe||(!J.nameField&&!oe&&ye.type===j.fS.string&&(J.nameField=ye,Pt=St("field.name")),!J.valueField&&!ue&&ye.type===j.fS.number&&(J.valueField=ye,Pt=St("field.value")))),!Pt&&H&&(Pt=St("field.label")),J.index[ze]={automatic:!qe,handler:Pt,reducerId:qe?.reducerId??Pt?.defaultReducer??Ge.gz.lastNotNull}}return J}function Wt({frame:T,mappings:L,onChange:H,withReducers:J,withNameAndValue:oe}){const ue=(0,De.wW)(Xt),ye=Qt(T,L,oe),ze=Dt.map(Pt=>jt(Pt,!1)),qe=(Pt,Ot)=>{const Ft=L.findIndex(zt=>zt.fieldName===Pt.fieldName);if(Ot)if(Ft!==-1){const zt=[...L];zt.splice(Ft,1,{...L[Ft],handlerKey:Ot.value}),H(zt)}else H([...L,{fieldName:Pt.fieldName,handlerKey:Ot.value}]);else H(Ft!==-1?L.filter((zt,Jt)=>Jt!==Ft):[...L,{fieldName:Pt.fieldName,handlerKey:"__ignore"}])},mt=(Pt,Ot)=>{const Ft=L.findIndex(zt=>zt.fieldName===Pt.fieldName);if(Ft!==-1){const zt=[...L];zt.splice(Ft,1,{...L[Ft],reducerId:Ot}),H(zt)}else H([...L,{fieldName:Pt.fieldName,handlerKey:Pt.handlerKey,reducerId:Ot}])};return a.createElement("table",{className:ue.table},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Field"),a.createElement("th",null,"Use as"),J&&a.createElement("th",null,"Select"))),a.createElement("tbody",null,ye.map(Pt=>a.createElement("tr",{key:Pt.fieldName},a.createElement("td",{className:ue.labelCell},Pt.fieldName),a.createElement("td",{className:ue.selectCell,"data-testid":`${Pt.fieldName}-config-key`},a.createElement(X.Ph,{options:ze,value:Pt.configOption,placeholder:Pt.placeholder,isClearable:!0,onChange:Ot=>qe(Pt,Ot)})),J&&a.createElement("td",{"data-testid":`${Pt.fieldName}-reducer`,className:ue.selectCell},a.createElement(dt.m,{stats:[Pt.reducerId],defaultStat:Pt.reducerId,onChange:Ot=>mt(Pt,Ot[0])}))))))}function Qt(T,L,H){const J=[],oe=At(T,L??[],H);for(const ue of T.fields){const ye=(0,re.C)(ue,T),ze=oe.index[ye],qe=jt(ze.handler,ze.automatic);J.push({fieldName:ye,configOption:ze.automatic?null:qe,placeholder:ze.automatic?qe?.label:"Choose",handlerKey:ze.handler?.key??null,reducerId:ze.reducerId})}for(const ue of L)if(!J.find(ye=>ye.fieldName===ue.fieldName)){const ye=St(ue.handlerKey);J.push({fieldName:ue.fieldName,handlerKey:ue.handlerKey,configOption:jt(ye,!1),missingInFrame:!0,reducerId:ue.reducerId??Ge.gz.lastNotNull})}return Object.values(J)}function jt(T,L){if(!T)return null;let H=T.name??(0,E.capitalize)(T.key);return L&&(H=`${H} (auto)`),{label:H,value:T.key}}const Xt=T=>({table:k.css`
    margin-top: ${T.spacing(1)};

    td,
    th {
      border-right: 4px solid ${T.colors.background.primary};
      border-bottom: 4px solid ${T.colors.background.primary};
      white-space: nowrap;
    }
    th {
      font-size: ${T.typography.bodySmall.fontSize};
      line-height: ${T.spacing(4)};
      padding: ${T.spacing(0,1)};
    }
  `,labelCell:k.css`
    font-size: ${T.typography.bodySmall.fontSize};
    background: ${T.colors.background.secondary};
    padding: ${T.spacing(0,1)};
    max-width: 400px;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 140px;
  `,selectCell:k.css`
    padding: 0;
    min-width: 161px;
  `});var tn=e(9471),on=e(19695);function dn(T,L){let H=null;for(const ze of L)if(ze.refId===T.configRefId){H=ze;break}if(!H)return L;const J={fields:[],length:1},oe=At(H,T.mappings??[],!1);for(const ze of H.fields){const qe={...ze},mt=(0,re.C)(ze,H),Pt=oe.index[mt],Ot=(0,Ge.Kx)({field:ze,reducers:[Pt.reducerId]});qe.values=new on.G([Ot[Pt.reducerId]]),J.fields.push(qe)}const ue=[],ye=(0,de.sq)(T.applyTo||{id:ge.mi.numeric});for(const ze of L){if(ze===H&&L.length>1)continue;const qe={fields:[],length:ze.length};for(const mt of ze.fields)if(ye(mt,ze,L)){const Pt=at(J,0,oe);qe.fields.push({...mt,config:{...mt.config,...Pt}})}else qe.fields.push(mt);ue.push(qe)}return ue}const $t={id:ce.W.configFromData,name:"Config from query results",description:"Set unit, min, max and more from data",defaultOptions:{configRefId:"config",mappings:[]},operator:T=>L=>L.pipe((0,tn.U)(H=>dn(T,H)))};function qt({input:T,onChange:L,options:H}){const J=(0,De.wW)(nn),oe=T.map(zt=>zt.refId).filter(zt=>zt!=null).map(zt=>({label:zt,value:zt})),ue=H.configRefId||"config",ye=H.applyTo??{id:ge.mi.byType,options:"number"},ze=$e.i.get(ye.id),qe=T.find(zt=>zt.refId===ue),mt=zt=>{L({...H,configRefId:zt.value||"config"})},Pt=zt=>{L({...H,applyTo:{id:zt.value}})},Ot=zt=>{L({...H,applyTo:{id:ye.id,options:zt}})},Ft=$e.i.list().filter(zt=>!zt.excludeFromPicker).map(zt=>({label:zt.name,value:zt.id,description:zt.description}));return a.createElement(a.Fragment,null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Config query",labelWidth:20},a.createElement(X.Ph,{onChange:mt,options:oe,value:ue,width:30}))),a.createElement(ke.Z,null,a.createElement(tt._,{label:"Apply to",labelWidth:20},a.createElement(X.Ph,{onChange:Pt,options:Ft,value:ye.id,width:30}))),a.createElement(ke.Z,null,a.createElement(tt._,{label:"Apply to options",labelWidth:20,className:J.matcherOptions},a.createElement(ze.component,{matcher:ze.matcher,data:T,options:ye.options,onChange:Ot}))),a.createElement(ke.Z,null,qe&&a.createElement(Wt,{frame:qe,mappings:H.mappings,onChange:zt=>L({...H,mappings:zt}),withReducers:!0})))}const Vt={id:$t.id,editor:qt,transformation:$t,name:$t.name,description:$t.description,state:ft.BV.beta,help:`
### Use cases

This transformation allows you select one query and from it extract standard options such as
**Min**, **Max**, **Unit**, and **Thresholds** and apply them to other query results.
This enables dynamic query driven visualization configuration.

### Options

- **Config query**: Selet the query that returns the data you want to use as configuration.
- **Apply to**: Select what fields or series to apply the configuration to.
- **Apply to options**: Usually a field type or field name regex depending on what option you selected in **Apply to**.

### Field mapping table

Below the configuration listed above you will find the field table. Here all fields found in the data returned by the config query will be listed along with a **Use as** and **Select** option. This table gives you control over what field should be mapped to which config property and if there are multiple rows which value to select.

## Example

Input[0] (From query: A, name: ServerA)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 10    |
| 1626178119129 | 30    |

Input[1] (From query: B)

| Time          | Value |
| ------------- | ----- |
| 1626178119127 | 100   |
| 1626178119129 | 100   |

Output (Same as Input[0] but now with config on the Value field)

| Time          | Value (config: Max=100) |
| ------------- | ----------------------- |
| 1626178119127 | 10                      |
| 1626178119129 | 30                      |

Each row in the source data becomes a separate field. Each field now also has a maximum
configuration option set. Options such as **min**, **max**, **unit**, and **thresholds** are all part of field configuration, and if they are set like this, they will be used by the visualization instead of any options that are manually configured.
in the panel editor options pane.

## Value mappings

You can also transform a query result into value mappings. This is is a bit different because every
row in the configuration query result is used to define a single value mapping row. See the following example.

Config query result:

| Value | Text   | Color |
| ----- | ------ | ----- |
| L     | Low    | blue  |
| M     | Medium | green |
| H     | High   | red   |

In the field mapping specify:

| Field | Use as                  | Select     |
| ----- | ----------------------- | ---------- |
| Value | Value mappings / Value  | All values |
| Text  | Value mappings / Text   | All values |
| Color | Value mappings / Ciolor | All values |

Grafana will build the value mappings from you query result and apply it the the real data query results. You should see values being mapped and colored according to the config query results.
`},nn=T=>({matcherOptions:k.css`
    min-width: 404px;
  `});var un=e(59980),En=e(98082),cn=e(89984),wn=e(52081),Gn=e(41165),Nn=e(14835);const Wn=[{value:cn.ie.BinaryOperation,label:"Binary operation"},{value:cn.ie.ReduceRow,label:"Reduce row"},{value:cn.ie.Index,label:"Row index"}],qn=new Set([j.fS.time,j.fS.number,j.fS.string]);class ga extends a.PureComponent{constructor(L){super(L),this.onToggleReplaceFields=()=>{const{options:H}=this.props;this.props.onChange({...H,replaceFields:!H.replaceFields})},this.onModeChanged=H=>{const{options:J,onChange:oe}=this.props,ue=H.value??cn.ie.BinaryOperation;oe({...J,mode:ue})},this.onAliasChanged=H=>{const{options:J}=this.props;this.props.onChange({...J,alias:H.target.value})},this.updateReduceOptions=H=>{const{options:J,onChange:oe}=this.props;oe({...J,mode:cn.ie.ReduceRow,reduce:H})},this.onFieldToggle=H=>{const{selected:J}=this.state;J.indexOf(H)>-1?this.onChange(J.filter(oe=>oe!==H)):this.onChange([...J,H])},this.onChange=H=>{this.setState({selected:H});const{reduce:J}=this.props.options;this.updateReduceOptions({...J,include:H})},this.onStatsChange=H=>{const J=H.length?H[0]:Ge.gz.sum,{reduce:oe}=this.props.options;this.updateReduceOptions({...oe,reducer:J})},this.updateBinaryOptions=H=>{const{options:J,onChange:oe}=this.props;oe({...J,mode:cn.ie.BinaryOperation,binary:H})},this.onBinaryLeftChanged=H=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,left:H.value})},this.onBinaryRightChanged=H=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,right:H.value})},this.onBinaryOperationChanged=H=>{const{binary:J}=this.props.options;this.updateBinaryOptions({...J,operator:H.value})},this.state={include:L.options?.reduce?.include||[],names:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(L){this.props.input!==L.input&&this.initOptions()}initOptions(){const{options:L}=this.props,H=L?.reduce?.include||[],J={interpolate:ue=>ue},oe=(0,un.of)(this.props.input).pipe(ie.Y.ensureColumnsTransformer.operator(null,J),this.extractAllNames(),this.extractNamesAndSelected(H)).subscribe(({selected:ue,names:ye})=>{this.setState({names:ye,selected:ue},()=>oe.unsubscribe())})}extractAllNames(){return L=>L.pipe((0,tn.U)(H=>{const J=[],oe={};for(const ue of H)for(const ye of ue.fields){if(!qn.has(ye.type))continue;const ze=(0,re.C)(ye,ue,H);oe[ze]||(oe[ze]=!0,J.push(ze))}return J}))}extractNamesAndSelected(L){return H=>H.pipe((0,tn.U)(J=>{if(!L.length)return{names:J,selected:[]};const oe=[],ue=[];for(const ye of J)L.includes(ye)&&ue.push(ye),oe.push(ye);return{names:oe,selected:ue}}))}renderReduceRow(L){const{names:H,selected:J}=this.state;return L=(0,E.defaults)(L,{reducer:Ge.gz.sum}),a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Field name"),a.createElement(wn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},H.map((oe,ue)=>a.createElement(Gn.B,{key:`${oe}/${ue}`,onClick:()=>{this.onFieldToggle(oe)},label:oe,selected:J.indexOf(oe)>-1}))))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Calculation"),a.createElement(dt.m,{allowMultiple:!1,className:"width-18",stats:[L.reducer],onChange:this.onStatsChange,defaultStat:Ge.gz.sum}))))}renderBinaryOperation(L){L=(0,E.defaults)(L,{reducer:Ge.gz.sum});let H=!L?.left,J=!L?.right;const oe=this.state.names.map(qe=>(qe===L?.left&&(H=!0),qe===L?.right&&(J=!0),{label:qe,value:qe})),ue=H?oe:[...oe,{label:L?.left,value:L?.left}],ye=J?oe:[...oe,{label:L?.right,value:L?.right}],ze=En.n.list().map(qe=>({label:qe.id,value:qe.id}));return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Operation")),a.createElement("div",{className:"gf-form"},a.createElement(X.Ph,{allowCustomValue:!0,placeholder:"Field or number",options:ue,className:"min-width-18 gf-form-spacing",value:L?.left,onChange:this.onBinaryLeftChanged}),a.createElement(X.Ph,{className:"width-8 gf-form-spacing",options:ze,value:L.operator??ze[0].value,onChange:this.onBinaryOperationChanged}),a.createElement(X.Ph,{allowCustomValue:!0,placeholder:"Field or number",className:"min-width-10",options:ye,value:L?.right,onChange:this.onBinaryRightChanged})))}render(){const{options:L}=this.props,H=L.mode??cn.ie.BinaryOperation;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Mode"),a.createElement(X.Ph,{className:"width-18",options:Wn,value:Wn.find(J=>J.value===H),onChange:this.onModeChanged}))),H===cn.ie.BinaryOperation&&this.renderBinaryOperation(L.binary),H===cn.ie.ReduceRow&&this.renderReduceRow(L.reduce),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Alias"),a.createElement(ae.I,{className:"width-18",value:L.alias??"",placeholder:(0,cn.h)(L),onChange:this.onAliasChanged}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Nn.LegacyForms.Switch,{label:"Replace all fields",labelClass:"width-8",checked:!!L.replaceFields,onChange:this.onToggleReplaceFields}))))}}const ea={id:ce.W.calculateField,editor:ga,transformation:ie.Y.calculateFieldTransformer,name:"Add field from calculation",description:"Use the row values to calculate a new field"};var ca=e(42074);const ba=[{value:ca.HO.FieldName,label:"Copy frame name to field name"},{value:ca.HO.Label,label:"Add a label with the frame name"},{value:ca.HO.Drop,label:"Ignore the frame name"}];class zn extends a.PureComponent{constructor(L){super(L),this.onModeChanged=H=>{const{options:J,onChange:oe}=this.props,ue=H.value??ca.HO.FieldName;oe({...J,frameNameMode:ue})},this.onLabelChanged=H=>{const{options:J}=this.props;this.props.onChange({...J,frameNameLabel:H.target.value})}}render(){const{options:L}=this.props,H=L.frameNameMode??ca.HO.FieldName;return a.createElement("div",null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Name"),a.createElement(X.Ph,{className:"width-18",options:ba,value:ba.find(J=>J.value===H),onChange:this.onModeChanged}))),H===ca.HO.Label&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement("div",{className:"gf-form-label width-8"},"Label"),a.createElement(ae.I,{className:"width-18",value:L.frameNameLabel??"",placeholder:"frame",onChange:this.onLabelChanged}))))}}const $n={id:ce.W.concatenate,editor:zn,transformation:ie.Y.concatenateTransformer,name:"Concatenate fields",description:"Combine all fields into a single frame.  Values will be appended with undefined values if not the same length."};var ta=e(15448),Fa=e(16453),Ma=e(25532);const Oa={settings:{width:24,isClearable:!1}},Qa=({input:T,options:L,onChange:H})=>{const J=Fa.OL.filter(mt=>mt.value!==j.fS.trace),oe=(0,a.useCallback)(mt=>Pt=>{const Ot=L.conversions;Ot[mt]={...Ot[mt],targetField:Pt??"",dateFormat:void 0},H({...L,conversions:Ot})},[H,L]),ue=(0,a.useCallback)(mt=>Pt=>{const Ot=L.conversions;Ot[mt]={...Ot[mt],destinationType:Pt.value},H({...L,conversions:Ot})},[H,L]),ye=(0,a.useCallback)(mt=>Pt=>{const Ot=L.conversions;Ot[mt]={...Ot[mt],dateFormat:Pt.currentTarget.value},H({...L,conversions:Ot})},[H,L]),ze=(0,a.useCallback)(()=>{H({...L,conversions:[...L.conversions,{targetField:void 0,destinationType:void 0,dateFormat:void 0}]})},[H,L]),qe=(0,a.useCallback)(mt=>{const Pt=L.conversions;Pt.splice(mt,1),H({...L,conversions:Pt})},[H,L]);return a.createElement(a.Fragment,null,L.conversions.map((mt,Pt)=>a.createElement("div",{key:`${mt.targetField}-${Pt}`},a.createElement(ke.Z,null,a.createElement(tt._,{label:"Field"},a.createElement(ta.b,{context:{data:T},value:mt.targetField??"",onChange:oe(Pt),item:Oa})),a.createElement(tt._,{label:"as"},a.createElement(X.Ph,{options:J,value:mt.destinationType,placeholder:"Type",onChange:ue(Pt),width:18})),mt.destinationType===j.fS.time&&a.createElement(tt._,{label:"Input format",tooltip:"Specify the format of the input field so Grafana can parse the date string correctly."},a.createElement(ae.I,{value:mt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:ye(Pt),width:24})),mt.destinationType===j.fS.string&&(mt.dateFormat||(0,Ma.findField)(T?.[0],mt.targetField)?.type===j.fS.time)&&a.createElement(tt._,{label:"Date format",tooltip:"Specify the output format."},a.createElement(ae.I,{value:mt.dateFormat,placeholder:"e.g. YYYY-MM-DD",onChange:ye(Pt),width:24})),a.createElement(ee.zx,{size:"md",icon:"trash-alt",variant:"secondary",onClick:()=>qe(Pt),"aria-label":"Remove convert field type transformer"})),mt.destinationType===j.fS.enum&&Q.Oh&&a.createElement(ke.Z,null,a.createElement(tt._,{label:"",labelWidth:6},a.createElement("div",null,"TODO... show options here (alpha panels enabled)"))))),a.createElement(ee.zx,{size:"sm",icon:"plus",onClick:ze,variant:"secondary","aria-label":"Add a convert field type transformer"},"Convert field type"))},Qn={id:ce.W.convertFieldType,editor:Qa,transformation:ie.Y.convertFieldTypeTransformer,name:ie.Y.convertFieldTypeTransformer.name,description:ie.Y.convertFieldTypeTransformer.description};var Aa=e(29076),ia=e(24799);class _a extends a.PureComponent{constructor(L){super(L),this.onFieldToggle=H=>{const{selected:J}=this.state;J.indexOf(H)>-1?this.onChange(J.filter(oe=>oe!==H)):this.onChange([...J,H])},this.onChange=H=>{const{regex:J,isRegexValid:oe}=this.state,ue={...this.props.options,include:{names:H}};J&&oe&&(ue.include=ue.include??{},ue.include.pattern=J),this.setState({selected:H},()=>{this.props.onChange(ue)})},this.onInputBlur=H=>{const{selected:J,regex:oe}=this.state;let ue=!0;try{oe&&(0,Aa.jO)(oe)}catch{ue=!1}ue?this.props.onChange({...this.props.options,include:{pattern:oe}}):this.props.onChange({...this.props.options,include:{names:J}}),this.setState({isRegexValid:ue})},this.state={include:L.options.include?.names||[],regex:L.options.include?.pattern,options:[],selected:[],isRegexValid:!0}}componentDidMount(){this.initOptions()}componentDidUpdate(L){this.props.input!==L.input&&this.initOptions()}initOptions(){const{input:L,options:H}=this.props,J=Array.from(H.include?.names??[]),oe=[],ue={};for(const ye of L)for(const ze of ye.fields){const qe=(0,re.C)(ze,ye,L);let mt=ue[qe];mt||(mt=ue[qe]={name:qe,count:0},oe.push(mt)),mt.count++}if(H.include?.pattern)try{const ye=(0,Aa.jO)(H.include.pattern);for(const ze of oe)ye.test(ze.name)&&J.push(ze.name)}catch(ye){console.error(ye)}if(J.length){const ye=oe.filter(ze=>J.includes(ze.name));this.setState({options:oe,selected:ye.map(ze=>ze.name),regex:H.include?.pattern})}else this.setState({options:oe,selected:oe.map(ye=>ye.name),regex:H.include?.pattern})}render(){const{options:L,selected:H,isRegexValid:J}=this.state;return a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Identifier"),a.createElement(wn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},a.createElement(ia.g,{invalid:!J,error:J?void 0:"Invalid pattern",className:k.css`
                margin-bottom: 0;
              `},a.createElement(ae.I,{placeholder:"Regular expression pattern",value:this.state.regex||"",onChange:oe=>this.setState({regex:oe.currentTarget.value}),onBlur:this.onInputBlur,width:25})),L.map((oe,ue)=>{const ye=`${oe.name}${oe.count>1?" ("+oe.count+")":""}`,ze=H.indexOf(oe.name)>-1;return a.createElement(Gn.B,{key:`${oe.name}/${ue}`,onClick:()=>{this.onFieldToggle(oe.name)},label:ye,selected:ze})}))))}}const As={id:ce.W.filterFieldsByName,editor:_a,transformation:ie.Y.filterFieldsByNameTransformer,name:"Filter by name",description:"Removes part of the query results using a regex pattern. The pattern can be inclusive or exclusive."};var va=e(57227);class Ga extends a.PureComponent{constructor(L){super(L),this.onFieldToggle=H=>{const{selected:J}=this.state;J.indexOf(H)>-1?this.onChange(J.filter(oe=>oe!==H)):this.onChange([...J,H])},this.onChange=H=>{this.setState({selected:H}),this.props.onChange({...this.props.options,include:H.join("|")})},this.state={include:L.options.include||"",options:[],selected:[]}}componentDidMount(){this.initOptions()}componentDidUpdate(L){this.props.input!==L.input&&this.initOptions()}initOptions(){const{input:L,options:H}=this.props,J=H.include?H.include.split("|"):[],oe=[],ue={};for(const ye of L)if(ye.refId){let ze=ue[ye.refId];ze||(ze=ue[ye.refId]={refId:ye.refId,count:0},oe.push(ze)),ze.count++}if(J.length){const ye=[],ze=[];for(const qe of oe)J.includes(qe.refId)&&ze.push(qe),ye.push(qe);this.setState({options:ye,selected:ze.map(qe=>qe.refId)})}else this.setState({options:oe,selected:[]})}render(){const{options:L,selected:H}=this.state,{input:J}=this.props;return a.createElement(a.Fragment,null,J.length<=1&&a.createElement("div",null,a.createElement(va.S,null,"Filter data by query expects multiple queries in the input.")),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Series refId"),a.createElement(wn.Lh,{spacing:"xs",align:"flex-start",wrap:!0},L.map((oe,ue)=>{const ye=`${oe.refId}${oe.count>1?" ("+oe.count+")":""}`,ze=H.indexOf(oe.refId)>-1;return a.createElement(Gn.B,{key:`${oe.refId}/${ue}`,onClick:()=>{this.onFieldToggle(oe.refId)},label:ye,selected:ze})})))))}}const Xa={id:ce.W.filterByRefId,editor:Ga,transformation:ie.Y.filterFramesByRefIdTransformer,name:"Filter data by query",description:"Filter data by query. This is useful if you are sharing the results from a different panel that has many queries and you want to only visualize a subset of that in this panel."};var da=e(88861);function as(T){return(0,a.useMemo)(()=>Array.isArray(T)?Object.keys(T.reduce((L,H)=>!H||!Array.isArray(H.fields)?L:H.fields.reduce((J,oe)=>{const ue=(0,re.C)(oe,H,T);return J[ue]=!0,J},L),{})):[],[T])}function qs(T){const L=new Set;for(const H of T)for(const J of H.fields)if(J.labels)for(const oe of Object.keys(J.labels))L.add(oe);return L}const Ys=({input:T,options:L,onChange:H})=>{const J=as(T),oe=(0,a.useCallback)(ue=>ye=>{H({...L,fields:{...L.fields,[ue]:ye}})},[H]);return a.createElement("div",null,J.map(ue=>a.createElement(er,{onConfigChange:oe(ue),fieldName:ue,config:L.fields[ue],key:ue})))},sr=[{label:"Group by",value:da.x.groupBy},{label:"Calculate",value:da.x.aggregate}],er=({fieldName:T,config:L,onConfigChange:H})=>{const J=Sr(),oe=(0,a.useCallback)(ue=>{H({aggregations:L?.aggregations??[],operation:ue?.value??null})},[L,H]);return a.createElement("div",{className:(0,k.cx)("gf-form-inline",J.row)},a.createElement("div",{className:(0,k.cx)("gf-form",J.fieldName)},a.createElement("div",{className:(0,k.cx)("gf-form-label",J.rowSpacing)},T)),a.createElement("div",{className:(0,k.cx)("gf-form",J.cell)},a.createElement("div",{className:(0,k.cx)("gf-form-spacing",J.rowSpacing)},a.createElement(X.Ph,{className:"width-12",options:sr,value:L?.operation,placeholder:"Ignored",onChange:oe,isClearable:!0}))),L?.operation===da.x.aggregate&&a.createElement("div",{className:(0,k.cx)("gf-form","gf-form--grow",J.calculations)},a.createElement(dt.m,{className:(0,k.cx)("flex-grow-1",J.rowSpacing),placeholder:"Select Stats",allowMultiple:!0,stats:L.aggregations,onChange:ue=>{H({...L,aggregations:ue})}})))},Sr=(0,ne.B)(()=>{const T=k.css`
    display: table-cell;
  `;return{row:k.css`
      display: table-row;
    `,cell:T,rowSpacing:k.css`
      margin-bottom: 4px;
    `,fieldName:k.css`
      ${T}
      min-width: 250px;
      white-space: nowrap;
    `,calculations:k.css`
      ${T}
      width: 99%;
    `}}),rr={id:ce.W.groupBy,editor:Ys,transformation:ie.Y.groupByTransformer,name:ie.Y.groupByTransformer.name,description:ie.Y.groupByTransformer.description};var Ms=e(16217);const js=({input:T,options:L,onChange:H})=>{const J=as(T).map(mt=>({label:mt,value:mt})),oe=(0,a.useCallback)(mt=>{H({...L,columnField:mt?.value})},[H,L]),ue=(0,a.useCallback)(mt=>{H({...L,rowField:mt?.value})},[H,L]),ye=(0,a.useCallback)(mt=>{H({...L,valueField:mt?.value})},[H,L]),ze=[{label:"Null",value:Ms.U.Null,description:"Null value"},{label:"True",value:Ms.U.True,description:"Boolean true value"},{label:"False",value:Ms.U.False,description:"Boolean false value"},{label:"Empty",value:Ms.U.Empty,description:"Empty string"}],qe=(0,a.useCallback)(mt=>{H({...L,emptyValue:mt?.value})},[H,L]);return a.createElement(a.Fragment,null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Column",labelWidth:8},a.createElement(X.Ph,{options:J,value:L.columnField,onChange:oe,isClearable:!0})),a.createElement(tt._,{label:"Row",labelWidth:8},a.createElement(X.Ph,{options:J,value:L.rowField,onChange:ue,isClearable:!0})),a.createElement(tt._,{label:"Cell Value",labelWidth:10},a.createElement(X.Ph,{options:J,value:L.valueField,onChange:ye,isClearable:!0})),a.createElement(tt._,{label:"Empty Value"},a.createElement(X.Ph,{options:ze,value:L.emptyValue,onChange:qe,isClearable:!0}))))},Ls={id:ce.W.groupingToMatrix,editor:js,transformation:ie.Y.groupingToMatrixTransformer,name:"Grouping to matrix",description:"Takes a three fields combination and produces a Matrix"};var Ss=e(15128),Vs=e(8944),Va=e(45458);const Or=({input:T,options:L,onChange:H})=>{const oe=(0,a.useCallback)(ze=>{H({...L,bucketSize:ze})},[H,L]),ue=(0,a.useCallback)(ze=>{H({...L,bucketOffset:ze})},[H,L]),ye=(0,a.useCallback)(()=>{H({...L,combine:!L.combine})},[H,L]);return a.createElement("div",null,a.createElement(ke.Z,null,a.createElement(tt._,{labelWidth:18,label:Ss.py.bucketSize.name,tooltip:Ss.py.bucketSize.description},a.createElement(Va.Y,{value:L.bucketSize,placeholder:"auto",onChange:oe,min:0}))),a.createElement(ke.Z,null,a.createElement(tt._,{labelWidth:18,label:Ss.py.bucketOffset.name,tooltip:Ss.py.bucketOffset.description},a.createElement(Va.Y,{value:L.bucketOffset,placeholder:"none",onChange:ue,min:0}))),a.createElement(ke.Z,null,a.createElement(tt._,{labelWidth:18,label:Ss.py.combine.name,tooltip:Ss.py.combine.description},a.createElement(Vs.x,{value:L.combine??!1,onChange:ye}))))},hr={id:ce.W.histogram,editor:Or,transformation:ie.Y.histogramTransformer,name:ie.Y.histogramTransformer.name,description:ie.Y.histogramTransformer.description};var Us=e(75176);const Qs=[{value:Us.c.outer,label:"OUTER",description:"Keep all rows from any table with a value"},{value:Us.c.inner,label:"INNER",description:"Drop rows that do not match a value in all tables"}];function vr({input:T,options:L,onChange:H}){const J=as(T).map(ye=>({label:ye,value:ye})),oe=(0,a.useCallback)(ye=>{H({...L,byField:ye?.value})},[H,L]),ue=(0,a.useCallback)(ye=>{H({...L,mode:ye?.value})},[H,L]);return a.createElement(a.Fragment,null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Mode",labelWidth:8,grow:!0},a.createElement(X.Ph,{options:Qs,value:L.mode??Us.c.outer,onChange:ue}))),a.createElement(ke.Z,null,a.createElement(tt._,{label:"Field",labelWidth:8,grow:!0},a.createElement(X.Ph,{options:J,value:L.byField,onChange:oe,placeholder:"time",isClearable:!0}))))}const or={id:ce.W.joinByField,aliasIds:[ce.W.seriesToColumns],editor:vr,transformation:ie.Y.joinByFieldTransformer,name:ie.Y.joinByFieldTransformer.name,description:ie.Y.joinByFieldTransformer.description};var Ea=e(1052),Er=e(26418);const zs=[{value:Ea.k.Columns,label:"Columns"},{value:Ea.k.Rows,label:"Rows"}],Bs=({input:T,options:L,onChange:H})=>{const{labelNames:oe,selected:ue}=(0,a.useMemo)(()=>{let qe=[],mt={};for(const Ot of T)for(const Ft of Ot.fields)if(Ft.labels)for(const zt of Object.keys(Ft.labels))mt[zt]||(qe.push({value:zt,label:zt}),mt[zt]=!0);const Pt=new Set(L.keepLabels?.length?L.keepLabels:Object.keys(mt));return{labelNames:qe,selected:Pt}},[L.keepLabels,T]),ye=qe=>{H({...L,valueLabel:qe?.value})},ze=qe=>{if(ue.has(qe)?ue.delete(qe):ue.add(qe),ue.size===oe.length||!ue.size){const{keepLabels:mt,...Pt}=L;H(Pt)}else H({...L,keepLabels:[...ue]})};return a.createElement("div",null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Mode",labelWidth:20},a.createElement(Ce.S,{options:zs,value:L.mode??Ea.k.Columns,onChange:qe=>H({...L,mode:qe})}))),a.createElement(ke.Z,null,a.createElement(tt._,{label:"Labels",labelWidth:20},a.createElement(Er.Stack,{gap:1,wrap:!0},oe.map((qe,mt)=>{const Pt=qe.label;return a.createElement(Gn.B,{key:`${Pt}/${mt}`,onClick:()=>ze(Pt),label:Pt,selected:ue.has(Pt)})})))),L.mode!==Ea.k.Rows&&a.createElement(ke.Z,null,a.createElement(tt._,{label:"Value field name",labelWidth:20,tooltip:"Replace the value field name with a label",htmlFor:"labels-to-fields-as-name"},a.createElement(X.Ph,{inputId:"labels-to-fields-as-name",isClearable:!0,allowCustomValue:!1,placeholder:"(Optional) Select label",options:oe,value:L?.valueLabel,onChange:ye,className:"min-width-16"}))))},ir={id:ce.W.labelsToFields,editor:Bs,transformation:ie.Y.labelsToFieldsTransformer,name:"Labels to fields",description:`Groups series by time and return labels or tags as fields.
                Useful for showing time series with labels in a table where each label key becomes a separate column`},lr=({options:T,onChange:L})=>{const H=(0,a.useCallback)(J=>{L({...T,limitField:Number(J.currentTarget.value)})},[L,T]);return a.createElement(a.Fragment,null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Limit",labelWidth:8},a.createElement(ae.I,{placeholder:"Limit count",pattern:"[0-9]*",value:T.limitField,onChange:H,width:25}))))},yr={id:ce.W.limit,editor:lr,transformation:ie.Y.limitTransformer,name:"Limit",description:"Limit the number of items displayed."},tr=({input:T,options:L,onChange:H})=>T.length<=1?a.createElement(va.S,null,"Merge has no effect when applied on a single frame."):null,Pr={id:ce.W.merge,editor:tr,transformation:ie.Y.mergeTransformer,name:"Merge",description:`Merge many series/tables and return a single table where mergeable values will be combined into the same row.
                Useful for showing multiple series, tables or a combination of both visualized in a table.`};var ws=e(19677),Gt=e(7582),na=e(39904),ps=e(8180);const cr=({options:T,input:L,onChange:H})=>{const{indexByName:J,excludeByName:oe,renameByName:ue}=T,ye=as(L),ze=(0,a.useMemo)(()=>Za(ye,J),[ye,J]),qe=(0,a.useCallback)((Ot,Ft)=>{H({...T,excludeByName:{...oe,[Ot]:Ft}})},[H,T,oe]),mt=(0,a.useCallback)(Ot=>{if(!Ot||!Ot.destination)return;const Ft=Ot.source.index,zt=Ot.destination.index;Ft!==zt&&H({...T,indexByName:is(ye,Ft,zt)})},[H,T,ye]),Pt=(0,a.useCallback)((Ot,Ft)=>{H({...T,renameByName:{...T.renameByName,[Ot]:Ft}})},[H,T]);return L.length>1?a.createElement(va.S,null,"Organize fields only works with a single frame. Consider applying a join transformation or filtering the input first."):a.createElement(ws.Z5,{onDragEnd:mt},a.createElement(ws.bK,{droppableId:"sortable-fields-transformer",direction:"vertical"},Ot=>a.createElement("div",{ref:Ot.innerRef,...Ot.droppableProps},ze.map((Ft,zt)=>a.createElement(Hs,{fieldName:Ft,renamedFieldName:ue[Ft],index:zt,onToggleVisibility:qe,onRenameField:Pt,visible:!oe[Ft],key:Ft})),Ot.placeholder)))};cr.displayName="OrganizeFieldsTransformerEditor";const Hs=({fieldName:T,renamedFieldName:L,index:H,visible:J,onToggleVisibility:oe,onRenameField:ue})=>{const ye=(0,De.wW)(os);return a.createElement(ws._l,{draggableId:T,index:H},ze=>a.createElement("div",{className:"gf-form-inline",ref:ze.innerRef,...ze.draggableProps},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label gf-form-label--justify-left width-30"},a.createElement(na.J,{name:"draggabledots",title:"Drag and drop to reorder",size:"lg",className:ye.draggable,...ze.dragHandleProps}),a.createElement(ps.h,{className:ye.toggle,size:"md",name:J?"eye":"eye-slash",onClick:()=>oe(T,J)}),a.createElement("span",{className:ye.name,title:T},T)),a.createElement(ae.I,{className:"flex-grow-1",defaultValue:L||"",placeholder:`Rename ${T}`,onBlur:qe=>ue(T,qe.currentTarget.value)}))))};Hs.displayName="DraggableFieldName";const os=T=>({toggle:k.css`
    margin: 0 8px;
    color: ${T.colors.text.secondary};
  `,draggable:k.css`
    opacity: 0.4;
    &:hover {
      color: ${T.colors.text.maxContrast};
    }
  `,name:k.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    font-size: ${T.typography.bodySmall.fontSize};
    font-weight: ${T.typography.fontWeightMedium};
  `}),is=(T,L,H)=>{const J=Array.from(T),[oe]=J.splice(L,1);return J.splice(H,0,oe),J.reduce((ue,ye,ze)=>(ue[ye]=ze,ue),{})},Za=(T,L={})=>{if(!L||Object.keys(L).length===0)return T;const H=(0,Gt.$)(L);return T.sort(H)},Ze={id:ce.W.organize,editor:cr,transformation:ie.Y.organizeFieldsTransformer,name:"Organize fields",description:"Allows the user to re-order, hide, or rename fields / columns. Useful when data source doesn't allow overrides for visualizing data."};var Et=e(4157),Ct=e(68183);const Be=({options:T,onChange:L})=>{const H=[{label:"Series to rows",value:Et.AL.SeriesToRows,description:"Create a table with one row for each series value"},{label:"Reduce fields",value:Et.AL.ReduceFields,description:"Collapse each field into a single value"}],J=(0,a.useCallback)(ye=>{const ze=ye.value;L({...T,mode:ze,includeTimeField:ze===Et.AL.ReduceFields?!!T.includeTimeField:!1})},[L,T]),oe=(0,a.useCallback)(()=>{L({...T,includeTimeField:!T.includeTimeField})},[L,T]),ue=(0,a.useCallback)(()=>{L({...T,labelsToFields:!T.labelsToFields})},[L,T]);return a.createElement(a.Fragment,null,a.createElement("div",null,a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":Ct.wl.components.Transforms.Reduce.modeLabel},"Mode"),a.createElement(X.Ph,{options:H,value:H.find(ye=>ye.value===T.mode)||H[0],onChange:J,className:"flex-grow-1"}))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8","aria-label":Ct.wl.components.Transforms.Reduce.calculationsLabel},"Calculations"),a.createElement(dt.m,{className:"flex-grow-1",placeholder:"Choose Stat",allowMultiple:!0,stats:T.reducers||[],onChange:ye=>{L({...T,reducers:ye})}}))),T.mode===Et.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Nn.LegacyForms.Switch,{label:"Include time",labelClass:"width-8",checked:!!T.includeTimeField,onChange:oe}))),T.mode!==Et.AL.ReduceFields&&a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form"},a.createElement(Nn.LegacyForms.Switch,{label:"Labels to fields",labelClass:"width-8",checked:!!T.labelsToFields,onChange:ue}))))},we={id:ce.W.reduce,editor:Be,transformation:ie.Y.reduceTransformer,name:ie.Y.reduceTransformer.name,description:ie.Y.reduceTransformer.description};class xe extends a.PureComponent{constructor(L){super(L),this.handleRegexChange=H=>{const J=H.currentTarget.value;let oe=!0;if(J)try{J&&(0,Aa.jO)(J)}catch{oe=!1}this.setState(ue=>({...ue,regex:J,isRegexValid:oe}))},this.handleRenameChange=H=>{const J=H.currentTarget.value;this.setState(oe=>({...oe,renamePattern:J}))},this.handleRegexBlur=H=>{const J=H.currentTarget.value;let oe=!0;try{J&&(0,Aa.jO)(J)}catch{oe=!1}this.setState({isRegexValid:oe},()=>{oe&&this.props.onChange({...this.props.options,regex:J})})},this.handleRenameBlur=H=>{const J=H.currentTarget.value;this.setState({renamePattern:J},()=>this.props.onChange({...this.props.options,renamePattern:J}))},this.state={regex:L.options.regex,renamePattern:L.options.renamePattern,isRegexValid:!0}}render(){const{regex:L,renamePattern:H,isRegexValid:J}=this.state;return a.createElement(a.Fragment,null,a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Match"),a.createElement(ia.g,{invalid:!J,error:J?void 0:"Invalid pattern",className:k.css`
                margin-bottom: 0;
              `},a.createElement(ae.I,{placeholder:"Regular expression pattern",value:L||"",onChange:this.handleRegexChange,onBlur:this.handleRegexBlur,width:25})))),a.createElement("div",{className:"gf-form-inline"},a.createElement("div",{className:"gf-form gf-form--grow"},a.createElement("div",{className:"gf-form-label width-8"},"Replace"),a.createElement(ia.g,{className:k.css`
                margin-bottom: 0;
              `},a.createElement(ae.I,{placeholder:"Replacement pattern",value:H||"",onChange:this.handleRenameChange,onBlur:this.handleRenameBlur,width:25})))))}}const yt={id:ce.W.renameByRegex,editor:xe,transformation:ie.Y.renameByRegexTransformer,name:"Rename by regex",description:"Renames part of the query result by using regular expression with placeholders."},Rt=({input:T,options:L,onChange:H})=>null,Bt={id:ce.W.seriesToRows,editor:Rt,transformation:ie.Y.seriesToRowsTransformer,name:"Series to rows",description:`Merge many series and return a single series with time, metric and value as columns.
                Useful for showing multiple time series visualized in a table.`},Kt=({input:T,options:L,onChange:H})=>{const J=as(T).map(ye=>({label:ye,value:ye})),oe=(0,a.useCallback)((ye,ze)=>{H({...L,sort:[ze]})},[H,L]),ue=L.sort?.length?L.sort:[{}];return a.createElement("div",null,ue.map((ye,ze)=>a.createElement(ke.Z,{key:`${ye.field}/${ze}`},a.createElement(tt._,{label:"Field",labelWidth:10,grow:!0},a.createElement(X.Ph,{options:J,value:ye.field,placeholder:"Select field",onChange:qe=>{oe(ze,{...ye,field:qe.value})}})),a.createElement(tt._,{label:"Reverse"},a.createElement(Vs.x,{value:!!ye.desc,onChange:()=>{oe(ze,{...ye,desc:!ye.desc})}})))))},fn={id:ce.W.sortBy,editor:Kt,transformation:ie.Y.sortByTransformer,name:ie.Y.sortByTransformer.name,description:ie.Y.sortByTransformer.description};function Pn({options:T,onChange:L}){const[H,J]=(0,a.useState)(T),oe=gn(),ue=ut(),ye=()=>{H.push({path:""}),J([...H]),mt()},ze=Pt=>{H&&(H.splice(Pt,1),J([...H]),mt())},qe=(Pt,Ot,Ft)=>{H&&(Ft==="alias"?H[Ot].alias=Pt.currentTarget.value??"":H[Ot].path=Pt.currentTarget.value??"",J([...H]))},mt=()=>{L(H)};return a.createElement("ol",{className:(0,k.cx)(ue.list)},H&&H.map((Pt,Ot)=>a.createElement("li",{key:Ot},a.createElement(ke.Z,null,a.createElement(tt._,{label:"Field",tooltip:oe.field,grow:!0},a.createElement(ae.I,{onBlur:mt,onChange:Ft=>qe(Ft,Ot,"path"),value:Pt.path,placeholder:'A valid json path, e.g. "object.value1" or "object.value2[0]"'})),a.createElement(tt._,{label:"Alias",tooltip:oe.alias},a.createElement(ae.I,{width:12,value:Pt.alias,onBlur:mt,onChange:Ft=>qe(Ft,Ot,"alias")})),a.createElement(tt._,{className:(0,k.cx)(ue.removeIcon)},a.createElement(ps.h,{onClick:()=>ze(Ot),name:"trash-alt"}))))),a.createElement(tt._,null,a.createElement(ee.zx,{icon:"plus",onClick:()=>ye(),variant:"secondary"},"Add path")))}const gn=()=>{const T=[{path:"object",description:"=> extract fields from object"},{path:"object.value1",description:"=> extract value1"},{path:"object.value2",description:"=> extract value2"},{path:"object.value2[0]",description:"=> extract value2 first element"},{path:"object.value2[1]",description:"=> extract value2 second element"}];return{field:a.createElement("div",null,"A valid path of an json object.",a.createElement("div",null,a.createElement("strong",null,"JSON Value:")),a.createElement("pre",null,a.createElement("code",null,["{",'  "object": {','    "value1": "hello world"','    "value2": [1, 2, 3, 4]',"  }","}"].join(`
`))),a.createElement("strong",null,"Valid Paths:"),T.map((L,H)=>a.createElement("p",{key:H},a.createElement("code",null,L.path),a.createElement("i",null,L.description)))),alias:"An alias name for the variable in the dashboard. If left blank the given path will be used."}};function ut(){return{list:k.css`
      margin-left: 20px;
    `,removeIcon:k.css`
      margin: 0 0 0 4px;
      align-items: center;
    `}}var Tt=e(16911),bt=(T=>(T.JSON="json",T.KeyValues="kvp",T.Auto="auto",T))(bt||{});const Ht={id:bt.JSON,name:"JSON",description:"Parse JSON string",parse:T=>JSON.parse(T)};function en(T){const L=[];let H="",J="";const oe={};for(let ue=0;ue<T.length;ue++){let ye=T[ue];ye===H&&(H="",ye=T[++ue]);const ze=ye==="\\";if(ze&&(ye=T[++ue]),ze||H.length){L.push(ye);continue}switch((ye==='"'||ye==="'")&&(H=ye),ye){case":":case"=":L.length&&(J&&(oe[J]=""),J=L.join(""),L.length=0);break;case'"':case"'":case" ":case`
`:case"	":case"\r":case`
`:L.length&&J===""&&(oe[L.join("")]="",L.length=0);case",":case";":case"&":case"{":case"}":if(L.length){const qe=L.join("");J.length?(oe[J]=qe,J=""):J=qe,L.length=0}break;default:L.push(ye),ue===T.length-1&&J===""&&L.length&&(oe[L.join("")]="",L.length=0)}}return J.length&&(oe[J]=L.join("")),oe}const ln={id:bt.KeyValues,name:"Key+value pairs",description:"Look for a=b, c: d values in the line",parse:en},Cn=[Ht,ln],xn={id:bt.Auto,name:"Auto",description:"parse new fields automatically",parse:T=>{for(const L of Cn)try{const H=L.parse(T);if(H!=null)return H}catch{}}},Tn=new te.B(()=>[...Cn,xn]),Yn={id:ce.W.extractFields,name:"Extract fields",description:"Parse fields from the contends of another",defaultOptions:{},operator:(T,L)=>H=>H.pipe((0,tn.U)(J=>Yn.transformer(T,L)(J))),transformer:T=>L=>L.map(H=>aa(H,T))};function aa(T,L){if(!L.source)return T;const H=(0,Ma.findField)(T,L.source);if(!H)return T;const J=Tn.getIfExists(L.format??bt.Auto);if(!J)throw new Error("unkonwn extractor");const oe=T.length,ue=[],ye=new Map;for(let qe=0;qe<oe;qe++){let mt=H.values.get(qe);if((0,E.isString)(mt))try{mt=J.parse(mt)}catch{mt={}}if(L.format===bt.JSON&&L.jsonPaths&&L.jsonPaths?.length>0){const Pt={},Ot=L.jsonPaths.filter(Ft=>Ft.path);Ot.length>0&&(Ot.forEach(Ft=>{const zt=Ft.alias&&Ft.alias.length>0?Ft.alias:Ft.path;Pt[zt]=(0,E.get)(mt,Ft.path)??"Not Found"}),mt=Pt)}for(const[Pt,Ot]of Object.entries(mt)){let Ft=ye.get(Pt);Ft==null&&(Ft=new Array(oe),ye.set(Pt,Ft),ue.push(Pt)),Ft[qe]=Ot}}const ze=ue.map(qe=>{const mt=ye.get(qe);return{name:qe,values:new on.G(mt),type:mt?(0,Tt.DP)(mt.find(Pt=>Pt!=null)):j.fS.other,config:{}}});if(L.keepTime){const qe=(0,Ma.findField)(T,"Time")||(0,Ma.findField)(T,"time");qe&&ze.unshift(qe)}return L.replace||ze.unshift(...T.fields),{...T,fields:ze}}const sa={settings:{width:30,placeholderText:"Select field"},name:"",id:"",editor:()=>null},_n=({input:T,options:L,onChange:H})=>{const J=mt=>{H({...L,source:mt})},oe=mt=>{H({...L,format:mt?.value})},ue=mt=>{H({...L,jsonPaths:mt})},ye=()=>{L.replace&&(L.keepTime=!1),H({...L,replace:!L.replace})},ze=()=>{H({...L,keepTime:!L.keepTime})},qe=Tn.selectOptions(L.format?[L.format]:void 0);return a.createElement("div",null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Source",labelWidth:16},a.createElement(ta.b,{context:{data:T},value:L.source??"",onChange:J,item:sa}))),a.createElement(ke.Z,null,a.createElement(tt._,{label:"Format",labelWidth:16},a.createElement(X.Ph,{value:qe.current[0],options:qe.options,onChange:oe,width:24,placeholder:"Auto"}))),L.format==="json"&&a.createElement(Pn,{options:L.jsonPaths??[],onChange:ue}),a.createElement(ke.Z,null,a.createElement(tt._,{label:"Replace all fields",labelWidth:16},a.createElement(Vs.x,{value:L.replace??!1,onChange:ye}))),L.replace&&a.createElement(ke.Z,null,a.createElement(tt._,{label:"Keep time",labelWidth:16},a.createElement(Vs.x,{value:L.keepTime??!1,onChange:ze}))))},La={id:ce.W.extractFields,editor:_n,transformation:Yn,name:"Extract fields",description:"Parse fields from content (JSON, labels, etc)"};var Ta=e(45253),Ba=e(15670);const Ps={id:ce.W.joinByLabels,name:"Join by labels",description:"Flatten labeled results into a table joined by labels",defaultOptions:{},operator:(T,L)=>H=>H.pipe((0,tn.U)(J=>Ps.transformer(T,L)(J))),transformer:T=>L=>!L||!L.length?L:[Na(T,L)]};function Na(T,L){if(!T.value?.length)return Wa("No value labele configured");const H=qs(L);if(H.size<1)return Wa("No labels in result");if(!H.has(T.value))return Wa("Value label not found");let J=T.join?.length?T.join:Array.from(H);J=J.filter(Ot=>Ot!==T.value);const oe=new Set,ue=new Map,ye={};for(const Ot of L)for(const Ft of Ot.fields)if(Ft.labels&&Ft.type!==j.fS.time){const zt=J.map(la=>Ft.labels[la]),Jt=zt.join(",");let hn=ue.get(Jt);hn||(hn={keys:zt,values:{}},ue.set(Jt,hn));const In=Ft.labels[T.value],Zn=Ft.values.toArray(),Fn=hn.values[In];Fn?hn.values[In]=Fn.concat(Zn):hn.values[In]=Zn,ye[In]||(ye[In]=Ft),oe.add(In)}const ze=Array.from(oe),qe=J.map(()=>[]),mt=ze.map(()=>[]);for(const Ot of ue.values()){let Ft=-1,zt=!1;for(;!zt;){Ft++,zt=!0;for(let Jt=0;Jt<J.length;Jt++)qe[Jt].push(Ot.keys[Jt]);for(let Jt=0;Jt<ze.length;Jt++){const hn=ze[Jt],In=Ot.values[hn]??[];mt[Jt].push(In[Ft]),In.length>Ft+1&&(zt=!1)}}}const Pt={fields:[],length:mt[0].length};for(let Ot=0;Ot<J.length;Ot++)Pt.fields.push({name:J[Ot],config:{},type:j.fS.string,values:new on.G(qe[Ot])});for(let Ot=0;Ot<ze.length;Ot++){const Ft=ye[ze[Ot]];Pt.fields.push({name:ze[Ot],config:{},type:Ft.type??j.fS.number,values:new on.G(mt[Ot])})}return Pt}function Wa(T){return{meta:{notices:[{severity:"error",text:T}]},fields:[{name:"Error",type:j.fS.string,config:{},values:new on.G([T])}],length:0}}function hs({input:T,options:L,onChange:H}){const J=(0,a.useMemo)(()=>{let qe;const mt=qs(T),Pt=Array.from(mt).map(In=>({label:In,value:In}));let Ot=Pt.find(In=>In.value===L.value);!Ot&&L.value&&(Ot={label:`${L.value} (not found)`,value:L.value},Pt.push(Ot)),T.length?mt.size===0&&(qe=a.createElement(Ta.b,{title:"No labels found"},"The input does not contain any labels")):qe=a.createElement(Ta.b,{title:"No input found"},"No input (or labels) found"),mt.delete(L.value);const Ft=Array.from(mt).map(In=>({label:In,value:In}));let zt=Ft;const Jt=Boolean(L.join?.length);let hn="Join";return Jt?zt=Ft.filter(In=>!L.join.includes(In.value)):hn=Ft.map(In=>In.value).join(", "),{warn:qe,valueOptions:Pt,valueOption:Ot,joinOptions:Ft,addOptions:zt,addText:hn,hasJoin:Jt,key:Date.now()}},[L,T]),oe=(qe,mt)=>{if(!L.join)return;const Pt=L.join.slice();if(mt)Pt[qe]=mt;else if(Pt.splice(qe,1),!Pt.length){H({...L,join:void 0});return}const Ot=new Set(Pt);L.value&&Ot.delete(L.value),H({...L,join:Array.from(Ot)})},ue=qe=>{const mt=qe?.value;if(!mt)return;const Pt=L.join?L.join.slice():[];Pt.push(mt),H({...L,join:Pt})},ye=10,ze="No labels found";return a.createElement("div",null,J.warn,a.createElement(ke.Z,null,a.createElement(tt._,{error:"required",invalid:!Boolean(L.value?.length),label:"Value",labelWidth:ye,tooltip:"Select the label indicating the values name"},a.createElement(X.Ph,{options:J.valueOptions,value:J.valueOption,onChange:qe=>H({...L,value:qe.value}),noOptionsMessage:ze}))),J.hasJoin?L.join.map((qe,mt)=>a.createElement(ke.Z,{key:qe+mt},a.createElement(tt._,{label:"Join",labelWidth:ye,error:"Unable to join by the value label",invalid:qe===L.value},a.createElement(wn.Lh,null,a.createElement(X.Ph,{options:J.joinOptions,value:J.joinOptions.find(Pt=>Pt.value===qe),isClearable:!0,onChange:Pt=>oe(mt,Pt?.value),noOptionsMessage:ze}),Boolean(J.addOptions.length&&mt===L.join.length-1)&&a.createElement(Ba.b,{icon:"plus",label:"",options:J.addOptions,onChange:ue,variant:"secondary"}))))):a.createElement(a.Fragment,null,Boolean(J.addOptions.length)&&a.createElement(ke.Z,null,a.createElement(tt._,{label:"Join",labelWidth:ye},a.createElement(X.Ph,{options:J.addOptions,placeholder:J.addText,onChange:ue,noOptionsMessage:ze})))))}const Ya={id:Ps.id,editor:hs,transformation:Ps,name:Ps.name,description:Ps.description,state:ft.BV.beta};var ls=e(74311),qa=e(39859),es=e(49372),ss=e(73063);const dr={id:ce.W.fieldLookup,name:"Lookup fields from resource",description:"Retrieve matching data based on specified field",defaultOptions:{},operator:T=>L=>L.pipe((0,qa.z)(H=>(0,es.D)(us(H,T))))};async function us(T,L){const H=de.Ls.get(ge.mi.byName).get(L?.lookupField),J=await(0,ss.so)(L?.gazetteer??ss.LI);return J.frame?Ns(T,J,H):Promise.reject("missing frame in gazetteer")}function Ns(T,L,H){const J=L.frame()?.fields;return J?T.map(oe=>{const ue=oe.length,ye=[];for(const ze of oe.fields)if(ye.push(ze),H(ze,oe,T)){const qe=ze.values.toArray(),mt=[];for(const Pt of J){const Ot=new Array(ue);mt.push(Ot),ye.push({...Pt,values:new on.G(Ot)})}for(let Pt=0;Pt<mt.length;Pt++){const Ot=L.find(qe[Pt]);if(Ot?.index!=null)for(let Ft=0;Ft<J.length;Ft++)mt[Ft][Pt]=J[Ft].values.get(Ot.index)}}return{...oe,fields:ye}}):T}const Zs={settings:{width:30,filter:T=>T.type===j.fS.string,placeholderText:"Select text field",noFieldsMessage:"No text fields found"},name:"",id:"",editor:()=>null},Sa={settings:{}},_r=({input:T,options:L,onChange:H})=>{const J=(0,a.useCallback)(ue=>{H({...L,lookupField:ue})},[H,L]),oe=(0,a.useCallback)(ue=>{H({...L,gazetteer:ue})},[H,L]);return a.createElement("div",null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Field",labelWidth:12},a.createElement(ta.b,{context:{data:T},value:L?.lookupField??"",onChange:J,item:Zs}))),a.createElement(ke.Z,null,a.createElement(tt._,{label:"Lookup",labelWidth:12},a.createElement(ls.Q,{value:L?.gazetteer??"",context:{data:T},item:Sa,onChange:oe}))))},nr={id:ce.W.fieldLookup,editor:_r,transformation:dr,name:"Field lookup",description:"Use a field value to lookup additional fields from an external source.  This currently supports spatial data, but will eventually support more formats",state:ft.BV.alpha};var Tr=e(80760),ma=e(84931),ms=e(21398);const Ir=(T,L,H=[])=>(L===0?H.push(T):T.forEach(J=>{Ir(J,L-1,H)}),H);function Xr(T){const L=T[0].length,H=T.length,J=new Map;for(let oe=0;oe<L;oe++){let ue=J;for(let ye=0;ye<H;ye++){let ze=T[ye][oe],qe=ue.get(ze);qe==null&&(qe=ye===H-1?[]:new Map,ue.set(ze,qe)),ue=qe}ue.push(oe)}return Ir(J,H)}const Wo={asLabels:!0,append:!1,withNames:!1,separator1:"=",separator2:" "};function rd(T,L,H){return L.map((J,oe)=>T.withNames?`${J}${T.separator1}${H[oe]}`:H[oe]).join(T.separator2)}function od(T,L){const H={};return T.forEach((J,oe)=>{H[J]=String(L[oe])}),H}const $o={id:ce.W.partitionByValues,name:"Partition by values",description:"Splits a one-frame dataset into multiple series discriminated by unique/enum values in one or more fields.",defaultOptions:{},operator:(T,L)=>H=>H.pipe((0,tn.U)(J=>$o.transformer(T,L)(J))),transformer:(T,L)=>{const H=(0,ma.f)({names:T.fields});if(!H)return ms.d.transformer({},L);const J=(0,de.sq)(H);return oe=>oe.length?Ml(oe[0],J,T):oe}};function Ml(T,L,H){const J=T.fields.filter(ze=>L(ze,T,[T])),oe=J.map(ze=>ze.values.toArray()),ue=J.map(ze=>ze.name),ye={...Wo,...H?.naming};return Xr(oe).map(ze=>{let qe=T.name,mt={};if(ye.asLabels)mt=od(ue,J.map((Ot,Ft)=>oe[Ft][ze[0]]));else{let Ot=rd(ye,ue,J.map((Ft,zt)=>oe[zt][ze[0]]));ye?.append&&T.name&&(Ot=`${T.name} ${Ot}`),qe=Ot}let Pt=T.fields;if(!H?.keepFields){const Ot=new Set(ue);Pt=T.fields.filter(Ft=>!Ot.has(Ft.name))}return{name:qe,meta:T.meta,length:ze.length,fields:Pt.map(Ot=>{const Ft=Ot.values.toArray(),zt=Array(ze.length);for(let Jt=0;Jt<ze.length;Jt++)zt[Jt]=Ft[ze[Jt]];return{name:Ot.name,type:Ot.type,config:Ot.config,labels:{...Ot.labels,...mt},values:new on.G(zt)}})}})}function Of({input:T,options:L,onChange:H}){const J=(0,Tr.IX)(T),oe=(0,Tr.nw)(J),ue=(0,a.useMemo)(()=>{const mt=new Set(L.fields);return mt.size<1?oe:oe.filter(Pt=>!mt.has(Pt.value))},[oe,L]),ye=(0,a.useCallback)(mt=>{if(!mt.value)return;const Pt=new Set(L.fields);Pt.add(mt.value),H({...L,fields:[...Pt]})},[H,L]),ze=(0,a.useCallback)(mt=>{if(!mt)return;const Pt=new Set(L.fields);Pt.delete(mt),H({...L,fields:[...Pt]})},[H,L]);if(T.length>1)return a.createElement(va.S,null,"Partition by values only works with a single frame.");const qe=[...new Set(L.fields)];return a.createElement("div",null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Field",labelWidth:10,grow:!0},a.createElement(wn.Lh,null,qe.map(mt=>a.createElement(ee.zx,{key:mt,icon:"times",variant:"secondary",size:"md",onClick:()=>ze(mt)},mt)),ue.length&&a.createElement(Ba.b,{variant:"secondary",size:"md",options:ue,onChange:ye,label:"Select field",icon:"plus"})))))}const Br={id:ce.W.partitionByValues,editor:Of,transformation:$o,name:$o.name,description:$o.description,state:ft.BV.alpha};var qr=e(88432),Sl=e(38685),id=e(98234),wr=(T=>(T.TimeSeriesWide="wide",T.TimeSeriesLong="long",T.TimeSeriesMulti="multi",T.TimeSeriesMany="many",T))(wr||{});function ld(T){if(!Array.isArray(T)||T.length===0)return T;const L=[];for(const H of Pi(T)){const J=H.fields[0];if(!J||J.type!==j.fS.time)continue;const oe=[],ue=[];for(const ye of H.fields)switch(ye.type){case j.fS.number:case j.fS.boolean:oe.push(ye);break;case j.fS.string:ue.push(ye);break}for(const ye of oe)if(ue.length){const ze=new Map;for(let qe=0;qe<H.length;qe++){const mt=J.values.get(qe),Pt=ye.values.get(qe);if(Pt===void 0||mt==null)continue;const Ot=ue.map(zt=>zt.values.get(qe)).join("/");let Ft=ze.get(Ot);if(!Ft){Ft={key:Ot,time:[],value:[],labels:{}};for(const zt of ue)Ft.labels[zt.name]=zt.values.get(qe);ze.set(Ot,Ft)}Ft.time.push(mt),Ft.value.push(Pt)}for(const qe of ze.values())L.push({name:H.name,refId:H.refId,meta:{...H.meta,type:qr.P.TimeSeriesMulti},fields:[{...J,values:new on.G(qe.time)},{...ye,values:new on.G(qe.value),labels:qe.labels}],length:qe.time.length})}else L.push({name:H.name,refId:H.refId,meta:{...H.meta,type:qr.P.TimeSeriesMulti},fields:[J,ye],length:H.length})}return L}function Pi(T){if(!Array.isArray(T)||T.length===0)return T;const L=[];for(const H of T){let J;const oe=[],ue={},ye={},ze={},qe={};for(let Jt=0;Jt<H.fields.length;Jt++){const hn=H.fields[Jt];switch(hn.type){case j.fS.string:case j.fS.boolean:hn.name in qe||(qe[hn.name]=Jt,ye[hn.name]=!0);break;case j.fS.time:if(!J){J=hn;break}default:if(hn.name in ue){const Fn=ue[hn.name];if(hn.type!==Fn)continue}else ue[hn.name]=hn.type,oe.push(hn.name);const In=JSON.stringify(hn.labels),Zn=ze[In];if(Zn!==void 0?Zn.push(Jt):ze[In]=[Jt],hn.labels!=null)for(const Fn in hn.labels)ye[Fn]=!0}}if(!J)continue;const mt=[],Pt=[],Ot=[],Ft=[];for(let Jt=0;Jt<H.length;Jt++)mt.push({time:J.values.get(Jt),wideRowIndex:Jt});for(const Jt in ze)Pt.push(Jt);for(const Jt in ye)Ot.push(Jt);for(const Jt in qe)Ft.push(Jt);mt.sort((Jt,hn)=>Jt.time-hn.time),Pt.sort(),Ot.sort(),oe.sort();const zt=new Sl.v({...H,meta:{...H.meta,type:qr.P.TimeSeriesLong},fields:[{name:J.name,type:J.type}]});for(const Jt of oe)zt.addField({name:Jt,type:ue[Jt]});for(const Jt of Ot)zt.addField({name:Jt,type:j.fS.string});for(const Jt of mt){const{time:hn,wideRowIndex:In}=Jt;for(const Zn of Pt){const Fn={};for(const ys of Ft)Fn[ys]=H.fields[qe[ys]].values.get(In);let la=0;for(const ys of ze[Zn]){const Ks=H.fields[ys];if(la++===0&&Ks.labels!=null)for(const Lr in Ks.labels)Fn[Lr]=Ks.labels[Lr];Fn[Ks.name]=Ks.values.get(In)}Fn[J.name]=hn,zt.add(Fn)}}L.push(zt)}return L}function Ol(T){return Ml(T,H=>H.type===j.fS.string).map(H=>(H.meta||(H.meta={}),H.meta.type=qr.P.TimeSeriesMulti,H))}const lo={id:ce.W.prepareTimeSeries,name:"Prepare time series",description:"Will stretch data frames from the wide format into the long format. This is really helpful to be able to keep backwards compatibility for panels not supporting the new wide format.",defaultOptions:{},operator:(T,L)=>H=>H.pipe((0,tn.U)(J=>lo.transformer(T,L)(J))),transformer:T=>{const L=T?.format??"wide";if(L==="many"||L==="multi")return ld;if(L==="long")return Pi;const H=de.Ls.get(ge.mi.firstTimeField).get({});return J=>{if(!J.length)return[];const oe=[];for(const ye of J)ye.meta?.type===qr.P.TimeSeriesLong?Ol(ye).forEach(ze=>oe.push(ze)):oe.push(ye);const ue=(0,id._9)({frames:oe,joinBy:H,keepOriginIndices:!0});return ue?(ue.meta||(ue.meta={}),ue.meta.type=qr.P.TimeSeriesWide,[ue]):[]}}},cd={label:"Wide time series",value:wr.TimeSeriesWide,description:"Creates a single frame joined by time",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is shared time field"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"Multiple value fields of any type"))},dd={label:"Multi-frame time series",value:wr.TimeSeriesMulti,description:"Creates a new frame for each time/number pair",info:a.createElement("ul",null,a.createElement("li",null,"Multiple frames"),a.createElement("li",null,"Each frame has two fields: time, value"),a.createElement("li",null,"Time in ascending order"),a.createElement("li",null,"String values are represented as labels"),a.createElement("li",null,"All values are numeric"))},eo={label:"Long time series",value:wr.TimeSeriesLong,description:"Convert each frame to long format",info:a.createElement("ul",null,a.createElement("li",null,"Single frame"),a.createElement("li",null,"1st field is time field"),a.createElement("li",null,"Time in ascending order, but may have duplictes"),a.createElement("li",null,"String values are represented as separate fields rather than as labels"),a.createElement("li",null,"Multiple value fields may exist"))},Vr=[cd,dd,eo];function ud(T){const{options:L,onChange:H}=T,J=(0,De.wW)(Ci),oe=(0,a.useCallback)(ue=>{H({...L,format:ue.value})},[H,L]);return a.createElement(a.Fragment,null,a.createElement(ke.Z,null,a.createElement(tt._,{label:"Format",labelWidth:12},a.createElement(X.Ph,{width:35,options:Vr,value:Vr.find(ue=>ue.value===wr.TimeSeriesMulti&&L.format===wr.TimeSeriesMany?!0:ue.value===L.format)||Vr[0],onChange:oe,className:"flex-grow-1"}))),a.createElement(ke.Z,null,a.createElement(tt._,{label:"Info",labelWidth:12},a.createElement("div",{className:J.info},(Vr.find(ue=>ue.value===L.format)||Vr[0]).info))))}const Ci=T=>({info:k.css`
    margin-left: 20px;
  `}),md={id:lo.id,editor:ud,transformation:lo,name:lo.name,description:lo.description,help:`
  ### Use cases

  This takes query results and transforms them into a predictable timeseries format.
  This transformer may be especially useful when using old panels that only expect the
  many-frame timeseries format.
  `},Ca={id:ce.W.rowsToFields,name:"Rows to fields",description:"Convert each row into a field with dynamic config",defaultOptions:{},operator:T=>L=>L.pipe((0,tn.U)(H=>H.map(J=>fd(T,J))))};function fd(T,L){const H=At(L,T.mappings??[],!0),{nameField:J,valueField:oe}=H;if(!J||!oe)return L;const ue=[];for(let ye=0;ye<J.values.length;ye++){const ze=J.values.get(ye),qe=oe.values.get(ye),mt=at(L,ye,H),Pt=gd(L,ye,H),Ot={name:`${ze}`,type:oe.type,values:new on.G([qe]),config:mt,labels:Pt};ue.push(Ot)}return{fields:ue,length:1}}function gd(T,L,H){const J={...H.nameField.labels};for(let oe=0;oe<T.fields.length;oe++){const ue=T.fields[oe],ye=(0,re.C)(ue,T),ze=H.index[ye];if(ze.handler&&ze.handler.key!==xt.Label)continue;const qe=ue.values.get(L);qe!=null&&(J[ye]=qe)}return J}function pd({input:T,options:L,onChange:H}){return T.length===0?null:a.createElement("div",null,a.createElement(Wt,{frame:T[0],mappings:L.mappings??[],onChange:J=>H({...L,mappings:J}),withNameAndValue:!0}))}const Tl={id:Ca.id,editor:pd,transformation:Ca,name:Ca.name,description:Ca.description,state:ft.BV.beta,help:`
### Use cases 

This transforms rows into separate fields. This can be useful as fields can be styled and configured 
individually, something rows cannot. It can also use additional fields as sources for dynamic field 
configuration or map them to field labels. The additional labels can then be used to define better 
display names for the resulting fields.

Useful when visualization data in:
- Gauge
- Stat
- Pie chart

## Example

Input:

| Name    | Value | Max |
| ------- | ----- | --- |
| ServerA | 10    | 100 |
| ServerB | 20    | 200 |
| ServerC | 30    | 300 |

Output:

| ServerA (config: max=100) | ServerB (config: max=200) | ServerC (config: max=300) |
| ------------------------- | ------------------------- | ------------------------- |
| 10                        | 20                        | 30                        |

As you can see each row in the source data becomes a separate field. Each field now also has a max 
config option set. Options like **Min**, **Max**, **Unit** and **Thresholds** are all part of field 
configuration and if set like this will be used by the visualization instead of any options manually 
configured in the panel editor options pane.

`};var Ko=e(40538),xi=e(71575),Os=e(96366),hd=e(50466),Nr=e(43524),Il=e(14573);const Di={id:ce.W.spatial,name:"Spatial operations",description:"Apply spatial operations to query results",defaultOptions:{},operator:T=>L=>L.pipe((0,qa.z)(H=>(0,es.D)(bi(H,T))))};function to(T){return T.action===Os.JJ.Modify&&T.modify?.op===Os.ac.LineBuilder}async function bi(T,L){const H=await(0,Nr.cJ)(L.source);if(to(L)){const J=await(0,Nr.cJ)(L.modify?.target);return T.map(oe=>{const ue=(0,Nr.g6)(oe,H),ye=(0,Nr.g6)(oe,J);if(ue.field&&ye.field){const ze=[...oe.fields],qe=(0,hd.Fh)(ue.field,ye.field),mt=ze[0];return mt.type===j.fS.geo&&mt!==ue.field&&mt!==ye.field?ze[0]=(0,hd.EK)(mt,qe):ze.unshift(qe),{...oe,fields:ze}}return oe})}return T.map(J=>{let oe=(0,Nr.g6)(J,H);if(oe.field){if(L.action===Os.JJ.Modify){switch(L.modify?.op){case Os.ac.AsLine:let ye=oe.field.name;return(!ye||ye==="Point")&&(ye="Line"),{...J,length:1,fields:[{...oe.field,name:ye,type:j.fS.geo,values:new on.G([(0,Il.Lp)(oe.field)])}]}}return J}const ue=oe.derived?[oe.field,...J.fields]:J.fields.slice(0);if(L.action===Os.JJ.Calculate&&(ue.push((0,Il.N7)(oe.field,L.calculate??{})),oe.derived=!0),oe.derived)return{...J,fields:ue}}return J})}const Mi=(T,L)=>{const H=L.options??{};T.addSelect({path:"action",name:"Action",description:"",defaultValue:Os.JJ.Prepare,settings:{options:[{value:Os.JJ.Prepare,label:"Prepare spatial field",description:"Set a geometry field based on the results of other fields"},{value:Os.JJ.Calculate,label:"Calculate value",description:"Use the geometry to define a new field (heading/distance/area)"},{value:Os.JJ.Modify,label:"Transform",description:"Apply spatial operations to the geometry"}]}}),H.action===Os.JJ.Calculate?T.addSelect({path:"calculate.calc",name:"Function",description:"",defaultValue:Os.Ii.Heading,settings:{options:[{value:Os.Ii.Heading,label:"Heading"},{value:Os.Ii.Area,label:"Area"},{value:Os.Ii.Distance,label:"Distance"}]}}):H.action===Os.JJ.Modify&&T.addSelect({path:"modify.op",name:"Operation",description:"",defaultValue:Os.ac.AsLine,settings:{options:[{value:Os.ac.AsLine,label:"As line",description:"Create a single line feature with a vertex at each row"},{value:Os.ac.LineBuilder,label:"Line builder",description:"Create a line between two points"}]}}),to(H)?(T.addNestedOptions({category:["Source"],path:"source",build:(J,oe)=>{const ue=H.source??{};ue.mode||(ue.mode=Ko.q1.Auto),(0,xi.C)("Point","",J,ue)}}),T.addNestedOptions({category:["Target"],path:"modify",build:(J,oe)=>{const ue=H.modify?.target??{};ue.mode||(ue.mode=Ko.q1.Auto),(0,xi.C)("Point","target.",J,ue)}})):(0,xi.C)("Location","source.",T,H.source)},Vo=T=>{(0,a.useEffect)(()=>{if(!T.options.source?.mode){const J=Le(Mi);T.onChange({...J,...T.options}),console.log("geometry useEffect",J)}},[]);const L=Eo((0,De.l4)()),H=Oe(T,Mi);return a.createElement("div",null,a.createElement("div",null,H.items.map(J=>J.render())),a.createElement("div",null,H.categories.map(J=>a.createElement("div",{key:J.props.id,className:L.wrap},a.createElement("h5",null,J.props.title),a.createElement("div",{className:L.item},J.items.map(oe=>oe.render()))))))},Eo=T=>({wrap:k.css`
      margin-bottom: 20px;
    `,item:k.css`
      border-left: 4px solid ${T.colors.border.strong};
      padding-left: 10px;
    `}),vd={id:ce.W.spatial,editor:Vo,transformation:Di,name:Di.name,description:Di.description,state:ft.BV.alpha};var yo=e(34472);const co={id:ce.W.timeSeriesTable,name:"Time series to table transform",description:"Time series to table rows",defaultOptions:{},operator:T=>L=>L.pipe((0,tn.U)(H=>Rl(T,H)))};function Rl(T,L){const H=Al(L),J={},oe=[];for(const ue of L){if(!(0,yo.pP)(ue)){oe.push(ue);continue}const ye=ue.refId??"",ze=H[ye]??{};let qe=J[ye];if(!qe){qe={name:"Trend"+(ye&&Object.keys(H).length>1?` #${ye}`:""),type:j.fS.frame,config:{},values:new on.G},J[ye]=qe;const Pt=new Sl.v;for(const Ot of Object.values(ze))Pt.addField(Ot);Pt.addField(qe),Pt.refId=ye,oe.push(Pt)}const mt=ue.fields[1].labels;for(const Pt of Object.keys(ze)){const Ot=mt?.[Pt]??null;ze[Pt].values.add(Ot)}qe.values.add(ue)}return oe}function Al(T){const L={};for(const H of T){if(!(0,yo.pP)(H))continue;const J=H.refId??"";L[J]||(L[J]={});for(const oe of H.fields)if(oe.labels)for(const ue of Object.keys(oe.labels))L[J][ue]||(L[J][ue]={name:ue,type:j.fS.string,config:{},values:new on.G})}return L}function Ed({input:T,options:L,onChange:H}){return T.length===0?null:a.createElement("div",null)}const yd={id:co.id,editor:Ed,transformation:co,name:co.name,description:co.description,state:ft.BV.beta,help:""},ks=()=>[we,As,yt,Xa,Qe,Ze,or,Bt,$n,ea,ir,rr,fn,Pr,hr,Tl,Vt,md,Qn,vd,nr,La,he,Ls,yr,Ya,Br,...G.v.featureToggles.timeSeriesTable?[yd]:[]],zo=(window.__grafana_public_path__??"public/")+"lib/monaco/min/vs",Pd=[[`${zo}/language/kusto/bridge.min.js`],[`${zo}/language/kusto/kusto.javascript.client.min.js`,`${zo}/language/kusto/newtonsoft.json.min.js`,`${zo}/language/kusto/Kusto.Language.Bridge.min.js`]];function Cd(T){return new Promise((L,H)=>{let J;typeof T=="string"?(J=document.createElement("script"),J.src=T):J=T,J.onload=()=>L(),J.onerror=oe=>H(oe),document.body.appendChild(J)})}const xd=()=>new Promise(T=>{window.__monacoKustoResolvePromise=T;const L=document.createElement("script");return L.innerHTML=`require(['vs/language/kusto/monaco.contribution'], function() {
      window.__monacoKustoResolvePromise();
    });`,document.body.appendChild(L)});async function Si(){let T=Promise.resolve();for(const L of Pd){await T;const H=L.filter(J=>!document.querySelector(`script[src="${J}"]`)).map(J=>Cd(J));await Promise.all(H)}await xd()}function Dd(){return[{id:"kusto",name:"kusto",init:Si}]}var Cs=e(58166),ur=e(36635),fs=e(70356),mr=e(41818),Oi=e(53546),Po=e(5191),Ll=e(78427),Ti=e(85511),Cr=e(31953),no=e(44407),Ii=e(36578),Bl=e(16534),bd=e(86824),Md=e(5080),Ho=e(80472),Sd=e(66847);const Od=()=>{const T=!!Q.ZP.oauth;return{saml:{bgColor:"#464646",enabled:Q.ZP.samlEnabled,name:Q.ZP.samlName||Sd.bm,icon:"key-skeleton-alt"},google:{bgColor:"#e84d3c",enabled:T&&Boolean(Q.ZP.oauth.google),name:Q.ZP.oauth?.google?.name||"Google",icon:Q.ZP.oauth?.google?.icon||"google"},azuread:{bgColor:"#2f2f2f",enabled:T&&Boolean(Q.ZP.oauth.azuread),name:Q.ZP.oauth?.azuread?.name||"Microsoft",icon:Q.ZP.oauth?.azuread?.icon||"microsoft"},github:{bgColor:"#464646",enabled:T&&Boolean(Q.ZP.oauth.github),name:Q.ZP.oauth?.github?.name||"GitHub",icon:Q.ZP.oauth?.github?.icon||"github"},gitlab:{bgColor:"#fc6d26",enabled:T&&Boolean(Q.ZP.oauth.gitlab),name:Q.ZP.oauth?.gitlab?.name||"GitLab",icon:Q.ZP.oauth?.gitlab?.icon||"gitlab"},grafanacom:{bgColor:"#262628",enabled:T&&Boolean(Q.ZP.oauth.grafana_com),name:Q.ZP.oauth?.grafana_com?.name||"Grafana.com",icon:Q.ZP.oauth?.grafana_com?.icon||"grafana",hrefName:"grafana_com"},okta:{bgColor:"#2f2f2f",enabled:T&&Boolean(Q.ZP.oauth.okta),name:Q.ZP.oauth?.okta?.name||"Okta",icon:Q.ZP.oauth?.okta?.icon||"okta"},oauth:{bgColor:"#262628",enabled:T&&Boolean(Q.ZP.oauth.generic_oauth),name:Q.ZP.oauth?.generic_oauth?.name||"OAuth",icon:Q.ZP.oauth?.generic_oauth?.icon||"signin",hrefName:"generic_oauth"}}},ko=T=>({button:k.css`
      color: #d8d9da;
      position: relative;
    `,buttonIcon:k.css`
      position: absolute;
      left: ${T.spacing(1)};
      top: 50%;
      transform: translateY(-50%);
    `,divider:{base:k.css`
        color: ${T.colors.text};
        display: flex;
        margin-bottom: ${T.spacing(1)};
        justify-content: space-between;
        text-align: center;
        width: 100%;
      `,line:k.css`
        width: 100px;
        height: 10px;
        border-bottom: 1px solid ${T.colors.text};
      `}}),Td=()=>{const T=(0,De.wW)(ko);return a.createElement(a.Fragment,null,a.createElement("div",{className:T.divider.base},a.createElement("div",null,a.createElement("div",{className:T.divider.line})),a.createElement("div",null,a.createElement("span",null,!Q.ZP.disableLoginForm&&a.createElement("span",null,"or"))),a.createElement("div",null,a.createElement("div",{className:T.divider.line}))),a.createElement("div",{className:"clearfix"}))};function Id(T,L,H){return(0,k.cx)(L.button,k.css`
      background-color: ${T.bgColor};
      color: ${H.colors.getContrastText(T.bgColor)};

      &:hover {
        background-color: ${H.colors.emphasize(T.bgColor,.15)};
        box-shadow: ${H.shadows.z1};
      }
    `)}const Rd=()=>{const T=(0,E.pickBy)(Od(),oe=>oe.enabled),L=Object.keys(T).length>0,H=(0,De.l4)(),J=(0,De.wW)(ko);return L?a.createElement(wn.wc,null,a.createElement(Td,null),Object.entries(T).map(([oe,ue])=>a.createElement(ee.Qj,{key:oe,className:Id(ue,J,H),href:`login/${ue.hrefName?ue.hrefName:oe}`,target:"_self",fullWidth:!0},a.createElement(na.J,{className:J.buttonIcon,name:ue.icon}),"Sign in with ",ue.name))):null},Go=()=>{const T=(0,Q.iE)().verifyEmailEnabled?`${(0,Q.iE)().appSubUrl}/verify`:`${(0,Q.iE)().appSubUrl}/signup`,L=(0,k.css)({paddingTop:"16px"});return a.createElement(wn.wc,null,a.createElement("div",{className:L},"New to Grafana?"),a.createElement(ee.Qj,{className:k.css`
          width: 100%;
          justify-content: center;
        `,href:T,variant:"secondary",fill:"outline"},"Sign up"))},Ad=k.css`
  padding: 0;
  margin-top: 4px;
`,Yo=()=>(document.title=Ii.c.AppTitle,a.createElement(Ho.dd,null,a.createElement(bd.Z,null,({loginHint:T,passwordHint:L,disableLoginForm:H,disableUserSignUp:J,login:oe,isLoggingIn:ue,changePassword:ye,skipPasswordChange:ze,isChangingPassword:qe})=>a.createElement(a.Fragment,null,!qe&&a.createElement(Ho.$s,null,!H&&a.createElement(Md.U,{onSubmit:oe,loginHint:T,passwordHint:L,isLoggingIn:ue},a.createElement(wn.Lh,{justify:"flex-end"},a.createElement(ee.Qj,{className:Ad,fill:"text",href:`${Q.ZP.appSubUrl}/user/password/send-reset-email`},"Forgot your password?"))),a.createElement(Rd,null),!J&&a.createElement(Go,null)),qe&&a.createElement(Ho.$s,null,a.createElement(Bl.G,{onSubmit:ye,onSkip:()=>ze()}))))));var ts=e(82002),wl=e(66121),fr=e(79396),za=e(77582),bn=e(81168),Nl=e(38849);const Ld="dddd YYYY-MM-DD HH:mm zz",Bd="/admin/ldap";class Co extends a.PureComponent{constructor(){super(...arguments),this.onUserSync=()=>{this.props.onUserSync()}}render(){const{ldapSyncInfo:L,user:H}=this.props,oe=L&&L.nextSync?(0,Nl.dq)(L.nextSync,{format:Ld}):"",ue=`${Bd}?user=${H&&H.login}`,ye=za.Vt.hasPermission(bn.AccessControlAction.LDAPUsersRead),ze=za.Vt.hasPermission(bn.AccessControlAction.LDAPUsersSync);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"External sync"),a.createElement("td",null,"User synced via LDAP. Some changes must be done in LDAP or mappings."),a.createElement("td",null,a.createElement("span",{className:"label label-tag"},"LDAP"))),a.createElement("tr",null,L.enabled?a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},oe)):a.createElement(a.Fragment,null,a.createElement("td",null,"Next scheduled synchronization"),a.createElement("td",{colSpan:2},"Not enabled")))))),a.createElement("div",{className:"gf-form-button-row"},ze&&a.createElement(ee.zx,{variant:"secondary",onClick:this.onUserSync},"Sync user"),ye&&a.createElement(ee.Qj,{variant:"secondary",href:ue},"Debug LDAP Mapping"))))}}var xo=e(71657),jo=e(35029),ao=e(6554),Ri=e(66226),Ai=e(11630),wd=e(671),Do=e(29930);function Li({onSelected:T,className:L,inputId:H,autoFocus:J,excludeOrgs:oe}){(0,a.useEffect)(()=>{J&&H&&document.getElementById(H)?.focus()},[J,H]);const[ue,ye]=(0,wd.Z)(async()=>{const qe=(await(0,Do.i)().get("/api/orgs")).map(mt=>({value:{id:mt.id,name:mt.name},label:mt.name}));if(oe){let mt=oe.map(Ot=>Ot.orgId);return qe.filter(Ot=>!mt.includes(Ot.value.id))}else return qe});return a.createElement(X.qb,{inputId:H,className:L,isLoading:ue.loading,defaultOptions:!0,isSearchable:!1,loadOptions:ye,onChange:T,placeholder:"Select organization",noOptionsMessage:"No organizations found"})}var Bi=e(65135);class Nd extends a.PureComponent{constructor(){super(...arguments),this.addToOrgButtonRef=a.createRef(),this.state={showAddOrgModal:!1},this.showOrgAddModal=()=>{this.setState({showAddOrgModal:!0})},this.dismissOrgAddModal=()=>{this.setState({showAddOrgModal:!1},()=>{this.addToOrgButtonRef.current?.focus()})}}render(){const{user:L,orgs:H,isExternalUser:J,onOrgRoleChange:oe,onOrgRemove:ue,onOrgAdd:ye}=this.props,{showAddOrgModal:ze}=this.state,qe=k.css`
      margin-top: 0.8rem;
    `,mt=za.Vt.hasPermission(bn.AccessControlAction.OrgUsersAdd)&&!J;return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Organizations"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,H.map((Pt,Ot)=>a.createElement(Ul,{key:`${Pt.orgId}-${Ot}`,isExternalUser:J,user:L,org:Pt,onOrgRoleChange:oe,onOrgRemove:ue}))))),a.createElement("div",{className:qe},mt&&a.createElement(ee.zx,{variant:"secondary",onClick:this.showOrgAddModal,ref:this.addToOrgButtonRef},"Add user to organization")),a.createElement(wi,{user:L,userOrgs:H,isOpen:ze,onOrgAdd:ye,onDismiss:this.dismissOrgAddModal})))}}const Ud=(0,ne.B)(T=>({removeButton:k.css`
      margin-right: 0.6rem;
      text-decoration: underline;
      color: ${T.v1.palette.blue95};
    `,label:k.css`
      font-weight: 500;
    `,disabledTooltip:k.css`
      display: flex;
    `,tooltipItem:k.css`
      margin-left: 5px;
    `,tooltipItemLink:k.css`
      color: ${T.v1.palette.blue95};
    `,rolePickerWrapper:k.css`
      display: flex;
    `,rolePicker:k.css`
      flex: auto;
      margin-right: ${T.spacing(1)};
    `}));class Fd extends a.PureComponent{constructor(){super(...arguments),this.state={currentRole:this.props.org.role,isChangingRole:!1,roleOptions:[]},this.onOrgRemove=async()=>{const{org:L}=this.props;this.props.onOrgRemove(L.orgId)},this.onChangeRoleClick=()=>{const{org:L}=this.props;this.setState({isChangingRole:!0,currentRole:L.role})},this.onOrgRoleChange=L=>{this.setState({currentRole:L})},this.onOrgRoleSave=()=>{this.props.onOrgRoleChange(this.props.org.orgId,this.state.currentRole)},this.onCancelClick=()=>{this.setState({isChangingRole:!1})},this.onBasicRoleChange=L=>{this.props.onOrgRoleChange(this.props.org.orgId,L)}}componentDidMount(){za.Vt.licensedAccessControlEnabled()&&za.Vt.hasPermission(bn.AccessControlAction.ActionRolesList)&&(0,Ai.ul)(this.props.org.orgId).then(L=>this.setState({roleOptions:L})).catch(L=>console.error(L))}render(){const{user:L,org:H,isExternalUser:J,theme:oe}=this.props,ue=L?.authLabels?.length&&L?.authLabels[0],ye=ue?`Synced via ${ue}`:"",{currentRole:ze,isChangingRole:qe}=this.state,mt=Ud(oe),Pt=(0,k.cx)("width-16",mt.label),Ot=za.Vt.hasPermission(bn.AccessControlAction.OrgUsersWrite),Ft=za.Vt.hasPermission(bn.AccessControlAction.OrgUsersRemove)&&!J,zt=J||!Ot,Jt=`${H.name}-input`;return a.createElement("tr",null,a.createElement("td",{className:Pt},a.createElement("label",{htmlFor:Jt},H.name)),za.Vt.licensedAccessControlEnabled()?a.createElement("td",null,a.createElement("div",{className:mt.rolePickerWrapper},a.createElement("div",{className:mt.rolePicker},a.createElement(Ri.R,{userId:L?.id||0,orgId:H.orgId,basicRole:H.role,roleOptions:this.state.roleOptions,onBasicRoleChange:this.onBasicRoleChange,basicRoleDisabled:zt})),J&&a.createElement(Js,{lockMessage:ye}))):a.createElement(a.Fragment,null,qe?a.createElement("td",null,a.createElement(Bi.A,{inputId:Jt,value:ze,onChange:this.onOrgRoleChange,autoFocus:!0})):a.createElement("td",{className:"width-25"},H.role),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Ot&&a.createElement(Tf,{lockMessage:ye,isExternalUser:J,onChangeRoleClick:this.onChangeRoleClick,onCancelClick:this.onCancelClick,onOrgRoleSave:this.onOrgRoleSave})))),a.createElement("td",{colSpan:1},a.createElement("div",{className:"pull-right"},Ft&&a.createElement(xo.p,{confirmText:"Confirm removal",confirmVariant:"destructive",onCancel:this.onCancelClick,onConfirm:this.onOrgRemove,autoFocus:!0},"Remove from organization"))))}}const Ul=(0,De.HE)(Fd),Wd=(0,ne.B)(()=>({modal:k.css`
    width: 500px;
  `,buttonRow:k.css`
    text-align: center;
  `,modalContent:k.css`
    overflow: visible;
  `}));class wi extends a.PureComponent{constructor(){super(...arguments),this.state={selectedOrg:null,role:bn.OrgRole.Viewer,roleOptions:[],pendingOrgId:null,pendingUserId:null,pendingRoles:[]},this.onOrgSelect=L=>{const H=this.props.userOrgs.find(J=>J.orgId===L.value?.id);this.setState({selectedOrg:L.value,role:H?.role||bn.OrgRole.Viewer}),za.Vt.licensedAccessControlEnabled()&&za.Vt.hasPermission(bn.AccessControlAction.ActionRolesList)&&(0,Ai.ul)(L.value?.id).then(J=>this.setState({roleOptions:J})).catch(J=>console.error(J))},this.onOrgRoleChange=L=>{this.setState({role:L})},this.onAddUserToOrg=async()=>{const{selectedOrg:L,role:H}=this.state;this.props.onOrgAdd(L.id,H),za.Vt.licensedAccessControlEnabled()&&za.Vt.hasPermission(bn.AccessControlAction.ActionUserRolesAdd)&&this.state.pendingUserId&&(await(0,Ai.hB)(this.state.pendingRoles,this.state.pendingUserId,this.state.pendingOrgId),this.setState({pendingOrgId:null,pendingRoles:[],pendingUserId:null}))},this.onCancel=()=>{this.setState({selectedOrg:null,pendingRoles:[],pendingOrgId:null,pendingUserId:null}),this.props.onDismiss&&this.props.onDismiss()},this.onRoleUpdate=async(L,H,J)=>{this.setState({pendingRoles:L,pendingOrgId:J,pendingUserId:H})}}render(){const{isOpen:L,user:H,userOrgs:J}=this.props,{role:oe,roleOptions:ue,selectedOrg:ye}=this.state,ze=Wd();return a.createElement(jo.u,{className:ze.modal,contentClassName:ze.modalContent,title:"Add to an organization",isOpen:L,onDismiss:this.onCancel},a.createElement(ia.g,{label:"Organization"},a.createElement(Li,{inputId:"new-org-input",onSelected:this.onOrgSelect,excludeOrgs:J,autoFocus:!0})),a.createElement(ia.g,{label:"Role",disabled:ye===null},za.Vt.accessControlEnabled()?a.createElement(Ri.R,{userId:H?.id||0,orgId:ye?.id,basicRole:oe,onBasicRoleChange:this.onOrgRoleChange,basicRoleDisabled:!1,roleOptions:ue,apply:!0,onApplyRoles:this.onRoleUpdate,pendingRoles:this.state.pendingRoles}):a.createElement(Bi.A,{inputId:"new-org-role-input",value:oe,onChange:this.onOrgRoleChange})),a.createElement(jo.u.ButtonRow,null,a.createElement(wn.Lh,{spacing:"md",justify:"center"},a.createElement(ee.zx,{variant:"secondary",fill:"outline",onClick:this.onCancel},"Cancel"),a.createElement(ee.zx,{variant:"primary",disabled:ye===null,onClick:this.onAddUserToOrg},"Add to organization"))))}}const $d=T=>({disabledTooltip:k.css`
    display: flex;
  `,tooltipItemLink:k.css`
    color: ${T.v1.palette.blue95};
  `,lockMessageClass:k.css`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `,icon:k.css`
    line-height: 2;
  `});function Tf({lockMessage:T,onChangeRoleClick:L,isExternalUser:H,onOrgRoleSave:J,onCancelClick:oe}){const ue=(0,De.wW)($d);return a.createElement("div",{className:ue.disabledTooltip},H?a.createElement(a.Fragment,null,a.createElement("span",{className:ue.lockMessageClass},T),a.createElement(ao.u,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:ue.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement("div",{className:ue.icon},a.createElement(na.J,{name:"question-circle"})))):a.createElement(xo.p,{confirmText:"Save",onClick:L,onCancel:oe,onConfirm:J,disabled:H},"Change role"))}const Js=({lockMessage:T})=>{const L=(0,De.wW)(Qo);return a.createElement("div",{className:L.disabledTooltip},a.createElement("span",{className:L.lockMessageClass},T),a.createElement(ao.u,{placement:"right-end",interactive:!0,content:a.createElement("div",null,"This user's built-in role is not editable because it is synchronized from your auth provider. Refer to the\xA0",a.createElement("a",{className:L.tooltipItemLink,href:"https://grafana.com/docs/grafana/latest/auth",rel:"noreferrer noopener",target:"_blank"},"Grafana authentication docs"),"\xA0for details.")},a.createElement(na.J,{name:"question-circle"})))},Qo=T=>({disabledTooltip:k.css`
    display: flex;
  `,tooltipItemLink:k.css`
    color: ${T.v1.palette.blue95};
  `,lockMessageClass:k.css`
    font-style: italic;
    margin-left: 1.8rem;
    margin-right: 0.6rem;
  `}),zr=[{label:"Yes",value:!0},{label:"No",value:!1}];function Zo({isGrafanaAdmin:T,onGrafanaAdminChange:L}){const[H,J]=(0,a.useState)(!1),[oe,ue]=(0,a.useState)(T),ye=()=>J(!0),ze=()=>{J(!1),ue(T)},qe=()=>L(oe),mt=za.Vt.hasPermission(bn.AccessControlAction.UsersPermissionsUpdate);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Permissions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Grafana Admin"),H?a.createElement("td",{colSpan:2},a.createElement(Ce.S,{options:zr,value:oe,onChange:ue,autoFocus:!0})):a.createElement("td",{colSpan:2},T?a.createElement(a.Fragment,null,a.createElement(na.J,{name:"shield"})," Yes"):a.createElement(a.Fragment,null,"No")),a.createElement("td",null,mt&&a.createElement(xo.p,{onClick:ye,onConfirm:qe,onCancel:ze,confirmText:"Change"},"Change"))))))))}var Rr=e(98102),Hr=e(50869);function Kd({user:T,onUserUpdate:L,onUserDelete:H,onUserDisable:J,onUserEnable:oe,onPasswordChange:ue}){const[ye,ze]=(0,a.useState)(!1),[qe,mt]=(0,a.useState)(!1),Pt=(0,a.useRef)(null),Ot=Mr=>()=>{ze(Mr),!Mr&&Pt.current&&Pt.current.focus()},Ft=(0,a.useRef)(null),zt=Mr=>()=>{mt(Mr),!Mr&&Ft.current&&Ft.current.focus()},Jt=()=>H(T.id),hn=()=>J(T.id),In=()=>oe(T.id),Zn=Mr=>{L({...T,name:Mr})},Fn=Mr=>{L({...T,email:Mr})},la=Mr=>{L({...T,login:Mr})},ys=T.authLabels?.length&&T.authLabels[0],Ks=ys?`Synced via ${ys}`:"",Lr=T.isExternal||!za.Vt.hasPermissionInMetadata(bn.AccessControlAction.UsersWrite,T),oo=T.isExternal||!za.Vt.hasPermissionInMetadata(bn.AccessControlAction.UsersPasswordUpdate,T),yi=za.Vt.hasPermissionInMetadata(bn.AccessControlAction.UsersDelete,T),Jr=za.Vt.hasPermissionInMetadata(bn.AccessControlAction.UsersDisable,T),Sf=za.Vt.hasPermissionInMetadata(bn.AccessControlAction.UsersEnable,T);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"User information"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement(so,{label:"Name",value:T.name,locked:Lr,lockMessage:Ks,onChange:Zn}),a.createElement(so,{label:"Email",value:T.email,locked:Lr,lockMessage:Ks,onChange:Fn}),a.createElement(so,{label:"Username",value:T.login,locked:Lr,lockMessage:Ks,onChange:la}),a.createElement(so,{label:"Password",value:"********",inputType:"password",locked:oo,lockMessage:Ks,onChange:ue})))),a.createElement("div",{className:Ni.buttonRow},yi&&a.createElement(a.Fragment,null,a.createElement(ee.zx,{variant:"destructive",onClick:Ot(!0),ref:Pt},"Delete user"),a.createElement(Rr.s,{isOpen:ye,title:"Delete user",body:"Are you sure you want to delete this user?",confirmText:"Delete user",onConfirm:Jt,onDismiss:Ot(!1)})),T.isDisabled&&Sf&&a.createElement(ee.zx,{variant:"secondary",onClick:In},"Enable user"),!T.isDisabled&&Jr&&a.createElement(a.Fragment,null,a.createElement(ee.zx,{variant:"secondary",onClick:zt(!0),ref:Ft},"Disable user"),a.createElement(Rr.s,{isOpen:qe,title:"Disable user",body:"Are you sure you want to disable this user?",confirmText:"Disable user",onConfirm:hn,onDismiss:zt(!1)})))))}const Ni={buttonRow:k.css`
    margin-top: 0.8rem;
    > * {
      margin-right: 16px;
    }
  `};class so extends a.PureComponent{constructor(){super(...arguments),this.state={editing:!1,value:this.props.value||""},this.setInputElem=L=>{this.inputElem=L},this.onEditClick=()=>{this.props.inputType==="password"?this.setState({editing:!0,value:""},this.focusInput):this.setState({editing:!0},this.focusInput)},this.onCancelClick=()=>{this.setState({editing:!1,value:this.props.value||""})},this.onInputChange=(L,H)=>{H!==Hr.G.Invalid&&this.setState({value:L.target.value})},this.onInputBlur=(L,H)=>{H!==Hr.G.Invalid&&this.setState({value:L.target.value})},this.focusInput=()=>{this.inputElem&&this.inputElem.focus&&this.inputElem.focus()},this.onSave=()=>{this.props.onChange&&this.props.onChange(this.state.value)}}render(){const{label:L,locked:H,lockMessage:J,inputType:oe}=this.props,{value:ue}=this.state,ye=(0,k.cx)("width-16",k.css`
        font-weight: 500;
      `);if(H)return a.createElement(Vd,{label:L,value:ue,lockMessage:J});const ze=`${L}-input`;return a.createElement("tr",null,a.createElement("td",{className:ye},a.createElement("label",{htmlFor:ze},L)),a.createElement("td",{className:"width-25",colSpan:2},this.state.editing?a.createElement(ae.I,{id:ze,type:oe,defaultValue:ue,onBlur:this.onInputBlur,onChange:this.onInputChange,ref:this.setInputElem,width:30}):a.createElement("span",null,this.props.value)),a.createElement("td",null,a.createElement(xo.p,{confirmText:"Save",onClick:this.onEditClick,onConfirm:this.onSave,onCancel:this.onCancelClick},"Edit")))}}so.defaultProps={value:"",locked:!1,lockMessage:"",inputType:"text"};const Vd=({label:T,value:L,lockMessage:H})=>{const J=k.css`
    font-style: italic;
    margin-right: 0.6rem;
  `,oe=(0,k.cx)("width-16",k.css`
      font-weight: 500;
    `);return a.createElement("tr",null,a.createElement("td",{className:oe},T),a.createElement("td",{className:"width-25",colSpan:2},L),a.createElement("td",null,a.createElement("span",{className:J},H)))};var Ia=e(35287);class zd extends a.PureComponent{constructor(){super(...arguments),this.forceAllLogoutButton=a.createRef(),this.state={showLogoutModal:!1},this.showLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!0})},this.dismissLogoutConfirmationModal=()=>{this.setState({showLogoutModal:!1},()=>{this.forceAllLogoutButton.current?.focus()})},this.onSessionRevoke=L=>()=>{this.props.onSessionRevoke(L)},this.onAllSessionsRevoke=()=>{this.setState({showLogoutModal:!1}),this.props.onAllSessionsRevoke()}}render(){const{sessions:L}=this.props,{showLogoutModal:H}=this.state,J=k.css`
      margin-top: 0.8rem;
    `,oe=za.Vt.hasPermission(bn.AccessControlAction.UsersLogout);return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Sessions"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Last seen"),a.createElement("th",null,"Logged on"),a.createElement("th",null,"IP address"),a.createElement("th",{colSpan:2},"Browser and OS"))),a.createElement("tbody",null,L&&L.map((ue,ye)=>a.createElement("tr",{key:`${ue.id}-${ye}`},a.createElement("td",null,ue.isActive?"Now":ue.seenAt),a.createElement("td",null,(0,Ia.$q)(ue.createdAt,{dateStyle:"long"})),a.createElement("td",null,ue.clientIp),a.createElement("td",null,`${ue.browser} on ${ue.os} ${ue.osVersion}`),a.createElement("td",null,a.createElement("div",{className:"pull-right"},oe&&a.createElement(xo.p,{confirmText:"Confirm logout",confirmVariant:"destructive",onConfirm:this.onSessionRevoke(ue.id),autoFocus:!0},"Force logout")))))))),a.createElement("div",{className:J},oe&&L.length>0&&a.createElement(ee.zx,{variant:"secondary",onClick:this.showLogoutConfirmationModal,ref:this.forceAllLogoutButton},"Force logout from all devices"),a.createElement(Rr.s,{isOpen:H,title:"Force logout from all devices",body:"Are you sure you want to force logout from all devices?",confirmText:"Force logout",onConfirm:this.onAllSessionsRevoke,onDismiss:this.dismissLogoutConfirmationModal}))))}}const Hd=zd;var Ts=e(37592);class kd extends a.PureComponent{constructor(){super(...arguments),this.onUserUpdate=L=>{this.props.updateUser(L)},this.onPasswordChange=L=>{const{user:H,setUserPassword:J}=this.props;H&&J(H.id,L)},this.onUserDelete=L=>{this.props.deleteUser(L)},this.onUserDisable=L=>{this.props.disableUser(L)},this.onUserEnable=L=>{this.props.enableUser(L)},this.onGrafanaAdminChange=L=>{const{user:H,updateUserPermissions:J}=this.props;H&&J(H.id,L)},this.onOrgRemove=L=>{const{user:H,deleteOrgUser:J}=this.props;H&&J(H.id,L)},this.onOrgRoleChange=(L,H)=>{const{user:J,updateOrgUserRole:oe}=this.props;J&&oe(J.id,L,H)},this.onOrgAdd=(L,H)=>{const{user:J,addOrgUser:oe}=this.props;J&&oe(J,L,H)},this.onSessionRevoke=L=>{const{user:H,revokeSession:J}=this.props;H&&J(L,H.id)},this.onAllSessionsRevoke=()=>{const{user:L,revokeAllSessions:H}=this.props;L&&H(L.id)},this.onUserSync=()=>{const{user:L,syncLdapUser:H}=this.props;L&&H(L.id)}}async componentDidMount(){const{match:L,loadAdminUserPage:H}=this.props;H(parseInt(L.params.id,10))}render(){const{user:L,orgs:H,sessions:J,ldapSyncInfo:oe,isLoading:ue}=this.props,ye=L?.isExternal&&L?.authLabels?.includes("LDAP"),ze=za.Vt.hasPermission(bn.AccessControlAction.UsersAuthTokenList),qe=za.Vt.hasPermission(bn.AccessControlAction.LDAPStatusRead),mt=!Q.ZP.auth.DisableSyncLock&&L?.isExternallySynced,Pt={text:L?.login??"",icon:"shield",breadcrumbs:[{title:"Users",url:"admin/users"}],subTitle:"Manage settings for an individual user."};return a.createElement(fr.T,{navId:"global-users",pageNav:Pt},a.createElement(fr.T.Contents,{isLoading:ue},L&&a.createElement(a.Fragment,null,a.createElement(Kd,{user:L,onUserUpdate:this.onUserUpdate,onUserDelete:this.onUserDelete,onUserDisable:this.onUserDisable,onUserEnable:this.onUserEnable,onPasswordChange:this.onPasswordChange}),ye&&mt&&(0,wl.v)("ldapsync")&&oe&&qe&&a.createElement(Co,{ldapSyncInfo:oe,user:L,onUserSync:this.onUserSync}),a.createElement(Zo,{isGrafanaAdmin:L.isGrafanaAdmin,onGrafanaAdminChange:this.onGrafanaAdminChange})),H&&a.createElement(Nd,{user:L,orgs:H,isExternalUser:mt,onOrgRemove:this.onOrgRemove,onOrgRoleChange:this.onOrgRoleChange,onOrgAdd:this.onOrgAdd}),J&&ze&&a.createElement(Hd,{sessions:J,onSessionRevoke:this.onSessionRevoke,onAllSessionsRevoke:this.onAllSessionsRevoke})))}}const Gd=T=>({user:T.userAdmin.user,sessions:T.userAdmin.sessions,orgs:T.userAdmin.orgs,ldapSyncInfo:T.ldap.syncInfo,isLoading:T.userAdmin.isLoading,error:T.userAdmin.error}),bo={loadAdminUserPage:Ts.PK,updateUser:Ts.Nq,setUserPassword:Ts.tQ,disableUser:Ts.B9,enableUser:Ts.Dx,deleteUser:Ts.h8,updateUserPermissions:Ts.Xx,addOrgUser:Ts.bN,updateOrgUserRole:Ts.Jk,deleteOrgUser:Ts.uV,revokeSession:Ts._1,revokeAllSessions:Ts.Fm,syncLdapUser:Ts.CP},Yd=(0,ur.connect)(Gd,bo)(kd);var Fl=e(86245);const Rf=({ldapConnectionInfo:T})=>a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Connection"),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Host"),a.createElement("th",{colSpan:2},"Port"))),a.createElement("tbody",null,T&&T.map((L,H)=>a.createElement("tr",{key:H},a.createElement("td",null,L.host),a.createElement("td",null,L.port),a.createElement("td",null,L.available?a.createElement(na.J,{name:"check",className:"pull-right"}):a.createElement(na.J,{name:"exclamation-triangle",className:"pull-right"}))))))),a.createElement("div",{className:"gf-form-group"},a.createElement(Mo,{ldapConnectionInfo:T})))),Mo=({ldapConnectionInfo:T})=>{if(!T.some(oe=>oe.error))return null;const H=[];T.forEach(oe=>{oe.error&&H.push(oe)});const J=H.map((oe,ue)=>a.createElement("div",{key:ue},a.createElement("span",{style:{fontWeight:500}},oe.host,":",oe.port,a.createElement("br",null)),a.createElement("span",null,oe.error),ue!==H.length-1&&a.createElement(a.Fragment,null,a.createElement("br",null),a.createElement("br",null))));return a.createElement(Ta.b,{title:"Connection error",severity:bn.AppNotificationSeverity.Error},J)};var kr=e(67487);const jd="dddd YYYY-MM-DD HH:mm zz";class Qd extends a.PureComponent{constructor(){super(...arguments),this.state={isSyncing:!1},this.handleSyncClick=()=>{this.setState({isSyncing:!this.state.isSyncing})}}render(){const{ldapSyncInfo:L}=this.props,{isSyncing:H}=this.state,J=(0,Nl.dq)(L.nextSync,{format:jd});return a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"LDAP Synchronisation",a.createElement(ee.zx,{className:"pull-right",onClick:this.handleSyncClick,hidden:!0},a.createElement("span",{className:"btn-title"},"Bulk-sync now"),H&&a.createElement(kr.$,{inline:!0}))),a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"Active synchronisation"),a.createElement("td",{colSpan:2},L.enabled?"Enabled":"Disabled")),a.createElement("tr",null,a.createElement("td",null,"Scheduled"),a.createElement("td",null,L.schedule)),a.createElement("tr",null,a.createElement("td",null,"Next scheduled synchronisation"),a.createElement("td",null,J)))))))}}const Zd=({groups:T,showAttributeMapping:L})=>{const H=L?T:T.filter(J=>J.orgRole);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,L&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organization",a.createElement(ao.u,{placement:"top",content:"Only the first match for an Organization will be used",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(na.J,{name:"info-circle"})))),a.createElement("th",null,"Role"))),a.createElement("tbody",null,H.map((J,oe)=>a.createElement("tr",{key:`${J.orgId}-${oe}`},L&&a.createElement("td",null,J.groupDN),J.orgName&&J.orgRole?a.createElement("td",null,J.orgName):a.createElement("td",null),J.orgRole?a.createElement("td",null,J.orgRole):a.createElement("td",null,a.createElement("span",{className:"text-warning"},"No match",a.createElement(ao.u,{placement:"top",content:"No matching groups found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(na.J,{name:"info-circle"})))))))))))},Jd=({info:T,showAttributeMapping:L})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:2},"User information"),L&&a.createElement("th",null,"LDAP attribute"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"},"First name"),a.createElement("td",null,T.name.ldapValue),L&&a.createElement("td",null,T.name.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Surname"),a.createElement("td",null,T.surname.ldapValue),L&&a.createElement("td",null,T.surname.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Username"),a.createElement("td",null,T.login.ldapValue),L&&a.createElement("td",null,T.login.cfgAttrValue)),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Email"),a.createElement("td",null,T.email.ldapValue),L&&a.createElement("td",null,T.email.cfgAttrValue)))))),_d=({permissions:T})=>a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{colSpan:1},"Permissions"))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{className:"width-16"}," Grafana admin"),a.createElement("td",null,T.isGrafanaAdmin?a.createElement(a.Fragment,null,a.createElement(na.J,{name:"shield"})," Yes"):"No")),a.createElement("tr",null,a.createElement("td",{className:"width-16"},"Status"),a.createElement("td",null,T.isDisabled?a.createElement(a.Fragment,null,a.createElement(na.J,{name:"times"})," Inactive"):a.createElement(a.Fragment,null,a.createElement(na.J,{name:"check"})," Active"))))))),Xd=({teams:T,showAttributeMapping:L})=>{const H=L?T:T.filter(J=>J.teamName);return a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,L&&a.createElement("th",null,"LDAP Group"),a.createElement("th",null,"Organisation"),a.createElement("th",null,"Team"))),a.createElement("tbody",null,H.map((J,oe)=>a.createElement("tr",{key:`${J.teamName}-${oe}`},L&&a.createElement(a.Fragment,null,a.createElement("td",null,J.groupDN),!J.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null),a.createElement("td",null,a.createElement("div",{className:"text-warning"},"No match",a.createElement(ao.u,{placement:"top",content:"No matching teams found",theme:"info"},a.createElement("span",{className:"gf-form-help-icon"},a.createElement(na.J,{name:"info-circle"}))))))),J.orgName&&a.createElement(a.Fragment,null,a.createElement("td",null,J.orgName),a.createElement("td",null,J.teamName))))))))},qd=({ldapUser:T,showAttributeMapping:L})=>a.createElement(a.Fragment,null,a.createElement(Jd,{info:T.info,showAttributeMapping:L}),a.createElement(_d,{permissions:T.permissions}),T.roles&&T.roles.length>0&&a.createElement(Zd,{groups:T.roles,showAttributeMapping:L}),T.teams&&T.teams.length>0?a.createElement(Xd,{teams:T.teams,showAttributeMapping:L}):a.createElement("div",{className:"gf-form-group"},a.createElement("div",{className:"gf-form"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"No teams found via LDAP"))))))),{FormField:eu}=Nn.LegacyForms;class Ui extends a.PureComponent{constructor(){super(...arguments),this.state={isLoading:!0},this.search=L=>{L.preventDefault();const H=L.target.elements.username.value;H&&this.fetchUserMapping(H)},this.onClearUserError=()=>{this.props.clearUserError()}}async componentDidMount(){const{clearUserMappingInfo:L,queryParams:H}=this.props;await L(),await this.fetchLDAPStatus(),H.username&&await this.fetchUserMapping(H.username),this.setState({isLoading:!1})}async fetchLDAPStatus(){const{loadLdapState:L,loadLdapSyncStatus:H}=this.props;return Promise.all([L(),H()])}async fetchUserMapping(L){const{loadUserMapping:H}=this.props;return await H(L)}render(){const{ldapUser:L,userError:H,ldapError:J,ldapSyncInfo:oe,ldapConnectionInfo:ue,navModel:ye,queryParams:ze}=this.props,{isLoading:qe}=this.state,mt=za.Vt.hasPermission(bn.AccessControlAction.LDAPUsersRead);return a.createElement(fr.T,{navModel:ye},a.createElement(fr.T.Contents,{isLoading:qe},a.createElement(a.Fragment,null,J&&J.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(Ta.b,{title:J.title,severity:bn.AppNotificationSeverity.Error},J.body)),a.createElement(Rf,{ldapConnectionInfo:ue}),(0,wl.v)("ldapsync")&&oe&&a.createElement(Qd,{ldapSyncInfo:oe}),mt&&a.createElement(a.Fragment,null,a.createElement("h3",{className:"page-heading"},"Test user mapping"),a.createElement("div",{className:"gf-form-group"},a.createElement("form",{onSubmit:this.search,className:"gf-form-inline"},a.createElement(eu,{label:"Username",labelWidth:8,inputWidth:30,type:"text",id:"username",name:"username",defaultValue:ze.username}),a.createElement(ee.zx,{type:"submit"},"Run"))),H&&H.title&&a.createElement("div",{className:"gf-form-group"},a.createElement(Ta.b,{title:H.title,severity:bn.AppNotificationSeverity.Error,onRemove:this.onClearUserError},H.body)),L&&a.createElement(qd,{ldapUser:L,showAttributeMapping:!0})))))}}const tu=T=>({navModel:(0,Fl.ht)(T.navIndex,"ldap"),ldapConnectionInfo:T.ldap.connectionInfo,ldapUser:T.ldap.user,ldapSyncInfo:T.ldap.syncInfo,userError:T.ldap.userError,ldapError:T.ldap.ldapError}),nu={loadLdapState:Ts.Y3,loadLdapSyncStatus:Ts.j4,loadUserMapping:Ts.b_,clearUserError:Ts.V0,clearUserMappingInfo:Ts.IS},au=(0,ur.connect)(tu,nu)(Ui);var vs=e(74020);const yn=T=>a.lazy(T);var Ra=e(97953);const Wl=[],$l=[...Wl,{path:"/alerting",component:()=>Q.vc.featureToggles.topnav?a.createElement(Cr.G,{navId:"alerting-legacy"}):a.createElement(fs.l_,{to:"/alerting/list"})},{path:"/alerting/list",component:yn(()=>Promise.all([e.e(5524),e.e(1899),e.e(6797),e.e(2019),e.e(2461)]).then(e.bind(e,65007)))},{path:"/alerting/ng/list",component:yn(()=>e.e(4286).then(e.bind(e,65007)))},{path:"/alerting/notifications",roles:Q.vc.unifiedAlertingEnabled?()=>["Editor","Admin"]:void 0,component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/new",roles:()=>["Editor","Admin"],component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/templates/:id/edit",roles:()=>["Editor","Admin"],component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/new",roles:()=>["Editor","Admin"],component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/receivers/:id/edit",roles:()=>["Editor","Admin"],component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notifications/global-config",roles:()=>["Admin","Editor"],component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,5906)))},{path:"/alerting/notification/new",component:yn(()=>e.e(476).then(e.bind(e,13915)))},{path:"/alerting/notification/:id/edit",component:yn(()=>e.e(7384).then(e.bind(e,18910)))}],Kl=[...Wl,Q.vc.featureToggles.topnav?{path:"/alerting",component:yn(()=>Promise.all([e.e(5524),e.e(6034)]).then(e.bind(e,90237)))}:{path:"/alerting/home",component:yn(()=>Promise.all([e.e(5524),e.e(6034)]).then(e.bind(e,90237)))},{path:"/alerting/list",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingRuleRead,bn.AccessControlAction.AlertingRuleExternalRead],[vs.B.Viewer,vs.B.Editor,vs.B.Admin]),component:yn(()=>Promise.all([e.e(5524),e.e(1899),e.e(6797),e.e(2019),e.e(2461)]).then(e.bind(e,84342)))},{path:"/alerting/routes",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingNotificationsRead,bn.AccessControlAction.AlertingNotificationsExternalRead],[vs.B.Editor,vs.B.Admin]),component:yn(()=>Promise.all([e.e(5524),e.e(8648)]).then(e.bind(e,23569)))},{path:"/alerting/routes/mute-timing/new",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingNotificationsWrite,bn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(9355)]).then(e.bind(e,89657)))},{path:"/alerting/routes/mute-timing/edit",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingNotificationsWrite,bn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(9355)]).then(e.bind(e,89657)))},{path:"/alerting/silences",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingInstanceRead,bn.AccessControlAction.AlertingInstancesExternalRead],["Viewer","Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,80163)))},{path:"/alerting/silence/new",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingInstanceCreate,bn.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,80163)))},{path:"/alerting/silence/:id/edit",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingInstanceUpdate,bn.AccessControlAction.AlertingInstancesExternalWrite],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(1783)]).then(e.bind(e,80163)))},{path:"/alerting/notifications",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingNotificationsRead,bn.AccessControlAction.AlertingNotificationsExternalRead],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,61269)))},{path:"/alerting/notifications/:type/new",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingNotificationsWrite,bn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,61269)))},{path:"/alerting/notifications/:type/:id/edit",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingNotificationsWrite,bn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,61269)))},{path:"/alerting/notifications/:type/:id/duplicate",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingNotificationsWrite,bn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,61269)))},{path:"/alerting/notifications/:type",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingNotificationsWrite,bn.AccessControlAction.AlertingNotificationsExternalWrite],["Editor","Admin"]),component:yn(()=>Promise.all([e.e(5524),e.e(6618)]).then(e.bind(e,61269)))},{path:"/alerting/groups/",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingInstanceRead,bn.AccessControlAction.AlertingInstancesExternalRead],[vs.B.Viewer,vs.B.Editor,vs.B.Admin]),component:yn(()=>Promise.all([e.e(5524),e.e(2415)]).then(e.bind(e,48401)))},{path:"/alerting/new",pageClass:"page-alerting",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingRuleCreate,bn.AccessControlAction.AlertingRuleExternalWrite],[vs.B.Viewer,vs.B.Editor,vs.B.Admin]),component:yn(()=>Promise.all([e.e(5524),e.e(5372)]).then(e.bind(e,85670)))},{path:"/alerting/:id/edit",pageClass:"page-alerting",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingRuleUpdate,bn.AccessControlAction.AlertingRuleExternalWrite],[vs.B.Viewer,vs.B.Editor,vs.B.Admin]),component:yn(()=>Promise.all([e.e(5524),e.e(5372)]).then(e.bind(e,85670)))},{path:"/alerting/:sourceName/:id/view",pageClass:"page-alerting",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingRuleRead,bn.AccessControlAction.AlertingRuleExternalRead],[vs.B.Viewer,vs.B.Editor,vs.B.Admin]),component:yn(()=>Promise.all([e.e(1899),e.e(6797),e.e(4679)]).then(e.bind(e,77110)))},{path:"/alerting/:sourceName/:name/find",pageClass:"page-alerting",roles:(0,Ra.ql)([bn.AccessControlAction.AlertingRuleRead,bn.AccessControlAction.AlertingRuleExternalRead],[vs.B.Viewer,vs.B.Editor,vs.B.Admin]),component:yn(()=>e.e(7918).then(e.bind(e,29309)))},{path:"/alerting/admin",roles:()=>["Admin"],component:yn(()=>Promise.all([e.e(6488),e.e(5524),e.e(7680)]).then(e.bind(e,74460)))}];function su(T=Q.vc){return T.unifiedAlertingEnabled?Kl:T.alertingEnabled?$l:(0,E.uniq)([...$l,...Kl].map(H=>H.path)).map(H=>({path:H,component:yn(()=>e.e(1333).then(e.bind(e,39597)))}))}var ru=e(86475);function ou(){return Q.vc.featureToggles.dataConnectionsConsole?[{path:`/${ru.D}`,exact:!1,component:yn(()=>Promise.all([e.e(6488),e.e(6747),e.e(5981)]).then(e.bind(e,66040)))}]:[]}var Jo=e(3597),_o=e(48996);const Vl=[{path:"/plugins",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:_o.cd.Home,component:yn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/browse",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:_o.cd.Browse,component:yn(()=>e.e(94).then(e.bind(e,21701)))},{path:"/plugins/:pluginId/",navId:"plugins",roles:()=>["Admin","ServerAdmin"],routeName:_o.cd.Details,component:yn(()=>Promise.all([e.e(6488),e.e(6747),e.e(2417)]).then(e.bind(e,5793)))},{path:"/admin/plugins/*",navId:"admin-plugins",component:()=>a.createElement(fs.l_,{to:"/plugins"})}];function zl(){return Vl}var Gr=e(62992),Xo=e(88706),Ur=e(25318),iu=e(2555);function Lf(T){return console.error(T),qo("Exception thrown","See console for details")}function lu(){return qo("Page not found","404 Error")}function qo(T,L){const H={text:T,subTitle:L,icon:"exclamation-triangle"};return{node:H,main:H}}var cu=e(13011),Fi=e(66322),Hl=e(55111),Wi=e(52889);const $i={loading:!0,pluginNav:null,plugin:null};function kl({pluginId:T,pluginNavSection:L}){const H=(0,fs.$B)(),J=(0,fs.TH)(),[oe,ue]=(0,a.useReducer)(uo.reducer,$i),ye=(0,a.useMemo)(()=>(0,Xo.oD)(),[]),ze=G.v.appSubUrl+J.pathname+J.search,{plugin:qe,loading:mt,pluginNav:Pt}=oe,Ot=(0,Hl.d)(L,Pt,ze),Ft=(0,a.useMemo)(()=>(0,B.Ox)(J.search),[J.search]),zt=(0,a.useMemo)(()=>(0,Wi.a)(Ot),[Ot]);(0,a.useEffect)(()=>{du(T,ue)},[T]);const Jt=(0,a.useCallback)(In=>ue(uo.actions.changeNav(In)),[]);if(!qe||T!==qe.meta.id)return a.createElement(fr.T,{navModel:Ot},mt&&a.createElement(iu.Z,null));if(!qe.root)return a.createElement(fr.T,{navModel:Ot??qo("Plugin load error")},a.createElement("div",null,"No root app page component found"));const hn=qe.root&&a.createElement(qe.root,{meta:qe.meta,basename:H.url,onNavChanged:Jt,query:Ft,path:J.pathname});return G.v.featureToggles.topnav&&!Pt?a.createElement(Wi.v.Provider,{value:zt},hn):a.createElement(a.Fragment,null,a.createElement(Xo.Nq,{node:ye},hn),Ot?a.createElement(fr.T,{navModel:Ot,pageNav:Pt?.node},a.createElement(fr.T.Contents,{isLoading:mt},a.createElement(Xo.t0,{node:ye}))):a.createElement(fr.T,null,a.createElement(Xo.t0,{node:ye})))}const uo=(0,Gr.oM)({name:"prom-builder-container",initialState:$i,reducers:{setState:(T,L)=>{Object.assign(T,L.payload)},changeNav:(T,L)=>{let H=L.payload;H&&H.node.children&&(H={...H,node:{...H.main,hideFromBreadcrumbs:G.v.featureToggles.topnav}}),T.pluginNav=H}}});async function du(T,L){try{const H=await(0,cu.a)(T).then(J=>{const oe=uu(J);return oe?(za.h$.emit(Ur.SI.alertError,[oe]),L(uo.actions.setState({pluginNav:qo(oe)})),null):(0,Fi.Av)(J)});L(uo.actions.setState({plugin:H,loading:!1,pluginNav:null}))}catch{L(uo.actions.setState({plugin:null,loading:!1,pluginNav:lu()}))}}function uu(T){return T?T.type!==ft.zV.app?"Plugin must be an app":T.enabled?null:"Application Not Enabled":"Unknown Plugin"}const Gl=kl;var $a=e(3153);function _s(){const T=(0,$a.y0)(),{navIndex:L}=T,H=ue=>ue.startsWith("standalone-plugin-page-/"),J=ue=>"pluginId"in ue&&"id"in ue;return[...Object.values(L).filter(J).map(ue=>{const ye=(0,Fl.vw)(ue),ze=`/a/${ue.pluginId}`,qe=H(ue.id)&&ue.url||ze,mt=H(ue.id)&&!ue.url?.startsWith("/a/");return{path:qe,exact:!1,sensitive:mt,component:()=>a.createElement(Gl,{pluginId:ue.pluginId,pluginNavSection:ye})}}),{path:"/a/:pluginId",exact:!1,component:({match:ue})=>a.createElement(Gl,{pluginId:ue.params.pluginId,pluginNavSection:L.home})}]}const Ki=[{path:"/profile",component:yn(()=>e.e(7323).then(e.bind(e,87807)))},{path:"/profile/password",component:yn(()=>e.e(5771).then(e.bind(e,75771)))},{path:"/profile/select-org",component:yn(()=>e.e(1456).then(e.bind(e,90779)))},{path:"/profile/notifications",component:yn(()=>e.e(743).then(e.bind(e,86992)))}];function Bf(T=Q.vc){return T.profileEnabled?Ki:(0,E.uniq)(Ki.map(H=>H.path)).map(H=>({path:H,component:yn(()=>e.e(3395).then(e.bind(e,92080)))}))}const Vi=()=>Q.vc.featureToggles.publicDashboards?[{path:"/dashboard/public",pageClass:"page-dashboard",routeName:bn.DashboardRoutes.Public,component:yn(()=>e.e(1344).then(e.bind(e,10429)))},{path:"/public-dashboards/:accessToken",pageClass:"page-dashboard",routeName:bn.DashboardRoutes.Public,chromeless:!0,component:yn(()=>Promise.all([e.e(3189),e.e(7638),e.e(7362),e.e(6647),e.e(2613)]).then(e.bind(e,72766)))}]:[],Yl=[];function mu(){const T=Q.ZP.featureToggles.topnav?[{path:"/apps",component:()=>a.createElement(Cr.G,{navId:"apps"})},{path:"/alerts-and-incidents",component:()=>a.createElement(Cr.G,{navId:"alerts-and-incidents"})},{path:"/monitoring",component:()=>a.createElement(Cr.G,{navId:"monitoring"})},{path:"/admin/general",component:()=>a.createElement(Cr.G,{navId:"admin/general"})},{path:"/admin/plugins",component:()=>a.createElement(Cr.G,{navId:"admin/plugins"})},{path:"/admin/access",component:()=>a.createElement(Cr.G,{navId:"admin/access"})}]:[];return[..._s(),{path:"/",pageClass:"page-dashboard",routeName:bn.DashboardRoutes.Home,component:yn(()=>Promise.all([e.e(6488),e.e(1899),e.e(3189),e.e(3755),e.e(7638),e.e(7362),e.e(5331),e.e(6797),e.e(6647),e.e(7023),e.e(2533),e.e(2019),e.e(8232),e.e(5296)]).then(e.bind(e,98695)))},{path:"/d/:uid/:slug?",pageClass:"page-dashboard",routeName:bn.DashboardRoutes.Normal,component:yn(()=>Promise.all([e.e(6488),e.e(1899),e.e(3189),e.e(3755),e.e(7638),e.e(7362),e.e(5331),e.e(6797),e.e(6647),e.e(7023),e.e(2533),e.e(2019),e.e(8232),e.e(5296)]).then(e.bind(e,98695)))},{path:"/dashboard/new",roles:()=>ts.Vt.evaluatePermission(()=>["Editor","Admin"],[bn.AccessControlAction.DashboardsCreate]),pageClass:"page-dashboard",routeName:bn.DashboardRoutes.New,component:yn(()=>Promise.all([e.e(6488),e.e(1899),e.e(3189),e.e(3755),e.e(7638),e.e(7362),e.e(5331),e.e(6797),e.e(6647),e.e(7023),e.e(2533),e.e(2019),e.e(8232),e.e(5296)]).then(e.bind(e,66959)))},{path:"/dashboard/new-with-ds/:datasourceUid",roles:()=>ts.Vt.evaluatePermission(()=>["Editor","Admin"],[bn.AccessControlAction.DashboardsCreate]),component:yn(()=>Promise.all([e.e(6488),e.e(1899),e.e(3189),e.e(3755),e.e(7638),e.e(7362),e.e(5331),e.e(6797),e.e(6647),e.e(7023),e.e(2533),e.e(2019),e.e(8232),e.e(5296)]).then(e.bind(e,81704)))},{path:"/dashboard/:type/:slug",pageClass:"page-dashboard",routeName:bn.DashboardRoutes.Normal,component:yn(()=>Promise.all([e.e(6488),e.e(1899),e.e(3189),e.e(3755),e.e(7638),e.e(7362),e.e(5331),e.e(6797),e.e(6647),e.e(7023),e.e(2533),e.e(2019),e.e(8232),e.e(5296)]).then(e.bind(e,98695)))},{path:"/d-solo/:uid/:slug",pageClass:"dashboard-solo",routeName:bn.DashboardRoutes.Normal,chromeless:!0,component:yn(()=>Promise.all([e.e(7362),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard-solo/:type/:slug",pageClass:"dashboard-solo",routeName:bn.DashboardRoutes.Normal,chromeless:!0,component:yn(()=>Promise.all([e.e(7362),e.e(1034)]).then(e.bind(e,30237)))},{path:"/d-solo/:uid",pageClass:"dashboard-solo",routeName:bn.DashboardRoutes.Normal,chromeless:!0,component:yn(()=>Promise.all([e.e(7362),e.e(1034)]).then(e.bind(e,30237)))},{path:"/dashboard/import",roles:()=>ts.Vt.evaluatePermission(()=>["Editor","Admin"],[bn.AccessControlAction.DashboardsCreate]),component:yn(()=>e.e(8808).then(e.bind(e,26440)))},{path:Jo.n.List,component:yn(()=>Promise.all([e.e(6488),e.e(4620)]).then(e.bind(e,99113)))},{path:Jo.n.Edit,component:yn(()=>Promise.all([e.e(6488),e.e(1477)]).then(e.bind(e,72443)))},{path:Jo.n.Dashboards,component:yn(()=>Promise.all([e.e(6488),e.e(2929)]).then(e.bind(e,46144)))},{path:Jo.n.New,component:yn(()=>Promise.all([e.e(6488),e.e(4253)]).then(e.bind(e,70594)))},{path:"/datasources/correlations",component:yn(()=>Q.ZP.featureToggles.correlations?e.e(413).then(e.bind(e,16312)):e.e(2093).then(e.bind(e,91598)))},{path:"/dashboards",component:yn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/folder/new",roles:()=>ts.Vt.evaluatePermission(()=>["Editor","Admin"],[bn.AccessControlAction.FoldersCreate]),component:yn(()=>e.e(8932).then(e.bind(e,94883)))},{path:"/dashboards/f/:uid/:slug/permissions",component:Q.ZP.rbacEnabled?yn(()=>e.e(8431).then(e.bind(e,42524))):yn(()=>e.e(8431).then(e.bind(e,45663)))},{path:"/dashboards/f/:uid/:slug/settings",component:yn(()=>e.e(4827).then(e.bind(e,90315)))},{path:"/dashboards/f/:uid/:slug",component:yn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/dashboards/f/:uid",component:yn(()=>e.e(4074).then(e.bind(e,48548)))},{path:"/explore",pageClass:"page-explore",roles:()=>ts.Vt.evaluatePermission(()=>Q.ZP.viewersCanEdit?[]:["Editor","Admin"],[bn.AccessControlAction.DataSourcesExplore]),component:yn(()=>Q.ZP.exploreEnabled?Promise.all([e.e(6488),e.e(1899),e.e(4254),e.e(5048),e.e(5331),e.e(7023),e.e(8366),e.e(9782)]).then(e.bind(e,21258)):e.e(172).then(e.bind(e,20750)))},...T,{path:"/org",component:yn(()=>e.e(529).then(e.bind(e,23242)))},{path:"/org/new",component:yn(()=>e.e(950).then(e.bind(e,72040)))},{path:"/org/users",component:yn(()=>e.e(8039).then(e.bind(e,71221)))},{path:"/org/users/invite",component:yn(()=>e.e(7707).then(e.bind(e,40509)))},{path:"/org/apikeys",roles:()=>ts.Vt.evaluatePermission(()=>["Admin"],[bn.AccessControlAction.ActionAPIKeysRead]),component:yn(()=>e.e(3082).then(e.bind(e,91948)))},{path:"/org/serviceaccounts",roles:()=>ts.Vt.evaluatePermission(()=>["Admin"],[bn.AccessControlAction.ServiceAccountsRead,bn.AccessControlAction.ServiceAccountsCreate]),component:yn(()=>e.e(1337).then(e.bind(e,50951)))},{path:"/org/serviceaccounts/create",component:yn(()=>e.e(9738).then(e.bind(e,36497)))},{path:"/org/serviceaccounts/:id",component:yn(()=>e.e(687).then(e.bind(e,66446)))},{path:"/org/teams",roles:()=>ts.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[bn.AccessControlAction.ActionTeamsRead,bn.AccessControlAction.ActionTeamsCreate]),component:yn(()=>e.e(9671).then(e.bind(e,17721)))},{path:"/org/teams/new",roles:()=>ts.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[bn.AccessControlAction.ActionTeamsCreate]),component:yn(()=>e.e(8715).then(e.bind(e,39874)))},{path:"/org/teams/edit/:id/:page?",roles:()=>ts.Vt.evaluatePermission(()=>Q.ZP.editorsCanAdmin?["Editor","Admin"]:["Admin"],[bn.AccessControlAction.ActionTeamsRead,bn.AccessControlAction.ActionTeamsCreate]),component:yn(()=>e.e(8612).then(e.bind(e,59582)))},{path:"/admin",component:()=>Q.ZP.featureToggles.topnav?a.createElement(Cr.G,{navId:"cfg"}):a.createElement(fs.l_,{to:"/admin/users"})},{path:"/admin/access",component:()=>Q.ZP.featureToggles.topnav?a.createElement(Cr.G,{navId:"admin/access"}):a.createElement(fs.l_,{to:"/admin/users"})},{path:"/admin/config",component:()=>Q.ZP.featureToggles.topnav?a.createElement(Cr.G,{navId:"admin/config"}):a.createElement(fs.l_,{to:"/admin/org"})},{path:"/admin/settings",component:yn(()=>e.e(9603).then(e.bind(e,55486)))},{path:"/admin/upgrading",component:yn(()=>e.e(2446).then(e.bind(e,62446)))},{path:"/admin/users",component:Q.ZP.featureToggles.topnav?yn(()=>e.e(7497).then(e.bind(e,21038))):yn(()=>e.e(8580).then(e.bind(e,68082)))},{path:"/admin/users/create",component:yn(()=>e.e(2508).then(e.bind(e,49562)))},{path:"/admin/users/edit/:id",component:Yd},{path:"/admin/orgs",component:yn(()=>e.e(3798).then(e.bind(e,61608)))},{path:"/admin/orgs/edit/:id",component:yn(()=>e.e(2721).then(e.bind(e,29209)))},{path:"/admin/storage/:path*",roles:()=>["Admin"],component:yn(()=>e.e(7675).then(e.bind(e,14527)))},{path:"/admin/stats",component:yn(()=>e.e(7641).then(e.bind(e,93976)))},{path:"/admin/ldap",component:au},{path:"/login",component:Yo,pageClass:"login-page",chromeless:!0},{path:"/invite/:code",component:yn(()=>e.e(7429).then(e.bind(e,62887))),chromeless:!0},{path:"/verify",component:Q.ZP.verifyEmailEnabled?yn(()=>e.e(7583).then(e.bind(e,27583))):()=>a.createElement(fs.l_,{to:"/signup"}),pageClass:"login-page",chromeless:!0},{path:"/signup",component:Q.ZP.disableUserSignUp?()=>a.createElement(fs.l_,{to:"/login"}):yn(()=>e.e(615).then(e.bind(e,40615))),pageClass:"login-page",chromeless:!0},{path:"/user/password/send-reset-email",chromeless:!0,component:yn(()=>e.e(133).then(e.bind(e,37673)))},{path:"/user/password/reset",component:yn(()=>e.e(6848).then(e.bind(e,18310))),pageClass:"login-page",chromeless:!0},{path:"/dashboard/snapshots",component:yn(()=>e.e(5295).then(e.bind(e,11155)))},{path:"/playlists",component:yn(()=>e.e(9218).then(e.bind(e,21977)))},{path:"/playlists/play/:uid",component:yn(()=>e.e(3090).then(e.bind(e,48579)))},{path:"/playlists/new",component:yn(()=>e.e(9975).then(e.bind(e,29666)))},{path:"/playlists/edit/:uid",component:yn(()=>e.e(2341).then(e.bind(e,58809)))},{path:"/sandbox/benchmarks",component:yn(()=>e.e(4908).then(e.bind(e,12902)))},{path:"/sandbox/test",component:yn(()=>Promise.all([e.e(3755),e.e(2533),e.e(8595)]).then(e.bind(e,42594)))},{path:"/dashboards/f/:uid/:slug/library-panels",component:yn(()=>Promise.all([e.e(3189),e.e(3778)]).then(e.bind(e,42029)))},{path:"/dashboards/f/:uid/:slug/alerting",roles:()=>ts.Vt.evaluatePermission(()=>["Viewer","Editor","Admin"],[bn.AccessControlAction.AlertingRuleRead]),component:yn(()=>e.e(1324).then(e.bind(e,30097)))},{path:"/library-panels",component:yn(()=>Promise.all([e.e(3189),e.e(7878)]).then(e.bind(e,45407)))},{path:"/notifications",component:yn(()=>e.e(743).then(e.bind(e,86992)))},...jl(),...zl(),...fu(),...su(),...Bf(),...Yl,...Vi(),...ou(),{path:"/*",component:no.Z}]}function fu(T=Q.ZP){return T.supportBundlesEnabled?[{path:"/support-bundles",component:yn(()=>e.e(9939).then(e.bind(e,57906)))},{path:"/support-bundles/create",component:yn(()=>e.e(539).then(e.bind(e,46190)))}]:[]}function jl(T=Q.ZP){return T.featureToggles.scenes?[{path:"/scenes",component:yn(()=>e.e(207).then(e.bind(e,13190)))},{path:"/scenes/dashboard/:uid",component:yn(()=>e.e(207).then(e.bind(e,23591)))},{path:"/scenes/grafana-monitoring",exact:!1,component:yn(()=>e.e(207).then(e.bind(e,38282)))},{path:"/scenes/:name",component:yn(()=>e.e(207).then(e.bind(e,23192)))}]:[]}const zi=a.forwardRef((T,L)=>a.createElement("div",{id:"ngRoot",ref:L,dangerouslySetInnerHTML:{__html:"<grafana-app ng-cloak></grafana-app>"}}));zi.displayName="AngularRoot";var gu=e(11484);async function pu(){if(G.v.angularSupportEnabled){const{AngularApp:T}=await Promise.all([e.e(6093),e.e(3128),e.e(2773),e.e(5510),e.e(4704)]).then(e.bind(e,35510)),L=new T;L.init(),L.bootstrap()}else(0,gu.W)({load:(T,L,H)=>({destroy:()=>{},digest:()=>{},getScope:()=>({})})})}var ei=e(34177),ro=e(99510),So=e(81699),cs=e(6665),ti=e(57386),Ql=e(56651);const ni=0,hu=T=>{const L=a.useRef(null),H=a.useRef(null),J=a.useRef(T.items);J.current=T.items;const oe=(0,Ql.useVirtual)({size:J.current.length,parentRef:H}),{query:ue,search:ye,currentRootActionId:ze,activeIndex:qe,options:mt}=(0,Cs.useKBar)(zt=>({search:zt.searchQuery,currentRootActionId:zt.currentRootActionId,activeIndex:zt.activeIndex}));a.useEffect(()=>{const zt=Jt=>{Jt.key==="ArrowUp"||Jt.ctrlKey&&Jt.key==="p"?(Jt.preventDefault(),ue.setActiveIndex(hn=>{let In=hn>ni?hn-1:hn;if(typeof J.current[In]=="string"){if(In===0)return hn;In-=1}return In})):Jt.key==="ArrowDown"||Jt.ctrlKey&&Jt.key==="n"?(Jt.preventDefault(),ue.setActiveIndex(hn=>{let In=hn<J.current.length-1?hn+1:hn;if(typeof J.current[In]=="string"){if(In===J.current.length-1)return hn;In+=1}return In})):Jt.key==="Enter"&&(Jt.preventDefault(),L.current?.click())};return window.addEventListener("keydown",zt),()=>window.removeEventListener("keydown",zt)},[ue]);const{scrollToIndex:Pt}=oe;a.useEffect(()=>{Pt(qe,{align:qe<=1?"end":"auto"})},[qe,Pt]),a.useEffect(()=>{ue.setActiveIndex(typeof T.items[ni]=="string"?ni+1:ni)},[ye,ze,T.items,ue]);const Ot=a.useCallback((zt,Jt)=>{if(typeof Jt=="string")return;const hn=Jt.url;Jt.command?(Jt.command.perform(Jt),ue.toggle()):hn?zt.ctrlKey||zt.metaKey||zt.shiftKey||ue.toggle():(ue.setSearch(""),ue.setCurrentRootAction(Jt.id)),mt.callbacks?.onSelectAction?.(Jt)},[ue,mt]),Ft=(0,ti.usePointerMovedSinceMount)();return a.createElement("div",{ref:H,style:{maxHeight:T.maxHeight||400,position:"relative",overflow:"auto"}},a.createElement("div",{role:"listbox",id:Cs.KBAR_LISTBOX,style:{height:`${oe.totalSize}px`,width:"100%"}},oe.virtualItems.map(zt=>{const Jt=J.current[zt.index],{target:hn,url:In}=Jt,Zn=typeof Jt!="string"&&{onPointerMove:()=>Ft&&qe!==zt.index&&ue.setActiveIndex(zt.index),onPointerDown:()=>ue.setActiveIndex(zt.index),onClick:Ks=>Ot(Ks,Jt)},Fn=zt.index===qe,la={id:(0,Cs.getListboxItemId)(zt.index),role:"option","aria-selected":Fn,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${zt.start}px)`},...Zn},ys=a.cloneElement(T.onRender({item:Jt,active:Fn}),{ref:zt.measureRef});return In?a.createElement("a",{key:zt.index,href:In,target:hn,ref:Fn?L:null,...la},ys):a.createElement("div",{key:zt.index,ref:Fn?L:null,...la},ys)})))},Zl=a.forwardRef(({action:T,active:L,currentRootActionId:H},J)=>{const oe=a.useMemo(()=>{if(!H)return T.ancestors;const qe=T.ancestors.findIndex(mt=>mt.id===H);return T.ancestors.slice(qe+1)},[T.ancestors,H]),ue=(0,De.wW)(Jl);let ye=T.name;const ze=qe=>Boolean(qe.command?.perform||qe.url);return T.children.length&&!ze(T)&&!ye.endsWith("...")&&(ye+="..."),a.createElement("div",{ref:J,className:(0,k.cx)(ue.row,L&&ue.activeRow)},a.createElement("div",{className:ue.actionContainer},T.icon,a.createElement("div",{className:ue.textContainer},oe.map(qe=>a.createElement(a.Fragment,{key:qe.id},!ze(qe)&&a.createElement(a.Fragment,null,a.createElement("span",{className:ue.breadcrumbAncestor},qe.name),a.createElement("span",{className:ue.breadcrumbSeparator},"\u203A")))),a.createElement("span",null,ye)),T.subtitle&&a.createElement("span",{className:ue.subtitleText},T.subtitle)))});Zl.displayName="ResultItem";const Jl=T=>({row:(0,k.css)({padding:T.spacing(1,2),display:"flex",alightItems:"center",justifyContent:"space-between",cursor:"pointer",position:"relative",borderRadius:T.shape.radius.default,margin:T.spacing(0,1)}),activeRow:(0,k.css)({color:T.colors.text.maxContrast,background:T.colors.emphasize(T.colors.background.primary,.03),"&:before":{display:"block",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:T.spacing(.5),borderRadius:T.shape.radius.default,backgroundImage:T.colors.gradients.brandVertical}}),actionContainer:(0,k.css)({display:"flex",gap:T.spacing(1),alignItems:"baseline",fontSize:T.typography.fontSize,width:"100%"}),textContainer:(0,k.css)({display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}),breadcrumbAncestor:(0,k.css)({color:T.colors.text.secondary}),breadcrumbSeparator:(0,k.css)({color:T.colors.text.secondary,marginLeft:T.spacing(1),marginRight:T.spacing(1)}),subtitleText:(0,k.css)({...T.typography.bodySmall,color:T.colors.text.secondary,display:"block",flexBasis:"20%",flexGrow:1,flexShrink:0,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"})});var Hi=e(99151),vu=e.n(Hi),ki=e(13019),Gi=e(82e3);const Yr=5,Eu=4,_l=3,Yi=2,yu=1,Pu=100,Xl=5,ql=vu()(Cu,200);async function Ar(){if(!ts.Vt.user.isSignedIn)return[];const T=(await ki.Z.getDashboardOpened()).slice(0,Xl),H=(await(0,Gi.getGrafanaSearcher)().search({kind:["dashboard"],limit:Xl,uid:T})).view.toArray();return H.sort((oe,ue)=>{const ye=T.indexOf(oe.uid),ze=T.indexOf(ue.uid);return ye-ze}),H.map(oe=>{const{url:ue,name:ye}=oe;return{id:`recent-dashboards${ue}`,name:`${ye}`,section:(0,Ia.t)("command-palette.section.recent-dashboards","Recent dashboards"),priority:Yr,url:M.u.stripBaseFromUrl(ue)}})}async function Cu(T){if(T.length===0||!ts.Vt.user.isSignedIn&&!G.v.bootData.settings.anonymousEnabled)return[];const L=await(0,Gi.getGrafanaSearcher)().search({kind:["dashboard","folder"],query:T,limit:Pu});return L.view.map(J=>{const{url:oe,name:ue,kind:ye,location:ze}=J;return{id:`go/${ye}${oe}`,name:`${ue}`,section:ye==="dashboard"?(0,Ia.t)("command-palette.section.dashboard-search-results","Dashboards"):(0,Ia.t)("command-palette.section.folder-search-results","Folders"),priority:yu,url:M.u.stripBaseFromUrl(oe),subtitle:L.view.dataFrame.meta?.custom?.locationInfo[ze]?.name}})}function xu(T,L){const[H,J]=(0,a.useState)([]),[oe,ue]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{L&&T.length>0?(ue(!0),ql(T).then(ye=>{J(ye),ue(!1)})):J([])},[L,T]),{searchResults:H,isFetchingSearchResults:oe}}var Du=e(36328),ns=e(18271),ji=e(42454);async function Qi(T,L){const H=(0,Du.j)({colors:{mode:T}});if(H.flags.topnav=Q.vc.featureToggles.topnav,ns.Z.publish(new w.hD(H)),Q.vc.theme2.isDark=H.isDark,L)return;const J=document.createElement("link");if(J.rel="stylesheet",J.href=Q.vc.bootData.themePaths[H.colors.mode],J.onload=()=>{const ye=document.getElementsByTagName("link");for(let ze=0;ze<ye.length;ze++){const qe=ye[ze];qe.href&&qe.href.includes(`build/grafana.${H.isDark?"light":"dark"}`)&&qe.remove()}},document.body.appendChild(J),!za.Vt.isSignedIn)return;const oe=new ji.y("user"),ue=await oe.load();await oe.update({...ue,theme:H.colors.mode})}async function ec(T){const L=Q.vc.theme2;Qi(L.isDark?"light":"dark",T)}function tc(T){return"navModel."+T.id}function nc(T,L=[]){const H=[];for(const J of T){const{url:oe,target:ue,text:ye,isCreateAction:ze,children:qe}=J,mt=Boolean(qe?.length);if(!(oe||mt))continue;const Pt=ze?(0,Ia.t)("command-palette.section.actions","Actions"):(0,Ia.t)("command-palette.section.pages","Pages"),Ot=ze?Eu:_l,Ft=L.map(Jt=>Jt.text).join(" > "),zt={id:tc(J),name:ye,section:Pt,url:oe&&M.u.stripBaseFromUrl(oe),target:ue,parent:L.length>0&&!ze?tc(L[L.length-1]):void 0,priority:Ot,subtitle:ze?void 0:Ft};if(H.push(zt),qe?.length){const Jt=nc(qe,[...L,J]);H.push(...Jt)}}return H}const bu=T=>{const L=[{id:"preferences/theme",name:(0,Ia.t)("command-palette.action.change-theme","Change theme..."),keywords:"interface color dark light",section:(0,Ia.t)("command-palette.section.preferences","Preferences"),priority:Yi},{id:"preferences/dark-theme",name:(0,Ia.t)("command-palette.action.dark-theme","Dark"),keywords:"dark theme",perform:()=>Qi("dark"),parent:"preferences/theme",priority:Yi},{id:"preferences/light-theme",name:(0,Ia.t)("command-palette.action.light-theme","Light"),keywords:"light theme",perform:()=>Qi("light"),parent:"preferences/theme",priority:Yi}],H=nc(T);return[...L,...H]};function Mu(T){const[L,H]=(0,a.useState)([]),[J,oe]=(0,a.useState)([]),{navBarTree:ue}=(0,bn.useSelector)(ye=>({navBarTree:ye.navBarTree}));return(0,a.useEffect)(()=>{const ye=bu(ue);H(ye)},[ue]),(0,a.useEffect)(()=>{T?oe([]):Ar().then(ye=>oe(ye)).catch(ye=>{console.error("Error loading recent dashboard actions",ye)})},[T]),[...J,...L]}var Su=e(22759);const ac={name:"none",priority:Cs.Priority.NORMAL};function ai(T,L){return L.priority-T.priority}function Ou(){const{search:T,actions:L,rootActionId:H}=(0,Cs.useKBar)(Pt=>({search:Pt.searchQuery,actions:Pt.actions,rootActionId:Pt.currentRootActionId})),J=a.useMemo(()=>Object.keys(L).reduce((Pt,Ot)=>{const Ft=L[Ot];if(!Ft.parent&&!H&&Pt.push(Ft),Ft.id===H)for(let zt=0;zt<Ft.children.length;zt++)Pt.push(Ft.children[zt]);return Pt},[]).sort(ai),[L,H]),oe=a.useCallback(Pt=>{let Ot=[];for(let Ft=0;Ft<Pt.length;Ft++)Ot.push(Pt[Ft]);return function Ft(zt,Jt=Ot){for(let hn=0;hn<zt.length;hn++)if(zt[hn].children.length>0){let In=zt[hn].children;for(let Zn=0;Zn<In.length;Zn++)Jt.push(In[Zn]);Ft(zt[hn].children,Jt)}return Jt}(Pt)},[]),ue=!T,ye=a.useMemo(()=>ue?J:oe(J),[oe,J,ue]),ze=Tu(ye,T),qe=a.useMemo(()=>{let Pt={},Ot=[],Ft=[];for(let Jt=0;Jt<ze.length;Jt++){const hn=ze[Jt],In=hn.action,Zn=hn.score||Cs.Priority.NORMAL,Fn={name:typeof In.section=="string"?In.section:In.section?.name||ac.name,priority:typeof In.section=="string"?Zn:In.section?.priority||0+Zn};Pt[Fn.name]||(Pt[Fn.name]=[],Ot.push(Fn)),Pt[Fn.name].push({priority:In.priority+Zn,action:In})}Ft=Ot.sort(ai).map(Jt=>({name:Jt.name,actions:Pt[Jt.name].sort(ai).map(hn=>hn.action)}));let zt=[];for(let Jt=0;Jt<Ft.length;Jt++){let hn=Ft[Jt];hn.name!==ac.name&&zt.push(hn.name);for(let In=0;In<hn.actions.length;In++)zt.push(hn.actions[In])}return zt},[ze]),mt=a.useMemo(()=>H,[qe]);return a.useMemo(()=>({results:qe,rootActionId:mt}),[mt,qe])}function Tu(T,L){const H=sc(),J=a.useMemo(()=>({filtered:T,search:L}),[T,L]),{filtered:oe,search:ue}=(0,ti.useThrottledValue)(J);return a.useMemo(()=>{if(ue.trim()==="")return oe.map(qe=>({score:0,action:qe}));const ye=oe.map(({name:qe,keywords:mt,subtitle:Pt})=>`${qe} ${mt??""} ${Pt??""}`.toLowerCase()),ze=[];if(ue.length>wf){const qe=ue.toLowerCase();for(let mt=0;mt<ye.length;mt++){const Ot=ye[mt].indexOf(qe);if(Ot>-1){const Ft=Ot*-1,zt=oe[mt];ze.push({score:Ft,action:zt})}}}else{const qe=H.split(ue).length,mt=1/0,Pt=qe<5,[,Ot,Ft]=H.search(ye,ue,Pt,mt);if(Ot&&Ft)for(let zt=0;zt<Ft.length;zt++){const Jt=Ft[zt],hn=Ft.length-zt,In=oe[Ot.idx[Jt]];ze.push({score:hn,action:In})}}return ze},[oe,ue,H])}const wf=25;function sc(){const T=a.useRef();return T.current||(T.current=new Su.Z({intraMode:1,intraIns:1,intraSub:1,intraTrn:1,intraDel:1})),T.current}function rc(){const T=(0,De.wW)(oc),{query:L,showing:H,searchQuery:J}=(0,Cs.useKBar)(Pt=>({showing:Pt.visualState===Cs.VisualState.showing,searchQuery:Pt.searchQuery})),oe=Mu(J);(0,Cs.useRegisterActions)(oe,[oe]);const{searchResults:ue,isFetchingSearchResults:ye}=xu(J,H),ze=(0,a.useRef)(null),{overlayProps:qe}=(0,cs.Ir)({isOpen:H,onClose:()=>L.setVisualState(Cs.VisualState.animatingOut)},ze),{dialogProps:mt}=(0,ro.R)({},ze);return(0,a.useEffect)(()=>{H&&(0,mr.ff)("command_palette_opened")},[H]),oe.length>0?a.createElement(Cs.KBarPortal,null,a.createElement(Cs.KBarPositioner,{className:T.positioner},a.createElement(Cs.KBarAnimator,{className:T.animator},a.createElement(So.MT,{contain:!0,autoFocus:!0,restoreFocus:!0},a.createElement("div",{...qe,...mt},a.createElement("div",{className:T.searchContainer},ye?a.createElement(kr.$,{className:T.spinner}):a.createElement(na.J,{name:"search",size:"md"}),a.createElement(Cs.KBarSearch,{defaultPlaceholder:(0,Ia.t)("command-palette.search-box.placeholder","Search or jump to..."),className:T.search})),a.createElement("div",{className:T.resultsContainer},a.createElement(Iu,{searchResults:ue}))))))):null}const Iu=({searchResults:T})=>{const{results:L,rootActionId:H}=Ou(),J=(0,De.wW)(oc),oe=(0,Ia.t)("command-palette.section.dashboard-search-results","Dashboards"),ue=(0,Ia.t)("command-palette.section.folder-search-results","Folders"),ye=(0,a.useMemo)(()=>T.filter(mt=>mt.id.startsWith("go/dashboard")).map(mt=>new Cs.ActionImpl(mt,{store:{}})),[T]),ze=(0,a.useMemo)(()=>T.filter(mt=>mt.id.startsWith("go/folder")).map(mt=>new Cs.ActionImpl(mt,{store:{}})),[T]),qe=(0,a.useMemo)(()=>{const mt=[...L];return ze.length>0&&(mt.push(ue),mt.push(...ze)),ye.length>0&&(mt.push(oe),mt.push(...ye)),mt},[L,oe,ye,ue,ze]);return a.createElement(hu,{items:qe,maxHeight:650,onRender:({item:mt,active:Pt})=>{const Ot=qe[0]===mt;return typeof mt=="string"?a.createElement("div",{className:(0,k.cx)(J.sectionHeader,Ot&&J.sectionHeaderFirst)},mt):a.createElement(Zl,{action:mt,active:Pt,currentRootActionId:H})}})},oc=T=>({positioner:(0,k.css)({zIndex:T.zIndex.portal,marginTop:"0px",paddingTop:"4px !important","&::before":{content:'""',position:"fixed",top:0,right:0,bottom:0,left:0,background:T.components.overlay.background,backdropFilter:"blur(1px)"}}),animator:(0,k.css)({maxWidth:T.breakpoints.values.md,width:"100%",background:T.colors.background.primary,color:T.colors.text.primary,borderRadius:T.shape.radius.default,border:`1px solid ${T.colors.border.weak}`,overflow:"hidden",boxShadow:T.shadows.z3}),searchContainer:(0,k.css)({alignItems:"center",background:T.components.input.background,borderBottom:`1px solid ${T.colors.border.weak}`,display:"flex",gap:T.spacing(1),padding:T.spacing(1,2)}),search:(0,k.css)({fontSize:T.typography.fontSize,width:"100%",boxSizing:"border-box",outline:"none",border:"none",color:T.components.input.text}),spinner:(0,k.css)({height:"22px"}),resultsContainer:(0,k.css)({paddingBottom:T.spacing(1)}),sectionHeader:(0,k.css)({padding:T.spacing(1.5,2,2,2),fontSize:T.typography.bodySmall.fontSize,fontWeight:T.typography.fontWeightMedium,color:T.colors.text.secondary,borderTop:`1px solid ${T.colors.border.weak}`,marginTop:T.spacing(1)}),sectionHeaderFirst:(0,k.css)({paddingBottom:T.spacing(1),borderTop:"none",marginTop:0})});var Ru=e(30506),ar=e(24844),Fs=e(45984),Zi=e(25337),Au=e(22350),Oo=e(68226),ic=e(19360);function Lu({onDismiss:T}){const{value:L=[]}=(0,Au.Z)(()=>ic.h.loadOrgs(),[]),H=ts.Vt.user.orgId,J=(0,k.css)({display:"flex",maxHeight:"calc(85vh - 42px)"}),oe=async ue=>{await ic.h.setUserOrg(ue),window.location.href=`${Q.ZP.appSubUrl}${Q.ZP.appSubUrl.endsWith("/")?"":"/"}?orgId=${ue.orgId}`};return a.createElement(jo.u,{title:"Switch Organization",icon:"arrow-random",onDismiss:T,isOpen:!0,contentClassName:J},a.createElement(Oo.$,{autoHeightMin:"100%"},a.createElement("table",{className:"filter-table form-inline"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Name"),a.createElement("th",null,"Role"),a.createElement("th",null))),a.createElement("tbody",null,L.map(ue=>a.createElement("tr",{key:ue.orgId},a.createElement("td",null,ue.name),a.createElement("td",null,ue.role),a.createElement("td",{className:"text-right"},ue.orgId===H?a.createElement(ee.zx,{size:"sm"},"Current"):a.createElement(ee.zx,{variant:"secondary",size:"sm",onClick:()=>oe(ue)},"Switch to"))))))))}var lc=e(41197);const Bu="search",wu="navbar-menu-portal-container",Nf=()=>document.getElementById(wu)??document.body,Ji=(T,L)=>{const{isSignedIn:H,user:J}=ts.Vt,oe=()=>{ns.Z.publish(new Fs.Dn({component:lc.B}))},ue=()=>{ns.Z.publish(new Fs.Dn({component:Lu}))};if(!G.v.featureToggles.topnav&&J&&J.orgCount>1){const ye=T.find(ze=>ze.id==="profile");ye&&(ye.showOrgSwitcher=!0,ye.subTitle=`Organization: ${J?.orgName}`)}if(!H&&!G.v.featureToggles.topnav){const ye=M.u.getUrlForPartial(L,{forceLogin:"true"});T.unshift({icon:"signout",id:"sign-in",section:ar.yV.Config,target:"_self",text:(0,Ia.t)("nav.sign-in","Sign in"),url:ye})}return T.forEach(ye=>{let ze=ye.children||[];ye.id==="help"&&(ye.children=[...ze,...(0,Zi.dP)(),...Uf(),{id:"keyboard-shortcuts",text:(0,Ia.t)("nav.help/keyboard-shortcuts","Keyboard shortcuts"),icon:"keyboard",onClick:oe}]),!G.v.featureToggles.topnav&&ye.showOrgSwitcher&&(ye.children=[...ze,{id:"switch-organization",text:(0,Ia.t)("nav.profile/switch-org","Switch organization"),icon:"arrow-random",onClick:ue}])}),T},Fr=(T,L)=>{const H=T.onClick;return T.onClick=()=>{(0,mr.ff)("grafana_navigation_item_clicked",{path:T.url??T.id,state:L?"expanded":"collapsed"}),H?.()},T.children&&(T.children=T.children.map(J=>Fr(J,L))),T},mo=(T,L)=>Boolean(T===L||To(T,L)),To=(T,L)=>Boolean(T.children?.some(H=>H===L?!0:To(H,L))),si=T=>T?.split("?")[0]??"",ri=(T,L)=>{const H=si(L?.url),J=si(T.url);return J&&J.length>H?.length},_i=(T,L,H)=>{const J="/dashboards";for(const oe of T){const ue=si(oe.url),ye=M.u.stripBaseFromUrl(ue);if(ye&&oe.id!=="starred")if(ye===L){H=oe;break}else if(ye!=="/"&&L.startsWith(ye))ri(oe,H)&&(H=oe);else if(ye==="/alerting/list"&&L.startsWith("/alerting/notification/")){H=oe;break}else ye===J&&L.startsWith("/d/")&&ri(oe,H)&&(H=oe);if(oe.children&&(H=_i(oe.children,L,H)),si(H?.url)===L)return H}return H},Nu=T=>new URLSearchParams(T.search).get("search")==="open";function cc(T){return T.id??T.text}function Uf(){const{buildInfo:T,licenseInfo:L}=G.v,H=L.stateInfo?` (${L.stateInfo})`:"",J=[];return J.push({target:"_blank",id:"version",text:`${T.edition}${H}`,url:L.licenseUrl,icon:"external-link-alt"}),T.hasUpdate&&J.push({target:"_blank",id:"updateVersion",text:"New version available!",icon:"download-alt",url:"https://grafana.com/grafana/download?utm_source=grafana_footer"}),J}var gr=e(22163),xs=e(13211),xr=e(40419),Xi=e(29460);function dc({children:T,icon:L,isActive:H,isChild:J,onClick:oe,target:ue,url:ye}){const ze=(0,De.l4)(),qe=uc(ze,H,J),mt=a.createElement("div",{className:qe.linkContent},L&&a.createElement(na.J,{"data-testid":"dropdown-child-icon",name:L}),a.createElement("div",{className:qe.linkText},T),ue==="_blank"&&a.createElement(na.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:qe.externalLinkIcon}));let Pt=a.createElement("button",{"data-testid":Ct.wl.components.NavMenu.item,className:(0,k.cx)(qe.button,qe.element),onClick:oe},mt);return ye&&(Pt=!ue&&ye.startsWith("/")?a.createElement(Xi.r,{"data-testid":Ct.wl.components.NavMenu.item,className:qe.element,href:ye,target:ue,onClick:oe},mt):a.createElement("a",{"data-testid":Ct.wl.components.NavMenu.item,href:ye,target:ue,className:qe.element,onClick:oe},mt)),a.createElement("li",{className:qe.listItem},Pt)}dc.displayName="NavBarMenuItem";const uc=(T,L,H)=>({button:(0,k.css)({backgroundColor:"unset",borderStyle:"unset"}),linkContent:(0,k.css)({alignItems:"center",display:"flex",gap:"0.5rem",height:"100%",width:"100%"}),linkText:(0,k.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,k.css)({color:T.colors.text.secondary}),element:(0,k.css)({alignItems:"center",boxSizing:"border-box",position:"relative",color:L?T.colors.text.primary:T.colors.text.secondary,padding:T.spacing(1,1,1,H?5:0),...H&&{borderRadius:T.shape.borderRadius()},width:"100%","&:hover, &:focus-visible":{...H&&{background:T.colors.emphasize(T.colors.background.primary,.03)},textDecoration:"underline",color:T.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${T.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:L?"block":"none",content:'" "',height:T.spacing(3),position:"absolute",left:T.spacing(1),top:"50%",transform:"translateY(-50%)",width:T.spacing(.5),borderRadius:T.shape.borderRadius(1),backgroundImage:T.colors.gradients.brandVertical}}),listItem:(0,k.css)({boxSizing:"border-box",position:"relative",display:"flex",width:"100%",...H&&{padding:T.spacing(0,2)}})});var qi=e(24664);function Io({link:T}){const L=(0,De.l4)(),H=mc(L);if(T.icon==="grafana")return a.createElement(Ii.c.MenuLogo,{className:H.img});if(T.icon){const J=(0,xr.toIconName)(T.icon);return a.createElement(na.J,{name:J??"link",size:"xl"})}else return a.createElement("img",{className:(0,k.cx)(H.img,T.roundIcon&&H.round),src:T.img,alt:""})}function mc(T){return{img:(0,k.css)({height:T.spacing(3),width:T.spacing(3)}),round:(0,k.css)({borderRadius:"50%"})}}const Ro=({children:T})=>{const L=(0,De.wW)(Uu);return a.createElement("div",null,T,a.createElement("span",{className:L.highlight}))},Uu=T=>({highlight:k.css`
      background-color: ${T.colors.success.main};
      border-radius: 50%;
      width: 6px;
      height: 6px;
      display: inline-block;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
    `});function fc({link:T,activeItem:L,children:H,className:J,onClose:oe}){const ue=(0,De.wW)(Fu),ye=T.highlightText?Ro:a.Fragment,ze=T===L,qe=To(T,L),[mt,Pt]=(0,qi.Z)(`grafana.navigation.expanded[${T.text}]`,!1)??Boolean(qe);return a.createElement(a.Fragment,null,a.createElement("div",{className:(0,k.cx)(ue.collapsibleSectionWrapper,J)},a.createElement(dc,{isActive:T===L,onClick:()=>{T.onClick?.(),oe?.()},target:T.target,url:T.url},a.createElement("div",{className:(0,k.cx)(ue.labelWrapper,{[ue.isActive]:ze,[ue.hasActiveChild]:qe})},a.createElement(ye,null,a.createElement(Io,{link:T})),T.text)),H&&a.createElement(ee.zx,{"aria-label":`${mt?"Collapse":"Expand"} section`,variant:"secondary",fill:"text",className:ue.collapseButton,onClick:()=>Pt(!mt)},a.createElement(na.J,{name:mt?"angle-up":"angle-down",size:"xl"}))),mt&&H)}const Fu=T=>({collapsibleSectionWrapper:(0,k.css)({alignItems:"center",display:"flex"}),collapseButton:(0,k.css)({color:T.colors.text.disabled,padding:T.spacing(0,.5),marginRight:T.spacing(1)}),collapseWrapperActive:(0,k.css)({backgroundColor:T.colors.action.disabledBackground}),collapseContent:(0,k.css)({padding:0}),labelWrapper:(0,k.css)({display:"grid",fontSize:T.typography.pxToRem(14),gridAutoFlow:"column",gridTemplateColumns:`${T.spacing(7)} auto`,placeItems:"center",fontWeight:T.typography.fontWeightMedium}),isActive:(0,k.css)({color:T.colors.text.primary,"&::before":{display:"block",content:'" "',height:T.spacing(3),position:"absolute",left:T.spacing(1),top:"50%",transform:"translateY(-50%)",width:T.spacing(.5),borderRadius:T.shape.borderRadius(1),backgroundImage:T.colors.gradients.brandVertical}}),hasActiveChild:(0,k.css)({color:T.colors.text.primary})});function Wu({link:T,activeItem:L,onClose:H}){const J=(0,De.wW)($u);return T.emptyMessage&&!gc(T)?a.createElement(fc,{onClose:H,link:T,activeItem:L},a.createElement("ul",{className:J.children},a.createElement("div",{className:J.emptyMessage},T.emptyMessage))):a.createElement(fc,{onClose:H,link:T,activeItem:L},gc(T)&&a.createElement("ul",{className:J.children},T.children.map(oe=>{const ue=oe.icon?(0,xr.toIconName)(oe.icon):void 0;return!oe.isCreateAction&&a.createElement(dc,{key:`${T.text}-${oe.text}`,isActive:mo(oe,L),isChild:!0,icon:oe.showIconInNavbar?ue:void 0,onClick:()=>{oe.onClick?.(),H()},target:oe.target,url:oe.url},oe.text)})))}const $u=T=>({children:(0,k.css)({display:"flex",flexDirection:"column"}),flex:(0,k.css)({display:"flex"}),itemWithoutMenu:(0,k.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,k.css)({height:"100%",width:"100%"}),iconContainer:(0,k.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,k.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${T.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,k.css)({fontSize:T.typography.pxToRem(14),justifySelf:"start"}),emptyMessage:(0,k.css)({color:T.colors.text.secondary,fontStyle:"italic",padding:T.spacing(1,1.5,1,7)})});function gc(T){return Boolean(T.children&&T.children.length>0)}const oi="350px";function el({activeItem:T,navItems:L,searchBarHidden:H,onClose:J}){const oe=(0,De.l4)(),ue=tl(oe,H),ye=oe.transitions.duration.shortest,ze=Ku(oe,ye),{chrome:qe}=(0,ei.p)(),mt=qe.useState(),Pt=(0,a.useRef)(null),Ot=(0,a.useRef)(null),{dialogProps:Ft}=(0,ro.R)({},Pt),[zt,Jt]=(0,a.useState)(!1),hn=()=>Jt(!1),{overlayProps:In,underlayProps:Zn}=(0,cs.Ir)({isDismissable:!0,isOpen:!0,onClose:hn},Pt);return(0,a.useEffect)(()=>{mt.megaMenuOpen&&Jt(!0)},[mt.megaMenuOpen]),a.createElement(cs.Xj,null,a.createElement(gr.Z,{nodeRef:Pt,in:zt,unmountOnExit:!0,classNames:ze.overlay,timeout:{enter:ye,exit:0},onExited:J},a.createElement(So.MT,{contain:!0,autoFocus:!0},a.createElement("div",{"data-testid":"navbarmenu",ref:Pt,...In,...Ft,className:ue.container},a.createElement("div",{className:ue.mobileHeader},a.createElement(na.J,{name:"bars",size:"xl"}),a.createElement(ps.h,{"aria-label":"Close navigation menu",name:"times",onClick:hn,size:"xl",variant:"secondary"})),a.createElement("nav",{className:ue.content},a.createElement(Oo.$,{showScrollIndicators:!0,hideHorizontalTrack:!0},a.createElement("ul",{className:ue.itemList},L.map(Fn=>a.createElement(Wu,{link:Fn,onClose:hn,activeItem:T,key:Fn.text})))))))),a.createElement(gr.Z,{nodeRef:Ot,in:zt,unmountOnExit:!0,classNames:ze.backdrop,timeout:{enter:ye,exit:0}},a.createElement("div",{ref:Ot,className:ue.backdrop,...Zn})))}el.displayName="NavBarMenu";const tl=(T,L)=>{const H=(L?xs.$:xs.$*2)+1;return{backdrop:(0,k.css)({backdropFilter:"blur(1px)",backgroundColor:T.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:L?0:xs.$,zIndex:T.zIndex.modalBackdrop,[T.breakpoints.up("md")]:{top:H}}),container:(0,k.css)({display:"flex",bottom:0,flexDirection:"column",left:0,marginRight:T.spacing(1.5),right:0,zIndex:T.zIndex.modal,position:"fixed",top:L?0:xs.$,backgroundColor:T.colors.background.primary,boxSizing:"content-box",flex:"1 1 0",[T.breakpoints.up("md")]:{borderRight:`1px solid ${T.colors.border.weak}`,right:"unset",top:H}}),content:(0,k.css)({display:"flex",flexDirection:"column",flexGrow:1,minHeight:0}),mobileHeader:(0,k.css)({display:"flex",justifyContent:"space-between",padding:T.spacing(1,1,1,2),borderBottom:`1px solid ${T.colors.border.weak}`,[T.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({display:"grid",gridAutoRows:`minmax(${T.spacing(6)}, auto)`,gridTemplateColumns:`minmax(${oi}, auto)`,minWidth:oi})}},Ku=(T,L)=>{const H={transitionDuration:`${L}ms`,transitionTimingFunction:T.transitions.easing.easeInOut,[T.breakpoints.down("md")]:{overflow:"hidden"}},J={...H,transitionProperty:"box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},oe={...H,transitionProperty:"opacity"},ue={width:"100%",[T.breakpoints.up("md")]:{boxShadow:T.shadows.z3,width:oi}},ye={boxShadow:"none",width:0},ze={opacity:1},qe={opacity:0};return{backdrop:{enter:(0,k.css)(qe),enterActive:(0,k.css)(oe,ze),enterDone:(0,k.css)(ze)},overlay:{enter:(0,k.css)(ye),enterActive:(0,k.css)(J,ue),enterDone:(0,k.css)(ue)}}},pc=a.memo(({onClose:T,searchBarHidden:L})=>{const H=(0,bn.useSelector)(Ot=>Ot.navBarTree),J=(0,De.l4)(),oe=Vu(J),ue=(0,fs.TH)(),ye=(0,E.cloneDeep)(H),ze=ye.filter(Ot=>Ot.section===ar.yV.Core||Ot.section===ar.yV.Plugin).map(Ot=>Fr(Ot,!0)),qe=Ji(ye.filter(Ot=>Ot.section===ar.yV.Config&&Ot&&Ot.id!=="help"&&Ot.id!=="profile"),ue).map(Ot=>Fr(Ot,!0)),mt=[...ze,...qe],Pt=_i(mt,ue.pathname);return a.createElement("div",{className:oe.menuWrapper},a.createElement(el,{activeItem:Pt,navItems:mt,onClose:T,searchBarHidden:L}))});pc.displayName="MegaMenu";const Vu=T=>({menuWrapper:(0,k.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:T.zIndex.sidemenu})});var ii=e(8928),zu=e(96694),Hu=e(96244),nl=e(9815),li=e(42066),ku=e(92183),fo=e(35853);const hc=(0,a.createContext)({menuHasFocus:!1,onClose:()=>{},onLeft:()=>{}});function ci(){return(0,a.useContext)(hc)}const al=(0,a.createContext)({menuIdOpen:void 0,setMenuIdOpen:()=>{}});function go(){return(0,a.useContext)(al)}function vc({item:T,state:L,onNavigate:H}){const{onClose:J,onLeft:oe}=ci(),{setMenuIdOpen:ue}=go(),{key:ye,rendered:ze}=T,qe=(0,a.useRef)(null),mt=L.disabledKeys.has(ye),[Pt,Ot]=(0,a.useState)(!1),{focusProps:Ft}=(0,fo.KK)({onFocusChange:Ot,isDisabled:mt}),zt=(0,De.l4)(),Jt=T.value.menuItemType==="section",hn=Ec(zt,Pt,Jt),In=()=>{ue(void 0),H(T.value),J()};let{menuItemProps:Zn}=(0,nl.iX)({isDisabled:mt,"aria-label":T["aria-label"],key:ye,closeOnSelect:!0,onClose:J,onAction:In},L,qe);const{keyboardProps:Fn}=(0,fo.v5)({onKeyDown:la=>{la.key==="ArrowLeft"&&oe(),la.continuePropagation()}});return a.createElement(a.Fragment,null,a.createElement("li",{...(0,li.dG)(Zn,Ft,Fn),ref:qe,className:hn.menuItem},ze))}function Ec(T,L,H){let J="transparent";return L?J=T.colors.action.hover:H&&(J=T.colors.background.secondary),{menuItem:k.css`
      background-color: ${J};
      color: ${T.colors.text.primary};

      &:focus-visible {
        background-color: ${T.colors.action.hover};
        box-shadow: none;
        color: ${T.colors.text.primary};
        outline: 2px solid ${T.colors.primary.main};
        outline-offset: -2px;
        transition: none;
      }
    `}}function Gu(T){const{reverseMenuDirection:L,adjustHeightForBorder:H,disabledKeys:J,onNavigate:oe,...ue}=T,ye=ci(),ze={...(0,li.dG)(ye,ue)},{menuHasFocus:qe,menuProps:mt={}}=ye,Pt=(0,De.l4)(),Ot=Ff(Pt,L),Ft=(0,ku.D)({...ue,disabledKeys:J}),zt=(0,a.useRef)(null),{menuProps:Jt}=(0,nl.H9)(ze,{...Ft},zt),hn=[...Ft.collection],In=hn.filter(Jr=>Jr.value.menuItemType===ar.VO.Item),Zn=hn.find(Jr=>Jr.value.menuItemType===ar.VO.Section);if((0,a.useEffect)(()=>{qe&&!Ft.selectionManager.isFocused?(Ft.selectionManager.setFocusedKey(Zn?.key??""),Ft.selectionManager.setFocused(!0)):qe||(Ft.selectionManager.setFocused(!1),Ft.selectionManager.setFocusedKey(""),Ft.selectionManager.clearSelection())},[qe,Ft.selectionManager,L,Zn?.key]),!Zn)return null;const Fn=Zn.value.subTitle,la=a.createElement(vc,{key:Zn.key,item:Zn,state:Ft,onNavigate:oe}),ys=In.map(Jr=>a.createElement(vc,{key:cc(Jr.value),item:Jr,state:Ft,onNavigate:oe}));ys.length===0&&Zn.value.emptyMessage&&ys.push(a.createElement("div",{key:"empty-message",className:Ot.emptyMessage},Zn.value.emptyMessage));const Ks=Fn&&a.createElement("li",{key:Fn,className:Ot.subtitle},Fn),Lr=[ys,Ks],oo=a.createElement(Oo.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0,key:"scrollContainer"},L?Lr.reverse():Lr),yi=[la,oo];return a.createElement("ul",{className:Ot.menu,ref:zt,...(0,li.dG)(Jt,mt),tabIndex:-1},L?yi.reverse():yi)}function Ff(T,L){return{menu:k.css`
      background-color: ${T.colors.background.primary};
      border: 1px solid ${T.components.panel.borderColor};
      box-shadow: ${T.shadows.z3};
      display: flex;
      flex-direction: column;
      list-style: none;
      max-height: 400px;
      max-width: 300px;
      min-width: 140px;
      transition: ${T.transitions.create("opacity")};
      z-index: ${T.zIndex.sidemenu};
    `,subtitle:k.css`
      background-color: transparent;
      border-${L?"bottom":"top"}: 1px solid ${T.colors.border.weak};
      color: ${T.colors.text.secondary};
      font-size: ${T.typography.bodySmall.fontSize};
      font-weight: ${T.typography.bodySmall.fontWeight};
      padding: ${T.spacing(1)} ${T.spacing(2)} ${T.spacing(1)};
      text-align: left;
      white-space: nowrap;
    `,emptyMessage:k.css`
      font-style: italic;
      padding: ${T.spacing(.5,2)};
    `}}var di=e(35210),yc=e(91053);const Pc="navbar-menu-portal-container",Yu=()=>document.getElementById(Pc)??document.body,sl=()=>{const T=(0,De.l4)(),L=Cc(T);return a.createElement("div",{className:L.menuPortalContainer,id:Pc})};sl.displayName="NavBarMenuPortalContainer";const Cc=T=>({menuPortalContainer:(0,k.css)({left:0,position:"fixed",right:0,top:0,zIndex:T.zIndex.sidemenu})});function ju(T){const{item:L,isActive:H,label:J,children:oe,reverseMenuDirection:ue,...ye}=T,[ze,qe]=(0,a.useState)(!1),{menuIdOpen:mt,setMenuIdOpen:Pt}=go(),Ot=(0,De.l4)(),Ft=Wf(Ot,H),zt=(0,yc.W)({...ye}),Jt=a.useRef(null),{menuTriggerProps:hn,menuProps:In}=(0,nl.u4)({},zt,Jt);(0,a.useEffect)(()=>{L.highlightId&&(0,mr.SZ)(`feature-highlights-${L.highlightId}-nav`,"test","")},[L.highlightId]);const{hoverProps:Zn}=(0,fo.XI)({onHoverChange:io=>{io?(zt.open(),Pt(L.id)):(zt.close(),Pt(void 0))}});(0,a.useEffect)(()=>{mt!==L.id?(zt.close(),qe(!1)):zt.open()},[mt,zt,L.id]);const{keyboardProps:Fn}=(0,fo.v5)({onKeyDown:io=>{switch(io.key){case"ArrowRight":zt.isOpen||(zt.open(),Pt(L.id)),qe(!0);break;case"Tab":Pt(void 0);break;default:break}}}),{buttonProps:la}=(0,di.U)(hn,Jt),ys=L.highlightText?Ro:a.Fragment,Ks=a.createElement(ys,null,a.createElement("span",{className:Ft.icon},a.createElement(Io,{link:L})));let Lr=a.createElement("button",{className:Ft.element,...la,...Fn,...Zn,ref:Jt,onClick:L?.onClick,"aria-label":J},Ks);L?.url&&(Lr=!L.target&&L.url.startsWith("/")?a.createElement(Xi.r,{...la,...Fn,...Zn,ref:Jt,href:L.url,target:L.target,onClick:L?.onClick,className:Ft.element,"aria-label":J},Ks):a.createElement("a",{href:L.url,target:L.target,onClick:L?.onClick,...la,...Fn,...Zn,ref:Jt,className:Ft.element,"aria-label":J},Ks));const oo=a.useRef(null),{dialogProps:yi}=(0,ro.R)({},oo),{overlayProps:Jr}=(0,cs.Ir)({onClose:()=>{zt.close(),Pt(void 0)},isOpen:zt.isOpen,isDismissable:!0},oo);let{overlayProps:Sf}=(0,cs.tN)({targetRef:Jt,overlayRef:oo,placement:ue?"right bottom":"right top",isOpen:zt.isOpen});const{focusWithinProps:Mr}=(0,fo.L_)({onFocusWithin:io=>{io.target.id===Jt.current?.id&&(Pt(L.id),zt.open()),io.target.scrollIntoView?.({block:"nearest"})},onBlurWithin:io=>{io.target?.getAttribute("role")==="menuitem"&&!oo.current?.contains(io.relatedTarget)&&Pt(void 0)}});return a.createElement("div",{className:(0,k.cx)(Ft.element,"dropdown"),...Mr},Lr,zt.isOpen&&a.createElement(cs.Xj,{portalContainer:Yu()},a.createElement(hc.Provider,{value:{menuProps:In,menuHasFocus:ze,onClose:()=>zt.close(),onLeft:()=>{qe(!1),Jt.current?.focus()}}},a.createElement(So.MT,{restoreFocus:!0},a.createElement("div",{...Jr,...Sf,...yi,...Zn,ref:oo},a.createElement(cs.U4,{onDismiss:()=>zt.close()}),oe,a.createElement(cs.U4,{onDismiss:()=>zt.close()}))))))}const Wf=(T,L)=>({element:(0,k.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"grid",padding:0,placeContent:"center",height:T.spacing(6),width:T.spacing(7),"&::before":{display:L?"block":"none",content:'" "',position:"absolute",left:T.spacing(1),top:T.spacing(1.5),bottom:T.spacing(1.5),width:T.spacing(.5),borderRadius:T.shape.borderRadius(1),backgroundImage:T.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:T.colors.action.hover,boxShadow:"none",color:T.colors.text.primary,outline:`${T.shape.borderRadius(1)} solid ${T.colors.primary.main}`,outlineOffset:`-${T.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,k.css)({height:"100%",width:"100%"})});function xc({label:T,children:L,url:H,target:J,isActive:oe=!1,onClick:ue,highlightText:ye,className:ze,elClassName:qe}){const mt=(0,De.l4)(),Pt=rl(mt,oe),Ot=ye?a.createElement(Ro,null,a.createElement("div",{className:Pt.icon},L)):a.createElement("div",{className:Pt.icon},L),Ft=(0,k.cx)(Pt.element,qe),zt=()=>H?!J&&H.startsWith("/")?a.createElement(Xi.r,{className:Ft,href:H,target:J,"aria-label":T,onClick:ue,"aria-haspopup":"true"},Ot):a.createElement("a",{href:H,target:J,className:Ft,onClick:ue,"aria-label":T},Ot):a.createElement("button",{className:Ft,onClick:ue,"aria-label":T},Ot);return a.createElement("div",{className:(0,k.cx)(Pt.container,ze)},zt())}function rl(T,L){return{container:(0,k.css)({position:"relative",color:L?T.colors.text.primary:T.colors.text.secondary,display:"grid","&:hover":{backgroundColor:T.colors.action.hover,color:T.colors.text.primary}}),element:(0,k.css)({backgroundColor:"transparent",border:"none",color:"inherit",display:"block",padding:0,overflowWrap:"anywhere","&::before":{display:L?"block":"none",content:"' '",position:"absolute",left:T.spacing(1),top:T.spacing(1.5),bottom:T.spacing(1.5),width:T.spacing(.5),borderRadius:T.shape.borderRadius(1),backgroundImage:T.colors.gradients.brandVertical},"&:focus-visible":{backgroundColor:T.colors.action.hover,boxShadow:"none",color:T.colors.text.primary,outline:`${T.shape.borderRadius(1)} solid ${T.colors.primary.main}`,outlineOffset:`-${T.shape.borderRadius(1)}`,transition:"none"}}),icon:(0,k.css)({height:"100%",width:"100%"})}}function ol({icon:T,isActive:L,isDivider:H,onClick:J,styleOverrides:oe,target:ue,text:ye,url:ze,isMobile:qe=!1}){const mt=(0,De.l4)(),Pt=Qu(mt,L),Ot=(0,k.cx)(Pt.element,oe),Ft=a.createElement("div",{className:Pt.linkContent},T&&a.createElement(na.J,{"data-testid":"dropdown-child-icon",name:T}),a.createElement("div",{className:Pt.linkText},ye),ue==="_blank"&&a.createElement(na.J,{"data-testid":"external-link-icon",name:"external-link-alt",className:Pt.externalLinkIcon}));let zt=a.createElement("button",{className:Ot,onClick:J,tabIndex:-1},Ft);return ze&&(zt=!ue&&ze.startsWith("/")?a.createElement(Xi.r,{className:Ot,href:ze,target:ue,onClick:J,tabIndex:qe?0:-1},Ft):a.createElement("a",{href:ze,target:ue,className:Ot,onClick:J,tabIndex:qe?0:-1},Ft)),qe?H?a.createElement("div",{"data-testid":"dropdown-child-divider",className:Pt.divider,tabIndex:-1,"aria-disabled":!0}):a.createElement("li",{className:Pt.listItem},zt):H?a.createElement("div",{"data-testid":"dropdown-child-divider",className:Pt.divider,tabIndex:-1,"aria-disabled":!0}):a.createElement("div",{style:{position:"relative"}},zt)}ol.displayName="NavBarMenuItem";const Qu=(T,L)=>({linkContent:(0,k.css)({alignItems:"center",display:"flex",gap:"0.5rem",width:"100%"}),linkText:(0,k.css)({textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}),externalLinkIcon:(0,k.css)({color:T.colors.text.secondary,gridColumnStart:3}),element:(0,k.css)({alignItems:"center",background:"none",border:"none",color:L?T.colors.text.primary:T.colors.text.secondary,display:"flex",flex:1,fontSize:"inherit",height:"100%",overflowWrap:"anywhere",padding:T.spacing(.5,2),textAlign:"left",width:"100%","&:hover, &:focus-visible":{backgroundColor:T.colors.action.hover,color:T.colors.text.primary},"&:focus-visible":{boxShadow:"none",outline:`2px solid ${T.colors.primary.main}`,outlineOffset:"-2px",transition:"none"},"&::before":{display:L?"block":"none",content:'" "',position:"absolute",left:0,top:0,bottom:0,width:T.spacing(.5),borderRadius:T.shape.borderRadius(1),backgroundImage:T.colors.gradients.brandVertical}}),listItem:(0,k.css)({position:"relative",display:"flex",alignItems:"center","&:hover, &:focus-within":{color:T.colors.text.primary,"> *:first-child::after":{backgroundColor:T.colors.action.hover}}}),divider:(0,k.css)({borderBottom:`1px solid ${T.colors.border.weak}`,height:"1px",margin:`${T.spacing(1)} 0`,overflow:"hidden"})}),jr=({isActive:T=!1,className:L,reverseMenuDirection:H=!1,link:J})=>{const oe=(0,De.l4)(),ue=J.children??[],{menuIdOpen:ye}=go(),qe=(H?[...ue].reverse():ue).filter(Jt=>!Jt.hideFromMenu).map(Jt=>({...Jt,menuItemType:ar.VO.Item})),mt=qe.length===0,Pt=Zu(oe,mt,T),Ot={...J,children:qe,menuItemType:ar.VO.Section},Ft=[Ot].concat(qe),zt=Jt=>{const{url:hn,target:In,onClick:Zn}=Jt;Zn?.(),hn&&(!In&&hn.startsWith("/")?B.E1.push(M.u.stripBaseFromUrl(hn)):window.open(hn,In))};return a.createElement("li",{className:(0,k.cx)(Pt.container,{[Pt.containerHover]:Ot.id===ye},L)},a.createElement(ju,{item:Ot,isActive:T,label:J.text,reverseMenuDirection:H},a.createElement(Gu,{items:Ft,reverseMenuDirection:H,adjustHeightForBorder:mt,disabledKeys:["divider","subtitle"],"aria-label":Ot.text,onNavigate:zt},Jt=>{const hn=Jt.menuItemType===ar.VO.Section,In=Jt.icon?(0,xr.toIconName)(Jt.icon):void 0,Zn=Jt.showIconInNavbar&&!hn?In:void 0;return a.createElement(Hu.ck,{key:cc(Jt),textValue:Jt.text},a.createElement(ol,{isDivider:!hn&&Jt.divider,icon:Zn,target:Jt.target,text:Jt.text,url:Jt.url,onClick:Jt.onClick,styleOverrides:(0,k.cx)(Pt.primaryText,{[Pt.header]:hn})}))})))},Zu=(T,L,H)=>({...rl(T,H),containerHover:(0,k.css)({backgroundColor:T.colors.action.hover,color:T.colors.text.primary}),primaryText:(0,k.css)({color:T.colors.text.primary}),header:(0,k.css)({height:`calc(${T.spacing(6)} - ${L?2:1}px)`,fontSize:T.typography.h4.fontSize,fontWeight:T.typography.h4.fontWeight,padding:`${T.spacing(1)} ${T.spacing(2)}`,whiteSpace:"nowrap",width:"100%"})});var Ju=e(20941),_u=e(9085),Xu=e.n(_u);const il=({className:T,isExpanded:L,onClick:H})=>{const J=(0,De.l4)(),oe=qu(J);return a.createElement(ps.h,{"aria-label":L?"Close navigation menu":"Open navigation menu",name:L?"angle-left":"angle-right",className:Xu()(T,oe.icon),size:"xl",onClick:H})};il.displayName="NavBarToggle";const qu=T=>({icon:(0,k.css)({backgroundColor:T.colors.background.secondary,border:`1px solid ${T.colors.border.weak}`,borderRadius:"50%",marginRight:0,zIndex:T.zIndex.sidemenu+1,[T.breakpoints.down("md")]:{display:"none"}})}),ll="350px";function Dc({activeItem:T,isOpen:L,navItems:H,onClose:J,setMenuAnimationInProgress:oe}){const ue=(0,De.l4)(),ye=bc(ue),ze=ue.transitions.duration.standard,qe=em(ue,ze),mt=(0,a.useRef)(null),Pt=(0,a.useRef)(null),{dialogProps:Ot}=(0,ro.R)({},mt),{overlayProps:Ft,underlayProps:zt}=(0,cs.Ir)({isDismissable:!0,isOpen:L,onClose:J},mt);return a.createElement(cs.Xj,null,a.createElement(So.MT,{contain:!0,restoreFocus:!0,autoFocus:!0},a.createElement(gr.Z,{nodeRef:mt,onEnter:()=>oe(!0),onExited:()=>oe(!1),appear:L,in:L,classNames:qe.overlay,timeout:ze},a.createElement("div",{"data-testid":"navbarmenu",ref:mt,...Ft,...Ot,className:ye.container},a.createElement("div",{className:ye.mobileHeader},a.createElement(na.J,{name:"bars",size:"xl"}),a.createElement(ps.h,{"aria-label":"Close navigation menu",name:"times",onClick:J,size:"xl",variant:"secondary"})),a.createElement(il,{className:ye.menuCollapseIcon,isExpanded:L,onClick:()=>{(0,mr.ff)("grafana_navigation_collapsed"),J()}}),a.createElement("nav",{className:ye.content},a.createElement(Oo.$,{hideHorizontalTrack:!0},a.createElement("ul",{className:ye.itemList},H.map(Jt=>a.createElement(tm,{link:Jt,onClose:J,activeItem:T,key:Jt.text})))))))),a.createElement(gr.Z,{nodeRef:Pt,appear:L,in:L,classNames:qe.backdrop,timeout:ze},a.createElement("div",{className:ye.backdrop,...zt,ref:Pt})))}Dc.displayName="NavBarMenu";const bc=T=>({backdrop:(0,k.css)({backdropFilter:"blur(1px)",backgroundColor:T.components.overlay.background,bottom:0,left:0,position:"fixed",right:0,top:0,zIndex:T.zIndex.modalBackdrop}),container:(0,k.css)({display:"flex",bottom:0,flexDirection:"column",left:0,paddingTop:T.spacing(1),marginRight:T.spacing(1.5),right:0,zIndex:T.zIndex.modal,position:"fixed",top:0,boxSizing:"content-box",[T.breakpoints.up("md")]:{borderRight:`1px solid ${T.colors.border.weak}`,right:"unset"}}),content:(0,k.css)({display:"flex",flexDirection:"column",overflow:"auto"}),mobileHeader:(0,k.css)({borderBottom:`1px solid ${T.colors.border.weak}`,display:"flex",justifyContent:"space-between",padding:T.spacing(1,2,2),[T.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({display:"grid",gridAutoRows:`minmax(${T.spacing(6)}, auto)`,minWidth:ll}),menuCollapseIcon:(0,k.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"})}),em=(T,L)=>{const H={transitionDuration:`${L}ms`,transitionTimingFunction:T.transitions.easing.easeInOut,[T.breakpoints.down("md")]:{overflow:"hidden"}},J={...H,transitionProperty:"background-color, box-shadow, width",".scrollbar-view":{overflow:"hidden !important"}},oe={...H,transitionProperty:"opacity"},ue={backgroundColor:T.colors.background.canvas,boxShadow:T.shadows.z3,width:"100%",[T.breakpoints.up("md")]:{width:ll}},ye={boxShadow:"none",width:0,[T.breakpoints.up("md")]:{backgroundColor:T.colors.background.primary,width:T.spacing(7)}},ze={opacity:1},qe={opacity:0};return{backdrop:{appear:(0,k.css)(qe),appearActive:(0,k.css)(oe,ze),appearDone:(0,k.css)(ze),exit:(0,k.css)(ze),exitActive:(0,k.css)(oe,qe)},overlay:{appear:(0,k.css)(ye),appearActive:(0,k.css)(J,ue),appearDone:(0,k.css)(ue),exit:(0,k.css)(ue),exitActive:(0,k.css)(J,ye)}}};function tm({link:T,activeItem:L,onClose:H}){const J=(0,De.wW)(nm);if(am(T))return a.createElement(Mc,{onClose:H,link:T,isActive:mo(T,L)},a.createElement("ul",{className:J.children},T.children.map(oe=>{const ue=oe.icon?(0,xr.toIconName)(oe.icon):void 0;return!oe.divider&&a.createElement(ol,{key:`${T.text}-${oe.text}`,isActive:L===oe,isDivider:oe.divider,icon:oe.showIconInNavbar?ue:void 0,onClick:()=>{oe.onClick?.(),H()},styleOverrides:J.item,target:oe.target,text:oe.text,url:oe.url,isMobile:!0})})));if(T.emptyMessage)return a.createElement(Mc,{onClose:H,link:T,isActive:mo(T,L)},a.createElement("ul",{className:J.children},a.createElement("div",{className:J.emptyMessage},T.emptyMessage)));{const oe=T.highlightText?Ro:a.Fragment;return a.createElement("li",{className:J.flex},a.createElement(xc,{className:J.itemWithoutMenu,elClassName:J.fullWidth,label:T.text,url:T.url,target:T.target,onClick:()=>{T.onClick?.(),H()},isActive:T===L},a.createElement("div",{className:J.itemWithoutMenuContent},a.createElement("div",{className:J.iconContainer},a.createElement(oe,null,a.createElement(Io,{link:T}))),a.createElement("span",{className:J.linkText},T.text))))}}const nm=T=>({children:(0,k.css)({display:"flex",flexDirection:"column"}),item:(0,k.css)({padding:`${T.spacing(1)} ${T.spacing(1.5)}`,width:`calc(100% - ${T.spacing(3)})`,"&::before":{display:"none"}}),flex:(0,k.css)({display:"flex"}),itemWithoutMenu:(0,k.css)({position:"relative",placeItems:"inherit",justifyContent:"start",display:"flex",flexGrow:1,alignItems:"center"}),fullWidth:(0,k.css)({height:"100%",width:"100%"}),iconContainer:(0,k.css)({display:"flex",placeContent:"center"}),itemWithoutMenuContent:(0,k.css)({display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${T.spacing(7)} auto`,alignItems:"center",height:"100%"}),linkText:(0,k.css)({fontSize:T.typography.pxToRem(14),justifySelf:"start",padding:T.spacing(.5,4.25,.5,.5)}),emptyMessage:(0,k.css)({color:T.colors.text.secondary,fontStyle:"italic",padding:T.spacing(1,1.5)})});function Mc({link:T,isActive:L,children:H,className:J,onClose:oe}){const ue=(0,De.wW)(Sc),[ye,ze]=(0,qi.Z)(`grafana.navigation.expanded[${T.text}]`,!1),qe=T.highlightText?Ro:a.Fragment;return a.createElement("li",{className:(0,k.cx)(ue.menuItem,J)},a.createElement(xc,{isActive:L,label:T.text,url:T.url,target:T.target,onClick:()=>{T.onClick?.(),oe()},className:ue.collapsibleMenuItem,elClassName:ue.collapsibleIcon},a.createElement(qe,null,a.createElement(Io,{link:T}))),a.createElement("div",{className:ue.collapsibleSectionWrapper},a.createElement(Ju.s,{isOpen:Boolean(ye),onToggle:mt=>ze(mt),className:ue.collapseWrapper,contentClassName:ue.collapseContent,label:a.createElement("div",{className:(0,k.cx)(ue.labelWrapper,{[ue.primary]:L})},a.createElement("span",{className:ue.linkText},T.text))},H)))}const Sc=T=>({menuItem:(0,k.css)({position:"relative",display:"grid",gridAutoFlow:"column",gridTemplateColumns:`${T.spacing(7)} minmax(calc(${ll} - ${T.spacing(7)}), auto)`}),collapsibleMenuItem:(0,k.css)({height:T.spacing(6),width:T.spacing(7),display:"grid"}),collapsibleIcon:(0,k.css)({display:"grid",placeContent:"center"}),collapsibleSectionWrapper:(0,k.css)({display:"flex",flexGrow:1,alignSelf:"start",flexDirection:"column"}),collapseWrapper:(0,k.css)({paddingLeft:T.spacing(.5),paddingRight:T.spacing(4.25),minHeight:T.spacing(6),overflowWrap:"anywhere",alignItems:"center",color:T.colors.text.secondary,"&:hover, &:focus-within":{backgroundColor:T.colors.action.hover,color:T.colors.text.primary},"&:focus-within":{boxShadow:"none",outline:`2px solid ${T.colors.primary.main}`,outlineOffset:"-2px",transition:"none"}}),collapseContent:(0,k.css)({padding:0}),labelWrapper:(0,k.css)({fontSize:"15px"}),primary:(0,k.css)({color:T.colors.text.primary}),linkText:(0,k.css)({fontSize:T.typography.pxToRem(14),justifySelf:"start"})});function am(T){return Boolean(T.children&&T.children.length>0)}const Oc=()=>{B.E1.partial({search:"open"})},Tc=a.memo(()=>{const T=(0,bn.useSelector)(Fn=>Fn.navBarTree),L=(0,De.l4)(),H=sm(L),J=(0,fs.TH)(),[oe,ue]=(0,a.useState)(!1),[ye,ze]=(0,a.useState)(!1),[qe,mt]=(0,a.useState)(void 0),Pt=Fr({id:Bu,onClick:Oc,text:"Search dashboards",icon:"search"},oe);let Ot=G.v.appSubUrl||"/";!G.v.bootData.user.isSignedIn&&!G.v.anonymousEnabled&&(Ot=ii.QX.sanitizeUrl(M.u.getUrlForPartial(J,{forceLogin:"true"})));const Ft=Fr({id:"home",text:"Home",url:Ot,icon:"grafana"},oe),zt=(0,E.cloneDeep)(T).filter(Fn=>Fn.hideFromMenu!==!0),Jt=zt.filter(Fn=>Fn.section===ar.yV.Core).map(Fn=>Fr(Fn,oe)),hn=zt.filter(Fn=>Fn.section===ar.yV.Plugin).map(Fn=>Fr(Fn,oe)),In=Ji(zt.filter(Fn=>Fn.section===ar.yV.Config),J).map(Fn=>Fr(Fn,oe)),Zn=Nu(J)?Pt:_i(zt,J.pathname);return cl(J)?null:a.createElement("div",{className:H.navWrapper},a.createElement("nav",{className:(0,k.cx)(H.sidemenu,"sidemenu"),"data-testid":"sidemenu","aria-label":"Main menu"},a.createElement(al.Provider,{value:{menuIdOpen:qe,setMenuIdOpen:mt}},a.createElement(So.MT,null,a.createElement("div",{className:H.mobileSidemenuLogo,key:"hamburger"},a.createElement(ps.h,{name:"bars",tooltip:"Toggle menu",tooltipPlacement:"bottom",size:"xl",onClick:()=>ue(!oe)})),a.createElement(il,{className:H.menuExpandIcon,isExpanded:oe,onClick:()=>{(0,mr.ff)("grafana_navigation_expanded"),ue(!0)}}),a.createElement(sl,null),a.createElement(xc,{elClassName:H.grafanaLogoInner,label:Ft.text,className:H.grafanaLogo,url:Ft.url,onClick:Ft.onClick},a.createElement(Io,{link:Ft})),a.createElement(Oo.$,{hideHorizontalTrack:!0,hideVerticalTrack:!0,showScrollIndicators:!0},a.createElement("ul",{className:H.itemList},a.createElement(jr,{className:H.search,isActive:Zn===Pt,link:Pt}),Jt.map((Fn,la)=>a.createElement(jr,{key:`${Fn.id}-${la}`,isActive:mo(Fn,Zn),link:{...Fn,subTitle:void 0}})),hn.length>0&&hn.map((Fn,la)=>a.createElement(jr,{key:`${Fn.id}-${la}`,isActive:mo(Fn,Zn),link:Fn})),In.map((Fn,la)=>a.createElement(jr,{key:`${Fn.id}-${la}`,isActive:mo(Fn,Zn),reverseMenuDirection:!0,link:Fn,className:(0,k.cx)({[H.verticalSpacer]:la===0})}))))))),(oe||ye)&&a.createElement("div",{className:H.menuWrapper},a.createElement(Dc,{activeItem:Zn,isOpen:oe,setMenuAnimationInProgress:ze,navItems:[Ft,Pt,...Jt,...hn,...In],onClose:()=>ue(!1)})))});function cl(T){const L=(0,B.Ox)(T.search);return!!((0,zu.U)(L)||T.pathname.indexOf("/d/")===0&&L.editview||L.editPanel)}Tc.displayName="NavBar";const sm=T=>({navWrapper:(0,k.css)({position:"relative",display:"flex"}),sidemenu:(0,k.css)({label:"sidemenu",display:"flex",flexDirection:"column",backgroundColor:T.colors.background.primary,zIndex:T.zIndex.sidemenu,padding:`${T.spacing(1)} 0`,position:"relative",width:T.components.sidemenu.width,borderRight:`1px solid ${T.colors.border.weak}`,[T.breakpoints.down("md")]:{height:T.spacing(7),position:"fixed",paddingTop:"0px",backgroundColor:"inherit",borderRight:0}}),mobileSidemenuLogo:(0,k.css)({alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",padding:T.spacing(2),[T.breakpoints.up("md")]:{display:"none"}}),itemList:(0,k.css)({backgroundColor:"inherit",display:"flex",flexDirection:"column",height:"100%",[T.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogo:(0,k.css)({alignItems:"stretch",display:"flex",flexShrink:0,height:T.spacing(6),justifyContent:"stretch",[T.breakpoints.down("md")]:{visibility:"hidden"}}),grafanaLogoInner:(0,k.css)({alignItems:"center",display:"flex",height:"100%",justifyContent:"center",width:"100%","> div":{height:"auto",width:"auto"}}),search:(0,k.css)({display:"none",marginTop:0,[T.breakpoints.up("md")]:{display:"grid"}}),verticalSpacer:(0,k.css)({marginTop:"auto"}),hideFromMobile:(0,k.css)({[T.breakpoints.down("md")]:{display:"none"}}),menuWrapper:(0,k.css)({position:"fixed",display:"grid",gridAutoFlow:"column",height:"100%",zIndex:T.zIndex.sidemenu}),menuExpandIcon:(0,k.css)({position:"absolute",top:"43px",right:"0px",transform:"translateX(50%)"}),menuPortalContainer:(0,k.css)({zIndex:T.zIndex.sidemenu})});var ui=e(42879),Qr=e(64319),mi=e(14393);function Ic({href:T,isCurrent:L,text:H}){const J=(0,De.wW)(rm),oe=()=>{(0,mr.ff)("grafana_breadcrumb_clicked",{url:T})};return a.createElement("li",{className:J.breadcrumbWrapper},L?a.createElement("span",{"data-testid":ui.z.Breadcrumbs.breadcrumb(H),className:J.breadcrumb,"aria-current":"page"},H):a.createElement(a.Fragment,null,a.createElement("a",{onClick:oe,"data-testid":ui.z.Breadcrumbs.breadcrumb(H),className:(0,k.cx)(J.breadcrumb,J.breadcrumbLink),href:T},H),a.createElement("div",{className:J.separator,"aria-hidden":!0},a.createElement(na.J,{name:"angle-right"}))))}const rm=T=>{const L=(0,k.css)({color:T.colors.text.secondary});return{breadcrumb:(0,k.css)({display:"block",textOverflow:"ellipsis",overflow:"hidden",padding:T.spacing(0,.5),whiteSpace:"nowrap",color:T.colors.text.secondary}),breadcrumbLink:(0,k.css)({color:T.colors.text.primary,"&:hover":{textDecoration:"underline"}}),breadcrumbWrapper:(0,k.css)({alignItems:"center",color:T.colors.text.primary,display:"flex",flex:1,minWidth:0,maxWidth:"max-content",[T.breakpoints.down("md")]:{display:"none","&:nth-last-child(2)":{display:"flex",flexDirection:"row-reverse",[`.${L}`]:{transform:"rotate(180deg)"}},"&:first-child&:last-child":{display:"flex",[`.${L}`]:{display:"none"}}}}),separator:L}};function om({breadcrumbs:T,className:L}){const H=(0,De.wW)(im);return a.createElement("nav",{"aria-label":"Breadcrumbs",className:L},a.createElement("ol",{className:H.breadcrumbs},T.map((J,oe)=>a.createElement(Ic,{...J,isCurrent:oe===T.length-1,key:oe}))))}const im=T=>({breadcrumbs:(0,k.css)({display:"flex",alignItems:"center",flexWrap:"nowrap"})});var lm=e(67345),cm=e(89097);function fi({actions:T,searchBarHidden:L,sectionNav:H,pageNav:J,onToggleMegaMenu:oe,onToggleSearchBar:ue,onToggleKioskMode:ye}){const ze=(0,bn.useSelector)(Pt=>Pt.navIndex)[mi.Qz],qe=(0,De.wW)(dm),mt=(0,lm.t)(H,J,ze);return a.createElement("div",{"data-testid":ui.z.NavToolbar.container,className:qe.pageToolbar},a.createElement("div",{className:qe.menuButton},a.createElement(ps.h,{name:"bars",tooltip:(0,Ia.t)("navigation.toolbar.toggle-menu","Toggle menu"),tooltipPlacement:"bottom",size:"xl",onClick:oe})),a.createElement(om,{breadcrumbs:mt,className:qe.breadcrumbs}),a.createElement("div",{className:qe.actions},T,T&&a.createElement(cm.M,null),L&&a.createElement(Qr.h,{onClick:ye,narrow:!0,title:(0,Ia.t)("navigation.toolbar.enable-kiosk","Enable kiosk mode"),icon:"monitor"}),a.createElement(Qr.h,{onClick:ue,narrow:!0,title:(0,Ia.t)("navigation.toolbar.toggle-search-bar","Toggle top search bar")},a.createElement(na.J,{name:L?"angle-down":"angle-up",size:"xl"}))))}const dm=T=>({breadcrumbs:(0,k.css)({maxWidth:"50%"}),pageToolbar:(0,k.css)({height:xs.$,display:"flex",padding:T.spacing(0,1,0,2),alignItems:"center",justifyContent:"space-between"}),menuButton:(0,k.css)({display:"flex",alignItems:"center",marginRight:T.spacing(1)}),actions:(0,k.css)({display:"flex",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-end",paddingLeft:T.spacing(1),flexGrow:1,gap:T.spacing(.5),minWidth:0})});var po=e(71698),Rc=e(86253),um=e(30979),mm=e(6981),fm=e(89050),Ac=e(61744),Kf=e(53764),Ws=e(13724);function Lc({feedUrl:T}){const L=(0,De.wW)(Vf),{state:H,getNews:J}=(0,Ws.j)(T);return(0,a.useEffect)(()=>{J()},[J]),H.loading||H.error?a.createElement("div",{className:L.innerWrapper},H.loading&&a.createElement(Ac.u,{text:"Loading..."}),H.error&&H.error.message):H.value?a.createElement(fm.Z,null,({width:oe})=>a.createElement("div",{style:{width:`${oe}px`}},H.value.map((ue,ye)=>a.createElement(Kf.S,{key:ye,index:ye,showImage:!0,width:oe,data:H.value})))):null}const Vf=T=>({innerWrapper:k.css`
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    `});function Ao({className:T}){const[L,H]=(0,Rc.Z)(!1),J=()=>{H(!0)};return a.createElement(a.Fragment,null,a.createElement(Qr.h,{className:T,onClick:J,iconOnly:!0,icon:"rss","aria-label":"News"}),L&&a.createElement(um.d,{title:(0,Ia.t)("news.title","Latest from the blog"),scrollableContent:!0,onClose:H},a.createElement(Lc,{feedUrl:mm.k})))}function Lo({breakpoint:T,onChange:L}){(0,a.useEffect)(()=>{const H=window.matchMedia(`(min-width: ${T}px)`),J=oe=>L(oe);return H.addEventListener("change",J),()=>H.removeEventListener("change",J)},[T,L])}var Bc=e(2183);function wc({orgs:T,onSelectChange:L}){const H=(0,De.wW)(gm);return a.createElement(Ba.b,{"aria-label":"Change organization",variant:"secondary",buttonCss:H.buttonCss,size:"md",label:"",fill:"text",isFullWidth:!1,options:T.map(J=>({label:J.name,description:J.role,value:J})),onChange:L,icon:"building"})}const gm=T=>({buttonCss:(0,k.css)({color:T.colors.text.secondary,"&:hover":{color:T.colors.text.primary}})});function pm({orgs:T,onSelectChange:L}){const H=(0,De.wW)(hm),{orgName:J,orgId:oe,orgRole:ue}=ts.Vt.user,[ye,ze]=(0,a.useState)(()=>({label:J,value:{role:ue,orgId:oe,name:J},description:ue})),qe=mt=>{ze(mt),L(mt)};return a.createElement(X.Ph,{"aria-label":"Change organization",width:"auto",value:ye,prefix:a.createElement(na.J,{className:"prefix-icon",name:"building"}),className:H.select,options:T.map(mt=>({label:mt.name,description:mt.role,value:mt})),onChange:qe})}const hm=T=>({select:(0,k.css)({border:"none",background:"none",color:T.colors.text.secondary,"&:hover":{color:T.colors.text.primary,"& .prefix-icon":(0,k.css)({color:T.colors.text.primary})}})});function vm(){const T=(0,De.l4)(),L=(0,bn.useDispatch)(),H=(0,bn.useSelector)(qe=>qe.organization.userOrgs),J=qe=>{qe.value&&((0,Bc.Q$)(qe.value.orgId),B.E1.push(`/?orgId=${qe.value.orgId}`),window.location.reload())};(0,a.useEffect)(()=>{ts.Vt.isSignedIn&&L((0,Bc.JE)())},[L]);const oe=T.breakpoints.values.sm,[ue,ye]=(0,a.useState)(!window.matchMedia(`(min-width: ${oe}px)`).matches);if(Lo({breakpoint:oe,onChange:qe=>{ye(!qe.matches)}}),H?.length<=1)return null;const ze=ue?wc:pm;return a.createElement(ze,{orgs:H,onSelectChange:J})}var dl=e(38484);function Nc(T){const L=[];for(const H of T)H.isCreateAction&&L.push(H),H.children&&L.push(...Nc(H.children));return L}const Em=({})=>{const T=(0,De.wW)(ym),L=(0,De.l4)(),H=(0,bn.useSelector)(qe=>qe.navBarTree),J=L.breakpoints.values.sm,[oe,ue]=(0,a.useState)(!window.matchMedia(`(min-width: ${J}px)`).matches),ye=(0,a.useMemo)(()=>Nc(H),[H]);Lo({breakpoint:J,onChange:qe=>{ue(!qe.matches)}});const ze=()=>a.createElement(dl.v,null,ye.map((qe,mt)=>a.createElement(dl.v.Item,{key:mt,url:qe.url,label:qe.text,onClick:()=>(0,mr.ff)("grafana_menu_item_clicked",{url:qe.url,from:"quickadd"})})));return ye.length>0?a.createElement(a.Fragment,null,a.createElement(po.L,{overlay:ze,placement:"bottom-end"},qe=>oe?a.createElement(Qr.h,{iconOnly:!0,icon:"plus-circle","aria-label":"New"}):a.createElement(Qr.h,{iconOnly:!0,icon:"plus",isOpen:qe,"aria-label":"New"})),a.createElement(cm.M,{className:T.separator})):null},ym=T=>({buttonContent:(0,k.css)({alignItems:"center",display:"flex"}),buttonText:(0,k.css)({[T.breakpoints.down("md")]:{display:"none"}}),separator:(0,k.css)({[T.breakpoints.down("sm")]:{display:"none"}})});function Pm(){const T=(0,fs.TH)(),L=(0,De.wW)(ul),H=ii.QX.sanitizeUrl(M.u.getUrlForPartial(T,{forceLogin:"true"}));return a.createElement("a",{className:L.link,href:H,target:"_self"},"Sign in")}const ul=T=>({link:(0,k.css)({paddingRight:T.spacing(1),whiteSpace:"nowrap","&:hover":{textDecoration:"underline"}})});var Uc=e(42044);function Fc({node:T}){const L=(0,De.wW)(Cm),H=(0,fs.TH)(),J=Ji([(0,E.cloneDeep)(T)],H),oe=Fr(J[0],!1);return oe?a.createElement(dl.v,{header:a.createElement("div",{onClick:ue=>ue.stopPropagation(),className:L.header},a.createElement("div",null,oe.text),oe.subTitle&&a.createElement("div",{className:L.subTitle},oe.subTitle))},oe.children?.map(ue=>ue.url?a.createElement(Uc.s,{url:ue.url,label:ue.text,icon:ue.icon,target:ue.target,key:ue.id}):a.createElement(Uc.s,{icon:ue.icon,onClick:ue.onClick,label:ue.text,key:ue.id}))):null}const Cm=T=>({header:(0,k.css)({fontSize:T.typography.h5.fontSize,fontWeight:T.typography.h5.fontWeight,padding:T.spacing(.5,1),whiteSpace:"nowrap"}),subTitle:(0,k.css)({color:T.colors.text.secondary,fontSize:T.typography.bodySmall.fontSize})});function ml({children:T,align:L="left"}){const H=(0,De.wW)(xm),oe=(0,De.l4)().breakpoints.values.sm,[ue,ye]=(0,a.useState)(!window.matchMedia(`(min-width: ${oe}px)`).matches);return Lo({breakpoint:oe,onChange:ze=>{ye(!ze.matches)}}),ue?a.createElement(a.Fragment,null,T):a.createElement("div",{"data-test-id":"wrapper",className:(0,k.cx)(H.wrapper,{[H[L]]:L==="right"})},T)}const xm=T=>({wrapper:(0,k.css)({display:"flex",gap:T.spacing(.5),alignItems:"center"}),right:(0,k.css)({justifyContent:"flex-end"}),left:(0,k.css)({}),center:(0,k.css)({})});var fl=e(85419),Wc=e(43226);function Dm(){const T=(0,De.l4)(),{query:L}=(0,Cs.useKBar)(ye=>({kbarSearchQuery:ye.searchQuery,kbarIsOpen:ye.visualState===Cs.VisualState.showing})),H=T.breakpoints.values.sm,[J,oe]=(0,a.useState)(!window.matchMedia(`(min-width: ${H}px)`).matches);Lo({breakpoint:H,onChange:ye=>{oe(!ye.matches)}});const ue=()=>{L.toggle()};return J?a.createElement(Qr.h,{iconOnly:!0,icon:"search","aria-label":(0,Ia.t)("nav.search.placeholderCommandPalette","Search or jump to..."),onClick:ue}):a.createElement(gl,{onClick:ue})}function gl({onClick:T}){const L=(0,De.wW)(bm),H=(0,a.useMemo)(()=>(0,Wc.vl)(),[]);return a.createElement("div",{className:L.wrapper},a.createElement("div",{className:L.inputWrapper},a.createElement("div",{className:L.prefix},a.createElement(na.J,{name:"search"})),a.createElement("button",{className:L.fakeInput,onClick:T},(0,Ia.t)("nav.search.placeholderCommandPalette","Search or jump to...")),a.createElement("div",{className:L.suffix},a.createElement(na.J,{name:"keyboard"}),a.createElement("span",{className:L.shortcut},H,"+k"))))}const bm=T=>{const L=(0,ae.H)({theme:T});return{wrapper:L.wrapper,inputWrapper:L.inputWrapper,prefix:L.prefix,suffix:(0,k.css)([L.suffix,{display:"flex",gap:T.spacing(.5)}]),shortcut:(0,k.css)({fontSize:T.typography.bodySmall.fontSize}),fakeInput:(0,k.css)([L.input,{textAlign:"left",paddingLeft:28,color:T.colors.text.disabled,"&:focus":{outline:"unset",boxShadow:"unset"},"&:focus-visible":k.css`
          ${(0,fl.focusCss)(T)}
        `}]),button:(0,k.css)({width:"100%",textAlign:"center","> *":{width:"100%",textAlign:"center",justifyContent:"center",gap:"1ch"}})}},Mm=a.memo(function(){const L=(0,De.wW)(Sm),H=(0,bn.useSelector)(ze=>ze.navIndex),J=(0,fs.TH)(),oe=H.help,ue=H.profile;let ye=Q.vc.appSubUrl||"/";return!Q.vc.bootData.user.isSignedIn&&!Q.vc.anonymousEnabled&&(ye=ii.QX.sanitizeUrl(M.u.getUrlForPartial(J,{forceLogin:"true"}))),a.createElement("div",{className:L.layout},a.createElement(ml,null,a.createElement("a",{className:L.logo,href:ye,title:"Go to home"},a.createElement(Ii.c.MenuLogo,{className:L.img})),a.createElement(vm,null)),a.createElement(ml,null,a.createElement(Dm,null)),a.createElement(ml,{align:"right"},a.createElement(Em,null),oe&&a.createElement(po.L,{overlay:()=>a.createElement(Fc,{node:oe}),placement:"bottom-end"},a.createElement(Qr.h,{iconOnly:!0,icon:"question-circle","aria-label":"Help"})),a.createElement(Ao,{className:L.newsButton}),!za.Vt.user.isSignedIn&&a.createElement(Pm,null),ue&&a.createElement(po.L,{overlay:()=>a.createElement(Fc,{node:ue}),placement:"bottom-end"},a.createElement(Qr.h,{className:L.profileButton,imgSrc:za.Vt.user.gravatarUrl,imgAlt:"User avatar","aria-label":"Profile"}))))}),Sm=T=>({layout:(0,k.css)({height:xs.$,display:"flex",gap:T.spacing(1),alignItems:"center",padding:T.spacing(0,1,0,2),borderBottom:`1px solid ${T.colors.border.weak}`,justifyContent:"space-between",[T.breakpoints.up("sm")]:{gridTemplateColumns:"1.5fr minmax(240px, 1fr) 1.5fr",display:"grid",justifyContent:"flex-start"}}),img:(0,k.css)({height:T.spacing(3),width:T.spacing(3)}),logo:(0,k.css)({display:"flex"}),profileButton:(0,k.css)({padding:T.spacing(0,.25),img:{borderRadius:"50%",height:"24px",marginRight:0,width:"24px"}}),newsButton:(0,k.css)({[T.breakpoints.down("sm")]:{display:"none"}})});function Om({children:T}){const L=(0,De.wW)(Tm),{chrome:H}=(0,ei.p)(),J=H.useState();if(!G.v.featureToggles.topnav)return a.createElement(a.Fragment,null,!J.chromeless&&a.createElement(a.Fragment,null,a.createElement(Tc,null),a.createElement(Ru._,null),a.createElement(rc,null)),a.createElement("main",{className:"main-view"},T));const oe=J.searchBarHidden||J.kioskMode===bn.KioskMode.TV,ue=(0,k.cx)({[L.content]:!0,[L.contentNoSearchBar]:oe,[L.contentChromeless]:J.chromeless});return a.createElement("main",{className:"main-view"},!J.chromeless&&a.createElement("div",{className:(0,k.cx)(L.topNav)},!oe&&a.createElement(Mm,null),a.createElement(fi,{searchBarHidden:oe,sectionNav:J.sectionNav,pageNav:J.pageNav,actions:J.actions,onToggleSearchBar:H.onToggleSearchBar,onToggleMegaMenu:H.onToggleMegaMenu,onToggleKioskMode:H.onToggleKioskMode})),a.createElement("div",{className:ue},T),!J.chromeless&&a.createElement(a.Fragment,null,a.createElement(pc,{searchBarHidden:oe,onClose:()=>H.setMegaMenu(!1)}),a.createElement(rc,null)))}const Tm=T=>{const L=T.isDark?"0 0.6px 1.5px rgb(0 0 0), 0 2px 4px rgb(0 0 0 / 40%), 0 5px 10px rgb(0 0 0 / 23%)":"0 0.6px 1.5px rgb(0 0 0 / 8%), 0 2px 4px rgb(0 0 0 / 6%), 0 5px 10px rgb(0 0 0 / 5%)";return{content:(0,k.css)({display:"flex",flexDirection:"column",paddingTop:xs.$*2,flexGrow:1,height:"100%"}),contentNoSearchBar:(0,k.css)({paddingTop:xs.$}),contentChromeless:(0,k.css)({paddingTop:0}),topNav:(0,k.css)({display:"flex",position:"fixed",zIndex:T.zIndex.navbarFixed,left:0,right:0,boxShadow:L,background:T.colors.background.primary,flexDirection:"column"})}};var $c=e(659),Kc=e(98864),pl=e(60499),Im=e(58252);function Rm({appNotification:T,onClearNotification:L}){const H=(0,De.wW)(Vc);return(0,Im.Z)(()=>{setTimeout(()=>{L(T.id)},bn.timeoutMap[T.severity])}),a.createElement(Ta.b,{severity:T.severity,title:T.title,onRemove:()=>L(T.id),elevated:!0},a.createElement("div",{className:H.wrapper},a.createElement("span",null,T.component||T.text),T.traceId&&a.createElement("span",{className:H.trace},"Trace ID: ",T.traceId)))}function Vc(T){return{wrapper:(0,k.css)({display:"flex",flexDirection:"column"}),trace:(0,k.css)({fontSize:T.typography.pxToRem(10)})}}const Am=(T,L)=>({appNotifications:(0,Kc.vo)(T.appNotifications)}),Lm={notifyApp:$c.$l,hideAppNotification:$c.ad},Bm=(0,ur.connect)(Am,Lm);class wm extends a.PureComponent{constructor(){super(...arguments),this.onClearAppNotification=L=>{this.props.hideAppNotification(L)}}componentDidMount(){const{notifyApp:L}=this.props;ns.Z.on(Ur.SI.alertWarning,H=>L((0,pl.ZR)(...H))),ns.Z.on(Ur.SI.alertSuccess,H=>L((0,pl.AT)(...H))),ns.Z.on(Ur.SI.alertError,H=>L((0,pl.t_)(...H)))}render(){const{appNotifications:L}=this.props;return a.createElement("div",{className:"page-alert-list"},a.createElement(wn.wc,null,L.map((H,J)=>a.createElement(Rm,{key:`${H.id}-${J}`,appNotification:H,onClearNotification:oe=>this.onClearAppNotification(oe)}))))}}const Nm=Bm(wm);var Um=e(13426),Fm=e.n(Um),Bo=e(39198);function Wm({error:T,errorInfo:L}){const H=(0,fs.TH)(),J=T?.name==="ChunkLoadError";return(0,a.useEffect)(()=>{J&&H.search.indexOf("chunkNotFound")===-1&&(window.location.href=M.u.getUrlForPartial(H,{chunkNotFound:!0}))},[H,J]),a.createElement(fr.T,{navId:"error",layout:ar.Qz.Canvas},a.createElement("div",{className:zc()},J&&a.createElement("div",null,a.createElement("h2",null,"Unable to find application file"),a.createElement("br",null),a.createElement("h2",{className:"page-heading"},"Grafana has likely been updated. Please try reloading the page."),a.createElement("br",null),a.createElement("div",{className:"gf-form-group"},a.createElement(ee.zx,{size:"md",variant:"secondary",icon:"repeat",onClick:()=>window.location.reload()},"Reload")),a.createElement(Bo.X,{title:"Error details",error:T,errorInfo:L})),!J&&a.createElement(Bo.X,{title:"An unexpected error happened",error:T,errorInfo:L})))}const zc=(0,ne.B)(()=>k.css`
    width: 500px;
    margin: 64px auto;
  `);function $m(){const T=(0,De.wW)(Km);return a.createElement("div",{className:T.loadingPage},a.createElement(Ac.u,{text:"Loading..."}))}const Km=()=>({loadingPage:(0,k.css)({height:"100%",flexDrection:"column",display:"flex",justifyContent:"center",alignItems:"center"})});function Vm(T){const{chrome:L,keybindings:H}=(0,ei.p)();return L.setMatchedRoute(T.route),(0,a.useLayoutEffect)(()=>{H.clearAndInitGlobalBindings(T.route)},[H,T.route]),(0,a.useEffect)(()=>(hl(T.route),Hm(),(0,B.GQ)("GrafanaRoute",!1,"Mounted",T.match),()=>{(0,B.GQ)("GrafanaRoute",!1,"Unmounted",T.route),hl(T.route,!0)}),[]),(0,a.useEffect)(()=>{Hm(),(0,mr.sm)(),(0,B.GQ)("GrafanaRoute",!1,"Updated",T)}),(0,B.GQ)("GrafanaRoute",!1,"Rendered",T.route),a.createElement(Oi.SV,null,({error:J,errorInfo:oe})=>J?a.createElement(Wm,{error:J,errorInfo:oe}):a.createElement(a.Suspense,{fallback:a.createElement($m,null)},a.createElement(T.route.component,{...T,queryParams:(0,B.Ox)(T.location.search)})))}function zm(T){return T.pageClass?T.pageClass.split(" "):[]}function hl(T,L=!1){for(const H of zm(T))L?document.body.classList.remove(H):document.body.classList.add(H)}function Hm(){document.body.classList.remove("sidemenu-open--xs");const T=document.getElementById("tooltip");T?.parentElement?.removeChild(T);const L=document.querySelectorAll(".tooltip");for(let H=0;H<L.length;H++){const J=L[H];J.parentElement?.removeChild(J)}for(const H of Fm().drops)H.destroy()}var vl=e(92973),Wr=e(75118);class zf extends a.PureComponent{constructor(){super(...arguments),this.styles=km(G.v.theme2),this.state={},this.initListener=()=>{const L=(0,Wr.gj)();L&&(this.subscription=L.getConnectionState().subscribe({next:H=>{this.setState({show:!H})}}))}}componentDidMount(){}componentWillUnmount(){this.subscription&&this.subscription.unsubscribe()}render(){const{show:L}=this.state;return L?!ts.Vt.isSignedIn||!G.v.liveEnabled||ts.Vt.user.orgRole===""?null:a.createElement("div",{className:this.styles.foot},a.createElement(Ta.b,{severity:"warning",className:this.styles.warn,title:"connection to server is lost..."})):null}}const km=(0,ne.B)(T=>({foot:k.css`
      position: absolute;
      bottom: 0px;
      left: 0px;
      right: 0px;
      z-index: 10000;
      cursor: wait;
      margin: 16px;
    `,warn:k.css`
      border: 2px solid ${T.colors.warning.main};
      max-width: 400px;
      margin: auto;
      height: 3em;
    `}));let Gm=[],gi=[];function Hf(T){Gm.push(T)}function kf(T){gi.push(T)}class Hc extends a.Component{constructor(L){super(L),this.renderRoute=H=>{const J=H.roles?H.roles():[];return a.createElement(fs.AW,{exact:H.exact===void 0?!0:H.exact,sensitive:H.sensitive===void 0?!1:H.sensitive,path:H.path,key:H.path,render:oe=>((0,B.GQ)("AppWrapper",!1,"Rendering route",H,"with match",oe.location),J?.length&&!J.some(ue=>ts.Vt.hasRole(ue))?a.createElement(fs.l_,{to:"/"}):a.createElement(Vm,{...oe,route:H}))})},this.state={}}async componentDidMount(){await pu(),this.setState({ready:!0}),$(".preloader").remove()}renderRoutes(){return a.createElement(fs.rs,null,mu().map(L=>this.renderRoute(L)))}render(){const{app:L}=this.props,{ready:H}=this.state;(0,B.GQ)("AppWrapper",!1,"rendering");const J=oe=>{(0,mr.ff)("command_palette_action_selected",{actionId:oe.id,actionName:oe.name})};return a.createElement(a.StrictMode,null,a.createElement(ur.Provider,{store:$a.h},a.createElement(Oi.z4,{style:"page"},a.createElement(ei.h.Provider,{value:L.context},a.createElement(vl.f,{value:G.v.theme2},a.createElement(Cs.KBarProvider,{actions:[],options:{enableHistory:!0,callbacks:{onSelectAction:J}}},a.createElement(Po.$i,null,a.createElement(Ll.n,null),a.createElement("div",{className:"grafana-app"},a.createElement(fs.F0,{history:B.E1.getHistory()},a.createElement(Om,null,gi.map((oe,ue)=>a.createElement(oe,{key:ue.toString()})),a.createElement(zi,null),a.createElement(Nm,null),H&&this.renderRoutes(),Gm.map((oe,ue)=>a.createElement(oe,{key:ue.toString()}))))),a.createElement(zf,null),a.createElement(Po.Y0,null),a.createElement(Ti.lO,null))))))))}}var Ym=e(3499),El=e(924),jm=e(58379);function Qm(T,L){if(T===L)return!0;if(!(T instanceof Object)||!(L instanceof Object))return!1;const H=Object.keys(T),J=H.length;for(let oe=0;oe<J;oe++)if(!(H[oe]in L))return!1;for(let oe=0;oe<J;oe++)if(T[H[oe]]!==L[H[oe]])return!1;return J===Object.keys(L).length}class yl{constructor(){this.searchBarStorageKey="SearchBar_Hidden",this.routeChangeHandled=!0,this.state=new El.X({chromeless:!0,sectionNav:{text:(0,Ia.t)("nav.home.title","Home")},searchBarHidden:jm.Z.getBool(this.searchBarStorageKey,!1),kioskMode:null}),this.onToggleMegaMenu=()=>{const L=!this.state.getValue().megaMenuOpen;(0,mr.ff)("grafana_toggle_menu_clicked",{action:L?"open":"close"}),this.update({megaMenuOpen:L})},this.setMegaMenu=L=>{this.update({megaMenuOpen:L})},this.onToggleSearchBar=()=>{const L=!this.state.getValue().searchBarHidden;jm.Z.set(this.searchBarStorageKey,L),this.update({searchBarHidden:L})},this.onToggleKioskMode=()=>{const L=this.getNextKioskMode();this.update({kioskMode:L}),B.E1.partial({kiosk:this.getKioskUrlValue(L)})}}setMatchedRoute(L){this.currentRoute!==L&&(this.currentRoute=L,this.routeChangeHandled=!1)}update(L){const H=this.state.getValue(),J={...H};this.routeChangeHandled||(J.actions=void 0,J.pageNav=void 0,J.sectionNav={text:(0,Ia.t)("nav.home.title","Home")},J.chromeless=this.currentRoute?.chromeless,this.routeChangeHandled=!0),Object.assign(J,L),J.chromeless=J.kioskMode===bn.KioskMode.Full||this.currentRoute?.chromeless,this.ignoreStateUpdate(J,H)||this.state.next(J)}ignoreStateUpdate(L,H){return!!(Qm(L,H)||(L.sectionNav!==H.sectionNav||L.pageNav!==H.pageNav)&&L.actions===H.actions&&kc(L.sectionNav,H.sectionNav)&&kc(L.pageNav,H.pageNav))}useState(){return(0,Ym.Z)(this.state,this.state.getValue())}exitKioskMode(){this.update({kioskMode:void 0}),B.E1.partial({kiosk:null})}setKioskModeFromUrl(L){switch(L){case"tv":this.update({kioskMode:bn.KioskMode.TV});break;case"1":case!0:this.update({kioskMode:bn.KioskMode.Full})}}getKioskUrlValue(L){switch(L){case bn.KioskMode.TV:return"tv";case bn.KioskMode.Full:return!0;default:return null}}getNextKioskMode(){const{kioskMode:L,searchBarHidden:H}=this.state.getValue();return H||L===bn.KioskMode.TV?(ns.Z.emit(Ur.SI.alertSuccess,[(0,Ia.t)("navigation.kiosk.tv-alert","Press ESC to exit kiosk mode")]),bn.KioskMode.Full):L?null:bn.KioskMode.TV}}function kc(T,L){if(T===L)return!0;const H=T?.children?.find(oe=>oe.active),J=L?.children?.find(oe=>oe.active);return T?.text===L?.text&&T?.url===L?.url&&H?.url===J?.url}var Gc=e(52974);function Yc({actions:T,children:L,info:H,pageNav:J,layout:oe,renderTitle:ue,subTitle:ye}){const ze=(0,a.useContext)(Wi.v);return a.createElement(fr.T,{navModel:ze.sectionNav,pageNav:J,layout:oe,actions:T,renderTitle:ue,info:H,subTitle:ye},a.createElement(fr.T.Contents,null,L))}var Zm=e(27677);function Jm(T){const L=T.target instanceof Element&&jc(T.target);if(!(T.ctrlKey||T.metaKey||T.defaultPrevented)&&L){let H=L.getAttribute("href");const J=L.getAttribute("target");if(H&&!J){const oe=Zm.Cj.parseKeyValue(H.split("?")[1]),ue=oe.orgId&&Number(oe.orgId)!==Q.vc.bootData.user.orgId;if((0,B.GQ)("utils",!1,"intercepting link click",T),T.preventDefault(),H=M.u.stripBaseFromUrl(H),H[0]!=="/"||ue)if(H.indexOf("://")>0||H.indexOf("mailto:")===0||ue){window.location.href=H;return}else if(H.indexOf("#")===0){window.location.hash=H;return}else H=`/${H}`;B.E1.push(H)}}}function jc(T){for(;T!==null&&T.tagName;){if(T.tagName.toUpperCase()==="A")return T;T=T.parentElement}return null}var _m=e(2476);function Xm(T,...L){const H=(0,ur.connect)(...L)(T);return J=>a.createElement(H,{...J,store:$a.h})}function Qc(T,...L){const H=(0,ur.connect)(...L)(T);return J=>a.createElement(ur.Provider,{store:$a.h},a.createElement(H,{...J,store:$a.h}))}const Zc=Qc(T=>a.createElement(a.Fragment,null,a.createElement(Po.$i,{...T},a.createElement(Po.Y0,null))));class Jc{constructor(){this.reactModalRoot=document.body,this.reactModalNode=document.createElement("div"),this.onReactModalDismiss=()=>{v.unmountComponentAtNode(this.reactModalNode),this.reactModalRoot.removeChild(this.reactModalNode)}}init(){ns.Z.subscribe(Fs.VJ,L=>this.showConfirmModal(L.payload)),ns.Z.subscribe(Fs.Dn,L=>this.showModalReact(L.payload)),ns.Z.subscribe(w.EK,L=>(0,_m.bY)(L.payload))}showModalReact(L){const{component:H,props:J}=L,oe={component:H,props:{...J,isOpen:!0,onDismiss:this.onReactModalDismiss}},ue=a.createElement((0,vl.E)(Zc,G.v.theme2),oe);this.reactModalRoot.appendChild(this.reactModalNode),v.render(ue,this.reactModalNode)}showConfirmModal(L){const{confirmText:H,onConfirm:J=()=>{},onDismiss:oe,text2:ue,altActionText:ye,onAltAction:ze,noText:qe,text:mt,text2htmlBind:Pt,yesText:Ot="Yes",icon:Ft,title:zt="Confirm",yesButtonVariant:Jt}=L,hn={confirmText:Ot,confirmButtonVariant:Jt,confirmationText:H,icon:Ft,title:zt,body:mt,description:ue&&Pt?ii.QX.sanitize(ue):ue,isOpen:!0,dismissText:qe,onConfirm:()=>{J(),this.onReactModalDismiss()},onDismiss:()=>{oe?.(),this.onReactModalDismiss()},onAlternative:ze?()=>{ze(),this.onReactModalDismiss()}:void 0,alternativeText:ye},In={component:Rr.s,props:hn},Zn=a.createElement((0,vl.E)(Zc,G.v.theme2),In);this.reactModalRoot.appendChild(this.reactModalNode),v.render(Zn,this.reactModalNode)}}var qm=e(88383),ef=e(73289);function Pl(T,L=!1){return new Promise(H=>{const J=document.createElement("script");J.onload=H,J.src=T,J.async=L,document.head.appendChild(J)})}const tf=(0,qm.h)("EchoSrv"),nf=tf.logger;(0,ef.x)("echo",void 0,tf);class Gf{constructor(L){this.config={flushInterval:1e4,debug:!1},this.backends=[],this.flush=()=>{for(const H of this.backends)H.flush()},this.addBackend=H=>{nf("Adding backend",!1,H),this.backends.push(H)},this.addEvent=(H,J)=>{const oe=this.getMeta(),ue={...H,meta:{...oe,...J}};for(const ye of this.backends)(ye.supportedEvents.length===0||ye.supportedEvents.indexOf(ue.type)>-1)&&ye.addEvent(ue);nf("Reporting event",!1,ue)},this.getMeta=()=>({sessionId:"",userId:ts.Vt.user.id,userLogin:ts.Vt.user.login,userSignedIn:ts.Vt.user.isSignedIn,screenSize:{width:window.innerWidth,height:window.innerHeight},windowSize:{width:window.screen.width,height:window.screen.height},userAgent:window.navigator.userAgent,ts:new Date().getTime(),timeSinceNavigationStart:performance.now(),url:window.location.href}),this.config={...this.config,...L},setInterval(this.flush,this.config.flushInterval)}}const Yf=(T,L)=>{(0,W.RP)().addEvent({type:W.ee.Performance,payload:{name:T,value:L}})},$g=T=>captureException(T);class jf{constructor(L){this.options=L,this.buffer=[],this.supportedEvents=[W.ee.Performance],this.addEvent=H=>{this.buffer.push(H.payload)},this.flush=()=>{this.buffer.length!==0&&(Do.ae.post("/api/frontend-metrics",{events:this.buffer}),this.buffer=[])}}}var pi=e(75552);class Qf{constructor(L){this.options=L,this.supportedEvents=[W.ee.Pageview,W.ee.Interaction],this.addEvent=oe=>{window.applicationInsights&&((0,pi.Si)(oe)&&window.applicationInsights.trackPageView?.(),(0,pi.fV)(oe)&&window.applicationInsights.trackEvent?.({name:oe.payload.interactionName,properties:oe.payload.properties}))},this.flush=()=>{};const H={config:{connectionString:L.connectionString,endpointUrl:L.endpointUrl}};Pl("https://js.monitor.azure.com/scripts/b/ai.2.min.js").then(()=>{const oe=new window.Microsoft.ApplicationInsights.ApplicationInsights(H);window.applicationInsights=oe.loadAppInsights()})}}class Zf{constructor(L){this.options=L,this.supportedEvents=[W.ee.Pageview],this.googleAnalytics4SendManualPageViews=!1,this.addEvent=oe=>{window.gtag&&this.googleAnalytics4SendManualPageViews&&window.gtag("event","page_view",{page_path:oe.payload.page})},this.flush=()=>{};const H=`https://www.googletagmanager.com/gtag/js?id=${L.googleAnalyticsId}`;Pl(H,!0),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const J={page_path:window.location.pathname};L.user&&(J.user_id=L.user.analytics.identifier),this.googleAnalytics4SendManualPageViews=L.googleAnalytics4SendManualPageViews,window.gtag("config",L.googleAnalyticsId,J)}}class Jf{constructor(L){this.options=L,this.supportedEvents=[W.ee.Pageview],this.trackedUserId=null,this.addEvent=oe=>{if(!window.ga)return;window.ga("set",{page:oe.payload.page}),window.ga("send","pageview");const{userSignedIn:ue,userId:ye}=oe.meta;ue&&ye!==this.trackedUserId&&(this.trackedUserId=ye,window.ga("set","userId",ye))},this.flush=()=>{};const H=`https://www.google-analytics.com/analytics${L.debug?"_debug":""}.js`;Pl(H);const J=window.ga=window.ga||function(){(J.q=J.q||[]).push(arguments)};J.l=+new Date,J("create",L.googleAnalyticsId,"auto"),J("set","anonymizeIp",!0)}}class _f{constructor(L){this.options=L,this.supportedEvents=[W.ee.Pageview,W.ee.Interaction,W.ee.ExperimentView],this.addEvent=ue=>{window.rudderanalytics&&((0,pi.Si)(ue)&&window.rudderanalytics.page?.(),(0,pi.fV)(ue)&&window.rudderanalytics.track?.(ue.payload.interactionName,ue.payload.properties),(0,pi.mR)(ue)&&window.rudderanalytics.track?.("experiment_viewed",{experiment_id:ue.payload.experimentId,experiment_group:ue.payload.experimentGroup,experiment_variant:ue.payload.experimentVariant}))},this.flush=()=>{};const H=L.sdkUrl||"https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";Pl(H);const J=window.rudderanalytics=[],oe=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"];for(let ue=0;ue<oe.length;ue++){const ye=oe[ue];J[ye]=function(ze){return function(){J.push([ze].concat(Array.prototype.slice.call(arguments)))}}(ye)}if(window.rudderanalytics?.load?.(L.writeKey,L.dataPlaneUrl,{configUrl:L.configUrl}),L.user){const{identifier:ue,intercomIdentifier:ye}=L.user.analytics,ze={};ye&&(ze.Intercom={user_hash:ye}),window.rudderanalytics?.identify?.(ue,{email:L.user.email,orgId:L.user.orgId,language:L.user.language},ze)}}}var Xf=e(13891),qf=e(68372),eg=e(1335),tg=e(71568),ng=e(2194),ag=e(75078),sg=e(74128);class rg extends sg.d{constructor(){super(...arguments),this.name="EchoSrvTransport",this.version=G.v.buildInfo.version}send(L){(0,W.RP)().addEvent({type:W.ee.GrafanaJavascriptAgent,payload:L})}getIgnoreUrls(){return[]}}class og{constructor(L){this.options=L,this.supportedEvents=[W.ee.GrafanaJavascriptAgent],this.addEvent=oe=>{this.transports.forEach(ue=>ue.send(oe.payload))},this.flush=()=>{};const H=[];this.transports=[],L.customEndpoint&&this.transports.push(new Xf.V({url:L.customEndpoint,apiKey:L.apiKey})),L.errorInstrumentalizationEnabled&&H.push(new qf.w),L.consoleInstrumentalizationEnabled&&H.push(new eg.J),L.webVitalsInstrumentalizationEnabled&&H.push(new tg.P);const J={globalObjectKey:L.globalObjectKey||"faro",preventGlobalExposure:L.preventGlobalExposure||!1,app:{version:L.buildInfo.version,environment:L.buildInfo.env},instrumentations:H,transports:[new rg],ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"],metas:[...ng.i,{session:{id:(Math.random()+1).toString(36).substring(2)}}]};this.faroInstance=(0,ag.p)(J),L.user&&this.faroInstance.api.setUser({id:L.user.id,attributes:{orgId:String(L.user.orgId)||""}})}}var ig=e(37916),lg=e(81534),af=e(34785),sf=e(48606),cg=e(51401),dg=e(51499),ug=e(76501),mg=e(28466),rf=e(3469);const of=3,lf=5e3;class cf{constructor(L){this.options=L,this._disabledUntil=new Date(Date.now()),this._buffer=(0,cg.x)(L.maxConcurrentRequests??of)}sendEvent(L){if(new Date(Date.now())<this._disabledUntil){const oe="Dropping frontend event due to too many requests.";return console.warn(oe),Promise.resolve({event:L,reason:oe,status:"skipped"})}const H={body:JSON.stringify({...L,level:L.level??(L.exception?sf.z.Error:sf.z.Info),exception:L.exception?{values:L.exception.values?.map(oe=>({...oe,value:df(oe.value)}))}:L.exception,breadcrumbs:L.breadcrumbs?.map(oe=>({...oe,timestamp:_c(oe.timestamp)})),timestamp:_c(L.timestamp)}),url:this.options.endpoint},J={body:H.body,headers:{"Content-Type":"application/json"},method:"POST",referrerPolicy:(0,dg.hv)()?"origin":""};return this.options.fetchParameters!==void 0&&Object.assign(J,this.options.fetchParameters),this._buffer.add(()=>new ug.cW((oe,ue)=>{window.fetch(H.url,J).then(ye=>{if(ye.status===200){oe({status:"success"});return}if(ye.status===429){const ze=Date.now(),qe=ye.headers.get("Retry-After");qe?this._disabledUntil=new Date(ze+(0,mg.JY)(qe,ze)):this._disabledUntil=new Date(ze+lf),rf.kg.warn(`Too many requests, backing off till: ${this._disabledUntil}`)}ue(ye)}).catch(ue)})).then(void 0,oe=>{if(oe.message==="Not adding Promise due to buffer limit reached."){const ue="Dropping frontend log event due to too many requests in flight.";return console.warn(ue),{event:L,reason:ue,status:"skipped"}}throw oe})}}function _c(T){return T?new Date(T*1e3).toISOString():new Date().toISOString()}function df(T){return typeof T=="string"||T===void 0?T:T&&typeof T=="object"&&Object.keys(T).length===0?"":String(T)}class uf extends af.d8{sendEvent(L){return(0,W.RP)().addEvent({type:W.ee.Sentry,payload:L}),Promise.resolve({status:"success",event:L})}sendSession(L){return Promise.resolve({status:"skipped"})}_sendRequest(L,H){throw new Error("should not happen")}}class mf{constructor(L){this.options=L,this.supportedEvents=[W.ee.Sentry],this.addEvent=J=>{this.transports.forEach(oe=>oe.sendEvent(J.payload))},this.flush=()=>{},this.transports=[],L.dsn&&this.transports.push(new af.Vh({dsn:L.dsn},fetch)),L.customEndpoint&&this.transports.push(new cf({endpoint:L.customEndpoint}));const H={release:L.buildInfo.version,environment:L.buildInfo.env,dsn:L.dsn||"https://examplePublicKey@o0.ingest.sentry.io/0",sampleRate:L.sampleRate,transport:uf,ignoreErrors:["ResizeObserver loop limit exceeded","ResizeObserver loop completed","Non-Error exception captured with keys"]};L.user&&(0,ig.av)({email:L.user.email,id:String(L.user.id)}),(0,lg.S1)(H)}}var ff=e(35582),wo=e.n(ff),Kg=e(76767),Vg=e(93013),fg=e(55935),gg=e(63205),pg=e(51917),No=e(19349);function hg(T){return()=>{const L=document.querySelectorAll(":hover");for(let H=L.length-1;H>0;H--){const J=L[H];J instanceof HTMLElement&&J.dataset?.panelid&&T(parseInt(J.dataset?.panelid,10))}}}class vg{constructor(L,H){this.locationService=L,this.chromeService=H}clearAndInitGlobalBindings(L){wo().reset(),L.chromeless||(this.bind(["?","h"],this.showHelpModal),this.bind("g h",this.goToHome),this.bind("g a",this.openAlerting),this.bind("g p",this.goToProfile),this.bind("g e",this.goToExplore),G.v.featureToggles.topnav||(this.bind("s o",this.openSearch),this.bind("f",this.openSearch)),this.bind("t a",this.makeAbsoluteTime),this.bind("esc",this.exit),this.bindGlobalEsc()),this.bind("c t",()=>ec(!1)),this.bind("c r",()=>ec(!0))}bindGlobalEsc(){this.bindGlobal("esc",this.globalEsc)}globalEsc(){const H=document.activeElement;if(!(document.querySelectorAll(".slate-typeahead--open").length>0)){if(H&&H instanceof HTMLElement&&(H.nodeName==="INPUT"||H.nodeName==="TEXTAREA"||H.hasAttribute("data-slate-editor"))){H.blur();return}this.exit()}}toggleNav(){window.location.href=G.v.appSubUrl+M.u.getUrlForPartial(this.locationService.getLocation(),{"__feature.topnav":(!G.v.featureToggles.topnav).toString()})}openSearch(){this.locationService.partial({search:"open"})}closeSearch(){this.locationService.partial({search:null})}openAlerting(){this.locationService.push("/alerting")}goToHome(){this.locationService.push("/")}goToProfile(){this.locationService.push("/profile")}goToExplore(){this.locationService.push("/explore")}makeAbsoluteTime(){ns.Z.publish(new Fs.QI)}showHelpModal(){ns.Z.publish(new Fs.Dn({component:lc.B}))}exit(){const L=this.locationService.getSearchObject();if(L.editview){this.locationService.partial({editview:null,editIndex:null});return}if(L.inspect){this.locationService.partial({inspect:null,inspectTab:null});return}if(L.editPanel){this.locationService.partial({editPanel:null,tab:null});return}if(L.viewPanel){this.locationService.partial({viewPanel:null,tab:null});return}const{kioskMode:H}=this.chromeService.state.getValue();H&&this.chromeService.exitKioskMode(),L.search&&this.closeSearch()}showDashEditView(){this.locationService.partial({editview:"settings"})}bind(L,H){wo().bind(L,J=>{J.preventDefault(),J.stopPropagation(),J.returnValue=!1,H.call(this)},"keydown")}bindGlobal(L,H){wo().bindGlobal(L,J=>{J.preventDefault(),J.stopPropagation(),J.returnValue=!1,H.call(this)},"keydown")}unbind(L,H){wo().unbind(L,H)}bindWithPanelId(L,H){this.bind(L,hg(H))}setupTimeRangeBindings(L=!0){this.bind("t z",()=>{ns.Z.publish(new Fs.p8({scale:2,updateUrl:L}))}),this.bind("ctrl+z",()=>{ns.Z.publish(new Fs.p8({scale:2,updateUrl:L}))}),this.bind("t left",()=>{ns.Z.publish(new Fs.Qt({direction:Fs.Im.Left,updateUrl:L}))}),this.bind("t right",()=>{ns.Z.publish(new Fs.Qt({direction:Fs.Im.Right,updateUrl:L}))})}setupDashboardBindings(L){this.bind("mod+o",()=>{L.graphTooltip=(L.graphTooltip+1)%3,L.events.publish(new Ur.oi),L.startRefresh()}),this.bind("mod+s",()=>{L.meta.canSave&&ns.Z.publish(new Fs.Dn({component:gg.d,props:{dashboard:L}}))}),this.setupTimeRangeBindings(),this.bindWithPanelId("e",H=>{if(L.canEditPanelById(H)){const J=this.locationService.getSearchObject().editPanel!==void 0;this.locationService.partial({editPanel:J?null:H})}}),this.bindWithPanelId("v",H=>{const J=this.locationService.getSearchObject().viewPanel!==void 0;this.locationService.partial({viewPanel:J?null:H})}),this.bindWithPanelId("p l",H=>{const J=L.getPanelById(H),oe={...J.options};oe.legend.showLegend?oe.legend.showLegend=!1:oe.legend.showLegend=!0,J.updateOptions(oe)}),this.bindWithPanelId("i",H=>{this.locationService.partial({inspect:H})}),za.Vt.hasAccessToExplore()&&this.bindWithPanelId("x",async H=>{const J=L.getPanelById(H),oe=await(0,fg.H6)({panel:J,datasourceSrv:(0,o.ak)(),timeSrv:(0,No.$t)()});if(oe){const ue=M.u.stripBaseFromUrl(oe);ue&&this.locationService.push(ue)}}),this.bindWithPanelId("p r",H=>{L.canEditPanelById(H)&&!(L.panelInView||L.panelInEdit)&&ns.Z.publish(new Fs.Eb(H))}),this.bindWithPanelId("p d",H=>{if(L.canEditPanelById(H)){const J=L.getPanelInfoById(H).index;L.duplicatePanel(L.panels[J])}}),this.bindWithPanelId("p s",H=>{const J=L.getPanelInfoById(H);ns.Z.publish(new Fs.Dn({component:pg.ShareModal,props:{dashboard:L,panel:J?.panel}}))}),this.bind("d l",()=>{L.toggleLegendsForAll()}),this.bind("d shift+c",()=>{L.collapseRows()}),this.bind("d shift+e",()=>{L.expandRows()}),this.bind("d n",()=>{this.locationService.push("/dashboard/new")}),this.bind("d r",()=>{L.startRefresh()}),this.bind("d s",()=>{this.showDashEditView()}),this.bind("d k",()=>{this.chromeService.onToggleKioskMode()}),this.bind("d a",()=>{const J=this.locationService.getSearchObject().autofitpanels?"":"&autofitpanels";window.location.href=window.location.href+J})}}async function zg(){if(window.location.search.indexOf("why-render")!==-1){const{default:T}=await e.e(2182).then(e.t.bind(e,62182,23));T(React,{trackAllPureComponents:!0})}}var Uo=e(51927),xa=e(98141);const Xc=2;class Cl{constructor(){this.extensionsByExtensionPoint={}}allowedToAdd({extensionPointId:L,title:H}){return this.countByExtensionPoint(L)>=Xc?!1:(this.addExtensionToExtensionPoint(L,H),!0)}addExtensionToExtensionPoint(L,H){this.extensionsByExtensionPoint[L]||(this.extensionsByExtensionPoint[L]=[]),this.extensionsByExtensionPoint[L].push(H)}countByExtensionPoint(L){return this.extensionsByExtensionPoint[L]?.length??0}getExtensionTitlesByExtensionPoint(L){return this.extensionsByExtensionPoint[L]}}var qc=e(21830);function Zr(T){console.warn(`[Plugin Extensions] ${T}`)}function V(T){return typeof T=="object"&&"type"in T&&T.type===qc.D.link}function q(T,L=""){return(...H)=>{try{return T(...H)}catch(J){J instanceof Error&&console.warn(`${L}${J.message}`)}}}function se(T){return{openModal:({title:H,body:J})=>{ns.Z.publish(new Fs.Dn({component:Ee({title:H,body:J})}))},context:T}}const Ee=({title:T,body:L})=>({onDismiss:J})=>a.createElement(jo.u,{title:T,isOpen:!0,onDismiss:J,onClickBackdrop:J},a.createElement(L,{onDismiss:J}));function Me(T,L=new Map){if(!T||typeof T!="object"||Object.isFrozen(T))return T;const H=Array.isArray(T)?[...T]:{...T};if(L.has(T))return L.get(T);L.set(T,H);const J=Reflect.ownKeys(H);for(const oe of J){const ue=Array.isArray(H)?H[Number(oe)]:H[oe];ue&&(typeof ue=="object"||typeof ue=="function")&&(Array.isArray(H)?H[Number(oe)]=Me(ue,L):H[oe]=Me(ue,L))}return Object.freeze(H)}function Ue(T,L){const H=`${T}${L.extensionPointId}${L.title}`;return Array.from(H).reduce((J,oe)=>Math.imul(31,J)+oe.charCodeAt(0)|0,0).toString()}function Ne(T,L="extension is not a link extension"){if(!isPluginExtensionLink(T))throw new Error(L)}function st(T,L="extension is not a command extension config"){if(!isPluginExtensionLinkConfig(T))throw new Error(L)}function lt(T,L){if(!It(T,L))throw new Error(`Invalid link extension. The "path" is required and should start with "/a/${T}/" (currently: "${L}"). Skipping the extension.`)}function vt(T){if(!Yt(T))throw new Error(`Invalid extension "${T.title}". The extensionPointId should start with either "grafana/" or "plugins/" (currently: "${T.extensionPointId}"). Skipping the extension.`)}function gt(T){if(!Zt(T))throw new Error(`Invalid extension "${T.title}". The "configure" property must be a function. Skipping the extension.`)}function Mt(T,L){for(const H of L)if(!rn(T[H]))throw new Error(`Invalid extension "${T.title}". Property "${H}" must be a string and cannot be empty. Skipping the extension.`)}function Lt(T,L="The provided value is a Promise."){if(kt(T))throw new Error(L)}function It(T,L){return Boolean(typeof L=="string"&&L.length>0&&L.startsWith(`/a/${T}/`))}function Yt(T){return Boolean(T.extensionPointId?.startsWith("grafana/")||T.extensionPointId?.startsWith("plugins/"))}function Zt(T){return T.configure?typeof T.configure=="function":!0}function rn(T){return typeof T=="string"&&T.length>0}function Nt(T,L){try{if(Mt(L,["title","description","extensionPointId"]),vt(L),gt(L),V(L)){if(!L.path&&!L.onClick)return Zr(`Invalid extension "${L.title}". Either "path" or "onClick" is required.`),!1;L.path&&lt(T,L.path)}return!0}catch(H){return H instanceof Error&&Zr(H.message),!1}}function kt(T){return T instanceof Promise||typeof T=="object"&&T!==null&&"then"in T&&"catch"in T}function Ut(T){const L={},H=new Cl;for(const{pluginId:J,extensionConfigs:oe,error:ue}of T){if(ue){Zr(`"${J}" plugin failed to load, skip registering its extensions.`);continue}for(const ye of oe){const{extensionPointId:ze}=ye;if(!H.allowedToAdd(ye)){Zr(`"${J}" plugin has reached the limit of ${Xc} for "${ze}", skip registering extension "${ye.title}".`);continue}if(!ye||!Nt(J,ye))continue;let qe={config:ye,pluginId:J};Array.isArray(L[ze])?L[ze].push(qe):L[ze]=[qe]}}return Me(L)}const _t=({context:T,extensionPointId:L,registry:H})=>{const J=T?Me(T):{},oe=H[L]??[],ue=[];for(const ye of oe)try{const ze=ye.config;if(V(ze)){const qe=Mn(ye.pluginId,ze,J);if(ze.configure&&qe===void 0)continue;const mt={id:Ue(ye.pluginId,ze),type:qc.D.link,pluginId:ye.pluginId,onClick:an(ze,J),title:qe?.title||ze.title,description:qe?.description||ze.description,path:qe?.path||ze.path};ue.push(mt)}}catch(ze){ze instanceof Error&&Zr(ze.message)}return{extensions:ue}};function Mn(T,L,H){try{const J=L.configure?.(H);if(J===void 0)return;let{title:oe=L.title,description:ue=L.description,path:ye=L.path,...ze}=J;if(Lt(J,`The configure() function for "${L.title}" returned a promise, skipping updates.`),ye&&lt(T,ye),Mt({title:oe,description:ue},["title","description"]),Object.keys(ze).length>0)throw new Error(`Invalid extension "${L.title}". Trying to override not-allowed properties: ${Object.keys(ze).join(", ")}`);return{title:oe,description:ue,path:ye}}catch(J){J instanceof Error&&Zr(J.message);return}}function an(T,L){const{onClick:H}=T;if(H)return function(oe){try{const ue=H(oe,se(L));kt(ue)&&ue.catch(ye=>{ye instanceof Error&&Zr(ye.message)})}catch(ue){ue instanceof Error&&Zr(ue.message)}}}var An=e(38490);async function On(T={}){const L=Object.values(T).filter(H=>H.preload);return Promise.all(L.map(Un))}async function Un(T){const{path:L,version:H,id:J}=T;try{const{plugin:oe}=await Fi.N$(L,H),{extensionConfigs:ue=[]}=oe;return{pluginId:J,extensionConfigs:ue}}catch(oe){return console.error(`[Plugins] Failed to preload plugin: ${L} (version: ${H})`,oe),{pluginId:J,extensionConfigs:[],error:oe}}}var Vn=e(46528),Kn=e(31129),Jn=e(40400),wa=e(33180),Hn=e(49922),Bn=e(20308),Xn=e(49003),ra=e(59584),Ua=e(75434);class ja{constructor(){this.subject=new Vn.t(1)}get(){return this.subject.asObservable()}run(L){const{queries:H,timezone:J,datasource:oe,panelId:ue,app:ye,dashboardId:ze,timeRange:qe,timeInfo:mt,cacheTimeout:Pt,queryCachingTTL:Ot,maxDataPoints:Ft,scopedVars:zt,minInterval:Jt}=L;this.subscription&&this.subscription.unsubscribe();const hn={app:ye??Jn.zj.Unknown,requestId:(0,Xn.t)(),timezone:J,panelId:ue,dashboardId:ze,range:qe,timeInfo:mt,interval:"",intervalMs:0,targets:(0,E.cloneDeep)(H),maxDataPoints:Ft,scopedVars:zt||{},cacheTimeout:Pt,queryCachingTTL:Ot,startTime:Date.now()};hn.rangeRaw=qe.raw,(0,es.D)(Ha(oe,hn.scopedVars)).pipe((0,Kn.P)()).subscribe({next:In=>{hn.targets=hn.targets.map(la=>(la.datasource||(la.datasource=In.getRef()),la));const Zn=Jt?(0,Bn.J)().replace(Jt,hn.scopedVars):In.interval,Fn=wa.calculateInterval(qe,Ft,Zn);hn.scopedVars=Object.assign({},hn.scopedVars,{__interval:{text:Fn.interval,value:Fn.interval},__interval_ms:{text:Fn.intervalMs.toString(),value:Fn.intervalMs}}),hn.interval=Fn.interval,hn.intervalMs=Fn.intervalMs,this.subscription=(0,Ua.v7)(In,hn).subscribe({next:la=>{const ys=(0,Tt.zR)(la,this.lastResult);this.lastResult=(0,ra.C)(ys,this.lastResult),this.subject.next(this.lastResult)}})},error:In=>console.error("PanelQueryRunner Error",In)})}cancel(){this.subscription&&(this.subscription.unsubscribe(),this.lastResult&&this.lastResult.state===Hn.Gu.Loading&&this.subject.next({...this.lastResult,state:Hn.Gu.Done}))}destroy(){this.subject&&this.subject.complete(),this.subscription&&this.subscription.unsubscribe()}}async function Ha(T,L){return T&&"query"in T?T:(0,o.ak)().get(T,L)}function Ja(){window.grafanaRuntime={getDashboardSaveModel:()=>{const T=(0,r.h4)().getCurrent();if(T)return T.getSaveModelClone()},getDashboardTimeRange:()=>{const T=(0,No.$t)().timeRange();return{from:T.from.valueOf(),to:T.to.valueOf(),raw:T.raw}},getPanelData:()=>{const T=(0,r.h4)().getCurrent();if(T)return T.panels.reduce((L,H)=>(L[H.id]=H.getQueryRunner().getLastResult(),L),{})}}}var Da=e(22323),pn=e(92624),oa=e(5916),ya=e(53117),ha=e(41624),fa=e(50678);function ka(T){return T.extended&&"infoText"in T.extended?T.extended:null}function pa(T){return T.extended&&"dataSourceTypes"in T.extended?T.extended:null}function Sn(T){return T.extended&&"dataSource"in T.extended?T.extended:null}var vn=e(87095),Ln=e(30002);const kn=(T,L)=>{const{rootStateKey:H}=L.variable;if(!H)return console.error("AdHocVariableEditor: variable has no rootStateKey"),{extended:ka(fa.PF)};const{editor:J}=(0,vn.AE)(H,T);return{extended:ka(J)}},jn={changeVariableDatasource:Ln.Z$},Pa=(0,ur.connect)(kn,jn);class ua extends a.PureComponent{constructor(){super(...arguments),this.onDatasourceChanged=L=>{this.props.changeVariableDatasource((0,pn.yQ)(this.props.variable),(0,oa.iU)(L))}}componentDidMount(){const{rootStateKey:L}=this.props.variable;if(!L){console.error("AdHocVariableEditor: variable has no rootStateKey");return}}render(){const{variable:L,extended:H}=this.props,J=H?.infoText??null;return a.createElement(a.Fragment,null,a.createElement(ha.e,null,"Ad-hoc options"),a.createElement(ia.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(ya.q,{current:L.datasource,onChange:this.onDatasourceChanged,width:30,noDefault:!0})),J?a.createElement(Ta.b,{title:J,severity:"info"}):null)}}const Es=Pa(ua);var ds=e(44847);const Dr={addFilter:Ln.KJ,removeFilter:Ln.ku,changeFilter:Ln.M6},Ds=(0,ur.connect)(null,Dr);class Is extends a.PureComponent{constructor(){super(...arguments),this.addFilter=L=>{this.props.addFilter((0,pn.yQ)(this.props.variable),L)},this.removeFilter=L=>{this.props.removeFilter((0,pn.yQ)(this.props.variable),L)},this.changeFilter=(L,H)=>{this.props.changeFilter((0,pn.yQ)(this.props.variable),{index:L,filter:H})}}render(){const{filters:L,datasource:H}=this.props.variable;return a.createElement(ds.F,{datasource:H,filters:L,disabled:this.props.readOnly,addFilter:this.addFilter,removeFilter:this.removeFilter,changeFilter:this.changeFilter})}}const Gs=Ds(Is);Gs.displayName="AdHocPicker";var $r=e(79134);const Rs=T=>T.map(L=>Fo(L).map(br).join("|")),pr=T=>{if((0,E.isArray)(T))return T.map(hi).filter(Hg);const L=hi(T);return L===null?[]:[L]};function br(T){return T==null?"":/\|/g[Symbol.replace](T,"__gfp__")}function $s(T){return T==null?"":/__gfp__/g[Symbol.replace](T,"|")}function Fo(T){return[T.key,T.operator,T.value]}function hi(T){if(!(0,E.isString)(T)||T.length===0)return null;const L=T.split("|").map($s);return{key:L[0],operator:L[1],value:L[2],condition:""}}function Hg(T){return T!==null&&(0,E.isString)(T.value)}const Eg=async()=>{},kg=()=>({id:"adhoc",description:"Add key/value filters on the fly.",name:"Ad hoc filters",initialState:$r.Js,reducer:$r.jo,picker:Gs,editor:Es,dependsOn:()=>!1,setValue:Eg,setValueFromUrl:async(T,L)=>{const H=pr(L);await(0,$a.WI)((0,Ln.Ue)((0,pn.yQ)(T),H))},updateOptions:Eg,getSaveModel:T=>{const{index:L,id:H,state:J,global:oe,rootStateKey:ue,...ye}=(0,E.cloneDeep)(T);return ye},getValueForUrl:T=>{const L=T?.filters??[];return Rs(L)}});var yg=e(83829),Gg=e(94437),Xs=e(82253),rs=e(15546),gf=e(91017),Pg=e(85850),Yg=e(12877),ed=e(90801),jg=e(68140),Qg=e(82615),Zg=e(59724),Jg=e(86318),_g=e(44288),Cg=e(69311),gs=e(10672),bs=e(85803),Ka=e(7240),vi=e(63510);const Xg={...gs.Eg,type:"query",datasource:null,query:"",regex:"",sort:gs.$U.disabled,refresh:gs.Bd.onDashboardLoad,multi:!1,includeAll:!1,allValue:null,options:[],current:{},definition:""},qg=(T,L)=>{if(L===gs.$U.disabled)return T;const H=Math.ceil(L/2),J=L%2===0;return H===1?T=(0,E.sortBy)(T,"text"):H===2?T=(0,E.sortBy)(T,oe=>{if(!oe.text)return-1;const ue=oe.text.match(/.*?(\d+).*/);return!ue||ue.length<2?-1:parseInt(ue[1],10)}):H===3&&(T=(0,E.sortBy)(T,oe=>(0,E.toLower)(oe.text))),J&&(T=T.reverse()),T},ep=(T,L)=>{const H=[];let J=null;L.lastIndex=0;do J=L.exec(T),J&&H.push(J);while(L.global&&J&&J[0]!==""&&J[0]!==void 0);return H},tp=(T,L,H)=>{let J,oe=[];T&&(J=(0,Aa.jO)(T));for(let ue=0;ue<H.length;ue++){const ye=H[ue];let ze=ye.text===void 0||ye.text===null?ye.value:ye.text,qe=ye.value===void 0||ye.value===null?ye.text:ye.value;if((0,E.isNumber)(qe)&&(qe=qe.toString()),(0,E.isNumber)(ze)&&(ze=ze.toString()),J){const mt=ep(qe,J);if(!mt.length)continue;const Pt=mt.find(Jt=>Jt.groups&&Jt.groups.value),Ot=mt.find(Jt=>Jt.groups&&Jt.groups.text),Ft=mt.find(Jt=>Jt.length>1),zt=mt.length>1&&Ft;if(Pt||Ot)qe=Pt?.groups?.value??Ot?.groups?.text,ze=Ot?.groups?.text??Pt?.groups?.value;else if(zt){for(let Jt=0;Jt<mt.length;Jt++){const hn=mt[Jt];oe.push({text:hn[1],value:hn[1],selected:!1})}continue}else Ft&&(ze=Ft[1],qe=Ft[1])}oe.push({text:ze,value:qe,selected:!1})}return oe=(0,E.uniqBy)(oe,"value"),qg(oe,L)},xg=(0,Gr.oM)({name:"templating/query",initialState:vi.s,reducers:{updateVariableOptions:(T,L)=>{const{results:H,templatedRegex:J}=L.payload.data,oe=(0,vn.ir)(T,L.payload.id);if(oe.type!=="query")return;const{includeAll:ue,sort:ye}=oe,ze=tp(J,ye,H);ue&&ze.unshift({text:Xs.xk,value:Xs.r2,selected:!1}),ze.length||ze.push({text:Xs.BH,value:Xs.QX,isNone:!0,selected:!1}),oe.options=ze}}}),np=xg.reducer,{updateVariableOptions:ap}=xg.actions;function sp(){return T=>T.pipe((0,tn.U)(L=>{const H=L.series;if(!H||!H.length)return[];if(ip(H))return H;const J=(0,Tt.F9)(H),oe=[];let ue=-1,ye=-1,ze=-1,qe=-1;for(const mt of J)for(let Pt=0;Pt<mt.fields.length;Pt++){const Ot=mt.fields[Pt],Ft=(0,re.C)(Ot,mt,H).toLowerCase();Ot.type===j.fS.string&&ze===-1&&(ze=Pt),Ft==="text"&&Ot.type===j.fS.string&&ye===-1&&(ye=Pt),Ft==="value"&&Ot.type===j.fS.string&&ue===-1&&(ue=Pt),Ft==="expandable"&&(Ot.type===j.fS.boolean||Ot.type===j.fS.number)&&qe===-1&&(qe=Pt)}if(ze===-1)throw new Error("Couldn't find any field of type string in the results.");for(const mt of H)for(let Pt=0;Pt<mt.length;Pt++){const Ot=qe!==-1?mt.fields[qe].values.get(Pt):void 0,Ft=mt.fields[ze].values.get(Pt),zt=ye!==-1?mt.fields[ye].values.get(Pt):null,Jt=ue!==-1?mt.fields[ue].values.get(Pt):null;if(ue===-1&&ye===-1){oe.push({text:Ft,value:Ft,expandable:Ot});continue}if(ue===-1&&ye!==-1){oe.push({text:zt,value:zt,expandable:Ot});continue}if(ue!==-1&&ye===-1){oe.push({text:Jt,value:Jt,expandable:Ot});continue}oe.push({text:zt,value:Jt,expandable:Ot})}return oe}))}function rp(T){return L=>L.pipe((0,tn.U)(H=>{const{variable:J,dispatch:oe,getTemplatedRegexFunc:ue}=T;if(!J.rootStateKey){console.error("updateOptionsState: variable.rootStateKey is not defined");return}const ye=ue(J),ze=(0,pn.Y6)(J,{results:H,templatedRegex:ye});oe((0,Ka.mb)(J.rootStateKey,ap(ze)))}))}function op(T){return L=>L.pipe((0,qa.z)(()=>{const{dispatch:H,variable:J,searchFilter:oe}=T;return oe?(0,un.of)():(0,es.D)(H((0,bs.xQ)((0,pn.yQ)(J))))}))}function ip(T){if(!T)return!1;if(!T.length)return!0;const L=T[0];if((0,Tt.aY)(L))return!1;for(const H in L){if(!L.hasOwnProperty(H)||L[H]!==null&&typeof L[H]!="string"&&typeof L[H]!="number")continue;const J=H.toLowerCase();if(J==="text"||J==="value")return!0}return!1}var td=e(59670);class lp{constructor(){this.runners=[new cp,new dp,new up,new fp]}getRunnerForDatasource(L){const H=this.runners.find(J=>J.canRun(L));if(H)return H;throw new Error("Couldn't find a query runner that matches supplied arguments.")}}class cp{constructor(){this.type=td.j2.Legacy}canRun(L){return(0,rs.R)(L)}getTarget({datasource:L,variable:H}){if((0,rs.R)(L))return H.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:L,variable:H,searchFilter:J,timeSrv:oe},ue){if(!(0,rs.R)(L))return xl();const ye=(0,pn.AQ)(H,J,oe);return(0,es.D)(L.metricFindQuery(H.query,ye)).pipe((0,qa.z)(ze=>{if(!ze||!ze.length)return xl();const qe=ze;return(0,un.of)({series:qe,state:Hn.Gu.Done,timeRange:ye.range})}))}}class dp{constructor(){this.type=td.j2.Standard}canRun(L){return(0,rs.Ju)(L)}getTarget({datasource:L,variable:H}){if((0,rs.Ju)(L))return L.variables.toDataQuery(H.query);throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:L,runRequest:H},J){return(0,rs.Ju)(L)?L.variables.query?H(L,J,L.variables.query):H(L,J):xl()}}class up{constructor(){this.type=td.j2.Custom}canRun(L){return(0,rs.d7)(L)}getTarget({datasource:L,variable:H}){if((0,rs.d7)(L))return H.query;throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:L,runRequest:H},J){return(0,rs.d7)(L)?H(L,J,L.variables.query):xl()}}const mp="variable-query";class fp{constructor(){this.type=td.j2.Datasource}canRun(L){return(0,rs.X7)(L)}getTarget({datasource:L,variable:H}){if((0,rs.X7)(L))return{...H.query,refId:H.query.refId??mp};throw new Error("Couldn't create a target with supplied arguments.")}runRequest({datasource:L,runRequest:H},J){return(0,rs.X7)(L)?H(L,J):xl()}}function xl(){return(0,un.of)({state:Hn.Gu.Done,series:[],timeRange:(0,Cg.JK)()})}class gp{constructor(L={dispatch:$a.WI,getState:$a.y0,getVariable:vn.E0,getTemplatedRegex:pn.gR,getTimeSrv:No.$t,queryRunners:new lp,runRequest:Ua.v7}){this.dependencies=L,this.updateOptionsRequests=new gf.x,this.updateOptionsResults=new gf.x,this.cancelRequests=new gf.x,this.onNewRequest=this.onNewRequest.bind(this),this.subscription=this.updateOptionsRequests.subscribe(this.onNewRequest)}queueRequest(L){this.updateOptionsRequests.next(L)}getResponse(L){return this.updateOptionsResults.asObservable().pipe((0,ed.h)(H=>H.identifier===L))}cancelRequest(L){this.cancelRequests.next({identifier:L})}destroy(){this.subscription.unsubscribe()}onNewRequest(L){const{datasource:H,identifier:J,searchFilter:oe}=L;try{const{dispatch:ue,runRequest:ye,getTemplatedRegex:ze,getVariable:qe,queryRunners:mt,getTimeSrv:Pt,getState:Ot}=this.dependencies,Ft=(0,vn.S_)(Ot());this.updateOptionsResults.next({identifier:J,state:Hn.Gu.Loading});const zt=qe(J,Ot());if(zt.type!=="query")return;const Jt=Pt(),hn={variable:zt,datasource:H,searchFilter:oe,timeSrv:Jt,runRequest:ye},In=mt.getRunnerForDatasource(H),Zn=In.getTarget({datasource:H,variable:zt}),Fn=this.getRequest(zt,L,Zn);In.runRequest(hn,Fn).pipe((0,ed.h)(()=>{const la=(0,vn.S_)(Ot());return Ft===la}),(0,ed.h)(la=>la.state===Hn.Gu.Done||la.state===Hn.Gu.Error),(0,jg.q)(1),(0,qa.z)(la=>la.state===Hn.Gu.Error?(0,Pg._)(()=>la.error):(0,un.of)(la)),sp(),rp({variable:zt,dispatch:ue,getTemplatedRegexFunc:ze}),op({variable:zt,dispatch:ue,searchFilter:oe}),(0,Qg.R)((0,Yg.T)(this.updateOptionsRequests,this.cancelRequests).pipe((0,ed.h)(la=>{let ys=!1;return la.identifier.id===J.id&&(ys=!0,this.updateOptionsResults.next({identifier:J,state:Hn.Gu.Loading,cancelled:ys})),ys}))),(0,Zg.K)(la=>la.cancelled?(0,un.of)({}):(this.updateOptionsResults.next({identifier:J,state:Hn.Gu.Error,error:la}),(0,Pg._)(()=>la))),(0,Jg.x)(()=>{this.updateOptionsResults.next({identifier:J,state:Hn.Gu.Done})})).subscribe()}catch(ue){this.updateOptionsResults.next({identifier:J,state:Hn.Gu.Error,error:ue})}}getRequest(L,H,J){const{searchFilter:oe}=H,ue={variable:{text:L.current.text,value:L.current.value}},qe={...oe?{searchFilter:{text:oe,value:oe}}:{},...ue},mt=L.refresh===gs.Bd.onTimeRangeChanged?this.dependencies.getTimeSrv().timeRange():(0,Cg.JK)();return{app:Jn.zj.Dashboard,requestId:(0,_g.Z)(),timezone:"",range:mt,interval:"",intervalMs:0,targets:[J],scopedVars:qe,startTime:Date.now()}}}let Dg;function pp(T){Dg=T}function pf(){return Dg}const hp=T=>{if(!vp(T))return T.name;const{current:L}=T;return Array.isArray(L.text)?L.text.join(" + "):L.text},vp=T=>Array.isArray(T?.options)||typeof T?.current=="object";var ho=(T=>(T[T.moveUp=38]="moveUp",T[T.moveDown=40]="moveDown",T[T.select=32]="select",T[T.cancel=27]="cancel",T[T.selectAndClose=13]="selectAndClose",T))(ho||{});class Ep extends a.PureComponent{constructor(){super(...arguments),this.onKeyDown=L=>{if(ho[L.keyCode]&&L.keyCode!==ho.select){const H=L.ctrlKey||L.metaKey||L.shiftKey;this.props.onNavigate(L.keyCode,H),L.preventDefault()}},this.onChange=L=>{this.props.onChange(L.target.value)}}render(){const{value:L,id:H,onNavigate:J,...oe}=this.props;return a.createElement("input",{...oe,ref:ue=>{ue&&(ue.focus(),ue.setAttribute("style",`width:${Math.max(ue.width,150)}px`))},type:"text",className:"gf-form-input",value:L??"",onChange:this.onChange,onKeyDown:this.onKeyDown,placeholder:(0,Ia.t)("variable.dropdown.placeholder","Enter variable value")})}}const yp=({loading:T,disabled:L,onClick:H,text:J,onCancel:oe,id:ue})=>{const ye=(0,De.wW)(Mg),ze=(0,a.useCallback)(qe=>{qe.stopPropagation(),qe.preventDefault(),H()},[H]);return T?a.createElement("div",{className:ye.container,"data-testid":Ct.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${J}`),title:J,id:ue},a.createElement(bg,{text:J}),a.createElement(Pp,{onCancel:oe})):a.createElement("button",{onClick:ze,className:ye.container,"data-testid":Ct.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownValueLinkTexts(`${J}`),"aria-expanded":!1,"aria-controls":`options-${ue}`,id:ue,title:J,disabled:L},a.createElement(bg,{text:J}),a.createElement(na.J,{"aria-hidden":!0,name:"angle-down",size:"sm"}))},bg=({text:T})=>{const L=(0,De.wW)(Mg);return a.createElement("span",{className:L.textAndTags},T===Xs.xk?(0,Ia.t)("variable.picker.link-all","All"):T)},Pp=({onCancel:T})=>{const L=(0,a.useCallback)(H=>{H.preventDefault(),T()},[T]);return a.createElement(ao.u,{content:"Cancel query"},a.createElement(na.J,{className:"spin-clockwise",name:"sync",size:"xs",onClick:L,"aria-label":Ct.wl.components.LoadingIndicator.icon}))},Mg=T=>({container:k.css`
    max-width: 500px;
    padding-right: 10px;
    padding: 0 ${T.spacing(1)};
    background-color: ${T.components.input.background};
    border: 1px solid ${T.components.input.borderColor};
    border-radius: ${T.shape.borderRadius(1)};
    display: flex;
    align-items: center;
    color: ${T.colors.text};
    height: ${T.spacing(T.components.height.md)};

    .label-tag {
      margin: 0 5px;
    }

    &:disabled {
      background-color: ${T.colors.action.disabledBackground};
      color: ${T.colors.action.disabledText};
      border: 1px solid ${T.colors.action.disabledBackground};
    }
  `,textAndTags:k.css`
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin-right: ${T.spacing(.25)};
    user-select: none;
  `});class Cp extends a.PureComponent{constructor(){super(...arguments),this.onToggle=L=>H=>{const J=H.shiftKey||H.ctrlKey||H.metaKey;this.handleEvent(H),this.props.onToggle(L,J)},this.onToggleAll=L=>{this.handleEvent(L),this.props.onToggleAll()}}handleEvent(L){L.preventDefault(),L.stopPropagation()}render(){const{multi:L,values:H,highlightIndex:J,selectedValues:oe,onToggle:ue,onToggleAll:ye,theme:ze,...qe}=this.props,mt=hf(ze);return a.createElement("div",{className:mt.variableValueDropdown},a.createElement("div",{className:mt.variableOptionsWrapper},a.createElement("ul",{className:mt.variableOptionsColumn,"aria-label":Ct.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownDropDown,...qe},this.renderMultiToggle(),H.map((Pt,Ot)=>this.renderOption(Pt,Ot)))))}renderOption(L,H){const{highlightIndex:J,multi:oe,theme:ue}=this.props,ye=hf(ue),ze=L.value===Xs.r2;return a.createElement("li",{key:`${L.value}`},a.createElement("button",{"data-testid":Ct.wl.components.Variables.variableOption,role:"checkbox",type:"button","aria-checked":L.selected,className:(0,k.cx)((0,ee.gN)(ue),ye.variableOption,{[ye.highlighted]:H===J},ye.noStyledButton),onClick:this.onToggle(L)},a.createElement("span",{className:(0,k.cx)(ye.variableOptionIcon,{[ye.variableOptionIconSelected]:L.selected,[ye.hideVariableOptionIcon]:!oe})}),a.createElement("span",{"data-testid":Ct.wl.pages.Dashboard.SubMenu.submenuItemValueDropDownOptionTexts(`${L.text}`)},ze?(0,Ia.t)("variable.picker.option-all","All"):L.text)))}renderMultiToggle(){const{multi:L,selectedValues:H,theme:J}=this.props,oe=hf(J);if(!L)return null;const ue=()=>a.createElement(Ia.cC,{i18nKey:"variable.picker.option-tooltip"},"Clear selections");return a.createElement(ao.u,{content:ue,placement:"top"},a.createElement("button",{className:(0,k.cx)((0,ee.gN)(J),oe.variableOption,oe.variableOptionColumnHeader,oe.noStyledButton),role:"checkbox","aria-checked":H.length>1?"mixed":"false",onClick:this.onToggleAll,"aria-label":"Toggle all values","data-placement":"top"},a.createElement("span",{className:(0,k.cx)(oe.variableOptionIcon,{[oe.variableOptionIconManySelected]:H.length>1})}),a.createElement(Ia.cC,{i18nKey:"variable.picker.option-selected-values"},"Selected")," (",H.length,")"))}}const hf=(0,ne.B)(T=>{const L=T.isDark?"public/img/checkbox.png":"public/img/checkbox_white.png";return{hideVariableOptionIcon:(0,k.css)({display:"none"}),highlighted:(0,k.css)({backgroundColor:T.colors.action.hover}),noStyledButton:(0,k.css)({width:"100%",textAlign:"left"}),variableOption:(0,k.css)({display:"block",padding:"2px 27px 0 8px",position:"relative",whiteSpace:"nowrap",minWidth:"115px",["&:hover"]:{backgroundColor:T.colors.action.hover}}),variableOptionColumnHeader:(0,k.css)({paddingTop:"5px",paddingBottom:"5px",marginBottom:"5px"}),variableOptionIcon:(0,k.css)({display:"inline-block",width:"24px",height:"18px",position:"relative",top:"4px",background:`url(${L}) left top no-repeat`}),variableOptionIconManySelected:(0,k.css)({background:`url(${L}) 0px -36px no-repeat`}),variableOptionIconSelected:(0,k.css)({background:`url(${L}) 0px -18px no-repeat`}),variableValueDropdown:(0,k.css)({backgroundColor:T.colors.background.primary,border:`1px solid ${T.colors.border.weak}`,borderRadius:T.shape.borderRadius(2),boxShadow:T.shadows.z2,position:"absolute",top:T.spacing(T.components.height.md),maxHeight:"400px",minHeight:"150px",minWidth:"150px",overflowY:"auto",overflowX:"hidden",zIndex:T.zIndex.typeahead}),variableOptionsColumn:(0,k.css)({maxHeight:"350px",display:"table-cell",lineHeight:"26px",listStyleType:"none"}),variableOptionsWrapper:(0,k.css)({display:"table",width:"100%"})}}),xp=(0,De.HE)(Cp);var vo=e(92990),Kr=e(85972);const Dp=(T,L,H)=>async(J,oe)=>{if(L===ho.cancel)return await J(nd(T));if(L===ho.select)return J(vf(T,H));if(L===ho.selectAndClose)return(0,vn.AE)(T,oe()).optionsPicker.multi?J(vf(T,H)):(J(vf(T,H,!0)),J(nd(T)));if(L===ho.moveDown)return J((0,Ka.mb)(T,(0,Kr.Ew)(1)));if(L===ho.moveUp)return J((0,Ka.mb)(T,(0,Kr.Ew)(-1)))},bp=(T,L="")=>async(H,J)=>{const{rootStateKey:oe}=T,{id:ue,queryValue:ye}=(0,vn.AE)(oe,J()).optionsPicker,ze={id:ue,rootStateKey:oe,type:"query"},qe=(0,vn.E0)(ze,J());if(!(0,rs.eL)(qe))return;const{query:mt,options:Pt}=qe;if(H((0,Ka.mb)(oe,(0,Kr.Ug)(L))),(0,E.trim)(ye)!==(0,E.trim)(L))return(0,pn.bf)(mt)?Tp(H,J,L,oe):H((0,Ka.mb)(oe,(0,Kr.ss)(Pt)))},Mp=async T=>{await Da.z.get(T.type).setValue(T,T.current,!0)},nd=(T,L)=>async(H,J)=>{const oe=(0,vn.AE)(T,J()).optionsPicker,ue={id:oe.id,rootStateKey:T,type:"query"},ye=(0,vn.E0)(ue,J());if(!(0,rs.eL)(ye))return;const ze={option:Ip(oe)},qe={propName:"queryValue",propValue:oe.queryValue};H((0,Ka.mb)(T,(0,vo.Q8)((0,pn.Y6)(ye,ze)))),H((0,Ka.mb)(T,(0,vo.Pl)((0,pn.Y6)(ye,qe))));const mt=(0,vn.E0)(ue,J());if((0,rs.eL)(mt)&&(H((0,Ka.mb)(T,(0,Kr.nn)())),(0,pn.N9)(ye)!==(0,pn.N9)(mt)))return L?L(mt):await Mp(mt)},Sp=(T,L)=>async(H,J)=>{const{id:oe,rootStateKey:ue}=T,ye=(0,vn.AE)(ue,J()).optionsPicker;ye.id&&ye.id!==oe&&await H(nd(ue,L));const ze=(0,vn.E0)(T,J());(0,rs.eL)(ze)&&H((0,Ka.mb)(ue,(0,Kr.aN)(ze)))},vf=(T,L,H=!1)=>(J,oe)=>{const{highlightIndex:ue,options:ye}=(0,vn.AE)(T,oe()).optionsPicker,ze=ye[ue];J((0,Ka.mb)(T,(0,Kr._M)({option:ze,forceSelect:H,clearOthers:L})))},Op=async(T,L,H,J)=>{try{const{id:oe}=(0,vn.AE)(J,L()).optionsPicker,ue={id:oe,rootStateKey:J,type:"query"},ye=(0,vn.E0)(ue,L());if(!(0,rs.eL)(ye))return;await Da.z.get(ye.type).updateOptions(ye,H);const qe=(0,vn.E0)(ue,L());if(!(0,rs.eL)(qe))return;T((0,Ka.mb)(J,(0,Kr.wF)(qe.options)))}catch(oe){console.error(oe)}},Tp=(0,E.debounce)(Op,500);function Ip(T){const{options:L,selectedValues:H,queryValue:J,multi:oe}=T;if(L.length===0&&J&&J.length>0)return{text:J,value:J,selected:!1};if(!oe)return H.find(ze=>ze.selected);const ue=[],ye=[];for(const ze of H)ze.selected&&(ue.push(ze.text.toString()),ye.push(ze.value.toString()));return{value:ye,text:ue,selected:!0}}const Dl=()=>{const T=ue=>({...(0,yg.bindActionCreators)({openOptions:Sp,commitChangesToVariable:nd,navigateOptions:Dp},ue),filterOrSearchOptions:(ye,ze="")=>{ue(bp(ye,ze))},toggleAllOptions:ye=>ue((0,Ka.mb)(ye.rootStateKey,(0,Kr.iQ)())),toggleOption:(ye,ze,qe,mt)=>ue((0,Ka.mb)(ye.rootStateKey,(0,Kr._M)({option:ze,clearOthers:qe,forceSelect:mt})))}),L=(ue,ye)=>{const{rootStateKey:ze}=ye.variable;return ze?{picker:(0,vn.AE)(ze,ue).optionsPicker}:(console.error("OptionPickerFactory: variable has no rootStateKey"),{picker:Kr.yy})},H=(0,ur.connect)(L,T);class J extends a.PureComponent{constructor(){super(...arguments),this.onShowOptions=()=>this.props.openOptions((0,pn.yQ)(this.props.variable),this.props.onVariableChange),this.onHideOptions=()=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.commitChangesToVariable(this.props.variable.rootStateKey,this.props.onVariableChange)},this.onToggleOption=(ye,ze)=>{((0,rs.U4)(this.props.variable)&&this.props.variable.multi?this.onToggleMultiValueVariable:this.onToggleSingleValueVariable)(ye,ze)},this.onToggleSingleValueVariable=(ye,ze)=>{this.props.toggleOption((0,pn.yQ)(this.props.variable),ye,ze,!1),this.onHideOptions()},this.onToggleMultiValueVariable=(ye,ze)=>{this.props.toggleOption((0,pn.yQ)(this.props.variable),ye,ze,!1)},this.onToggleAllOptions=()=>{this.props.toggleAllOptions((0,pn.yQ)(this.props.variable))},this.onFilterOrSearchOptions=ye=>{this.props.filterOrSearchOptions((0,pn.yQ)(this.props.variable),ye)},this.onNavigate=(ye,ze)=>{if(!this.props.variable.rootStateKey){console.error("Variable has no rootStateKey");return}this.props.navigateOptions(this.props.variable.rootStateKey,ye,ze)},this.onCancel=()=>{pf().cancelRequest((0,pn.yQ)(this.props.variable))}}render(){const{variable:ye,picker:ze}=this.props,qe=ze.id===ye.id;return a.createElement("div",{className:"variable-link-wrapper"},qe?this.renderOptions(ze):this.renderLink(ye))}renderLink(ye){const ze=hp(ye),qe=ye.state===Hn.Gu.Loading;return a.createElement(yp,{id:Xs.IG+ye.id,text:ze,onClick:this.onShowOptions,loading:qe,onCancel:this.onCancel,disabled:this.props.readOnly})}renderOptions(ye){const{id:ze}=this.props.variable;return a.createElement(Gg.L,{onClick:this.onHideOptions},a.createElement(Ep,{id:Xs.IG+ze,value:ye.queryValue,onChange:this.onFilterOrSearchOptions,onNavigate:this.onNavigate,"aria-expanded":!0,"aria-controls":`options-${ze}`}),a.createElement(xp,{values:ye.options,onToggle:this.onToggleOption,onToggleAll:this.onToggleAllOptions,highlightIndex:ye.highlightIndex,multi:ye.multi,selectedValues:ye.selectedValues,id:`options-${ze}`}))}}const oe=H(J);return oe.displayName="OptionsPicker",oe};var Ei=e(57052);class Rp extends a.PureComponent{constructor(){super(...arguments),this.onChange=L=>{this.props.onPropChange({propName:"query",propValue:L.currentTarget.value})},this.onBlur=L=>{this.props.onPropChange({propName:"query",propValue:L.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(ha.e,null,"Constant options"),a.createElement(Ei.V,{value:this.props.variable.query,name:"Value",placeholder:"your metric prefix",onChange:this.onChange,onBlur:this.onBlur,testId:Ct.wl.pages.Dashboard.Settings.Variables.Edit.ConstantVariable.constantOptionsQueryInputV2,width:30}))}}const Ap={...gs.Eg,type:"constant",hide:gs.bU.hideVariable,query:"",current:{},options:[]},Sg=(0,Gr.oM)({name:"templating/constant",initialState:vi.s,reducers:{createConstantOptionsFromQuery:(T,L)=>{const H=(0,vn.ir)(T,L.payload.id);H.type==="constant"&&(H.options=[{text:H.query.trim(),value:H.query.trim(),selected:!1}])}}}),Lp=Sg.reducer,{createConstantOptionsFromQuery:Bp}=Sg.actions,wp=T=>async L=>{const{rootStateKey:H}=T;await L((0,Ka.mb)(H,Bp((0,pn.Y6)(T)))),await L((0,bs.xQ)(T))},Np=()=>({id:"constant",description:"Define a hidden constant variable, useful for metric prefixes in dashboards you want to share.",name:"Constant",initialState:Ap,reducer:Lp,picker:Dl(),editor:Rp,dependsOn:()=>!1,setValue:async(T,L,H=!1)=>{await(0,$a.WI)((0,bs.Fz)((0,pn.yQ)(T),L,H))},setValueFromUrl:async(T,L)=>{await(0,$a.WI)((0,bs.Ci)((0,pn.yQ)(T),L))},updateOptions:async T=>{await(0,$a.WI)(wp((0,pn.yQ)(T)))},getSaveModel:T=>{const{index:L,id:H,state:J,global:oe,current:ue,options:ye,rootStateKey:ze,...qe}=(0,E.cloneDeep)(T);return qe},getValueForUrl:T=>T.current.value,beforeAdding:T=>{const{current:L,options:H,query:J,...oe}=(0,E.cloneDeep)(T),ue={selected:!0,text:J,value:J};return{...oe,current:ue,options:[ue],query:J}}});var Up=e(58255);function Ef({value:T,name:L,description:H,onChange:J,ariaLabel:oe}){const ue=(0,li.Me)();return a.createElement(Up.X,{id:ue,label:L,description:H,value:T,onChange:J,"aria-label":oe})}const ad=({onMultiChanged:T,onPropChange:L,variable:H})=>{const J=(0,a.useCallback)(ye=>{T((0,pn.yQ)(H),ye.target.checked)},[T,H]),oe=(0,a.useCallback)(ye=>{L({propName:"includeAll",propValue:ye.target.checked})},[L]),ue=(0,a.useCallback)(ye=>{L({propName:"allValue",propValue:ye.currentTarget.value})},[L]);return a.createElement(wn.wc,{spacing:"md",height:"inherit"},a.createElement(Ef,{value:H.multi,name:"Multi-value",description:"Enables multiple values to be selected at the same time",onChange:J}),a.createElement(Ef,{value:H.includeAll,name:"Include All option",description:"Enables an option to include all variables",onChange:oe}),H.includeAll&&a.createElement(Ei.V,{value:H.allValue??"",onChange:ue,name:"Custom all value",placeholder:"blank = auto",testId:Ct.wl.pages.Dashboard.Settings.Variables.Edit.General.selectionOptionsCustomAllInputV2}))};ad.displayName="SelectionOptionsEditor";var Og=e(49993);class Fp extends a.PureComponent{constructor(){super(...arguments),this.onChange=L=>{this.props.onPropChange({propName:"query",propValue:L.currentTarget.value})},this.onSelectionOptionsChange=async({propName:L,propValue:H})=>{this.props.onPropChange({propName:L,propValue:H,updateOptions:!0})},this.onBlur=L=>{this.props.onPropChange({propName:"query",propValue:L.currentTarget.value,updateOptions:!0})}}render(){return a.createElement(a.Fragment,null,a.createElement(ha.e,null,"Custom options"),a.createElement(Og.W,{name:"Values separated by comma",value:this.props.variable.query,placeholder:"1, 10, mykey : myvalue, myvalue, escaped\\,value",onChange:this.onChange,onBlur:this.onBlur,required:!0,width:52,testId:Ct.wl.pages.Dashboard.Settings.Variables.Edit.CustomVariable.customValueInput}),a.createElement(ha.e,null,"Selection options"),a.createElement(ad,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Wp=(T,L)=>({}),$p={changeVariableMultiValue:bs.Z7},Kp=Xm(Fp,Wp,$p),Vp={...gs.Eg,type:"custom",multi:!1,includeAll:!1,allValue:null,query:"",options:[],current:{}},Tg=(0,Gr.oM)({name:"templating/custom",initialState:vi.s,reducers:{createCustomOptionsFromQuery:(T,L)=>{const H=(0,vn.ir)(T,L.payload.id);if(H.type!=="custom")return;const{includeAll:J,query:oe}=H,ye=(oe.match(/(?:\\,|[^,])+/g)??[]).map(ze=>{ze=ze.replace(/\\,/g,",");const qe=/^(.+)\s:\s(.+)$/g.exec(ze)??[];if(qe.length===3){const[,mt,Pt]=qe;return{text:mt.trim(),value:Pt.trim(),selected:!1}}else return{text:ze.trim(),value:ze.trim(),selected:!1}});J&&ye.unshift({text:Xs.xk,value:Xs.r2,selected:!1}),H.options=ye}}}),zp=Tg.reducer,{createCustomOptionsFromQuery:Hp}=Tg.actions,kp=T=>async L=>{const{rootStateKey:H}=T;await L((0,Ka.mb)(H,Hp((0,pn.Y6)(T)))),await L((0,bs.xQ)(T))},Gp=()=>({id:"custom",description:"Define variable values manually",name:"Custom",initialState:Vp,reducer:zp,picker:Dl(),editor:Kp,dependsOn:()=>!1,setValue:async(T,L,H=!1)=>{await(0,$a.WI)((0,bs.Fz)((0,pn.yQ)(T),L,H))},setValueFromUrl:async(T,L)=>{await(0,$a.WI)((0,bs.Ci)((0,pn.yQ)(T),L))},updateOptions:async T=>{await(0,$a.WI)(kp((0,pn.yQ)(T)))},getSaveModel:T=>{const{index:L,id:H,state:J,global:oe,rootStateKey:ue,...ye}=(0,E.cloneDeep)(T);return ye},getValueForUrl:T=>(0,pn.HY)(T)?Xs.xk:T.current.value});var yf=e(83704);const Yp={...gs.Eg,type:"datasource",current:{},regex:"",options:[],query:"",multi:!1,includeAll:!1,refresh:gs.Bd.onDashboardLoad},Ig=(0,Gr.oM)({name:"templating/datasource",initialState:vi.s,reducers:{createDataSourceOptions:(T,L)=>{const{sources:H,regex:J}=L.payload.data,oe=[],ue=(0,vn.ir)(T,L.payload.id);if(ue.type==="datasource"){for(let ye=0;ye<H.length;ye++){const ze=H[ye];ze.meta.id===ue.query&&(jp(ze,J)&&oe.push({text:ze.name,value:ze.name,selected:!1}),Qp(ze,J)&&oe.push({text:"default",value:"default",selected:!1}))}oe.length===0&&oe.push({text:"No data sources found",value:"",selected:!1}),ue.includeAll&&oe.unshift({text:Xs.xk,value:Xs.r2,selected:!1}),ue.options=oe}}}});function jp(T,L){return L?L.exec(T.name):!0}function Qp(T,L){return T.isDefault?L?L.exec("default"):!0:!1}const Zp=Ig.reducer,{createDataSourceOptions:Jp}=Ig.actions,_p=(T,L={getDatasourceSrv:o.ak})=>async(H,J)=>{const{rootStateKey:oe}=T,ue=L.getDatasourceSrv().getList({metrics:!0,variables:!1}),ye=(0,vn.E0)(T,J());if(ye.type!=="datasource")return;let ze;ye.regex&&(ze=(0,Bn.J)().replace(ye.regex,void 0,"regex"),ze=(0,Aa.jO)(ze)),H((0,Ka.mb)(oe,Jp((0,pn.Y6)(T,{sources:ue,regex:ze})))),await H((0,bs.xQ)(T))},Xp=(T,L={getDatasourceSrv:o.ak})=>H=>{const J=L.getDatasourceSrv().getList({metrics:!0,variables:!0}),oe=(0,E.chain)(J).uniqBy("meta.id").map(ue=>({text:ue.meta.name,value:ue.meta.id})).value();oe.unshift({text:"",value:""}),H((0,Ka.mb)(T,(0,fa.z7)({dataSourceTypes:oe})))},qp=(T,L)=>{const{variable:{rootStateKey:H}}=L;if(!H)return console.error("DataSourceVariableEditor: variable has no rootStateKey"),{extended:pa(fa.PF)};const{editor:J}=(0,vn.AE)(H,T);return{extended:pa(J)}},eh={initDataSourceVariableEditor:Xp,changeVariableMultiValue:bs.Z7},th=(0,ur.connect)(qp,eh);class nh extends a.PureComponent{constructor(){super(...arguments),this.onRegExChange=L=>{this.props.onPropChange({propName:"regex",propValue:L.currentTarget.value})},this.onRegExBlur=L=>{this.props.onPropChange({propName:"regex",propValue:L.currentTarget.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:L,propName:H})=>{this.props.onPropChange({propName:H,propValue:L,updateOptions:!0})},this.getSelectedDataSourceTypeValue=()=>{const{extended:L}=this.props;if(!L?.dataSourceTypes.length)return"";const H=L.dataSourceTypes.find(oe=>oe.value===this.props.variable.query);return(H?H.value:L.dataSourceTypes[0].value)??""},this.onDataSourceTypeChanged=L=>{this.props.onPropChange({propName:"query",propValue:L.value,updateOptions:!0})}}componentDidMount(){const{rootStateKey:L}=this.props.variable;if(!L){console.error("DataSourceVariableEditor: variable has no rootStateKey");return}this.props.initDataSourceVariableEditor(L)}render(){const{variable:L,extended:H,changeVariableMultiValue:J}=this.props,oe=H?.dataSourceTypes?.length?H.dataSourceTypes?.map(ye=>({value:ye.value??"",label:ye.text})):[],ue=oe.find(ye=>ye.value===L.query)??oe[0];return a.createElement(a.Fragment,null,a.createElement(ha.e,null,"Data source options"),a.createElement(yf.u,{name:"Type",value:ue,options:oe,onChange:this.onDataSourceTypeChanged,testId:Ct.wl.pages.Dashboard.Settings.Variables.Edit.DatasourceVariable.datasourceSelect}),a.createElement(Ei.V,{value:this.props.variable.regex,name:"Instance name filter",placeholder:"/.*-(.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,description:a.createElement("div",null,"Regex filter for which data source instances to choose from in the variable value list. Leave empty for all.",a.createElement("br",null),a.createElement("br",null),"Example: ",a.createElement("code",null,"/^prod/"))}),a.createElement(ha.e,null,"Selection options"),a.createElement(ad,{variable:L,onPropChange:this.onSelectionOptionsChange,onMultiChanged:J}))}}const ah=th(nh),sh=()=>({id:"datasource",description:"Enables you to dynamically switch the data source for multiple panels.",name:"Data source",initialState:Yp,reducer:Zp,picker:Dl(),editor:ah,dependsOn:(T,L)=>T.regex?(0,pn.QI)(T.regex,L.name):!1,setValue:async(T,L,H=!1)=>{await(0,$a.WI)((0,bs.Fz)((0,pn.yQ)(T),L,H))},setValueFromUrl:async(T,L)=>{await(0,$a.WI)((0,bs.Ci)((0,pn.yQ)(T),L))},updateOptions:async T=>{await(0,$a.WI)(_p((0,pn.yQ)(T)))},getSaveModel:T=>{const{index:L,id:H,state:J,global:oe,rootStateKey:ue,...ye}=(0,E.cloneDeep)(T);return{...ye,options:[]}},getValueForUrl:T=>(0,pn.HY)(T)?Xs.xk:T.current.value});var rh=e(69155);const Pf=[1,2,3,4,5,10,20,30,40,50,100,200,300,400,500].map(T=>({label:`${T}`,value:T})),Rg=a.memo(({onPropChange:T,variable:L})=>{const H=mt=>{T({propName:"auto",propValue:mt.target.checked,updateOptions:!0})},J=mt=>{T({propName:"query",propValue:mt.currentTarget.value})},oe=mt=>{T({propName:"query",propValue:mt.currentTarget.value,updateOptions:!0})},ue=mt=>{T({propName:"auto_count",propValue:mt.value,updateOptions:!0})},ye=mt=>{T({propName:"auto_min",propValue:mt.currentTarget.value,updateOptions:!0})},ze=Pf.find(mt=>mt.value===L.auto_count)??Pf[0],qe=(0,De.wW)(oh);return a.createElement(a.Fragment,null,a.createElement(ha.e,null,"Interval options"),a.createElement(Ei.V,{value:L.query,name:"Values",placeholder:"1m,10m,1h,6h,1d,7d",onChange:J,onBlur:oe,testId:Ct.wl.pages.Dashboard.Settings.Variables.Edit.IntervalVariable.intervalsValueInput,width:32,required:!0}),a.createElement(Ef,{value:L.auto,name:"Auto option",description:"Dynamically calculates interval by dividing time range by the count specified",onChange:H}),L.auto&&a.createElement("div",{className:qe.autoFields},a.createElement(yf.u,{name:"Step count",description:"How many times the current time range should be divided to calculate the value",value:ze,options:Pf,onChange:ue,width:9}),a.createElement(Ei.V,{value:L.auto_min,name:"Min interval",description:"The calculated value will not go below this threshold",placeholder:"10s",onChange:ye,width:11})))});Rg.displayName="IntervalVariableEditor";function oh(T){return{autoFields:(0,k.css)({marginTop:T.spacing(2),display:"flex",flexDirection:"column"})}}var ih=e(58155);const lh={...gs.Eg,type:"interval",auto_count:30,auto_min:"10s",options:[],auto:!1,query:"1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",refresh:gs.Bd.onTimeRangeChanged,current:{}},Ag=(0,Gr.oM)({name:"templating/interval",initialState:vi.s,reducers:{createIntervalOptions:(T,L)=>{const H=(0,vn.ir)(T,L.payload.id);if(H.type!=="interval")return;const J=(0,E.map)(H.query.match(/(["'])(.*?)\1|\w+/g),oe=>(oe=oe.replace(/["']+/g,""),{text:oe.trim(),value:oe.trim(),selected:!1}));H.auto&&J.length&&J[0].text!=="auto"&&J.unshift({text:"auto",value:"$__auto_interval_"+H.name,selected:!1}),H.options=J}}}),ch=Ag.reducer,{createIntervalOptions:dh}=Ag.actions,uh=T=>async L=>{const{rootStateKey:H}=T;await L((0,Ka.mb)(H,dh((0,pn.Y6)(T)))),await L(Cf(T)),await L((0,bs.xQ)(T))},Cf=(T,L={calculateInterval:wa.calculateInterval,getTimeSrv:No.$t,templateSrv:(0,ih.J)()})=>(H,J)=>{const oe=(0,vn.E0)(T,J());if(oe.type==="interval"&&oe.auto){const ue=L.calculateInterval(L.getTimeSrv().timeRange(),oe.auto_count,oe.auto_min);L.templateSrv.setGrafanaVariable("$__auto_interval_"+oe.name,ue.interval),L.templateSrv.setGrafanaVariable("$__auto_interval",ue.interval)}},mh=()=>({id:"interval",description:"Define a timespan interval (ex 1m, 1h, 1d)",name:"Interval",initialState:lh,reducer:ch,picker:Dl(),editor:Rg,dependsOn:()=>!1,setValue:async(T,L,H=!1)=>{await(0,$a.WI)(Cf((0,pn.yQ)(T))),await(0,$a.WI)((0,bs.Fz)((0,pn.yQ)(T),L,H))},setValueFromUrl:async(T,L)=>{await(0,$a.WI)(Cf((0,pn.yQ)(T))),await(0,$a.WI)((0,bs.Ci)((0,pn.yQ)(T),L))},updateOptions:async T=>{await(0,$a.WI)(uh((0,pn.yQ)(T)))},getSaveModel:T=>{const{index:L,id:H,state:J,global:oe,rootStateKey:ue,...ye}=(0,E.cloneDeep)(T);return ye},getValueForUrl:T=>T.current.value});var Lg=e(22107);const xf=[{label:"On dashboard load",value:Lg.Bd.onDashboardLoad},{label:"On time range change",value:Lg.Bd.onTimeRangeChanged}];function fh({onChange:T,refresh:L}){const H=(0,a.useMemo)(()=>xf.find(J=>J.value===L)?.value??xf[0].value,[L]);return a.createElement(ia.g,{label:"Refresh",description:"When to update the values of this variable"},a.createElement(Ce.S,{options:xf,onChange:T,value:H}))}const Df=[{label:"Disabled",value:gs.$U.disabled},{label:"Alphabetical (asc)",value:gs.$U.alphabeticalAsc},{label:"Alphabetical (desc)",value:gs.$U.alphabeticalDesc},{label:"Numerical (asc)",value:gs.$U.numericalAsc},{label:"Numerical (desc)",value:gs.$U.numericalDesc},{label:"Alphabetical (case-insensitive, asc)",value:gs.$U.alphabeticalCaseInsensitiveAsc},{label:"Alphabetical (case-insensitive, desc)",value:gs.$U.alphabeticalCaseInsensitiveDesc}];function gh({onChange:T,sort:L}){const H=(0,a.useMemo)(()=>Df.find(J=>J.value===L)??Df[0],[L]);return a.createElement(yf.u,{name:"Sort",description:"How to sort the values of this variable",value:H,options:Df,onChange:T,testId:Ct.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsSortSelectV2,width:25})}var ph=e(53376),hh=e(77599),Bg=e(95125);async function vh(T,L=Fi.nL){if((0,rs.d7)(T))return T.variables.editor;if((0,rs.X7)(T)){const H=await L(T.meta);if(!H.components.QueryEditor)throw new Error("Missing QueryEditor in plugin definition.");return H.components.QueryEditor??null}return(0,rs.Ju)(T)?Eh:(0,rs.R)(T)?(await L(T.meta)).components.VariableQueryEditor??Bg.R:null}function Eh({datasource:T,query:L,onChange:H}){const J=(0,a.useCallback)(oe=>{H({refId:"StandardVariableQuery",query:oe})},[H]);return a.createElement(Bg.R,{query:L.query,onChange:J,datasource:T,templateSrv:(0,Bn.J)()})}function yh(T,L,H){return{next:oe=>{if(oe.state===Hn.Gu.Error){H.unsubscribe(),L(oe.error);return}if(oe.state===Hn.Gu.Done){H.unsubscribe(),T();return}},error:oe=>{H.unsubscribe(),L(oe)},complete:()=>{H.unsubscribe(),T()}}}const Ph=(T,L)=>async(H,J)=>{try{const{rootStateKey:oe}=T;if(!(0,pn.A3)(oe,J()))return;const ue=(0,vn.E0)(T,J());if(ue.type!=="query")return;(0,vn.AE)(oe,J()).editor.id===ue.id&&H((0,Ka.mb)(oe,(0,fa.PV)({errorProp:"update"})));const ye=await(0,F.F)().get(ue.datasource??"");await new Promise((ze,qe)=>{const mt=new ph.w0,Pt=yh(ze,qe,mt),Ot=pf().getResponse(T).subscribe(Pt);mt.add(Ot),pf().queueRequest({identifier:T,datasource:ye,searchFilter:L})})}catch(oe){if(oe instanceof Error){const ue=(0,hh.P)(oe),{rootStateKey:ye}=T;throw(0,vn.AE)(ye,J()).editor.id===T.id&&H((0,Ka.mb)(ye,(0,fa.Sg)({errorProp:"update",errorText:ue.message}))),ue}}},Ch=T=>async(L,H)=>{const J=(0,vn.E0)(T,H());J.type==="query"&&await L(wg((0,pn.yQ)(J),J.datasource))},wg=(T,L)=>async(H,J)=>{try{const{rootStateKey:oe}=T,{editor:ue}=(0,vn.AE)(oe,J()),ze=Sn(ue)?.dataSource,qe=await(0,F.F)().get(L??"");ze&&ze.type!==qe?.type&&H((0,Ka.mb)(oe,(0,vo.Pl)((0,pn.Y6)(T,{propName:"query",propValue:""}))));const mt=await vh(qe);H((0,Ka.mb)(oe,(0,fa.z7)({dataSource:qe,VariableQueryEditor:mt})))}catch(oe){console.error(oe)}},xh=(T,L,H)=>async(J,oe)=>{const{rootStateKey:ue}=T,ye=(0,vn.E0)(T,oe());if(ye.type==="query"){if(Dh(ye.name,L)){const ze="Query cannot contain a reference to itself. Variable: $"+ye.name;J((0,Ka.mb)(ue,(0,fa.Sg)({errorProp:"query",errorText:ze})));return}J((0,Ka.mb)(ue,(0,fa.PV)({errorProp:"query"}))),J((0,Ka.mb)(ue,(0,vo.Pl)((0,pn.Y6)(T,{propName:"query",propValue:L})))),H?J((0,Ka.mb)(ue,(0,vo.Pl)((0,pn.Y6)(T,{propName:"definition",propValue:H})))):typeof L=="string"&&J((0,Ka.mb)(ue,(0,vo.Pl)((0,pn.Y6)(T,{propName:"definition",propValue:L})))),await J((0,bs.Rk)(T))}};function Dh(T,L){if(typeof L=="string"&&L.match(new RegExp("\\$"+T+"(/| |$)")))return!0;const H=Ng(L);for(let J in H)if(H.hasOwnProperty(J)){const oe=H[J];if(typeof oe=="string"&&oe.match(new RegExp("\\$"+T+"(/| |$)")))return!0}return!1}function Ng(T){return typeof T!="object"||T===null?{query:T}:Object.keys(T).reduce((J,oe)=>{const ue=T[oe];if(typeof ue!="object"||ue===null)return J[oe]=ue,J;const ye=Ng(ue);for(let ze in ye)ye.hasOwnProperty(ze)&&(J[`${oe}_${ze}`]=ye[ze]);return J},{})}const bh=(T,L)=>{const{rootStateKey:H}=L.variable;if(!H)return console.error("QueryVariableEditor: variable has no rootStateKey"),{extended:Sn(fa.PF)};const{editor:J}=(0,vn.AE)(H,T);return{extended:Sn(J)}},Mh={initQueryVariableEditor:Ch,changeQueryVariableDataSource:wg,changeQueryVariableQuery:xh,changeVariableMultiValue:bs.Z7},Sh=(0,ur.connect)(bh,Mh);class Oh extends a.PureComponent{constructor(){super(...arguments),this.state={regex:null,tagsQuery:null,tagValuesQuery:null},this.onDataSourceChange=L=>{this.props.onPropChange({propName:"datasource",propValue:L.isDefault?null:(0,oa.iU)(L)})},this.onLegacyQueryChange=async(L,H)=>{this.props.variable.query!==L&&this.props.changeQueryVariableQuery((0,pn.yQ)(this.props.variable),L,H)},this.onQueryChange=async L=>{if(this.props.variable.query!==L){let H="";L&&L.hasOwnProperty("query")&&typeof L.query=="string"&&(H=L.query),this.props.changeQueryVariableQuery((0,pn.yQ)(this.props.variable),L,H)}},this.onRegExChange=L=>{this.setState({regex:L.currentTarget.value})},this.onRegExBlur=async L=>{const H=L.currentTarget.value;this.props.variable.regex!==H&&this.props.onPropChange({propName:"regex",propValue:H,updateOptions:!0})},this.onRefreshChange=L=>{this.props.onPropChange({propName:"refresh",propValue:L})},this.onSortChange=async L=>{this.props.onPropChange({propName:"sort",propValue:L.value,updateOptions:!0})},this.onSelectionOptionsChange=async({propValue:L,propName:H})=>{this.props.onPropChange({propName:H,propValue:L,updateOptions:!0})},this.renderQueryEditor=()=>{const{extended:L,variable:H}=this.props;if(!L||!L.dataSource||!L.VariableQueryEditor)return null;const J=L.dataSource,oe=L.VariableQueryEditor;let ue=H.query;if(typeof ue=="string"?ue=ue||(J.variables?.getDefaultQuery?.()??""):ue={...J.variables?.getDefaultQuery?.(),...H.query},(0,rs.NX)(oe,J))return a.createElement(ia.g,{label:"Query"},a.createElement(oe,{datasource:J,query:ue,templateSrv:(0,Bn.J)(),onChange:this.onLegacyQueryChange}));const ye=(0,No.$t)().timeRange();return(0,rs.$7)(oe,J)?a.createElement(ia.g,{label:"Query"},a.createElement(oe,{datasource:J,query:ue,onChange:this.onQueryChange,onRunQuery:()=>{},data:{series:[],state:Hn.Gu.Done,timeRange:ye},range:ye,onBlur:()=>{},history:[]})):null}}async componentDidMount(){await this.props.initQueryVariableEditor((0,pn.yQ)(this.props.variable))}componentDidUpdate(L){L.variable.datasource!==this.props.variable.datasource&&this.props.changeQueryVariableDataSource((0,pn.yQ)(this.props.variable),this.props.variable.datasource)}render(){return a.createElement(a.Fragment,null,a.createElement(ha.e,null,"Query options"),a.createElement(ia.g,{label:"Data source",htmlFor:"data-source-picker"},a.createElement(ya.q,{current:this.props.variable.datasource,onChange:this.onDataSourceChange,variables:!0,width:30})),this.renderQueryEditor(),a.createElement(Og.W,{value:this.state.regex??this.props.variable.regex,name:"Regex",description:a.createElement("div",null,"Optional, if you want to extract part of a series name or metric node segment.",a.createElement("br",null),"Named capture groups can be used to separate the display text and value (",a.createElement("a",{className:"external-link",href:"https://grafana.com/docs/grafana/latest/variables/filter-variables-with-regex#filter-and-modify-using-named-text-and-value-capture-groups",target:"__blank"},"see examples"),")."),placeholder:"/.*-(?<text>.*)-(?<value>.*)-.*/",onChange:this.onRegExChange,onBlur:this.onRegExBlur,testId:Ct.wl.pages.Dashboard.Settings.Variables.Edit.QueryVariable.queryOptionsRegExInputV2,width:52}),a.createElement(gh,{onChange:this.onSortChange,sort:this.props.variable.sort}),a.createElement(fh,{onChange:this.onRefreshChange,refresh:this.props.variable.refresh}),a.createElement(ha.e,null,"Selection options"),a.createElement(ad,{variable:this.props.variable,onPropChange:this.onSelectionOptionsChange,onMultiChanged:this.props.changeVariableMultiValue}))}}const Th=Sh(Oh),Ih=()=>({id:"query",description:"Variable values are fetched from a datasource query",name:"Query",initialState:Xg,reducer:np,picker:Dl(),editor:Th,dependsOn:(T,L)=>(0,pn.QI)(T.query,T.datasource?.uid,T.regex,L.name),setValue:async(T,L,H=!1)=>{await(0,$a.WI)((0,bs.Fz)((0,pn.yQ)(T),L,H))},setValueFromUrl:async(T,L)=>{await(0,$a.WI)((0,bs.Ci)((0,pn.yQ)(T),L))},updateOptions:async(T,L)=>{await(0,$a.WI)(Ph((0,pn.yQ)(T),L))},getSaveModel:T=>{const{index:L,id:H,state:J,global:oe,queryValue:ue,rootStateKey:ye,...ze}=(0,E.cloneDeep)(T);return T.refresh!==gs.Bd.never?{...ze,options:[]}:ze},getValueForUrl:T=>(0,pn.HY)(T)?Xs.xk:T.current.value}),Rh=()=>({id:"system",description:"",name:"system",initialState:{...gs.Eg,type:"system",hide:gs.bU.hideVariable,skipUrlSync:!0,current:{value:{toString:()=>""}},state:Hn.Gu.Done},reducer:(T,L)=>T,picker:null,editor:null,dependsOn:()=>!1,setValue:async(T,L,H=!1)=>{},setValueFromUrl:async(T,L)=>{},updateOptions:async T=>{},getSaveModel:T=>({}),getValueForUrl:T=>""});function Ah({onPropChange:T,variable:{query:L}}){const H=(0,a.useCallback)((ue,ye)=>{ue.preventDefault(),T({propName:"originalQuery",propValue:ue.currentTarget.value,updateOptions:!1}),T({propName:"query",propValue:ue.currentTarget.value,updateOptions:ye})},[T]),J=(0,a.useCallback)(ue=>H(ue,!1),[H]),oe=(0,a.useCallback)(ue=>H(ue,!0),[H]);return a.createElement(a.Fragment,null,a.createElement(ha.e,null,"Text options"),a.createElement(Ei.V,{value:L,name:"Default value",placeholder:"default value, if any",onChange:J,onBlur:oe,width:30,testId:Ct.wl.pages.Dashboard.Settings.Variables.Edit.TextBoxVariable.textBoxOptionsQueryInputV2}))}function Lh({variable:T,onVariableChange:L,readOnly:H}){const J=(0,bn.useDispatch)(),[oe,ue]=(0,a.useState)(T.current.value);(0,a.useEffect)(()=>{ue(T.current.value)},[T]);const ye=(0,a.useCallback)(()=>{if(!T.rootStateKey){console.error("Cannot update variable without rootStateKey");return}if(T.current.value!==oe){if(J((0,Ka.mb)(T.rootStateKey,(0,vo.Pl)((0,pn.Y6)({id:T.id,type:T.type},{propName:"query",propValue:oe})))),L){L({...T,current:{...T.current,value:oe}});return}Da.z.get(T.type).updateOptions(T)}},[T,oe,J,L]),ze=(0,a.useCallback)(Pt=>ue(Pt.target.value),[ue]),qe=Pt=>ye(),mt=Pt=>{Pt.keyCode===13&&(Pt.preventDefault(),ye())};return a.createElement(ae.I,{type:"text",value:oe,onChange:ze,onBlur:qe,disabled:H,onKeyDown:mt,placeholder:(0,Ia.t)("variable.textbox.placeholder","Enter variable value"),id:Xs.IG+T.id})}const Bh={...gs.Eg,type:"textbox",query:"",current:{},options:[],originalQuery:null},Ug=(0,Gr.oM)({name:"templating/textbox",initialState:vi.s,reducers:{createTextBoxOptions:(T,L)=>{const H=(0,vn.ir)(T,L.payload.id);if(H.type!=="textbox")return;const J={text:H.query.trim(),value:H.query.trim(),selected:!1};H.options=[J],H.current=J}}}),wh=Ug.reducer,{createTextBoxOptions:Nh}=Ug.actions,Uh=T=>async(L,H)=>{const{rootStateKey:J,type:oe}=T;L((0,Ka.mb)(J,Nh((0,pn.Y6)(T))));const ue=(0,vn.E0)(T,H());ue.type==="textbox"&&await Da.z.get(oe).setValue(ue,ue.options[0],!0)},Fh=(T,L)=>async(H,J)=>{const{rootStateKey:oe}=T,ue=(0,vn.E0)(T,J());if(ue.type!=="textbox")return;const ye=(0,pn.Hi)(L);H((0,Ka.mb)(oe,(0,vo.Pl)((0,pn.Y6)(ue,{propName:"query",propValue:ye})))),await H((0,bs.Ci)((0,pn.yQ)(ue),ye))},Wh=()=>({id:"textbox",description:"Define a textbox variable, where users can enter any arbitrary string",name:"Text box",initialState:Bh,reducer:wh,picker:Lh,editor:Ah,dependsOn:(T,L)=>!1,setValue:async(T,L,H=!1)=>{await(0,$a.WI)((0,bs.Fz)((0,pn.yQ)(T),L,H))},setValueFromUrl:async(T,L)=>{await(0,$a.WI)(Fh((0,pn.yQ)(T),L))},updateOptions:async T=>{await(0,$a.WI)(Uh((0,pn.yQ)(T)))},getSaveModel:(T,L)=>{const{index:H,id:J,state:oe,global:ue,originalQuery:ye,rootStateKey:ze,...qe}=(0,E.cloneDeep)(T);if(T.query!==ye&&!L){const mt=ye??"",Pt={selected:!1,text:mt,value:mt};return{...qe,query:mt,current:Pt,options:[Pt]}}return qe},getValueForUrl:T=>T.current.value,beforeAdding:T=>({...(0,E.cloneDeep)(T),originalQuery:T.query})});var bf=e(10655),$h=e(61962);const Kh={navBarTree:$h.V4,navIndex:mi.G4,appNotifications:Kc.VW};var Vh=e(66114),zh=e(11626),Hh=e(56777),kh=e(36281),Gh=e(58790),Yh=e(41632),jh=e(48197),Qh=e(15932),Zh=e(75804),Jh=e(24693),_h=e(17283),Xh=e(46732),qh=e(66552),ev=e(54294),tv=e(45003),nv=e(62295),av=e(97189),sv=e(12142),Mf=e(29427),rv=e(70431);const ov={...Kh,...zh.ZP,...av.ZP,...Hh.ZP,...Qh.ZP,...Gh.ZP,...jh.ZP,...Yh.ZP,...sv.ZP,...tv.ZP,...ev.ZP,...Zh.ZP,..._h.ZP,...Vh.ZP,...Jh.ZP,...kh.ZP,...Xh.ZP,...Ka.ZP,...nv.ZP,plugins:qh.I6,[Mf.C.reducerPath]:Mf.C.reducer,[bf.Rh.reducerPath]:bf.Rh.reducer},Fg={},pv=T=>{Object.assign(Fg,T)},iv=()=>{const T=(0,yg.combineReducers)({...ov,...Fg});return(L,H)=>{if(H.type!==rv.e.type)return T(L,H);const{cleanupAction:J}=H.payload;return J(L),T(L,H)}};function hv(T){addReducer(T)}function lv(T){const L=(0,Gr.xC)({reducer:iv(),middleware:H=>H({thunk:!0,serializableCheck:!1,immutableCheck:!1}).concat(Mf.C.middleware,bf.Rh.middleware),devTools:!1,preloadedState:{navIndex:(0,mi.Cu)(),...T}});return(0,$a.PQ)(L),L}h().move=z.R;const Wg=e(72866),sd=Wg.keys().map(T=>Wg(T));class cv{async init(){try{parent.postMessage("GrafanaAppInit","*");const L=(0,Ia.uC)(Q.ZP.bootData.user.language);(0,b.jW)(Do.ae),mv(),fv(),(0,x.i_)(Q.ZP.bootData.user.locale),(0,x.Ls)(Q.ZP.bootData.user.weekStart),(0,N.L)(xa.$),(0,S.t)(Yc),(0,U.$)(Uo.Z),(0,R.x)(B.E1),(0,y.K)(()=>Q.ZP.bootData.user.timezone),(0,w.Xw)(ns.Z),await L,dv(),lv(),uv(),C.S.setInit(Gc.u),C.N.setInit(Gc.l),P.Z.setInit(ks),Da.z.setInit(()=>[Ih(),Gp(),Wh(),Np(),sh(),mh(),kg(),Rh()]),D.F.setInit(Dd),(0,A.pD)(()=>new ja),pp(new gp),(0,A.Iw)(Ua.v7),(0,I.Qf)({importPanelPlugin:An.Ub,getPanelPluginFromCache:An.q1}),M.u.initialize({config:Q.ZP,getTimeRangeForUrl:(0,No.$t)().timeRangeForUrl,getVariablesUrlParams:rh.c}),document.addEventListener("click",Jm);const H=new o.ND;H.init(Q.ZP.datasources,Q.ZP.defaultDatasource),(0,F.w)(H),Ja(),new Jc().init();const oe=await On(Q.ZP.apps),ue=mt=>_t({...mt,registry:Ut(oe)});(0,K.o)(ue);const ye=B.E1.getSearchObject(),ze=new yl,qe=new vg(B.E1,ze);ze.setKioskModeFromUrl(ye.kiosk),this.context={backend:Do.ae,location:B.E1,chrome:ze,keybindings:qe,config:Q.ZP},v.render(a.createElement(Hc,{app:this}),document.getElementById("reactRoot"))}catch(L){console.error("Failed to start Grafana",L),window.__grafana_load_failed()}}}function dv(){sd.length>0&&sd[0].addExtensionReducers()}function uv(){sd.length>0&&sd[0].init()}function mv(){(0,W.tz)(new Gf({debug:!1})),window.addEventListener("load",T=>{const L="frontend_boot_load_time_seconds",H="frontend_boot_js_done_time_seconds",J="frontend_boot_css_time_seconds";performance&&(performance.mark(L),bl("first-paint","frontend_boot_","_time_seconds"),bl("first-contentful-paint","frontend_boot_","_time_seconds"),bl(L),bl(H),bl(J))}),ts.Vt.user.orgRole!==""&&(0,W.e6)(new jf({})),Q.ZP.sentry.enabled&&(0,W.e6)(new mf({...Q.ZP.sentry,user:Q.ZP.bootData.user,buildInfo:Q.ZP.buildInfo})),Q.ZP.grafanaJavascriptAgent.enabled&&(0,W.e6)(new og({...Q.ZP.grafanaJavascriptAgent,app:{version:Q.ZP.buildInfo.version,environment:Q.ZP.buildInfo.env},buildInfo:Q.ZP.buildInfo,user:{id:String(Q.ZP.bootData.user?.id),email:Q.ZP.bootData.user?.email}})),Q.ZP.googleAnalyticsId&&(0,W.e6)(new Jf({googleAnalyticsId:Q.ZP.googleAnalyticsId})),Q.ZP.googleAnalytics4Id&&(0,W.e6)(new Zf({googleAnalyticsId:Q.ZP.googleAnalytics4Id,googleAnalytics4SendManualPageViews:Q.ZP.googleAnalytics4SendManualPageViews})),Q.ZP.rudderstackWriteKey&&Q.ZP.rudderstackDataPlaneUrl&&(0,W.e6)(new _f({writeKey:Q.ZP.rudderstackWriteKey,dataPlaneUrl:Q.ZP.rudderstackDataPlaneUrl,user:Q.ZP.bootData.user,sdkUrl:Q.ZP.rudderstackSdkUrl,configUrl:Q.ZP.rudderstackConfigUrl})),Q.ZP.applicationInsightsConnectionString&&(0,W.e6)(new Qf({connectionString:Q.ZP.applicationInsightsConnectionString,endpointUrl:Q.ZP.applicationInsightsEndpointUrl}))}function fv(){(0,Y.n)()>0&&document.body.classList.add("no-overlay-scrollbar")}function bl(T,L="",H=""){const J=h().first(performance.getEntriesByName(T));if(J){const oe=J.name.replace(/-/g,"_");Yf(`${L}${oe}${H}`,Math.round(J.startTime)/1e3)}}const gv=new cv;window.public_cdn_path&&(e.p=window.public_cdn_path),window.__grafana_public_path__=e.p.substring(0,e.p.lastIndexOf("build/"))||e.p,window.nonce&&(e.nc=window.nonce),window.__grafana_app_bundle_loaded=!0,gv.init()},39031:(Z,O,e)=>{"use strict";e.d(O,{As:()=>t,TE:()=>s,Z9:()=>n,_M:()=>l,sK:()=>i});var t=(f=>(f.Active="active",f.Expired="expired",f.Pending="pending",f))(t||{}),n=(f=>(f.Unprocessed="unprocessed",f.Active="active",f.Suppressed="suppressed",f))(n||{}),l=(f=>(f.equal="=",f.notEqual="!=",f.regex="=~",f.notRegex="!~",f))(l||{}),s=(f=>(f.Internal="internal",f.External="external",f.All="all",f))(s||{}),i=(f=>(f.cortex="cortex",f.mimir="mimir",f.prometheus="prometheus",f))(i||{})},53552:(Z,O,e)=>{"use strict";e.d(O,{$5:()=>l,MQ:()=>s,Rv:()=>c,az:()=>f});const t=Object.freeze([0,0]),n={statistics:[]};var l=(m=>(m[m.Query=1]="Query",m[m.Search=0]="Search",m))(l||{}),s=(m=>(m[m.Builder=0]="Builder",m[m.Code=1]="Code",m))(s||{});const i={parameters:[]};var f=(m=>(m.And="and",m.Function="function",m.FunctionParameter="functionParameter",m.GroupBy="groupBy",m.Operator="operator",m.Or="or",m.Property="property",m))(f||{}),c=(m=>(m.String="string",m))(c||{});const o={logGroupNames:[],logGroups:[],statsGroups:[]}},2868:(Z,O,e)=>{"use strict";e.d(O,{$5:()=>t.$5,KB:()=>n,MQ:()=>t.MQ,wf:()=>l});var t=e(53552),n=(s=>(s.Scheduled="Scheduled",s.Running="Running",s.Complete="Complete",s.Failed="Failed",s.Cancelled="Cancelled",s.Timeout="Timeout",s))(n||{}),l=(s=>(s.Regions="regions",s.Namespaces="namespaces",s.Metrics="metrics",s.DimensionKeys="dimensionKeys",s.DimensionValues="dimensionValues",s.EBSVolumeIDs="ebsVolumeIDs",s.EC2InstanceAttributes="ec2InstanceAttributes",s.ResourceArns="resourceARNs",s.Statistics="statistics",s.LogGroups="logGroups",s.Accounts="accounts",s))(l||{})},79543:(Z,O,e)=>{"use strict";e.d(O,{hD:()=>I,yl:()=>c,AK:()=>o});var t=e(84946),n=e(62163),l=e(49922),s=e(69311),i=e(9398),f=e(21471);function c(K){return K?typeof K=="string"?K===f.o:"meta"in K&&K.meta.name===f.o||K.uid===f.o:!1}function o(K,W){return new t.y(U=>{const N=(0,i.h4)().getCurrent(),S=m(K.queries);if(!S){U.next(r("Missing panel reference ID"));return}const Y=N?.getPanelById(S);if(!Y){U.next(r("Unknown Panel: "+S));return}const Q=Y.getQueryRunner(),z=Q.getData({withTransforms:Boolean(W?.withTransforms),withFieldConfig:!1}).subscribe({next:G=>{W?.topic===n.w5.Annotations&&(G={...G,series:G.annotations??[],annotations:void 0}),U.next(G)}});if(!Y.isInView){const{datasource:G,targets:k}=Y,j={...K,datasource:G,panelId:S,queries:k};Q.run(j)}return()=>{z.unsubscribe()}})}function m(K){if(!(!K||!K.length))return K[0].panelId}function r(K){return{state:l.Gu.Error,series:[],request:{},error:{message:K},timeRange:(0,s.JK)()}}var u=e(9892),d=e(42066),g=e(64681),p=e.n(g),E=e(68404),h=e(22350),a=e(72648),v=e(24799),x=e(53217),y=e(52081),C=e(2594),P=e(8944),D=e(67487),M=e(72948),b=e(47694),R=e(91162),B=e(36584);function w(K){return JSON.stringify(K)}const A=[{label:"All data",value:!1},{label:"Annotations",value:!0,description:"Include annotations as regular data"}];function I({panelData:K,queries:W,onChange:U,onRunQueries:N}){const{value:S}=(0,h.Z)(()=>(0,R.ak)().get()),Y=W[0],Q=(0,E.useMemo)(()=>(0,i.h4)().getCurrent()?.getPanelById(Y.panelId??-124134),[Y.panelId]),{value:z,loading:G}=(0,h.Z)(async()=>{if(!Q)return[];const X=await(0,R.ak)().get(Q.datasource);return Promise.all(Q.targets.map(async te=>{const ae=te.datasource?await(0,R.ak)().get(te.datasource):X,_=ae.getQueryDisplayText||w,ve=(0,B.t)(K,te.refId)??K;return{refId:te.refId,query:_(te),name:ae.name,img:ae.meta.info.logos.small,data:ve.series,error:ve.error}}))},[K,Q]),k=(0,E.useCallback)(X=>{U([X]),N()},[U,N]),j=(0,E.useCallback)(X=>{k({...Y,panelId:X})},[Y,k]),de=(0,E.useCallback)(()=>{k({...Y,withTransforms:!Y.withTransforms})},[Y,k]),ge=(0,E.useCallback)(X=>{k({...Y,topic:X?n.w5.Annotations:void 0})},[Y,k]),re=(0,E.useCallback)(X=>{const te=X.datasource??S,ae=(0,R.ak)().getInstanceSettings(te)?.name,_=X.targets.length;return`${_} ${p()("query",_)} to ${ae}`},[S]),ce=(0,i.h4)().getCurrent(),ie=Boolean(Y.withTransforms||Q?.transformations?.length),fe=(0,E.useMemo)(()=>ce?.panels.filter(X=>b.ZP.panels[X.type]&&X.targets&&X.id!==ce.panelInEdit?.id&&X.datasource?.uid!==f.o).map(X=>({value:X.id,label:X.title??"Panel "+X.id,description:re(X),imgUrl:b.ZP.panels[X.type].info.logos.small}))??[],[ce,re]),Ce=(0,a.wW)(F),ee=(0,d.Me)();if(!ce)return null;if(fe.length<1)return E.createElement("p",{className:Ce.noQueriesText},"This dashboard does not have any other panels. Add queries to other panels and try again.");const ne=fe.find(X=>X.value===Y.panelId);return E.createElement(E.Fragment,null,E.createElement(v.g,{label:"Source",description:"Use the same results as panel"},E.createElement(x.Ph,{inputId:ee,placeholder:"Choose panel",isSearchable:!0,options:fe,value:ne,onChange:X=>j(X.value)})),E.createElement(y.Lh,{height:"auto",wrap:!0,align:"flex-start"},E.createElement(v.g,{label:"Data Source",description:"Use data or annotations from the panel",className:Ce.horizontalField},E.createElement(C.S,{options:A,value:Y.topic===n.w5.Annotations,onChange:ge})),ie&&E.createElement(v.g,{label:"Transform",description:"Apply panel transformations from the source panel"},E.createElement(P.r,{value:Boolean(Y.withTransforms),onChange:de}))),G?E.createElement(D.$,null):E.createElement(E.Fragment,null,z&&Boolean(z.length)&&E.createElement(v.g,{label:"Available queries from panel"},E.createElement(y.wc,{spacing:"sm"},z.map((X,te)=>E.createElement(M.Z,{key:`DashboardQueryRow-${te}`},E.createElement(M.Z.Heading,null,X.refId),E.createElement(M.Z.Figure,null,E.createElement("img",{src:X.img,alt:X.name,title:X.name,width:40})),E.createElement(M.Z.Meta,null,X.query)))))))}function F(K){return{horizontalField:(0,u.css)({marginRight:K.spacing(2)}),noQueriesText:(0,u.css)({padding:K.spacing(1.25)})}}},21471:(Z,O,e)=>{"use strict";e.d(O,{o:()=>t});const t="-- Dashboard --"},83977:(Z,O,e)=>{"use strict";e.d(O,{k:()=>N,e:()=>S});var t=e(82897),n=e(49372),l=e(59980),s=e(12877),i=e(9471),f=e(70006),c=e(49922),o=e(62626),m=e(38685),r=e(50235),u=e(16911),d=e(22069),g=e(20308),p=e(75118),E=e(54899),h=e(86647),a=e(7592),v=e(9398),x=e(9892),y=e(68404),C=e(13393),P=e(24799),D=e(53217),M=e(8944),b=e(24357),R=e(70659),B=e(7832);const w="Enabling this returns annotations that match any of the tags specified below",A=y.createElement("div",null,"Specify a list of tags to match. To specify a key and value tag use `key:value` syntax."),I=[{label:"Dashboard",value:B._$.Dashboard,description:"Query for events created on this dashboard and show them in the panels where they where created"},{label:"Tags",value:B._$.Tags,description:"This will fetch any annotation events that match the tags filter"}],F=[10,50,100,200,300,500,1e3,2e3].map(Y=>({label:String(Y),value:Y}));function K({query:Y,onChange:Q}){const z=Y,{limit:G,matchAny:k,tags:j,type:de}=z,ge=W(),re=Ce=>Q({...z,type:Ce.value}),ce=Ce=>Q({...z,limit:Ce.value}),ie=Ce=>Q({...z,matchAny:Ce.target.checked}),fe=Ce=>Q({...z,tags:Ce});return y.createElement(C.C,{className:ge.container},y.createElement(P.g,{label:"Filter by"},y.createElement(D.Ph,{inputId:"grafana-annotations__filter-by",options:I,value:de,onChange:re})),y.createElement(P.g,{label:"Max limit"},y.createElement(D.Ph,{inputId:"grafana-annotations__limit",width:16,options:F,value:G,onChange:ce})),de===B._$.Tags&&y.createElement(y.Fragment,null,y.createElement(P.g,{label:"Match any",description:w},y.createElement(M.r,{id:"grafana-annotations__match-any",value:k,onChange:ie})),y.createElement(P.g,{label:"Tags",description:A},y.createElement(b.D,{allowCustomValue:!0,inputId:"grafana-annotations__tags",onChange:fe,tagOptions:R.lK,tags:j??[]}))))}const W=()=>({container:x.css`
      max-width: 600px;
    `});let U=100;class N extends d.CK{constructor(Q){super(Q),this.annotations={QueryEditor:K,prepareAnnotation(z){return z.target=z.target??{type:z.type??B._$.Dashboard,limit:z.limit??100,tags:z.tags??[],matchAny:z.matchAny??!1},z},prepareQuery(z){let G;if((0,t.isString)(z.datasource)){const k=(0,a.p)(z.datasource,{returnDefaultAsNull:!1});k&&(G=k)}else G=z.datasource;return{...z,refId:z.name,queryType:B.hR.Annotations,datasource:G}}}}query(Q){const z=[],G=[],k=(0,g.J)();for(const j of Q.targets){if(j.queryType===B.hR.Annotations)return(0,n.D)(this.getAnnotations({range:Q.range,rangeRaw:Q.range.raw,annotation:j,dashboard:(0,v.h4)().getCurrent()}));if(!j.hide){if(j.queryType===B.hR.Snapshot){z.push((0,l.of)({data:(j.snapshot??[]).map(de=>(0,f.vP)(de)),state:c.Gu.Done}));continue}if(j.queryType===B.hR.LiveMeasurements){let de=k.replace(j.channel,Q.scopedVars);const{filter:ge}=j,re=(0,o.H7)(de);if(!(0,o.nU)(re))continue;const ce={maxLength:Q.maxDataPoints??500};j.buffer?(ce.maxDelta=j.buffer,ce.maxLength=ce.maxLength*2):Q.rangeRaw?.to==="now"&&(ce.maxDelta=Q.range.to.valueOf()-Q.range.from.valueOf()),z.push((0,p.gj)().getDataStream({key:`${Q.requestId}.${U++}`,addr:re,filter:ge,buffer:ce}))}else j.queryType||(j.queryType=B.hR.RandomWalk),G.push(j)}}return G.length&&z.push(super.query({...Q,targets:G})),z.length?z.length===1?z[0]:(0,s.T)(...z):(0,l.of)()}listFiles(Q){return this.query({targets:[{refId:"A",queryType:B.hR.List,path:Q}]}).pipe((0,i.U)(z=>{const G=z.data[0]??new m.v;return new r.U(G)}))}metricFindQuery(Q){return Promise.resolve([])}async getAnnotations(Q){const z=(0,g.J)(),G=Q.annotation,k=G.target,j={from:Q.range.from.valueOf(),to:Q.range.to.valueOf(),limit:k.limit,tags:k.tags,matchAny:k.matchAny};if(k.type===B._$.Dashboard){if(!Q.dashboard.uid)return Promise.resolve({data:[]});j.dashboardUID=Q.dashboard.uid,delete j.tags}else{if(!Array.isArray(k.tags)||k.tags.length===0)return Promise.resolve({data:[]});const ge="__delimiter__",re=[];for(const ce of j.tags){const ie=z.replace(ce,{},fe=>typeof fe=="string"?fe:fe.join(ge));for(const fe of ie.split(ge))re.push(fe)}j.tags=re}const de=await(0,E.i)().get("/api/annotations",j,`grafana-data-source-annotations-${G.name}-${Q.dashboard?.uid}`);return{data:[(0,u.g0)(de)]}}testDatasource(){return Promise.resolve()}}async function S(){return await(0,h.F)().get("-- Grafana --")}},7832:(Z,O,e)=>{"use strict";e.d(O,{_$:()=>l,hR:()=>t,wi:()=>n});var t=(s=>(s.LiveMeasurements="measurements",s.Annotations="annotations",s.Snapshot="snapshot",s.RandomWalk="randomWalk",s.List="list",s.Read="read",s.Search="search",s))(t||{});const n={refId:"A",queryType:"randomWalk"};var l=(s=>(s.Dashboard="dashboard",s.Tags="tags",s))(l||{})},56991:(Z,O,e)=>{"use strict";e.d(O,{L:()=>s});var t=e(82897),n=e.n(t),l=e(68404);function s(){const i=(0,l.useRef)(null);return i.current==null&&(i.current=(0,t.uniqueId)()),i.current}},63496:(Z,O,e)=>{"use strict";e.d(O,{D:()=>h,w:()=>a});var t=e(82897),n=e.n(t),l=e(59980),s=e(49372),i=e(53208),f=e(39859),c=e(9471),o=e(76997),m=e(59724),r=e(7880),u=e(61474),d=e(7238),g=e(49922),p=e(86647),E=e(77599);const h="-- Mixed --";class a extends d.MF{constructor(y){super(y)}query(y){const C=y.targets.filter(M=>M.datasource?.uid!==h);if(!C.length)return(0,l.of)({data:[]});const P=(0,t.groupBy)(C,"datasource.uid"),D=[];for(const M in P){const b=P[M];D.push({datasource:(0,p.F)().get(b[0].datasource,y.scopedVars),targets:b})}return D.length?this.batchQueries(D,y):(0,l.of)({data:[]})}batchQueries(y,C){const P=y.filter(this.isQueryable).map((D,M)=>(0,s.D)(D.datasource).pipe((0,f.z)(b=>{const R=(0,t.cloneDeep)(C);return R.requestId=`mixed-${M}-${R.requestId||""}`,R.targets=D.targets,(0,s.D)(b.query(R)).pipe((0,c.U)(B=>({...B,data:B.data||[],state:g.Gu.Loading,key:`mixed-${M}-${B.key||""}`})),(0,o.q)(),(0,m.K)(B=>(B=(0,E.P)(B),B.message=`${b.name}: ${B.message}`,(0,l.of)([{data:[],state:g.Gu.Error,error:B,key:`mixed-${M}-${R.requestId||""}`}]))))})));return(0,i.D)(P).pipe(v(),(0,c.U)(this.finalizeResponses),(0,r.J)())}testDatasource(){return Promise.resolve({})}isQueryable(y){return y&&Array.isArray(y.targets)&&y.targets.length>0}finalizeResponses(y){const{length:C}=y;if(C===0)return y;const P=y.find(D=>D.state===g.Gu.Error);return P?y.push(P):y[C-1].state=g.Gu.Done,y}}function v(){return(0,u.u)((x,y)=>y.reduce((C,P)=>(C.push.apply(C,P),C),x),[])}},40286:(Z,O,e)=>{"use strict";e.d(O,{As:()=>t,LM:()=>l,kx:()=>n,wO:()=>s});var t=(i=>(i[i.AlphaAsc=1]="AlphaAsc",i[i.AlphaDesc=2]="AlphaDesc",i[i.Importance=3]="Importance",i[i.TimeAsc=4]="TimeAsc",i[i.TimeDesc=5]="TimeDesc",i))(t||{}),n=(i=>(i.Current="current",i.RecentChanges="changes",i))(n||{}),l=(i=>(i.Default="default",i.Custom="custom",i))(l||{}),s=(i=>(i.List="list",i.Stat="stat",i))(s||{})},28586:(Z,O,e)=>{"use strict";e.d(O,{Gj:()=>n,Qm:()=>f});var t=e(43211);const n=1,l=2,s=3,i=(c,o,m,r)=>(0,t.O)(o+c*(m+r),6);function f(c,o,m,r,u){let d=1-o,g=m===n?d/(c-1):m===l?d/c:m===s?d/(c+1):0;(isNaN(g)||g===1/0)&&(g=0);let p=m===n?0:m===l?g/2:m===s?g:0,E=o/c,h=(0,t.O)(E,6);if(r==null)for(let a=0;a<c;a++)u(a,i(a,p,E,g),h);else u(r,i(r,p,E,g),h)}},60892:(Z,O,e)=>{"use strict";e.d(O,{Pn:()=>l,kK:()=>i,lW:()=>f,zZ:()=>s});const t=10,n=4;function l(c,o,m,r,u,d){return c>=m&&c<=u&&o>=r&&o<=d}function s(c,o,m){let r;if(c.o.length&&(r=c.o.find(u=>u.sidx===o&&u.didx===m)),r==null&&c.q)for(let u=0;u<c.q.length&&(r=s(c.q[u],o,m),!r);u++);return r}function i(c,o){return c.x<=o.x+o.w&&c.x+c.w>=o.x&&c.y+c.h>=o.y&&c.y<=o.y+o.h}class f{constructor(o,m,r,u,d=0){this.x=o,this.y=m,this.w=r,this.h=u,this.l=d,this.o=[],this.q=null}split(){let o=this,m=o.x,r=o.y,u=o.w/2,d=o.h/2,g=o.l+1;o.q=[new f(m+u,r,u,d,g),new f(m,r,u,d,g),new f(m,r+d,u,d,g),new f(m+u,r+d,u,d,g)]}quads(o,m,r,u,d){let g=this,p=g.q,E=g.x+g.w/2,h=g.y+g.h/2,a=m<h,v=o<E,x=o+r>E,y=m+u>h;a&&x&&d(p[0]),v&&a&&d(p[1]),v&&y&&d(p[2]),x&&y&&d(p[3])}add(o){let m=this;if(m.q!=null)m.quads(o.x,o.y,o.w,o.h,r=>{r.add(o)});else{let r=m.o;if(r.push(o),r.length>t&&m.l<n){m.split();for(let u=0;u<r.length;u++){let d=r[u];m.quads(d.x,d.y,d.w,d.h,g=>{g.add(d)})}m.o.length=0}}}get(o,m,r,u,d){let g=this,p=g.o;for(let E=0;E<p.length;E++)d(p[E]);g.q!=null&&g.quads(o,m,r,u,E=>{E.get(o,m,r,u,d)})}clear(){this.o.length=0,this.q=null}}},63992:(Z,O,e)=>{"use strict";e.d(O,{M:()=>r,l:()=>u});var t=e(82897),n=e.n(t),l=e(68404),s=e(20251),i=e(17128),f=e(19670),c=e(18543),o=e(4387),m=e(47694);class r extends l.PureComponent{constructor(){super(...arguments),this.renderComponent=(g,p)=>{const{options:E,fieldConfig:h}=this.props,{value:a,alignmentFactors:v,orientation:x,width:y,height:C,count:P}=g,{field:D,display:M,view:b,colIndex:R}=a,{openMenu:B,targetClassName:w}=p;let A;return b&&(0,t.isNumber)(R)&&(A=b.getFieldDisplayProcessor(R)),l.createElement(f.xf,{value:u(P,h.defaults,M),width:y,height:C,orientation:x,field:D,text:E.text,display:A,theme:m.vc.theme2,itemSpacing:this.getItemSpacing(),displayMode:E.displayMode,onClick:B,className:w,alignmentFactors:P>1?v:void 0,showUnfilled:E.showUnfilled,valueDisplayMode:E.valueMode})},this.renderValue=g=>{const{value:p,orientation:E}=g,{hasLinks:h,getLinks:a}=p;return h&&a?l.createElement("div",{style:{width:"100%",display:E===s.wm.Vertical?"flex":"initial"}},l.createElement(c.V,{links:a},v=>this.renderComponent(g,v))):this.renderComponent(g,{})},this.getValues=()=>{const{data:g,options:p,replaceVariables:E,fieldConfig:h,timeZone:a}=this.props;return(0,i.nG)({fieldConfig:h,reduceOptions:p.reduceOptions,replaceVariables:E,theme:m.vc.theme2,data:g.series,timeZone:a})}}getItemSpacing(){return this.props.options.displayMode==="lcd"?2:10}render(){const{height:g,width:p,options:E,data:h,renderCounter:a}=this.props;return l.createElement(o.Q,{source:h,getAlignmentFactors:i.sg,getValues:this.getValues,renderValue:this.renderValue,renderCounter:a,width:p,height:g,minVizWidth:E.minVizWidth,minVizHeight:E.minVizHeight,itemSpacing:this.getItemSpacing(),orientation:E.orientation})}}function u(d,g,p){return d===1&&!g.displayName?{...p,title:void 0}:p}},8433:(Z,O,e)=>{"use strict";e.d(O,{Z:()=>_e});var t=e(9892),n=e(68404),l=e(11041),s=e(40400),i=e(72648);const f=22*window.devicePixelRatio,c=10*window.devicePixelRatio,o=.5*window.devicePixelRatio,m=20*window.devicePixelRatio,r=.5*window.devicePixelRatio,u=4*window.devicePixelRatio,d=800,g=120;var p=e(22759),E=(Se=>(Se.Bytes="bytes",Se.Short="short",Se.Nanoseconds="ns",Se))(E||{}),h=(Se=>(Se.Symbol="Symbol",Se.Self="Self",Se.Total="Total",Se))(h||{}),a=(Se=>(Se.TopTable="topTable",Se.FlameGraph="flameGraph",Se.Both="both",Se))(a||{}),v=e(42044),x=e(30909);const C=({contextMenuData:Se,graphRef:Fe,totalTicks:Xe,levels:Qe,setContextMenuData:ct,setTopLevelIndex:ht,setSelectedBarIndex:ft,setRangeMin:Re,setRangeMax:nt,data:le})=>{const Pe=Qe[Se.levelIndex][Se.barIndex],Oe=()=>n.createElement(n.Fragment,null,n.createElement(v.s,{label:"Focus block",icon:"eye",onClick:()=>{Fe.current&&Se&&(ht(Se.levelIndex),ft(Se.barIndex),Re(Pe.start/Xe),nt((Pe.start+le.getValue(Pe.itemIndex))/Xe),ct(void 0))}}),n.createElement(v.s,{label:"Copy function name",icon:"copy",onClick:()=>{Fe.current&&Se&&navigator.clipboard.writeText(le.getLabel(Pe.itemIndex)).then(()=>{ct(void 0)})}}));return n.createElement("div",{"data-testid":"contextMenu"},Se.e.clientX&&Se.e.clientY&&n.createElement(x.x,{renderMenuItems:()=>Oe(),x:Se.e.clientX+10,y:Se.e.clientY,focusOnOpen:!1}))},P=n.memo(({data:Se,levels:Fe,topLevelIndex:Xe,selectedBarIndex:Qe,totalTicks:ct})=>{const ht=(0,i.wW)(M);if(Fe[Xe]&&Fe[Xe][Qe]){const ft=Fe[Xe][Qe],Re=D(Se,ft,ct),nt=`${Re?.unitValue} (${Re?.percentValue}%) of ${Re?.samples} total samples (${Re?.unitTitle})`;return n.createElement(n.Fragment,null,n.createElement("div",{className:ht.metadata},nt))}return n.createElement(n.Fragment,null)}),D=(Se,Fe,Xe)=>{const Qe=Se.getValueDisplay(Fe.itemIndex),ct=Math.round(1e4*(Qe.numeric/Xe))/100;let ht=Qe.text+Qe.suffix;const ft=Se.getUnitTitle();return ft==="Count"&&(Qe.suffix||(ht=Qe.text)),{percentValue:ct,unitTitle:ft,unitValue:ht,samples:Xe.toLocaleString()}};P.displayName="FlameGraphMetadata";const M=()=>({metadata:t.css`
    margin: 8px 0;
    text-align: center;
  `}),b=P;var R=e(6554);const B=({data:Se,tooltipRef:Fe,item:Xe,totalTicks:Qe})=>{const ct=(0,i.wW)(A);let ht=null;if(Xe){const ft=w(Se,Xe,Qe);ht=n.createElement(R.u,{content:n.createElement("div",null,n.createElement("p",null,Se.getLabel(Xe.itemIndex)),n.createElement("p",{className:ct.lastParagraph},ft.unitTitle,n.createElement("br",null),"Total: ",n.createElement("b",null,ft.unitValue)," (",ft.percentValue,"%)",n.createElement("br",null),"Self: ",n.createElement("b",null,ft.unitSelf)," (",ft.percentSelf,"%)",n.createElement("br",null),"Samples: ",n.createElement("b",null,ft.samples))),placement:"right",show:!0},n.createElement("span",null))}return n.createElement("div",{ref:Fe,className:ct.tooltip},ht)},w=(Se,Fe,Xe)=>{const Qe=Se.getValueDisplay(Fe.itemIndex),ct=Se.getSelfDisplay(Fe.itemIndex),ht=Math.round(1e4*(Qe.numeric/Xe))/100,ft=Math.round(1e4*(ct.numeric/Xe))/100;let Re=Qe.text+Qe.suffix,nt=ct.text+ct.suffix;const le=Se.getUnitTitle();return le==="Count"&&(Qe.suffix||(Re=Qe.text),ct.suffix||(nt=ct.text)),{name:Se.getLabel(Fe.itemIndex),percentValue:ht,percentSelf:ft,unitTitle:le,unitValue:Re,unitSelf:nt,samples:Qe.numeric.toLocaleString()}},A=()=>({tooltip:t.css`
    position: fixed;
  `,lastParagraph:t.css`
    margin-bottom: 0;
  `,name:t.css`
    margin-bottom: 10px;
  `}),I=B;var F=e(16514);function K(Se,Fe,Xe,Qe,ct,ht){const ft=[];for(let Re=0;Re<Fe.length;Re+=1){const nt=Fe[Re],le=U(nt.start,Qe,ct,ht);let Pe=Se.getValue(nt.itemIndex);const Oe=Pe*ht<=c;if(Oe)for(;Re<Fe.length-1&&nt.start+Pe===Fe[Re+1].start&&Se.getValue(Fe[Re+1].itemIndex)*ht<=c;)Re+=1,Pe+=Se.getValue(Fe[Re].itemIndex);const Le=Se.getValueDisplay(nt.itemIndex);let Ye=Le.suffix?Le.text+Le.suffix:Le.text;const be=Pe*ht-(Oe?0:r*2);ft.push({width:be,height:f,x:le,y:Xe*f,collapsed:Oe,ticks:Pe,label:Se.getLabel(nt.itemIndex),unitLabel:Ye})}return ft}function W(Se,Fe,Xe,Qe,ct,ht,ft,Re,nt){if(Fe.width<o)return;Se.beginPath(),Se.rect(Fe.x+(Fe.collapsed?0:r),Fe.y,Fe.width,Fe.height);const le=Math.min(1,Fe.ticks/Xe/(ct-Qe)),Pe=50-50*le,Oe=65+7*le,Le=Fe.label;Fe.collapsed?Se.fillStyle=nt.has(Le)?N(Pe,Oe):F.O9[55]:(Se.stroke(),ht?Se.fillStyle=nt.has(Le)?N(Pe,Oe):F.O9[55]:Se.fillStyle=ft>Re-1?N(Pe,Oe):N(Pe,Oe+15)),Se.fill(),!Fe.collapsed&&Fe.width>=m&&(Se.save(),Se.clip(),Se.fillStyle="#222",Se.fillText(`${Le} (${Fe.unitLabel})`,Math.max(Fe.x,0)+u,Fe.y+f/2),Se.restore())}function U(Se,Fe,Xe,Qe){return(Se-Fe*Xe)*Qe}function N(Se,Fe){return`hsl(${Se}, 100%, ${Fe}%)`}const S=({data:Se,app:Fe,flameGraphHeight:Xe,levels:Qe,topLevelIndex:ct,selectedBarIndex:ht,rangeMin:ft,rangeMax:Re,search:nt,setTopLevelIndex:le,setSelectedBarIndex:Pe,setRangeMin:Oe,setRangeMax:Le,selectedView:Ye})=>{const be=Y(Ye,Fe,Xe),Te=Se.getValue(0),[me,{width:he}]=(0,l.Z)(),De=(0,n.useRef)(null),$e=(0,n.useRef)(null),[ke,tt]=(0,n.useState)(),[Ge,dt]=(0,n.useState)(),[pt]=(0,n.useState)(()=>new p.Z),Ke=(0,n.useMemo)(()=>{const je=new Set;if(nt){let ot=pt.filter(Se.getUniqueLabels(),nt);if(ot)for(let at of ot)je.add(Se.getUniqueLabels()[at])}return je},[pt,nt,Se]);return(0,n.useEffect)(()=>{if(!Qe.length)return;const je=he*window.devicePixelRatio/Te/(Re-ft),ot=De.current?.getContext("2d"),at=De.current,xt=f*Qe.length;at.width=Math.round(he*window.devicePixelRatio),at.height=Math.round(xt*window.devicePixelRatio),at.style.width=`${he}px`,at.style.height=`${xt}px`,ot.textBaseline="middle",ot.font=12*window.devicePixelRatio+"px monospace",ot.strokeStyle="white";for(let Dt=0;Dt<Qe.length;Dt++){const wt=Qe[Dt],sn=K(Se,wt,Dt,Te,ft,je);for(const mn of sn)W(ot,mn,Te,ft,Re,nt,Dt,ct,Ke)}},[Se,Qe,he,Te,ft,Re,nt,ct,Ke]),(0,n.useEffect)(()=>{De.current&&(De.current.onclick=je=>{tt(void 0);const ot=De.current.clientWidth/Te/(Re-ft),{levelIndex:at,barIndex:xt}=Q(Se,je,ot,Qe,Te,ft);xt!==-1&&!isNaN(at)&&!isNaN(xt)?dt({e:je,levelIndex:at,barIndex:xt}):dt(void 0)},De.current.onmousemove=je=>{if($e.current&&Ge===void 0){tt(void 0);const ot=De.current.clientWidth/Te/(Re-ft),{levelIndex:at,barIndex:xt}=Q(Se,je,ot,Qe,Te,ft);xt!==-1&&!isNaN(at)&&!isNaN(xt)&&($e.current.style.left=je.clientX+10+"px",$e.current.style.top=je.clientY+"px",tt(Qe[at][xt]))}},De.current.onmouseleave=()=>{tt(void 0)})},[Se,Qe,ft,Re,ct,Te,he,le,Oe,Le,Ye,Pe,dt,Ge]),(0,n.useEffect)(()=>{const je=ot=>{ot.target.parentElement?.id!=="flameGraphCanvasContainer"&&dt(void 0)};return window.addEventListener("click",je),()=>window.removeEventListener("click",je)},[dt]),n.createElement("div",{className:be.graph,ref:me},n.createElement(b,{data:Se,levels:Qe,topLevelIndex:ct,selectedBarIndex:ht,totalTicks:Te}),n.createElement("div",{className:be.canvasContainer,id:"flameGraphCanvasContainer"},n.createElement("canvas",{ref:De,"data-testid":"flameGraph"})),n.createElement(I,{tooltipRef:$e,item:ke,data:Se,totalTicks:Te}),Ge&&n.createElement(C,{data:Se,contextMenuData:Ge,levels:Qe,totalTicks:Te,graphRef:De,setContextMenuData:dt,setTopLevelIndex:le,setSelectedBarIndex:Pe,setRangeMin:Oe,setRangeMax:Le}))},Y=(Se,Fe,Xe)=>({graph:t.css`
    float: left;
    overflow: scroll;
    width: ${Se===a.FlameGraph?"100%":"50%"};
    ${Fe!==s.zj.Explore?`height: calc(${Xe}px - 50px)`:""}; // 50px to adjust for header pushing content down
  `,canvasContainer:t.css`
    cursor: pointer;
  `}),Q=(Se,Fe,Xe,Qe,ct,ht)=>{const ft=Math.floor(Fe.offsetY/(f/window.devicePixelRatio)),Re=z(Fe.offsetX,Se,Qe[ft],Xe,ct,ht);return{levelIndex:ft,barIndex:Re}},z=(Se,Fe,Xe,Qe,ct,ht)=>{if(Xe){let ft=0,Re=Xe.length-1;for(;ft<=Re;){const nt=ft+Re>>1,le=U(Xe[nt].start,ct,ht,Qe),Pe=U(Xe[nt].start+Fe.getValue(Xe[nt].itemIndex),ct,ht,Qe);if(le<=Se&&Pe>=Se)return nt;le>Se?Re=nt-1:ft=nt+1}}return-1},G=S;var k=e(36328),j=e(36512);function de(Se){const Fe=[];let Xe=0;for(let Qe=0;Qe<Se.data.length;Qe++){const ct=Se.getLevel(Qe),ht=Qe>0?Se.getLevel(Qe-1):void 0;if(Fe[ct]=Fe[ct]||[],ht&&ht>=ct){const Re=Fe[ct][Fe[ct].length-1];Xe=Re.start+Se.getValue(Re.itemIndex)}const ft={itemIndex:Qe,start:Xe};Fe[ct].push(ft)}return Fe}class ge{constructor(Fe,Xe=(0,k.j)()){if(this.data=Fe,this.labelField=Fe.fields.find(ct=>ct.name==="label"),this.levelField=Fe.fields.find(ct=>ct.name==="level"),this.valueField=Fe.fields.find(ct=>ct.name==="value"),this.selfField=Fe.fields.find(ct=>ct.name==="self"),!(this.labelField&&this.levelField&&this.valueField&&this.selfField))throw new Error("Malformed dataFrame: value, level and label and self fields are required.");const Qe=this.labelField?.config?.type?.enum;Qe?(this.labelDisplayProcessor=(0,j.je)(Xe,Qe),this.uniqueLabels=Qe.text||[]):(this.labelDisplayProcessor=ct=>({text:ct+"",numeric:0}),this.uniqueLabels=[...new Set(this.labelField.values.toArray())]),this.valueDisplayProcessor=(0,j.U_)({field:this.valueField,theme:Xe})}getLabel(Fe){return this.labelDisplayProcessor(this.labelField.values.get(Fe)).text}getLevel(Fe){return this.levelField.values.get(Fe)}getValue(Fe){return this.valueField.values.get(Fe)}getValueDisplay(Fe){return this.valueDisplayProcessor(this.valueField.values.get(Fe))}getSelf(Fe){return this.selfField.values.get(Fe)}getSelfDisplay(Fe){return this.valueDisplayProcessor(this.selfField.values.get(Fe))}getUniqueLabels(){return this.uniqueLabels}getUnitTitle(){switch(this.valueField.config.unit){case E.Bytes:return"RAM";case E.Nanoseconds:return"Time"}return"Count"}}var re=e(46967),ce=e(31403),ie=e(2594);const fe=({app:Se,search:Fe,setTopLevelIndex:Xe,setSelectedBarIndex:Qe,setRangeMin:ct,setRangeMax:ht,setSearch:ft,selectedView:Re,setSelectedView:nt,containerWidth:le})=>{const Pe=(0,i.wW)(Le=>Ce(Le,Se));let Oe=[{value:a.TopTable,label:"Top Table",description:"Only show top table"},{value:a.FlameGraph,label:"Flame Graph",description:"Only show flame graph"}];return le>=d&&Oe.push({value:a.Both,label:"Both",description:"Show both the top table and flame graph"}),n.createElement("div",{className:Pe.header},n.createElement("div",{className:Pe.leftContainer},n.createElement("div",{className:Pe.inputContainer},n.createElement(re.I,{value:Fe||"",onChange:Le=>{ft(Le.currentTarget.value)},placeholder:"Search..",width:24})),n.createElement(ce.zx,{type:"button",variant:"secondary",size:"md",onClick:()=>{Xe(0),Qe(0),ct(0),ht(1),ft("")}},"Reset View")),n.createElement("div",{className:Pe.rightContainer},n.createElement(ie.S,{options:Oe,value:Re,onChange:Le=>{nt(Le)}})))},Ce=(Se,Fe)=>({header:t.css`
    display: flow-root;
    width: 100%;
    background: ${Se.colors.background.primary};
    top: 0;
    height: 50px;
    z-index: ${Se.zIndex.navbarFixed};
    ${Fe===s.zj.Explore?"position: sticky; margin-bottom: 8px; padding-top: 9px":""};
  `,inputContainer:t.css`
    float: left;
    margin-right: 20px;
  `,leftContainer:t.css`
    float: left;
  `,rightContainer:t.css`
    float: right;
  `}),ee=fe;var ne=e(89050),X=e(91742),te=e(75478),ae=e(39904),_=e(68226);const ve=({width:Se,height:Fe,data:Xe,search:Qe,setSearch:ct,setTopLevelIndex:ht,setSelectedBarIndex:ft,setRangeMin:Re,setRangeMax:nt})=>{const le=(0,i.wW)($e=>rt($e)),Pe=($e,ke,tt)=>$e.values[tt].localeCompare(ke.values[tt]),Oe=($e,ke,tt)=>$e.values[tt].value.toString().localeCompare(ke.values[tt].value.toString(),"en",{numeric:!0}),Le=(0,n.useMemo)(()=>[{accessor:h.Symbol.toLowerCase(),header:h.Symbol,cell:Ve,sortType:Pe,width:Se-g*2},{accessor:h.Self.toLowerCase(),header:h.Self,cell:it,sortType:Oe,width:g},{accessor:h.Total.toLowerCase(),header:h.Total,cell:it,sortType:Oe,width:g}],[Se]),Ye=(0,n.useMemo)(()=>({columns:Le,data:Xe,initialState:{sortBy:[{id:h.Self.toLowerCase(),desc:!0}]}}),[Le,Xe]),be=(0,n.useCallback)($e=>{Qe===$e?ct(""):(ct($e),ht(0),ft(0),Re(0),nt(1))},[Qe,nt,Re,ct,ht,ft]),{headerGroups:Te,rows:me,prepareRow:he}=(0,X.useTable)(Ye,X.useSortBy,X.useAbsoluteLayout),De=n.useCallback(({index:$e,style:ke})=>{let tt=me[$e];he(tt);const Ge=tt.values[h.Symbol.toLowerCase()],dt=(0,t.cx)(Ge===Qe&&le.matchedRow,le.row);return n.createElement("div",{...tt.getRowProps({style:ke}),className:dt,onClick:()=>{be(Ge)}},tt.cells.map(pt=>{const{key:Ke,...je}=pt.getCellProps();return je.style&&(je.style.minWidth=je.style.width),n.createElement("div",{key:Ke,className:le.cell,...je},pt.render("cell"))}))},[me,he,Qe,le.matchedRow,le.row,le.cell,be]);return n.createElement("div",{className:le.table(Fe),"data-testid":"topTable"},Te.map($e=>{const{key:ke,...tt}=$e.getHeaderGroupProps();return n.createElement("div",{key:ke,className:le.header,...tt},$e.headers.map(Ge=>{const{key:dt,...pt}=Ge.getHeaderProps(Ge.canSort?Ge.getSortByToggleProps():void 0);return n.createElement("div",{key:dt,className:le.headerCell,...pt},Ge.render("header"),Ge.isSorted&&n.createElement(ae.J,{name:Ge.isSortedDesc?"arrow-down":"arrow-up"}))}))}),me.length>0?n.createElement(_.$,{hideVerticalTrack:!0},n.createElement(te.t7,{height:Fe,itemCount:me.length,itemSize:38,width:"100%",style:{overflow:"hidden auto"}},De)):n.createElement("div",{style:{height:Fe},className:le.noData},"No data"))},Ve=({cell:{value:Se}})=>n.createElement("div",null,Se),it=({cell:{value:Se}})=>n.createElement("div",null,Se.unitValue),rt=Se=>({table:Fe=>t.css`
      background-color: ${Se.colors.background.primary};
      height: ${Fe}px;
      overflow: scroll;
      display: flex;
      flex-direction: column;
      width: 100%;
    `,header:t.css`
    height: 38px;

    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }

    // needed to keep header row height fixed so header row does not resize with browser
    & > :nth-child(3) {
      position: relative !important;
    }
  `,headerCell:t.css`
    background-color: ${Se.colors.background.secondary};
    color: ${Se.colors.primary.text};
    padding: ${Se.spacing(1)};
  `,matchedRow:t.css`
    & > :nth-child(1),
    & > :nth-child(2),
    & > :nth-child(3) {
      background-color: ${Se.colors.background.secondary} !important;
    }
  `,row:t.css`
    border-top: 1px solid ${Se.components.panel.borderColor};

    &:hover {
      background-color: ${Se.colors.emphasize(Se.colors.background.primary,.03)};
    }
    & > :nth-child(2),
    & > :nth-child(3) {
      text-align: right;
    }
    & > :nth-child(3) {
      border-right: none;
    }
  `,cell:t.css`
    border-right: 1px solid ${Se.components.panel.borderColor};
    padding: ${Se.spacing(1)};

    div {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    &:hover {
      overflow: visible;
      width: auto !important;
      box-shadow: 0 0 2px ${Se.colors.primary.main};
      background-color: ${Se.colors.emphasize(Se.colors.background.primary,.03)};
      z-index: 1;
    }
  `,noData:t.css`
    align-items: center;
    display: flex;
    justify-content: center;
  `}),pe=ve,Ie=({data:Se,app:Fe,totalLevels:Xe,selectedView:Qe,search:ct,setSearch:ht,setTopLevelIndex:ft,setSelectedBarIndex:Re,setRangeMin:nt,setRangeMax:le})=>{const Pe=(0,i.wW)(()=>Je(Qe,Fe)),Oe=(0,n.useMemo)(()=>{let Le={};for(let be=0;be<Se.data.length;be++){const Te=Se.getValue(be),me=Se.getSelf(be),he=Se.getLabel(be);Le[he]=Le[he]||{},Le[he].self=Le[he].self?Le[he].self+me:me,Le[he].total=Le[he].total?Le[he].total+Te:Te}let Ye=[];for(let be in Le){const Te=We(Se.valueDisplayProcessor(Le[be].self),Se.getUnitTitle()),me=We(Se.valueDisplayProcessor(Le[be].total),Se.getUnitTitle());Ye.push({symbol:be,self:{value:Le[be].self,unitValue:Te},total:{value:Le[be].total,unitValue:me}})}return Ye},[Se]);return n.createElement(n.Fragment,null,Oe&&n.createElement("div",{className:Pe.topTableContainer},n.createElement(ne.Z,{style:{width:"100%",height:f*Xe+"px"}},({width:Le,height:Ye})=>n.createElement(pe,{width:Le,height:Ye,data:Oe,search:ct,setSearch:ht,setTopLevelIndex:ft,setSelectedBarIndex:Re,setRangeMin:nt,setRangeMax:le}))))};function We(Se,Fe){let Xe=Se.text+Se.suffix;return Fe==="Count"&&(Se.suffix||(Xe=Se.text)),Xe}const Je=(Se,Fe)=>{const Xe="20px";return{topTableContainer:t.css`
      cursor: pointer;
      float: left;
      margin-right: ${Xe};
      width: ${Se===a.TopTable?"100%":`calc(50% - ${Xe})`};
      ${Fe!==s.zj.Explore?"height: calc(100% - 50px)":"height: calc(100% + 50px)"}; // 50px to adjust for header pushing content down
    `}},He=Ie,Ae=Se=>{const[Fe,Xe]=(0,n.useState)(0),[Qe,ct]=(0,n.useState)(0),[ht,ft]=(0,n.useState)(0),[Re,nt]=(0,n.useState)(1),[le,Pe]=(0,n.useState)(""),[Oe,Le]=(0,n.useState)(a.Both),[Ye,{width:be}]=(0,l.Z)(),Te=(0,i.l4)(),[me,he]=(0,n.useMemo)(()=>{if(!Se.data)return[void 0,void 0];const $e=new ge(Se.data,Te);return[$e,de($e)]},[Se.data,Te]),De=(0,i.wW)(()=>et(Se.app,f*(he?.length??0)));return(0,n.useEffect)(()=>{be>0&&be<d&&Oe===a.Both&&Le(a.FlameGraph)},[Oe,Le,be]),(0,n.useEffect)(()=>{Xe(0),ct(0),ft(0),nt(1)},[Se.data]),n.createElement(n.Fragment,null,me&&n.createElement("div",{ref:Ye,className:De.container},n.createElement(ee,{app:Se.app,setTopLevelIndex:Xe,setSelectedBarIndex:ct,setRangeMin:ft,setRangeMax:nt,search:le,setSearch:Pe,selectedView:Oe,setSelectedView:Le,containerWidth:be}),Oe!==a.FlameGraph&&n.createElement(He,{data:me,app:Se.app,totalLevels:he.length,selectedView:Oe,search:le,setSearch:Pe,setTopLevelIndex:Xe,setSelectedBarIndex:ct,setRangeMin:ft,setRangeMax:nt}),Oe!==a.TopTable&&n.createElement(G,{data:me,app:Se.app,flameGraphHeight:Se.flameGraphHeight,levels:he,topLevelIndex:Fe,selectedBarIndex:Qe,rangeMin:ht,rangeMax:Re,search:le,setTopLevelIndex:Xe,setSelectedBarIndex:ct,setRangeMin:ft,setRangeMax:nt,selectedView:Oe})))},et=(Se,Fe)=>({container:t.css`
    height: ${Se===s.zj.Explore?Fe+"px":"100%"};
  `}),_e=Ae},7149:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{plugin:()=>y});var t=e(48513),n=e(25272),l=e(30383),s=e(50954);const i=C=>(0,s.rD)(C),f=(C,P,D)=>{const M=(0,s.ZH)(C,P,D);if(P==="singlestat"&&D.angular){const b=D.angular.gauge;b&&(M.showThresholdMarkers=b.thresholdMarkers,M.showThresholdLabels=b.thresholdLabels)}return M};var c=e(68404),o=e(17128),m=e(69823),r=e(18543),u=e(4387),d=e(47694),g=e(63992);class p extends c.PureComponent{constructor(){super(...arguments),this.renderComponent=(P,D)=>{const{options:M,fieldConfig:b}=this.props,{width:R,height:B,count:w,value:A}=P,{field:I,display:F}=A,{openMenu:K,targetClassName:W}=D;return c.createElement(m.a,{value:(0,g.l)(w,b.defaults,F),width:R,height:B,field:I,text:M.text,showThresholdLabels:M.showThresholdLabels,showThresholdMarkers:M.showThresholdMarkers,theme:d.vc.theme2,onClick:K,className:W})},this.renderValue=P=>{const{value:D}=P,{getLinks:M,hasLinks:b}=D;return b&&M?c.createElement(r.V,{links:M,style:{flexGrow:1}},R=>this.renderComponent(P,R)):this.renderComponent(P,{})},this.getValues=()=>{const{data:P,options:D,replaceVariables:M,fieldConfig:b,timeZone:R}=this.props;return(0,o.nG)({fieldConfig:b,reduceOptions:D.reduceOptions,replaceVariables:M,theme:d.vc.theme2,data:P.series,timeZone:R})}}render(){const{height:P,width:D,data:M,renderCounter:b,options:R}=this.props;return c.createElement(u.Q,{getValues:this.getValues,renderValue:this.renderValue,width:D,height:P,source:M,autoGrid:!0,renderCounter:b,orientation:R.orientation})}}const E=Object.freeze([0,0]),h={showThresholdLabels:!1,showThresholdMarkers:!0};var a=e(24177),v=e(26410);class x{getSuggestionsForData(P){const{dataSummary:D}=P;if(!D.hasData||!D.hasNumberField||D.numberFieldCount>=50)return;const M=P.getListAppender({name:v.y.Gauge,pluginId:"gauge",options:{},fieldConfig:{defaults:{thresholds:{steps:[{value:-1/0,color:"green"},{value:70,color:"orange"},{value:85,color:"red"}],mode:a.H.Percentage},custom:{}},overrides:[]},cardOptions:{previewModifier:b=>{b.options.reduceOptions.values&&(b.options.reduceOptions.limit=2)}}});D.hasStringField&&D.frameCount===1&&D.rowCountTotal<10?(M.append({name:v.y.Gauge,options:{reduceOptions:{values:!0,calcs:[]}}}),M.append({name:v.y.GaugeNoThresholds,options:{reduceOptions:{values:!0,calcs:[]},showThresholdMarkers:!1}})):(M.append({name:v.y.Gauge,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),M.append({name:v.y.GaugeNoThresholds,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},showThresholdMarkers:!1}}))}}const y=new t.c(p).useFieldConfig({useCustomConfig:C=>{C.addNumberInput({path:"neutral",name:"Neutral",description:"Leave empty to use Min as neutral point",category:["Gauge"],settings:{placeholder:"auto"}})}}).setPanelOptions(C=>{(0,l.j)(C),(0,l.h)(C),C.addBooleanSwitch({path:"showThresholdLabels",name:"Show threshold labels",description:"Render the threshold values around the gauge bar",defaultValue:h.showThresholdLabels}).addBooleanSwitch({path:"showThresholdMarkers",name:"Show threshold markers",description:"Renders the thresholds as an outer bar",defaultValue:h.showThresholdMarkers}),n.Z(C)}).setPanelChangeHandler(f).setSuggestionsSupplier(new x).setMigrationHandler(i)},16225:(Z,O,e)=>{"use strict";e.d(O,{H:()=>u});var t=e(9892),n=e(68404),l=e(89890),s=e(20112),i=e(76553),f=e(40538),c=e(72648),o=e(52081),m=e(31403),r=e(56206);const u=({data:g,rowIndex:p,columnIndex:E,sortOrder:h,mode:a,header:v=void 0})=>{const x=(0,c.wW)(d);if(!g||p==null)return null;const y=g.fields.filter(B=>!Boolean(B.config.custom?.hideFrom?.tooltip)),C=y.find(B=>B.name==="traceID")||g.fields[0],P=[C,...y.filter(B=>C!==B)];if(P.length===0)return null;const D=[],M=[],b=new Set;for(const B of P){const w=B.values.get(p),A=B.display?B.display(w):{text:`${w}`,numeric:+w};B.getLinks&&B.getLinks({calculatedValue:A,valueRowIndex:p}).forEach(I=>{const F=`${I.title}/${I.href}`;b.has(F)||(M.push(I),b.add(F))}),D.push([(0,l.C)(B,g),w,(0,s.zc)(A)])}h&&h!==f.As.None&&D.sort((B,w)=>i.sortValues(h)(B[1],w[1]));const R=()=>M.length>0&&n.createElement("tr",null,n.createElement("td",{colSpan:2},n.createElement(o.wc,null,M.map((B,w)=>n.createElement(m.Qj,{key:w,icon:"external-link-alt",target:B.target,href:B.href,onClick:B.onClick,fill:"text",style:{width:"100%"}},B.title)))));return n.createElement("div",{className:x.wrapper},v&&n.createElement("div",{className:x.header},n.createElement("span",{className:x.title},v)),n.createElement("table",{className:x.infoWrap},n.createElement("tbody",null,(a===f.f3.Multi||a==null)&&D.map((B,w)=>n.createElement("tr",{key:`${w}/${p}`,className:w===E?x.highlight:""},n.createElement("th",null,B[0],":"),n.createElement("td",null,(0,r.Q)(B[2])))),a===f.f3.Single&&E&&n.createElement("tr",{key:`${E}/${p}`},n.createElement("th",null,D[E][0],":"),n.createElement("td",null,(0,r.Q)(D[E][2]))),R())))},d=g=>{const p=g.isDark?g.v1.palette.dark2:g.v1.palette.white,E=g.isDark?g.v1.palette.dark9:g.v1.palette.gray5,h=g.isDark?g.v1.palette.dark3:g.v1.palette.gray6;return{wrapper:t.css`
      background: ${p};
      border: 1px solid ${E};
      border-radius: ${g.shape.borderRadius(2)};
    `,header:t.css`
      background: ${E};
      padding: 6px 10px;
      display: flex;
    `,title:t.css`
      font-weight: ${g.typography.fontWeightMedium};
      padding-right: ${g.spacing(2)};
      overflow: hidden;
      display: inline-block;
      white-space: nowrap;
      text-overflow: ellipsis;
      flex-grow: 1;
    `,infoWrap:t.css`
      padding: 8px;
      th {
        font-weight: ${g.typography.fontWeightMedium};
        padding: ${g.spacing(.25,2)};
      }
      tr {
        background-color: ${g.colors.background.primary};
        &:nth-child(even) {
          background-color: ${h};
        }
      }
    `,highlight:t.css`
      background: ${g.colors.action.hover};
    `,link:t.css`
      color: #6e9fff;
    `}}},38286:(Z,O,e)=>{"use strict";e.d(O,{Cg:()=>l,EQ:()=>i,Er:()=>f,H:()=>s,bD:()=>n});var t=e(25532),n=(c=>(c.Point="point",c.Line="line",c.Polygon="polygon",c.Any="*any*",c))(n||{});const l=5;var s=(c=>(c.Left="left",c.Center="center",c.Right="right",c))(s||{}),i=(c=>(c.Top="top",c.Middle="middle",c.Bottom="bottom",c))(i||{});const f=Object.freeze({size:{fixed:l,min:2,max:15},color:{fixed:"dark-green"},opacity:.4,symbol:{mode:t.ResourceDimensionMode.Fixed,fixed:"img/icons/marker/circle.svg"},textConfig:{fontSize:12,textAlign:"center",textBaseline:"middle",offsetX:0,offsetY:0},rotation:{fixed:0,mode:t.ScalarDimensionMode.Mod,min:-360,max:360}})},56206:(Z,O,e)=>{"use strict";e.d(O,{Q:()=>s});var t=e(9892),n=e(68404),l=e(44768);const s=i=>(0,l.CB)(i)?n.createElement("a",{href:i,target:"_blank",className:(0,t.cx)("external-link"),rel:"noreferrer"},i):i},44768:(Z,O,e)=>{"use strict";e.d(O,{B1:()=>o,CB:()=>E,FB:()=>g,gE:()=>d,n_:()=>r,sA:()=>u,uH:()=>p,vV:()=>f});var t=e(92053),n=e(79582),l=e(25532),s=e(83977),i=e(38286);function f(h,a,v,x){const y={};return x&&Object.keys(x).length?(y.color=(0,l.getColorDimension)(h,x.color??i.Er.color,v),y.size=(0,l.getScaledDimension)(h,x.size??i.Er.size),y.rotation=(0,l.getScalarDimension)(h,x.rotation??i.Er.rotation),x.text&&(x.text.field||x.text.fixed)&&(y.text=(0,l.getTextDimension)(h,x.text))):a.fields&&(a.fields.color&&(y.color=(0,l.getColorDimension)(h,a.config.color??i.Er.color,v)),a.fields.size&&(y.size=(0,l.getScaledDimension)(h,a.config.size??i.Er.size)),a.fields.text&&(y.text=(0,l.getTextDimension)(h,a.config.text)),a.fields.rotation&&(y.rotation=(0,l.getScalarDimension)(h,a.config.rotation??i.Er.rotation))),y}let c;function o(){return c||(c=[],m()),c}async function m(){const h=await(0,s.e)();for(let a of["maps","gazetteer"])h.listFiles(a).subscribe({next:v=>{v.forEach(x=>{if(x.name.endsWith(".geojson")){const y=`public/${a}/${x.name}`;c.push({value:y,label:y})}})}})}const r=(h,a,v)=>{const[x]=h.initMapView(a.view,void 0);return h.map=new t.Z({view:x,pixelRatio:1,layers:[],controls:[],target:v,interactions:(0,n.c)({mouseWheelZoom:!1})})},u=(h,a)=>{h.initControls(a.controls),h.forceUpdate()},d=(h,a,v)=>{h.panelContext&&h.panelContext.onInstanceStateChange&&h.panelContext.onInstanceStateChange({map:h.map,layers:a,selected:v,actions:h.actions})},g=h=>{let a=h.layers.length;for(;a<100;){const v=`Layer ${a++}`;if(!h.byName.has(v))return v}return`Layer ${Date.now()}`};function p(h,a,v,x){const y=h.getPixelFromCoordinate(v),C=h.getPixelFromCoordinate(x),P=Math.abs(y[0]-C[0]),D=Math.abs(y[1]-C[1]);return P>a||D>a}const E=h=>{try{return new URL(h).protocol.includes("http")}catch{return!1}}},53764:(Z,O,e)=>{"use strict";e.d(O,{S:()=>f});var t=e(9892),n=e(68404),l=e(8928),s=e(38849),i=e(72648);function f({width:o,showImage:m,data:r,index:u}){const d=(0,i.wW)(c),g=o>600,p=r.get(u);return n.createElement("article",{className:(0,t.cx)(d.item,g&&d.itemWide)},m&&p.ogImage&&n.createElement("a",{tabIndex:-1,href:l.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer",className:(0,t.cx)(d.socialImage,g&&d.socialImageWide),"aria-hidden":!0},n.createElement("img",{src:p.ogImage,alt:p.title})),n.createElement("div",{className:d.body},n.createElement("time",{className:d.date,dateTime:(0,s.dq)(p.date,{format:"MMM DD"})},(0,s.dq)(p.date,{format:"MMM DD"})," "),n.createElement("a",{className:d.link,href:l.QX.sanitizeUrl(p.link),target:"_blank",rel:"noopener noreferrer"},n.createElement("h3",{className:d.title},p.title)),n.createElement("div",{className:d.content,dangerouslySetInnerHTML:{__html:l.QX.sanitize(p.content)}})))}const c=o=>({container:t.css`
    height: 100%;
  `,item:t.css`
    display: flex;
    padding: ${o.spacing(1)};
    position: relative;
    margin-bottom: 4px;
    margin-right: ${o.spacing(1)};
    border-bottom: 2px solid ${o.colors.border.weak};
    background: ${o.colors.background.primary};
    flex-direction: column;
    flex-shrink: 0;
  `,itemWide:t.css`
    flex-direction: row;
  `,body:t.css`
    display: flex;
    flex-direction: column;
  `,socialImage:t.css`
    display: flex;
    align-items: center;
    margin-bottom: ${o.spacing(1)};
    > img {
      width: 100%;
      border-radius: ${o.shape.radius.default} ${o.shape.radius.default} 0 0;
    }
  `,socialImageWide:t.css`
    margin-right: ${o.spacing(2)};
    margin-bottom: 0;
    > img {
      width: 250px;
      border-radius: ${o.shape.radius.default};
    }
  `,link:t.css`
    color: ${o.colors.text.link};
    display: inline-block;

    &:hover {
      color: ${o.colors.text.link};
      text-decoration: underline;
    }
  `,title:t.css`
    font-size: 16px;
    margin-bottom: ${o.spacing(.5)};
  `,content:t.css`
    p {
      margin-bottom: 4px;
      color: ${o.colors.text};
    }
  `,date:t.css`
    margin-bottom: ${o.spacing(.5)};
    font-weight: 500;
    border-radius: 0 0 0 ${o.shape.radius.default};
    color: ${o.colors.text.secondary};
  `})},6981:(Z,O,e)=>{"use strict";e.d(O,{k:()=>t});const t="https://grafana.com/blog/news.xml"},13724:(Z,O,e)=>{"use strict";e.d(O,{j:()=>g});var t=e(671),n=e(50235);function l(p){const h=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(h.querySelectorAll("entry")).map(v=>({title:c(v,"title"),link:v.querySelector("link")?.getAttribute("href")??"",content:c(v,"content"),pubDate:c(v,"published"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}function s(p){const h=new DOMParser().parseFromString(p,"text/xml");return{items:Array.from(h.querySelectorAll("item")).map(v=>({title:c(v,"title"),link:c(v,"link"),content:c(v,"description"),pubDate:c(v,"pubDate"),ogImage:v.querySelector("meta[property='og:image']")?.getAttribute("content")}))}}async function i(p){return await(await fetch(p)).text()}function f(p){return new DOMParser().parseFromString(p,"text/xml").querySelector("feed")!==null}function c(p,E){return p.querySelector(E)?.textContent??""}async function o(p){const E=await i(p);return f(E)?l(E):s(E)}var m=e(19695),r=e(46519),u=e(14582);function d(p){const E=new m.G([]),h=new m.G([]),a=new m.G([]),v=new m.G([]),x=new m.G([]);for(const y of p.items){const C=(0,r.CQ)(y.pubDate);try{if(E.buffer.push(C.valueOf()),h.buffer.push(y.title),a.buffer.push(y.link),x.buffer.push(y.ogImage),y.content){const P=y.content.replace(/<\/?[^>]+(>|$)/g,"");v.buffer.push(P)}}catch(P){console.warn("Error reading news item:",P,y)}}return{fields:[{name:"date",type:u.fS.time,config:{displayName:"Date"},values:E},{name:"title",type:u.fS.string,config:{},values:h},{name:"link",type:u.fS.string,config:{},values:a},{name:"content",type:u.fS.string,config:{},values:v},{name:"ogImage",type:u.fS.string,config:{},values:x}],length:E.length}}function g(p){const[E,h]=(0,t.Z)(async()=>{const a=await o(p),v=d(a);return new n.U(v)},[p],{loading:!0});return{state:E,getNews:h}}},74538:(Z,O,e)=>{"use strict";e.d(O,{E:()=>Re});var t=e(9892),n=e(9085),l=e.n(n),s=e(68404),i=e(10025),f=e(72648),c=e(67487),o=e(39904),m=e(68545);const r=(0,s.memo)(function(Te){const{edge:me,onClick:he,onMouseEnter:De,onMouseLeave:$e,hovering:ke}=Te,{source:tt,target:Ge}=me,dt=(0,m.dM)({x1:tt.x,y1:tt.y,x2:Ge.x,y2:Ge.y},90);return s.createElement("g",{onClick:pt=>he(pt,me),style:{cursor:"pointer"},"aria-label":`Edge from: ${tt.id} to: ${Ge.id}`},s.createElement("line",{strokeWidth:ke?2:1,stroke:"#999",x1:dt.x1,y1:dt.y1,x2:dt.x2,y2:dt.y2,markerEnd:"url(#triangle)"}),s.createElement("line",{stroke:"transparent",x1:dt.x1,y1:dt.y1,x2:dt.x2,y2:dt.y2,strokeWidth:20,onMouseEnter:()=>{De(me.id)},onMouseLeave:()=>{$e(me.id)}}))});function u(){return s.createElement("defs",null,s.createElement("marker",{id:"triangle",viewBox:"0 0 10 10",refX:"8",refY:"5",markerUnits:"userSpaceOnUse",markerWidth:"10",markerHeight:"10",orient:"auto"},s.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"#999"})))}const d=be=>({mainGroup:t.css`
      pointer-events: none;
      font-size: 8px;
    `,background:t.css`
      fill: ${be.components.tooltip.background};
    `,text:t.css`
      fill: ${be.components.tooltip.text};
    `}),g=(0,s.memo)(function(Te){const{edge:me}=Te,{source:he,target:De}=me,$e=(0,m.dM)({x1:he.x,y1:he.y,x2:De.x,y2:De.y},90),ke={x:$e.x1+($e.x2-$e.x1)/2,y:$e.y1+($e.y2-$e.y1)/2},tt=(0,f.wW)(d),Ge=[me.mainStat,me.secondaryStat].filter(ot=>ot),dt=Ge.length>1?"30":"15",pt=Ge.length>1?15:7.5;let Ke=Ge.length>1?-5:2.5;const je=[];return Ge.forEach((ot,at)=>{je.push(s.createElement("text",{key:at,className:tt.text,x:ke.x,y:ke.y+Ke,textAnchor:"middle"},ot)),Ke+=15}),s.createElement("g",{className:tt.mainGroup},s.createElement("rect",{className:tt.background,x:ke.x-40,y:ke.y-pt,width:"80",height:dt,rx:"5"}),je)});var p=e(82897),E=e(66926),h=e(40538),a=e(78056),v=e(46920);function x(){return{item:t.css`
      label: LegendItem;
      flex-grow: 0;
    `,legend:t.css`
      label: Legend;
      pointer-events: all;
    `}}const y=function(Te){const{nodes:me,onSort:he,sort:De,sortable:$e}=Te,ke=(0,f.l4)(),tt=(0,f.wW)(x),Ge=C(me,ke),dt=(0,s.useCallback)(pt=>{he({field:pt.data.field,ascending:pt.data.field===De?.field?!De?.ascending:!1})},[De,he]);return s.createElement(a.l,{className:tt.legend,displayMode:h.jK.List,placement:"bottom",items:Ge,itemRenderer:pt=>s.createElement(s.Fragment,null,s.createElement(v.e,{item:pt,className:tt.item,onLabelClick:$e?dt:void 0}),$e&&(De?.field===pt.data.field?s.createElement(o.J,{name:De.ascending?"arrow-up":"arrow-down"}):""))})};function C(be,Te){if(!be.length)return[];const me=[be[0].mainStat,be[0].secondaryStat].filter(p.identity),he=be.find(De=>De.arcSections.length>0);return he&&he.arcSections[0].config?.color?.mode===E.S.Fixed&&me.push(...new Set(be.map(De=>De.arcSections).flat())),be[0].color&&me.push(be[0].color),me.map(De=>{const $e={label:De.config.displayName||De.name,yAxis:0,data:{field:De}};return De.config.color?.mode===E.S.Fixed&&De.config.color?.fixedColor?$e.color=Te.visualization.getColorByName(De.config.color?.fixedColor||""):De.config.color?.mode&&($e.gradient=De.config.color?.mode),$e.color||$e.gradient||($e.color=Te.visualization.getColorByName("")),$e})}const P=40,D=be=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
  `,mainCircle:t.css`
    fill: ${be.components.panel.background};
    stroke: ${be.colors.border.strong};
  `,text:t.css`
    width: 50px;
    height: 50px;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),M=(0,s.memo)(function(Te){const{marker:me,onClick:he}=Te,{node:De}=me,$e=(0,f.wW)(D);return De.x!==void 0&&De.y!==void 0?s.createElement("g",{"data-node-id":De.id,className:$e.mainGroup,onClick:ke=>{he?.(ke,me)},"aria-label":`Hidden nodes marker: ${De.id}`},s.createElement("circle",{className:$e.mainCircle,r:P,cx:De.x,cy:De.y}),s.createElement("g",null,s.createElement("foreignObject",{x:De.x-25,y:De.y-25,width:"50",height:"50"},s.createElement("div",{className:$e.text},s.createElement("span",null,me.count>100?">100":me.count," nodes"))))):null});var b=e(28550),R=e(425);const B=40,w=(be,Te)=>({mainGroup:t.css`
    cursor: pointer;
    font-size: 10px;
    transition: opacity 300ms;
    opacity: ${Te==="inactive"?.5:1};
  `,mainCircle:t.css`
    fill: ${be.components.panel.background};
  `,hoverCircle:t.css`
    opacity: 0.5;
    fill: transparent;
    stroke: ${be.colors.primary.text};
  `,text:t.css`
    fill: ${be.colors.text.primary};
  `,titleText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    background-color: ${(0,b.Z)(be.colors.background.primary).setAlpha(.6).toHex8String()};
    width: 100px;
  `,statsText:t.css`
    text-align: center;
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    width: 70px;
  `,textHovering:t.css`
    width: 200px;
    & span {
      background-color: ${(0,b.Z)(be.colors.background.primary).setAlpha(.8).toHex8String()};
    }
  `}),A=(0,s.memo)(function(Te){const{node:me,onMouseEnter:he,onMouseLeave:De,onClick:$e,hovering:ke}=Te,tt=(0,f.l4)(),Ge=w(tt,ke),dt=ke==="active";return me.x!==void 0&&me.y!==void 0?s.createElement("g",{"data-node-id":me.id,className:Ge.mainGroup,onMouseEnter:()=>{he(me.id)},onMouseLeave:()=>{De(me.id)},onClick:pt=>{$e(pt,me)},"aria-label":`Node: ${me.title}`},s.createElement("circle",{className:Ge.mainCircle,r:B,cx:me.x,cy:me.y}),dt&&s.createElement("circle",{className:Ge.hoverCircle,r:B-3,cx:me.x,cy:me.y,strokeWidth:2}),s.createElement(F,{node:me}),s.createElement("g",{className:Ge.text},s.createElement(I,{node:me,hovering:ke}),s.createElement("foreignObject",{x:me.x-(dt?100:50),y:me.y+B+5,width:dt?"200":"100",height:"40"},s.createElement("div",{className:l()(Ge.titleText,dt&&Ge.textHovering)},s.createElement("span",null,me.title),s.createElement("br",null),s.createElement("span",null,me.subTitle))))):null});function I({node:be,hovering:Te}){const me=(0,f.l4)(),he=w(me,Te),De=Te==="active";return be.x!==void 0&&be.y!==void 0?be.icon?s.createElement("foreignObject",{x:be.x-35,y:be.y-20,width:"70",height:"40"},s.createElement("div",{style:{width:70,overflow:"hidden",display:"flex",justifyContent:"center",marginTop:-4}},s.createElement(o.J,{"data-testid":`node-icon-${be.icon}`,name:be.icon,size:"xxxl"}))):s.createElement("foreignObject",{x:be.x-(De?100:35),y:be.y-15,width:De?"200":"70",height:"40"},s.createElement("div",{className:l()(he.statsText,De&&he.textHovering)},s.createElement("span",null,be.mainStat&&(0,m.Ew)(be.mainStat.config,be.mainStat.values.get(be.dataFrameRowIndex))),s.createElement("br",null),s.createElement("span",null,be.secondaryStat&&(0,m.Ew)(be.secondaryStat.config,be.secondaryStat.values.get(be.dataFrameRowIndex))))):null}function F(be){const{node:Te}=be,me=Te.arcSections.find(ke=>ke.values.get(Te.dataFrameRowIndex)>=1),he=(0,f.l4)();if(me)return s.createElement("circle",{fill:"none",stroke:he.visualization.getColorByName(me.config.color?.fixedColor||""),strokeWidth:2,r:B,cx:Te.x,cy:Te.y});const De=Te.arcSections.filter(ke=>ke.values.get(Te.dataFrameRowIndex)!==0);if(De.length===0)return s.createElement("circle",{fill:"none",stroke:Te.color?W(Te.color,Te.dataFrameRowIndex,he):"gray",strokeWidth:2,r:B,cx:Te.x,cy:Te.y});const{elements:$e}=De.reduce((ke,tt,Ge)=>{const dt=tt.config.color?.fixedColor||"",pt=tt.values.get(Te.dataFrameRowIndex),Ke=s.createElement(K,{key:Ge,r:B,x:Te.x,y:Te.y,startPercent:ke.percent,percent:pt+ke.percent>1?1-ke.percent:pt,color:he.visualization.getColorByName(dt),strokeWidth:2});return ke.elements.push(Ke),ke.percent=ke.percent+pt,ke},{elements:[],percent:0});return s.createElement(s.Fragment,null,$e)}function K({r:be,x:Te,y:me,startPercent:he,percent:De,color:$e,strokeWidth:ke=2}){const tt=he+De,Ge=Te+Math.sin(2*Math.PI*he)*be,dt=me-Math.cos(2*Math.PI*he)*be,pt=Te+Math.sin(2*Math.PI*tt)*be,Ke=me-Math.cos(2*Math.PI*tt)*be,je=De>.5?"1":"0";return s.createElement("path",{fill:"none",d:`M ${Ge} ${dt} A ${be} ${be} 0 ${je} 1 ${pt} ${Ke}`,stroke:$e,strokeWidth:ke})}function W(be,Te,me){return be.config.color?(0,R.fD)(be).getCalculator(be,me)(0,be.values.get(Te)):be.values.get(Te)}var U=e(52081),N=e(31403);function S(){return{wrapper:t.css`
      label: wrapper;
      pointer-events: all;
    `}}function Y(be){const{config:Te,onConfigChange:me,onPlus:he,onMinus:De,disableZoomOut:$e,disableZoomIn:ke}=be,[tt,Ge]=(0,s.useState)(!1),dt=!1,pt=(0,f.wW)(S);return s.createElement("div",{className:pt.wrapper},s.createElement(U.wc,{spacing:"sm"},s.createElement(U.Lh,{spacing:"xs"},s.createElement(N.zx,{icon:"plus-circle",onClick:he,size:"md",title:"Zoom in",variant:"secondary",disabled:ke}),s.createElement(N.zx,{icon:"minus-circle",onClick:De,size:"md",title:"Zoom out",variant:"secondary",disabled:$e})),s.createElement(U.Lh,{spacing:"xs"},s.createElement(N.zx,{icon:"code-branch",onClick:()=>me({...Te,gridLayout:!1}),size:"md",title:"Default layout",variant:"secondary",disabled:!Te.gridLayout}),s.createElement(N.zx,{icon:"apps",onClick:()=>me({...Te,gridLayout:!0}),size:"md",title:"Grid layout",variant:"secondary",disabled:Te.gridLayout}))),dt&&s.createElement(N.zx,{size:"xs",fill:"text",onClick:()=>Ge(Ke=>!Ke)},tt?"Hide config":"Show config"),dt&&tt&&Object.keys(Te).filter(Ke=>Ke!=="show").map(Ke=>s.createElement("div",{key:Ke},Ke,s.createElement("input",{style:{width:50},type:"number",value:Te[Ke],onChange:je=>{me({...Te,[Ke]:parseFloat(je.target.value)})}}))))}var Q=e(77303),z=e(98136),G=e(77410);const k=()=>new G.q(new URL(e.p+e.u(1256),e.b));function j(be,Te,me,he,De){const[$e,ke]=(0,s.useMemo)(()=>{if(!(be.length&&Te.length))return[{},{}];const tt=Te.reduce((dt,pt)=>(dt[pt.source.id]=[...dt[pt.source.id]??[],pt],dt[pt.target.id]=[...dt[pt.target.id]??[],pt],dt),{}),Ge=be.reduce((dt,pt)=>(dt[pt.id]=pt,dt),{});return[tt,Ge]},[Te,be]);return(0,s.useMemo)(()=>be.length<=me?{nodes:be,edges:Te}:he.gridLayout?ge(be,me,De):de(be,Te,ke,$e,me,De),[Te,$e,me,be,ke,De,he.gridLayout])}function de(be,Te,me,he,De,$e){let ke;$e?ke=[me[$e]]:(ke=be.filter(je=>je.incoming===0),ke.length||(ke=[be[0]]));const{visibleNodes:tt,markers:Ge}=re(De,ke,me,he),dt=ce(Ge,tt,me,he),pt=(0,p.fromPairs)(dt.map(je=>[je.node.id,je]));for(const je of dt)je.count===1&&(delete pt[je.node.id],tt[je.node.id]=je.node);const Ke=Te.filter(je=>(tt[je.source.id]||pt[je.source.id])&&(tt[je.target.id]||pt[je.target.id]));return{nodes:Object.values(tt),edges:Ke,markers:Object.values(pt)}}function ge(be,Te,me){let he=0,De=Te,$e=[];if(me){const ke=be.findIndex(dt=>dt.id===me),tt=Math.floor(Te/2);let Ge=tt;he=ke-tt,he<0&&(Ge+=Math.abs(he),he=0),De=ke+Ge+1,De>be.length&&(he>0&&(he=Math.max(0,he-(De-be.length))),De=be.length),he>1&&$e.push({node:be[he-1],count:he}),be.length-De>1&&$e.push({node:be[De],count:be.length-De})}else be.length-Te>1&&($e=[{node:be[Te],count:be.length-Te}]);return{nodes:be.slice(he,De),edges:[],markers:$e}}function re(be,Te,me,he){const De={};let $e=[...Te];for(;Object.keys(De).length<be&&$e.length>0;){let tt=$e.shift();if(De[tt.id])continue;De[tt.id]=tt;const dt=(he[tt.id]||[]).map(pt=>{const Ke=pt.source.id===tt.id?pt.target.id:pt.source.id;return me[Ke]});$e=$e.concat(dt)}const ke=(0,p.uniq)($e.filter(tt=>!De[tt.id]));return{visibleNodes:De,markers:ke}}function ce(be,Te,me,he){return be.map(De=>{const $e={};let ke=0,tt=[De];for(;tt.length>0&&ke<=101;){let Ge=tt.shift();if(Te[Ge.id]||$e[Ge.id])continue;$e[Ge.id]||ke++,$e[Ge.id]=Ge;const pt=(he[Ge.id]||[]).map(Ke=>{const je=Ke.source.id===Ge.id?Ke.target.id:Ke.source.id;return me[je]});tt=tt.concat(pt)}return{node:De,count:ke}})}const ie={linkDistance:150,linkStrength:.5,forceX:2e3,forceXStrength:.02,forceCollide:100,tick:300,gridLayout:!1};function fe(be,Te,me=ie,he,De,$e){const[ke,tt]=(0,s.useState)([]),[Ge,dt]=(0,s.useState)([]),[pt,Ke]=(0,s.useState)(!1),je=(0,z.default)(),ot=(0,s.useRef)();(0,Q.Z)(()=>{ot.current&&ot.current()}),(0,s.useEffect)(()=>{if(be.length===0){tt([]),dt([]),Ke(!1);return}Ke(!0);const Dn=Ce(be,Te,({nodes:Rn,edges:St})=>{je()&&(tt(Rn),dt(St),Ke(!1))});return ot.current=Dn,Dn},[be,Te,je]);const[at,xt]=(0,s.useMemo)(()=>{if(be.length===0)return[[],[]];const Dn=be.map(St=>({...St})),Rn=Te.map(St=>({...St}));return ee(Dn,De,me.sort),[Dn,Rn]},[me.sort,be,Te,De]),{nodes:Dt,edges:wt,markers:sn}=j(me.gridLayout?at:ke,me.gridLayout?xt:Ge,he,me,$e),mn=(0,s.useMemo)(()=>(0,m.Tz)([...Dt,...(sn||[]).map(Dn=>Dn.node)]),[Dt,sn]);return{nodes:Dt,edges:wt,markers:sn,bounds:mn,hiddenNodesCount:be.length-Dt.length,loading:pt}}function Ce(be,Te,me){const he=k();return he.onmessage=De=>{for(let $e=0;$e<be.length;$e++)De.data.nodes[$e]={...be[$e],...De.data.nodes[$e]};me(De.data)},he.postMessage({nodes:be.map(De=>({id:De.id,incoming:De.incoming})),edges:Te,config:ie}),()=>{he.terminate()}}function ee(be,Te,me){const ke=Math.min(Math.floor((Te-120)/140),be.length),tt=Math.floor((ke-1)*120/2);me&&be.sort((Ge,dt)=>{const pt=me.field.values.get(Ge.dataFrameRowIndex),Ke=me.field.values.get(dt.dataFrameRowIndex);return me.ascending?pt-Ke:Ke-pt});for(const[Ge,dt]of be.entries()){const pt=Math.floor(Ge/ke),Ke=Ge%ke;dt.x=Ke*120-tt,dt.y=-60+pt*140}}var ne=e(85506),X=e(30909),te=e(14391),ae=e(42044);function _(be,Te,me,he,De,$e){const[ke,tt]=(0,s.useState)(void 0),Ge=(0,s.useCallback)((pt,Ke)=>{const[je,ot]=he.gridLayout?["Show in Graph layout",!1]:["Show in Grid layout",!0],at=[{label:je,onClick:wt=>{$e(wt.id),De({...he,gridLayout:ot}),tt(void 0)}}],xt=Te?be(Te,Ke.dataFrameRowIndex):[],Dt=Ve(xt,Ke,at);tt(ve(s.createElement(We,{node:Ke,nodes:Te}),pt,tt,Dt))},[he,Te,be,tt,De,$e]);return{onEdgeOpen:(0,s.useCallback)((pt,Ke)=>{if(!me)return;const je=be(me,Ke.dataFrameRowIndex),ot=Ve(je,Ke);tt(ve(s.createElement(Je,{edge:Ke,edges:me}),pt,tt,ot))},[me,be,tt]),onNodeOpen:Ge,MenuComponent:ke}}function ve(be,Te,me,he){return s.createElement(X.x,{renderHeader:()=>be,renderMenuItems:he,onClose:()=>me(void 0),x:Te.pageX,y:Te.pageY})}function Ve(be,Te,me){if(!(be.length||me?.length))return;const he=rt(be);return()=>{let De=he?.map(($e,ke)=>s.createElement(te.k,{key:`${$e.label}${ke}`,label:$e.label},($e.items||[]).map(it(Te))));return me&&(De=[...me.map(it(Te)),...De]),De}}function it(be){return function(me){return s.createElement(ae.s,{key:me.label,url:me.url,label:me.label,ariaLabel:me.ariaLabel,onClick:me.onClick?he=>{he?.ctrlKey||he?.metaKey||he?.shiftKey||(he?.preventDefault(),he?.stopPropagation(),me.onClick?.(be))}:void 0,target:"_self"})}}function rt(be){const Te="Open in Explore",me=be.reduce((he,De)=>{let $e,ke;return De.title.indexOf("/")!==-1?($e=De.title.split("/")[0],ke=De.title.split("/")[1],he[$e]=he[$e]||[],he[$e].push({l:De,newTitle:ke})):(he[Te]=he[Te]||[],he[Te].push({l:De})),he},{});return Object.keys(me).map(he=>({label:he,ariaLabel:he,items:me[he].map(De=>({label:De.newTitle||De.l.title,ariaLabel:De.newTitle||De.l.title,url:De.l.href,onClick:De.l.onClick}))}))}function pe({field:be,index:Te}){return s.createElement(Ie,{label:be.config?.displayName||be.name,value:(0,m.Ew)(be.config,be.values.get(Te)||"")})}function Ie({label:be,value:Te}){const me=(0,f.wW)(He);return s.createElement("tr",null,s.createElement("td",{className:me.label},be,": "),s.createElement("td",{className:me.value},Te))}function We({node:be,nodes:Te}){const me=[];if(Te){const he=(0,m.F)(Te);for(const De of[he.title,he.subTitle,he.mainStat,he.secondaryStat,...he.details])De&&De.values.get(be.dataFrameRowIndex)&&me.push(s.createElement(pe,{field:De,index:be.dataFrameRowIndex}))}else be.title&&me.push(s.createElement(Ie,{label:"Title",value:be.title})),be.subTitle&&me.push(s.createElement(Ie,{label:"Subtitle",value:be.subTitle}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,me))}function Je(be){const Te=be.edge.dataFrameRowIndex,me=(0,m.lr)(be.edges),he=me.source?.values.get(Te)||"",De=me.target?.values.get(Te)||"",$e=[];he&&De&&$e.push(s.createElement(Ie,{label:"Source \u2192 Target",value:`${he} \u2192 ${De}`}));for(const ke of[me.mainStat,me.secondaryStat,...me.details])ke&&ke.values.get(Te)&&$e.push(s.createElement(pe,{field:ke,index:Te}));return s.createElement("table",{style:{width:"100%"}},s.createElement("tbody",null,$e))}const He=be=>({label:t.css`
      label: Label;
      line-height: 1.25;
      color: ${be.colors.text.disabled};
      font-size: ${be.typography.size.sm};
      font-weight: ${be.typography.fontWeightMedium};
      padding-right: ${be.spacing(1)};
    `,value:t.css`
      label: Value;
      font-size: ${be.typography.size.sm};
      font-weight: ${be.typography.fontWeightMedium};
      color: ${be.colors.text.primary};
    `});var Ae=e(64076);function et(be,Te,me){const he=(0,Ae.Z)(be.gridLayout);let De;if(he===!0&&!be.gridLayout&&me){const $e=Te.find(ke=>ke.id===me);$e&&(De={x:-$e.x,y:-$e.y})}return De}function _e(be){const[Te,me]=(0,s.useState)(),he=(0,z.default)();return(0,s.useEffect)(()=>{be&&(me(be),setTimeout(()=>{he()&&me(void 0)},500))},[be,he]),Te}function Se({scale:be=1,bounds:Te,focus:me}={}){const he=(0,z.default)(),De=(0,s.useRef)(!1),$e=(0,s.useRef)(0),ke=(0,s.useRef)(null),tt={x:0,y:0},Ge=(0,s.useMemo)(()=>({right:Te?-Te.left:1/0,left:Te?-Te.right:-1/0,bottom:Te?-Te.top:-1/0,top:Te?-Te.bottom:1/0}),[Te]),dt=(0,s.useRef)(tt),pt=(0,s.useRef)(tt),Ke=(0,s.useRef)(tt),[je,ot]=(0,s.useState)({isPanning:!1,position:tt});(0,s.useEffect)(()=>{const Dt=At=>{!De.current&&he()&&(De.current=!0,dt.current=Xe(At),pt.current={...Ke.current},ot(Wt=>({...Wt,isPanning:!0})),mn())},wt=()=>{De.current&&he()&&(De.current=!1,ot(At=>({...At,isPanning:!1})),Dn())},sn=At=>{Dt(At),Rn(At)},mn=()=>{document.addEventListener("mousemove",Rn),document.addEventListener("mouseup",wt),document.addEventListener("touchmove",Rn),document.addEventListener("touchend",wt)},Dn=()=>{document.removeEventListener("mousemove",Rn),document.removeEventListener("mouseup",wt),document.removeEventListener("touchmove",Rn),document.removeEventListener("touchend",wt)},Rn=At=>{cancelAnimationFrame($e.current);const Wt=Xe(At);$e.current=requestAnimationFrame(()=>{if(he()&&ke.current){let Qt=Wt.x-dt.current.x,jt=Wt.y-dt.current.y;Ke.current={x:Fe(pt.current.x+Qt/be,Ge.left,Ge.right),y:Fe(pt.current.y+jt/be,Ge.top,Ge.bottom)},ot(Xt=>({...Xt,position:{...Ke.current}}))}})},St=ke.current;return St&&(St.addEventListener("mousedown",sn),St.addEventListener("touchstart",sn)),()=>{St&&(St.removeEventListener("mousedown",sn),St.removeEventListener("touchstart",sn))}},[be,Ge,he]);const at=(0,Ae.Z)(me);(0,s.useEffect)(()=>{if(me&&at?.x!==me.x&&at?.y!==me.y){const Dt={x:Fe(me.x,Ge.left,Ge.right),y:Fe(me.y,Ge.top,Ge.bottom)};ot({position:Dt,isPanning:!1}),Ke.current=Dt,pt.current=Dt}},[me,at,Ge,Ke,pt]);let xt=je.position;return me&&at?.x!==me.x&&at?.y!==me.y&&(xt=me),{state:{...je,position:{x:Fe(xt.x,Ge.left,Ge.right),y:Fe(xt.y,Ge.top,Ge.bottom)}},ref:ke}}function Fe(be,Te,me){return Math.min(Math.max(be,Te??-1/0),me??1/0)}function Xe(be){if(be.changedTouches){const Te=be;return{x:Te.changedTouches[0].clientX,y:Te.changedTouches[0].clientY}}else{const Te=be;return{x:Te.clientX,y:Te.clientY}}}const Qe={stepDown:be=>be/1.5,stepUp:be=>be*1.5,min:.13,max:2.25};function ct({stepUp:be,stepDown:Te,min:me,max:he}=Qe){const De=(0,s.useRef)(null),[$e,ke]=(0,s.useState)(1),tt=(0,s.useCallback)(()=>{$e<(he??1/0)&&ke(be($e))},[$e,be,he]),Ge=(0,s.useCallback)(()=>{$e>(me??-1/0)&&ke(Te($e))},[$e,Te,me]),dt=(0,s.useCallback)(function(pt){if(pt.ctrlKey||pt.metaKey){if(pt.preventDefault(),ke(Math.min(Math.max(me??-1/0,$e+Math.min(pt.deltaY,2)*-.01),he??1/0)),pt.deltaY<0){const Ke=$e+Math.max(pt.deltaY,-4)*-.015;ke(Math.max(me??-1/0,Ke))}else if(pt.deltaY>0){const Ke=$e+Math.min(pt.deltaY,4)*-.015;ke(Math.min(he??1/0,Ke))}}},[me,he,$e]);return(0,s.useEffect)(()=>{if(!De.current)return;const pt=De.current;return pt.addEventListener("wheel",dt,{passive:!1}),()=>{pt&&pt.removeEventListener("wheel",dt)}},[dt]),{onStepUp:tt,onStepDown:Ge,scale:Math.max(Math.min($e,he??1/0),me??-1/0),isMax:$e>=(he??1/0),isMin:$e<=(me??-1/0),ref:De}}const ht=be=>({wrapper:t.css`
    label: wrapper;
    height: 100%;
    width: 100%;
    overflow: hidden;
    position: relative;
  `,svg:t.css`
    label: svg;
    height: 100%;
    width: 100%;
    overflow: visible;
    font-size: 10px;
    cursor: move;
  `,svgPanning:t.css`
    label: svgPanning;
    user-select: none;
  `,noDataMsg:t.css`
    height: 100%;
    width: 100%;
    display: grid;
    place-items: center;
    font-size: ${be.typography.h4.fontSize};
    color: ${be.colors.text.secondary};
  `,mainGroup:t.css`
    label: mainGroup;
    will-change: transform;
  `,viewControls:t.css`
    label: viewControls;
    position: absolute;
    left: 2px;
    bottom: 3px;
    right: 0;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    pointer-events: none;
  `,legend:t.css`
    label: legend;
    background: ${be.colors.background.secondary};
    box-shadow: ${be.shadows.z1};
    padding-bottom: 5px;
    margin-right: 10px;
  `,viewControlsWrapper:t.css`
    margin-left: auto;
  `,alert:t.css`
    label: alert;
    padding: 5px 8px;
    font-size: 10px;
    text-shadow: 0 1px 0 rgba(0, 0, 0, 0.2);
    border-radius: ${be.shape.borderRadius()};
    align-items: center;
    position: absolute;
    top: 0;
    right: 0;
    background: ${be.colors.warning.main};
    color: ${be.colors.warning.contrastText};
  `,loadingWrapper:t.css`
    label: loadingWrapper;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
  `}),ft=200;function Re({getLinks:be,dataFrames:Te,nodeLimit:me}){const he=me||ft,{edges:De,nodes:$e}=(0,ne.Y)(Te),[ke,{width:tt,height:Ge}]=(0,i.Z)(),[dt,pt]=(0,s.useState)(ie),Ke=$e[0],je=De[0],ot=(0,s.useMemo)(()=>(0,m.HB)(Ke,je),[je,Ke]),{nodeHover:at,setNodeHover:xt,clearNodeHover:Dt,edgeHover:wt,setEdgeHover:sn,clearEdgeHover:mn}=Ye(),[Dn,Rn]=(0,s.useState)([]);(0,s.useEffect)(()=>{let zn=[];at?zn=(0,m.uX)(ot.nodes,ot.edges,at):wt&&(zn=(0,m.MP)(ot.nodes,ot.edges,wt)),Rn(zn)},[at,wt,ot]);const[St,At]=(0,s.useState)(),Wt=(0,s.useCallback)((zn,$n)=>At($n.node.id),[At]),{nodes:Qt,edges:jt,markers:Xt,bounds:tn,hiddenNodesCount:on,loading:dn}=fe(ot.nodes,ot.edges,dt,he,tt,St),$t=et(dt,Qt,St),{panRef:qt,zoomRef:Vt,onStepUp:nn,onStepDown:un,isPanning:En,position:cn,scale:wn,isMaxZoom:Gn,isMinZoom:Nn}=Le(tn,$t),{onEdgeOpen:Wn,onNodeOpen:qn,MenuComponent:ga}=_(be,Ke,je,dt,pt,At),ea=(0,f.wW)(ht),ca=(0,s.useCallback)(zn=>{ke(zn),Vt.current=zn},[ke,Vt]),ba=_e(St);return s.createElement("div",{ref:ca,className:ea.wrapper},dn?s.createElement("div",{className:ea.loadingWrapper},"Computing layout\xA0",s.createElement(c.$,null)):null,Te.length&&ot.nodes.length?s.createElement("svg",{ref:qt,viewBox:`${-(tt/2)} ${-(Ge/2)} ${tt} ${Ge}`,className:l()(ea.svg,En&&ea.svgPanning)},s.createElement("g",{className:ea.mainGroup,style:{transform:`scale(${wn}) translate(${Math.floor(cn.x)}px, ${Math.floor(cn.y)}px)`}},s.createElement(u,null),!dt.gridLayout&&s.createElement(Pe,{edges:jt,nodeHoveringId:at,edgeHoveringId:wt,onClick:Wn,onMouseEnter:sn,onMouseLeave:mn}),s.createElement(nt,{nodes:Qt,onMouseEnter:xt,onMouseLeave:Dt,onClick:qn,hoveringIds:Dn||[ba]}),s.createElement(le,{markers:Xt||[],onClick:Wt}),!dt.gridLayout&&s.createElement(Oe,{edges:jt,nodeHoveringId:at,edgeHoveringId:wt}))):s.createElement("div",{className:ea.noDataMsg},"No data"),s.createElement("div",{className:ea.viewControls},Qt.length?s.createElement("div",{className:ea.legend},s.createElement(y,{sortable:dt.gridLayout,nodes:Qt,sort:dt.sort,onSort:zn=>{pt({...dt,sort:zn})}})):null,s.createElement("div",{className:ea.viewControlsWrapper},s.createElement(Y,{config:dt,onConfigChange:zn=>{zn.gridLayout!==dt.gridLayout&&At(void 0),pt(zn)},onMinus:un,onPlus:nn,scale:wn,disableZoomIn:Gn,disableZoomOut:Nn}))),on>0&&s.createElement("div",{className:ea.alert,"aria-label":"Nodes hidden warning"},s.createElement(o.J,{size:"sm",name:"info-circle"})," ",on," nodes are hidden for performance reasons."),ga)}const nt=(0,s.memo)(function(Te){return s.createElement(s.Fragment,null,Te.nodes.map(me=>s.createElement(A,{key:me.id,node:me,onMouseEnter:Te.onMouseEnter,onMouseLeave:Te.onMouseLeave,onClick:Te.onClick,hovering:!Te.hoveringIds||Te.hoveringIds.length===0?"default":Te.hoveringIds?.includes(me.id)?"active":"inactive"})))}),le=(0,s.memo)(function(Te){return s.createElement(s.Fragment,null,Te.markers.map(me=>s.createElement(M,{key:"marker-"+me.node.id,marker:me,onClick:Te.onClick})))}),Pe=(0,s.memo)(function(Te){return s.createElement(s.Fragment,null,Te.edges.map(me=>s.createElement(r,{key:me.id,edge:me,hovering:me.source.id===Te.nodeHoveringId||me.target.id===Te.nodeHoveringId||Te.edgeHoveringId===me.id,onClick:Te.onClick,onMouseEnter:Te.onMouseEnter,onMouseLeave:Te.onMouseLeave})))}),Oe=(0,s.memo)(function(Te){return s.createElement(s.Fragment,null,Te.edges.map((me,he)=>{const De=me.source.id===Te.nodeHoveringId||me.target.id===Te.nodeHoveringId||Te.edgeHoveringId===me.id,$e=me.mainStat||me.secondaryStat;return De&&$e&&s.createElement(g,{key:me.id,edge:me})}))});function Le(be,Te){const{scale:me,onStepDown:he,onStepUp:De,ref:$e,isMax:ke,isMin:tt}=ct(),{state:Ge,ref:dt}=Se({scale:me,bounds:be,focus:Te}),{position:pt,isPanning:Ke}=Ge;return{zoomRef:$e,panRef:dt,position:pt,isPanning:Ke,scale:me,onStepDown:he,onStepUp:De,isMaxZoom:ke,isMinZoom:tt}}function Ye(){const[be,Te]=(0,s.useState)(void 0),me=(0,s.useCallback)(()=>Te(void 0),[Te]),[he,De]=(0,s.useState)(void 0),$e=(0,s.useCallback)(()=>De(void 0),[De]);return{nodeHover:be,setNodeHover:Te,clearNodeHover:me,edgeHover:he,setEdgeHover:De,clearEdgeHover:$e}}},85506:(Z,O,e)=>{"use strict";e.d(O,{Y:()=>n});var t=e(68404);function n(l){return(0,t.useMemo)(()=>l.reduce((s,i)=>(i.fields.filter(c=>c.name==="source").length?s.edges.push(i):s.nodes.push(i),s),{edges:[],nodes:[]}),[l])}},68545:(Z,O,e)=>{"use strict";e.d(O,{Ee:()=>M,Ew:()=>a,F:()=>c,HB:()=>r,MP:()=>R,Tz:()=>D,dM:()=>f,lr:()=>o,uX:()=>B});var t=e(71895),n=e(5367),l=e(14582),s=e(19695),i=e(66926);function f(w,A){const I=w.x2-w.x1,F=w.y2-w.y1,K=Math.sqrt(I*I+F*F),W=Math.max((K-A)/K,0),U=I*W,N=F*W,S=I-U,Y=F-N,Q=w.x1+S/2,z=w.y1+Y/2;return{x1:Q,y1:z,x2:Q+U,y2:z+N}}function c(w){const A={...w,fields:w.fields.map(F=>({...F,name:F.name.toLowerCase()}))},I=new t.N(A);return{id:I.getFieldByName(n.z.id.toLowerCase()),title:I.getFieldByName(n.z.title.toLowerCase()),subTitle:I.getFieldByName(n.z.subTitle.toLowerCase()),mainStat:I.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:I.getFieldByName(n.z.secondaryStat.toLowerCase()),arc:m(w,n.z.arc),details:m(w,n.z.detail),color:I.getFieldByName(n.z.color),icon:I.getFieldByName(n.z.icon)}}function o(w){const A={...w,fields:w.fields.map(F=>({...F,name:F.name.toLowerCase()}))},I=new t.N(A);return{id:I.getFieldByName(n.z.id.toLowerCase()),source:I.getFieldByName(n.z.source.toLowerCase()),target:I.getFieldByName(n.z.target.toLowerCase()),mainStat:I.getFieldByName(n.z.mainStat.toLowerCase()),secondaryStat:I.getFieldByName(n.z.secondaryStat.toLowerCase()),details:m(w,n.z.detail.toLowerCase())}}function m(w,A){return w.fields.filter(I=>I.name.match(new RegExp("^"+A)))}function r(w,A){if(!(A||w))return{nodes:[],edges:[]};if(w){const I=c(w);if(!I.id)throw new Error("id field is required for nodes data frame.");const F={};for(let W=0;W<I.id.values.length;W++){const U=I.id.values.get(W);F[U]=h(U,I,W)}let K=A?u(A,o(A)):[];for(const W of K)F[W.target].incoming++;return{nodes:Object.values(F),edges:K,legend:I.arc.map(W=>({color:W.config.color?.fixedColor??"",name:W.config.displayName||W.name}))}}else{A=A;const I={},F=o(A);let K=u(A,F);for(let U=0;U<K.length;U++){const N=K[U],{source:S,target:Y}=p(F,U);I[Y.id]=I[Y.id]||Y,I[S.id]=I[S.id]||S,d(F.mainStat)&&(I[Y.id].mainStatNumeric=(I[Y.id].mainStatNumeric??0)+F.mainStat.values.get(U)),d(F.secondaryStat)&&(I[Y.id].secondaryStatNumeric=(I[Y.id].secondaryStatNumeric??0)+F.secondaryStat.values.get(U)),I[N.target].incoming++}return{nodes:g(I,F),edges:K}}}function u(w,A){if(!A.id)throw new Error("id field is required for edges data frame.");return A.id.values.toArray().map((I,F)=>{const K=A.target?.values.get(F),W=A.source?.values.get(F);return{id:I,dataFrameRowIndex:F,source:W,target:K,mainStat:A.mainStat?a(A.mainStat.config,A.mainStat.values.get(F)):"",secondaryStat:A.secondaryStat?a(A.secondaryStat.config,A.secondaryStat.values.get(F)):""}})}function d(w){return w&&w.type===l.fS.number}function g(w,A){const I=new s.G,F=new s.G,K=d(A.secondaryStat)?{...A.secondaryStat,values:I}:void 0,W=d(A.mainStat)?{...A.mainStat,values:F}:void 0;return Object.values(w).map((U,N)=>{if(W||K){const S={...U};return W&&(S.mainStat=W,F.add(U.mainStatNumeric),S.dataFrameRowIndex=N),K&&(S.secondaryStat=K,I.add(U.secondaryStatNumeric),S.dataFrameRowIndex=N),S}return U})}function p(w,A){const I=w.target?.values.get(A),F=w.source?.values.get(A);return{target:E(I,A),source:E(F,A)}}function E(w,A){return{id:w,title:w,subTitle:"",dataFrameRowIndex:A,incoming:0,arcSections:[]}}function h(w,A,I){return{id:w,title:A.title?.values.get(I)||"",subTitle:A.subTitle?.values.get(I)||"",dataFrameRowIndex:I,incoming:0,mainStat:A.mainStat,secondaryStat:A.secondaryStat,arcSections:A.arc,color:A.color,icon:A.icon?.values.get(I)||""}}function a(w,A){if(typeof A=="string")return A;{const I=w.decimals||2;return Number.isFinite(A)?A.toFixed(I)+(w.unit?" "+w.unit:""):""}}function v(w){const A=y();for(let I=0;I<w;I++)A.add(x(I));return A}function x(w){return{id:w.toString(),title:`service:${w}`,subtitle:"service",arc__success:.5,arc__errors:.5,mainstat:.1,secondarystat:2,color:.5,icon:"database"}}function y(){const w={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.title]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.subTitle]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.arc+"success"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"green"}}},[NodeGraphDataFrameFieldNames.arc+"errors"]:{values:new ArrayVector,type:FieldType.number,config:{color:{fixedColor:"red"}}},[NodeGraphDataFrameFieldNames.color]:{values:new ArrayVector,type:FieldType.number,config:{color:{mode:"continuous-GrYlRd"}}},[NodeGraphDataFrameFieldNames.icon]:{values:new ArrayVector,type:FieldType.string}};return new MutableDataFrame({name:"nodes",fields:Object.keys(w).map(A=>({...w[A],name:A}))})}function C(w){const A=P();for(const I of w)A.add({id:I.source+"--"+I.target,...I});return A}function P(){const w={[NodeGraphDataFrameFieldNames.id]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.source]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.target]:{values:new ArrayVector,type:FieldType.string},[NodeGraphDataFrameFieldNames.mainStat]:{values:new ArrayVector,type:FieldType.number},[NodeGraphDataFrameFieldNames.secondaryStat]:{values:new ArrayVector,type:FieldType.number}};return new MutableDataFrame({name:"edges",fields:Object.keys(w).map(A=>({...w[A],name:A}))})}function D(w){if(w.length===0)return{top:0,right:0,bottom:0,left:0,center:{x:0,y:0}};const A=w.reduce((K,W)=>(W.x>K.right&&(K.right=W.x),W.x<K.left&&(K.left=W.x),W.y>K.bottom&&(K.bottom=W.y),W.y<K.top&&(K.top=W.y),K),{top:1/0,right:-1/0,bottom:-1/0,left:1/0}),I=A.top+(A.bottom-A.top)/2,F=A.left+(A.right-A.left)/2;return{...A,center:{x:F,y:I}}}function M(w,A){let I=w.filter(F=>!!(F.meta?.preferredVisualisationType==="nodeGraph"||F.name==="nodes"||F.name==="edges"||F.refId==="nodes"||F.refId==="edges"||new t.N(F).getFieldByName(n.z.id)));return A&&(I=b(I,A)),I}const b=(w,A)=>w.map(I=>{if(new t.N(I).getFieldByName(n.z.source.toLowerCase())){if(A?.edges?.mainStatUnit){const K=I.fields.find(W=>W.name.toLowerCase()===n.z.mainStat);K&&(K.config={...K.config,unit:A.edges.mainStatUnit})}if(A?.edges?.secondaryStatUnit){const K=I.fields.find(W=>W.name.toLowerCase()===n.z.secondaryStat);K&&(K.config={...K.config,unit:A.edges.secondaryStatUnit})}}else{if(A?.nodes?.mainStatUnit){const K=I.fields.find(W=>W.name.toLowerCase()===n.z.mainStat);K&&(K.config={...K.config,unit:A.nodes.mainStatUnit})}if(A?.nodes?.secondaryStatUnit){const K=I.fields.find(W=>W.name.toLowerCase()===n.z.secondaryStat);K&&(K.config={...K.config,unit:A.nodes.secondaryStatUnit})}if(A?.nodes?.arcs?.length)for(const K of A.nodes.arcs){const W=I.fields.find(U=>U.name.toLowerCase()===K.field);W&&K.color&&(W.config={...W.config,color:{fixedColor:K.color,mode:i.S.Fixed}})}}return I}),R=(w,A,I)=>{const F=A.find(K=>K.id===I);return F?[...new Set(w.filter(K=>F.source===K.id||F.target===K.id).map(K=>K.id))]:[]},B=(w,A,I)=>{const F=w.find(K=>K.id===I);if(F){const K=A.filter(W=>W.source===F.id||W.target===F.id);return[...new Set(K.flatMap(W=>w.filter(U=>W.source===U.id||W.target===U.id).map(U=>U.id)))]}return[]}},30383:(Z,O,e)=>{"use strict";e.d(O,{h:()=>c,j:()=>f});var t=e(35363),n=e(21760),l=e(89890),s=e(29076),i=e(40538);function f(o,m=!0){const r=["Value options"];o.addRadio({path:"reduceOptions.values",name:"Show",description:"Calculate a single value per column or series or show each row",settings:{options:[{value:!1,label:"Calculate"},{value:!0,label:"All values"}]},category:r,defaultValue:!1}),o.addNumberInput({path:"reduceOptions.limit",name:"Limit",description:"Max number of rows to display",category:r,settings:{placeholder:"25",integer:!0,min:1,max:5e3},showIf:u=>u.reduceOptions.values===!0}),o.addCustomEditor({id:"reduceOptions.calcs",path:"reduceOptions.calcs",name:"Calculation",description:"Choose a reducer function / calculation",category:r,editor:t.S.get("stats-picker").editor,defaultValue:[n.gz.lastNotNull],showIf:u=>u.reduceOptions.values===!1}),m&&o.addSelect({path:"reduceOptions.fields",name:"Fields",description:"Select the fields that should be included in the panel",category:r,settings:{allowCustomValue:!0,options:[],getOptions:async u=>{const d=[{value:"",label:"Numeric Fields"},{value:"/.*/",label:"All Fields"}];if(u&&u.data)for(const g of u.data)for(const p of g.fields){const E=(0,l.C)(p,g,u.data),h=`/^${(0,s.GE)(E)}$/`;d.push({value:h,label:E})}return Promise.resolve(d)}},defaultValue:""})}function c(o,m){o.addRadio({path:"orientation",name:"Orientation",description:"Layout orientation",category:m,settings:{options:[{value:i.wm.Auto,label:"Auto"},{value:i.wm.Horizontal,label:"Horizontal"},{value:i.wm.Vertical,label:"Vertical"}]},defaultValue:i.wm.Auto})}},98967:(Z,O,e)=>{"use strict";e.r(O),e.d(O,{plugin:()=>P});var t=e(48513),n=e(40538),l=e(25272),s=e(50954),i=e(66926);const f=(D,M,b)=>{const R=(0,s.ZH)(D,M,b);if(b.angular&&(M==="singlestat"||M==="grafana-singlestat-panel")){const B=b.angular;if(R.graphMode=n.IG.None,B.sparkline&&B.sparkline.show&&(R.graphMode=n.IG.Area),B.colorBackground)R.colorMode=n.pc.Background;else if(B.colorValue)R.colorMode=n.pc.Value;else if(R.colorMode=n.pc.None,B.sparkline?.lineColor&&R.graphMode===n.IG.Area){const w=D.fieldConfig??{};w.defaults.color={mode:i.S.Fixed,fixedColor:B.sparkline.lineColor},D.fieldConfig=w}B.valueName==="name"&&(R.textMode=n.jG.Name)}return R};var c=e(82897),o=e(68404),m=e(14582),r=e(17128),u=e(36998),d=e(57426),g=e(18543),p=e(4387),E=e(47694);class h extends o.PureComponent{constructor(){super(...arguments),this.renderComponent=(M,b)=>{const{timeRange:R,options:B}=this.props,{value:w,alignmentFactors:A,width:I,height:F,count:K,orientation:W}=M,{openMenu:U,targetClassName:N}=b;let S=w.sparkline;return S&&(S.timeRange=R),o.createElement(d.w6,{value:w.display,count:K,sparkline:S,colorMode:B.colorMode,graphMode:B.graphMode,justifyMode:B.justifyMode,textMode:this.getTextMode(),alignmentFactors:A,parentOrientation:W,text:B.text,width:I,height:F,theme:E.vc.theme2,onClick:U,className:N})},this.renderValue=M=>{const{value:b}=M,{getLinks:R,hasLinks:B}=b;return B&&R?o.createElement(g.V,{links:R},w=>this.renderComponent(M,w)):this.renderComponent(M,{})},this.getValues=()=>{const{data:M,options:b,replaceVariables:R,fieldConfig:B,timeZone:w}=this.props;let A;for(let I of M.series)for(let F of I.fields){let{config:K}=F;if(F.type===m.fS.number){if(F.state?.range)continue;!A&&(!(0,c.isNumber)(K.min)||!(0,c.isNumber)(K.max))&&(A=(0,u.Xu)(M.series));const W=K.min??A.min,U=K.max??A.max;F.state=F.state??{},F.state.range={min:W,max:U,delta:U-W}}}return(0,r.nG)({fieldConfig:B,reduceOptions:b.reduceOptions,replaceVariables:R,theme:E.vc.theme2,data:M.series,sparkline:b.graphMode!==n.IG.None,timeZone:w})}}getTextMode(){const{options:M,fieldConfig:b,title:R}=this.props;return M.textMode===n.jG.Auto&&(b.defaults.displayName||!R)?n.jG.ValueAndName:M.textMode}render(){const{height:M,options:b,width:R,data:B,renderCounter:w}=this.props;return o.createElement(p.Q,{getValues:this.getValues,getAlignmentFactors:r.sg,renderValue:this.renderValue,width:R,height:M,source:B,itemSpacing:3,renderCounter:w,autoGrid:!0,orientation:b.orientation})}}var a=e(30383);const v=Object.freeze([0,0]),x={colorMode:n.pc.Value,graphMode:n.IG.Area,justifyMode:n.ap.Auto,textMode:n.jG.Auto};var y=e(26410);class C{getSuggestionsForData(M){const{dataSummary:b}=M;if(!b.hasData)return;const R=M.getListAppender({name:y.y.Stat,pluginId:"stat",options:{},fieldConfig:{defaults:{unit:"short",custom:{}},overrides:[]},cardOptions:{previewModifier:B=>{B.options.reduceOptions.values&&(B.options.reduceOptions.limit=1)}}});b.hasStringField&&b.hasNumberField&&b.frameCount===1&&b.rowCountTotal<10&&(R.append({name:y.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"}}}),R.append({name:y.y.StatColoredBackground,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.Background}})),b.stringFieldCount===1&&b.frameCount===1&&b.rowCountTotal<10&&b.fieldCount===1&&R.append({name:y.y.Stat,options:{reduceOptions:{values:!0,calcs:[],fields:"/.*/"},colorMode:n.pc.None}}),b.hasNumberField&&b.hasTimeField&&(R.append({options:{reduceOptions:{values:!1,calcs:["lastNotNull"]}}}),R.append({name:y.y.StatColoredBackground,options:{reduceOptions:{values:!1,calcs:["lastNotNull"]},graphMode:n.IG.None,colorMode:n.pc.Background}}))}}const P=new t.c(h).useFieldConfig().setPanelOptions(D=>{const M=["Stat styles"];(0,a.j)(D),(0,a.h)(D,M),l.Z(D),D.addSelect({path:"textMode",name:"Text mode",description:"Control if name and value is displayed or just name",category:M,settings:{options:[{value:n.jG.Auto,label:"Auto"},{value:n.jG.Value,label:"Value"},{value:n.jG.ValueAndName,label:"Value and name"},{value:n.jG.Name,label:"Name"},{value:n.jG.None,label:"None"}]},defaultValue:x.textMode}),D.addSelect({path:"colorMode",name:"Color mode",defaultValue:n.pc.Value,category:M,settings:{options:[{value:n.pc.None,label:"None"},{value:n.pc.Value,label:"Value"},{value:n.pc.Background,label:"Background Gradient"},{value:n.pc.BackgroundSolid,label:"Background Solid"}]}}).addRadio({path:"graphMode",name:"Graph mode",description:"Stat panel graph / sparkline mode",category:M,defaultValue:x.graphMode,settings:{options:[{value:n.IG.None,label:"None"},{value:n.IG.Area,label:"Area"}]}}).addRadio({path:"justifyMode",name:"Text alignment",defaultValue:x.justifyMode,category:M,settings:{options:[{value:n.ap.Auto,label:"Auto"},{value:n.ap.Center,label:"Center"}]}})}).setNoPadding().setPanelChangeHandler(f).setSuggestionsSupplier(new C).setMigrationHandler(s.rD)},66683:(Z,O,e)=>{"use strict";e.d(O,{j:()=>m});var t=e(68404),n=e(52081),l=e(2594),s=e(53217),i=e(8180);const f=[{label:"Solid",value:"solid"},{label:"Dash",value:"dash"},{label:"Dots",value:"dot"}],c=["10, 10","10, 15","10, 20","10, 25","10, 30","10, 40","15, 10","20, 10","25, 10","30, 10","40, 10","50, 10","5, 10","30, 3, 3"].map(u=>({label:u,value:u})),o=["0, 10","0, 20","0, 30","0, 40","0, 3, 3"].map(u=>({label:u,value:u})),m=({value:u,onChange:d})=>{const g=(0,t.useMemo)(()=>u?.fill==="dash"?c:o,[u]),p=(0,t.useMemo)(()=>{if(!u?.dash?.length)return g[0];const E=u.dash?.join(", "),h=g.find(a=>a.value===E);return h||{label:E,value:E}},[u,g]);return t.createElement(n.Lh,null,t.createElement(l.S,{value:u?.fill||"solid",options:f,onChange:E=>{let h;E==="dot"?h=r(o[0].value):E==="dash"&&(h=r(c[0].value)),d({...u,fill:E,dash:h})}}),u?.fill&&u?.fill!=="solid"&&t.createElement(t.Fragment,null,t.createElement(s.Ph,{allowCustomValue:!0,options:g,value:p,width:20,onChange:E=>{d({...u,dash:r(E.value??"")})},formatCreateLabel:E=>`Segments: ${r(E).join(", ")}`}),t.createElement("div",null,"\xA0",t.createElement("a",{title:"The input expects a segment list",href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Parameters",target:"_blank",rel:"noreferrer"},t.createElement(i.h,{name:"question-circle"})))))};function r(u){const d=[];for(const g of u.split(/(?:,| )+/)){const p=Number.parseInt(g,10);isNaN(p)||d.push(p)}return d}},49616:(Z,O,e)=>{"use strict";e.d(O,{c:()=>c});var t=e(68404),n=e(33180),l=e(52081),s=e(2594),i=e(46967);const f=[{label:"Never",value:!1},{label:"Always",value:!0},{label:"Threshold",value:36e5}],c=({value:o,onChange:m})=>{const r=typeof o=="number",u=r?n.secondsToHms(o/1e3):void 0;f[2].value=r?o:36e5;const d=E=>{let h=!1;if(E)try{h=n.intervalToSeconds(E)*1e3}catch(a){console.warn("ERROR",a)}m(h)},g=E=>{E.key==="Enter"&&d(E.target.value)},p=E=>{d(E.target.value)};return t.createElement(l.Lh,null,t.createElement(s.S,{value:o,options:f,onChange:m}),r&&t.createElement(i.I,{autoFocus:!1,placeholder:"never",width:10,defaultValue:u,onKeyDown:g,onBlur:p,prefix:t.createElement("div",null,"<"),spellCheck:!1}))}},74855:(Z,O,e)=>{"use strict";e.d(O,{F:()=>l});var t=e(68404),n=e(53217);const l=({item:s,value:i,onChange:f,id:c})=>{const o=(0,t.useCallback)(m=>{f({mode:m.value})},[f]);return t.createElement(n.Ph,{inputId:c,value:i.mode,options:s.settings.options,onChange:o})}},56703:(Z,O,e)=>{"use strict";e.d(O,{F:()=>E,r:()=>g});var t=e(68061),n=e(66926),l=e(14582),s=e(78798),i=e(40538),f=e(26372),c=e(22110),o=e(34315),m=e(91511),r=e(66683),u=e(49616),d=e(74855);const g={drawStyle:i.l8.Line,lineInterpolation:i.KC.Linear,lineWidth:1,fillOpacity:0,gradientMode:i.FI.None,barAlignment:i.pu.Center,stacking:{mode:i.o0.None,group:"A"},axisGridShow:!0,axisCenteredZero:!1},p=["Graph styles"];function E(h){return{standardOptions:{[t.qb.Color]:{settings:{byValueSupport:!0,bySeriesSupport:!0,preferThresholdsMode:!1},defaultValue:{mode:n.S.PaletteClassic}}},useCustomConfig:a=>{a.addRadio({path:"drawStyle",name:"Style",category:p,defaultValue:h.drawStyle,settings:{options:f.q.drawStyle}}).addRadio({path:"lineInterpolation",name:"Line interpolation",category:p,defaultValue:h.lineInterpolation,settings:{options:f.q.lineInterpolation},showIf:v=>v.drawStyle===i.l8.Line}).addRadio({path:"barAlignment",name:"Bar alignment",category:p,defaultValue:h.barAlignment,settings:{options:f.q.barAlignment},showIf:v=>v.drawStyle===i.l8.Bars}).addSliderInput({path:"lineWidth",name:"Line width",category:p,defaultValue:h.lineWidth,settings:{min:0,max:10,step:1,ariaLabelForHandle:"Line width"},showIf:v=>v.drawStyle!==i.l8.Points}).addSliderInput({path:"fillOpacity",name:"Fill opacity",category:p,defaultValue:h.fillOpacity,settings:{min:0,max:100,step:1,ariaLabelForHandle:"Fill opacity"},showIf:v=>v.drawStyle!==i.l8.Points}).addRadio({path:"gradientMode",name:"Gradient mode",category:p,defaultValue:f.q.fillGradient[0].value,settings:{options:f.q.fillGradient},showIf:v=>v.drawStyle!==i.l8.Points}).addFieldNamePicker({path:"fillBelowTo",name:"Fill below to",category:p,hideFromDefaults:!0,settings:{filter:v=>v.type===l.fS.number}}).addCustomEditor({id:"lineStyle",path:"lineStyle",name:"Line style",category:p,showIf:v=>v.drawStyle===i.l8.Line,editor:r.j,override:r.j,process:s.kG,shouldApply:v=>v.type===l.fS.number}).addCustomEditor({id:"spanNulls",path:"spanNulls",name:"Connect null values",category:p,defaultValue:!1,editor:u.c,override:u.c,showIf:v=>v.drawStyle===i.l8.Line,shouldApply:v=>v.type!==l.fS.time,process:s.kG}).addRadio({path:"showPoints",name:"Show points",category:p,defaultValue:f.q.showPoints[0].value,settings:{options:f.q.showPoints},showIf:v=>v.drawStyle!==i.l8.Points}).addSliderInput({path:"pointSize",name:"Point size",category:p,defaultValue:5,settings:{min:1,max:40,step:1,ariaLabelForHandle:"Point size"},showIf:v=>v.showPoints!==i.Jp.Never||v.drawStyle===i.l8.Points}),c.V(a,h.stacking,p),a.addSelect({category:p,name:"Transform",path:"transform",settings:{options:[{label:"Constant",value:i.pR.Constant,description:"The first value will be shown as a constant line"},{label:"Negative Y",value:i.pR.NegativeY,description:"Flip the results to negative values on the y axis"}],isClearable:!0},hideFromDefaults:!0}),o.r(a,h),m.B(a),a.addCustomEditor({id:"thresholdsStyle",path:"thresholdsStyle",name:"Show thresholds",category:["Thresholds"],defaultValue:{mode:i.i3.Off},settings:{options:f.q.thresholdsDisplayModes},editor:d.F,override:d.F,process:s.kG,shouldApply:()=>!0})}}}},63073:()=>{"use strict";let Z=window.matchMedia;window.matchMedia=O=>{let e=Z(O);return e.addEventListener||(e.addEventListener=(t,n)=>{e.addListener(n)},e.removeEventListener=(t,n)=>{e.removeListener(n)}),e}},3153:(Z,O,e)=>{"use strict";e.d(O,{PQ:()=>l,WI:()=>i,h:()=>n,y0:()=>s});var t=e(7240);let n;function l(f){n=f}function s(){return!n||!n.getState?{templating:{...t.qM,lastKey:"key"}}:n.getState()}function i(f){if(!(!n||!n.getState))return n.dispatch(f)}},73757:(Z,O,e)=>{"use strict";e.d(O,{pC:()=>f,B5:()=>n,V5:()=>l,bf:()=>s,hw:()=>t,BL:()=>o,vT:()=>m,eL:()=>r});var t=(u=>(u[u.Admin=4]="Admin",u[u.Editor=2]="Editor",u[u.Member=0]="Member",u[u.Viewer=1]="Viewer",u))(t||{}),n=(u=>(u.Viewer="Viewer",u.Editor="Editor",u.Admin="Admin",u))(n||{}),l=(u=>(u[u.View=1]="View",u[u.Edit=2]="Edit",u[u.Admin=4]="Admin",u))(l||{}),s=(u=>(u.View="View",u.Edit="Edit",u.Admin="Admin",u))(s||{}),i=(u=>(u[u.Query=1]="Query",u[u.Admin=2]="Admin",u))(i||{}),f=(u=>(u.Team="Team",u.User="User",u.Viewer="Viewer",u.Editor="Editor",u))(f||{});const c=[{value:1,label:"Query",description:"Can query data source."}],o=[{value:"Team",label:"Team"},{value:"User",label:"User"},{value:"Viewer",label:"Everyone With Viewer Role"},{value:"Editor",label:"Everyone With Editor Role"}],m=[{value:1,label:"View",description:"Can view dashboards."},{value:2,label:"Edit",description:"Can add, edit and delete dashboards."},{value:4,label:"Admin",description:"Can add/remove permissions and can add, edit and delete dashboards."}],r=[{value:t.Member,label:"Member",description:"Is team member"},{value:t.Admin,label:"Admin",description:"Can add/remove permissions, members and delete team."}]},20352:()=>{"use strict"},47622:()=>{"use strict"},18285:()=>{"use strict"},56968:()=>{"use strict"},45984:(Z,O,e)=>{"use strict";e.d(O,{Dn:()=>P,Eb:()=>x,GL:()=>c,GT:()=>g,Im:()=>h,Jd:()=>M,OW:()=>D,QI:()=>v,Qt:()=>a,RB:()=>R,VJ:()=>C,Wj:()=>r,Xw:()=>m,Yr:()=>w,_B:()=>u,_z:()=>p,hS:()=>d,le:()=>y,nq:()=>i,p8:()=>E,pO:()=>o,xF:()=>B,xt:()=>f,z:()=>b});var t=e(39253),n=e(62316);const l=(0,t.X)("ds-request-response"),s=(0,t.X)("ds-request-error"),i=(0,t.X)("template-variable-value-updated"),f=(0,t.X)("graph-click"),c=(0,t.X)("threshold-changed");class o extends n.m{}o.type="panel-queries-changed";class m extends n.m{}m.type="panel-transformations-changed";class r extends n.m{}r.type="panels-options-changed";class u extends n.m{}u.type="dashboard-panels-changed";class d extends n.m{}d.type="dashboard-meta-changed";class g extends n.m{}g.type="panel-directive-ready";class p extends n.m{}p.type="render";class E extends n.R{}E.type="zoom-out";var h=(A=>(A[A.Left=-1]="Left",A[A.Right=1]="Right",A))(h||{});class a extends n.R{}a.type="shift-time";class v extends n.m{}v.type="absolute-time";class x extends n.R{}x.type="remove-panel";class y extends n.R{}y.type="show-modal";class C extends n.R{}C.type="show-confirm-modal";class P extends n.R{}P.type="show-react-modal";class D extends n.m{}D.type="hide-modal";class M extends n.m{}M.type="dashboard-saved";class b extends n.R{}b.type="annotation-query-started";class R extends n.R{}R.type="annotation-query-finished";class B extends n.R{}B.type="panel-edit-started";class w extends n.R{}w.type="panel-edit-finished"},3032:(Z,O,e)=>{"use strict";e.d(O,{Kd:()=>t,f0:()=>n,zN:()=>s,zQ:()=>l});var t=(i=>(i.left="left",i.right="right",i))(t||{});const n=["lines","bars","points","stacked_lines","stacked_bars"];var l=(i=>(i.table="table",i.raw="raw",i))(l||{});const s=["table","raw"]},59784:()=>{"use strict"},81168:(Z,O,e)=>{"use strict";e.d(O,{AccessControlAction:()=>B,AppNotificationSeverity:()=>E,AppNotificationTimeout:()=>h,CoreEvents:()=>w,DashboardInitPhase:()=>f,DashboardRoutes:()=>i,EXPLORE_GRAPH_STYLES:()=>v.f0,ExploreId:()=>v.Kd,KioskMode:()=>c,OrgRole:()=>o.B5,PermissionLevelString:()=>o.bf,ServiceAccountStateFilter:()=>u,TABLE_RESULTS_STYLE:()=>v.zQ,TeamPermissionLevel:()=>o.hw,createAsyncThunk:()=>D,teamsPermissionLevels:()=>o.eL,timeoutMap:()=>a,useDispatch:()=>C,useSelector:()=>P});var t=e(28317),n=e(20352),l=e(88391),s=e(59784),i=(A=>(A.Home="home-dashboard",A.New="new-dashboard",A.Normal="normal-dashboard",A.Path="path-dashboard",A.Scripted="scripted-dashboard",A.Public="public-dashboard",A))(i||{}),f=(A=>(A.NotStarted="Not started",A.Fetching="Fetching",A.Services="Services",A.Failed="Failed",A.Completed="Completed",A))(f||{}),c=(A=>(A.TV="tv",A.Full="full",A))(c||{}),o=e(73757),m=e(47622),r=e(26945),u=(A=>(A.All="All",A.WithExpiredTokens="WithExpiredTokens",A.Disabled="Disabled",A))(u||{}),d=e(56968),g=e(89040),p=e(81146),E=(A=>(A.Success="success",A.Warning="warning",A.Error="error",A.Info="info",A))(E||{}),h=(A=>(A[A.Success=3e3]="Success",A[A.Warning=5e3]="Warning",A[A.Error=7e3]="Error",A))(h||{});const a={success:3e3,warning:5e3,error:7e3,info:3e3};var v=e(3032),x=e(62992),y=e(36635);const C=y.useDispatch,P=y.useSelector,D=(A,I,F)=>(0,x.hg)(A,I,F);var M=e(51904),b=e(18285),R=e(49400),B=(A=>(A.UsersRead="users:read",A.UsersWrite="users:write",A.UsersAuthTokenList="users.authtoken:read",A.UsersAuthTokenUpdate="users.authtoken:write",A.UsersPasswordUpdate="users.password:write",A.UsersDelete="users:delete",A.UsersCreate="users:create",A.UsersEnable="users:enable",A.UsersDisable="users:disable",A.UsersPermissionsUpdate="users.permissions:write",A.UsersLogout="users:logout",A.UsersQuotasList="users.quotas:read",A.UsersQuotasUpdate="users.quotas:write",A.ServiceAccountsRead="serviceaccounts:read",A.ServiceAccountsCreate="serviceaccounts:create",A.ServiceAccountsWrite="serviceaccounts:write",A.ServiceAccountsDelete="serviceaccounts:delete",A.ServiceAccountsPermissionsRead="serviceaccounts.permissions:read",A.ServiceAccountsPermissionsWrite="serviceaccounts.permissions:write",A.OrgsRead="orgs:read",A.OrgsPreferencesRead="orgs.preferences:read",A.OrgsWrite="orgs:write",A.OrgsPreferencesWrite="orgs.preferences:write",A.OrgsCreate="orgs:create",A.OrgsDelete="orgs:delete",A.OrgUsersRead="org.users:read",A.OrgUsersAdd="org.users:add",A.OrgUsersRemove="org.users:remove",A.OrgUsersWrite="org.users:write",A.LDAPUsersRead="ldap.user:read",A.LDAPUsersSync="ldap.user:sync",A.LDAPStatusRead="ldap.status:read",A.DataSourcesExplore="datasources:explore",A.DataSourcesRead="datasources:read",A.DataSourcesCreate="datasources:create",A.DataSourcesWrite="datasources:write",A.DataSourcesDelete="datasources:delete",A.DataSourcesPermissionsRead="datasources.permissions:read",A.DataSourcesCachingRead="datasources.caching:read",A.DataSourcesInsightsRead="datasources.insights:read",A.ActionServerStatsRead="server.stats:read",A.ActionTeamsCreate="teams:create",A.ActionTeamsDelete="teams:delete",A.ActionTeamsRead="teams:read",A.ActionTeamsWrite="teams:write",A.ActionTeamsPermissionsRead="teams.permissions:read",A.ActionTeamsPermissionsWrite="teams.permissions:write",A.ActionRolesList="roles:read",A.ActionTeamsRolesList="teams.roles:read",A.ActionTeamsRolesAdd="teams.roles:add",A.ActionTeamsRolesRemove="teams.roles:remove",A.ActionUserRolesList="users.roles:read",A.ActionUserRolesAdd="users.roles:add",A.ActionUserRolesRemove="users.roles:remove",A.DashboardsRead="dashboards:read",A.DashboardsWrite="dashboards:write",A.DashboardsDelete="dashboards:delete",A.DashboardsCreate="dashboards:create",A.DashboardsPermissionsRead="dashboards.permissions:read",A.DashboardsPermissionsWrite="dashboards.permissions:write",A.DashboardsPublicWrite="dashboards.public:write",A.FoldersRead="folders:read",A.FoldersWrite="folders:write",A.FoldersDelete="folders:delete",A.FoldersCreate="folders:create",A.FoldersPermissionsRead="folders.permissions:read",A.FoldersPermissionsWrite="folders.permissions:write",A.ActionSupportBundlesCreate="support.bundles:create",A.ActionSupportBundlesRead="support.bundles:read",A.ActionSupportBundlesDelete="support.bundles:delete",A.AlertingRuleCreate="alert.rules:create",A.AlertingRuleRead="alert.rules:read",A.AlertingRuleUpdate="alert.rules:write",A.AlertingRuleDelete="alert.rules:delete",A.AlertingInstanceCreate="alert.instances:create",A.AlertingInstanceUpdate="alert.instances:write",A.AlertingInstanceRead="alert.instances:read",A.AlertingNotificationsRead="alert.notifications:read",A.AlertingNotificationsWrite="alert.notifications:write",A.AlertingRuleExternalWrite="alert.rules.external:write",A.AlertingRuleExternalRead="alert.rules.external:read",A.AlertingInstancesExternalWrite="alert.instances.external:write",A.AlertingInstancesExternalRead="alert.instances.external:read",A.AlertingNotificationsExternalWrite="alert.notifications.external:write",A.AlertingNotificationsExternalRead="alert.notifications.external:read",A.AlertingProvisioningRead="alert.provisioning:read",A.AlertingProvisioningWrite="alert.provisioning:write",A.ActionAPIKeysRead="apikeys:read",A.ActionAPIKeysCreate="apikeys:create",A.ActionAPIKeysDelete="apikeys:delete",A.PluginsInstall="plugins:install",A.PluginsWrite="plugins:write",A))(B||{}),w=e(45984)},51904:()=>{"use strict"},88391:()=>{"use strict"},81146:()=>{"use strict"},89040:()=>{"use strict"},49400:()=>{"use strict"},26410:(Z,O,e)=>{"use strict";e.d(O,{y:()=>t});var t=(n=>(n.LineChart="Line chart",n.LineChartSmooth="Line chart smooth",n.LineChartGradientColorScheme="Line chart with gradient color scheme",n.AreaChart="Area chart",n.AreaChartStacked="Area chart stacked",n.AreaChartStackedPercent="Area chart 100% stacked",n.BarChart="Bar chart",n.BarChartGradientColorScheme="Bar chart with gradient color scheme",n.BarChartStacked="Bar chart stacked",n.BarChartStackedPercent="Bar chart 100% stacked",n.BarChartHorizontal="Bar chart horizontal",n.BarChartHorizontalStacked="Bar chart horizontal stacked",n.BarChartHorizontalStackedPercent="Bar chart horizontal 100% stacked",n.Candlestick="Candlestick",n.PieChart="Pie chart",n.PieChartDonut="Pie chart donut",n.Stat="Stat",n.StatColoredBackground="Stat colored background",n.Gauge="Gauge",n.GaugeNoThresholds="Gauge no thresholds",n.BarGaugeBasic="Bar gauge basic",n.BarGaugeLCD="Bar gauge LCD",n.Table="Table",n.StateTimeline="State timeline",n.StatusHistory="Status history",n.TextPanel="Text",n.DashboardList="Dashboard list",n.Logs="Logs",n))(t||{})},28317:()=>{"use strict"},46063:(Z,O,e)=>{"use strict";e.d(O,{ED:()=>f,I9:()=>l,T8:()=>o,Yb:()=>s,bj:()=>n,g0:()=>m,pz:()=>c,x_:()=>t});var t=(r=>(r.Firing="firing",r.Inactive="inactive",r.Pending="pending",r))(t||{}),n=(r=>(r.Normal="Normal",r.Alerting="Alerting",r.Pending="Pending",r.NoData="NoData",r.Error="Error",r))(n||{});function l(r){return Object.values(t).includes(r)}function s(r){return Object.values(n).some(u=>u===r)}function i(r){return r!==null&&typeof r<"u"&&!Object.values(t).includes(r)}function f(r){return i(r)?r.split(" ")[0]:r}var c=(r=>(r.Alerting="alerting",r.Recording="recording",r))(c||{}),o=(r=>(r.Cortex="Cortex",r.Mimir="Mimir",r.Prometheus="Prometheus",r.Thanos="Thanos",r))(o||{}),m=(r=>(r.Alerting="Alerting",r.NoData="NoData",r.KeepLastState="KeepLastState",r.OK="OK",r.Error="Error",r))(m||{})},26945:()=>{"use strict"},23932:Z=>{const O="    ";function e(s){let i="";return s&&Object.keys(s).forEach(function(f){i+=f+":"+s[f]+";"}),i}function t(s){function i(c){return'class="'+c+'"'}function f(c){return'style="'+e(s["."+c])+'"'}return s?f:i}function n(s){return s===null?"null":Array.isArray(s)?"array":typeof s=="string"&&/^https?:/.test(s)?"link":typeof s=="object"&&typeof s.toISOString=="function"?"date":typeof s}function l(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Z.exports=function(s,i){let f="";const c=t(i);let o=function(r,u,d,g){if(!r.length)return u+" "+d;let p=u+`
`;return f+=O,r.forEach(function(E,h){p+=f+g(E)+(h<r.length-1?",":"")+`
`}),f=f.slice(0,-O.length),p+f+d};function m(r){if(r===void 0)return"";switch(n(r)){case"boolean":return"<span "+c("json-markup-bool")+">"+r+"</span>";case"number":return"<span "+c("json-markup-number")+">"+r+"</span>";case"date":return'<span class="json-markup-string">"'+l(r.toISOString())+'"</span>';case"null":return"<span "+c("json-markup-null")+">null</span>";case"string":return"<span "+c("json-markup-string")+'>"'+l(r.replace(/\n/g,`
`+f))+'"</span>';case"link":return"<span "+c("json-markup-string")+'>"<a href="'+encodeURI(r)+'">'+l(r)+'</a>"</span>';case"array":return o(r,"[","]",m);case"object":const u=Object.keys(r).filter(function(d){return r[d]!==void 0});return o(u,"{","}",function(d){return"<span "+c("json-markup-key")+'>"'+l(d)+'":</span> '+m(r[d])})}return""}return"<div "+c("json-markup")+">"+m(s)+"</div>"}},26189:()=>{(function(Z){var O={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function e(t){var n={x:-1,y:-1,locked:!1};t.setCrosshair=function(f){if(!f)n.x=-1;else{var c=t.p2c(f);n.x=Math.max(0,Math.min(c.left,t.width())),n.y=Math.max(0,Math.min(c.top,t.height()))}t.triggerRedrawOverlay()},t.clearCrosshair=t.setCrosshair,t.lockCrosshair=function(f){f&&t.setCrosshair(f),n.locked=!0},t.unlockCrosshair=function(){n.locked=!1};function l(i){n.locked||n.x!=-1&&(n.x=-1,t.triggerRedrawOverlay())}function s(i){if(!n.locked){if(t.getSelection&&t.getSelection()){n.x=-1;return}var f=t.offset();n.x=Math.max(0,Math.min(i.pageX-f.left,t.width())),n.y=Math.max(0,Math.min(i.pageY-f.top,t.height())),t.triggerRedrawOverlay()}}t.hooks.bindEvents.push(function(i,f){i.getOptions().crosshair.mode&&(f.mouseout(l),f.mousemove(s))}),t.hooks.drawOverlay.push(function(i,f){var c=i.getOptions().crosshair;if(c.mode){var o=i.getPlotOffset();if(f.save(),f.translate(o.left,o.top),n.x!=-1){var m=i.getOptions().crosshair.lineWidth%2?.5:0;if(f.strokeStyle=c.color,f.lineWidth=c.lineWidth,f.lineJoin="round",f.beginPath(),c.mode.indexOf("x")!=-1){var r=Math.floor(n.x)+m;f.moveTo(r,0),f.lineTo(r,i.height())}if(c.mode.indexOf("y")!=-1){var u=Math.floor(n.y)+m;f.moveTo(0,u),f.lineTo(i.width(),u)}f.stroke()}f.restore()}}),t.hooks.shutdown.push(function(i,f){f.unbind("mouseout",l),f.unbind("mousemove",s)})}Z.plot.plugins.push({init:e,options:O,name:"crosshair",version:"1.0"})})(jQuery)},47825:()=>{(function(Z){function O(e){e.hooks.processDatapoints.push(function(t,n,l){n.dashes.show&&t.hooks.draw.push(function(s,i){var f=s.getPlotOffset(),c=n.xaxis,o=n.yaxis;function m(g,p){var E=l.points,h=l.pointsize,a=null,v=null,x=0,y=!0,C,P;n.dashes.dashLength[0]?(C=n.dashes.dashLength[0],n.dashes.dashLength[1]?P=n.dashes.dashLength[1]:P=C):P=C=n.dashes.dashLength,i.beginPath();for(var D=h;D<E.length;D+=h){let U=function(N){var S=Math.sqrt(Math.pow(I-w,2)+Math.pow(F-A,2));if(S<=N)return{deltaX:I-w,deltaY:F-A,distance:S,remainder:N-S};var Y=I>w?1:-1,Q=F>A?1:-1;return{deltaX:Y*Math.sqrt(Math.pow(N,2)/(1+Math.pow((F-A)/(I-w),2))),deltaY:Q*Math.sqrt(Math.pow(N,2)-Math.pow(N,2)/(1+Math.pow((F-A)/(I-w),2))),distance:N,remainder:0}};var W=U,M=E[D-h],b=E[D-h+1],R=E[D],B=E[D+1];if(!(M==null||R==null)){if(b<=B&&b<o.min){if(B<o.min)continue;M=(o.min-b)/(B-b)*(R-M)+M,b=o.min}else if(B<=b&&B<o.min){if(b<o.min)continue;R=(o.min-b)/(B-b)*(R-M)+M,B=o.min}if(b>=B&&b>o.max){if(B>o.max)continue;M=(o.max-b)/(B-b)*(R-M)+M,b=o.max}else if(B>=b&&B>o.max){if(b>o.max)continue;R=(o.max-b)/(B-b)*(R-M)+M,B=o.max}if(M<=R&&M<c.min){if(R<c.min)continue;b=(c.min-M)/(R-M)*(B-b)+b,M=c.min}else if(R<=M&&R<c.min){if(M<c.min)continue;B=(c.min-M)/(R-M)*(B-b)+b,R=c.min}if(M>=R&&M>c.max){if(R>c.max)continue;b=(c.max-M)/(R-M)*(B-b)+b,M=c.max}else if(R>=M&&R>c.max){if(M>c.max)continue;B=(c.max-M)/(R-M)*(B-b)+b,R=c.max}(M!=a||b!=v)&&i.moveTo(c.p2c(M)+g,o.p2c(b)+p);var w=c.p2c(M)+g,A=o.p2c(b)+p,I=c.p2c(R)+g,F=o.p2c(B)+p,K;do K=U(x>0?x:y?C:P),(K.deltaX!=0||K.deltaY!=0)&&(y?i.lineTo(w+K.deltaX,A+K.deltaY):i.moveTo(w+K.deltaX,A+K.deltaY)),y=!y,x=K.remainder,w+=K.deltaX,A+=K.deltaY;while(K.distance>0);a=R,v=B}}i.stroke()}i.save(),i.translate(f.left,f.top),i.lineJoin="round";var r=n.dashes.lineWidth,u=n.shadowSize;if(r>0&&u>0){i.lineWidth=u,i.strokeStyle="rgba(0,0,0,0.1)";var d=Math.PI/18;m(Math.sin(d)*(r/2+u/2),Math.cos(d)*(r/2+u/2)),i.lineWidth=u/2,m(Math.sin(d)*(r/2+u/4),Math.cos(d)*(r/2+u/4))}i.lineWidth=r,i.strokeStyle=n.color,r>0&&m(0,0),i.restore()})})}Z.plot.plugins.push({init:O,options:{series:{dashes:{show:!1,lineWidth:2,dashLength:10}}},name:"dashes",version:"0.1"})})(jQuery)},28844:()=>{(function(Z){"use strict";var O={series:{fillBelowTo:null}};function e(t){function n(i,f){var c;for(c=0;c<f.length;++c)if(f[c].id===i.fillBelowTo)return f[c];return null}function l(i,f,c,o,m,r,u,d){var g,p,E,h,a,v;return g=c-i,p=o-f,E=u-m,h=d-r,a=(-p*(i-m)+g*(f-r))/(-E*p+g*h),v=(E*(f-r)-h*(i-m))/(-E*p+g*h),a>=0&&a<=1&&v>=0&&v<=1?[i+v*g,f+v*p]:null}function s(i,f,c){if(c.fillBelowTo===null)return;var o,m,r,u,d,g,p;function E(P,D){f.beginPath(),f.moveTo(c.xaxis.p2c(P)+g.left,c.yaxis.p2c(D)+g.top)}function h(){f.closePath(),f.fill()}function a(){if(r.length/m!==d.length/u)return console.error("Refusing to graph inconsistent number of points"),!1;var P;for(P=0;P<r.length/m;P++)if(r[P*m]!==null&&d[P*u]!==null&&r[P*m]!==d[P*u])return console.error("Refusing to graph points without matching value"),!1;return!0}function v(P,D){console.assert(D>P,"expects the end index to be greater than the start index");var M=P===0||r[P-1]===null||d[P-1]===null,b=!1,R,B;for(R=P;R<D;R++)if(r[R*m+1]===null||d[R*m+1]===null)b=!1,M=!0;else if(r[R*m+1]===d[R*u+1])b=!0,M=!1;else if(r[R*m+1]>d[R*u+1]){M?E(r[R*m],r[R*m+1]):b?E(r[(R-1)*m],r[(R-1)*m+1]):(B=x(R),E(B[0],B[1])),C(R,D);return}else M=!1,b=!1}function x(P){console.assert(P>0,"expects the second point in the series line segment");var D,M;for(D=1;D<d.length/u;D++)if(M=l(r[(P-1)*m],r[(P-1)*m+1],r[P*m],r[P*m+1],d[(D-1)*u],d[(D-1)*u+1],d[D*u],d[D*u+1]),M!==null)return M;console.error("intersectionPoint() should only be called when an intersection happens")}function y(P,D){console.assert(P>=D,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M;for(M=P;M>=D;M--)f.lineTo(o.xaxis.p2c(d[M*u])+g.left,o.yaxis.p2c(d[M*u+1])+g.top);h()}function C(P,D){console.assert(P<=D,"the start should be the rightmost point, and the end should be the leftmost (excluding the equal or intersecting point)");var M,b;for(M=P;M<D;M++)if(r[M*m+1]===null&&M>P){y(M-1,P),v(M,D);return}else if(r[M*m+1]===d[M*u+1]){y(M,P),v(M,D);return}else if(r[M*m+1]<d[M*u+1]){b=x(M),f.lineTo(c.xaxis.p2c(b[0])+g.left,c.yaxis.p2c(b[1])+g.top),y(M,P),v(M,D);return}else f.lineTo(c.xaxis.p2c(r[M*m])+g.left,c.yaxis.p2c(r[M*m+1])+g.top);y(D,P)}o=n(c,i.getData()),o&&(m=c.datapoints.pointsize,r=c.datapoints.points,u=o.datapoints.pointsize,d=o.datapoints.points,g=i.getPlotOffset(),a()&&(p=Z.color.parse(c.color),p.a=.4,p.normalize(),f.fillStyle=p.toString(),v(0,r.length/m)))}t.hooks.drawSeries.push(s)}Z.plot.plugins.push({init:e,options:O,name:"fillbelow",version:"0.1.0"})})(jQuery)},7540:()=>{/*!
 * jquery.flot.gauge v1.1.0 *
 *
 * Flot plugin for rendering gauge charts.
 *
 * Copyright (c) 2015 @toyoty99.
 * Licensed under the MIT license.
 */(function(Z){var O=function(){var c,o,m,r,u,d,g=function(P,D){c=D,o=P.getPlaceholder(),m=P.getOptions(),r=m.series.gauges,u=P.getData(),d=e(r.debug)};g.prototype.calculateLayout=function(){var P=o.width(),D=o.height(),M=Math.min(u.length,r.layout.columns),b=Math.ceil(u.length/M),R=r.layout.margin,B=r.layout.hMargin,w=r.layout.vMargin,A=(P-R*2-B*(M-1))/M,I=(D-R*2-w*(b-1))/b;if(r.layout.square){var F=Math.min(A,I);A=F,I=F}p(r,A);var K=r.cell.margin,W=0,U=0;r.label.show&&(W=r.label.margin,U=r.label.font.size);var N=0,S=0;r.value.show&&(N=r.value.margin,S=r.value.font.size);var Y=0;r.threshold.show&&(Y=r.threshold.width);var Q=0,z=0;r.threshold.label.show&&(Q=r.threshold.label.margin,z=r.threshold.label.font.size);for(var G=A/2-K-Y-Q*2-z,k=r.gauge.startAngle,j=r.gauge.endAngle,de=(j-k)/100,ge=-1,re=k;re<j;re+=de)ge=Math.max(ge,Math.sin(l(re)));ge=Math.max(ge,Math.sin(l(j)));var ce=(I-K*2-W*2-U)/(1+ge);ce*ge<N+S/2&&(ce=I-K*2-W*2-U-N-S/2);var ie=ce-Q*2-z-Y,fe=Math.min(G,ie),Ce=r.gauge.width;Ce>=fe&&(Ce=Math.max(3,fe/3));var ee=Q*2+z+Y+fe,ne=Math.max(ee*(1+ge),ee+N+S/2);return{canvasWidth:P,canvasHeight:D,margin:R,hMargin:B,vMargin:w,columns:M,rows:b,cellWidth:A,cellHeight:I,cellMargin:K,labelMargin:W,labelFontSize:U,valueMargin:N,valueFontSize:S,width:Ce,radius:fe,thresholdWidth:Y,thresholdLabelMargin:Q,thresholdLabelFontSize:z,gaugeOuterHeight:ne}};function p(P,D){P.gauge.width==="auto"&&(P.gauge.width=Math.max(5,D/8)),P.label.margin==="auto"&&(P.label.margin=Math.max(1,D/20)),P.label.font.size==="auto"&&(P.label.font.size=Math.max(5,D/8)),P.value.margin==="auto"&&(P.value.margin=Math.max(1,D/30)),P.value.font.size==="auto"&&(P.value.font.size=Math.max(5,D/9)),P.threshold.width==="auto"&&(P.threshold.width=Math.max(3,D/100)),P.threshold.label.margin==="auto"&&(P.threshold.label.margin=Math.max(3,D/40)),P.threshold.label.font.size==="auto"&&(P.threshold.label.font.size=Math.max(5,D/15))}g.prototype.calculateAutoValues=p,g.prototype.calculateCellLayout=function(P,D,M){var b=t(D.columns,M),R=n(D.columns,M),B=D.margin+(D.cellWidth+D.hMargin)*b,w=D.margin+(D.cellHeight+D.vMargin)*R,A=B+D.cellWidth/2,I=w+D.cellMargin+D.labelMargin*2+D.labelFontSize+D.thresholdWidth+D.thresholdLabelFontSize+D.thresholdLabelMargin*2+D.radius,F=D.cellHeight-D.cellMargin*2-D.labelMargin*2-D.labelFontSize-D.gaugeOuterHeight,K=0;return P.cell.vAlign==="middle"?K=F/2:P.cell.vAlign==="bottom"&&(K=F),I+=K,{col:b,row:R,x:B,y:w,offsetY:K,cellWidth:D.cellWidth,cellHeight:D.cellHeight,cellMargin:D.cellMargin,cx:A,cy:I}},g.prototype.drawBackground=function(P){r.frame.show&&(c.save(),c.strokeStyle=m.grid.borderColor,c.lineWidth=m.grid.borderWidth,c.strokeRect(0,0,P.canvasWidth,P.canvasHeight),m.grid.backgroundColor&&(c.fillStyle=m.grid.backgroundColor,c.fillRect(0,0,P.canvasWidth,P.canvasHeight)),c.restore())},g.prototype.drawCellBackground=function(P,D){c.save(),P.cell.border&&P.cell.border.show&&P.cell.border.color&&P.cell.border.width&&(c.strokeStyle=P.cell.border.color,c.lineWidth=P.cell.border.width,c.strokeRect(D.x,D.y,D.cellWidth,D.cellHeight)),P.cell.background&&P.cell.background.color&&(c.fillStyle=P.cell.background.color,c.fillRect(D.x,D.y,D.cellWidth,D.cellHeight)),c.restore()},g.prototype.drawGauge=function(P,D,M,b,R){var B=P.gauge.shadow.show?P.gauge.shadow.blur:0,w=a(P,R),A=E(P,D,R);x(M.cx,M.cy,D.radius,D.width,l(P.gauge.startAngle),l(P.gauge.endAngle),P.gauge.border.color,P.gauge.border.width,P.gauge.background.color,B),x(M.cx,M.cy,D.radius-1,D.width-2,l(A.a1),l(A.a2),w,1,w,B),P.gauge.neutralValue!=null&&h(P,D,M,w)};function E(P,D,M){let b={};var R=P.gauge.neutralValue;return R!=null?M<R?(b.a1=v(P,D,M),b.a2=v(P,D,R)):(b.a1=v(P,D,R),b.a2=v(P,D,M)):(b.a1=P.gauge.startAngle,b.a2=v(P,D,M)),b}function h(P,D,M,b){var R=(P.gauge.max-P.gauge.min)/600;s(c,M.cx,M.cy,D.radius-2,D.width-4,l(v(P,D,P.gauge.neutralValue-R)),l(v(P,D,P.gauge.neutralValue+R)),b,2,P.gauge.background.color)}function a(P,D){for(var M,b=0;b<P.threshold.values.length;b++){var R=P.threshold.values[b];if(M=R.color,D<R.value)break}return M}function v(P,D,M){var b=P.gauge.startAngle+(P.gauge.endAngle-P.gauge.startAngle)*((M-P.gauge.min)/(P.gauge.max-P.gauge.min));return b<P.gauge.startAngle?b=P.gauge.startAngle:b>P.gauge.endAngle&&(b=P.gauge.endAngle),b}g.prototype.drawThreshold=function(P,D,M){for(var b=P.gauge.startAngle,R=0;R<P.threshold.values.length;R++){var B=P.threshold.values[R];c1=B.color,a2=v(P,D,B.value),s(c,M.cx,M.cy,D.radius+D.thresholdWidth,D.thresholdWidth-2,l(b),l(a2),c1,1,c1),b=a2}};function x(P,D,M,b,R,B,w,A,I,F){R!==B&&(c.save(),s(c,P,D,M,b,R,B,w,A,I),F&&(s(c,P,D,M,b,R,B),c.clip(),c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowBlur=10,c.shadowColor="gray",s(c,P,D,M+1,b+2,R,B,w,1)),c.restore())}g.prototype.drawLable=function(P,D,M,b,R){C(M.cx,M.y+M.cellMargin+D.labelMargin+M.offsetY,"flotGaugeLabel"+b,P.label.formatter?P.label.formatter(R.label,R.data[0][1]):text,P.label)},g.prototype.drawValue=function(P,D,M,b,R){C(M.cx,M.cy-P.value.font.size/2,"flotGaugeValue"+b,P.value.formatter?P.value.formatter(R.label,R.data[0][1]):text,P.value)},g.prototype.drawThresholdValues=function(P,D,M,b){y(P,D,M,"Min"+b,P.gauge.min,P.gauge.startAngle),y(P,D,M,"Max"+b,P.gauge.max,P.gauge.endAngle);for(var R=0;R<P.threshold.values.length;R++){var B=P.threshold.values[R];if(B.value>P.gauge.min&&B.value<P.gauge.max){var w=v(P,D,B.value);y(P,D,M,b+"_"+R,B.value,w)}}var A=P.gauge.neutralValue;A!=null&&A>P.gauge.min&&A<P.gauge.max&&y(P,D,M,"Neutral"+b,A,v(P,D,A))};function y(P,D,M,b,R,B){C(M.cx+(D.thresholdLabelMargin+D.thresholdLabelFontSize/2+D.radius)*Math.cos(l(B)),M.cy+(D.thresholdLabelMargin+D.thresholdLabelFontSize/2+D.radius)*Math.sin(l(B)),"flotGaugeThresholdValue"+b,P.threshold.label.formatter?P.threshold.label.formatter(R):R,P.threshold.label,B)}function C(P,D,M,b,R,B){var w=Z(o).find("#"+M),A=w.length;A||(w=Z("<span></span>"),w.attr("id",M),w.attr("class","flot-temp-elem"),o.append(w)),w.css("position","absolute"),w.css("top",D+"px"),w.css("white-space","nowrap"),R.font.size&&w.css("font-size",R.font.size+"px"),R.font.family&&w.css("font-family",R.font.family),R.color&&w.css("color",R.color),R.background.color&&w.css("background-color",R.background.color),R.background.opacity&&w.css("opacity",R.background.opacity),w.text(b),w.css("left",P+"px"),w.css("left",parseInt(w.css("left"))-w.width()/2+"px"),!A&&B&&(w.css("top",parseInt(w.css("top"))-w.height()/2+"px"),w.css("transform","rotate("+(180*B+90)+"deg)"))}return g}();function e(c){return typeof Logger<"u"?new Logger(c):null}function t(c,o){return o%c}function n(c,o){return Math.floor(o/c)}function l(c){return c*Math.PI}function s(c,o,m,r,u,d,g,p,E,h){if(d!==g){var a=!1;c.save(),c.beginPath(),c.arc(o,m,r,d,g,a),c.lineTo(o+(r-u)*Math.cos(g),m+(r-u)*Math.sin(g)),c.arc(o,m,r-u,g,d,!a),c.closePath(),E&&(c.lineWidth=E),p&&(c.strokeStyle=p,c.stroke()),h&&(c.fillStyle=h,c.fill()),c.restore()}}function i(c){c.hooks.processOptions.push(function(o,m){var r=e(m.series.gauges.debug);m.series.gauges.show&&(m.grid.show=!1,m.legend.show=!1);var u=m.series.gauges.threshold.values;u.sort(function(d,g){return d.value<g.value?-1:d.value>g.value?1:0})}),c.hooks.draw.push(function(o,m){var r=o.getOptions(),u=r.series.gauges,d=e(u.debug);if(u.show){var g=o.getData();if(!(!g||!g.length)){var p=new O(o,m),E=p.calculateLayout();u.debug.layout,p.drawBackground(E);for(var h=0;h<g.length;h++){var a=g[h],v=Z.extend({},u,a.gauges);a.gauges&&p.calculateAutoValues(v,E.cellWidth);var x=p.calculateCellLayout(v,E,h);p.drawCellBackground(v,x),v.debug.layout,v.label.show&&p.drawLable(v,E,x,h,a),p.drawGauge(v,E,x,a.label,a.data[0][1]),v.threshold.show&&p.drawThreshold(v,E,x),v.threshold.label.show&&p.drawThresholdValues(v,E,x,h),v.value.show&&p.drawValue(v,E,x,h,a)}}}})}var f={series:{gauges:{debug:{log:!1,layout:!1,alert:!1},show:!1,layout:{margin:5,columns:3,hMargin:5,vMargin:5,square:!1},frame:{show:!0},cell:{background:{color:null},border:{show:!0,color:"black",width:1},margin:5,vAlign:"middle"},gauge:{width:"auto",startAngle:.9,endAngle:2.1,min:0,max:100,background:{color:"white"},border:{color:"lightgray",width:2},shadow:{show:!0,blur:5}},label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(c,o){return c}},value:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:"sans-serif"},color:null,formatter:function(c,o){return parseInt(o)}},threshold:{show:!0,width:"auto",label:{show:!0,margin:"auto",background:{color:null,opacity:0},font:{size:"auto",family:",sans-serif"},color:null,formatter:function(c){return c}},values:[]}}}};Z.plot.plugins.push({init:i,options:f,name:"gauge",version:"1.1.0"})})(jQuery)},89377:()=>{(function(Z){Z.color={},Z.color.make=function(e,t,n,l){var s={};return s.r=e||0,s.g=t||0,s.b=n||0,s.a=l??1,s.add=function(i,f){for(var c=0;c<i.length;++c)s[i.charAt(c)]+=f;return s.normalize()},s.scale=function(i,f){for(var c=0;c<i.length;++c)s[i.charAt(c)]*=f;return s.normalize()},s.toString=function(){return s.a>=1?"rgb("+[s.r,s.g,s.b].join(",")+")":"rgba("+[s.r,s.g,s.b,s.a].join(",")+")"},s.normalize=function(){function i(f,c,o){return c<f?f:c>o?o:c}return s.r=i(0,parseInt(s.r),255),s.g=i(0,parseInt(s.g),255),s.b=i(0,parseInt(s.b),255),s.a=i(0,s.a,1),s},s.clone=function(){return Z.color.make(s.r,s.b,s.g,s.a)},s.normalize()},Z.color.extract=function(e,t){var n;do{if(n=e.css(t).toLowerCase(),n!=""&&n!="transparent")break;e=e.parent()}while(e.length&&!Z.nodeName(e.get(0),"body"));return n=="rgba(0, 0, 0, 0)"&&(n="transparent"),Z.color.parse(n)},Z.color.parse=function(e){var t,n=Z.color.make;if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10));if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4]));if(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55);if(t=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(e))return n(parseFloat(t[1])*2.55,parseFloat(t[2])*2.55,parseFloat(t[3])*2.55,parseFloat(t[4]));if(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))return n(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16));if(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))return n(parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16));var l=Z.trim(e).toLowerCase();return l=="transparent"?n(255,255,255,0):(t=O[l]||[0,0,0],n(t[0],t[1],t[2]))};var O={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery),function(Z){var O=Object.prototype.hasOwnProperty;Z.fn.detach||(Z.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})});function e(l,s){var i=s.children("."+l)[0];if(i==null&&(i=document.createElement("canvas"),i.className=l,Z(i).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(s),!i.getContext))if(window.G_vmlCanvasManager)i=window.G_vmlCanvasManager.initElement(i);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=i;var f=this.context=i.getContext("2d"),c=window.devicePixelRatio||1,o=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1;this.pixelRatio=c/o,this.resize(s.width(),s.height()),this.textContainer=null,this.text={},this._textCache={},this._textSizeCache=window.flotTextSizeCache=window.flotTextSizeCache||{}}e.prototype.resize=function(l,s){if(l<=0||s<=0)throw new Error("Invalid dimensions for plot, width = "+l+", height = "+s);var i=this.element,f=this.context,c=this.pixelRatio;this.width!=l&&(i.width=l*c,i.style.width=l+"px",this.width=l),this.height!=s&&(i.height=s*c,i.style.height=s+"px",this.height=s),f.restore(),f.save(),f.scale(c,c)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var l=this._textCache;for(var s in l)if(O.call(l,s)){var i=this.getTextLayer(s),f=l[s];i.hide();for(var c in f)if(O.call(f,c)){var o=f[c];for(var m in o)if(O.call(o,m)){for(var r=o[m].positions,u=0,d;d=r[u];u++)d.active?d.rendered||(i.append(d.element),d.rendered=!0):(r.splice(u--,1),d.rendered&&d.element.detach());r.length==0&&delete o[m]}}i.show()}},e.prototype.getTextLayer=function(l){var s=this.text[l];return s==null&&(this.textContainer==null&&(this.textContainer=Z("<div class='flot-text flot-temp-elem'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),s=this.text[l]=Z("<div></div>").addClass(l).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),s},e.prototype.getTextInfo=function(l,s,i,f,c){var o,m,r,u;if(s=""+s,typeof i=="object"?o=i.style+" "+i.variant+" "+i.weight+" "+i.size+"px/"+i.lineHeight+"px "+i.family:o=i,m=this._textCache[l],m==null&&(m=this._textCache[l]={}),r=m[o],r==null&&(r=m[o]={}),u=r[s],u==null){var d=Z("<div></div>").html(s).css({position:"absolute","max-width":c,top:-9999}).appendTo(this.getTextLayer(l));typeof i=="object"?d.css({font:o,color:i.color}):typeof i=="string"&&d.addClass(i),u=r[s]={element:d,positions:[]};var g=this._textSizeCache[s];g?(u.width=g.width,u.height=g.height):(u.width=d.outerWidth(!0),u.height=d.outerHeight(!0),this._textSizeCache[s]={width:u.width,height:u.height}),d.detach()}return u},e.prototype.addText=function(l,s,i,f,c,o,m,r,u){var d=this.getTextInfo(l,f,c,o,m),g=d.positions;r=="center"?s-=d.width/2:r=="right"&&(s-=d.width),u=="middle"?i-=d.height/2:u=="bottom"&&(i-=d.height);for(var p=0,E;E=g[p];p++)if(E.x==s&&E.y==i){E.active=!0;return}E={active:!0,rendered:!1,element:g.length?d.element.clone():d.element,x:s,y:i},g.push(E),E.element.css({top:Math.round(i),left:Math.round(s),"text-align":r})},e.prototype.removeText=function(l,s,i,f,c,o){if(f==null){var m=this._textCache[l];if(m!=null){for(var r in m)if(O.call(m,r)){var u=m[r];for(var d in u)if(O.call(u,d))for(var g=u[d].positions,p=0,E;E=g[p];p++)E.active=!1}}}else for(var g=this.getTextInfo(l,f,c,o).positions,p=0,E;E=g[p];p++)E.x==s&&E.y==i&&(E.active=!1)};function t(l,s,i,f){var c=[],o={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,eventSectionHeight:0,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:16.666666666666668},hooks:{}},m=null,r=null,u=null,d=null,g=null,p=[],E=[],h={left:0,right:0,top:0,bottom:0},a=0,v=0,x={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],processRange:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},y=this;y.setData=M,y.setupGrid=k,y.draw=ie,y.getPlaceholder=function(){return l},y.getCanvas=function(){return m.element},y.getPlotOffset=function(){return h},y.width=function(){return a},y.height=function(){return v},y.offset=function(){var le=u.offset();return le.left+=h.left,le.top+=h.top,le},y.getData=function(){return c},y.getAxes=function(){var le={},Pe;return Z.each(p.concat(E),function(Oe,Le){Le&&(le[Le.direction+(Le.n!=1?Le.n:"")+"axis"]=Le)}),le},y.getXAxes=function(){return p},y.getYAxes=function(){return E},y.c2p=w,y.p2c=A,y.getOptions=function(){return o},y.highlight=Qe,y.unhighlight=ct,y.triggerRedrawOverlay=Fe,y.pointOffset=function(le){return{left:parseInt(p[R(le,"x")-1].p2c(+le.x)+h.left,10),top:parseInt(E[R(le,"y")-1].p2c(+le.y)+h.top,10)}},y.shutdown=N,y.destroy=function(){N(),l.removeData("plot").empty(),c=[],o=null,m=null,r=null,u=null,d=null,g=null,p=[],E=[],x=null,pe=[],y=null},y.resize=function(){var le=l.width(),Pe=l.height();m.resize(le,Pe),r.resize(le,Pe)},y.hooks=x,P(y),D(i),W(),M(s),k(),ie(),U();function C(le,Pe){Pe=[y].concat(Pe);for(var Oe=0;Oe<le.length;++Oe)le[Oe].apply(this,Pe)}function P(){for(var le={Canvas:e},Pe=0;Pe<f.length;++Pe){var Oe=f[Pe];Oe.init(y,le),Oe.options&&Z.extend(!0,o,Oe.options)}}function D(le){Z.extend(!0,o,le),le&&le.colors&&(o.colors=le.colors),o.xaxis.color==null&&(o.xaxis.color=Z.color.parse(o.grid.color).scale("a",.22).toString()),o.yaxis.color==null&&(o.yaxis.color=Z.color.parse(o.grid.color).scale("a",.22).toString()),o.xaxis.tickColor==null&&(o.xaxis.tickColor=o.grid.tickColor||o.xaxis.color),o.yaxis.tickColor==null&&(o.yaxis.tickColor=o.grid.tickColor||o.yaxis.color),o.grid.borderColor==null&&(o.grid.borderColor=o.grid.color),o.grid.tickColor==null&&(o.grid.tickColor=Z.color.parse(o.grid.color).scale("a",.22).toString());var Pe,Oe,Le,Ye=l.css("font-size"),be=Ye?+Ye.replace("px",""):13,Te={style:l.css("font-style"),size:Math.round(.8*be),variant:l.css("font-variant"),weight:l.css("font-weight"),family:l.css("font-family")};for(Le=o.xaxes.length||1,Pe=0;Pe<Le;++Pe)Oe=o.xaxes[Pe],Oe&&!Oe.tickColor&&(Oe.tickColor=Oe.color),Oe=Z.extend(!0,{},o.xaxis,Oe),o.xaxes[Pe]=Oe,Oe.font&&(Oe.font=Z.extend({},Te,Oe.font),Oe.font.color||(Oe.font.color=Oe.color),Oe.font.lineHeight||(Oe.font.lineHeight=Math.round(Oe.font.size*1.15)));for(Le=o.yaxes.length||1,Pe=0;Pe<Le;++Pe)Oe=o.yaxes[Pe],Oe&&!Oe.tickColor&&(Oe.tickColor=Oe.color),Oe=Z.extend(!0,{},o.yaxis,Oe),o.yaxes[Pe]=Oe,Oe.font&&(Oe.font=Z.extend({},Te,Oe.font),Oe.font.color||(Oe.font.color=Oe.color),Oe.font.lineHeight||(Oe.font.lineHeight=Math.round(Oe.font.size*1.15)));for(o.xaxis.noTicks&&o.xaxis.ticks==null&&(o.xaxis.ticks=o.xaxis.noTicks),o.yaxis.noTicks&&o.yaxis.ticks==null&&(o.yaxis.ticks=o.yaxis.noTicks),o.x2axis&&(o.xaxes[1]=Z.extend(!0,{},o.xaxis,o.x2axis),o.xaxes[1].position="top",o.x2axis.min==null&&(o.xaxes[1].min=null),o.x2axis.max==null&&(o.xaxes[1].max=null)),o.y2axis&&(o.yaxes[1]=Z.extend(!0,{},o.yaxis,o.y2axis),o.yaxes[1].position="right",o.y2axis.min==null&&(o.yaxes[1].min=null),o.y2axis.max==null&&(o.yaxes[1].max=null)),o.grid.coloredAreas&&(o.grid.markings=o.grid.coloredAreas),o.grid.coloredAreasColor&&(o.grid.markingsColor=o.grid.coloredAreasColor),o.lines&&Z.extend(!0,o.series.lines,o.lines),o.points&&Z.extend(!0,o.series.points,o.points),o.bars&&Z.extend(!0,o.series.bars,o.bars),o.shadowSize!=null&&(o.series.shadowSize=o.shadowSize),o.highlightColor!=null&&(o.series.highlightColor=o.highlightColor),Pe=0;Pe<o.xaxes.length;++Pe)I(p,Pe+1).options=o.xaxes[Pe];for(Pe=0;Pe<o.yaxes.length;++Pe)I(E,Pe+1).options=o.yaxes[Pe];for(var me in x)o.hooks[me]&&o.hooks[me].length&&(x[me]=x[me].concat(o.hooks[me]));C(x.processOptions,[o])}function M(le){c=b(le),F(),K()}function b(le){for(var Pe=[],Oe=0;Oe<le.length;++Oe){var Le=Z.extend(!0,{},o.series);le[Oe].data!=null?(Le.data=le[Oe].data,delete le[Oe].data,Z.extend(!0,Le,le[Oe]),le[Oe].data=Le.data):Le.data=le[Oe],Pe.push(Le)}return Pe}function R(le,Pe){var Oe=le[Pe+"axis"];return typeof Oe=="object"&&(Oe=Oe.n),typeof Oe!="number"&&(Oe=1),Oe}function B(){return Z.grep(p.concat(E),function(le){return le})}function w(le){var Pe={},Oe,Le;for(Oe=0;Oe<p.length;++Oe)Le=p[Oe],Le&&(Pe["x"+Le.n]=Le.c2p(le.left));for(Oe=0;Oe<E.length;++Oe)Le=E[Oe],Le&&(Pe["y"+Le.n]=Le.c2p(le.top));return Pe.x1!==void 0&&(Pe.x=Pe.x1),Pe.y1!==void 0&&(Pe.y=Pe.y1),Pe}function A(le){var Pe={},Oe,Le,Ye;for(Oe=0;Oe<p.length;++Oe)if(Le=p[Oe],Le&&Le.used&&(Ye="x"+Le.n,le[Ye]==null&&Le.n==1&&(Ye="x"),le[Ye]!=null)){Pe.left=Le.p2c(le[Ye]);break}for(Oe=0;Oe<E.length;++Oe)if(Le=E[Oe],Le&&Le.used&&(Ye="y"+Le.n,le[Ye]==null&&Le.n==1&&(Ye="y"),le[Ye]!=null)){Pe.top=Le.p2c(le[Ye]);break}return Pe}function I(le,Pe){return le[Pe-1]||(le[Pe-1]={n:Pe,direction:le==p?"x":"y",options:Z.extend(!0,{},le==p?o.xaxis:o.yaxis)}),le[Pe-1]}function F(){var le=c.length,Pe=-1,Oe;for(Oe=0;Oe<c.length;++Oe){var Le=c[Oe].color;Le!=null&&(le--,typeof Le=="number"&&Le>Pe&&(Pe=Le))}le<=Pe&&(le=Pe+1);var Ye,be=[],Te=o.colors,me=Te.length,he=0;for(Oe=0;Oe<le;Oe++)Ye=Z.color.parse(Te[Oe%me]||"#666"),Oe%me==0&&Oe&&(he>=0?he<.5?he=-he-.2:he=0:he=-he),be[Oe]=Ye.scale("rgb",1+he);var De=0,$e;for(Oe=0;Oe<c.length;++Oe){if($e=c[Oe],$e.color==null?($e.color=be[De].toString(),++De):typeof $e.color=="number"&&($e.color=be[$e.color].toString()),$e.lines.show==null){var ke,tt=!0;for(ke in $e)if($e[ke]&&$e[ke].show){tt=!1;break}tt&&($e.lines.show=!0)}$e.lines.zero==null&&($e.lines.zero=!!$e.lines.fill),$e.xaxis=I(p,R($e,"x")),$e.yaxis=I(E,R($e,"y"))}}function K(){var le=Number.POSITIVE_INFINITY,Pe=Number.NEGATIVE_INFINITY,Oe=Number.MAX_VALUE,Le,Ye,be,Te,me,he,De,$e,ke,tt,Ge,dt,pt,Ke,je,ot;function at(At,Wt,Qt){Wt<At.datamin&&Wt!=-Oe&&(At.datamin=Wt),Qt>At.datamax&&Qt!=Oe&&(At.datamax=Qt)}for(Z.each(B(),function(At,Wt){Wt.datamin=le,Wt.datamax=Pe,Wt.used=!1}),Le=0;Le<c.length;++Le)he=c[Le],he.datapoints={points:[]},C(x.processRawData,[he,he.data,he.datapoints]);for(Le=0;Le<c.length;++Le){if(he=c[Le],je=he.data,ot=he.datapoints.format,!ot){if(ot=[],ot.push({x:!0,number:!0,required:!0}),ot.push({y:!0,number:!0,required:!0}),he.stack||he.bars.show||he.lines.show&&he.lines.fill){var xt=!!(he.bars.show&&he.bars.zero||he.lines.show&&he.lines.zero);ot.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:xt}),he.bars.horizontal&&(delete ot[ot.length-1].y,ot[ot.length-1].x=!0)}he.datapoints.format=ot}if(he.datapoints.pointsize==null){he.datapoints.pointsize=ot.length,$e=he.datapoints.pointsize,De=he.datapoints.points;var Dt=he.lines.show&&he.lines.steps;for(he.xaxis.used=he.yaxis.used=!0,Ye=be=0;Ye<je.length;++Ye,be+=$e){Ke=je[Ye];var wt=Ke==null;if(!wt)for(Te=0;Te<$e;++Te)dt=Ke[Te],pt=ot[Te],pt&&(pt.number&&dt!=null&&(dt=+dt,isNaN(dt)?dt=null:dt==1/0?dt=Oe:dt==-1/0&&(dt=-Oe)),dt==null&&(pt.required&&(wt=!0),pt.defaultValue!=null&&(dt=pt.defaultValue))),De[be+Te]=dt;if(wt)for(Te=0;Te<$e;++Te)dt=De[be+Te],dt!=null&&(pt=ot[Te],pt.autoscale!==!1&&(pt.x&&at(he.xaxis,dt,dt),pt.y&&at(he.yaxis,dt,dt))),De[be+Te]=null;if(Dt&&be>0&&(!wt||De[be-$e]!=null)){for(Te=0;Te<$e;++Te)De[be+$e+Te]=De[be+Te];De[be+1]=De[be-$e+1]||0,wt&&(De[be]=Ke[0]),be+=$e}}}}for(Le=0;Le<c.length;++Le){if(he=c[Le],De=he.datapoints.points,$e=he.datapoints.pointsize,he.transform==="negative-Y")for(Ye=0;Ye<De.length;Ye+=$e)De[Ye]!=null&&(dt=De[Ye+1],De[Ye+1]=-dt);C(x.processDatapoints,[he,he.datapoints])}for(Le=0;Le<c.length;++Le){he=c[Le],De=he.datapoints.points,$e=he.datapoints.pointsize,ot=he.datapoints.format;var sn=le,mn=le,Dn=Pe,Rn=Pe;for(Ye=0;Ye<De.length;Ye+=$e)if(De[Ye]!=null)for(Te=0;Te<$e;++Te)dt=De[Ye+Te],pt=ot[Te],!(!pt||pt.autoscale===!1||dt==Oe||dt==-Oe)&&(pt.x&&(dt<sn&&(sn=dt),dt>Dn&&(Dn=dt)),pt.y&&(dt<mn&&(mn=dt),dt>Rn&&(Rn=dt)));if(he.bars.show){var St;switch(he.bars.align){case"left":St=0;break;case"right":St=-he.bars.barWidth;break;default:St=-he.bars.barWidth/2}he.bars.horizontal?(mn+=St,Rn+=St+he.bars.barWidth):(sn+=St,Dn+=St+he.bars.barWidth)}at(he.xaxis,sn,Dn),at(he.yaxis,mn,Rn)}Z.each(B(),function(At,Wt){Wt.datamin==le&&(Wt.datamin=null),Wt.datamax==Pe&&(Wt.datamax=null)})}function W(){l.find(".flot-temp-elem").remove(),l.css("position")=="static"&&l.css("position","relative"),m=new e("flot-base",l),r=new e("flot-overlay",l),d=m.context,g=r.context,u=Z(r.element).unbind();var le=l.data("plot");le&&(le.shutdown(),r.clear()),l.data("plot",y)}function U(){o.grid.hoverable&&(u.mousemove(Je),u.bind("mouseleave",He),Z(document).bind("touchend",et)),o.grid.clickable&&u.click(Ae),C(x.bindEvents,[u])}function N(){Ie&&clearTimeout(Ie),u.unbind("mousemove",Je),u.unbind("mouseleave",He),u.unbind("click",Ae),Z(document).unbind("touchend",et),C(x.shutdown,[u])}function S(le){function Pe(Te){return Te}var Oe,Le,Ye=le.options.transform||Pe,be=le.options.inverseTransform;le.direction=="x"?(Oe=le.scale=a/Math.abs(Ye(le.max)-Ye(le.min)),Le=Math.min(Ye(le.max),Ye(le.min))):(Oe=le.scale=v/Math.abs(Ye(le.max)-Ye(le.min)),Oe=-Oe,Le=Math.max(Ye(le.max),Ye(le.min))),Ye==Pe?le.p2c=function(Te){return(Te-Le)*Oe}:le.p2c=function(Te){return(Ye(Te)-Le)*Oe},be?le.c2p=function(Te){return be(Le+Te/Oe)}:le.c2p=function(Te){return Le+Te/Oe}}function Y(le){for(var Pe=le.options,Oe=le.ticks||[],Le=Pe.labelWidth||0,Ye=Pe.labelHeight||0,be=Le||(le.direction=="x"?Math.floor(m.width/(Oe.length||1)):null),Te=le.direction+"Axis "+le.direction+le.n+"Axis",me="flot-"+le.direction+"-axis flot-"+le.direction+le.n+"-axis "+Te,he=Pe.font||"flot-tick-label tickLabel",De=0;De<Oe.length;++De){var $e=Oe[De];if($e.label){var ke=m.getTextInfo(me,$e.label,he,null,be);Le=Math.max(Le,ke.width+1),Ye=Math.max(Ye,ke.height)}}le.labelWidth=Pe.labelWidth||Le,le.labelHeight=Pe.labelHeight||Ye}function Q(le){var Pe=le.labelWidth,Oe=le.labelHeight,Le=le.options.position,Ye=le.direction==="x",be=le.options.tickLength,Te=o.grid.axisMargin,me=o.grid.labelMargin,he=o.grid.eventSectionHeight,De=!0,$e=!0,ke=!0,tt=!1;Z.each(Ye?p:E,function(Ge,dt){dt&&(dt.show||dt.reserveSpace)&&(dt===le?tt=!0:dt.options.position===Le&&(tt?$e=!1:De=!1),tt||(ke=!1))}),$e&&(Te=0),be==null&&(be=ke?"full":5),isNaN(+be)||(me+=+be),Ye?(Oe+=me,Oe+=he,Le=="bottom"?(h.bottom+=Oe+Te,le.box={top:m.height-h.bottom,height:Oe}):(le.box={top:h.top+Te,height:Oe},h.top+=Oe+Te)):(Pe+=me,Le=="left"?(le.box={left:h.left+Te,width:Pe},h.left+=Pe+Te):(h.right+=Pe+Te,le.box={left:m.width-h.right,width:Pe})),le.position=Le,le.tickLength=be,le.box.padding=me,le.box.eventSectionPadding=he,le.innermost=De}function z(le){le.direction=="x"?(le.box.left=h.left-le.labelWidth/2,le.box.width=m.width-h.left-h.right+le.labelWidth):(le.box.top=h.top-le.labelHeight/2,le.box.height=m.height-h.bottom-h.top+le.labelHeight)}function G(){var le=o.grid.minBorderMargin,Pe,Oe;if(le==null)for(le=0,Oe=0;Oe<c.length;++Oe)le=Math.max(le,2*(c[Oe].points.radius+c[Oe].points.lineWidth/2));var Le={left:le,right:le,top:le,bottom:le};Z.each(B(),function(Ye,be){be.reserveSpace&&be.ticks&&be.ticks.length&&(be.direction==="x"?(Le.left=Math.max(Le.left,be.labelWidth/2),Le.right=Math.max(Le.right,be.labelWidth/2)):(Le.bottom=Math.max(Le.bottom,be.labelHeight/2),Le.top=Math.max(Le.top,be.labelHeight/2)))}),h.left=Math.ceil(Math.max(Le.left,h.left)),h.right=Math.ceil(Math.max(Le.right,h.right)),h.top=Math.ceil(Math.max(Le.top,h.top)),h.bottom=Math.ceil(Math.max(Le.bottom,h.bottom))}function k(){var le,Pe=B(),Oe=o.grid.show;for(var Le in h){var Ye=o.grid.margin||0;h[Le]=typeof Ye=="number"?Ye:Ye[Le]||0}C(x.processOffset,[h]);for(var Le in h)typeof o.grid.borderWidth=="object"?h[Le]+=Oe?o.grid.borderWidth[Le]:0:h[Le]+=Oe?o.grid.borderWidth:0;if(Z.each(Pe,function(me,he){var De=he.options;he.show=De.show==null?he.used:De.show,he.reserveSpace=De.reserveSpace==null?he.show:De.reserveSpace,j(he)}),C(x.processRange,[]),Oe){for(var be=Z.grep(Pe,function(me){return me.show||me.reserveSpace}),Te=!1,le=0;le<2&&(Z.each(be,function(he,De){ge(De),re(De),Te=ce(De,De.ticks)||Te,Y(De)}),Te&&x.processRange.length>0);le++)C(x.processRange,[]),Te=!1;for(le=be.length-1;le>=0;--le)Q(be[le]);G(),Z.each(be,function(me,he){z(he)})}a=m.width-h.left-h.right,v=m.height-h.bottom-h.top,Z.each(Pe,function(me,he){S(he)}),Oe&&ne(),rt()}function j(le){var Pe=le.options,Oe=+(Pe.min!=null?Pe.min:le.datamin),Le=+(Pe.max!=null?Pe.max:le.datamax),Ye=Le-Oe;if(Ye==0){var be=.25,Te=Math.abs(Le==0?1:Le*be);Pe.min==null&&(Oe-=Te),(Pe.max==null||Pe.min!=null)&&(Le+=Te)}else{var me=Pe.autoscaleMargin;me!=null&&(Pe.min==null&&(Oe-=Ye*me,Oe<0&&le.datamin!=null&&le.datamin>=0&&(Oe=0)),Pe.max==null&&(Le+=Ye*me,Le>0&&le.datamax!=null&&le.datamax<=0&&(Le=0)))}le.min=Oe,le.max=Le}function de(le){if(le=Math.abs(String(le).replace(".","")),le==0)return 0;for(;le!=0&&le%10==0;)le/=10;return Math.floor(Math.log(le)/Math.LN10)+1}function ge(le){var Pe=le.options,Oe;typeof Pe.ticks=="number"&&Pe.ticks>0?Oe=Pe.ticks:Oe=.3*Math.sqrt(le.direction=="x"?m.width:m.height);var Le=(le.max-le.min)/Oe,Ye=-Math.floor(Math.log(Le)/Math.LN10),be=Pe.tickDecimals;be!=null&&Ye>be&&(Ye=be);var Te=Math.pow(10,-Ye),me=Le/Te,he;if(me<1.5?he=1:me<3?(he=2,me>2.25&&(be==null||Ye+1<=be)&&(he=2.5,++Ye)):me<7.5?he=5:he=10,he*=Te,Pe.minTickSize!=null&&he<Pe.minTickSize&&(he=Pe.minTickSize),le.delta=Le,le.tickDecimals=Math.max(0,be??Ye),le.tickSize=Pe.tickSize||he,Pe.mode=="time"&&!le.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(le.tickGenerator||(le.tickGenerator=function(Ge){var dt=[],pt=n(Ge.min,Ge.tickSize),Ke=0,je=Number.NaN,ot;do ot=je,je=pt+Ke*Ge.tickSize,dt.push(je),++Ke;while(je<Ge.max&&je!=ot);return dt},le.tickFormatter=function(Ge,dt){var pt=dt.tickDecimals?Math.pow(10,dt.tickDecimals):1,Ke=""+Math.round(Ge*pt)/pt;if(dt.tickDecimals!=null){var je=Ke.indexOf("."),ot=je==-1?0:Ke.length-je-1;if(ot<dt.tickDecimals)return(ot?Ke:Ke+".")+(""+pt).substr(1,dt.tickDecimals-ot)}return Ke}),Z.isFunction(Pe.tickFormatter)&&(le.tickFormatter=function(Ge,dt){return""+Pe.tickFormatter(Ge,dt)}),Pe.alignTicksWithAxis!=null){var De=(le.direction=="x"?p:E)[Pe.alignTicksWithAxis-1];if(De&&De.used&&De!=le){var $e=le.tickGenerator(le);if($e.length>0&&(Pe.min==null&&(le.min=Math.min(le.min,$e[0])),Pe.max==null&&$e.length>1&&(le.max=Math.max(le.max,$e[$e.length-1]))),le.tickGenerator=function(Ge){var dt=[],pt,Ke;for(Ke=0;Ke<De.ticks.length;++Ke)pt=(De.ticks[Ke].v-De.min)/(De.max-De.min),pt=Ge.min+pt*(Ge.max-Ge.min),dt.push(pt);return dt},!le.mode&&Pe.tickDecimals==null){var ke=Math.max(0,-Math.floor(Math.log(le.delta)/Math.LN10)+1),tt=le.tickGenerator(le);tt.length>1&&/\..*0$/.test((tt[1]-tt[0]).toFixed(ke))||(le.tickDecimals=ke)}}}}function re(le){var Pe=le.options.ticks,Oe=[];Pe==null||typeof Pe=="number"&&Pe>0?Oe=le.tickGenerator(le):Pe&&(Z.isFunction(Pe)?Oe=Pe(le):Oe=Pe);var Le,Ye;for(le.ticks=[],Le=0;Le<Oe.length;++Le){var be=null,Te=Oe[Le];typeof Te=="object"?(Ye=+Te[0],Te.length>1&&(be=Te[1])):Ye=+Te,be==null&&(be=le.tickFormatter(Ye,le)),isNaN(Ye)||le.ticks.push({v:Ye,label:be})}}function ce(le,Pe){var Oe=!1;return le.options.autoscaleMargin&&Pe.length>0&&(le.options.min==null&&(le.min=Math.min(le.min,Pe[0].v),Oe=!0),le.options.max==null&&Pe.length>1&&(le.max=Math.max(le.max,Pe[Pe.length-1].v),Oe=!0)),Oe}function ie(){m.clear(),C(x.drawBackground,[d]);var le=o.grid;le.show&&le.backgroundColor&&Ce(),le.show&&!le.aboveData&&ee();for(var Pe=0;Pe<c.length;++Pe)C(x.drawSeries,[d,c[Pe]]),te(c[Pe]);C(x.draw,[d]),le.show&&le.aboveData&&ee(),m.render(),Fe()}function fe(le,Pe){for(var Oe,Le,Ye,be,Te=B(),me=0;me<Te.length;++me)if(Oe=Te[me],Oe.direction==Pe&&(be=Pe+Oe.n+"axis",!le[be]&&Oe.n==1&&(be=Pe+"axis"),le[be])){Le=le[be].from,Ye=le[be].to;break}if(le[be]||(Oe=Pe=="x"?p[0]:E[0],Le=le[Pe+"1"],Ye=le[Pe+"2"]),Le!=null&&Ye!=null&&Le>Ye){var he=Le;Le=Ye,Ye=he}return{from:Le,to:Ye,axis:Oe}}function Ce(){d.save(),d.translate(h.left,h.top),d.fillStyle=nt(o.grid.backgroundColor,v,0,"rgba(255, 255, 255, 0)"),d.fillRect(0,0,a,v),d.restore()}function ee(){var le,Pe,Oe,Le;d.save(),d.translate(h.left,h.top);var Ye=o.grid.markings;if(Ye)for(Z.isFunction(Ye)&&(Pe=y.getAxes(),Pe.xmin=Pe.xaxis.min,Pe.xmax=Pe.xaxis.max,Pe.ymin=Pe.yaxis.min,Pe.ymax=Pe.yaxis.max,Ye=Ye(Pe)),le=0;le<Ye.length;++le){var be=Ye[le],Te=fe(be,"x"),me=fe(be,"y");if(Te.from==null&&(Te.from=Te.axis.min),Te.to==null&&(Te.to=Te.axis.max),me.from==null&&(me.from=me.axis.min),me.to==null&&(me.to=me.axis.max),!(Te.to<Te.axis.min||Te.from>Te.axis.max||me.to<me.axis.min||me.from>me.axis.max)){Te.from=Math.max(Te.from,Te.axis.min),Te.to=Math.min(Te.to,Te.axis.max),me.from=Math.max(me.from,me.axis.min),me.to=Math.min(me.to,me.axis.max);var he=Te.from===Te.to,De=me.from===me.to;if(!(he&&De))if(Te.from=Math.floor(Te.axis.p2c(Te.from)),Te.to=Math.floor(Te.axis.p2c(Te.to)),me.from=Math.floor(me.axis.p2c(me.from)),me.to=Math.floor(me.axis.p2c(me.to)),he||De){var $e=be.lineWidth||o.grid.markingsLineWidth,ke=$e%2?.5:0;d.beginPath(),d.strokeStyle=be.color||o.grid.markingsColor,d.lineWidth=$e,he?(d.moveTo(Te.to+ke,me.from),d.lineTo(Te.to+ke,me.to)):(d.moveTo(Te.from,me.to+ke),d.lineTo(Te.to,me.to+ke)),d.stroke()}else d.fillStyle=be.color||o.grid.markingsColor,d.fillRect(Te.from,me.to,Te.to-Te.from,me.from-me.to)}}Pe=B(),Oe=o.grid.borderWidth;for(var tt=0;tt<Pe.length;++tt){var Ge=Pe[tt],dt=Ge.box,pt=Ge.tickLength,Ke,je,ot,at;if(!(!Ge.show||Ge.ticks.length==0)){for(d.lineWidth=1,Ge.direction=="x"?(Ke=0,pt=="full"?je=Ge.position=="top"?0:v:je=dt.top-h.top+(Ge.position=="top"?dt.height:0)):(je=0,pt=="full"?Ke=Ge.position=="left"?0:a:Ke=dt.left-h.left+(Ge.position=="left"?dt.width:0)),Ge.innermost||(d.strokeStyle=Ge.options.color,d.beginPath(),ot=at=0,Ge.direction=="x"?ot=a+1:at=v+1,d.lineWidth==1&&(Ge.direction=="x"?je=Math.floor(je)+.5:Ke=Math.floor(Ke)+.5),d.moveTo(Ke,je),d.lineTo(Ke+ot,je+at),d.stroke()),d.strokeStyle=Ge.options.tickColor,d.beginPath(),le=0;le<Ge.ticks.length;++le){var xt=Ge.ticks[le].v;ot=at=0,!(isNaN(xt)||xt<Ge.min||xt>Ge.max||pt=="full"&&(typeof Oe=="object"&&Oe[Ge.position]>0||Oe>0)&&(xt==Ge.min||xt==Ge.max))&&(Ge.direction=="x"?(Ke=Ge.p2c(xt),at=pt=="full"?-v:pt,Ge.position=="top"&&(at=-at)):(je=Ge.p2c(xt),ot=pt=="full"?-a:pt,Ge.position=="left"&&(ot=-ot)),d.lineWidth==1&&(Ge.direction=="x"?Ke=Math.floor(Ke)+.5:je=Math.floor(je)+.5),d.moveTo(Ke,je),d.lineTo(Ke+ot,je+at))}d.stroke()}}Oe&&(Le=o.grid.borderColor,typeof Oe=="object"||typeof Le=="object"?(typeof Oe!="object"&&(Oe={top:Oe,right:Oe,bottom:Oe,left:Oe}),typeof Le!="object"&&(Le={top:Le,right:Le,bottom:Le,left:Le}),Oe.top>0&&(d.strokeStyle=Le.top,d.lineWidth=Oe.top,d.beginPath(),d.moveTo(0-Oe.left,0-Oe.top/2),d.lineTo(a,0-Oe.top/2),d.stroke()),Oe.right>0&&(d.strokeStyle=Le.right,d.lineWidth=Oe.right,d.beginPath(),d.moveTo(a+Oe.right/2,0-Oe.top),d.lineTo(a+Oe.right/2,v),d.stroke()),Oe.bottom>0&&(d.strokeStyle=Le.bottom,d.lineWidth=Oe.bottom,d.beginPath(),d.moveTo(a+Oe.right,v+Oe.bottom/2),d.lineTo(0,v+Oe.bottom/2),d.stroke()),Oe.left>0&&(d.strokeStyle=Le.left,d.lineWidth=Oe.left,d.beginPath(),d.moveTo(0-Oe.left/2,v+Oe.bottom),d.lineTo(0-Oe.left/2,0),d.stroke())):(d.lineWidth=Oe,d.strokeStyle=o.grid.borderColor,d.strokeRect(-Oe/2,-Oe/2,a+Oe,v+Oe))),d.restore()}function ne(){Z.each(B(),function(le,Pe){var Oe=Pe.box,Le=Pe.direction+"Axis "+Pe.direction+Pe.n+"Axis",Ye="flot-"+Pe.direction+"-axis flot-"+Pe.direction+Pe.n+"-axis "+Le,be=Pe.options.font||"flot-tick-label tickLabel",Te,me,he,De,$e;if(m.removeText(Ye),!(!Pe.show||Pe.ticks.length==0))for(var ke=0;ke<Pe.ticks.length;++ke)Te=Pe.ticks[ke],!(!Te.label||Te.v<Pe.min||Te.v>Pe.max)&&(Pe.direction=="x"?(De="center",me=h.left+Pe.p2c(Te.v),Pe.position=="bottom"?he=Oe.top+Oe.padding+Oe.eventSectionPadding:(he=Oe.top+Oe.height-Oe.padding,$e="bottom")):($e="middle",he=h.top+Pe.p2c(Te.v),Pe.position=="left"?(me=Oe.left+Oe.width-Oe.padding,De="right"):me=Oe.left+Oe.padding),m.addText(Ye,me,he,Te.label,be,null,null,De,$e))})}function X(le){for(var Pe=[],Oe=null,Le=null,Ye=le.datapoints,be=[],Te=0;Te<Ye.pointsize-2;Te++)be.push(0);for(var me=0;me<Ye.points.length;me+=Ye.pointsize){var he=Ye.points[me],De=Ye.points[me+1];me===Ye.points.length-Ye.pointsize?Le=null:Le=Ye.points[me+Ye.pointsize],he!==null&&De!==null&&Oe===null&&Le===null&&(Pe.push(he),Pe.push(De),Pe.push.apply(Pe,be)),Oe=he}var $e=Ye.points;Ye.points=Pe,le.points.radius=le.lines.lineWidth/2,_(le),Ye.points=$e}function te(le){le.lines.show&&(ae(le),!le.points.show&&!le.bars.show&&X(le)),le.bars.show&&Ve(le),le.points.show&&_(le)}function ae(le){function Pe(me,he,De,$e,ke){var tt=me.points,Ge=me.pointsize,dt=null,pt=null;d.beginPath();for(var Ke=Ge;Ke<tt.length;Ke+=Ge){var je=tt[Ke-Ge],ot=tt[Ke-Ge+1],at=tt[Ke],xt=tt[Ke+1];if(!(je==null||at==null)){if(ot<=xt&&ot<ke.min){if(xt<ke.min)continue;je=(ke.min-ot)/(xt-ot)*(at-je)+je,ot=ke.min}else if(xt<=ot&&xt<ke.min){if(ot<ke.min)continue;at=(ke.min-ot)/(xt-ot)*(at-je)+je,xt=ke.min}if(ot>=xt&&ot>ke.max){if(xt>ke.max)continue;je=(ke.max-ot)/(xt-ot)*(at-je)+je,ot=ke.max}else if(xt>=ot&&xt>ke.max){if(ot>ke.max)continue;at=(ke.max-ot)/(xt-ot)*(at-je)+je,xt=ke.max}if(je<=at&&je<$e.min){if(at<$e.min)continue;ot=($e.min-je)/(at-je)*(xt-ot)+ot,je=$e.min}else if(at<=je&&at<$e.min){if(je<$e.min)continue;xt=($e.min-je)/(at-je)*(xt-ot)+ot,at=$e.min}if(je>=at&&je>$e.max){if(at>$e.max)continue;ot=($e.max-je)/(at-je)*(xt-ot)+ot,je=$e.max}else if(at>=je&&at>$e.max){if(je>$e.max)continue;xt=($e.max-je)/(at-je)*(xt-ot)+ot,at=$e.max}(je!=dt||ot!=pt)&&d.moveTo($e.p2c(je)+he,ke.p2c(ot)+De),dt=at,pt=xt,d.lineTo($e.p2c(at)+he,ke.p2c(xt)+De)}}d.stroke()}function Oe(me,he,De){for(var $e=me.points,ke=me.pointsize,tt=Math.min(Math.max(0,De.min),De.max),Ge=0,dt,pt=!1,Ke=1,je=0,ot=0;!(ke>0&&Ge>$e.length+ke);){Ge+=ke;var at=$e[Ge-ke],xt=$e[Ge-ke+Ke],Dt=$e[Ge],wt=$e[Ge+Ke];if(pt){if(ke>0&&at!=null&&Dt==null){ot=Ge,ke=-ke,Ke=2;continue}if(ke<0&&Ge==je+ke){d.fill(),pt=!1,ke=-ke,Ke=1,Ge=je=ot+ke;continue}}if(!(at==null||Dt==null)){if(at<=Dt&&at<he.min){if(Dt<he.min)continue;xt=(he.min-at)/(Dt-at)*(wt-xt)+xt,at=he.min}else if(Dt<=at&&Dt<he.min){if(at<he.min)continue;wt=(he.min-at)/(Dt-at)*(wt-xt)+xt,Dt=he.min}if(at>=Dt&&at>he.max){if(Dt>he.max)continue;xt=(he.max-at)/(Dt-at)*(wt-xt)+xt,at=he.max}else if(Dt>=at&&Dt>he.max){if(at>he.max)continue;wt=(he.max-at)/(Dt-at)*(wt-xt)+xt,Dt=he.max}if(pt||(d.beginPath(),d.moveTo(he.p2c(at),De.p2c(tt)),pt=!0),xt>=De.max&&wt>=De.max){d.lineTo(he.p2c(at),De.p2c(De.max)),d.lineTo(he.p2c(Dt),De.p2c(De.max));continue}else if(xt<=De.min&&wt<=De.min){d.lineTo(he.p2c(at),De.p2c(De.min)),d.lineTo(he.p2c(Dt),De.p2c(De.min));continue}var sn=at,mn=Dt;xt<=wt&&xt<De.min&&wt>=De.min?(at=(De.min-xt)/(wt-xt)*(Dt-at)+at,xt=De.min):wt<=xt&&wt<De.min&&xt>=De.min&&(Dt=(De.min-xt)/(wt-xt)*(Dt-at)+at,wt=De.min),xt>=wt&&xt>De.max&&wt<=De.max?(at=(De.max-xt)/(wt-xt)*(Dt-at)+at,xt=De.max):wt>=xt&&wt>De.max&&xt<=De.max&&(Dt=(De.max-xt)/(wt-xt)*(Dt-at)+at,wt=De.max),at!=sn&&d.lineTo(he.p2c(sn),De.p2c(xt)),d.lineTo(he.p2c(at),De.p2c(xt)),d.lineTo(he.p2c(Dt),De.p2c(wt)),Dt!=mn&&(d.lineTo(he.p2c(Dt),De.p2c(wt)),d.lineTo(he.p2c(mn),De.p2c(wt)))}}}d.save(),d.translate(h.left,h.top),d.lineJoin="round";var Le=le.lines.lineWidth,Ye=le.shadowSize;if(Le>0&&Ye>0){d.lineWidth=Ye,d.strokeStyle="rgba(0,0,0,0.1)";var be=Math.PI/18;Pe(le.datapoints,Math.sin(be)*(Le/2+Ye/2),Math.cos(be)*(Le/2+Ye/2),le.xaxis,le.yaxis),d.lineWidth=Ye/2,Pe(le.datapoints,Math.sin(be)*(Le/2+Ye/4),Math.cos(be)*(Le/2+Ye/4),le.xaxis,le.yaxis)}d.lineWidth=Le,d.strokeStyle=le.color;var Te=it(le.lines,le.color,0,v);Te&&(d.fillStyle=Te,Oe(le.datapoints,le.xaxis,le.yaxis)),Le>0&&Pe(le.datapoints,0,0,le.xaxis,le.yaxis),d.restore()}function _(le){function Pe(me,he,De,$e,ke,tt,Ge,dt){for(var pt=me.points,Ke=me.pointsize,je=0;je<pt.length;je+=Ke){var ot=pt[je],at=pt[je+1];ot==null||ot<tt.min||ot>tt.max||at<Ge.min||at>Ge.max||(d.beginPath(),ot=tt.p2c(ot),at=Ge.p2c(at)+$e,dt=="circle"?d.arc(ot,at,he,0,ke?Math.PI:Math.PI*2,!1):dt(d,ot,at,he,ke),d.closePath(),De&&(d.fillStyle=De,d.fill()),d.stroke())}}d.save(),d.translate(h.left,h.top);var Oe=le.points.lineWidth,Le=le.shadowSize,Ye=le.points.radius,be=le.points.symbol;if(Oe==0&&(Oe=1e-4),Oe>0&&Le>0){var Te=Le/2;d.lineWidth=Te,d.strokeStyle="rgba(0,0,0,0.1)",Pe(le.datapoints,Ye,null,Te+Te/2,!0,le.xaxis,le.yaxis,be),d.strokeStyle="rgba(0,0,0,0.2)",Pe(le.datapoints,Ye,null,Te/2,!0,le.xaxis,le.yaxis,be)}d.lineWidth=Oe,d.strokeStyle=le.color,Pe(le.datapoints,Ye,it(le.points,le.color),0,!1,le.xaxis,le.yaxis,be),d.restore()}function ve(le,Pe,Oe,Le,Ye,be,Te,me,he,De,$e){var ke,tt,Ge,dt,pt,Ke,je,ot,at;De?(ot=Ke=je=!0,pt=!1,ke=Oe,tt=le,dt=Pe+Le,Ge=Pe+Ye,tt<ke&&(at=tt,tt=ke,ke=at,pt=!0,Ke=!1)):(pt=Ke=je=!0,ot=!1,ke=le+Le,tt=le+Ye,Ge=Oe,dt=Pe,dt<Ge&&(at=dt,dt=Ge,Ge=at,ot=!0,je=!1)),!(tt<Te.min||ke>Te.max||dt<me.min||Ge>me.max)&&(ke<Te.min&&(ke=Te.min,pt=!1),tt>Te.max&&(tt=Te.max,Ke=!1),Ge<me.min&&(Ge=me.min,ot=!1),dt>me.max&&(dt=me.max,je=!1),ke=Te.p2c(ke),Ge=me.p2c(Ge),tt=Te.p2c(tt),dt=me.p2c(dt),be&&(he.fillStyle=be(Ge,dt),he.fillRect(ke,dt,tt-ke,Ge-dt)),$e>0&&(pt||Ke||je||ot)&&(he.beginPath(),he.moveTo(ke,Ge),pt?he.lineTo(ke,dt):he.moveTo(ke,dt),je?he.lineTo(tt,dt):he.moveTo(tt,dt),Ke?he.lineTo(tt,Ge):he.moveTo(tt,Ge),ot?he.lineTo(ke,Ge):he.moveTo(ke,Ge),he.stroke()))}function Ve(le){function Pe(Ye,be,Te,me,he,De){for(var $e=Ye.points,ke=Ye.pointsize,tt=0;tt<$e.length;tt+=ke)$e[tt]!=null&&ve($e[tt],$e[tt+1],$e[tt+2],be,Te,me,he,De,d,le.bars.horizontal,le.bars.lineWidth)}d.save(),d.translate(h.left,h.top),d.lineWidth=le.bars.lineWidth,d.strokeStyle=le.color;var Oe;switch(le.bars.align){case"left":Oe=0;break;case"right":Oe=-le.bars.barWidth;break;default:Oe=-le.bars.barWidth/2}var Le=le.bars.fill?function(Ye,be){return it(le.bars,le.color,Ye,be)}:null;Pe(le.datapoints,Oe,Oe+le.bars.barWidth,Le,le.xaxis,le.yaxis),d.restore()}function it(le,Pe,Oe,Le){var Ye=le.fill;if(!Ye)return null;if(le.fillColor)return nt(le.fillColor,Oe,Le,Pe);var be=Z.color.parse(Pe);return be.a=typeof Ye=="number"?Ye:.4,be.normalize(),be.toString()}function rt(){if(o.legend.container!=null?Z.find(o.legend.container).html(""):l.find(".legend").remove(),!!o.legend.show){for(var le=[],Pe=[],Oe=!1,Le=o.legend.labelFormatter,Ye,be,Te=0;Te<c.length;++Te)Ye=c[Te],Ye.label&&(be=Le?Le(Ye.label,Ye):Ye.label,be&&Pe.push({label:be,color:Ye.color}));if(o.legend.sorted)if(Z.isFunction(o.legend.sorted))Pe.sort(o.legend.sorted);else if(o.legend.sorted=="reverse")Pe.reverse();else{var me=o.legend.sorted!="descending";Pe.sort(function(Ke,je){return Ke.label==je.label?0:Ke.label<je.label!=me?1:-1})}for(var Te=0;Te<Pe.length;++Te){var he=Pe[Te];Te%o.legend.noColumns==0&&(Oe&&le.push("</tr>"),le.push("<tr>"),Oe=!0),le.push('<td class="legendColorBox"><div style="border:1px solid '+o.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+he.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+he.label+"</td>")}if(Oe&&le.push("</tr>"),le.length!=0){var De='<table style="font-size:smaller;color:'+o.grid.color+'">'+le.join("")+"</table>";if(o.legend.container!=null)Z(o.legend.container).html(De);else{var $e="",ke=o.legend.position,tt=o.legend.margin;tt[0]==null&&(tt=[tt,tt]),ke.charAt(0)=="n"?$e+="top:"+(tt[1]+h.top)+"px;":ke.charAt(0)=="s"&&($e+="bottom:"+(tt[1]+h.bottom)+"px;"),ke.charAt(1)=="e"?$e+="right:"+(tt[0]+h.right)+"px;":ke.charAt(1)=="w"&&($e+="left:"+(tt[0]+h.left)+"px;");var Ge=Z('<div class="legend">'+De.replace('style="','style="position:absolute;'+$e+";")+"</div>").appendTo(l);if(o.legend.backgroundOpacity!=0){var dt=o.legend.backgroundColor;dt==null&&(dt=o.grid.backgroundColor,dt&&typeof dt=="string"?dt=Z.color.parse(dt):dt=Z.color.extract(Ge,"background-color"),dt.a=1,dt=dt.toString());var pt=Ge.children();Z('<div style="position:absolute;width:'+pt.width()+"px;height:"+pt.height()+"px;"+$e+"background-color:"+dt+';"> </div>').prependTo(Ge).css("opacity",o.legend.backgroundOpacity)}}}}}var pe=[],Ie=null;function We(le,Pe,Oe){var Le=o.grid.mouseActiveRadius,Ye=Le*Le+1,be=null,Te=!1,me,he,De;for(me=c.length-1;me>=0;--me)if(Oe(c[me])){var $e=c[me],ke=$e.xaxis,tt=$e.yaxis,Ge=$e.datapoints.points,dt=ke.c2p(le),pt=tt.c2p(Pe),Ke=Le/ke.scale,je=Le/tt.scale;if(De=$e.datapoints.pointsize,ke.options.inverseTransform&&(Ke=Number.MAX_VALUE),tt.options.inverseTransform&&(je=Number.MAX_VALUE),$e.lines.show||$e.points.show)for(he=0;he<Ge.length;he+=De){var ot=Ge[he],at=Ge[he+1];if(ot!=null&&!(ot-dt>Ke||ot-dt<-Ke||at-pt>je||at-pt<-je)){var xt=Math.abs(ke.p2c(ot)-le),Dt=Math.abs(tt.p2c(at)-Pe),wt=xt*xt+Dt*Dt;wt<Ye&&(Ye=wt,be=[me,he/De])}}if($e.bars.show&&!be){var sn,mn;switch($e.bars.align){case"left":sn=0;break;case"right":sn=-$e.bars.barWidth;break;default:sn=-$e.bars.barWidth/2}for(mn=sn+$e.bars.barWidth,he=0;he<Ge.length;he+=De){var ot=Ge[he],at=Ge[he+1],Dn=Ge[he+2];ot!=null&&(c[me].bars.horizontal?dt<=Math.max(Dn,ot)&&dt>=Math.min(Dn,ot)&&pt>=at+sn&&pt<=at+mn:dt>=ot+sn&&dt<=ot+mn&&pt>=Math.min(Dn,at)&&pt<=Math.max(Dn,at))&&(be=[me,he/De])}}}return be?(me=be[0],he=be[1],De=c[me].datapoints.pointsize,{datapoint:c[me].datapoints.points.slice(he*De,(he+1)*De),dataIndex:he,series:c[me],seriesIndex:me}):null}function Je(le){o.grid.hoverable&&Se("plothover",le,function(Pe){return Pe.hoverable!=!1})}function He(le){o.grid.hoverable&&Se("plothover",le,function(Pe){return!1})}function Ae(le){y.isSelecting||Se("plotclick",le,function(Pe){return Pe.clickable!=!1})}function et(le){if(le.cancelable){if(!u.is(le.target)&&u.has(le.target).length===0){Se("plotleave",le,function(Pe){});return}Je(_e(le)),le.preventDefault()}}function _e(le){if(!le||!le.originalEvent||le.pageX&&le.pageY)return le;var Pe=le.originalEvent;if(Pe.changedTouches.length===0)return le;var Oe=Pe.changedTouches[0];return le.pageX=Oe.pageX,le.pageY=Oe.pageY,le}function Se(le,Pe,Oe){var Le=u.offset(),Ye=Pe.pageX-Le.left-h.left,be=Pe.pageY-Le.top-h.top,Te=w({left:Ye,top:be});Te.pageX=Pe.pageX,Te.pageY=Pe.pageY,Te.ctrlKey=Pe.ctrlKey,Te.metaKey=Pe.metaKey;var me=We(Ye,be,Oe);if(me&&(me.pageX=parseInt(me.series.xaxis.p2c(me.datapoint[0])+Le.left+h.left,10),me.pageY=parseInt(me.series.yaxis.p2c(me.datapoint[1])+Le.top+h.top,10)),o.grid.autoHighlight){for(var he=0;he<pe.length;++he){var De=pe[he];De.auto==le&&!(me&&De.series==me.series&&De.point[0]==me.datapoint[0]&&De.point[1]==me.datapoint[1])&&ct(De.series,De.point)}me&&Qe(me.series,me.datapoint,le)}l.trigger(le,[Te,me])}function Fe(){var le=o.interaction.redrawOverlayInterval;if(le==-1){Xe();return}Ie||(Ie=setTimeout(Xe,le))}function Xe(){Ie=null,g.save(),r.clear(),g.translate(h.left,h.top);var le,Pe;for(le=0;le<pe.length;++le)Pe=pe[le],Pe.series.bars.show?Re(Pe.series,Pe.point):ft(Pe.series,Pe.point);g.restore(),C(x.drawOverlay,[g])}function Qe(le,Pe,Oe){if(typeof le=="number"&&(le=c[le]),typeof Pe=="number"){var Le=le.datapoints.pointsize;Pe=le.datapoints.points.slice(Le*Pe,Le*(Pe+1))}var Ye=ht(le,Pe);Ye==-1?(pe.push({series:le,point:Pe,auto:Oe}),Fe()):Oe||(pe[Ye].auto=!1)}function ct(le,Pe){if(le==null&&Pe==null){pe=[],Fe();return}if(typeof le=="number"&&(le=c[le]),typeof Pe=="number"){var Oe=le.datapoints.pointsize;Pe=le.datapoints.points.slice(Oe*Pe,Oe*(Pe+1))}var Le=ht(le,Pe);Le!=-1&&(pe.splice(Le,1),Fe())}function ht(le,Pe){for(var Oe=0;Oe<pe.length;++Oe){var Le=pe[Oe];if(Le.series==le&&Le.point[0]==Pe[0]&&Le.point[1]==Pe[1])return Oe}return-1}function ft(le,Pe){var Oe=Pe[0],Le=Pe[1],Ye=le.xaxis,be=le.yaxis,Te=typeof le.highlightColor=="string"?le.highlightColor:Z.color.parse(le.color).scale("a",.5).toString();if(!(Oe<Ye.min||Oe>Ye.max||Le<be.min||Le>be.max)){var me=le.points.radius+le.points.lineWidth/2;g.lineWidth=me,g.strokeStyle=Te;var he=1.5*me;Oe=Ye.p2c(Oe),Le=be.p2c(Le),g.beginPath(),le.points.symbol=="circle"?g.arc(Oe,Le,he,0,2*Math.PI,!1):le.points.symbol(g,Oe,Le,he,!1),g.closePath(),g.stroke()}}function Re(le,Pe){var Oe=typeof le.highlightColor=="string"?le.highlightColor:Z.color.parse(le.color).scale("a",.5).toString(),Le=Oe,Ye;switch(le.bars.align){case"left":Ye=0;break;case"right":Ye=-le.bars.barWidth;break;default:Ye=-le.bars.barWidth/2}g.lineWidth=le.bars.lineWidth,g.strokeStyle=Oe,ve(Pe[0],Pe[1],Pe[2]||0,Ye,Ye+le.bars.barWidth,function(){return Le},le.xaxis,le.yaxis,g,le.bars.horizontal,le.bars.lineWidth)}function nt(le,Pe,Oe,Le){if(typeof le=="string")return le;for(var Ye=d.createLinearGradient(0,Oe,0,Pe),be=0,Te=le.colors.length;be<Te;++be){var me=le.colors[be];if(typeof me!="string"){var he=Z.color.parse(Le);me.brightness!=null&&(he=he.scale("rgb",me.brightness)),me.opacity!=null&&(he.a*=me.opacity),me=he.toString()}Ye.addColorStop(be/(Te-1),me)}return Ye}}Z.plot=function(l,s,i){var f=new t(Z(l),s,i,Z.plot.plugins);return f},Z.plot.version="0.8.3",Z.plot.plugins=[],Z.fn.plot=function(l,s){return this.each(function(){Z.plot(this,l,s)})};function n(l,s){return s*Math.floor(l/s)}}(jQuery)},4027:()=>{(function(Z){function O(e){var t={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},n={},l=null;function s(h){t.active&&(u(h),e.getPlaceholder().trigger("plotselecting",[c()]))}function i(h){h.which==1&&(document.body.focus(),document.onselectstart!==void 0&&n.onselectstart==null&&(n.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!==void 0&&n.ondrag==null&&(n.ondrag=document.ondrag,document.ondrag=function(){return!1}),r(t.first,h),t.active=!0,l=function(a){f(a)},Z(document).one("mouseup",l))}function f(h){return l=null,document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag),t.active=!1,u(h),E()?o(h):(e.getPlaceholder().trigger("plotunselected",[]),e.getPlaceholder().trigger("plotselecting",[null])),setTimeout(function(){e.isSelecting=!1},10),!1}function c(){if(!E()||!t.show)return null;var h={},a=t.first,v=t.second,x=e.getAxes(),y=!0;return Z.each(x,function(C,P){P.used&&(anyUsed=!1)}),Z.each(x,function(C,P){if(P.used||y){var D=P.c2p(a[P.direction]),M=P.c2p(v[P.direction]);h[C]={from:Math.min(D,M),to:Math.max(D,M)}}}),h}function o(h){var a=c();a.ctrlKey=h.ctrlKey,a.metaKey=h.metaKey,e.getPlaceholder().trigger("plotselected",[a]),a.xaxis&&a.yaxis&&e.getPlaceholder().trigger("selected",[{x1:a.xaxis.from,y1:a.yaxis.from,x2:a.xaxis.to,y2:a.yaxis.to}])}function m(h,a,v){return a<h?h:a>v?v:a}function r(h,a){var v=e.getOptions(),x=e.getPlaceholder().offset(),y=e.getPlotOffset();h.x=m(0,a.pageX-x.left-y.left,e.width()),h.y=m(0,a.pageY-x.top-y.top,e.height()),v.selection.mode=="y"&&(h.x=h==t.first?0:e.width()),v.selection.mode=="x"&&(h.y=h==t.first?0:e.height())}function u(h){h.pageX!=null&&(r(t.second,h),E()?(e.isSelecting=!0,t.show=!0,e.triggerRedrawOverlay()):d(!0))}function d(h){t.show&&(t.show=!1,e.triggerRedrawOverlay(),h||e.getPlaceholder().trigger("plotunselected",[]))}function g(h,a){var v,x,y,C,P=e.getAxes();for(var D in P)if(v=P[D],v.direction==a&&(C=a+v.n+"axis",!h[C]&&v.n==1&&(C=a+"axis"),h[C])){x=h[C].from,y=h[C].to;break}if(h[C]||(v=a=="x"?e.getXAxes()[0]:e.getYAxes()[0],x=h[a+"1"],y=h[a+"2"]),x!=null&&y!=null&&x>y){var M=x;x=y,y=M}return{from:x,to:y,axis:v}}function p(h,a){var v,x,y=e.getOptions();y.selection.mode=="y"?(t.first.x=0,t.second.x=e.width()):(x=g(h,"x"),t.first.x=x.axis.p2c(x.from),t.second.x=x.axis.p2c(x.to)),y.selection.mode=="x"?(t.first.y=0,t.second.y=e.height()):(x=g(h,"y"),t.first.y=x.axis.p2c(x.from),t.second.y=x.axis.p2c(x.to)),t.show=!0,e.triggerRedrawOverlay(),!a&&E()&&o()}function E(){var h=e.getOptions().selection.minSize;return Math.abs(t.second.x-t.first.x)>=h&&Math.abs(t.second.y-t.first.y)>=h}e.clearSelection=d,e.setSelection=p,e.getSelection=c,e.hooks.bindEvents.push(function(h,a){var v=h.getOptions();v.selection.mode!=null&&(a.mousemove(s),a.mousedown(i))}),e.hooks.drawOverlay.push(function(h,a){if(t.show&&E()){var v=h.getPlotOffset(),x=h.getOptions();a.save(),a.translate(v.left,v.top);var y=Z.color.parse(x.selection.color);a.strokeStyle=y.scale("a",.8).toString(),a.lineWidth=1,a.lineJoin=x.selection.shape,a.fillStyle=y.scale("a",.4).toString();var C=Math.min(t.first.x,t.second.x)+.5,P=Math.min(t.first.y,t.second.y)+.5,D=Math.abs(t.second.x-t.first.x)-1,M=Math.abs(t.second.y-t.first.y)-1;a.fillRect(C,P,D,M),a.strokeRect(C,P,D,M),a.restore()}}),e.hooks.shutdown.push(function(h,a){a.unbind("mousemove",s),a.unbind("mousedown",i),l&&(Z(document).unbind("mouseup",l),document.onselectstart!==void 0&&(document.onselectstart=n.onselectstart),document.ondrag!==void 0&&(document.ondrag=n.ondrag))})}Z.plot.plugins.push({init:O,options:{selection:{mode:null,color:"#e8cfac",shape:"round",minSize:5}},name:"selection",version:"1.1"})})(jQuery)},65103:()=>{(function(Z){var O={series:{stack:null}};function e(t){function n(s,i){for(var f=null,c=0;c<i.length&&s!=i[c];++c)i[c].stack==s.stack&&(f=i[c]);return f}function l(s,i,f){if(!(i.stack==null||i.stack===!1)){var c=n(i,s.getData());if(c){for(var o=f.pointsize,m=f.points,r=c.datapoints.pointsize,u=c.datapoints.points,d=[],g,p,E,h,a,v,x=i.lines.show,y=i.bars.horizontal,C=o>2&&(y?f.format[2].x:f.format[2].y),P=x&&i.lines.steps,D=y?1:0,M=y?0:1,b=0,R=0,B,w;!(b>=m.length&&R>=u.length);){if(B=d.length,b<m.length&&m[b]==null){for(w=0;w<o;++w)d.push(m[b+w]);b+=o}else if(b>=m.length){for(w=0;w<o;++w)d.push(u[R+w]);C&&(d[B+2]=u[R+M]),R+=r}else if(R>=u.length){for(w=0;w<o;++w)d.push(m[b+w]);b+=o}else if(R<u.length&&u[R]==null)R+=r;else{if(g=m[b+D],p=m[b+M],h=u[R+D],a=u[R+M],v=0,g==h){for(w=0;w<o;++w)d.push(m[b+w]);d[B+M]+=a,v=a,b+=o,R+=r}else if(g>h){if(b==0){for(w=0;w<o;++w)d.push(u[R+w]);v=a}if(b>0&&m[b-o]!=null){for(E=0,d.push(h),d.push(E+a),w=2;w<o;++w)d.push(m[b+w]);v=a}R+=r}else{for(w=0;w<o;++w)d.push(m[b+w]);R>0&&u[R-r]!=null&&(v=0),d[B+M]+=v,b+=o}fromgap=!1,B!=d.length&&C&&(d[B+2]=v)}if(P&&B!=d.length&&B>0&&d[B]!=null&&d[B]!=d[B-o]&&d[B+1]!=d[B-o+1]){for(w=0;w<o;++w)d[B+o+w]=d[B+w];d[B+1]=d[B-o+1]}}f.points=d}}}t.hooks.processDatapoints.push(l)}Z.plot.plugins.push({init:e,options:O,name:"stack",version:"1.2"})})(jQuery)},85095:()=>{(function(Z){var O={series:{stackpercent:null}};function e(t){var n={},l=!1,s={};function i(o,m,r,u){if(l||(l=!0,s=f(o.getData())),m.stackpercent==!0){var d=r.length;m.percents=[];var g=0,p=1;m.bars&&m.bars.horizontal&&m.bars.horizontal===!0&&(g=1,p=0);for(var E=0;E<d;E++){var h=s[r[E][g]+""];h>0?m.percents.push(r[E][p]*100/h):m.percents.push(0)}}}function f(o){var m=o.length,r={};if(m>0){for(var u=0;u<m;u++)if(o[u].stackpercent){var d=0,g=1;o[u].bars&&o[u].bars.horizontal&&o[u].bars.horizontal===!0&&(d=1,g=0);for(var p=o[u].data.length,E=0;E<p;E++){var h=0;o[u].data[E][1]!=null&&(h=o[u].data[E][g]),r[o[u].data[E][d]+""]?r[o[u].data[E][d]+""]+=h:r[o[u].data[E][d]+""]=h}}}return r}function c(o,m,r){if(m.stackpercent){l||(s=f(o.getData()));var u=[],d=0,g=1;m.bars&&m.bars.horizontal&&m.bars.horizontal===!0&&(d=1,g=0);for(var p=0;p<r.points.length;p+=3)n[r.points[p+d]]||(n[r.points[p+d]]=0),u[p+d]=r.points[p+d],u[p+g]=r.points[p+g]+n[r.points[p+d]],u[p+2]=n[r.points[p+d]],n[r.points[p+d]]+=r.points[p+g],s[u[p+d]+""]>0?(u[p+g]=u[p+g]*100/s[u[p+d]+""],u[p+2]=u[p+2]*100/s[u[p+d]+""]):(u[p+g]=0,u[p+2]=0);r.points=u}}t.hooks.processRawData.push(i),t.hooks.processDatapoints.push(c)}Z.plot.plugins.push({init:e,options:O,name:"stackpercent",version:"0.1"})})(jQuery)},59554:()=>{(function(Z){var O={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}};function e(m,r){return r*Math.floor(m/r)}function t(m,r,u,d){if(typeof m.strftime=="function")return m.strftime(r);var g=function(C,P){return C=""+C,P=""+(P??"0"),C.length==1?P+C:C},p=[],E=!1,h=m.getHours(),a=h<12;u==null&&(u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),d==null&&(d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var v;h>12?v=h-12:h==0?v=12:v=h;for(var x=0;x<r.length;++x){var y=r.charAt(x);if(E){switch(y){case"a":y=""+d[m.getDay()];break;case"b":y=""+u[m.getMonth()];break;case"d":y=g(m.getDate(),"");break;case"e":y=g(m.getDate()," ");break;case"h":case"H":y=g(h);break;case"I":y=g(v);break;case"l":y=g(v," ");break;case"m":y=g(m.getMonth()+1,"");break;case"M":y=g(m.getMinutes());break;case"q":y=""+(Math.floor(m.getMonth()/3)+1);break;case"S":y=g(m.getSeconds());break;case"y":y=g(m.getFullYear()%100);break;case"Y":y=""+m.getFullYear();break;case"p":y=a?"am":"pm";break;case"P":y=a?"AM":"PM";break;case"w":y=""+m.getDay();break}p.push(y),E=!1}else y=="%"?E=!0:p.push(y)}return p.join("")}function n(m){function r(p,E,h,a){p[E]=function(){return h[a].apply(h,arguments)}}var u={date:m};m.strftime!=null&&r(u,"strftime",m,"strftime"),r(u,"getTime",m,"getTime"),r(u,"setTime",m,"setTime");for(var d=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],g=0;g<d.length;g++)r(u,"get"+d[g],m,"getUTC"+d[g]),r(u,"set"+d[g],m,"setUTC"+d[g]);return u}function l(m,r){if(r.timezone=="browser")return new Date(m);if(!r.timezone||r.timezone=="utc")return n(new Date(m));if(typeof timezoneJS<"u"&&typeof timezoneJS.Date<"u"){var u=new timezoneJS.Date;return u.setTimezone(r.timezone),u.setTime(m),u}else return n(new Date(m))}var s={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,quarter:3*30*24*60*60*1e3,year:365.2425*24*60*60*1e3},i=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],f=i.concat([[3,"month"],[6,"month"],[1,"year"]]),c=i.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);function o(m){m.hooks.processOptions.push(function(r,u){Z.each(r.getAxes(),function(d,g){var p=g.options;p.mode=="time"&&(g.tickGenerator=function(E){var h=[],a=l(E.min,p),v=0,x=p.tickSize&&p.tickSize[1]==="quarter"||p.minTickSize&&p.minTickSize[1]==="quarter"?c:f;p.minTickSize!=null&&(typeof p.tickSize=="number"?v=p.tickSize:v=p.minTickSize[0]*s[p.minTickSize[1]]);for(var y=0;y<x.length-1&&!(E.delta<(x[y][0]*s[x[y][1]]+x[y+1][0]*s[x[y+1][1]])/2&&x[y][0]*s[x[y][1]]>=v);++y);var C=x[y][0],P=x[y][1];if(P=="year"){if(p.minTickSize!=null&&p.minTickSize[1]=="year")C=Math.floor(p.minTickSize[0]);else{var D=Math.pow(10,Math.floor(Math.log(E.delta/s.year)/Math.LN10)),M=E.delta/s.year/D;M<1.5?C=1:M<3?C=2:M<7.5?C=5:C=10,C*=D}C<1&&(C=1)}E.tickSize=p.tickSize||[C,P];var b=E.tickSize[0];P=E.tickSize[1];var R=b*s[P];P=="second"?a.setSeconds(e(a.getSeconds(),b)):P=="minute"?a.setMinutes(e(a.getMinutes(),b)):P=="hour"?a.setHours(e(a.getHours(),b)):P=="month"?a.setMonth(e(a.getMonth(),b)):P=="quarter"?a.setMonth(3*e(a.getMonth()/3,b)):P=="year"&&a.setFullYear(e(a.getFullYear(),b)),a.setMilliseconds(0),R>=s.minute&&a.setSeconds(0),R>=s.hour&&a.setMinutes(0),R>=s.day&&a.setHours(0),R>=s.day*4&&a.setDate(1),R>=s.month*2&&a.setMonth(e(a.getMonth(),3)),R>=s.quarter*2&&a.setMonth(e(a.getMonth(),6)),R>=s.year&&a.setMonth(0);var B=0,w=Number.NaN,A;do if(A=w,w=a.getTime(),h.push(w),P=="month"||P=="quarter")if(b<1){a.setDate(1);var I=a.getTime();a.setMonth(a.getMonth()+(P=="quarter"?3:1));var F=a.getTime();a.setTime(w+B*s.hour+(F-I)*b),B=a.getHours(),a.setHours(0)}else a.setMonth(a.getMonth()+b*(P=="quarter"?3:1));else P=="year"?a.setFullYear(a.getFullYear()+b):a.setTime(w+R);while(w<E.max&&w!=A);return h},g.tickFormatter=function(E,h){var a=l(E,h.options);if(p.timeformat!=null)return t(a,p.timeformat,p.monthNames,p.dayNames);var v=h.options.tickSize&&h.options.tickSize[1]=="quarter"||h.options.minTickSize&&h.options.minTickSize[1]=="quarter",x=h.tickSize[0]*s[h.tickSize[1]],y=h.max-h.min,C=p.twelveHourClock?" %p":"",P=p.twelveHourClock?"%I":"%H",D;x<s.minute?D=P+":%M:%S"+C:x<s.day?y<2*s.day?D=P+":%M"+C:D="%b %d "+P+":%M"+C:x<s.month?D="%b %d":v&&x<s.quarter||!v&&x<s.year?y<s.year?D="%b":D="%b %Y":v&&x<s.year?y<s.year?D="Q%q":D="Q%q %Y":D="%Y";var M=t(a,D,p.monthNames,p.dayNames);return M})})})}Z.plot.plugins.push({init:o,options:O,name:"time",version:"1.0"}),Z.plot.formatDate=t})(jQuery)}}]);

//# sourceMappingURL=6749.dcda36f2155b00177c16.js.map